"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5223],{25223:function(e,t,n){n.r(t),n.d(t,{SlideshowLoader:function(){return H},default:function(){return Z}});var o=n(59499),i=n(67294),a=n(24561),r=(n(29544),n(91296)),s=n.n(r),l=n(29208),c=n.n(l),u=n(48016),d=n(92146),h=n(1591),p=n(41507),v=n(31849),f=n(82504),g=n(15240),w=n(86381),m=n(72372),y=n(20931),x=n(45732),b=n(66120),S=function(){var e,t;return"ontouchstart"in(window||{})||((null===(e=navigator)||void 0===e?void 0:e.maxTouchPoints)||0)>0||((null===(t=navigator)||void 0===t?void 0:t.msMaxTouchPoints)||0)>0},j=n(89784),P=n(12418),C=n(19339),E=n(60479),k=n(76935),O=function(e){var t=e.breakpoints,n=e.autoplay,o=e.useSameCaption,i=(null===t||void 0===t?void 0:t.bp)&&((null===t||void 0===t?void 0:t.sm)||(null===t||void 0===t?void 0:t.xs)),a=[!i&&{type:"button",props:{iconName:"autoplay",label:n?"Don't autoplay slideshow":"Autoplay slideshow"},initialVals:{selected:n},handlers:{onClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.YL;e.setEntity((function(e){e.props.customFields.slideshowAutoplay=!e.props.customFields.slideshowAutoplay}))}}},!i&&{type:"button",props:{iconName:"subtitles",label:o?"Don't use same caption":"Use same caption"},initialVals:{selected:o},handlers:{onClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.YL;e.setEntity((function(e){e.props.customFields.slideshowUseSameCaption=!e.props.customFields.slideshowUseSameCaption}))}}}],r=(0,k.Z)(e);return[].concat(r).concat(a)},T=n(8584),L=n(85893);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=function(e){var t=(0,y.Yw)().EditableArt,n=(0,m.ql)().useDesktopOrdering,o=O(R(R({},e),{},{useDesktopOrdering:n}));return(0,L.jsx)(t,{menuItems:o,children:(0,L.jsx)("div",{className:"absolute top-0 left-0 w-100",style:{paddingBottom:"25%"}})})},H=function(e){var t=e.count,n=void 0===t?0:t,o=e.width,r=e.height,s=e.allowCaptions,l=e.captionLineCountEstimate,c=void 0===l?1:l,u=e.allowDots,d=e.className,h=e.style,p=e.breakpoint,v=void 0===p?"mx":p;n=n>5?5:n;var f=Math.ceil(c),g=o,w=r,m=s||u?4:0,y=n,x=o,b=c%1*o,S=s?f*P.pT:0,j=s?"Captions":"",C=u?P.pT:0,E=u?16:0,k=u?"Dots":"",O=u?4:0,T="xs"===v,N=o,R=w+m+S+0+C+E+(O=s?O:-4),D=T?"100%":N,H=T?"".concat(100*r/o,"%"):R;return(0,L.jsxs)(a.default,{speed:2,width:D,height:H,viewBox:"0 0 ".concat(N," ").concat(R),backgroundColor:"#f0f0f0",foregroundColor:"#e9e9e9",className:d,style:h,uniqueKey:"SlideshowLoader".concat(y).concat(j).concat(b).concat(k).concat(o,"x").concat(r),children:[(0,L.jsx)("rect",{x:"0",y:"0",width:g,height:w}),S&&(0,L.jsx)(i.Fragment,{children:new Array(f).fill().map((function(e,t){var n=t+1===f?b:x;return(0,L.jsx)("rect",{x:"0",y:w+m+1+t*P.pT,rx:"3",ry:"3",width:n,height:P.pT-2},t)}))}),C&&(0,L.jsx)(i.Fragment,{children:new Array(n).fill().map((function(e,t){var o=w+m+S+0+E+O,i=t+1===n/2?0:14*(t-n/2);n%2===0&&t%2===0&&0===i?i-=7:i+=7;var a=t+1===n?2:3;return a=0===t?4:a,(0,L.jsx)("circle",{cx:"50%",cy:o,r:a,transform:"translate(".concat(i," 0)")},t)}))})]})},Z=function(e){var t=e.images,n=e.aspectRatioString,a=void 0===n?"3:2":n,r=e.artWidth,l=e.useHiRes,m=e.warning,y=e.allowCaptions,k=e.charsInLongestCaption,O=e.useSameCaption,N=e.overlay,Z=e.linkUrl,A=e.duration,F=void 0===A?E.$v:A,U=e.fadeSpeed,V=void 0===U?E.u$:U,z=e.maxLoops,$=void 0===z?100:z,M=e.autoplay,q=e.dots,I=e.scalingStrategy,B=e.lazyLoad,W=e.isAdmin,_=(0,f.k)(),X=(0,g.g)(),Y=(0,w.d)(),K=R(R({},(null===X||void 0===X?void 0:X.layoutVars)||{}),(null===Y||void 0===Y?void 0:Y.layoutVars)||{}),Q=null!==t&&void 0!==t&&t.length?1/t.length:0,J=(0,j.sl)(a),G="full-width"===r,ee=_.bp||x.o0[0].bp,te=c()(K,"--c-span-".concat(ee)),ne=x.o0.reduce((function(e,t){return e[t.bp]=c()(K,"--c-span-".concat(t.bp)),e}),{}),oe=(0,j.JX)(ne,r),ie=(0,j.KW)(te,oe[ee],J,G),ae=ie.width,re=ie.height,se=y?P.lA*k/ae:0,le=(0,i.useRef)(),ce=(0,i.useState)(B),ue=ce[0],de=ce[1],he=(0,i.useState)(!1),pe=he[0],ve=he[1],fe=(0,i.useState)(void 0),ge=fe[0],we=fe[1],me=(0,i.useState)(1),ye=me[0],xe=me[1],be=(0,i.useState)(!1),Se=be[0],je=be[1],Pe=(0,i.useState)(y),Ce=Pe[0],Ee=Pe[1],ke=(0,i.useState)(!1),Oe=ke[0],Te=ke[1],Le=(0,i.useState)(0),Ne=Le[0],Re=Le[1],De=(0,i.useState)(Q),He=De[0],Ze=De[1],Ae=1e3*F,Fe=1e3*V,Ue=(0,i.useState)(Fe),Ve=Ue[0],ze=Ue[1],$e=(0,i.useState)(P.pT*Math.ceil(se)),Me=$e[0],qe=$e[1],Ie=function(){je(!1),Te(!0),ze(150),Ze(Q)},Be=function(){Re((Ne+1)%t.length)},We=function(){Ie(),Be(),(0,T.oV)("onpage","onpage-click-event","slideshow-story-nav-right")},_e=function(){Ie(),Re(0===Ne?t.length-1:Ne-1),(0,T.oV)("onpage","onpage-click-event","slideshow-story-nav-left")},Xe=function(){var e,t,n={},o=null===le||void 0===le||null===(e=le.current)||void 0===e||null===(t=e.querySelector("[data-slide]"))||void 0===t?void 0:t.src;if(ye>1){var i,a,r,s=(null===le||void 0===le||null===(i=le.current)||void 0===i||null===(a=i.querySelector("[data-slide]"))||void 0===a||null===(r=a.srcset)||void 0===r?void 0:r.split(/\s?,\s?/))||[];void 0!==ge&&ye>1&&(o=s.reduce((function(e,t){return/(.*)\s2x/i.test(t)&&(e="".concat(RegExp.$1)),e}),o))}return o&&/&w=(\d+)(?:&h=(\d+))?/.test(o)&&(RegExp.$1&&(n.w=Number.parseInt(RegExp.$1,10)),RegExp.$2&&(n.h=Number.parseInt(RegExp.$2,10))),n},Ye=function(){if(y&&!O){var e,n=null===le||void 0===le||null===(e=le.current)||void 0===e?void 0:e.querySelector("figure > div:last-of-type > div");if(n){var o=0,i=n.innerHTML;return n.style.minHeight="auto",t.forEach((function(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.caption)&&void 0!==t&&t.caption){n.innerHTML=e.caption.caption;var i=n.getBoundingClientRect().height;o=i>o?i:o}})),n.innerHTML=i,n.style.minHeight="".concat(o,"px"),o}}},Ke=function(){if(void 0!==ge){var e=1===t.length?0:Ne+1;e=e>=t.length?0:e;var n=1===t.length?0:Ne-1;n=n<0?t.length-1:n,Se&&(n=Ne),[e,n].forEach((function(e){!function(e){var t=Xe(),n=t.w,o=t.h,i=n&&o?"".concat(n,"x").concat(o):n;if(n&&e&&!e.hasOwnProperty(i)){var a=(0,b.ZP)(e.url,n&&o?{w:n,h:o}:{w:n}),r=new Image;r.src=a,r.onload=function(){e[i]=!0,e.isTall=r.naturalWidth/r.naturalHeight<J}}}(t[e])}))}},Qe=s()((function(){qe(Ye()),xe(function(){var e="devicePixelRatio";return e in(window||{})?window[e]:1}()),S()?(we(!0),Ie()):we(!1)}),250);if((0,i.useEffect)((function(){return Oe||je(!W&&!S()&&M),Qe(),window.addEventListener("load",Qe),window.addEventListener("resize",Qe),function(){return window.removeEventListener("resize",Qe)}}),[]),(0,i.useEffect)((function(){Ke()}),[ge,ye]),(0,i.useEffect)((function(){Ee(y)}),[y]),(0,i.useEffect)((function(){qe(Ye())}),[se]),!t||!t.length)return null;var Je=function(e){var t=e.image,n=e.index,o=(0,i.useRef)(),a=t.url,r=(0,i.useState)(),s=r[0],c=r[1],d=(0,i.useState)(t.isTall),h=d[0],p=d[1],v=(0,u.getClasses)("image-wrapper absolute top-0 left-0 center transition-opacity ease-in-out controlled-duration",{"bg-gray-lighter":!pe,"bg-offblack":pe&&/aspect-fit/.test(I)}),f={"--controlled-duration":"".concat(Ve,"ms")},g={maxHeight:"100%"};!1===h?g.width="100%":!0===h&&(g.height="100%");var w=function(e){var t,n,o,i=e.url,a=e.width,r=e.height,s=e.useHiRes,l=e.scalingStrategy;return/aspect-fit/.test(l)?(o=(0,b.ZP)(i,{w:4*a}),n=(0,b.ZP)(i,{w:2*a}),t=s?n:(0,b.ZP)(i,{w:a})):(o=(0,b.ZP)(i,{w:4*a,h:4*r}),n=(0,b.ZP)(i,{w:2*a,h:2*r}),t=s?n:(0,b.ZP)(i,{w:a,h:r})),{resizedUrl:t,resized2xUrl:n,resized4xUrl:o}}({url:a,width:ae,height:re,useHiRes:l,scalingStrategy:I}),m=w.resizedUrl,y=w.resized2xUrl;return i.createElement(Z?"a":"div",R(R({},Z?{href:Z}:{}),{},{className:"".concat(Z?"dib art-link ":"").concat(v),style:f,onTouchStart:function(e){var t;c(null===e||void 0===e||null===(t=e.touches[0])||void 0===t?void 0:t.clientX)},onTouchEnd:function(e){var t,n=null===e||void 0===e||null===(t=e.changedTouches[0])||void 0===t?void 0:t.clientX;n>s?_e():n<s&&We(),c()}}),(0,L.jsxs)(i.Fragment,{children:[(0,L.jsx)("img",{ref:o,src:m,srcSet:"".concat(y," 2x"),className:"dib va-m mw-100",style:g,alt:"","data-slide":n,onLoad:function(){Ke(),ue&&(de(!1),ve(!0),qe(Ye()));var e=o.current,n=Xe(),i=n.w,a=n.h,r=i&&a?"".concat(i,"x").concat(a):i;t[r]=!0,t.isTall=e.naturalWidth/e.naturalHeight<J,p(t.isTall)}}),(0,L.jsx)(C.e,R({},N))]}))},Ge=Me?{minHeight:"".concat(Me,"px")}:{},et="all"===q||"touch"===q&&ge,tt=(0,L.jsx)(d.SlideshowRoot,{displayControls:Se||Oe?"displayOnHover":"always",useAutoPlay:!ge,autoPlay:Se,slideDuration:Ae,transitionDuration:Ve,value:Ne,onValueChange:function(){Se&&(Ze(He+1/t.length),He.toFixed(6)>$?Ie():Be())},children:(0,L.jsxs)(d.SlideshowTrack,{aspectRatio:a,ariaLabel:"Slideshow",paginationLabel:"Slideshow progress bar",children:[t.map((function(e,t){return(0,L.jsx)(d.SlideshowSlide,{children:(0,L.jsx)(Je,{image:e,index:t})},t)})),t.map((function(e,t){var n;return Ce?(0,L.jsx)(d.SlideshowCaption,{children:(0,L.jsx)("div",{children:W||null!==e&&void 0!==e&&null!==(n=e.caption)&&void 0!==n&&n.caption?(0,L.jsx)(P.ZP,R(R({},e.caption),{},{style:Ge})):(0,L.jsx)("div",{className:(0,P.ZQ)(J),style:Ge})})},t):null})),(0,L.jsx)(d.SlideshowControls,{color:"white",onPause:function(){je(!0),Te(!0),ze(Fe),(0,T.oV)("onpage","onpage-click-event","slideshow-story-nav-play")},onPlay:function(){Ie(),(0,T.oV)("onpage","onpage-click-event","slideshow-story-nav-pause")},onNext:We,onPrevious:_e})]})}),nt=(0,L.jsx)(H,{count:t.length,width:ae,height:re,allowCaptions:y,captionLineCountEstimate:se,allowDots:et,className:"db mw-mobile",breakpoint:ee}),ot=ae<166;return(0,L.jsxs)("div",{className:(0,u.getClasses)("slideshow-container overflow-hidden relative pb-xs dots-".concat(q),(0,o.Z)({"is-admin":W,"is-touch-device":ge,"unknown-touchiness":void 0===ge,"use-same-caption":y&&O,"tiny-mode":ot},(0,h.CQ)(J),J)),ref:le,children:[W&&D(R({breakpoints:_},e)),m&&!ot&&(0,L.jsx)(v.default,{message:m,level:"warning"}),B?(0,L.jsx)(p.Z,{offsetTop:500,offsetBottom:500,throttle:25,renderPlaceholder:function(e){return(0,L.jsx)("div",{ref:e,children:nt})},children:tt}):(0,L.jsx)(i.Fragment,{children:tt})]})}}}]);
//# sourceMappingURL=5223.a6e62db280bfdadf.js.map
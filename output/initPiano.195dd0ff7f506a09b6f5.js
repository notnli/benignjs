(()=>{"use strict";var e={9172:(e,t)=>{}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={};o.r(e),o.d(e,{onTemplateShow:()=>r});var t={};o.r(t),o.d(t,{onTemplateShow:()=>w});const n=(e,t=null)=>{const o=`; ${document.cookie}`.split(`; ${e}=`);return 2===o.length?decodeURIComponent(o.pop().split(";").shift()):t},a=(e,t,o)=>{const n=new Date;if(o){const e=o.days?24*o.days*60*60*1e3:60*o.hours*60*1e3;n.setTime(n.getTime()+e)}const a=[];a.push(`${e}=${encodeURIComponent(t)}`),a.push("path=/"),a.push("secure"),o&&a.push(`expires=${n.toGMTString()}`),document.cookie=a.join(";")},r=e=>{"OTN6797XUKB0"===e.templateId&&ga&&ga("send","event","adBlocker",location.pathname)};o(9172);const s=(e,{async:t=!0,defer:o=document.location.search.includes("___FORCE_DEFER___"),parent:n=document.body,attributes:a}={})=>new Promise(((r,s)=>{const i=(e instanceof Array?e:[e]).map((e=>new Promise(((r,s)=>{const i=((e,{id:t,async:o,defer:n,ok:a,error:r,attributes:s})=>{const i=document.createElement("script");return i.onload=a,i.onerror=r,t&&"undefined"!==t&&(i.id=t),o&&!n&&i.setAttribute("async",""),n&&i.setAttribute("defer",""),s&&s.forEach((([e,t])=>{i.setAttribute(e,t)})),i.src=e,i})(e,{async:t,defer:o,ok:r,error:s,attributes:a});n.appendChild(i)}))));return Promise.all(i).then(r,s)})),i=()=>{const e=window.tp||[];return window.tp=e,e},c=(...e)=>{i().push(...e)},d=e=>{const t=new URLSearchParams;new URL(document.location).pathname.startsWith("/donations")&&(t.set("donations",""),t.set("regSourceMethod","Donations")),(async(e,t)=>{if(e){a("__pianoParams",JSON.stringify(e),{hours:1});const o=new URL(location.origin);o.pathname="/internal-api/subscription/term",o.searchParams.set("__amp_source_origin",location.origin),o.searchParams.set("termId",e.termId);const n=await fetch(o.toString(),{credentials:"same-origin"}),r=await n.json();a("__pianoTerm",JSON.stringify(r),{hours:1}),t.set("offerId",e.offerId),t.set("termId",e.termId)}location.href=`/register?${t.toString()}`})(e,t)},l=e=>{switch(e.eventName){case"openLogin":document.getElementById("loginButton").click();break;case"set-return-url":document.cookie=`ref_url=${location.origin}${location.pathname}; path=/;`;break;case"reg-return-url":localStorage.setItem("regReturnUrl",location.href)}};function u(){const[e]=document.getElementsByClassName("tp-modal"),t=(new Date).toGMTString();e.scrollTop=0,document.cookie=`__pianoTerm=null; expires=${t}; path=/;`,document.cookie=`__pianoParams=null; expires=${t}; path=/;`}function p(){}function m(e={}){if("checkoutCompleted"===e.state)location.reload();else{const[e]=document.getElementsByClassName("payment-methods");e.classList.remove("hide")}}function h(){location.reload()}function f(){location.reload()}function g(){}function y(){}function b(){}function S(){}function _(){}const w=e=>{JSGlobals.MOCK_ENV&&"modal"===e.displayMode&&i().template.close()};(async(o=!1)=>{const a=o?t:e,{onTemplateShow:r}=a;(()=>{const e="development"===JSGlobals.pianoEnvironment;c(["setAid",JSGlobals.piano.pianoAppId],...e?[]:[["setCxenseSiteId","1134082880659765068"]],["setEndpoint",JSGlobals.piano.pianoEndpoint],["setUseTinypassAccounts",!1],["setSandbox",e],["setDebug",!1])})(),c(["addHandler","checkoutComplete",u],["addHandler","checkoutClose",m],["addHandler","checkoutCustomEvent",p],["addHandler","checkoutCancel",h],["addHandler","checkoutError",f],["addHandler","loginRequired",d],["addHandler","loginSuccess",b],["addHandler","meterExpired",g],["addHandler","meterActive",y],["addHandler","experienceExecute",S],["addHandler","experienceExecutionFailed",_],["addHandler","showTemplate",r],["addHandler","customEvent",l],["setUseTinypassAccounts",!1],["setUsePianoIdUserProvider",!1],["setUsePianoIdLiteUserProvider",!0],["setExternalJWT",n("esi_auth")]),await(async()=>{await s(["https://cdn.tinypass.com/api/tinypass.min.js"])})()})()})()})();
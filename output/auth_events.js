!function(){var e={883:function(e,t,n){"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":o(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var o=0,r=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(r=o))})),t.splice(r,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"env"in{env:{NODE_ENV:"production",COMMIT:"651bd927ceb8dba4ac4219cf2d425f07f61a64cb",VERSION:"1.10.3",CDN_ORIGIN:"https://id.rambler.ru",CDN_PREFIX:"/rambler-id-helper",API_ORIGIN:"https://id.rambler.ru",API_PREFIX:"/api/v3",DEBUG:void 0}}&&(e=void 0),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(44)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},44:function(e,t,n){"use strict";e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return o.colors[Math.abs(t)%o.colors.length]}function o(e){var n;function a(){if(a.enabled){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=a,s=Number(new Date),c=s-(n||s);i.diff=c,i.prev=n,i.curr=s,n=s,t[0]=o.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var l=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return e;l++;var r=o.formatters[n];if("function"==typeof r){var a=t[l];e=r.call(i,a),t.splice(l,1),l--}return e})),o.formatArgs.call(i,t);var u=i.log||o.log;u.apply(i,t)}}return a.namespace=e,a.enabled=o.enabled(e),a.useColors=o.useColors(),a.color=t(e),a.destroy=r,a.extend=i,"function"==typeof o.init&&o.init(a),o.instances.push(a),a}function r(){var e=o.instances.indexOf(this);return-1!==e&&(o.instances.splice(e,1),!0)}function i(e,t){return o(this.namespace+(void 0===t?":":t)+e)}return o.debug=o,o.default=o,o.coerce=function(e){return e instanceof Error?e.stack||e.message:e},o.disable=function(){o.enable("")},o.enable=function(e){var t;o.save(e),o.names=[],o.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?o.skips.push(new RegExp("^"+e.substr(1)+"$")):o.names.push(new RegExp("^"+e+"$")));for(t=0;t<o.instances.length;t++){var i=o.instances[t];i.enabled=o.enabled(i.namespace)}},o.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=o.skips.length;t<n;t++)if(o.skips[t].test(e))return!1;for(t=0,n=o.names.length;t<n;t++)if(o.names[t].test(e))return!0;return!1},o.humanize=n(824),Object.keys(e).forEach((function(t){o[t]=e[t]})),o.instances=[],o.names=[],o.skips=[],o.formatters={},o.selectColor=t,o.enable(o.load()),o}},305:function(e,t){var n;!function(o){"use strict";var r=function(e,t,n){if(!Array.isArray(e))throw new TypeError("each() expects array as first argument");if("function"!=typeof t)throw new TypeError("each() expects function as second argument");if("function"!=typeof n&&(n=Function.prototype),0===e.length)return n(void 0,e);var o=new Array(e.length),r=0,i=!1;e.forEach((function(a,s){t(a,(function(t,a){if(!i)return t?(i=!0,n(t)):(o[s]=a,(r+=1)===e.length?n(void 0,o):void 0)}))}))};void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},176:function(e){"use strict";e.exports.get=function(e){if(document.cookie&&document.cookie.length){for(var t,n=document.cookie.split(";"),o={},r=0,i=n.length;r<i;r++)o[(t=n[r].replace(/^(\s|\u00A0)+/g,"").split("="))[0]]=decodeURIComponent(t[1]);return e?o[e]:o}},e.exports.set=function(e,t,n){if(void 0!==e&&void 0!==t){var o=(n=n||{}).expires||{};"number"==typeof n.expires&&(o=new Date).setTime(o.getTime()+24*n.expires*60*60*1e3);var r=e+"="+encodeURIComponent(t);return r+=o.toUTCString?"; expires="+o.toUTCString():"",r+=n.path?"; path="+n.path:"",r+=n.domain?"; domain="+n.domain:"",r+=n.samesite?"; samesite="+n.samesite:"",r+=n.secure?"; secure":"",document.cookie=r,r}},e.exports.remove=function(t,n){return(n=n||{}).expires=-1,e.exports.set(t,"",n)}},824:function(e){var t=1e3,n=60*t,o=60*n,r=24*o;function i(e,t,n,o){var r=t>=1.5*n;return Math.round(e/n)+" "+o+(r?"s":"")}e.exports=function(e,a){a=a||{};var s,c,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(i){var a=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*o;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===l&&isFinite(e))return a.long?(s=e,(c=Math.abs(s))>=r?i(s,c,r,"day"):c>=o?i(s,c,o,"hour"):c>=n?i(s,c,n,"minute"):c>=t?i(s,c,t,"second"):s+" ms"):function(e){var i=Math.abs(e);return i>=r?Math.round(e/r)+"d":i>=o?Math.round(e/o)+"h":i>=n?Math.round(e/n)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e,t,o,r,i="ramblerIdHelper",a="ramblerIdHelperSentry",s="ramblerIdHelperTest",c=[-11,-4e3,-2e3,-2002,-3e3,"need session","invalid login","rate limit exceed","api does not respond","location does not respond"],l=n(305),u=n.n(l),d=n(176),p=function(e,t){void 0===t&&(t={});var n,o=t.raw;try{var r=d.get(e);n=o?r:JSON.parse(null!=r?r:"")}catch(e){}return null!=n?n:null},f=function(e,t,n){void 0===n&&(n={});var o=n.raw,r=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(n,["raw"]);try{var i=o?String(t):JSON.stringify(t);d.set(e,i,r)}catch(e){}},h=(e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),m=function(e){function t(n){var o,r=e.call(this)||this;return r.name="ApiError",r.message=n.message.toString().toLowerCase(),r.code=null!==(o=n.code)&&void 0!==o?o:"unknown",r.details=n.details,Object.setPrototypeOf(r,t.prototype),r}return h(t,e),t}(Error),v=(r=Error,h((function e(t){var n=r.call(this)||this;return n.name="SubmissionError",n.message="failed: ".concat(Object.keys(t)),n.errors=t,Object.setPrototypeOf(n,e.prototype),n}),r),function(e){h((function t(n){var o=e.call(this)||this;return o.no=n,o.code="error",Object.setPrototypeOf(o,t.prototype),o}),e)}(Error),function(){return v=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},v.apply(this,arguments)}),y="rchainid",g={domain:".".concat(window.location.hostname.split(".").slice(-2).join(".")),path:"/",samesite:"none",secure:!0},b=function(e){if(e){var t=e;e instanceof Error&&(t={message:e.message},"code"in e&&(t.code=e.code,t.details=e.details));var n=e instanceof Error&&"need session"!==e.message?1/24/30:1/24/12;f(y,t,v(v({},g),{expires:n}))}},w=function(e,t){void 0===t&&(t={});var n,o=t.raw;try{var r=window.localStorage.getItem(e);n=o?r:JSON.parse(null!=r?r:"")}catch(e){}return null!=n?n:null},C="undefined"!=typeof window&&window.document&&"requestStorageAccess"in document&&"function"==typeof document.requestStorageAccess,O=["id.rambler.ru","id.championat.com","idrambler.afisha.ru","rid.eda.ru","id.gazeta.ru","id.lenta.ru","id.moslenta.ru","id.secretmag.ru","id.motor.ru","id.passion.ru","id.wmj.ru","id.letidor.ru","id.ferra.ru","id.quto.ru","id.indicator.ru"],E=function(e){return e.split(".").slice(-2).join(".")},L=function(){if("undefined"==typeof window)return"";var e=window.location.hostname,t=(C?O.filter((function(t){return E(t)===E(e)})):[])[0];return t?"https://".concat(t):"https://id.rambler.ru"},I="undefined"!=typeof window?null===(t=window.navigator)||void 0===t?void 0:t.userAgent:"",T=/(iPhone|iPod|iPad|Macintosh).*AppleWebKit(?!.*Safari)/i.test(I),x=/.*(; wv|Version\/\d\.\d|\.0\.0\.0).*/.test(I),S=/.*mail-native-app.*/i.test(I),R=T||x||S,F=/IEMobile|Windows Phone/i.test(I),A=/iPhone|iPad|iPod/i.test(I)&&!F,k=/Android/i.test(I)&&!F,P=A||k,j=(/Firefox/i.test(I),function(){return j=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},j.apply(this,arguments)}),N=function(e){var t={};return Object.keys(e).forEach((function(n){null!=e[n]&&(t[n]=e[n])})),t},_=function(e){var t={};return new URL(e).searchParams.forEach((function(e,n){t[n]=e})),t},D=function(e,t,n){if(!(Object.keys(t).length||n&&Object.keys(n).length))return e;var o=new URL(e),r=o.protocol,i=o.host,a=o.pathname,s=_(e),c=N(j(j({},s),t)),l=new URLSearchParams(c).toString(),u=l?"?".concat(l):"",d=function(e){var t={},n=new URL(e).hash;return new URLSearchParams(n.substring(1)).forEach((function(e,n){t[n]=e})),t}(e),p=N(j(j({},d),n)),f=new URLSearchParams(p).toString(),h=f?"#".concat(f):"";return"".concat(r,"//").concat(i).concat(a).concat(u).concat(h)},U=function(e){var t=new URL(e),n=t.protocol,o=t.host,r=t.pathname,i=t.search;return"".concat(n,"//").concat(o).concat(r).concat(i)},M=function(e,t,n){void 0===n&&(n=!1);var o=new XMLHttpRequest;o.withCredentials=n,o.open("get",e,!0),o.onreadystatechange=function(){4===o.readyState&&0!==o.status&&t(null,o.responseText)},o.onerror=function(){t(new m({message:"location does not respond",code:0,details:{method:e}}))},o.send(null)},B=function(){return(Date.now().toString(36)+Math.random().toString(36).slice(2)).slice(0,17)},H=L(),G=function(e,t,n,o){void 0===o&&(o=H);var r=new XMLHttpRequest,i="".concat(o).concat("/api/v3").concat(e),a="rid".concat(B()),s={id:a,params:t};r.open("post",i,!0),r.setRequestHeader("Content-Type","application/json"),r.withCredentials=!0,r.onreadystatechange=function(){var t,o;if(4===r.readyState&&200===r.status){var i=JSON.parse(r.responseText),s=i.success,c=i.error,l=i.result,u=null===(t=null==c?void 0:c.extra)||void 0===t?void 0:t.legacy_error;if(s&&null==u)n(null,l);else if(null!=u){var d=u.errno,p=null===(o=u.strerror)||void 0===o?void 0:o.toLowerCase();n(new m({message:p,code:d,details:{method:e,requestId:a}}))}else n(new m({message:"api failed",code:0,details:{method:e,requestId:a}}))}},r.onerror=function(){n(new m({message:"api does not respond",code:0,details:{method:e,requestId:a}}))},r.send(JSON.stringify(s))},W=G.bind(null,"/profile/getInfo"),z=G.bind(null,"/legacy/Rambler::Id::destroy_session"),q=G.bind(null,"/session/getRsidx"),J=G.bind(null,"/session/getRccid"),V=G.bind(null,"/legacy/Rambler::Common::get_configuration"),Y=G.bind(null,"/legacy/Rambler::Id::set_rsid_local"),Z=n(883),X=n.n(Z),$=(X()("id:helper:top100"),function(e,t){var n={et:"cv",cv:Object.keys(e).map((function(t){return[t,e[t]].map(encodeURIComponent).join("=")})).join("&"),pid:3115342,rid:t,rn:Math.round(2147483647*Math.random()),ct:"mp"},o=Object.keys(n).map((function(e){return[e,n[e]].join("=")})).join("&"),r="https://kraken.rambler.ru/cnt/?".concat(o);"sendBeacon"in navigator?navigator.sendBeacon(r):(new Image).src=r}),K="get",Q=function(e,t,n,o){var r=new XMLHttpRequest,i="rid".concat(B()),a="".concat("https://prime.rambler.ru/api/v3").concat(t);if(e===K){var s=Object.keys(n).reduce((function(e,t){return e.concat("".concat(t,"=").concat(encodeURIComponent(n[t]&&"object"==typeof n[t]?JSON.stringify(n[t]):n[t])))}),[]).join("&");a+="?".concat(s)}r.open(e,a,!0),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("X-Client-Request-Id",i),r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var e=JSON.parse(r.responseText),n=e.success,a=e.error,s=e.result;if(n&&null==a)o(null,s);else{var c=null==a?"UNKNOW_ERROR":"".concat(a.type,"_").concat(a.subtype);o(new m({message:"api failed",code:c,details:{requestId:i,method:t}}))}}},r.onerror=function(){o(new m({message:"api does not respond",code:"UNKNOW_ERROR",details:{requestId:i,method:t}}))},r.send(e===K?null:JSON.stringify(n))},ee=Q.bind(null,K,"/prime/getActiveAdblockInfo"),te=Q.bind(null,"post","/prime/createAdblockOrder");!function(e){e.INSTALL="install",e.INSTALLED="installed",e.ERROR="error",e.REGISTER="register",e.LOGIN="login",e.OAUTHLOGIN="oauthlogin",e.LOGOUT="logout",e.CLOSE="close",e.REDIRECT="redirect",e.RESIZE="resize",e.LOADED="loaded",e.DESTROY="destroy",e.NAVIGATE="navigate"}(o||(o={}));var ne,oe,re=function(e,t){var n=document.createElement("script");n.src=e,n.onload=function(){t(null),document.body&&document.body.removeChild(n)},n.onerror=function(){t(new m({message:"script does not loaded"}))},document.body&&document.body.appendChild(n)},ie=function(e){Math.random()>.005||(ne?e(ne):oe?oe.push(e):(oe=[e],re("".concat("https://id.rambler.ru").concat("/rambler-id-helper","/").concat("1.10.3","/sentry.js"),(function(e){ne?null==oe||oe.forEach((function(e){return e(ne)})):e||(ne=window[a],delete window[a],null==oe||oe.forEach((function(e){return e(ne)})))}))))},ae=function(){return ae=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ae.apply(this,arguments)},se={width:750,height:450},ce={sberbank:{title:"Сбер ID",width:1024,height:750},sberbank_v2:{title:"Сбер ID",width:1024,height:750},apple:{title:"Apple ID",width:650,height:750},livejournal:{title:"LiveJournal",width:750,height:650},pgumosru:{title:"mos.ru",width:750,height:650},google:{title:"Google",width:650,height:700},instagram:{title:"Instagram",width:750,height:650},webauthn:ae({title:"Электронный ключ"},se),vkontakte:ae({title:"ВКонтакте"},se),facebook:ae({title:"Facebook"},se),odnoklassniki:ae({title:"Одноклассники"},se),mailru:ae({title:"Mail.Ru"},se),twitter:ae({title:"Twitter"},se),mail:{title:"С помощью почты"},phone:{title:"По номеру телефона"},championat:ae({title:"Championat"},se)},le=Object.keys(ce).filter((function(e){return"mail"!==e&&"phone"!==e})),ue=X()("id:helper:emitter"),de=function(){function e(){this.listeners={}}return e.prototype.existsListener=function(e,t){return this.listeners[e]&&-1!==this.listeners[e].indexOf(t)},e.prototype.addListener=function(e,t){ue("addListener ".concat(e)),this.listeners[e]=this.listeners[e]||[],"function"!=typeof t||this.existsListener(e,t)||this.listeners[e].push(t)},e.prototype.removeListener=function(e,t){ue("removeListener ".concat(e)),this.existsListener(e,t)&&this.listeners[e].splice(this.listeners[e].indexOf(t),1)},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];ue("emit ".concat(e)),this.listeners[e]&&this.listeners[e].forEach((function(e){e.apply(void 0,t)}))},e}(),pe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fe=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},he=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},me=/^https?:\/\/[^/]+\.rambler\.ru\//,ve=X()("id:helper:emitter"),ye=function(e){function t(t){var n=e.call(this)||this;return n.AUTH_EVENTS=[o.LOGIN,o.OAUTHLOGIN,o.LOGOUT],n.ID_EVENTS=[o.INSTALLED,o.REGISTER,o.CLOSE,o.REDIRECT,o.RESIZE,o.LOADED,o.NAVIGATE],n.PROPAGATED_EVENTS=he(he([],n.AUTH_EVENTS,!0),n.ID_EVENTS,!0),n.firstPartyOrigin=L(),n.currentTabId="".concat((+new Date/1e3).toString(),"-").concat(Math.round(2147483647*Math.random()).toString()),n.onMessage=function(e){var t=e.data,o=e.origin;if(t&&"object"==typeof t){var r=t.emitter,a=t.eventType,s=t.redirectUrl,c=t.data,l=t.frameInfo,u=void 0===l?c||{}:l,d=fe(t,["emitter","eventType","redirectUrl","data","frameInfo"]);r!==i||n.isEventOnlyFromId(a)&&"https://id.rambler.ru"!==o||(!s||"object"!=typeof u||u instanceof Error||(u.redirectUrl=s),n.isAuthEvent(a)?n.emit(a,c,d):n.emit(a,u,s))}},n.notifyListeners=function(e){for(var t,o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];var i=n.listeners,a=he([],null!==(t=i[e])&&void 0!==t?t:[],!0);a.forEach((function(e){e.apply(void 0,o)}))},n.settings=t,n.install(),n}return pe(t,e),t.prototype.install=function(){var e=this;this.settings.storage&&(this.storage=document.createElement("iframe"),this.storage.src="".concat(this.firstPartyOrigin).concat("/rambler-id-helper","/").concat("1.10.3","/storage.html"),this.storage.style.width="0",this.storage.style.height="0",this.storage.style.border="0",this.storage.style.position="absolute",this.storage.style.left="-9999px",this.storage.setAttribute("aria-hidden","true"),this.storage.setAttribute("loading","eager"),this.storage.onload=function(){var t,n,r={eventType:o.INSTALL,emitter:i,data:{providerOrigin:window.location.href}};try{null===(n=null===(t=e.storage)||void 0===t?void 0:t.contentWindow)||void 0===n||n.postMessage(r,e.firstPartyOrigin),e.emit(o.INSTALLED)}catch(t){e.emit(o.ERROR,new Error("storage is not installed"))}},this.storage.onerror=function(){e.emit(o.INSTALLED),e.emit(o.ERROR,new Error("storage is not loaded"))},document.body&&document.body.appendChild(this.storage)),window.addEventListener("message",this.onMessage,!1)},t.prototype.isAuthEvent=function(e){return this.AUTH_EVENTS.includes(e)},t.prototype.isEventOnlyFromId=function(e){return this.ID_EVENTS.includes(e)},t.prototype.isPropagatedEvent=function(e){return this.PROPAGATED_EVENTS.includes(e)},t.prototype.getBroadcastNodes=function(e){var t=window.opener,n=window.parent,o=this.isAuthEvent(e)?Array.prototype.slice.call(document.getElementsByTagName("iframe")).filter((function(e){return me.test(e.src)})).map((function(e){return e.contentWindow})):[];return[t,n!==window&&n].concat(o).filter(Boolean)},t.prototype.notifyBroadcastNodes=function(e){try{this.getBroadcastNodes(e.eventType).forEach((function(t){t.postMessage(e,"*")}))}catch(e){}},t.prototype.emit=function(e,t,n){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];ve("emit ".concat(e," %o %o"),t,n);var a="";if(this.isPropagatedEvent(e)){var s=this,c=s.currentTabId,l=s.latestEventId,u=n&&"object"==typeof n?n:{},d=u.tabId,p=void 0===d?null:d,f=u.time,h=void 0===f?Date.now():f,m=fe(u,["tabId","time"]),v="".concat(e,":").concat(h);if(v===l)return;var y=!t||"object"!=typeof t||t instanceof Error?{}:t,g=y.silentCurrentTab,b=void 0===g?m.silentCurrentTab:g,w=y.redirectUrl,C=void 0===w?"":w,O=!p||p===c,E={emitter:i,eventType:e,time:h,data:t,tabId:p||c};if(this.notifyBroadcastNodes(E),this.latestEventId=v,a=C,O&&b)return}var L=he([e,t,a||n],o,!0);this.storage?window.setTimeout.apply(window,he([this.notifyListeners,10],L,!1)):this.notifyListeners.apply(this,L)},t.prototype.destroy=function(){this.listeners={},this.storage&&(document.body.removeChild(this.storage),delete this.storage),window.removeEventListener("message",this.onMessage,!1)},t}(de),ge=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),be=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},we="https://id.rambler.ru",Ce=function(e){function t(n){var r=e.call(this,{storage:!1})||this;return r.resize=function(e){var t=e.height;r.container instanceof HTMLElement&&(r.container.style.height="".concat(t,"px"))},r.redirect=function(e,t){window.location.href=t},r.close=function(){var e=r,t=e.frame,n=e.container;if(t){if(!(t instanceof HTMLIFrameElement)&&"function"==typeof t.close)return clearInterval(r.closeInterval),t.close(),void window.focus();n instanceof HTMLElement&&"embed"!==r.type&&(n.style.zIndex="-1",n.style.transform="translateY(-100vh)",n.style.opacity="0",document.documentElement instanceof HTMLElement&&(document.documentElement.style.overflow="")),window.focus()}},r.destroy=function(){r.close();var n=r,i=n.frame,a=n.container;i instanceof HTMLIFrameElement&&a instanceof HTMLElement&&("embed"===r.type?setTimeout((function(){a.removeChild(i),a.removeAttribute("data-id-frame")}),500):document.body&&document.body.removeChild(a)),delete t.frame,setTimeout((function(){r.removeListener(o.RESIZE,r.resize),r.removeListener(o.CLOSE,r.close),r.removeListener(o.REDIRECT,r.redirect)}),0),r.emit(o.DESTROY),e.prototype.destroy.call(r)},r.configure(n),r}return ge(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this.options.container instanceof HTMLElement?"embed":C?"popup":"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return t.frame},set:function(e){t.frame=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frameUrl",{get:function(){var e,t=this.options,n=t.path,o=void 0===n?"/login-20/login":n,r=(t.container,t.startTime),i=be(t,["path","container","startTime"]),a=window.location,s=a.href,c=a.protocol,l=a.host;return null!==(e=i.back)&&void 0!==e||(i.back=s),i.param=this.type,i.iframeOrigin="".concat(c,"//").concat(l),D("".concat(we).concat(o),i,{startTime:r})},enumerable:!1,configurable:!0}),t.prototype.showOnLoaded=function(){var e=this,t=this.frame,n=this.container;if(t instanceof HTMLIFrameElement){var r=function(){e.removeListener(o.LOADED,r),t.style.visibility="",t.style.height="100%",n instanceof HTMLElement&&"embed"!==e.type&&(n.style.zIndex="10000",n.style.transform="translateY(0)",n.style.opacity="1",document.documentElement instanceof HTMLElement&&(document.documentElement.style.overflow="hidden"))};this.addListener(o.LOADED,r)}},t.prototype.configure=function(e){var t,n=be(e,[]);this.options=n,null!==(t=this.container)&&void 0!==t||(this.container=n.container)},t.prototype.attach=function(){var e=this,t=null;try{t=this.frame instanceof HTMLIFrameElement?this.frame.parentElement:null}catch(e){}if("popup"!==this.type&&this.frame instanceof HTMLIFrameElement&&(null==this.container||this.container instanceof HTMLElement&&this.container===t)){if(this.showOnLoaded(),this.frame.src=this.frameUrl,U(this.frame.src)===U(this.frameUrl)){var n=function(){var t,r;null===(t=e.frame)||void 0===t||t.removeEventListener("load",n),e.emit(o.LOADED),null===(r=e.frame)||void 0===r||r.focus()};this.frame.addEventListener("load",n)}}else"popup"===this.type?this.frame=window.open(this.frameUrl,"idFrame","status=1,toolbar=0,menubar=0,resizable=1,scrollbars=1,width=800px,height=700px,top=100px,left=100px"):(this.frame=document.createElement("iframe"),this.frame.src=this.frameUrl,this.frame.frameBorder="0",this.frame.style.visibility="hidden",this.frame.style.width="100%",this.frame.style.display="block",this.frame.setAttribute("loading","eager"),this.container instanceof HTMLElement?(this.frame.style.height="0px",this.container.setAttribute("data-id-frame","embed")):(this.container=document.createElement("div"),this.container.style.position="fixed",this.container.style.top="0px",this.container.style.left="0px",this.container.style.right="0px",this.container.style.bottom="0px",this.container.style.zIndex="-1",this.container.style.transform="translateY(-100vh)",this.container.style.opacity="0",this.container.style.transition="all 250ms",this.container.style.overflowY="auto",this.container.style.webkitOverflowScrolling="touch",this.container.setAttribute("data-id-frame","own")),this.container.appendChild(this.frame),document.body&&null==this.container.parentElement&&document.body.appendChild(this.container),this.showOnLoaded());"embed"===this.type&&this.addListener(o.RESIZE,this.resize),this.addListener(o.CLOSE,this.close),this.addListener(o.REDIRECT,this.redirect);var r=this.frame;r instanceof HTMLIFrameElement||(clearInterval(this.closeInterval),this.closeInterval=window.setInterval((function(){(null==r?void 0:r.closed)&&(clearInterval(e.closeInterval),e.emit(o.CLOSE))}),500))},t}(ye),Oe=function(){function e(e){this.providersOptions=le.reduce((function(e,t){var n;return ae(ae({},e),((n={})[t]=ce[t],n))}),{}),this.options=e}return Object.defineProperty(e.prototype,"windowUrl",{get:function(){var e,t,n,o=this.options,r=(o.targetWindow,o.startTime),i=be(o,["targetWindow","startTime"]);return null!==(e=i.popup)&&void 0!==e||(i.popup=!0),null!==(t=i.on)&&void 0!==t||(i.on="login"),null!==(n=i.back)&&void 0!==n||(i.back=window.location.href),"popup"===i.param&&R&&delete i.popup,D("".concat(we,"/oauth-20/"),i,{startTime:r})},enumerable:!1,configurable:!0}),e.prototype.attach=function(){var e,t,n,o,r,i=this,a=i.options,s=i.providersOptions,c=i.windowUrl;if("popup"===a.param&&R)return window.location.href=c,void(null===(e=a.targetWindow)||void 0===e||e.close());var l=null!==(n=null===(t=s[a.provider])||void 0===t?void 0:t.height)&&void 0!==n?n:750,u=null!==(r=null===(o=s[a.provider])||void 0===o?void 0:o.width)&&void 0!==r?r:450;if(a.targetWindow)return a.targetWindow.location.href=c,a.targetWindow.resizeTo(u,l),void a.targetWindow.focus();this.window=window.open(c,"oauthWindow","status=1,toolbar=0,menubar=0,resizable=1,scrollbars=1,width=".concat(u,"px,height=").concat(l,"px,top=100px,left=100px"))},e.prototype.destroy=function(){var e;null===(e=this.window)||void 0===e||e.close()},e}(),Ee=function(){return Ee=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ee.apply(this,arguments)},Le=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ie=function(){return Ie=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ie.apply(this,arguments)},Te="sberIdNotificationBannerClosed",xe="sberIdNotificationBannerCloseCount",Se={path:"/",domain:window.location.hostname.split(".").slice(-2).join(".")},Re=[1/12,1,7,28],Fe=function(e){function t(t){var n,o,r,i=this;(i=e.call(this)||this).onLoginClick=function(){i.emit("click")},i.onCloseClick=function(){var e,t=null!==(e=p(xe))&&void 0!==e?e:0;f(Te,!0,Ie(Ie({},Se),{expires:Re[Math.min(t,3)]})),f(xe,t+1,Ie(Ie({},Se),{expires:365})),i.destroy()},i.options=Ie(Ie({},t),{fontFamily:null!==(n=t.fontFamily)&&void 0!==n?n:"Roboto, sans-serif",position:null!==(o=t.position)&&void 0!==o?o:"bottom-right",autoCloseDuration:null!==(r=t.autoCloseDuration)&&void 0!==r?r:0,offset:Ie({top:30,left:30,right:30,bottom:30},t.offset)});var a=i.options.position.split("-").reverse(),s=a[0],c=a[1],l=void 0===c?"bottom":c;return i.container=document.createElement("div"),i.container.style.position="fixed",i.container.style.opacity="0",i.container.style.background="#fff",i.container.style.border="1px solid #E3E3E3",i.container.style.boxShadow="0px 10px 24px rgba(45, 73, 88, 0.15)",i.container.style.borderRadius=P?"0":"5px",i.container.style.padding="20px",i.container.style.display="flex",i.container.style.width=P?"100%":"auto",i.container.style.boxSizing="border-box",i.container.style.flexDirection="column",i.container.style.fontFamily=i.options.fontFamily,i.container.style.minWidth="320px",i.container.style.transition="opacity 200ms",i.container.style[s]=P?"0":i.options.offset[s]+"px",i.container.style[l]=P?"0":i.options.offset[s]+"px",i.label=document.createElement("div"),i.label.style.fontSize="15px",i.label.style.lineHeight="18px",i.label.style.color="#767676",i.label.style.marginBottom="16px",i.label.style.fontWeight="600",i.label.textContent="Вход по Сбер ID",i.container.appendChild(i.label),i.closeButton=document.createElement("a"),i.closeButton.setAttribute("role","button"),i.closeButton.style.fontSize="0",i.closeButton.style.lineHeight="12px",i.closeButton.style.color="#767676",i.closeButton.style.position="absolute",i.closeButton.style.top="10px",i.closeButton.style.right="10px",i.closeButton.style.cursor="pointer",i.closeButton.style.display="flex",i.closeButton.style.padding="10px",i.closeButton.innerHTML='<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 4.65094L10.3675 0.282877C10.7431 -0.0927631 11.3485 -0.0942703 11.721 0.27826C12.0961 0.653395 12.0914 1.25686 11.7164 1.63195L7.34886 6L11.7164 10.368C12.0914 10.7431 12.0961 11.3466 11.721 11.7217C11.3485 12.0943 10.7431 12.0928 10.3675 11.7171L6 7.34906L1.63247 11.7171C1.25688 12.0928 0.651469 12.0943 0.278986 11.7217C-0.0960822 11.3466 -0.0914182 10.7431 0.283602 10.368L4.65114 6L0.283602 1.63195C-0.0914182 1.25686 -0.0960822 0.653395 0.278986 0.27826C0.651469 -0.0942703 1.25688 -0.0927631 1.63247 0.282877L6 4.65094Z" fill="currentColor"/></svg>',i.container.appendChild(i.closeButton),i.button=document.createElement("a"),i.button.setAttribute("role","button"),i.button.style.display="flex",i.button.style.alignItems="center",i.button.style.justifyContent="center",i.button.style.textDecoration="none",i.button.style.height="48px",i.button.style.fontSize="16px",i.button.style.fontWeight="400",i.button.style.lineHeight="19px",i.button.style.color="#fff",i.button.style.backgroundColor="#21A038",i.button.style.padding="0 23px",i.button.style.borderRadius="4px",i.button.innerHTML='<svg width="22" height="22" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13 0C16.0927 0 18.9337 1.08103 21.1657 2.88421L18.6371 4.74793C17.0315 3.64848 15.0899 3.00354 13 3.00354C7.48924 3.00354 3.00587 7.48999 3.00587 13.0013C3.00587 18.5126 7.48924 22.9965 13 22.9965C18.5134 22.9965 22.9968 18.5126 22.9968 13.0013C22.9968 12.9118 22.9941 12.8223 22.9924 12.7328L25.7912 10.6699C25.9289 11.4245 26 12.2055 26 13.0013C26 20.1807 20.1795 26 13 26C5.82135 26 0 20.1807 0 13.0013C0 5.81931 5.82135 0 13 0ZM23.2856 5.05241C23.9006 5.84651 24.4262 6.71169 24.8456 7.63565L13.0002 16.3673L8.05093 13.2628V9.52921L13.0002 12.6337L23.2856 5.05241Z" fill="currentColor"/></svg>',i.container.appendChild(i.button),i.buttonText=document.createElement("span"),i.buttonText.style.marginLeft="8px",i.buttonText.textContent=t.displayName?"Войти как ".concat(t.displayName):"Войти по Сбер ID",i.button.appendChild(i.buttonText),i}return Le(t,e),t.prototype.attach=function(){var e=this;this.button.addEventListener("click",this.onLoginClick),this.closeButton.addEventListener("click",this.onCloseClick),document.body.appendChild(this.container),window.setTimeout((function(){e.container.style.opacity="1"}),0),this.options.autoCloseDuration&&(this.autoCloseTimeout=window.setTimeout(this.onCloseClick,this.options.autoCloseDuration))},t.prototype.destroy=function(){var e=this;clearTimeout(this.autoCloseTimeout),this.container.style.opacity="0",this.button.removeEventListener("click",this.onLoginClick),this.closeButton.removeEventListener("click",this.onCloseClick),this.emit("destroy"),window.setTimeout((function(){document.body.removeChild(e.container)}),200)},t}(de),Ae="unset",ke=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Pe=function(){return Pe=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Pe.apply(this,arguments)},je=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},Ne=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},_e=function(){},De=function(e){var t,n=null!==(t=e.debug)&&void 0!==t?t:_(window.location.href).debug;return n?{debug:n}:{}},Ue=1===w("itpRedirectorStageApi")?"/api/itp/v2/test-redirector":"/api/itp/v2/redirector",Me="https://id.rambler.ru",Be="/rambler-id-helper",He="https://id.rambler.ru",Ge="1.10.3",We=X()("id:helper");!function(e){if("undefined"!=typeof window){var t=_(window.location.href).debug,n=w("debug",{raw:!0});t&&"string"==typeof t&&n!==t&&(n||t!==Ae)&&(t===Ae?function(e){try{window.localStorage.removeItem("debug")}catch(e){}}():function(e,t,n){void 0===n&&(n={});var o=n.raw;try{var r=o?String(t):JSON.stringify(t);window.localStorage.setItem("debug",r)}catch(e){}}(0,t,{raw:!0}))}}(),We(Ge);var ze=function(e){function t(){var t=e.call(this,{storage:!0})||this;return t.Events=o,t.userSession=!1,t.sendError=function(e){~c.indexOf(e.message)||"code"in e&&e.code&&~c.indexOf(e.code)||ie((function(t){t.withScope((function(n){var o=Pe(Pe({},"code"in e&&{code:e.code}),"details"in e&&e.details);for(var r in o)o.hasOwnProperty(r)&&n.setExtra(r,o[r]);t.captureException(e)}))}))},t.removeCache=function(){delete window.PRIME_SSR_STATUS,function(e,t){try{d.remove("rchainid",t)}catch(e){}}(0,g)},t.closeAuth=function(e){var n;void 0===e&&(e=_e),null===(n=t.authFrame)||void 0===n||n.close(),"function"==typeof e&&e()},t.registerOnFrameRedirect=function(e){$({"helper::deprecated::registerOnFrameRedirect":window.location.hostname},t.currentTabId),t.addListener(o.REDIRECT,e)},t.registerOnFrameCloseCallback=function(e){$({"helper::deprecated::registerOnFrameCloseCallback":window.location.hostname},t.currentTabId),t.addListener(o.CLOSE,e)},t.registerOnPossibleLoginCallback=function(e){$({"helper::deprecated::registerOnPossibleLoginCallback":window.location.hostname},t.currentTabId),t.addListener(o.LOGIN,e)},t.registerOnPossibleOauthLoginCallback=function(e){$({"helper::deprecated::registerOnPossibleOauthLoginCallback":window.location.hostname},t.currentTabId),t.addListener(o.OAUTHLOGIN,e)},t.registerOnPossibleLogoutCallback=function(e){$({"helper::deprecated::registerOnPossibleLogoutCallback":window.location.hostname},t.currentTabId),t.addListener(o.LOGOUT,e)},t.emitLogin=function(e){$({"helper::deprecated::emitLogin":window.location.hostname},t.currentTabId),t.emit(o.LOGIN,e)},t.emitLogout=function(e){$({"helper::deprecated::emitLogout":window.location.hostname},t.currentTabId),t.emit(o.LOGOUT,e)},t.addListener(o.LOGIN,t.removeCache),t.addListener(o.OAUTHLOGIN,t.removeCache),t.addListener(o.LOGOUT,t.removeCache),t.addListener(o.ERROR,t.sendError),t}return ke(t,e),Object.defineProperty(t.prototype,"hasTrackingPrevention",{get:function(){return C},enumerable:!1,configurable:!0}),t.prototype.push=function(e){void 0===e&&(e=_e),e()},t.prototype.rpc=function(e,t,n){var r=this;void 0===n&&(n=_e),$({"helper::rpc":window.location.hostname},this.currentTabId),G("/legacy/".concat(e),t,(function(e,t){e&&r.emit(o.ERROR,e),n(e,t)}))},t.prototype.logout=function(e,t){var n=this;void 0===t&&(t=_e),"function"==typeof e&&(t=e,e=void 0),z({},(function(r){r&&n.emit(o.ERROR,r),n.emit(o.LOGOUT,e),t(null,r)}))},t.prototype.getProfileInfo=function(e,t){var n=this;void 0===t&&(t=_e),"function"==typeof e&&(t=e,e={}),W(e,(function(e,r){n.userSession=!!r,e&&n.emit(o.ERROR,e),t(r?r.profile:null,e)}))},t.prototype.getCurrentUserInfo=function(e){void 0===e&&(e=_e),$({"helper::deprecated::getCurrentUserInfo":window.location.hostname},this.currentTabId),this.getProfileInfo((function(t,n){if(t){var o=t.display.avatar.url;/avatars\.rambler\.ru/.test(o)&&(o=o.replace(/\/default$/,"").replace(/\/get/,"/100x100"));var r={provider:t.display.avatar.provider,iconUrl:t.display.avatar.provider_icon,avatarUrl:o,shortName:t.display.short_name,displayName:t.display.display_name,mailboxExists:"general"===t.__type?1:0};e(r,n)}else e(null,n)}))},t.prototype.createSession=function(e,t){var n=this;void 0===t&&(t=_e),$({"helper::deprecated::createSession":window.location.hostname},this.currentTabId),re("".concat(He,"/script/create_session.js?token=").concat(e),(function(e){e?n.emit(o.ERROR,e):t()}))},t.prototype.exportsid=function(e){var t=this;void 0===e&&(e=_e),$({"helper::deprecated::exportsid":window.location.hostname},this.currentTabId),re("".concat(He,"/script/exportsid.js"),(function(n){n?t.emit(o.ERROR,n):e(window.RamblerId)}))},t.prototype.variti=function(e){void 0===e&&(e=_e),$({"helper::deprecated::variti":window.location.hostname},this.currentTabId),e({})},t.prototype.getSessionToken=function(e){var t=this;void 0===e&&(e=_e),q({},(function(n,r){t.userSession=!!r,n&&t.emit(o.ERROR,n),b(null!=n?n:null==r?void 0:r.result.rccid),e(r?r.result:null,n)}))},t.prototype.getDefaultChainId=function(e){var t=this;void 0===e&&(e=_e);var n=function(){var e=p(y);if(!e||"string"==typeof e)return e;var t=e.code,n=e.message,o=e.details;return"details"in e?new m({message:n,code:t,details:o}):new Error(n)}();n instanceof Error?e(null,n):n?e({rccid:n}):J({},(function(n,r){n&&t.emit(o.ERROR,n),b(null!=n?n:null==r?void 0:r.rccid),e(r?{rccid:r.rccid}:null,n)}))},t.prototype.createPropagationWindow=function(){return!this.hasTrackingPrevention||T?null:window.open("".concat(Me).concat(Be,"/").concat(Ge,"/noop.html"),"","status=1,toolbar=0,menubar=0,resizable=1,scrollbars=1,width=250px,height=100px,top=100px,left=100px")},t.prototype.propagateSession=function(e,t,n){var r=this;void 0===t&&(t={eventType:o.LOGIN}),void 0===n&&(n=_e);var i=t.eventType,a=void 0===i?o.LOGIN:i,s=t.shortSession,c=void 0!==s&&s,l=t.propagationWindow,d=void 0===l?null:l,p=je(t,["eventType","shortSession","propagationWindow"]);p.keepWindow&&(p.data=p.data||{},p.data.keepWindow=p.keepWindow),this.hasTrackingPrevention?u()(O,(function(e,t){M("https://".concat(e,"/api/itp/v2/ping"),(function(n,o){var r;try{r=JSON.parse(o)}catch(e){}t(null,[e,null==r?void 0:r.response,n])}))}),(function(t,i){var s=i.filter((function(e){return e[0]===O[0]})).map((function(e){return e[1]}))[0],l=[],u=[];i.forEach((function(e){var t=e[0],n=e[1],o=e[2];s&&s===n?l.push(t):u.push(o||new m({message:"ping response wrong",code:0,details:{method:"https://".concat(t,"/api/itp/v2/ping")}}))})),u.length>0&&ie((function(){u.forEach((function(e){return r.emit(o.ERROR,e)}))}));var f=l[0],h=void 0===f?He.replace(/^https?:\/\//,""):f,v=l.slice(1),y="".concat(Me).concat(Be,"/").concat(Ge,"/propagate.html")+"?extra=".concat(encodeURIComponent(JSON.stringify(Pe({eventType:a},p)))),g="https://".concat(h).concat(Ue,"?rsid=").concat(e||"")+"&setShortCookie=".concat(c?1:0)+v.map((function(e){return"&to=".concat(e)})).join("")+"&back=".concat(encodeURIComponent(y));if(!d)return n(),void(window.location.href=g);var b=function(){r.removeListener(a,b),n()};r.addListener(a,b),d.location.replace(g)})):V({key:"ServerSideDomains"},(function(t,o){var i=t?[]:Object.keys(o.configuration).filter((function(e){return!!o.configuration[e]}));u()(i,(function(t,n){var o=t.split(".").slice(-2).join(".");Y({domain:o,id:e},(function(){return n(null)}),"https://".concat(t))}),(function(){if(p.back&&!p.popup){var e=function(){setTimeout((function(){var t;r.removeListener(a,e),n(),window.location.href=null!==(t=p.back)&&void 0!==t?t:""}),500)};r.addListener(a,e)}else n();r.emit(a,p.data)}))}))},t.prototype.activateCookies=function(e){if(void 0===e&&(e=_e),window.parent!==window)if(f(s,1,{expires:1/24/6,path:"/",domain:".rambler.ru",samesite:"none",secure:!0}),p(s))e();else{var t=window.open("".concat(Me).concat(Be,"/").concat(Ge,"/cookies.html"),"","status=1,toolbar=0,menubar=0,resizable=1,scrollbars=1,width=500px,height=300px,top=100px,left=100px"),n=function(o){o.data===s&&(window.removeEventListener("message",n),null==t||t.close(),e())};window.addEventListener("message",n)}else e()},t.prototype.getPrimeSubscription=function(e,t){var n=this;void 0===t&&(t=_e),$({"helper::deprecated::getPrimeSubscription":window.location.hostname},this.currentTabId),"function"==typeof e&&(t=e,e={}),this.getSessionToken((function(r,i){var a=!1;if(r&&r.token){var s={params:e,sessionId:r.token};ee(s,(function(e,r){e&&n.emit(o.ERROR,e),a=!!r&&!!r.adblockInfoList&&r.adblockInfoList.length>0,t(a,e)}))}else t(a,i)}))},t.prototype.createPrimeSubscriptionOrder=function(e,t){var n=this;void 0===t&&(t=_e),$({"helper::deprecated::createPrimeSubscriptionOrder":window.location.hostname},this.currentTabId);var r=e.code,i=e.cpsEmail,a=e.useForSubscription,s=void 0!==a&&a,c=je(e,["code","cpsEmail","useForSubscription"]);r?i?this.getSessionToken((function(e,a){if(e&&e.token){var l={params:{code:r,useForSubscription:s,paymentCpsEmail:i},sessionId:e.token};te(l,(function(e,a){if(e)return n.emit(o.ERROR,e),void t(null,e);var l=a.shopId,u=a.scId,d=a.orderNumber,p=a.requestSign,f=a.orderAmount,h=a.discountPrice,m=a.tax,v=a.publicName,y=a.publicDescription,g=a.publicPicture;!function(e,t,n){window.RamblerPayment=window.RamblerPayment||[],window.RamblerPayment.push((function(){var o=window.RamblerPayment.buildWidget("PaymentPopup",Ee({lang:"ru"},e));void 0!==o&&o.then((function(e){return e.show(),e.initializeOrder(t).then((function(){var t,o=null;e.on("close",(function(){e.destroy(),n(o,t)})),e.on("fail",(function(){o=new Error("payment failed")})),e.on("success",(function(e){t=e}))}))})).catch((function(e){n(e)}))})),re("".concat("https://payment.rambler.ru","/widget/sdk.js"),(function(e){e&&n(e)}))}(c,{order:{shopId:l,scId:u,orderNumber:d,requestSign:p,orderAmount:f,cpsEmail:i,productName:r,paymentAddParams:{rebillingOn:s?1:0}},products:[{offer:{name:v,description:y,picture:g,price:h,tax:m,taxValue:0},count:1,total:{price:h,currencyId:"RUB"}}]},(function(e,r){e&&n.emit(o.ERROR,e),t(r,e)}))}))}else t(null,a)})):t(null,new Error("missing `cpsEmail` in params")):t(null,new Error("missing `code` of product in params"))},t.prototype.getSberIdUserInfo=function(e){void 0===e&&(e=_e),function(e){M("https://online.sberbank.ru/CSAFront/api/oidc/sbid?client_id=".concat("fbdea60d-1f60-425f-9917-d2fe53b2ac3f"),(function(t,n){e(t,n&&JSON.parse(n))}),!0)}((function(t,n){e(n,t)}))},t.prototype.showSberIdNotificationBanner=function(e){var t=this;$({"helper::showSberIdNotificationBanner":window.location.hostname},this.currentTabId),function(){var e;return null!==(e=p(Te))&&void 0!==e&&e}()||this.sberIdBanner||this.userSession||this.getSberIdUserInfo((function(n){if(n&&!t.sberIdBanner&&!t.userSession){var r=e.position,i=e.fontFamily,a=e.offset,s=e.autoCloseDuration,c=je(e,["position","fontFamily","offset","autoCloseDuration"]),l="".concat((null==n?void 0:n.firstname)||""," ").concat((null==n?void 0:n.surname)||"").trim();t.sberIdBanner=new Fe({position:r,fontFamily:i,offset:a,autoCloseDuration:s,displayName:l}),t.sberIdBanner.attach();var u=function(){t.openProviderOAuth(Pe(Pe({},c),{action:"login",provider:"sberbank",provider_sso:Boolean(l)}))},d=function(){var e;null===(e=t.sberIdBanner)||void 0===e||e.destroy()},p=function(){var e,n;null===(e=t.sberIdBanner)||void 0===e||e.removeListener("click",u),null===(n=t.sberIdBanner)||void 0===n||n.removeListener("destroy",p),t.removeListener(o.LOGIN,d),t.removeListener(o.OAUTHLOGIN,d),delete t.sberIdBanner};t.sberIdBanner.addListener("click",u),t.sberIdBanner.addListener("destroy",p),t.addListener(o.LOGIN,d),t.addListener(o.OAUTHLOGIN,d)}}))},t.prototype.redirectToAuth=function(e){void 0===e&&(e={}),We("redirectToAuth %o",e);var t=e.path,n=void 0===t?"/login-20/login":t,o=je(e,["path"]),r=Pe(Pe({back:window.location.href},o),De(e)),i={startTime:Date.now()};this.userSession||(r.session=!1);var a=D("https://id.rambler.ru".concat(n),r,i);window.location.href=a},t.prototype.openAuth=function(e,t){var n=this;void 0===e&&(e={}),void 0===t&&(t=_e),We("openAuth %o",e);var r=Pe(Pe(Pe({},e),De(e)),{startTime:Date.now()});if(this.userSession||(r.session=!1),this.authFrame)this.authFrame.configure(r);else{this.authFrame=new Ce(r);var i=function(e){var t;"object"==typeof e&&((null==e?void 0:e.keepWindow)||"registration"===(null==e?void 0:e.on))||null===(t=n.authFrame)||void 0===t||t.destroy()},a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.emit.apply(n,Ne([o.CLOSE],e,!1))},s=function(){setTimeout((function(){var e,t;null===(e=n.authFrame)||void 0===e||e.removeListener(o.CLOSE,a),null===(t=n.authFrame)||void 0===t||t.removeListener(o.DESTROY,s),n.removeListener(o.LOGIN,i),n.removeListener(o.OAUTHLOGIN,i),delete n.authFrame}),0)};this.authFrame.addListener(o.CLOSE,a),this.authFrame.addListener(o.DESTROY,s),this.addListener(o.LOGIN,i),this.addListener(o.OAUTHLOGIN,i)}var c=function(){var e;null===(e=n.authFrame)||void 0===e||e.removeListener(o.LOADED,c),t()},l=function(){var e,t,r;null===(e=n.authFrame)||void 0===e||e.removeListener(o.CLOSE,l),null===(t=n.authFrame)||void 0===t||t.removeListener(o.DESTROY,l),null===(r=n.authFrame)||void 0===r||r.removeListener(o.LOADED,c)};this.authFrame.addListener(o.CLOSE,l),this.authFrame.addListener(o.DESTROY,l),this.authFrame.addListener(o.LOADED,c),this.authFrame.attach()},t.prototype.openProviderOAuth=function(e){We("openProviderOAuth %o",e),new Oe(Pe(Pe(Pe({},e),De(e)),{startTime:Date.now()})).attach()},t.prototype.redirectToProviderOAuth=function(e){We("redirectToProviderOAuth %o",e);var t=Pe(Pe({on:"login",back:window.location.href},e),De(e)),n={startTime:Date.now()},o=D("https://id.rambler.ru/oauth-20/",t,n);window.location.href=o},t}(ye),qe=function(){if(Array.isArray(window[i])||!window[i]){var e=window[i]||[];window[i]=new ze,e.forEach((function(e){return e()}))}};document.body?qe():document.addEventListener("DOMContentLoaded",qe,!1)}()}();
//# sourceMappingURL=auth_events.js.map
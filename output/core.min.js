!function(){"use strict";var e={355:function(e){var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===a}(e)}(e)},a="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?n((a=e,Array.isArray(a)?[]:{}),e,t):e;var a}function i(e,t,a){return e.concat(t).map((function(e){return r(e,a)}))}function s(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function o(e,t){try{return t in e}catch(e){return!1}}function n(e,a,l){(l=l||{}).arrayMerge=l.arrayMerge||i,l.isMergeableObject=l.isMergeableObject||t,l.cloneUnlessOtherwiseSpecified=r;var c=Array.isArray(a);return c===Array.isArray(e)?c?l.arrayMerge(e,a,l):function(e,t,a){var i={};return a.isMergeableObject(e)&&s(e).forEach((function(t){i[t]=r(e[t],a)})),s(t).forEach((function(s){(function(e,t){return o(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,s)||(o(e,s)&&a.isMergeableObject(t[s])?i[s]=function(e,t){if(!t.customMerge)return n;var a=t.customMerge(e);return"function"==typeof a?a:n}(s,a)(e[s],t[s],a):i[s]=r(t[s],a))})),i}(e,a,l):r(a,l)}n.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,a){return n(e,a,t)}),{})};var l=n;e.exports=l}},t={};function a(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,a),s.exports}!function(){var e=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=()=>Boolean(window.martech&&window.martech.info&&!0===window.martech.info.debug);if(window.console&&window.console.log&&a()){const a={color:"orange",background:"black"};"string"!=typeof e?console.log(`%c MARTECH (${"prod".toUpperCase()}) :: ${t||""}`,`background-color:${a.background};color:${a.color};padding:4px;border:1px solid ${a.color};`,e):console.log(`%c MARTECH (${"prod".toUpperCase()}) :: ${e} `,`background-color:${a.background};color:${a.color};padding:4px;border:1px solid ${a.color};`)}};window.martech=window.martech||{};var t=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{let a=martech,r=e.split(".");return"martech"===r[0]&&(r=r.slice(1)),r.forEach(((e,i)=>{void 0===a[e]&&(a[e]=Object.is(r.length-1,i)&&t?t:{}),a=a[e]})),a}catch(t){console.warn("Couldn't create namespace:",e)}},r=a(355),i=JSON.parse('{"campaignClass":false,"campaignFolder":false}'),o=JSON.parse('{"profile":{"apiData":{},"user":{"pid":false,"session":{"id":false,"expire":false,"newSession":true},"seen":{"last_seen":false,"current_seen":false},"origin":false,"settings":{"meters":{}},"activities":{}},"profileScripts":{}},"status:":{}}');const n=e=>Array.isArray(e)?e:e.match(/([^[.\]])+/g),l=(e,t,a)=>{if(!t)return;const r=n(t);r.reduce(((e,t,i)=>(void 0===e[t]&&(e[t]={}),i===r.length-1&&(e[t]=a),e[t])),e)},c="martechdata",u={local:window.localStorage,session:window.sessionStorage},d=e=>u[e],p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;const a=d(e);return null!==a.getItem(t)&&void 0!==a.getItem(t)||a.setItem(t,JSON.stringify({})),JSON.parse(a.getItem(t))},g=(e,t,a)=>((e,t,a)=>{if(!t)return;const r=n(t).reduce(((e,t)=>e&&e[t]),e);return void 0===r?a:r})(p(e,a),t),m=(e,t,a)=>{const r=p(e,a);return i=r,!!(s=t)&&null!=n(s).reduce(((e,t)=>e&&e[t]),i);var i,s},h=function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c;const i=p(e,r);l(i,t,a);const s=d(e);s.setItem(r,JSON.stringify(i))},y=(e,t)=>g("local",e,t),b=(e,t,a)=>h("local",e,t,a),_=(e,t)=>g("session",e,t),v=(e,t)=>m("session",e,t),w=(e,t,a)=>h("session",e,t,a);class f{constructor(e){this.visitor=e,this.pId=!(!this.visitor.cookies.tmg_p13n||!this.visitor.cookies.tmg_p13n.pId)&&this.visitor.cookies.tmg_p13n.pId}getProfile(){const e=this.getLocalProfile()||!1,t=this.updateSeen(e.user.seen);return{user:{pid:e.user.pid,session:e.user.session,seen:t,origin:this.visitor.page_url_host,settings:e.user.settings,activities:e.user.activities},profileScripts:e.profileScripts}}updateSeen(e){const t=e.current_seen||!1;return e.last_seen=t||!1,e.current_seen=Date.now(),{last_seen:e.last_seen,current_seen:e.current_seen}}createProfile(t){y("profile")?(b("profile.user",t.user),b("profile.profileScripts",t.profileScripts),e("Profile Class :: localProfile updated.")):(b("profile",{user:t.user,profileScripts:t.profileScripts}),e("Profile Class :: localProfile Created."))}getLocalProfile(){let e=y("profile");return e&&e.user?e.user.pid?this.pId?e.user.pid!==this.pId?(e=o,e.profile.apiData={},e.profile.user.pid=this.pId,b("profile",e.profile),e.profile):e:(e=o,b("profile",e.profile),e.profile):this.pId?(e.user.pid=this.pId,e):e:this.pId?(e=o,e.profile.user.pid=this.pId,e.profile):(e=o,e.profile)}}var S=e=>{const t=e+"=",a=decodeURIComponent(document.cookie).split(";");let r="";for(let e=0;e<a.length;e++){for(var i=a[e];" "===i.charAt(0);)i=i.substring(1);0===i.indexOf(t)&&(r=i.substring(t.length,i.length))}return r};const T=e=>`{${e}}`,A=e=>{let t=!1;try{t=JSON.parse(e)}catch(e){}return t};var P=(e,t)=>{let a=t||{},r=e,i=!1,s="",o=[];const n=[];let l=[];const c=/[{?,\s]\s*"([^"]|\\")+"\s*:(\s*"([^"]|\\")+"|(.+))\s*[},]/gi,u=/^\s*{?\s*'|'\s*}?\s*$/i;if(!e)return a;if("[object Object]"===Object.prototype.toString.call(e))return e;if(i=A(r),i||(l=r.match(c)||[],l.forEach((e=>{if(e.includes('"label"')){const t=e.replace(/^\s*[{\s]|[,}]\s*$/gi,"").split(":")[1].replace(/\s*"([^]+|\\")"\s*$/gi,"$1"),a=t.replace(/"/gi,'\\"'),i=e.replace(t,a);r=r.replace(e,i)}})),s=r.replace(c,""),o=s.split(/,(?=(?:[^,]*:[^,]*)|[^,]*$)/)),o.forEach((e=>{const t=e.replace(/^\s*{|}\s*$/gi,"");A(T(t))||n.push(t)})),n.forEach((e=>{let t=!1,a=e;!0===u.test(e)&&(a=(e=>{let t=e;return t=t.replace(/^\s*'([^']+|\\')':/,'"$1":'),t=t.replace(/:\s*('')\s*$/,': ""'),t=t.replace(/:\s*'([^']+|\\')'\s*$/,': "$1"'),t})(e),t=A(T(a))),t||!0!==/[^"']\w+[^"']:/.test(a)||(a=(e=>{let t=e;return t=t.replace(/^\s*(.*?):/,'"$1":'),t})(a),t=A(T(a))),t&&(r=r.replace(e,a))})),i=A(r),i)a=A(r);else try{JSON.parse(r)}catch(e){console.log("martech utility/json failed:",e)}return a};const x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;const a=new URLSearchParams(new URL(t).search);return a.get(e)||!1};var k=JSON.parse('{"afghanistan":"AF","aland islands":"AX","albania":"AL","algeria":"DZ","american samoa":"AS","andorra":"AD","angola":"AO","anguilla":"AI","antarctica":"AQ","antigua and barbuda":"AG","argentina":"AR","armenia":"AM","aruba":"AW","australia":"AU","austria":"AT","azerbaijan":"AZ","bahrain":"BH","bahamas":"BS","bangladesh":"BD","barbados":"BB","belarus":"BY","belgium":"BE","belize":"BZ","benin":"BJ","bermuda":"BM","bhutan":"BT","bolivia":"BO","bonaire":"BQ","bosnia and herzegovina":"BA","botswana":"BW","bouvet island":"BV","brazil":"BR","british indian ocean territory":"IO","brunei darussalam":"BN","bulgaria":"BG","burkina faso":"BF","burundi":"BI","cambodia":"KH","cameroon":"CM","canada":"CA","cape verde":"CV","cayman islands":"KY","central african republic":"CF","chad":"TD","chile":"CL","china":"CN","christmas island":"CX","cocos islands":"CC","colombia":"CO","comoros":"KM","congo":"CG","congo democratic republic":"CD","cook islands":"CK","costa rica":"CR","cote d ivoire":"CI","croatia":"HR","cuba":"CU","curacao":"CW","cyprus":"CY","czech republic":"CZ","denmark":"DK","djibouti":"DJ","dominica":"DM","dominican republic":"DO","ecuador":"EC","egypt":"EG","el salvador":"SV","equatorial guinea":"GQ","eritrea":"ER","estonia":"EE","ethiopia":"ET","falkland islands":"FK","faroe islands":"FO","fiji":"FJ","finland":"FI","france":"FR","french guiana":"GF","french polynesia":"PF","french southern territories":"TF","gabon":"GA","gambia":"GM","georgia":"GE","germany":"DE","ghana":"GH","gibraltar":"GI","greece":"GR","greenland":"GL","grenada":"GD","guadeloupe":"GP","guam":"GU","guatemala":"GT","guernsey":"GG","guinea":"GN","guinea-bissau":"GW","guyana":"GY","haiti":"HT","heard island and mcdonald islands":"HM","holy see":"VA","honduras":"HN","hong kong":"HK","hungary":"HU","iceland":"IS","india":"IN","indonesia":"ID","iran":"IR","iraq":"IQ","ireland":"IE","isle of man":"IM","israel":"IL","italy":"IT","jamaica":"JM","japan":"JP","jersey":"JE","jordan":"JO","kazakhstan":"KZ","kenya":"KE","kiribati":"KI","north korea":"KP","south korea":"KR","kuwait":"KW","kyrgyzstan":"KG","laos":"LA","latvia":"LV","lebanon":"LB","lesotho":"LS","liberia":"LR","libya":"LY","liechtenstein":"LI","lithuania":"LT","luxembourg":"LU","macao":"MO","macedonia":"MK","madagascar":"MG","malawi":"MW","malaysia":"MY","maldives":"MV","mali":"ML","malta":"MT","marshall islands":"MH","martinique":"MQ","mauritania":"MR","mauritius":"MU","mayotte":"YT","mexico":"MX","micronesia":"FM","moldova":"MD","monaco":"MC","mongolia":"MN","montenegro":"ME","montserrat":"MS","morocco":"MA","mozambique":"MZ","myanmar":"MM","namibia":"NA","nauru":"NR","nepal":"NP","netherlands":"NL","new caledonia":"NC","new zealand":"NZ","nicaragua":"NI","niger":"NE","nigeria":"NG","niue":"NU","norfolk island":"NF","northern mariana islands":"MP","norway":"NO","oman":"OM","pakistan":"PK","palau":"PW","palestine":"PS","panama":"PA","papua new guinea":"PG","paraguay":"PY","peru":"PE","philippines":"PH","pitcairn":"PN","poland":"PL","portugal":"PT","puerto Rico":"PR","qatar":"QA","reunion":"RE","romania":"RO","russian federation":"RU","rwanda":"RW","saint barthelemy":"BL","saint helena":"SH","saint kitts and nevis":"KN","saint lucia":"LC","saint martin":"MF","saint Pierre and Miquelon":"PM","saint vincent and the grenadines":"VC","samoa":"WS","san marino":"SM","sao tome and principe":"ST","saudi arabia":"SA","senegal":"SN","serbia":"RS","seychelles":"SC","sierra leone":"SL","singapore":"SG","sint maarten":"SX","slovakia":"SK","slovenia":"SI","solomon islands":"SB","somalia":"SO","south africa":"ZA","south georgia and the south sandwich islands":"GS","south sudan":"SS","spain":"ES","sri lanka":"LK","sudan":"SD","suriname":"SR","svalbard and jan mayen":"SJ","swaziland":"SZ","sweden":"SE","switzerland":"CH","syrian arab republic":"SY","taiwan":"TW","tajikistan":"TJ","tanzania":"TZ","thailand":"TH","timor-leste":"TL","togo":"TG","tokelau":"TK","tonga":"TO","trinidad and tobago":"TT","tunisia":"TN","turkey":"TR","turkmenistan":"TM","turks and caicos islands":"TC","tuvalu":"TV","uganda":"UG","ukraine":"UA","united arab emirates":"AE","united kingdom":"GB","united states":"US","united states minor outlying islands":"UM","uruguay":"UY","uzbekistan":"UZ","vanuatu":"VU","venezuela":"VE","viet nam":"VN","british virgin islands":"VG","u.s. virgin Islands":"VI","wallis and futuna":"WF","western sahara":"EH","yemen":"YE","zambia":"ZM","zimbabwe":"ZW"}'),D=JSON.parse('{"y":{"ampproject":{"hosts":["ampproject.org"]},"aol":{"hosts":["aol.co.uk","aol.com"]},"appspot":{"hosts":["appspot.com"]},"ask":{"hosts":["ask.com"]},"auone":{"hosts":["auone.jp"]},"baidu":{"hosts":["baidu.com"]},"biglobe":{"hosts":["biglobe.ne.jp"]},"bing":{"hosts":["bing.com"]},"cambridge":{"hosts":["cambridge.org"]},"centrum":{"hosts":["centrum.cz"]},"coccoc":{"hosts":["coccoc.com"]},"daum":{"hosts":["daum.net"]},"docomo":{"hosts":["docomo.ne.jp"]},"dogpile":{"hosts":["dogpile.com"]},"duckduckgo":{"hosts":["duckduckgo.com"]},"earthlink":{"hosts":["earthlink.net"]},"ecosia":{"hosts":["ecosia.org"]},"goo":{"hosts":["goo.ne.jp"]},"goodreads":{"hosts":["goodreads.com"]},"google":{"hosts":["google","googleadservices.com","googleapis.com"]},"kvasir":{"hosts":["kvasir.no"]},"linuxmint":{"hosts":["linuxmint.com"]},"lycos":{"hosts":["lycos.com"]},"maxask":{"hosts":["maxask.com"]},"msn":{"hosts":["msn.com"]},"myway":{"hosts":["myway.com"]},"naver":{"hosts":["naver.com"]},"nifty":{"hosts":["nifty.com"]},"qwant":{"hosts":["qwant.com"]},"rakuten":{"hosts":["rakuten.co.jp"]},"sapo":{"hosts":["sapo.pt"]},"search":{"hosts":["search.com"]},"searchalot":{"hosts":["searchalot.com"]},"seznam":{"hosts":["seznam.cz"]},"shenma":{"hosts":["sm.cn"]},"so":{"hosts":["so.com"]},"sogou":{"hosts":["sogou.com"]},"startpagina":{"hosts":["startpagina.nl"]},"t-online":{"hosts":["t-online.de"]},"walla":{"hosts":["walla.co.il"]},"xgoogle":{"hosts":["xgoogle.xyz"]},"yandex":{"hosts":["yandex"]},"yahoo":{"hosts":["ouryahoo.com","yahoo"]}},"x":{"avforums":{"hosts":["avforums.com"]},"blogspot":{"hosts":["blogspot.com"]},"cafemom":{"hosts":["cafemom.com"]},"digg":{"hosts":["digg.com"]},"disqus":{"hosts":["disqus.com"]},"facebook":{"hosts":["facebook.com","fb.com"]},"fc2":{"hosts":["fc2.com"]},"feedly":{"hosts":["feedly.com"]},"goodreads":{"hosts":["goodreads.com"]},"instagram":{"hosts":["instagram.com"]},"linkedin":{"hosts":["linkedin.com","lnkd.in"]},"livejournal":{"hosts":["livejournal.com"]},"netvibes":{"hosts":["netvibes.com"]},"nextdoor":{"hosts":["nextdoor.com"]},"odnoklassniki":{"hosts":["ok.ru"]},"pinterest":{"hosts":["pinterest"]},"plurk":{"hosts":["plurk.com"]},"reddit":{"hosts":["reddit.com"]},"snapchat":{"hosts":["snapchat.com"]},"twitter":{"hosts":["t.co","twitter.com"]},"vk":{"hosts":["vk.com"]},"wordpress":{"hosts":["wordpress.com"]},"youtube":{"hosts":["youtube.com"]},"zhihu":{"hosts":["zhihu.com"]}}}');class C{init(){return this.setAudience()}getScreenWidth(){return window.screen.width}getScreenHeight(){return window.screen.height}getViewportWidth(){return Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)}getViewportHeight(){return Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}getBrowserVendor(){return"undefined"!=typeof navigator&&navigator.vendor}getBrowserLanguage(){return"undefined"!=typeof navigator&&navigator.language}getUserAgent(){return"undefined"!=typeof navigator&&navigator.userAgent}async getOSInfo(){const e=navigator.userAgent,t=navigator.appVersion;let a="unknown",r="unknown";const i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Chrome OS",r:/CrOS/},{s:"Linux",r:/(Linux|X11(?!.*CrOS))/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(const t in i){const r=i[t];if(r.r.test(e)){a=r.s;break}}switch(/Windows/.test(a)&&(r=/Windows (.*)/.exec(a)[1],a="Windows"),/Mac OS/.test(a)&&(a="Mac OS"),a){case"QNX":case"UNIX":case"Sun OS":case"Open BSD":a="Linux";break;case"Mac OS":case"Android":navigator.userAgentData?r=await navigator.userAgentData.getHighEntropyValues(["platformVersion"]).then((e=>e.platformVersion)):(r=/(?:Android|Mac OS|Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh) ([\.\_\d]+)/.exec(e)[1],r=r.replace(/_/gi,"."));break;case"iOS":r=/OS (\d+)_(\d+)_?(\d+)?/.exec(t),r=r[1]+"."+r[2]+"."+(0|r[3])}return{os:a,version:r}}getUserBot(){const e=this.getUserAgent();return!!e&&null!==e.match(/bot\b|spider|crawl|wget|slurp|Mediapartners-Google|nutch|BingPreview|PhantomJS|PTST|yahoo ad mon|Google Web Preview|Google Page Speed|outbrain|Pingdom|yandex/i)}getReferrer(){if(!document.referrer)return!1;const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return-1!==document.referrer.indexOf("."+e+(t?"":"."))||-1!==document.referrer.indexOf("://"+e+(t?"":"."))},t={...D.y,...D.x};return Object.getOwnPropertyNames(t).find((a=>e(a)||t[a].hosts.filter((t=>e(t,!0))).length>0))||!1}getTouchScreen(){let e=!1;if("maxTouchPoints"in navigator)e=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)e=navigator.msMaxTouchPoints>0;else{var t=window.matchMedia&&matchMedia("(pointer:coarse)");if(t&&"(pointer:coarse)"===t.media)e=!!t.matches;else if("orientation"in window)e=!0;else{const t=navigator.userAgent;e=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(t)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(t)}}return e}getConnectionSpeed(){const e=navigator.connection||navigator.mozConnection||!1|navigator.webkitConnection;return e?e.effectiveType:""}getIsMobile(){const e=navigator.userAgent,t=/iPhone/i,a=/iPod/i,r=/iPad/i,i=/\biOS-universal(?:.+)Mac\b/i,s=/\bAndroid(?:.+)Mobile\b/i,o=/Android/i,n=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,l=/Silk/i,c=/Windows Phone/i,u=/\bWindows(?:.+)ARM\b/i,d=/BlackBerry/i,p=/BB10/i,g=/Opera Mini/i,m=/\b(CriOS|Chrome)(?:.+)Mobile/i,h=/Mobile(?:.+)Firefox\b/i,y=e=>void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream;return(e=>{let b={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?b.userAgent=e:e&&e.userAgent&&(b={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):b={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};let _=b.userAgent,v=_.split("[FBAN");void 0!==v[1]&&(_=v[0]),v=_.split("Twitter"),void 0!==v[1]&&(_=v[0]);const w=(e=>t=>t.test(e))(_),f={apple:{phone:w(t)&&!w(c),ipod:w(a),tablet:!w(t)&&(w(r)||y(b))&&!w(c),universal:w(i),device:(w(t)||w(a)||w(r)||w(i)||y(b))&&!w(c)},amazon:{phone:w(n),tablet:!w(n)&&w(l),device:w(n)||w(l)},android:{phone:!w(c)&&w(n)||!w(c)&&w(s),tablet:!w(c)&&!w(n)&&!w(s)&&(w(l)||w(o)),device:!w(c)&&(w(n)||w(l)||w(s)||w(o))||w(/\bokhttp\b/i)},windows:{phone:w(c),tablet:w(u),device:w(c)||w(u)},other:{blackberry:w(d),blackberry10:w(p),opera:w(g),firefox:w(h),chrome:w(m),device:w(d)||w(p)||w(g)||w(h)||w(m)},any:!1,phone:!1,tablet:!1};return f.any=f.apple.device||f.android.device||f.windows.device||f.other.device,f.phone=f.apple.phone||f.android.phone||f.windows.phone,f.tablet=f.apple.tablet||f.android.tablet||f.windows.tablet,f})(e)}getUrl(){const e=!(!window.location||!window.location.href)&&window.location.href,t=!(!window.location||!window.location.protocol)&&window.location.protocol.replace(":",""),a=!(!window.location||!window.location.search||""===window.location.search)&&window.location.search.replace("?","");let r=!1,i=!1;if(window.location&&window.location.hostname){const e=window.location.hostname.split(".");i=e.shift(),"www"===i&&(i=!1),r=e.join(".")}return{url:e,protocol:t,query:a,domain:r,subdomain:i}}getBrowser(){const e=navigator.userAgent;let t,a=e.match(/(opera|chrome|crios|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(a[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:t[1]||""}):"Chrome"===a[1]&&(t=e.match(/\bOPR|Edge\/(\d+)/),null!==t)?{name:"Opera",version:t[1]}:"CriOS"===a[1]?(t=e.match(/\bCriOS\/(\d+)/),{name:"Chrome",version:null!==t?t[1]:"0"}):(a=a[2]?[a[1],a[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&a.splice(1,1,t[1]),{name:a[0],version:a[1]})}getGeoISO(){const e=document.querySelector('meta[name="tmgads.geo"]');return x("martech_country_code")||!!e&&e.content}getGeoLocation(e){return e&&Object.keys(k).find((t=>k[t]===e.toUpperCase()))||!1}getPlatform(){const e=document.querySelector(".escenic-title")||!1,t=document.querySelector("#gatsby-noscript")||!1,a=document.querySelector("html").classList||!1;if(e)return"escenic";if(t)return"spa";if(!a)return"unknow";for(const e of a)if(e.includes("Renderer"))return"aem"}getCookies(){return{tmg_p13n:!!S("tmg_p13n")&&P(S("tmg_p13n")||!1),tmg_session:S("tmg_session")&&S("tmg_session")||!1,tmg_refresh:S("tmg_refresh")&&S("tmg_refresh")||!1,tmg_pid:S("tmg_pid")&&S("tmg_pid")||!1,tmg_createddate:S("tmg_createddate")&&S("tmg_createddate")||!1,s_vis_repeat:S("s_vis_repeat")&&S("s_vis_repeat")||!1,spV1Consent:S("_sp_v1_consent")&&S("_sp_v1_consent")||!1,utp:S("__utp")&&S("__utp")||!1}}getPageMeta(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=document.querySelector(`meta[name="${e}"]`),i=!!r&&(a?a(t?r.content.toLowerCase():r.content):t?r.content.toLowerCase():r.content);return"keywords"===e?i&&"string"==typeof i?i.split(","):[]:"false"!==i&&("true"===i||i)}getPageType(){const e=this.getPageRenderer()||"unknown",t=this.getPageMeta("DCSext.Content_Type",!0);return["galleryRenderer","galleryRenderer2"].includes(e)?"gallery":["articleRenderer","articleRenderer2","longFormRenderer","liveBlogRenderer"].includes(e)?"article":"homePageRenderer"===e?"homepage":"indexRenderer"===e&&"topic"===t?"topic":["indexRenderer","authorIndexRenderer"].includes(e)&&"index"===t?"index":e}getPageRenderer(){const e=document.querySelector("html").classList||!1;if(e){for(const t of e)if(t.includes("Renderer"))return t.replace("HTML","");return!1}return!1}getPageIcid(){const e=x("icid"),t=x("ICID");return e||t||!1}getOfferID(){const e=x("offerId"),t=x("offerID"),a=x("offerid"),r=x("OFFERID");return e||t||a||r||!1}isGoogleShowcase(){const e=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)});return!!e.gaa_at&&!!e.gaa_ts&&!!e.gaa_n&&!!e.gaa_sig||!1}getUserStatus(e){const t=S("tmg_pid"),a=this.getUserTypeExtensions(e,"readerTypeExtension"),r=this.getUserTypeExtensions(e,"subscriptionTypeExtension");let i=t?"logged in":"logged out";return e&&e.readerType?i+="subscriber"===e.readerType||"subscribed"===e.readerType?";subscriber":";registered":i+=t?";registered":";anonymous",{logged_in:!!i.includes("logged in"),logged_in_registered:!(!i.includes("logged in")||!i.includes("registered")),logged_in_subscriber:!(!i.includes("logged in")||!i.includes("subscriber")),logged_out_registered:!(i.includes("logged in")||!i.includes("registered")),logged_out_subscriber:!(i.includes("logged in")||!i.includes("subscriber")),logged_out_type_wine_puzzle_only:!(i.includes("logged in")||!i.includes("subscriber")||!r||!r.includes("Puzzles")&&!r.includes("Wine")||"Standard"===e.subscriptionType||"Digital Light"===e.subscriptionType),anonymous:!!i.includes("anonymous"),registered:!!i.includes("registered"),subscriber:!!i.includes("subscriber"),type_digital:!(!i.includes("subscriber")||"Standard"!==e.subscriptionType),type_digital_plus:!(!i.includes("subscriber")||"All Digital Access"!==e.subscriptionType),type_digital_light:!(!i.includes("subscriber")||"Digital Light"!==e.subscriptionType),type_digital_us:!(!i.includes("subscriber")||"Digital US"!==e.subscriptionType),type_sport:!(!i.includes("subscriber")||"Sport"!==e.subscriptionType),type_print_subscriber:!(!i.includes("subscriber")||!["All Digital Access plus Saturday Newspaper","All Digital Access plus Weekend Newspapers","Complete","Complete 5 Day","Complete 6 Day","Premium | Digital Editions with weekend print","Unlimited Web Access plus Saturday Newspaper","Print Editions 5 Day","Print Editions Weekend","2 Day Print Classic","2-day Complete","5-day Complete","6-day Complete","7 Day Print","Print Editions","Print Editions 6 Day","Saturday Print","Saturday Print Classic"].includes(e.subscriptionType)),type_flexreg:!(!a||!a.includes("flexreg")),type_puzzle:!(!r||!r.includes("Puzzles")),type_wine:!(!r||!r.includes("Wine")),type_wine_puzzle_only:!(!i.includes("subscriber")||!r||!r.includes("Puzzles")&&!r.includes("Wine")||"Standard"===e.subscriptionType||"Digital Light"===e.subscriptionType||"All Digital Access"===e.subscriptionType)}}getCookieConsent(e){return!(!e||!e.includes("!1"))}getIsCountryWithCookieBanner(e){return["united kingdom","austria","belgium","bulgaria","croatia","cyprus","czech republic","denmark","estonia","finland","france","germany","greece","hungary","ireland","italy","latvia","lithuania","luxembourg","malta","netherlands","poland","portugal","romania","slovakia","slovenia","spain","sweden","iceland","liechtenstein","norway"].includes(e)}getIsCountryAllowToSell(e){return["argentina","australia","austria","bahrain","barbados","belgium","bermuda","brazil","bulgaria","canada","cayman islands","china","croatia","cyprus","czech republic","denmark","estonia","falkland islands","finland","france","germany","gibraltar","greece","hong kong","hungary","iceland","india","indonesia","ireland","israel","italy","japan","kenya","latvia","lithuania","luxembourg","malaysia","malta","mexico","monaco","netherlands","new zealand","norway","philippines","poland","portugal","qatar","romania","russian federation","saudi arabia","singapore","slovakia","slovenia","south africa","south korea","spain","sweden","switzerland","thailand","turkey","united arab emirates","united kingdom","united states"].includes(e)}getSubscriptionType(e){let t=!1;return e&&e.subscriptionType&&(t=e.subscriptionType.toLowerCase()),t}getUserTypeExtensions(e,t){let a=!1;const r=[];return e&&e[t]&&((Array.isArray(e[t])?e[t]:e[t].split(",")).forEach((e=>{r.push(e)})),a=r.length>0?r:a),a}getArticlePublicRange(e){let t=this.getPageMeta("DCSext.articleFirstPublished");const a=(new Date).getTime()-864e5*e;return t=Date.parse(t),t>a}setAudience(){const e=this.getBrowser(),t=this.getIsMobile(),a=this.getUrl();return this.getOSInfo().then((r=>({display_screen_width:this.getScreenWidth(),display_screen_height:this.getScreenHeight(),display_viewport_width:this.getViewportWidth(),display_viewport_height:this.getViewportHeight(),display_has_touch_support:this.getTouchScreen(),network_connection_speed:this.getConnectionSpeed(),mobile_device_is_mobile:t.any,mobile_device_is_tablet:t.tablet,mobile_device_is_phone:t.phone,os_platform:r.os,os_version:r.version,page_type:this.getPageType(),page_url:a.url,page_url_protocol:a.protocol,page_url_host:window.location.host||!1,page_url_domain:a.domain,page_url_subdomain:a.subdomain,page_url_query:a.query,page_url_path:window.location.pathname||!1,browser_name:e.name,browser_version:e.version,browser_language:this.getBrowserLanguage(),browser_vendor:this.getBrowserVendor(),source_referrer:this.getReferrer(),user_agent:this.getUserAgent(),user_bot:this.getUserBot(),cookies:this.getCookies(),geo_iso:this.getGeoISO(),geo_location:this.getGeoLocation(this.getGeoISO()),platform:this.getPlatform()||!1,channel:this.getPageMeta("DCSext.Channel",!0)||!1,content_type:this.getPageMeta("DCSext.Content_Type",!0)||!1,article_id:this.getPageMeta("DCSext.articleId")||!1,article_author:this.getPageMeta("DCSext.author",!0)||!1,article_first_published:this.getPageMeta("DCSext.articleFirstPublished")||!1,page_renderer:this.getPageRenderer()||!1,business_segment:this.getPageMeta("tmgads.businessSegment",!0)||!1,category:this.getPageMeta("DCSext.Category",!0)||!1,category_id:this.getPageMeta("tmgads.channel",!0)||!1,keywords:this.getPageMeta("keywords",!0)||!1,premium_override:this.getPageMeta("tmg.premium.override"),premium_state:this.getPageMeta("tmg.premium.state")||!1,icid:this.getPageIcid()||!1,offer_id:this.getOfferID()||!1,user_status:this.getUserStatus(this.getCookies().tmg_p13n)||!1,cookie_consent:y("gdpr.consentStatus.hasConsentData","_sp_user_consent_4917")||!1,country_with_cookie_banner:this.getIsCountryWithCookieBanner(this.getGeoLocation(this.getGeoISO()))||!1,country_sell_allowed:this.getIsCountryAllowToSell(this.getGeoLocation(this.getGeoISO()))||!1,subscriber_type:this.getSubscriptionType(this.getCookies().tmg_p13n)||!1,reader_type_extensions:this.getUserTypeExtensions(this.getCookies().tmg_p13n,"readerTypeExtension")||!1,published_range_one_day:this.getArticlePublicRange(1)||!1,published_range_two_day:this.getArticlePublicRange(2)||!1,published_range_one_week:this.getArticlePublicRange(7)||!1,is_aem_google_showcase:this.getPageMeta("tmg.isGoogleShowcase",!0)||!1,is_google_showcase:this.isGoogleShowcase()||!1,title:document.title||!1})))}}var E=JSON.parse('{"excluded":["chase.telegraph.co.uk"],"dev":"https://dev-martech.platforms-preprod-gcp.telegraph.co.uk/martech/","preprod":"https://martech.platforms-preprod-gcp.telegraph.co.uk/martech/","prod":"https://www.telegraph.co.uk/martech/","local":{"secure":"https://localhost:3002/martech/","unsecure":"http://localhost:3001/martech/"}}');const V=()=>!!q(),O=()=>!!M(),N=()=>!!I(),M=()=>!!(window.console&&window.console.log&&/martech_dev=(1|true)/i.test(location.search)),I=()=>!!(window.console&&window.console.log&&/martech_preprod=(1|true)/i.test(location.search)),q=()=>!!(window.console&&window.console.log&&/martech_local=(1|true)/i.test(location.search)),G={env:"prod",domain:E.prod,flags:{debug:window.console&&window.console.log&&/martech_debug=(1|true)/i.test(location.search)||!1,disabled:!!(window.console&&window.console.log&&/martech_disable=(1|true)/i.test(location.search)||E.excluded.includes(document.location.host)||window.tmg&&window.tmg.fbnBypass),prod:!(N()||O()||V()),preprod:N(),dev:O(),local:V(),turnoff:(()=>{const e=location.search.replace("?","").split("&");for(var t=0;t<e.length;t++){const a=e[t].split("=");if("martech_turnoff"===a[0])return a[1].split(",")}return!1})()||!1,splitgroup_overrides:(()=>{let e={};const t=location.search.replace("?","").split("&");for(var a=0;a<t.length;a++){const r=t[a].split("=");if(r[0].includes("martech_splitgroup_")){const t=/martech_splitgroup_(.*)/g.exec(r[0]);t.length>1&&(e={...e,[r[1]]:t[1]})}}return e})()}};var R,L,B,j,F=-1,U=function(e){addEventListener("pageshow",(function(t){t.persisted&&(F=t.timeStamp,e(t))}),!0)},z=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},W=function(){var e=z();return e&&e.activationStart||0},$=function(e,t){var a=z(),r="navigate";return F>=0?r="back-forward-cache":a&&(r=document.prerendering||W()>0?"prerender":document.wasDiscarded?"restore":a.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},H=function(e,t,a){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},a||{})),r}}catch(e){}},J=function(e,t){var a=function a(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",a,!0),removeEventListener("pagehide",a,!0)))};addEventListener("visibilitychange",a,!0),addEventListener("pagehide",a,!0)},Q=function(e,t,a,r){var i,s;return function(o){t.value>=0&&(o||r)&&((s=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=s,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,a),e(t))}},K=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Y=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},X=-1,Z=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},ee=function(e){"hidden"===document.visibilityState&&X>-1&&(X="visibilitychange"===e.type?e.timeStamp:0,ae())},te=function(){addEventListener("visibilitychange",ee,!0),addEventListener("prerenderingchange",ee,!0)},ae=function(){removeEventListener("visibilitychange",ee,!0),removeEventListener("prerenderingchange",ee,!0)},re=function(){return X<0&&(X=Z(),te(),U((function(){setTimeout((function(){X=Z(),te()}),0)}))),{get firstHiddenTime(){return X}}},ie=function(e,t){t=t||{},Y((function(){var a,r=[1800,3e3],i=re(),s=$("FCP"),o=H("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<i.firstHiddenTime&&(s.value=Math.max(e.startTime-W(),0),s.entries.push(e),a(!0)))}))}));o&&(a=Q(e,s,r,t.reportAllChanges),U((function(i){s=$("FCP"),a=Q(e,s,r,t.reportAllChanges),K((function(){s.value=performance.now()-i.timeStamp,a(!0)}))})))}))},se={passive:!0,capture:!0},oe=new Date,ne=function(e,t){R||(R=t,L=e,B=new Date,ue(removeEventListener),le())},le=function(){if(L>=0&&L<B-oe){var e={entryType:"first-input",name:R.type,target:R.target,cancelable:R.cancelable,startTime:R.timeStamp,processingStart:R.timeStamp+L};j.forEach((function(t){t(e)})),j=[]}},ce=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var a=function(){ne(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",a,se),removeEventListener("pointercancel",r,se)};addEventListener("pointerup",a,se),addEventListener("pointercancel",r,se)}(t,e):ne(t,e)}},ue=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,ce,se)}))},de={},pe=function e(t){document.prerendering?Y((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},ge=function(e,t){t=t||{};var a=[800,1800],r=$("TTFB"),i=Q(e,r,a,t.reportAllChanges);pe((function(){var s=z();if(s){var o=s.responseStart;if(o<=0||o>performance.now())return;r.value=Math.max(o-W(),0),r.entries=[s],i(!0),U((function(){r=$("TTFB",0),(i=Q(e,r,a,t.reportAllChanges))(!0)}))}}))};const me=t=>{e(t,"CWV ::")};var he=JSON.parse('{"prod":{"env":"prod","domain":"https://www.telegraph.co.uk","apis":{"genericreg":{"url":"https://api.telegraph.co.uk/commerce/accounts/genericreg"},"identityTokens":{"url":"https://api.telegraph.co.uk/identity/tokens","timeout":5000,"method":"POST","body":{"grant_type":"refresh_token","client_id":"tcuk"},"headers":{"Content-Type":"application/json","Accept":"application/json"},"store":{"label":"identityTokens","expire":10,"encrypt":false}},"pidStatus":{"url":"https://api.telegraph.co.uk/commerce/accounts/{{pid}}/status"},"newslettersMe":{"url":"https://api.telegraph.co.uk/commerce/newsletters/me","timeout":5000,"method":"GET","headers":{"Access-Control-Request-Headers":"application/json","Content-Type":"application/json","Accept":"application/json"},"store":{"label":"newsletterMe","expire":10,"encrypt":true}},"smsMessage":{"url":"https://api.telegraph.co.uk/commerce/subscriptions/me/sms"},"report":{"url":"http://api.telegraph.co.uk/martech/"},"accountsMe":{"url":"https://api.telegraph.co.uk/commerce/accounts/me","timeout":3000,"method":"GET","headers":{"Access-Control-Request-Headers":"application/json","Content-Type":"application/json","Accept":"application/json"}},"googleSubscribeOrder":{"url":"https://api.telegraph.co.uk/commerce/orders/google","method":"POST"}},"scripts":{"onetap":"https://www.telegraph.co.uk/customer/lib/onetap.js","tmguser":"https://secure.telegraph.co.uk/customer/lib/tmguser.js","tmgdecrypt":"https://secure.telegraph.co.uk/customer/lib/tmgdecrypt.js","pianoLibrary":"https://experience.tinypass.com/xbuilder/experience/load?aid=NJu5KnOFpu","applepay":"https://secure.telegraph.co.uk/customer/lib/tmgapplepay.js"},"extendedAccess":{"allowedReferrers":["www.telegraph.co.uk","secure.telegraph.co.uk"],"googleApiClientId":"537085313350-c3frt0pajh077k8gvr6khb14f9eb7frp.apps.googleusercontent.com","loginUrl":"https://secure.telegraph.co.uk/customer/secure/login/","scripts":{"gaa":"https://news.google.com/swg/js/v1/swg-gaa.js","swg":"https://news.google.com/swg/js/v1/swg.js","gsi":"https://accounts.google.com/gsi/client"}}},"staging":{"env":"staging","domain":"https://{{hostname}}","apis":{"genericreg":{"url":"https://api-preprod.telegraph.co.uk/commerce-api-qa/commerce/accounts/genericreg"},"identityTokens":{"url":"https://api-preprod.telegraph.co.uk/identity-api-qa/identity/tokens","timeout":5000,"method":"POST","body":{"grant_type":"refresh_token","client_id":"tcuk"},"headers":{"Content-Type":"application/json","Accept":"application/json"},"store":{"label":"identityTokens","expire":10,"encrypt":false}},"pidStatus":{"url":"https://api-preprod.telegraph.co.uk/commerce-api-qa/commerce/accounts/{{pid}}/status"},"newslettersMe":{"url":"https://api-preprod.telegraph.co.uk/commerce-api-qa/commerce/newsletters/me","timeout":5000,"method":"GET","headers":{"Access-Control-Request-Headers":"application/json","Content-Type":"application/json","Accept":"application/json"}},"smsMessage":{"url":"https://api-preprod.telegraph.co.uk/commerce-api-qa/commerce/subscriptions/me/sms"},"report":{"url":"http://api.telegraph.co.uk/martech/"},"accountsMe":{"url":"https://api-preprod.telegraph.co.uk/commerce/accounts/me","timeout":3000,"method":"GET","headers":{"Access-Control-Request-Headers":"application/json","Content-Type":"application/json","Accept":"application/json"}},"googleSubscribeOrder":{"url":"https://api-preprod.telegraph.co.uk/commerce-api-qa/commerce/orders/google","method":"POST"}},"scripts":{"onetap":"https://secure-staging-ams64.telegraph.co.uk/customer/lib/onetap.js","tmguser":"https://secure-staging-ams64.telegraph.co.uk/customer/lib/tmguser.js","tmgdecrypt":"https://secure-staging-ams64.telegraph.co.uk/customer/lib/tmgdecrypt.js","pianoLibrary":"https://sandbox.tinypass.com/xbuilder/experience/load?aid=AdcpxkpRsu","applepay":"https://secure-staging-ams64.telegraph.co.uk/customer/lib/tmgapplepay.js"},"extendedAccess":{"allowedReferrers":["localhost","staging-ams64.telegraph.co.uk","secure-staging-ams64.telegraph.co.uk"],"googleApiClientId":"537085313350-c3frt0pajh077k8gvr6khb14f9eb7frp.apps.googleusercontent.com","loginUrl":"https://secure-staging-ams64.telegraph.co.uk/customer/secure/login/","scripts":{"gaa":"https://news.google.com/swg/js/v1/swg-gaa.js","swg":"https://news.google.com/swg/js/v1/swg.js","gsi":"https://accounts.google.com/gsi/client"}}},"qa":{"env":"qa","domain":"https://{{hostname}}","apis":{"genericreg":{"url":"https://api.telegraph.co.uk/commerce/accounts/genericreg"},"identityTokens":{"url":"https://api-preprod.telegraph.co.uk/identity-api-uat/identity/tokens","timeout":2000,"method":"POST","body":{"grant_type":"refresh_token","client_id":"tcuk"},"headers":{"Content-Type":"application/json","Accept":"application/json"},"store":{"label":"identityTokens","expire":10,"encrypt":false}},"pidStatus":{"url":"https://api-preprod.telegraph.co.uk/commerce-api-cci/commerce/accounts/{{pid}}/status"},"newslettersMe":{"url":"https://api-preprod.telegraph.co.uk/commerce-api-uat/commerce/newsletters/me","timeout":5000,"method":"GET","headers":{"Access-Control-Request-Headers":"application/json","Content-Type":"application/json","Accept":"application/json"}},"smsMessage":{"url":"https://api.telegraph.co.uk/commerce/subscriptions/me/sms"},"report":{"url":"http://api.telegraph.co.uk/martech/"},"accountsMe":{"url":"https://api.telegraph.co.uk/commerce/accounts/me","timeout":3000,"method":"GET","headers":{"Access-Control-Request-Headers":"application/json","Content-Type":"application/json","Accept":"application/json"}},"googleSubscribeOrder":{"url":"https://api-preprod.telegraph.co.uk/commerce-api-uat/commerce/orders/google","method":"POST"}},"scripts":{"onetap":"https://www.telegraph.co.uk/customer/lib/onetap.js","tmguser":"https://secure.telegraph.co.uk/customer/lib/tmguser.js","tmgdecrypt":"https://secure.telegraph.co.uk/customer/lib/tmgdecrypt.js","pianoLibrary":"https://sandbox.tinypass.com/xbuilder/experience/load?aid=nXCLFFIWmQ","applepay":"https://qa6.telegraph.co.uk/customer/lib/tmgapplepay.js"},"extendedAccess":{"allowedReferrers":["localhost","ci1.telegraph.co.uk","ci2.telegraph.co.uk","ci3.telegraph.co.uk","ci4.telegraph.co.uk","qa1.telegraph.co.uk","qa2.telegraph.co.uk","qa3.telegraph.co.uk","qa4.telegraph.co.uk","qa5.telegraph.co.uk","secure-qa5.telegraph.co.uk","qa6.telegraph.co.uk","secure-qa6.telegraph.co.uk","qa9.telegraph.co.uk","qa10.telegraph.co.uk","qa12.telegraph.co.uk","qa13.telegraph.co.uk","secure-staging-ams64.telegraph.co.uk"],"googleApiClientId":"68301676968-9r2qh1vd3sgtp6l32ct14ku4nuuv7sbd.apps.googleusercontent.com","loginUrl":"https://secure-staging-ams64.telegraph.co.uk/customer/secure/login/","scripts":{"gaa":"https://news.google.com/swg/js/v1/swg-gaa.js","swg":"https://news.google.com/swg/js/v1/swg.js","gsi":"https://accounts.google.com/gsi/client"}}}}');const ye=(e,t)=>{const a={};for(const r in e)if(Array.isArray(e[r])){a[r]=[];for(const i in e[r])"string"==typeof e[r][i]?a[r].push(e[r][i].replace("{{hostname}}",t)):a[r].push(e[r][i])}else"object"==typeof e[r]?a[r]=ye(e[r]):"string"==typeof e[r]?a[r]=e[r].replace("{{hostname}}",t):a[r]=e[r];return a},be=e=>{const t=he[e]||he.prod;return ye(t,window.location.hostname)};const _e=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise(((i,s)=>{if(e){const s=document.createElement("script");if(s.setAttribute("src",e),s.addEventListener("load",i,!1),t&&s.setAttribute("defer","true"),a&&s.setAttribute("async","true"),r&&Array.isArray(r))for(const e of r)s.setAttribute(e.name,e.value);document.querySelector("head").appendChild(s)}else s(Error("No src supplied"))}))};var ve;null===(ve=(()=>{const e=window.location.hostname.split(".");return e.some((e=>/(^|-)qa[0-9]+$/i.test(e)))?be("qa"):e.some((e=>/(^|-)(staging|ci)(.*)$/i.test(e)))?be("staging"):be("prod")})().scripts)||void 0===ve||ve.applepay;const we="https://applepay.cdn-apple.com/jsapi/v1/apple-pay-sdk.js",fe=async()=>{if(!document.querySelector(`script[src="${we}"]`))try{await _e(we)}catch(e){throw e}return Boolean(window.ApplePaySession)},Se=e=>{const{browserName:t,osPlatform:a,osVersion:r}=e;return"Safari"===t&&("iOS"===a&&parseFloat(r)>=12.1||"Mac OS"===a&&parseFloat(r)>=10.14)||"iOS"===a&&parseFloat(r)>=16},Te="tmg.swg.entitlementsReady",Ae=e=>{const{browserName:t}=e;return t.includes("Chrome")},Pe=e=>new Promise(((t,a)=>{setTimeout((()=>{var r,i;null===(r=window.tmg)||void 0===r||null===(i=r.pubsub)||void 0===i||i.subscribe({topic:Te,func:()=>{var e,a;null===(e=window.tmg)||void 0===e||null===(a=e.pubsub)||void 0===a||a.unsubscribe({topic:Te}),t()},runIfAlreadyPublished:!0}),a(new Error(`${Te} not published within ${e}ms.`))}),e)})),xe="profile.user.payment_methods",ke=(e,t)=>w(`${xe}.${e}`,t),De=e=>{if(v(`${xe}.${e}`))return _(`${xe}.${e}`)},Ce=()=>De("apple_pay"),Ee=()=>De("subscribe_with_google"),Ve=async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(a<3){if(void 0!==Ce())return;if(Se({browserName:t.browser_name,osPlatform:t.os_platform,osVersion:t.os_version}))try{if(await fe(),window.ApplePaySession)return void ke("apple_pay",window.ApplePaySession.canMakePayments())}catch(r){return e(r,"PAYMENT METHOD :: CHECKAPPLEPAYSUPPORT"),Ve(t,a+=1)}}ke("apple_pay",!1)},Oe=async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(a<2){if(void 0!==Ee())return;if(Ae({browserName:t.browser_name})){var r,i,s,o,n;if(null!==(r=window.tmg)&&void 0!==r&&null!==(i=r.swg)&&void 0!==i&&i.subscriptions&&null!==(s=window.tmg)&&void 0!==s&&s.googleSubscriber)return void ke("subscribe_with_google",null===(o=window.tmg)||void 0===o||null===(n=o.googleSubscriber)||void 0===n?void 0:n.readyToPay);try{return await Pe(5e3),Oe(t,a+=1)}catch(t){e(t,"PAYMENT METHOD :: CHECKSUBSCRIBEWITHGOOGLESUPPORT")}}}ke("subscribe_with_google",!1)},Ne=e=>e.map((e=>({...e,campaignId:e.campaignId&&"number"==typeof e.campaignId?e.campaignId:Me(`${e.className}`)}))),Me=e=>{let t=0;for(let a=0;a<e.length;a++)t+=e[a].charCodeAt(0);return 911e4+t};const Ie=function(t,a){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!a.campaignName)return;const i=r?t:`${a.campaignName}_${t}`;try{if(void 0===window.s)throw new Error("MARTECH :: Waiting for s before firing tracking");s.eVar75=i,s.events="event52",s.linkTrackEvents="event52",s.linkTrackVars="events,eVar75"+_satellite.getVar("TMG linkTrackVars"),s.tl(!0,"o","Target Custom"),e(`TRACKING :: ${a.campaignName} --\x3e sendEventHit eVar75 = ${i}`)}catch(e){setTimeout((()=>{Ie(t,a,r)}),200)}},qe=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return new Promise(((r,i)=>{const s=setInterval((()=>{const t=e();t&&(r(t),clearInterval(s))}),a);setTimeout((()=>{clearInterval(s),i(new Error(!1))}),t)}))},Ge=function(t,a){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!a.campaignName)return;const i=()=>void 0!==window.alloy;qe(i,1e4).then((()=>{const i=r?t:`${a.campaignName}_${t}`,s={event:"martechAnalytics",_tmg:{pageInfo:{eventSource:["martechAnalytics"]},dimensionContainer:{targetCustom:i},eventContainer:{targetCustom:1}}};window.adobeDataLayer.push(s),Re(a),e(s,`${a.campaignName} --\x3e sendEventHit eVar75 = ${i}`)})).catch((()=>{e({activity:a.campaignName,analyticsData:{eventName:t,eVarOverride:r}},"sendEventHit :: Alloy not ready. Analytics data not sent.")}))},Re=t=>{if(window._satellite)try{const e=_satellite.getVar("ACDL Computed State");window.alloy("sendEvent",{xdm:e}),_satellite.getVar("Reset Adobe Client Data Layer"),window.adobeDataLayer[0]._tmg.eventContainer={}}catch(a){e(a.message,`${t.campaignName} --\x3e error when sending event`)}},Le={campaignId:"342575",campaignName:"TGT-256--google-one-tap-library"},Be=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&(e(`Callback ${t} called...`),"one-tap-will-load"===t&&(Ie("google-one-tap-displayed",Le),Ge("google-one-tap-displayed",Le)),"google-one-tap-loader"===t&&window.tmg&&void 0!==window.tmg.pubsub&&window.tmg.pubsub.publish({topic:"tmg.martech.oneTapLoader"}),"google-one-tap-reg"===t&&(window.dataLayer.event=["registrationComplete"],window.dataLayer.registration={registrationType:"onetap"},window.dataLayer.userStatus="registered",Ie("google-one-tap-reg",Le),Ge("google-one-tap-reg",Le),window.tmg&&void 0!==window.tmg.pubsub&&window.tmg.pubsub.publish({topic:"tmg.martech.oneTapRegisterComplete"})),"google-one-tap-login"===t&&(Ie("google-one-tap-login",Le),Ge("google-one-tap-login",Le),setTimeout((()=>window.location.reload()),1e3)),"google-one-tap-error"===t&&window.tmg&&void 0!==window.tmg.pubsub&&window.tmg.pubsub.publish({topic:"tmg.martech.oneTapRegisterError"}))};const je=(e,t)=>e?e.split(".").reduce(((e,t)=>e?e[t]:null),t):t,Fe=(e,t,a)=>{const r=typeof t;return a?"object"==typeof e&&"object"===r?JSON.stringify(e)===JSON.stringify(t):e===t:!(!Array.isArray(t)&&"string"!==r)&&t.includes(e)};class Ue{constructor(e){this.core=e}getVisitorData(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=je(e,this.core.visitor);if(Array.isArray(t)){const e=Array.isArray(r)?r:"string"==typeof r&&r.split(",");return!!e&&t.filter(Set.prototype.has,new Set(e)).length>0}return Fe(t,r,a)}getP13nData(e,t){if(!this.core.p13n)return!1;const a=je(e,this.core.p13n);return Fe(t,a,!1)}getPScriptData(e,t,a){if(!this.core.profileScripts[e])return!1;const r=je(t,this.core.profileScripts[e]);return Fe(a,r,!0)}customAudience(e){const t=this.core.visitor;switch(e){case"Page: Articles & Galleries":return!("article"!==t.page_type&&"gallery"!==t.page_type);case"Page: Article 2":return"articlerenderer2"===t.page_renderer;case"Page: Article 3":return"articlerenderer"===t.page_renderer;case"Page: Gallery":return"galleryRenderer"===t.page_renderer;case"Page: Gallery 2":return"galleryRenderer2"===t.page_renderer;case"Page: Sport Articles":return"sport"===t.business_segment;case"Page: Topic":return"topic"===t.content_type;case"Page: Bare":return"bare"===t.content_type;case"Page: Index":return"index"===t.content_type;case"Page: Portal":return"portal"===t.channel;case"Page: Acquisition pages":return t.page_url.includes("/customer/");case"Page: Subscribe Page":return!!["/customer/subscribe/","/customer/subscribe"].includes(t.page_url);case"Page: Travel Editorial":return!("travel"!==t.channel||!this.getVisitorData("keywords","travel")||t.page_url.includes("/hotel/"));case"Page: Register":return t.page_url.includes("/customer/secure/register");case"Page: Login":return t.page_url.includes("/customer/secure/login");case"Exclusion: Black Friday":return!(["black-friday","black friday"].includes(t.channel)&&["telegraph reviews","sponsored"].includes(t.keywords));case"Exclusion: Royal Family":return!(this.getVisitorData("keywords","royal family")||this.getVisitorData("channel","royal-family"));case"Exclusion: Travel Commercial":return!("travel"===t.channel&&this.getVisitorData("content_type",["travel-product-listing","travel-review"]));case"Exclusion: Portal, Secure, Corporate, Sponsored, Events, FS, Bot":return!(["secure","corporate"].includes(t.page_url_subdomain)||t.page_url.includes("/customer/subscribe")||["sponsored","commerce"].includes(t.business_segment)||this.getVisitorData("keywords",["sponsored","telegraph reviews","recommended"])||["financial-services","events","sponsored","recommended","commerce","portal","about-us","contact-us","error"].includes(t.channel)||!0===t.user_bot);case"Exclusion: Portal, Secure, Corporate, Sponsored, Events, FS":return!(["secure","corporate"].includes(t.page_url_subdomain)||t.page_url.includes("/customer/subscribe")||["sponsored","commerce"].includes(t.business_segment)||this.getVisitorData("keywords",["sponsored","telegraph reviews","recommended"])||["financial-services","events","sponsored","recommended","commerce","portal","about-us","contact-us","error"].includes(t.channel));case"Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot":return!(["secure","secure-staging-ams64","corporate"].includes(t.page_url_subdomain)||t.page_url.includes("/customer/subscribe")||["sponsored","commerce"].includes(t.business_segment)||this.getVisitorData("keywords",["sponsored","telegraph reviews","recommended"])||["financial-services","events","sponsored","recommended","commerce","about-us","contact-us","error"].includes(t.channel)||!0===t.user_bot);case"Exclusion: Secure, Corporate, Sponsored, Events, FS":return!(["secure","secure-staging-ams64","corporate"].includes(t.page_url_subdomain)||t.page_url.includes("/customer/subscribe")||["sponsored","commerce"].includes(t.business_segment)||this.getVisitorData("keywords",["sponsored","telegraph reviews","recommended"])||["financial-services","events","sponsored","recommended","commerce","about-us","contact-us","error"].includes(t.channel));case"Exclusion: Syndication":return!t.page_url_path.includes("/syndication/");case"Exclusion: Hard Overlay Page URLs":return!["/christmas","/fantasy-sports","/news/plusword/","/news/cross-atlantic-crossword/","/articles/the-best-hotels-for-spa-breaks-in-the-uk","/articles/best-romantic-hotels-in-the-uk/","/articles/best-family-friendly-hotels-uk/","/articles/best-seaside-beach-hotels-uk/","/articles/the-best-country-house-hotels-in-britain/","/articles/best-family-friendly-hotels-in-england/","/articles/the-best-cotswolds-spa-hotels/","/articles/best-uk-honeymoons-and-minimoons-hotels/","/articles/best-spa-hotels-in-the-lake-district/","/articles/the-best-spa-hotels-in-the-north-of-england/"].some((e=>t.page_url_path.includes(e)));case"Exclusion: Pages referred from Social urls":return!Object.getOwnPropertyNames(D.x).includes(t.source_referrer);case"Exclusion: Pages referred from Search urls":return!Object.getOwnPropertyNames(D.y).includes(t.source_referrer);case"Exclusion: Social Media Articles Targeting":return!["leaving-london-best-commuter-villages-buy-home-less-500k","working-home-three-days-week-best-value-rural-hotspots-still","costly-property-traps-every-first-time-buyer-needs-avoid"].some((e=>t.page_url.includes(e)));case"Exclusion: Commercial Articles (Soft Experiences)":return!["/gardening/how-to-grow/spring-has-sprung-gardening-can-salvation-times-crisis/","/gardening/how-to-grow/grow-radishes-mild-french-breakfast-crisp-mooli/","/gardening/how-to-grow/gardening-offers-and-deals-from-telegraph-garden/","/women/sex/the-20-best-online-dating-websites/","/theatre/what-to-see/london-theatre-best-shows-plays-now/","/theatre/what-to-see/15-essential-plays-musicals-book-tickets-autumn-2019/","/theatre/what-to-see/15-must-see-plays-musicals-book-tickets-spring/","/culture/theatre/theatre-reviews/9944210/The-Book-of-Mormon-at-Prince-of-Wales-theatre.html","/theatre/what-to-see/tina-musical-aldwych-review-joyful-lungs-bursting-show-simply/","/theatre/what-to-see/andrew-lloyd-webbers-school-of-rock-review-the-most-enjoyable-fe/","/theatre/what-to-see/motown-the-musical-review-a-lavish-slick-song-crammed-show/","/theatre/what-to-see/lehman-trilogy-review-piccadilly-theatre-bankably-brilliant/","/theatre/what-to-see/9-5-musical-review-bonnie-langford-employee-month-feelgood-flimsy/","/theatre/what-to-see/wicked-why-the-musical-defied-the-odds-and-is-still-a-phenomenon/","/culture/6375768/The-Lion-King-at-the-Lyceum-Theatre-review.html","/theatre/what-to-see/girl-north-country-noel-coward-theatre-review-magical-fusion/","/theatre/what-to-see/kinky-boots-adelphi-theatre-review/","/theatre/what-to-see/eve-review-noel-coward-theatre-lily-james-lacks-peculiarity/","/theatre/what-to-see/son-review-kiln-theatre-london-nw6-devastating-tale-youth-blighted/","/theatre/what-to-see/10-things-you-didnt-know-about-the-mousetrap/","/theatre/what-to-see/rosmersholm-review-duke-yorks-theatrehayley-atwell-tom-burke/","/theatre/what-to-see/disneys-aladdin-at-the-prince-edward-makes-you-pine-for-panto/","/culture/theatre/theatre-news/9076901/Phantom-of-the-Opera-makes-Broadway-history-with-10000th-show.html","/theatre/what-to-see/waitress-reviewadelphi-theatre-meaty-musical-packed-delicious/","/theatre/what-to-see/tom-hiddleston-hamlet-supremely-self-assured-prince-radas/","/theatre/what-to-see/come-away-phoenix-theatre-review-glossing-trauma-911/","/theatre/what-to-see/home-darling-review-duke-yorks-theatre-compellingly-bleak-echo/","/theatre/what-to-see/starry-messenger-review-wyndhams-theatrea-long-comic-drama-need/","/theatre/what-to-see/toast-review-palace-nigel-slaters-youth-becomes-paean-joys-cooking/","/theatre/what-to-see/american-clock-review-old-vic-london-se1-eerily-to-the-moment/","/cars/advice/sell-car-online/","/cars/advice/get-good-price-car/","/cars/advice/best-times-buy-sell-cars/","/cars/advice/know-time-sell-car/","/cars/advice/best-websites-sell-car/","/cars/advice/10-best-websites-quickly-easily-value-car-free/","/men/thinking-man/bald-ambition-had-hair-transplant-28/","/men/thinking-man/five-things-you-learn-when-you-have-a-hair-transplant-like-james/","/men/the-filter/hair-transplant-faq-ten-common-questions-hair-loss-procedures/","/health-fitness/body/what-makes-a-good-candidate-for-a-hair-transplant/","/health-fitness/body/10-thing-no-one-tells-become-hair-transplant-surgeon/","/health-fitness/body/how-to-cure-baldness-without-losing-your-money-as-well-as-your-h/","/men/style/eight-baldness-cures-could-soon-put-end-hair-loss-woes/","/health-fitness/body/finasteride-does-donald-trumps-favourite-hair-loss-treatment/","/men/the-filter/scientists-may-have-discovered-cure-hair-loss-can-royals-barber/","/health-fitness/body/will-ever-find-cure-baldness/","/men/the-filter/five-weird-and-wonderful-hair-loss-treatments/","/health-fitness/body/could-blood-injections-be-the-cure-for-male-pattern-baldness/","/health-fitness/body/hair-transplant-treatment-best/","/health-fitness/body/hair-plugs-should-get/","/health-fitness/body/six-questions-should-ask-hair-transplant-clinic-paying-services/","/health-fitness/body/hair-loss-treatments-ones-really-work/","/health-fitness/body/complete-guide-hair-transplants-alternatives/","/men/style/david-beckham-might-losing-hair-gaining-opportunity/"].some((e=>t.page_url.includes(e)));case"Domain: Staging Environment":return!("secure-staging-ams64"!==t.page_url_subdomain&&"staging-ams64"!==t.page_url_subdomain&&"staging-hzn"!==t.page_url_subdomain||"telegraph.co.uk"!==t.page_url_domain);case"Domain: Secure Staging":return!("secure-staging-ams64"!==t.page_url_subdomain||"telegraph.co.uk"!==t.page_url_domain);case"Domain: Secure Telegraph":return!("secure"!==t.page_url_subdomain||"telegraph.co.uk"!==t.page_url_domain);case"Domain: AEM QA Environments":return!(!t.page_url_subdomain.includes("qa")||"telegraph.co.uk"!==t.page_url_domain);case"Domain: www.telegraph.co.uk":return!!t.page_url_host.includes("www.telegraph.co.uk");case"Domain: ci subdomain":return!!t.page_url_subdomain.includes("ci");case"Paywalls: Secondary Paywall Ruleset":return"articleRenderer2"===t.page_renderer&&["property","travel"].includes(t.channel)||t.browser_name.startsWith("IE")||t.browser_name.endsWith("IE");default:return!1}}}const ze={web5674SmartbannerChromeApp:e=>{const t=new Ue(e);return{className:"SmartAppBannerChrome",folder:"WEB-5674--smartbanner-chrome-app",env:"all",targetting:{userIsSubscriber:t.getVisitorData("user_status.logged_in_subscriber",!0),isHandheld:t.getVisitorData("mobile_device_is_tablet",!0)||t.getVisitorData("mobile_device_is_mobile",!0),isBrowser:t.getVisitorData("browser_name","Chrome")}}},tgt985DigitalLightStickyFooter:e=>{const t=new Ue(e);return{className:"DigitalLightStickyFooter",folder:"TGT-985--digital-light-sticky-footer",env:"all",manual:!0,targetting:{contentType:t.customAudience("Page: Articles & Galleries"),travelExclusion:t.customAudience("Exclusion: Travel Commercial"),mainExclusion:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot"),digitalLightSubscriber:t.getVisitorData("user_status.type_digital_light",!0),loggedIn:t.getVisitorData("user_status.logged_in",!0)}}},tgt953NoscoreHighlyEngagedSlideover:e=>{const t=new Ue(e);return{className:"HardSlideover",campaignId:612935,folder:"TGT-953--highly-engaged-slideover",env:"all",manual:!0,targetting:{page:t.customAudience("Page: Articles & Galleries"),user:t.getVisitorData("user_status.anonymous",!0)||t.getVisitorData("user_status.registered",!0)||t.getVisitorData("user_status.type_wine_puzzle_only",!0),excludeTravelCommercial:t.customAudience("Exclusion: Travel Commercial"),excludeStandard:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS"),excludeSyndication:!t.getVisitorData("page_url_path","/syndication/",!1),excludeQueenCommemorative:!t.getVisitorData("page_url_path","/royal-family/0/hm-queen-elizabeth-ii-definitive-record-life-death/",!1),excludeUrlsHardOverlays:t.customAudience("Exclusion: Hard Overlay Page URLs"),excludeOldGalleries:!t.getVisitorData("page_renderer","galleryrenderer")},thirdParty:{winbackUser:[{property:"adobeTarget.attributes.flag_winback_period",as:"winbackUser"}]},xtTest:[{name:"standard",targetting:!0,thirdParty:{visitorType:[{property:"adobeTarget.aam.visitor10PlusPVsL30D",operator:"equal",value:!0,as:"visitor10PlusPVsL30D"},{property:"adobeTarget.aam.anon30OrMoreVisits",operator:"equal",value:!0,as:"anon30OrMoreVisits"},{property:"adobeTarget.aam.reg30OrMoreVisits",operator:"equal",value:!0,as:"reg30OrMoreVisits"}]}}]}},tgt953HighlyEngagedSlideover:e=>{const t=new Ue(e);return{className:"HardSlideover",campaignId:612935,folder:"TGT-953--highly-engaged-slideover",env:"all",manual:!0,targetting:{page:t.customAudience("Page: Articles & Galleries"),user:t.getVisitorData("user_status.anonymous",!0)||t.getVisitorData("user_status.registered",!0)||t.getVisitorData("user_status.type_wine_puzzle_only",!0),excludeTravelCommercial:t.customAudience("Exclusion: Travel Commercial"),excludeStandard:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS"),excludeGoogleShowcase:t.getVisitorData("is_google_showcase",!1),excludeSyndication:!t.getVisitorData("page_url_path","/syndication/",!1),excludeQueenCommemorative:!t.getVisitorData("page_url_path","/royal-family/0/hm-queen-elizabeth-ii-definitive-record-life-death/",!1),excludeUrlsHardOverlays:t.customAudience("Exclusion: Hard Overlay Page URLs"),excludeOldGalleries:!t.getVisitorData("page_renderer","galleryrenderer")},thirdParty:{winbackUser:[{property:"adobeTarget.attributes.flag_winback_period",as:"winbackUser"}]},xtTest:[{name:"standard",targetting:!0}]}},tgt879BonusSubOverlay:e=>{const t=new Ue(e);return{className:"BonusSubsOverlay",folder:"TGT-879--bonus-sub-overlay",env:"all",targetting:{loggedInDigitalSub:t.getVisitorData("user_status.logged_in_subscriber",!0)&&(t.getVisitorData("user_status.type_digital",!0)||t.getVisitorData("user_status.type_digital_us",!0)),excludeSecureCorporateSponsoredEventsFsBot:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot"),excludeSyndication:t.customAudience("Exclusion: Syndication"),profileScripts:t.getPScriptData("displayInterval","statuses.TGT-879--bonus-sub-overlay",!0)},thirdParty:{flagGracePeriod:[{property:"adobeTarget.attributes.flag_in_grace_period",operator:"equal",value:"0",as:"flag_in_grace_period"}],flagPendingCancellation:[{property:"adobeTarget.attributes.flag_pending_cancellation",operator:"equal",value:"0",as:"flag_pending_cancellation"}],daysSinceSubstart:[{property:"adobeTarget.attributes.days_since_latest_substart",operator:"greater equal",value:90,as:"days_since_latest_substart"}],promoCode:[{property:"adobeTarget.attributes.promo_code",operator:"not equal",value:"",as:"promo_code"}],promoCodeStatus:[{property:"adobeTarget.attributes.promo_code_status",operator:"equal",value:"Un-used",as:"promo_code_status"}],pageViews30Days:[{property:"adobeTarget.profileScripts.pageViewsIn30Days",operator:"contains",value:"status=true",as:"pageViewsIn30Days"}],bonusSubOverlayAppDisplay:[{property:"adobeTarget.profileScripts.bonusSubOverlayAppDisplay",operator:"contains",value:"status=true",as:"bonusSubOverlayAppDisplay"}],subsOverlayDisplayedInSession:[{property:"adobeTarget.profileScripts.subsOverlayDisplayedInSession",operator:"equal",value:"false",as:"subsOverlayDisplayedInSession"}]}}},tgt685SubscribeButtonOfferChange:e=>{const t=new Ue(e);return{className:"ReplaceSubscribeDescription",folder:"TGT-685--subscribe-button-offer-change",env:"none",targetting:{page:!t.getVisitorData("page_url_subdomain","secure",!1),user:t.getVisitorData("user_status.anonymous",!0)||t.getVisitorData("user_status.registered",!0)||t.getVisitorData("user_status.logged_out_subscriber",!0)}}},tgt663NavigationTooltip:e=>{const t=new Ue(e);return{className:"NavigationTooltips",folder:"TGT-663--navigation-tooltips",env:"all",targetting:{page:t.customAudience("Page: Articles & Galleries")||t.getVisitorData("page_type","topic")||t.getVisitorData("page_type","index")||t.getVisitorData("page_type","homepage"),userIsLoggedInSubscriber:t.getVisitorData("user_status.logged_in_subscriber",!0),excludeStandard:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot")},thirdParty:{newSubscriber:[{property:"adobeTarget.profileScripts.newSubscriberNextPageview",as:"newSubscriberNextPageview"}]},xtTest:[{name:"article-counter-tooltip",targetting:{userIsDigitalLight:t.customAudience("user_status.type_digital_light",!0)},thirdParty:{articleCounter:[{property:"adobeTarget.profileScripts.articleCounterTooltipDisplay",operator:"contains",value:"displayed=false",as:"articleCounterTooltipDisplay"}]}},{name:"notification-centre-tooltip",targetting:{},thirdParty:{notificationCentre:[{property:"adobeTarget.profileScripts.notificationCentreTooltip",operator:"contains",value:"status=true",as:"notificationCentreTooltip"}]}},{name:"profile-centre-tooltip",targetting:{},thirdParty:{profileCentre:[{property:"adobeTarget.profileScripts.profileCentreTooltip",operator:"contains",value:"status=true",as:"profileCentreTooltip"}]}}]}},tgt640SavedArticleToolip:e=>{const t=new Ue(e);return{className:"SavedArticleTooltip",campaignId:338392,folder:"TGT-640--saved-article-tooltip",env:"all",targetting:{page:t.customAudience("Page: Articles & Galleries"),userIsLoggedInSubscriber:t.getVisitorData("user_status.logged_in_subscriber",!0),excludeStandard:t.customAudience("Exclusion: Portal, Secure, Corporate, Sponsored, Events, FS, Bot")},thirdParty:{saveArticleTooltipDisplay:[{property:"adobeTarget.profileScripts.saveArticleTooltipDisplay",operator:"contains",value:"displayed=false",as:"saveArticleTooltipDisplay"}]}}},tgt605BonusSubInlineUnit:e=>{const t=new Ue(e);return{className:"BonusSubsInlineUnit",folder:"TGT-605--bonus-sub-inline-unit",env:"all",targetting:{loggedInDigitalSub:t.getVisitorData("user_status.logged_in_subscriber",!0)&&(t.getVisitorData("user_status.type_digital",!0)||t.getVisitorData("user_status.type_digital_us",!0)),page:t.getVisitorData("page_type","article"),excludePortalSecureCorporateSponsoredEventsFsBot:t.customAudience("Exclusion: Portal, Secure, Corporate, Sponsored, Events, FS, Bot"),excludeCypressTests:!t.getVisitorData("page_url","martech_qa_cypress_test=true",!1)},thirdParty:{bonusSubsInlineUnitMaxDisplay:[{property:"adobeTarget.profileScripts.bonusSubsInlineUnit",operator:"contains",value:"maxDisplayLimitReached=false",as:"bonusSubsInlineUnitMaxDisplay"}],pageViews30Days:[{property:"adobeTarget.profileScripts.pageViewsIn30Days",operator:"contains",value:"status=true",as:"pageViewsIn30Days"}],bonusSubsInlineUnitPersistOrDisplay:[{property:"adobeTarget.profileScripts.bonusSubsInlineUnit",operator:"contains",value:"persist=true",as:"bonusSubsInlineUnitPersist"},{property:"adobeTarget.profileScripts.bonusSubsInlineUnit",operator:"contains",value:"displayed=false",as:"bonusSubsInlineUnitDisplay"}],promoCode:[{property:"adobeTarget.attributes.promo_code",operator:"not equal",value:"",as:"promo_code"}],promoCodeStatus:[{property:"adobeTarget.attributes.promo_code_status",operator:"equal",value:"Un-used",as:"promo_code_status"}],unusedBonusSubscription:[{property:"adobeTarget.attributes.unused_bonus_subscription",operator:"not equal",value:"0",as:"unused_bonus_subscription"}]}}},tgt453CreditCardExpiry:e=>{const t=new Ue(e);return{className:"CreditCardExpiry",folder:"TGT-453--credit-card-expiry",campaignId:421494,env:"all",targetting:{page:t.customAudience("Page: Articles & Galleries")||t.customAudience("Page: Topic")||t.customAudience("Page: Index"),userIsLoggedInSubscriber:t.getVisitorData("user_status.logged_in_subscriber",!0),excludeStandard:t.customAudience("Exclusion: Portal, Secure, Corporate, Sponsored, Events, FS, Bot"),excludeJubileeArticle:!t.getVisitorData("page_url_path","queen-elizabeth-ii-70-year-reign-best-moments-platinum-jubilee",!1),excludeTravelCommercial:t.customAudience("Exclusion: Travel Commercial")},thirdParty:{pendingCancellation:[{property:"adobeTarget.attributes.flag_pending_cancellation",operator:"not equal",value:"1",as:"pendingCancellation"}],paymentDetailsUpdated:[{property:"adobeTarget.profileScripts.paymentDetailsUpdated",operator:"not contains",value:"updated=true",as:"paymentDetailsUpdated"}]},xtTest:[{name:"31 - 7 days",targetting:!0,thirdParty:{lessOrEqualTo31Days:[{property:"adobeTarget.attributes.days_until_card_expiry",operator:"less equal",value:31,as:"lessOrEqualTo31Days"}],greaterOrEqualTo8Days:[{property:"adobeTarget.attributes.days_until_card_expiry",operator:"greater equal",value:8,as:"greaterOrEqualTo8Days"}]}},{name:"7 - 0 days",targetting:!0,thirdParty:{lessOrEqualTo7Days:[{property:"adobeTarget.attributes.days_until_card_expiry",operator:"less equal",value:7,as:"lessOrEqualTo7Days"}],greaterOrEqualTo0Days:[{property:"adobeTarget.attributes.days_until_card_expiry",operator:"greater equal",value:0,as:"greaterOrEqualTo0Days"}],creditCardExpiryDisplayed:[{property:"adobeTarget.profileScripts.creditCardExpiryDisplayed",operator:"contains",value:"displayed=false",as:"creditCardExpiryDisplayed"}]}}]}},tgt44HideCancellationButton:e=>{const t=new Ue(e);return{className:"HideCancButton",campaignId:338392,folder:"TGT-44--hide-cancellation-button",env:"all",spaView:"customer/secure/subscriptiondetails",spaStyling:!1,targetting:{page:t.getVisitorData("page_url_path","/customer/secure/",!1),subscriber:t.getVisitorData("user_status.logged_in_subscriber",!0)&&t.getVisitorData("user_status.type_digital_light",!1)&&t.getVisitorData("user_status.type_print_subscriber",!1)},xtTest:[{name:"international",targetting:{geoLocation:!t.getVisitorData("geo_location","united kingdom")}},{name:"less-than-48-hours",targetting:!0,thirdParty:{lessThanFourtyEightHours:[{property:"adobeTarget.profileScripts.subscriptionWithin48Hours",as:"subscriptionWithin48Hours",operator:"contains",value:"within48Hours=true"}]}},{name:"less-than-92-days-tenure",targetting:!0,thirdParty:{lessThanThreeMonths:[{property:"adobeTarget.attributes.days_since_latest_sub_chain",operator:"less equal",value:92,as:"days_since_latest_sub_chain"}]}},{name:"less-than-247-days-tenure",targetting:!0,thirdParty:{lessThanEightMonths:[{property:"adobeTarget.attributes.days_since_latest_sub_chain",operator:"less equal",value:247,as:"days_since_latest_sub_chain"}]}},{name:"TSS",targetting:!0}]}},tgt403PidStatusApi:e=>{const t=new Ue(e);return{className:"PidStatusApi",folder:"TGT-403--pid-status-api",env:"all",targetting:{excludeStandard:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot"),anySubscriber:t.getVisitorData("user_status.subscriber",!0)}}},tgt403PendingCancellationOverlay:e=>{const t=new Ue(e);return{className:"PendingCancModal",folder:"TGT-403--pending-cancellation-overlay",env:"all",targetting:{subscriberExcludingDigitalLight:t.getVisitorData("user_status.subscriber",!0)&&t.getVisitorData("user_status.type_digital_light",!1),excludeSecureCorporateSponsoredEventsFsBot:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot"),excludeTravelCommercial:t.customAudience("Exclusion: Travel Commercial"),excludeSyndication:t.customAudience("Exclusion: Syndication")},thirdParty:{displayModal:[{property:"adobeTarget.profileScripts.pendingCancellationModal",operator:"contains",value:"status=true",as:"pendingCancellationModal"}]}}},tgt403PaymentFailure:e=>{const t=new Ue(e),a=y("profile.user.settings.graceDetails.gracePeriod"),r=y("profile.user.settings.graceDetails.noOfferCase");return{className:"PaymentFailure",folder:"TGT-403--payment-failure",env:"all",manual:!0,targetting:{excludeStandard:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot"),excludeSyndication:t.customAudience("Exclusion: Syndication"),excludeJubileeArticle:!t.getVisitorData("page_url_path","queen-elizabeth-ii-70-year-reign-best-moments-platinum-jubilee",!1),excludeTravelCommercial:t.customAudience("Exclusion: Travel Commercial")},thirdParty:{applePaymentUpdateNotSeen:[{property:"adobeTarget.profileScripts.applePaymentUpdateOverlayDisplayed",operator:"contains",value:"status=false",as:"applePaymentUpdateNotSeen"}]},xtTest:[{name:"sticky-banner",targetting:{anySubscriber:t.getVisitorData("user_status.subscriber",!0),gracePeriodOne:"stage-one-period"===a,page:t.customAudience("Page: Articles & Galleries")||t.customAudience("Page: Index")||t.customAudience("Page: Topic")}},{name:"offer-overlay-one",targetting:{notUSA:!t.getVisitorData("geo_location","united states")&&!r,notWinePuzzle:!t.getVisitorData("user_status.type_puzzle",!0)&&!t.getVisitorData("user_status.type_wine",!0),digitalRange:t.getVisitorData("user_status.type_digital",!0)||t.getVisitorData("user_status.type_digital_plus",!0)||t.getVisitorData("user_status.type_digital_light",!0),gracePeriodTwo:"stage-two-period"===a},thirdParty:{paymentFailureModal:[{property:"adobeTarget.profileScripts.paymentFailureModal",operator:"contains",value:"status=true",as:"paymentFailureModal"}]}},{name:"update-overlay-two",targetting:{puzzleWineOrUSA:t.getVisitorData("user_status.type_puzzle",!0)||t.getVisitorData("user_status.type_wine",!0)||t.getVisitorData("geo_location","united states")||r,gracePeriodTwo:"stage-two-period"===a},thirdParty:{paymentFailureModal:[{property:"adobeTarget.profileScripts.paymentFailureModal",operator:"contains",value:"status=true",as:"paymentFailureModal"}]}},{name:"offer-overlay-three",targetting:{notUSA:!t.getVisitorData("geo_location","united states")&&!r,notWinePuzzle:!t.getVisitorData("user_status.type_puzzle",!0)&&!t.getVisitorData("user_status.type_wine",!0),digitalRange:t.getVisitorData("user_status.type_digital",!0)||t.getVisitorData("user_status.type_digital_plus",!0)||t.getVisitorData("user_status.type_digital_light",!0),gracePeriodThree:"stage-three-period"===a},thirdParty:{paymentFailureModal:[{property:"adobeTarget.profileScripts.paymentFailureModal",operator:"contains",value:"status=true",as:"paymentFailureModal"}]}},{name:"update-overlay-four",targetting:{puzzleWineOrUSA:t.getVisitorData("user_status.type_puzzle",!0)||t.getVisitorData("user_status.type_wine",!0)||t.getVisitorData("geo_location","united states")||r,gracePeriodThree:"stage-three-period"===a},thirdParty:{paymentFailureModal:[{property:"adobeTarget.profileScripts.paymentFailureModal",operator:"contains",value:"status=true",as:"paymentFailureModal"}]}}]}},tgt395MartechOverlay:e=>{const t=new Ue(e);return{className:"MartechOverlay",folder:"TGT-395--martech-overlay",env:"all",manual:!0,targetting:{standardExclusion:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS"),travelExclusion:t.customAudience("Exclusion: Travel Commercial"),user:t.getVisitorData("user_status.subscriber",!1)||t.getVisitorData("user_status.type_wine_puzzle_only",!0)},xtTest:[{name:"flash-sale-overlay",targetting:{excludePuzzlesNews:!t.getVisitorData("page_url_path","puzzles-news",!1),excludeCommercialArticles:t.customAudience("Exclusion: Commercial Articles (Soft Experiences)"),excludeSyndication:!t.getVisitorData("page_url_path","/syndication/",!1),excludePlusWord:!t.getVisitorData("page_url_path","/news/plusword/",!1),excludeCrossAtlantic:!t.getVisitorData("page_url_path","/news/cross-atlantic-crossword/",!1),excludeCustomerPages:!t.customAudience("Page: Acquisition pages"),excludeSocialMedialArticles:t.customAudience("Exclusion: Social Media Articles Targeting"),notUSA:!t.getVisitorData("geo_location","united states")},thirdParty:{flashSaleVariation:[{property:"adobeTarget.profileScripts.flashSaleOverlayAB",operator:"not equal",value:"control",as:"flashSaleAB"}],displayOnViews:[{property:"adobeTarget.profileScripts.bauSoftOverlay",operator:"contains",value:"status=true",as:"bauSoftOverlay"}],notWinbackUser:[{property:"adobeTarget.attributes.flag_winback_period",operator:"equal",value:"",as:"winbackUser"}]}},{name:"aem-hard-overlay",targetting:{page:t.customAudience("Page: Articles & Galleries"),hardOverlayPageURLs:t.customAudience("Exclusion: Hard Overlay Page URLs"),travel:t.getVisitorData("channel","travel"),tgt1877enabled:!1},thirdParty:{publishedThreshold:[{property:"adobeTarget.profileScripts.publishedDateCheck",operator:"contains",value:"status:true",as:"publishedDateCheck"}]}},{name:"general-soft-overlay",targetting:{excludePuzzlesNews:!t.getVisitorData("page_url_path","puzzles-news",!1),excludeCommercialArticles:t.customAudience("Exclusion: Commercial Articles (Soft Experiences)"),excludeSyndication:!t.getVisitorData("page_url_path","/syndication/",!1),excludePlusWord:!t.getVisitorData("page_url_path","/news/plusword/",!1),excludeCrossAtlantic:!t.getVisitorData("page_url_path","/news/cross-atlantic-crossword/",!1),ukIntRuleSet:t.getVisitorData("geo_location","united kingdom")&&t.getVisitorData("premium_state",!0)||!t.getVisitorData("geo_location","united kingdom")&&(t.customAudience("Page: Articles & Galleries")||t.customAudience("Page: Topic")||t.customAudience("Page: Index")),excludeCustomerPages:!t.customAudience("Page: Acquisition pages"),excludeSocialMedialArticles:t.customAudience("Exclusion: Social Media Articles Targeting")},thirdParty:{winbackUser:[{property:"adobeTarget.attributes.flag_winback_period",as:"winbackUser"}],displayOnViews:[{property:"adobeTarget.profileScripts.bauSoftOverlay",operator:"contains",value:"status=true",as:"bauSoftOverlay"}]}}]}},tgt390NoscoreMartechPaywall:e=>{const t=new Ue(e);return{className:"MartechPaywall",folder:"TGT-390--martech-paywall",env:"all",manual:!0,targetting:{contentType:t.customAudience("Page: Articles & Galleries"),travelExclusion:t.customAudience("Exclusion: Travel Commercial"),mainExclusion:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS"),status:t.getVisitorData("user_status.logged_out_subscriber",!1)||t.getVisitorData("user_status.type_wine_puzzle_only",!0)},thirdParty:{data:[{property:"adobeTarget.aam.student",as:"student"},{property:"adobeTarget.attributes.flag_winback_period",as:"winbackUser"},{property:"adobeTarget.aam.visitor10PlusPVsL30D",as:"visitor10PlusPVsL30D"},{property:"adobeTarget.aam.anon30OrMoreVisits",as:"anon30OrMoreVisits"},{property:"adobeTarget.aam.reg30OrMoreVisits",as:"reg30OrMoreVisits"}]},xtTest:[{name:"primary-paywall",targetting:{status:t.getVisitorData("user_status.logged_out_registered",!1)&&t.getVisitorData("user_status.logged_out_type_wine_puzzle_only",!1)}},{name:"login-paywall",targetting:{status:t.getVisitorData("user_status.logged_out_registered",!0)||t.getVisitorData("user_status.logged_out_type_wine_puzzle_only",!0)}}]}},tgt390MartechPaywall:e=>{const t=new Ue(e);return{className:"MartechPaywall",folder:"TGT-390--martech-paywall",env:"all",manual:!0,targetting:{contentType:t.customAudience("Page: Articles & Galleries"),travelExclusion:t.customAudience("Exclusion: Travel Commercial"),mainExclusion:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS"),status:t.getVisitorData("user_status.logged_out_subscriber",!1)||t.getVisitorData("user_status.type_wine_puzzle_only",!0)},thirdParty:{student:[{property:"adobeTarget.aam.student",as:"student"}],winbackUser:[{property:"adobeTarget.attributes.flag_winback_period",as:"winbackUser"}]},xtTest:[{name:"primary-paywall",targetting:{status:t.getVisitorData("user_status.logged_out_registered",!1)&&t.getVisitorData("user_status.logged_out_type_wine_puzzle_only",!1)}},{name:"login-paywall",targetting:{status:t.getVisitorData("user_status.logged_out_registered",!0)||t.getVisitorData("user_status.logged_out_type_wine_puzzle_only",!0)}}]}},tgt390MartechLoginPaywall:e=>{const t=new Ue(e);return{className:"MartechPaywall",folder:"TGT-390--martech-paywall",env:"all",manual:!1,targetting:{contentType:t.customAudience("Page: Articles & Galleries"),travelExclusion:t.customAudience("Exclusion: Travel Commercial"),mainExclusion:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot"),status:t.getVisitorData("user_status.logged_out_subscriber",!0)&&t.getVisitorData("user_status.type_wine_puzzle_only",!1)},xtTest:[{name:"login-paywall",targetting:!0}]}},tgt390MartechBarePaywall:e=>{const t=new Ue(e);return{className:"MartechPaywall",folder:"TGT-390--martech-paywall",env:"all",manual:!0,targetting:{contentType:t.getVisitorData("content_type","bare"),mainExclusion:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS")},xtTest:[{name:"primary-paywall",targetting:!0}]}},tgt385RegistrantCompleteYourAccount:e=>{const t=new Ue(e);return{className:"CompleteYourAccount",folder:"TGT-385--registrant-complete-your-account",manual:!0,env:"all",targetting:{excludeTravelCommercial:t.customAudience("Exclusion: Travel Commercial"),page:t.customAudience("Page: Articles & Galleries")||t.customAudience("Page: Topic")||t.customAudience("Page: Index")||t.customAudience("Page: Portal"),registeredLoggedin:t.getVisitorData("user_status.logged_in_registered",!0),excludeQAParam:!t.getVisitorData("page_url","martech_qa_complete-your-account=true",!1)},thirdParty:{resetNewsletters:[{property:"adobeTarget.profileScripts.resetNewsletterMeData",as:"resetNewsletterMeData"}],newRegistrant:[{property:"adobeTarget.profileScripts.newRegistrantNextSession",operator:"contains",value:"status=true",as:"newRegistrantNextSession"},{property:"adobeTarget.profileScripts.newRegistrantNextSession",operator:"contains",value:"registered=false",as:"newRegistrantNextSession"}],displayCompleteYourAccount:[{property:"adobeTarget.profileScripts.completeYourAccount",operator:"contains",value:"status=true",as:"completeYourAccount"}]}}},tgt372ParticleEmbeddedNewsletter:e=>{const t=new Ue(e);return{className:"ParticleNewsletter",folder:"TGT-372--particle-embedded-newsletter",env:"all",targetting:{includeArticles:t.getVisitorData("page_type","article"),excludePortalSecureCorporateSponsoredEventsFsBot:t.customAudience("Exclusion: Portal, Secure, Corporate, Sponsored, Events, FS, Bot")},thirdParty:{resetNewsletters:[{property:"adobeTarget.profileScripts.resetNewsletterMeData",as:"resetNewsletterMeData"}]}}},tgt363InlifeNotifications:e=>{const t=new Ue(e);return{className:"InlifeNotifications",folder:"TGT-363--inlife-notifications",env:"all",targetting:{userIsSubscriber:t.getVisitorData("user_status.logged_in_subscriber",!0),oneOfPageRule:t.customAudience("Page: Index")||t.customAudience("Page: Portal")||t.customAudience("Page: Topic")||t.getVisitorData("page_type","article")||t.getVisitorData("page_type","gallery"),mainExclusion:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot")},thirdParty:{resetNewsletters:[{property:"adobeTarget.profileScripts.resetNewsletterMeData",as:"resetNewsletterMeData"}],notificationData:[{property:"adobeTarget.attributes.days_until_card_expiry",as:"daysUntilCardExpiry"},{property:"adobeTarget.attributes.flag_in_grace_period",as:"inGracePeriod"},{property:"adobeTarget.attributes.flag_pending_cancellation",as:"inPendingCancellation"},{property:"adobeTarget.attributes.promo_code",as:"bonusSubPromoCode"},{property:"adobeTarget.attributes.unused_bonus_subscription",as:"unusedBonusSubscription"},{property:"adobeTarget.attributes.promo_code_status",as:"bonusSubPromoCodeStatus"},{property:"adobeTarget.attributes.app_ever_used",as:"appEverUsed"},{property:"adobeTarget.attributes.newsletter_lists_count",as:"newslettersListCount"},{property:"adobeTarget.profileScripts.bonusSubsNotification",as:"bonusSubsNotification"},{property:"adobeTarget.profileScripts.appDownloadNotification",as:"appDownloadNotification"},{property:"adobeTarget.profileScripts.paymentDetailsUpdated",as:"paymentDetailsUpdated"},{property:"adobeTarget.profileScripts.shakeReminderBell",as:"shakeReminderBell"},{property:"adobeTarget.profileScripts.newslettersSignupNotification",as:"newslettersSignupNotification"}]},xtTest:[{name:"android-mobile-device",targetting:{isPlatform:t.getVisitorData("os_platform","Android"),isMobile:t.getVisitorData("mobile_device_is_mobile",!0)}},{name:"apple-mobile-device",targetting:{isPlatform:t.getVisitorData("os_platform","iOS"),isMobile:t.getVisitorData("mobile_device_is_mobile",!0)}},{name:"other-mobile-device",targetting:{isPlatform:!(t.getVisitorData("os_platform","Android")&&t.getVisitorData("os_platform","iOS"))&&t.getVisitorData("mobile_device_is_mobile",!0),isMobile:t.getVisitorData("mobile_device_is_mobile",!0)}},{name:"non-mobile-device",targetting:{isNotMobile:!t.getVisitorData("mobile_device_is_mobile",!0)}}]}},tgt348UnlockThisArticle:e=>{const t=new Ue(e);return{className:"UnlockThisArticle",folder:"TGT-348--unlock-this-article",env:"none",targetting:{excludeChromeIe:!(t.getVisitorData("browser_name","Chrome")||t.getVisitorData("browser_name","IE")),excludeQuery:!t.getVisitorData("page_url_query","unlock-article=false",!1),excludePremium:!t.getVisitorData("premium_state",!0),excludeTravelCommercial:t.customAudience("Exclusion: Travel Commercial"),excludePortalSecureCorporateSponsoredEventsFsBot:t.customAudience("Exclusion: Portal, Secure, Corporate, Sponsored, Events, FS, Bot"),includeAnonymous:t.getVisitorData("user_status.anonymous",!0),excludeGoogleShowcase:!t.getVisitorData("is_google_showcase",!0)},thirdParty:{modalNotDismissed:[{property:"adobeTarget.profileScripts.unlockThisArticle",as:"unlockThisArticle",operator:"contains",value:"status=true"}]}}},tgt309NewsletterUnits:e=>{const t=new Ue(e);return{className:"NewsletterUnit",env:"all",manual:!0,folder:"TGT-309--newsletter-units",targetting:{page:t.customAudience("Page: Articles & Galleries")||t.getVisitorData("page_url_path",["football/euro-2020-wallchart-predictor","football/world-cup-predictor-2022","football/world-cup-2022-wallchart-predictor-qatar","world-cup/2022-predictor-wallchart-football-qatar"],!1),excludeCustom:!(t.getVisitorData("page_url_path","revealed-a-level-grades-versus-fees-find-leading-private-schools",!1)||t.getVisitorData("page_url_path","introducing-new-telegraph-app",!1)),excludeTravelCommercial:t.customAudience("Exclusion: Travel Commercial"),excludePortalSecureCorporateSponsoredEventsFsBot:t.customAudience("Exclusion: Portal, Secure, Corporate, Sponsored, Events, FS, Bot"),excludeBlackFriday:t.customAudience("Exclusion: Black Friday")},thirdParty:{resetNewsletters:[{property:"adobeTarget.profileScripts.resetNewsletterMeData",as:"resetNewsletterMeData"}]}}},tgt256GoogleOneTapLibrary:e=>{const t=new Ue(e);return{className:"GoogleOneTapLibrary",folder:"TGT-256--google-one-tap-library",env:"all",targetting:{excludeTravelCommercial:t.customAudience("Exclusion: Travel Commercial"),excludeCustomerPages:!t.getVisitorData("page_url_path","/customer/",!1),excludeGoogleShowcase:t.getVisitorData("is_google_showcase",!1),userIsAnon:t.getVisitorData("user_status.anonymous",!0),query:!t.getVisitorData("page_url_query","google-one-tap=false",!1)}}},tgt2074RubikNoScoreAb:()=>({className:"RubikNoScoreAB",folder:"TGT-2074--rubik-no-score-ab",env:"all",manual:!0,targetting:{}}),tgt2074RubikNoScoreAbTest:e=>({className:"RubikNoScoreABTest",folder:"TGT-2074--rubik-no-score-ab-test",env:"all",manual:!0,targetting:!0,xtTest:[{name:"showBAU",targetting:{isNotAndroid:"Android"!==e.visitor.os_platform},thirdParty:{displayOverlayRule:[{property:"adobeTarget.profileScripts.hasSeenHomepage",operator:"contains",value:"false",as:"hasSeenHomepage"}]}},{name:"showStickyFooter",targetting:!0}]}),tgt2061FlashSaleOverlay:e=>{const t=new Ue(e);return{className:"MartechOverlay",folder:"TGT-395--martech-overlay",env:"all",manual:!0,targetting:{standardExclusion:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS"),travelExclusion:t.customAudience("Exclusion: Travel Commercial"),user:t.getVisitorData("user_status.subscriber",!1)||t.getVisitorData("user_status.type_wine_puzzle_only",!0),excludePuzzlesNews:!t.getVisitorData("page_url_path","puzzles-news",!1),excludeCommercialArticles:t.customAudience("Exclusion: Commercial Articles (Soft Experiences)"),excludeSyndication:!t.getVisitorData("page_url_path","/syndication/",!1),excludePlusWord:!t.getVisitorData("page_url_path","/news/plusword/",!1),excludeCrossAtlantic:!t.getVisitorData("page_url_path","/news/cross-atlantic-crossword/",!1),excludeCustomerPages:!t.customAudience("Page: Acquisition pages"),excludeSocialMedialArticles:t.customAudience("Exclusion: Social Media Articles Targeting"),notUSA:!t.getVisitorData("geo_location","united states")},thirdParty:{flashSaleVariation:[{property:"adobeTarget.profileScripts.flashSaleOverlayAB",operator:"not equal",value:"control",as:"flashSaleAB"}],displayOnViews:[{property:"adobeTarget.profileScripts.bauSoftOverlay",operator:"contains",value:"status=true",as:"bauSoftOverlay"}],notWinbackUser:[{property:"adobeTarget.attributes.flag_winback_period",operator:"equal",value:"",as:"winbackUser"}]},xtTest:[{name:"flash-sale-overlay",targetting:!0}]}},tgt1977RubikPropensityThresholdsAb:()=>({className:"RubikPropensityThresholds",folder:"TGT-1977--rubik-propensity-thresholds-ab",env:"all",manual:!0,targetting:{}}),tgt1894OcjOfferTest:e=>{const t=new Ue(e);return{className:"OCJOfferTest",folder:"TGT-1894--ocj-offer-test",env:"all",spaView:"customer/secure/subscriptiondetails",targetting:{page:t.getVisitorData("page_url_path","/customer/secure/",!1),geoLocation:!t.getVisitorData("geo_location","united states"),subscriber:t.getVisitorData("user_status.logged_in",!0)&&t.getVisitorData("user_status.type_digital",!0)&&t.getVisitorData("user_status.type_puzzle",!1)&&t.getVisitorData("user_status.type_wine",!1)},abTest:{script:"splitGroupAB",node:"TGT-2041--ocj-offer-test",split:[{name:"control",value:"control"},{name:"variation",value:"variation"}]}}},tgt1780UsInlineUnit:e=>{const t=new Ue(e);return{className:"UsInlineUnit",folder:"TGT-1780--us-inline-unit",env:"all",manual:!0,targetting:{excludeTravelCommercial:t.customAudience("Exclusion: Travel Commercial"),standardExclusions:t.customAudience("Exclusion: Portal, Secure, Corporate, Sponsored, Events, FS, Bot"),isUSA:t.getVisitorData("geo_location","united states")}}},tgt1766PaymentUpdate:e=>{const t=new Ue(e);return{className:"ApplePaymentUpdate",folder:"TGT-1766--apple-payment-update",env:"all",manual:!1,targetting:{standardExclusion:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot")&&t.customAudience("Exclusion: Syndication"),travelExclusion:t.customAudience("Exclusion: Travel Commercial"),userType:t.getVisitorData("user_status.logged_in_subscriber",!0,!0)}}},tgt1692ExtendedAccess:e=>{const t=new Ue(e);return{className:"ExtendedAccess",folder:"TGT-1692--extended-access",env:"all",targetting:{contentType:t.customAudience("Page: Articles & Galleries"),notAEMGoogleShowcase:t.getVisitorData("is_aem_google_showcase",!1),isGoogleShowcase:t.getVisitorData("is_google_showcase",!0)}}},tgt1687CrossAtlanticOverlay:e=>{const t=new Ue(e);return{className:"CrossAtlanticOverlay",folder:"TGT-1687--cross-atlantic-overlay",env:"all",targetting:{pluswordPage:t.getVisitorData("page_url_path","/news/cross-atlantic-crossword/",!1),profileScripts:t.getPScriptData("displayInterval","statuses.TGT-1687--cross-atlantic-overlay",!0)}}},tgt1466EditionsAppOverlay:e=>{const t=new Ue(e);return{className:"EditionAppOverlay",folder:"TGT-1466--edition-app-overlay",env:"all",targetting:{excludeTravelCommercial:t.customAudience("Exclusion: Travel Commercial"),excludeStandard:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot"),userIsLoggedInSub:t.getVisitorData("user_status.logged_in_subscriber",!0),userCanUseApp:t.getVisitorData("user_status.type_digital",!0)||t.getVisitorData("user_status.type_digital_plus",!0)||t.getVisitorData("user_status.type_print_subscriber",!0),geoLocation:t.getVisitorData("geo_location","united kingdom"),profileScripts:t.getPScriptData("displayInterval","statuses.TGT-1466--edition-app-overlay",!0)},thirdParty:{appUnused:[{property:"adobeTarget.attributes.app_ever_used",operator:"equal",value:"0",as:"app_ever_used"}],noPendingCanc:[{property:"adobeTarget.attributes.flag_pending_cancellation",operator:"equal",value:"0",as:"flag_pending_cancellation"}],OverlayAppDisplay:[{property:"adobeTarget.profileScripts.editionAppOverlayDisplay",operator:"contains",value:"status=true",as:"editionAppOverlayDisplay"}]}}},tgt1399RubikFailScore:e=>{const t=new Ue(e);return{className:"RubikFailScore",folder:"TGT-1399--rubik-fail-score",env:"all",targetting:{status:t.getVisitorData("user_status.subscriber",!1)||t.getVisitorData("user_status.type_wine_puzzle_only",!0)}}},tgt1369PluswordOverlay:e=>{const t=new Ue(e);return{className:"PluswordOverlay",folder:"TGT-1369--plusword-overlay",env:"all",targetting:{pluswordPage:t.getVisitorData("page_url_path","/news/plusword/",!1),profileScripts:t.getPScriptData("displayInterval","statuses.TGT-1369--plusword-overlay",!0)}}},tgt1205PianoLibrary:e=>{const t=new Ue(e);return{className:"PianoLibrary",folder:"TGT-1205--piano-library",env:"all",targetting:{page:!t.getVisitorData("page_url_path","/customer/",!1),isNotGoogleShowcase:t.getVisitorData("is_google_showcase",!1)}}},tgt1122AdobeTargetTrackEvents:e=>{const t=new Ue(e);return{className:"AdobeTrackEvents",folder:"TGT-1122--adobe-target-track-events",env:"all",targetting:{page:t.customAudience("Page: Register")||t.customAudience("Page: Login")||t.customAudience("Page: Articles & Galleries")}}},tgt107InLifeTriggersNewsletterOverlay:e=>{const t=new Ue(e);return{className:"InLifeNewsletterOverlay",folder:"TGT-107--in-life-triggers-newsletter-overlay",campaignId:424295,env:"all",targetting:{excludePath:!t.getVisitorData("page_url_path","customer/subsdigitaleditionapp",!1),excludeStandard:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot"),excludeSyndication:!t.getVisitorData("page_url_path","/syndication/",!1),userIsLoggedInSub:t.getVisitorData("user_status.logged_in_subscriber",!0),userIsSTDorADA:t.getVisitorData("user_status.type_digital_plus",!0)||t.getVisitorData("user_status.type_digital",!0)},thirdParty:{daysSinceSub:[{property:"adobeTarget.attributes.days_since_latest_sub_chain",operator:"greater",value:14,as:"days_since_latest_sub_chain"}],newsletterCounts:[{property:"adobeTarget.attributes.newsletter_lists_count",operator:"less",value:3,as:"newsletter_lists_count"}],displayOverlayRule:[{property:"adobeTarget.profileScripts.inlifeNewsletterRecsOverlay",operator:"contains",value:"status=true",as:"inlifeNewsletterRecsOverlay"}],categoryAffinities:[{property:"adobeTarget.profileScripts.categoryAffinities",as:"categoryAffinities"}]}}},tgt1018SoftStickyFooter:e=>{const t=new Ue(e);return{className:"SoftStickyFooter",folder:"TGT-1018--soft-sticky-footer",env:"all",manual:!0,targetting:{mainExclusion:t.customAudience("Exclusion: Portal, Secure, Corporate, Sponsored, Events, FS, Bot"),travelExclusion:t.customAudience("Exclusion: Travel Commercial"),commercialArticles:t.customAudience("Exclusion: Commercial Articles (Soft Experiences)"),socialMedialArticles:t.customAudience("Exclusion: Social Media Articles Targeting"),excludeSyndication:!t.getVisitorData("page_url_path","/syndication/",!1),excludeIE:!t.getVisitorData("browser_name","IE"),status:t.getVisitorData("user_status.subscriber",!1)||t.getVisitorData("user_status.type_wine_puzzle_only",!0),otherExclusions:!(t.getVisitorData("channel","global-health")||t.getVisitorData("page_url_path","puzzles-news",!1)),page:t.customAudience("Page: Articles & Galleries")||t.customAudience("Page: Index")||t.customAudience("Page: Topic")},thirdParty:{winbackUser:[{property:"adobeTarget.attributes.flag_winback_period",as:"winbackUser"}],expandCollapse:[{property:"adobeTarget.profileScripts.softStickyFooter",as:"softStickyFooter"}]},xtTest:[{name:"standard",targetting:!0}]}},tgt1002PaywallMetersProfile:e=>({className:"PaywallMetersProfile",folder:"TGT-1002--paywall-meters-profile",env:"all",targetting:{page:!new Ue(e).getVisitorData("page_url_path","/customer/",!1)}}),qaSoftStickyFooter:e=>{const t=new Ue(e);return{className:"SoftStickyFooter",folder:"TGT-1018--soft-sticky-footer",env:"all",manual:!0,targetting:{includeQueryParam:t.getVisitorData("page_url","martech_qa_soft_sticky_footer=true",!1)},custom:{winbackUser:t.getVisitorData("page_url_query","martech_qa_winbackuser=true",!1)}}},qaSmartbannerChromeApp:e=>{const t=new Ue(e);return{className:"SmartAppBannerChrome",folder:"WEB-5674--smartbanner-chrome-app",env:"all",targetting:{page:t.customAudience("Page: Articles & Galleries"),includeQueryParam:t.getVisitorData("page_url","martech_qa_smartbanner=true",!1)}}},qaRegistrantCompleteYourAccount:e=>{const t=new Ue(e);return{className:"CompleteYourAccount",folder:"TGT-385--registrant-complete-your-account",env:"all",targetting:{includeQueryParam:t.getVisitorData("page_url","martech_qa_complete-your-account=true",!1),registeredLoggedin:t.getVisitorData("user_status.logged_in_registered",!0)}}},qaPluswordOverlay:e=>({className:"PluswordOverlay",folder:"TGT-1369--plusword-overlay",env:"all",targetting:{includeQueryParam:new Ue(e).getVisitorData("page_url","martech_qa_plusword_overlay=true",!1)}}),qaPaymentFailure:e=>{const t=new Ue(e);return{className:"PaymentFailure",folder:"TGT-403--payment-failure",env:"all",manual:!1,targetting:{excludeStandard:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot"),excludeSyndication:t.customAudience("Exclusion: Syndication"),excludeTravelCommercial:t.customAudience("Exclusion: Travel Commercial")},xtTest:[{name:"sticky-banner",targetting:{parameter:t.getVisitorData("page_url_query","martech_qa_payment_failure=sticky-banner",!1)}},{name:"offer-overlay-one",targetting:{parameter:t.getVisitorData("page_url_query","martech_qa_payment_failure=overlay-one",!1)}},{name:"update-overlay-two",targetting:{parameter:t.getVisitorData("page_url_query","martech_qa_payment_failure=overlay-two",!1)}},{name:"offer-overlay-three",targetting:{parameter:t.getVisitorData("page_url_query","martech_qa_payment_failure=overlay-three",!1)}},{name:"update-overlay-four",targetting:{parameter:t.getVisitorData("page_url_query","martech_qa_payment_failure=overlay-four",!1)}}]}},qaMartechPaywall:e=>{const t=new Ue(e);return{className:"MartechPaywall",folder:"TGT-390--martech-paywall",env:"all",manual:!0,targetting:{contentType:t.customAudience("Page: Articles & Galleries")||t.customAudience("Page: Bare"),includeQueryParam:t.getVisitorData("page_url","martech_qa_paywall",!1)},custom:{winbackUser:t.getVisitorData("page_url_query","martech_qa_winbackuser=true",!1)},xtTest:[{name:"primary-paywall",targetting:{includeQueryParam:t.getVisitorData("page_url","martech_qa_paywall=primary",!1)}},{name:"login-paywall",targetting:{includeQueryParam:t.getVisitorData("page_url","martech_qa_paywall=login",!1)}}]}},qaMartechOverlay:e=>{const t=new Ue(e);return{className:"MartechOverlay",folder:"TGT-395--martech-overlay",env:"all",manual:!0,targetting:{standardExclusion:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot"),travelExclusion:t.customAudience("Exclusion: Travel Commercial"),noGoogleShowcase:t.getVisitorData("is_google_showcase",!1),user:t.getVisitorData("user_status.subscriber",!1,!0),includeQueryParam:t.getVisitorData("page_url","martech_qa_overlay",!1)},custom:{winbackUser:t.getVisitorData("page_url_query","martech_qa_winbackuser=true",!1)},xtTest:[{name:"aem-hard-overlay",targetting:{page:t.customAudience("Page: Articles & Galleries"),includeQueryParam:t.getVisitorData("page_url","martech_qa_overlay=hard",!1)}},{name:"general-soft-overlay",targetting:{excludePuzzlesNews:!t.getVisitorData("page_url_path","puzzles-news",!1),excludeCommercialArticles:t.customAudience("Exclusion: Commercial Articles (Soft Experiences)"),excludeSyndication:!t.getVisitorData("page_url_path","/syndication/",!1),excludePlusWord:!t.getVisitorData("page_url_path","/news/plusword/",!1),excludeCrossAtlantic:!t.getVisitorData("page_url_path","/news/cross-atlantic-crossword/",!1),excludeCustomerPages:!t.customAudience("Page: Acquisition pages"),excludeSocialMedialArticles:t.customAudience("Exclusion: Social Media Articles Targeting"),includeQueryParam:t.getVisitorData("page_url","martech_qa_overlay=soft",!1)}}]}},qaInLifeTriggersNewsletterOverlay:e=>({className:"InLifeNewsletterOverlay",folder:"TGT-107--in-life-triggers-newsletter-overlay",campaignId:424295,env:"all",targetting:{parameter:new Ue(e).getVisitorData("page_url_query","martech_qa_inlife_nl_overlay=true",!1)},custom:{categoryAffinities:"[politics, portal, travel, health-fitness, news]"}}),qaHighlyEngagedSlideover:e=>{const t=new Ue(e);return{className:"HardSlideover",folder:"TGT-953--highly-engaged-slideover",env:"all",manual:!0,targetting:{page:t.customAudience("Page: Articles & Galleries")},custom:{winbackUser:t.getVisitorData("page_url_query","martech_qa_winbackuser=true",!1)},xtTest:[{name:"standard",targetting:{includeQueryParam:t.getVisitorData("page_url_query","martech_qa_slideover=standard",!1)}}]}},qaCreditCardExpiry:e=>{const t=new Ue(e);return{className:"CreditCardExpiry",folder:"TGT-453--credit-card-expiry",env:"all",targetting:!0,xtTest:[{name:"31 - 7 days",targetting:{queryContainsBanner:t.getVisitorData("page_url_query","martech_qa_card_expiry=banner",!1)}},{name:"7 - 0 days",targetting:{queryContainsOverlay:t.getVisitorData("page_url_query","martech_qa_card_expiry=overlay",!1)}}]}},qaBonusSubOverlay:e=>({className:"BonusSubsOverlay",folder:"TGT-879--bonus-sub-overlay",env:"all",targetting:{includeQueryParam:new Ue(e).getVisitorData("page_url_query","martech_qa_bonus_overlay=true",!1)},custom:{promo_code:"00000-00000-00000-00000"}}),qaBonusSubInlineUnit:e=>({className:"BonusSubsInlineUnit",folder:"TGT-605--bonus-sub-inline-unit",env:"all",targetting:{includeQueryParam:new Ue(e).getVisitorData("page_url_query","martech_qa_bonus_inline=true",!1)}})};var We=function(t){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=a||ze,s=[];for(const e in i)if((!r||e===r)&&"function"==typeof i[e]){const a=i[e](t);s.push({...a,audienceLabel:e})}return r&&!s.length>0&&e(`CORE :: getAudiences :: No Audience found for "${r}".`),s};const $e=()=>Date.now()+18e5,He=()=>{let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ_-&abcdefghijklmnopqrstuvwxyz0123456789",a=t.length;for(let r=0;r<42;r++)e+=t.charAt(Math.floor(Math.random()*a));return e};var Je=()=>{const e=y("profile.user.session");if(!e||e.expire<Date.now())return(()=>{const e=$e();return{id:He(),expire:e,newSession:!0}})();{const t=$e();return{id:e.id,expire:t,newSession:!1}}},Qe=a=>{if(!a.campaignClass||!a.campaignFolder)return void e("CORE :: injector :: Activity name and/or folder not provided. Aborting..");if(G.flags.turnoff&&G.flags.turnoff.includes(a.campaignClass))return void e(`CORE :: injector :: Activity ${a.campaignName} on turnoff list and not loaded.`);if(!G.domain)return void e(`CORE :: injector :: domain not defined. Activity ${a.campaignName} not loaded.`);if((t=>{var a,r;const i={wtmc_id:{test:(x("WT.mc_id")||"").includes("tune-in-open-snapchatac"),campaignClasses:["MartechOverlay","CreditCardExpiry","PendingCancModal","PaymentFailureModal","InLifeNewsletterOverlay","EditionAppOverlay"]},flexReg:{test:(null===(a=t.core.p13n)||void 0===a?void 0:a.readerTypeExtension)&&(null===(r=t.core.p13n)||void 0===r?void 0:r.readerTypeExtension.includes("flexreg")),campaignClasses:["MartechOverlay","MartechPaywall","CreditCardExpiry","PendingCancModal","PaymentFailureModal","InLifeNewsletterOverlay","EditionAppOverlay","HardSlideover"]},wine_puzzle_only:{test:t.core.visitor.user_status.type_wine_puzzle_only,campaignClasses:["PendingCancModal","EditionAppOverlay","BonusSubsOverlay","BonusSubsInlineUnit","InLifeNewsletterOverlay"]},digital_light:{test:t.core.visitor.user_status.type_digital_light,campaignClasses:["BonusSubsInlineUnit","InLifeNewsletterOverlay","MartechOverlay","EditionAppOverlay","BonusSubsOverlay"]},fantasySports:{test:"fantasy-sports"===t.core.visitor.channel&&!t.core.visitor.user_status.type_digital_light,campaignClasses:["MartechPaywall","HardSlideover","MartechOverlay","SoftStickyFooter"]},liveBlog:{test:"live"===t.core.visitor.content_type,campaignClasses:[{MartechOverlay:["aem-hard-overlay"]},"HardSlideover","MartechPaywall"]},newLiveBlog:{test:"liveBlogRenderer"===t.core.visitor.page_renderer,campaignClasses:[{MartechOverlay:["aem-hard-overlay"]},"HardSlideover","MartechPaywall","NewsletterUnit"]},globalHealth:{test:"global-health"===t.core.visitor.channel,campaignClasses:["MartechOverlay","MartechPaywall","HardSlideover","SoftStickyFooter"]},rubik_editorial_exclusion:{test:t.core.visitor.keywords.includes("special exclusion"),campaignClasses:["MartechOverlay","HardSlideover","MartechPaywall","SoftStickyFooter"]},editorialURL:{test:t.core.visitor.page_url_path.includes("/daily-telegraph-book-commemorating-life-reign-queen-elizabeth/"),campaignClasses:["MartechOverlay","MartechPaywall","HardSlideover","SoftStickyFooter"]},londonBridge:{test:t.core.visitor.page_url_path.includes("/her-majesty-queen-elizabeth-ii-obituary/"),campaignClasses:["MartechPaywall"]},countryWeCantSell:{test:!t.core.visitor.country_sell_allowed,campaignClasses:["DigitalLightStickyFooter","HardSlideover","MartechOverlay","MartechPaywall","NewsletterUnit"]},hotelGuidesOrCruises:{test:"travel"===t.core.visitor.channel&&(t.core.visitor.keywords.includes("hotel guides")||t.core.visitor.category&&t.core.visitor.category.includes("cruises")),campaignClasses:["MartechOverlay","MartechPaywall","HardSlideover","SoftStickyFooter"]},racing:{test:"racing"===t.core.visitor.channel||t.core.visitor.page_url_path.includes("/racing/"),campaignClasses:["MartechPaywall","HardSlideover","MartechOverlay","SoftStickyFooter"]}};for(const e in i){const{test:a,campaignClasses:r,campaignIds:n}=i[e];if(a&&(r&&s(r,t)||n&&n.includes(t.campaignId)))return o(e),!0}return!1;function s(e,t){return e.some((e=>{if("object"==typeof e){const[a,r]=Object.entries(e)[0];return a===t.campaignClass&&r.includes(t.experienceName)}return e===t.campaignClass}))}function o(a){e(`Core :: Prevention :: ${t.campaignName} will not run because of a Rule: ${a}`),t.core.environment.flags.debug&&(window.martech.info.activitiesExcluded=window.martech.info.activitiesExcluded||[],window.martech.info.activitiesExcluded.push({[t.campaignName]:a}))}})(a))return;const r=`${G.domain}js/${a.campaignFolder}/index.js`;_e(r,!0).then((()=>{const r=window.martech.classes[a.campaignClass];r?(new r(a).init(),(e=>{const a={id:e.campaignId,campaignClass:e.campaignClass,experienceNumber:e.experienceNumber,audienceLabel:e.audienceLabel||!1};if(window.martech.info.activitiesRunning||t("info.activitiesRunning",[]),window.martech.info.activitiesRunning.push(a),e.core.environment.flags.debug){const a={[e.campaignName]:{...e,campaignId:e.campaignId}};window.martech.info.activitiesDetails||t("info.activitiesDetails",[]),window.martech.info.activitiesDetails.push(a)}})(a),e(`CORE :: injector :: Activity ${a.campaignName} initialised. Activity ID: ${a.campaignId} | Experience Number: [${a.experienceNumber}] | Experience Name: ${a.experienceName}`)):e(`CORE :: injector :: Activity ${a.campaignName} | type: ${a.campaignType} not found.`)})).catch((t=>{e(t,`CORE :: injector :: Error while trying to inject the activity. Activity ${a.campaignName} not loaded.`)}))},Ke=(e,t)=>{const a=e.environment.flags.splitgroup_overrides||!1,r={...t};return a&&Object.keys(a).forEach((e=>{Object.keys(t.splitGroupAB).includes(e)&&(r.splitGroupAB[e]=a[e],r.splitGroupAB._internal[e]="overridden")})),r};const Ye={userHistory:(e,t)=>{const a=e=>{e.splice(0,e.length+1-10)},r=t.userHistory||{},i=r.current_page||!1,s=e.visitor.page_url_path,o=r.last_visited_pages||[],n=r.last_visited_index_pages||[],l=r.last_visited_articles||[],c=r.last_visited_article_tags||[];if(s!==i&&(o.length>=10&&a(o),o.push(e.visitor.page_url_path),["story","live","video","gallery"].includes(e.visitor.content_type)&&(l.length>=10&&a(l),l.push(e.visitor.page_url_path)),["index","topic"].includes(e.visitor.page_type)&&(n.length>=10&&a(n),n.push(e.visitor.page_url_path)),["story","live","video","gallery"].includes(e.visitor.content_type))){c.length>=10&&a(c);const t=e.visitor.keywords;t&&c.push(t)}return{previous_page:i,current_page:s,last_visited_pages:o,last_visited_articles:l,last_visited_index_pages:n,last_visited_article_tags:c}}};Ye.splitGroupAB=(e,t)=>{const a={"TGT-2041--ocj-offer-test":[50],"TGT-000-TEST":[25,50,75]},r=t.splitGroupAB||{},i=r._internal||{};return Object.keys(a).forEach((e=>{if(!r[e]){const t=(e=>{const t=99*Math.random()+1;for(const[a,r]of e.entries())if(t<=r)return{number:t,group:0===a?"control":`variation${a}`};return{number:t,group:`variation${1===e.length?"":e.length}`}})(a[e]);r[e]=t.group,i[e]=t.number}})),{...r,_internal:i}},Ye.pageViews=(e,t)=>{const a=t.pageViews||{},r=!(!a._internal||!a._internal.current_page)&&a._internal.current_page,i=e.visitor.page_url_path;let s=a.page_views||0,o=a.index_views||0,n=a.homepage_views||0,l=a.articles_views||0,c=a.gallery_views||0,u=a.sub_funnel_views||0,d=a.my_account_views||0,p=a.my_feed_views||0;return i!==r&&(s+=1,"index"===e.visitor.content_type&&(o+=1),"homepage"===e.visitor.page_type&&(n+=1),"article"===e.visitor.page_type&&(l+=1),"gallery"===e.visitor.page_type&&(c+=1),e.visitor.page_url_path.includes("/secure/")&&(u+=1),e.visitor.page_url_path.includes("/secure/account")&&(d+=1),e.visitor.page_url_path.includes("/mytelegraph/")&&(p+=1)),{_internal:{previous_page:r,current_page:i},page_views:s,index_views:o,homepage_views:n,articles_views:l,gallery_views:c,sub_funnel_views:u,my_account_views:d,my_feed_views:p}},Ye.displayInterval=(e,t)=>{const a={"TGT-40--login-overlay-subs-and-reg":7,"TGT-1369--plusword-overlay":1,"TGT-1687--cross-atlantic-overlay":1,"TGT-1466--edition-app-overlay":7,"TGT-879--bonus-sub-overlay":7},r=t.displayInterval||{},i=Date.now(),s=r.statuses||{};return Object.keys(a).forEach((e=>{if(r[e]){const t=(i-r[e])/864e5;s[e]=t>a[e]}else s[e]=!0})),{...r,statuses:s,_internal:{intervals:a}}};class Xe{constructor(){this.env=G,this.thirdPartyData={},this.env.flags.debug&&(function(e,t){t=t||{},Y((function(){var a,r=[.1,.25],i=$("CLS"),s=-1,o=0,n=[],l=function(t){s>-1&&e(t)},c=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=n[0],r=n[n.length-1];o&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,n.push(e)):(o=e.value,n=[e]),o>i.value&&(i.value=o,i.entries=n,a())}}))},u=H("layout-shift",c);u&&(a=Q(l,i,r,t.reportAllChanges),ie((function(e){s=e.value,i.value<0&&(i.value=0,a())})),J((function(){c(u.takeRecords()),a(!0)})),U((function(){o=0,s=-1,i=$("CLS",0),a=Q(l,i,r,t.reportAllChanges),K((function(){return a()}))})))}))}(me),function(e,t){t=t||{},Y((function(){var a,r=[100,300],i=re(),s=$("FID"),o=function(e){e.startTime<i.firstHiddenTime&&(s.value=e.processingStart-e.startTime,s.entries.push(e),a(!0))},n=function(e){e.forEach(o)},l=H("first-input",n);a=Q(e,s,r,t.reportAllChanges),l&&J((function(){n(l.takeRecords()),l.disconnect()}),!0),l&&U((function(){var i;s=$("FID"),a=Q(e,s,r,t.reportAllChanges),j=[],L=-1,R=null,ue(addEventListener),i=o,j.push(i),le()}))}))}(me),function(e,t){t=t||{},Y((function(){var a,r=[2500,4e3],i=re(),s=$("LCP"),o=function(e){var t=e[e.length-1];if(t){var r=Math.max(t.startTime-W(),0);r<i.firstHiddenTime&&(s.value=r,s.entries=[t],a())}},n=H("largest-contentful-paint",o);if(n){a=Q(e,s,r,t.reportAllChanges);var l=function(){de[s.id]||(o(n.takeRecords()),n.disconnect(),de[s.id]=!0,a(!0))};["keydown","click"].forEach((function(e){addEventListener(e,l,{once:!0,capture:!0})})),J(l,!0),U((function(i){s=$("LCP"),a=Q(e,s,r,t.reportAllChanges),K((function(){s.value=performance.now()-i.timeStamp,de[s.id]=!0,a(!0)}))}))}}))}(me),ge(me))}async init(){let a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.triggeredView=a,this.matchedView=!(!a||!this.checkMatchedView(a))&&{name:a,page:r&&r.page||!1,data:r&&r.data||!1},"prod"===this.env.env&&(this.env.flags.disabled||this.env.flags.preprod||this.env.flags.dev||this.env.flags.local))(()=>{const{flags:t}=G;switch(!0){case t.disabled:e("CORE :: Delivery disabled due to querystring | localstorage | excluded domains | environment.flags.");break;case t.local:e("CORE :: Delivery disabled due to LOCAL codebase running...");break;case t.preprod:e("CORE :: Switching library to PREPROD environment."),_e(`${E.preprod}js/core.min.js`,!1,!1,[{name:"id",value:"martech-core-preprod"}]);break;case t.dev:e("CORE :: Switching library to DEV environment."),_e(`${E.dev}js/core.min.js`,!1,!1,[{name:"id",value:"martech-core-dev"}]);break;default:e("CORE :: Delivery disabled due unknown cause...")}})();else{this.triggeredView||(i=this.env,window.martech=window.martech||{},t("classes"),i.flags.debug?(t("visitor"),t("offers"),t("info",{activitiesExcluded:[],debug:!0,displayed:{},environment:i,matchedViews:[],triggeredViews:[]})):t("info",{displayed:{}}),t("tools",{callbacks:Be,triggerView:t=>{e(`CORE :: triggerView not ready.. for ${t}`)}}),window.dataLayer&&(window.dataLayer.martech=window.dataLayer.martech||{}));const a=await(new C).init();(async e=>{Ve(e),Oe(e)})(a),this.profile=new f(a);const r=this.profile.getProfile(),s={p13n:a.cookies.tmg_p13n,visitor:{...a},environment:this.env,triggeredView:this.triggeredView,matchedView:this.matchedView,user:{...r.user,session:Je()}},o=!this.matchedView||this.matchedView&&!1!==this.matchedView.page?this.runProfileScripts(s,r.profileScripts):r.profileScripts;this.startup({...s,profileScripts:Ke(s,o)||{}})}var i}startup(t){this.core=t,this.profile.createProfile(this.core),this.defaultActivityConfig={core:{...this.core}},e(this.core,"CORE Data ::"),this.triggeredView&&this.env.flags.debug&&window.martech.info.triggeredViews.push(this.triggeredView),this.matchedView&&this.env.flags.debug&&window.martech.info.matchedViews.push(this.matchedView.name),this.env.flags.debug&&(window.martech.user=this.core.user,window.martech.info.profileScripts=this.core.profileScripts,window.martech.info.session=this.core.user.session,window.martech.visitor=this.core.visitor),this.getActivities(this.matchedView,this.triggeredView),this.triggeredView||(this.runLocally(),this.listener())}runProfileScripts(e,t){const a={};for(const r in Ye)"function"==typeof Ye[r]&&(a[r]=Ye[r](e,t));return a}checkMatchedView(t){if(!t)return!1;const a=this.audiences.filter((e=>e.spaView===t));return a.length>0?e(`CORE :: checkMatchedView :: View ${t} Found.`):e(`CORE :: checkMatchedView :: View ${t} NOT found.`),a.length>0}async runAudience(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=(e,t)=>e.split(".").reduce(((e,t)=>e?e[t]:null),t||self),n=e.targetting;let l=[];const c={};let u={};if("object"==typeof n)for(const e in n)!0!==n[e]&&l.push(!1);else!0!==n&&l.push(!1);if(e.thirdParty&&"object"==typeof e.thirdParty&&null!==e.thirdParty){const t=e.thirdParty;let a=[];for(const r in t){const i=t[r];let s=[];await Promise.all(i.map((async(t,a)=>{const i=await this.waitFor3rdPartyData(t.property,t.value,t.operator||!1),n=o(t.property,this.thirdPartyData);e.thirdParty[r][a].retrieved=n,t.operator&&(e.thirdParty[r][a].match=!!i),i&&(s.push(!0),c[t.as]=i.value)}))),s=s.filter((e=>!0===e)),!s.length>0?a.push(!1):a.push(!0)}a=a.filter((e=>!0!==e)),a.length>0&&l.push(!1)}if("all"===e.env||e.env.includes(this.core.environment.env)||l.push(!1),e.manual&&!r&&l.push(!1),e.spaView&&!t&&this.core.visitor.page_url_path.includes("/customer/")&&this.preloadActivity(e),(!t&&e.spaView||t&&e.spaView&&t.name!==e.spaView||a&&!e.spaView)&&l.push(!1),e.abTest&&e.abTest.script&&e.abTest.node&&e.abTest.split&&Array.isArray(e.abTest.split)){const t=e.abTest;this.core.profileScripts[t.script]&&this.core.profileScripts[t.script][t.node]&&t.split.forEach(((e,a)=>{e.value===this.core.profileScripts[t.script][t.node]&&(u={experienceNumber:a,experienceName:e.name})}))}else if(e.xtTest&&Array.isArray(e.xtTest)){let t=[];for(const[a,r]of e.xtTest.entries()){let i=[];if("object"==typeof r.targetting)for(const e in r.targetting)!0!==r.targetting[e]&&i.push(!1);else!0!==r.targetting&&i.push(!1);if(r.thirdParty&&"object"==typeof r.thirdParty&&null!==r.thirdParty){const t=r.thirdParty;let s=[];for(const r in t){const i=t[r];let n=[];await Promise.all(i.map((async(t,i)=>{const s=await this.waitFor3rdPartyData(t.property,t.value,t.operator||!1),l=o(t.property,this.thirdPartyData);e.xtTest[a].thirdParty[r][i].retrieved=l,t.operator&&(e.xtTest[a].thirdParty[r][i].match=!!s),s&&(n.push(!0),c[t.as]=s.value)}))),n=n.filter((e=>!0===e)),!n.length>0?s.push(!1):s.push(!0)}s=s.filter((e=>!0!==e)),s.length>0&&i.push(!1)}if(i=i.filter((e=>!0!==e)),!i.length>0){u={experienceNumber:a,experienceName:r.name},t=[];break}t.push(!1)}t=t.filter((e=>!0!==e)),t.length>0&&l.push(!1)}l=l.filter((e=>!0!==e)),!l.length>0&&!window.martech.audiences.matched.filter((t=>t.className===e.className&&t.audienceLabel===e.audienceLabel)).length>0&&(this.runner(e,u,c,i,s),window.martech.audiences.matched.push(e)),!window.martech.audiences.all.filter((t=>t.className===e.className&&t.audienceLabel===e.audienceLabel)).length>0&&window.martech.audiences.all.push(e)}getActivity(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.audience=Ne(We(this.core,!1,a)),this.audience.length>0&&this.audience.forEach((a=>{this.runAudience(a,e,t,!0,r,i)}))}getActivities(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.audiences=Ne(We(this.core)),t("audiences.all",[]),t("audiences.matched",[]),this.audiences.length>0&&this.audiences.forEach((t=>{this.runAudience(t,e,a)}))}waitFor3rdPartyData(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((r=>{const i=(s,o)=>{if(++s<=20){const l=(n=o,e.split(".").reduce(((e,t)=>e?e[t]:null),n||self));if(null!=l)if(void 0!==t)if(a)switch(a){case"contains":return l.includes(t)?r({value:l}):r(!1);case"not contains":return l.includes(t)?r(!1):r({value:l});case"equal":default:return r(l===t&&{value:l});case"not equal":return r(l!==t&&{value:l});case"greater":return r("number"==typeof l&&l>t&&{value:l});case"greater equal":return r("number"==typeof l&&l>=t&&{value:l});case"less":return r("number"==typeof l&&l<t&&{value:l});case"less equal":return r("number"==typeof l&&l<=t&&{value:l})}else r(l===t&&{value:l});else r({value:l});else setTimeout((()=>i(s,this.thirdPartyData)),200)}else if(a)switch(a){case"equal":return r(null===t&&{value:!0});case"not equal":return r(null!==t&&{value:!0});default:return r(!1)}else r({value:!1});var n};i(0,this.thirdPartyData)}))}runner(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s={...this.defaultActivityConfig,audienceLabel:e.audienceLabel,campaignId:e.campaignId,campaignName:e.campaignName||e.folder,campaignClass:e.className,campaignFolder:e.folder,campaignType:r||"core",experienceNumber:0,experienceName:"control",...e.custom,...t,...a,...i};Qe(s)}runLocally(){if(this.env.flags.local&&i.campaignClass&&i.campaignFolder){const e={...this.defaultActivityConfig,experienceNumber:0,experienceName:"control",campaignType:"local",...i,campaignName:i.campaignName||i.campaignFolder,campaignId:parseInt(i.campaignId,10)||101010101};Qe(e)}}listener(){var t=this;window.martech.tools.audience=function(){let a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a&&(e(`CORE :: window.martech.tools.audience :: Triggered for Audience "${a}".`),t.getActivity(t.matchedView,t.triggeredView,a,r,i))},window.martech.tools.launch=t=>{const a={...this.defaultActivityConfig,...t,campaignName:t.campaignName||t.campaignFolder,campaignId:t.campaignId?parseInt(t.campaignId,10):Me(t.campaignName||t.campaignClass),campaignType:t.campaignType||"3rdParty",experienceNumber:t.experienceNumber&&parseInt(t.experienceNumber,10)||0,experienceName:t.experienceName?t.experienceName:"control"};Qe(a),e(`CORE :: window.martech.tools.launch :: Triggered by ${a.campaignType} -> ${t.campaignFolder}.`)},window.martech.tools.triggerView=function(a){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{page:!0,data:!1};e(`CORE :: triggerView :: Triggering ${a}.`),t.init(a,r)},window.martech.tools.tp=function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e({[i]:a},"CORE :: window.martech.tools.tp :: Triggered.. ingesting third party data:"),i){const e=r(t.thirdPartyData,{[i]:a});t.thirdPartyData=e}t.env.flags.debug&&(window.martech.info.thirdParty=t.thirdPartyData)}}preloadActivity(t){if(document.querySelector(`#script--${t.folder}`))e(`CORE :: preloadActivity :: Activity in ${t.folder} already preloaded.`);else{const a=document.createElement("link"),r=document.createElement("link");a.href=`${this.core.environment.domain}js/${t.folder}/index.js`,a.rel="preload",a.as="script",a.id=`script--${t.folder}`,document.head.appendChild(a),t.spaStyling&&(r.href=`${this.core.environment.domain}css/${t.folder}/style.css`,r.rel="preload",r.as="style",r.id=`style--${t.folder}`,document.head.appendChild(r)),e(`CORE :: preloadActivity :: Activity in ${t.folder} preloaded.`)}}}-1!==window.location.pathname.indexOf("/customer/")?function e(t){++t<=20?window.__polyfills&&window.__polyfills.loaded&&!0===window.__polyfills.loaded?(new Xe).init():setTimeout((()=>{e(t)}),100):(new Xe).init()}(0):window.tmg&&void 0!==window.tmg.pubsub?window.tmg.pubsub.subscribe({topic:"tmg.polyfill.ready",func:()=>{(new Xe).init()},runIfAlreadyPublished:!0}):(new Xe).init()}()}();
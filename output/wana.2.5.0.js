!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(self,(()=>(()=>{"use strict";var e,t,n,i={r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};i.r(o),function(e){e.HORIZONTAL="HORIZONTAL",e.RECTANGLE="RECTANGLE",e.VERTICAL="VERTICAL",e.MOBILE="MOBILE",e.MOBILE_BIG="MOBILE_BIG",e.MOBILE_HORIZONTAL="MOBILE_HORIZONTAL",e.PORTRAIT="PORTRAIT",e.BILLBOARD="BILLBOARD"}(e||(e={})),function(e){e[e.Unknown=0]="Unknown",e[e.Ethernet=1]="Ethernet",e[e.WIFI=2]="WIFI",e[e.CellularNetworkUnknownGeneration=3]="CellularNetworkUnknownGeneration",e[e.CellularNetwork2G=4]="CellularNetwork2G",e[e.CellularNetwork3G=5]="CellularNetwork3G",e[e.CellularNetwork4G=6]="CellularNetwork4G",e[e.CellularNetwork5G=7]="CellularNetwork5G"}(t||(t={}));var r=((n={})[e.HORIZONTAL]=[[970,90],[728,90],[468,60],[234,60]],n[e.RECTANGLE]=[[336,280],[300,250],[250,250],[200,200],[180,150],[125,125]],n[e.VERTICAL]=[[300,600],[160,600],[120,600],[120,240]],n[e.MOBILE]=[[320,50]],n[e.MOBILE_BIG]=[[320,100],[320,50]],n[e.MOBILE_HORIZONTAL]=[[970,90],[728,90],[468,60],[320,100],[320,50],[234,60]],n[e.PORTRAIT]=[[300,1050]],n[e.BILLBOARD]=[[970,250]],n["300x600"]=[[300,600],[160,600]],n["336x280"]=[[336,280],[300,250]],n["728x90"]=[[728,90],[468,60]],n["970x90"]=[[970,90],[728,90],[468,60]],n),a="https://ads.assemblyexchange.com",s="web_".concat("2.5.0"),d="ana_client_uid",c="ana_client_session_id",l="ana_vast",u="ana_staging",p="https://securepubads.g.doubleclick.net/tag/js/gpt.js",h="//c.amazon-adsystem.com/aax2/apstag.js",g=[new RegExp("^https://js.media-lab.ai$"),new RegExp("^https://apps.media-lab.ai$"),new RegExp("^https://ads.assemblyexchange.com$"),new RegExp("^https://staging.apps.media-lab.ai$"),new RegExp("^https://tpc.googlesyndication.com$"),new RegExp("^https?://ana-sdk-creative.s3-website-us-west-2.amazonaws.com$"),new RegExp("^https://\\w+.safeframe.googlesyndication.com$"),new RegExp("^https?://localhost:9000$"),new RegExp("^https?://127.0.0.1:9000$")],f=[new RegExp("^https://js.media-lab.ai$"),new RegExp("^https://apps.media-lab.ai$"),new RegExp("^https://ads.assemblyexchange.com$"),new RegExp("^https://staging.apps.media-lab.ai$"),new RegExp("^https?://localhost:2279$"),new RegExp("^https?://127.0.0.1:2279$")],m=417,y="frequency_cap",v="cs_",b="AssemblyBidderSyncState",w=2500,E=4,A=function(){var e=null;if(window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),!e)throw Error("Cannot create an XMLHttpRequest instance");return e},T=function(e){e.withCredentials=!0,e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("ana-api-key","056363cfdcfcf7de5cea11820138b4d2daf3ca"),e.setRequestHeader("lib_version",s),e.setRequestHeader("publisher_version","web_0.0.1")},S=function(e,t){void 0===t&&(t={});var n,i,o=new URL(e);return t&&"{}"!==JSON.stringify(t)?(void 0!==o.searchParams?Object.keys(t).forEach((function(e){return o.searchParams.append(e,String(t[e]))})):o.href+="?"+(n=t,i=[],Object.keys(n).forEach((function(e){i.push(encodeURIComponent(e)+"="+encodeURIComponent(n[e]))})),i.join("&")),o):o};function I(e){return function(){this.readyState===XMLHttpRequest.DONE&&e&&e(this)}}function _(e){return function(){0!==this.status&&console.error("Error occurred while HTTP request"),e&&e(this)}}var D=function(e,t,n,i,o){void 0===t&&(t={}),void 0===n&&(n=null);var r=A();r.onreadystatechange=I(i),r.onerror=_(o);var a=S(e,t);r.open("POST",a.toString()),T(r),r.send(n?JSON.stringify(n):null)},O=function(e,t,n,i){void 0===t&&(t={});var o=A();o.onreadystatechange=I(n),o.onerror=_(i);var r=S(e,t);o.open("GET",r.toString()),T(o),o.send()},R=function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))};function C(){return window.ANAWebSDKInstance}function k(){var e=C();if(e)return e.propertyId;var t=window.ANAWebPropertyId;return t||window.location.hostname}function P(e){try{var t=e(),n="__random_key__",i="__random_val__";return t.setItem(n,i),t.getItem(n)!==i?!1:(t.removeItem(n),!0)}catch(e){return!1}}function M(){return!!window.ana_debug||-1!==window.location.href.indexOf("ana_debug=1")}function B(){var e,n=window.navigator;if(!n.connection)return t.Unknown;switch(n.connection.effectiveType){case"slow-2g":case"2g":e=t.CellularNetwork2G;break;case"3g":e=t.CellularNetwork3G;break;case"4g":e=t.CellularNetwork4G;break;default:e=t.Unknown}return e}function L(){var e,n=window.navigator;if(!n.connection)return t.Unknown;if(n.connection)switch(n.connection.type){case"cellular":e=B();break;case"ethernet":e=t.Ethernet;break;case"wifi":e=t.WIFI;break;case"unknown":e=t.Unknown;break;case void 0:e=B();break;default:e=t.Unknown}return e}function N(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];M()&&console.log.apply(console,R(["%cðŸš¨ANA: ","background: #222; color: #33c65a"],e,!1))}function x(e){return new URLSearchParams(window.location.search).get(e)}function U(e){var t=!1;return Array.from(document.getElementsByTagName("script")).forEach((function(n){n.getAttribute("src")===e&&(t=!0)})),t}function j(e,t,n){if(t.addEventListener)t.addEventListener(e,n,!1);else{if(!t.attachEvent)throw Error("No event listener found!");t.attachEvent("on".concat(e),n)}}var V=function(e,t){if(t){var n=t.options.dimensions.filter((function(e){return 300===e[0]&&600===e[1]})).length>0,i=t.options.dimensions.filter((function(e){return 300===e[0]&&(300===e[1]||250===e[1])})).length>0;if(n&&i){var o=document.getElementById(t.elementID);if(!t.isSemiStickyUnit||300!==e.Width||300!==e.Height&&250!==e.Height)t.isSemiStickyUnit&&e.Height>300&&"assembly-semi-sticky-container"===o.parentElement.getAttribute("class")&&(o.style.position="relative",o.style.marginTop="0px");else{var r=null;"assembly-semi-sticky-container"!==o.parentElement.getAttribute("class")&&((r=document.createElement("div")).setAttribute("class","assembly-semi-sticky-container"),r.style.display="block",r.style.width="300px",r.style.height="600px",r.style.marginLeft="auto",r.style.marginRight="auto",r.style.borderTop="1px solid transparent",r.style.borderBottom="1px solid transparent",o.parentNode.insertBefore(r,o),r.appendChild(o))}}}else N("slot is not defined")},q=0,G=x("aversion");if(G){var F="use_local_bundle"===G?"http://localhost:9000/wana.js":"https://js.media-lab.ai/wana."+G+".js";if(!U(F))throw function e(t){if(!document.body)return console.error("ana-web is triying to load another version before there is a body to append to. Retry [".concat(G,"][").concat(q,"]")),(q+=1)<10?void setTimeout((function(){e(t)}),50):void console.error("Ana Web exhausted retries while waiting for document.body . Retry [".concat(G,"][").concat(q,"]"));U(t)||function(e,t){if(!U(e)){var n=document.createElement("script");n.async=t,n.src=e,document.body.appendChild(n)}}(t,!0)}(F),Error("Ana Version parameter found, stoping current script to load requested version [".concat(G,"]"))}var H,W,J,z=function(){function e(){}return e.prototype.setItem=function(e,t){this[e]=t},e.prototype.getItem=function(e){var t=this[e];return t||(t=null),t},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){var e=this;Object.keys(this).forEach((function(t){delete e[t]}))},e.prototype.key=function(e){throw Error("not implemented (index = ".concat(e))},Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this).length},enumerable:!1,configurable:!0}),e}();window.anaStorage=P((function(){return window.localStorage}))?window.localStorage:new z,window.anaSessionStorage=P((function(){return window.sessionStorage}))?window.sessionStorage:new z,function(e){e[e.GOOGLE=0]="GOOGLE",e[e.ANA=1]="ANA"}(H||(H={})),function(e){e[e.VIDEO_JS=0]="VIDEO_JS",e[e.HTML5=1]="HTML5"}(W||(W={}));var K=null,$=function(e){var t,n=document.activeElement;if(n&&"IFRAME"===n.tagName&&K!==n&&(K=n,document.activeElement.parentNode&&"DIV"===document.activeElement.parentNode.nodeName)){var i=document.activeElement.parentNode,o="";i.parentNode&&"DIV"===i.parentNode.nodeName&&i.parentNode.getAttribute("id")?o=i.parentNode.getAttribute("id"):(i,o=i.getAttribute("id")),N("ANA Ad Click detected on adUnit",o);var r=null===(t=e.getBannerSlot(o))||void 0===t?void 0:t.currentBid;r?(N("Rendering ClickPixels for adUnit",o),r.renderClickPixels()):N("Failed Rendering ClickPixels for adUnit",o,"because bid is missing")}},X=function(){function e(e){var t=this;Object.keys(e).forEach((function(n){var i=function(e,t){void 0===t&&(t=!1);var n=e.replace(/([-_]id$)|([-_][a-z])/gi,(function(e){return e.toUpperCase().replace("-","").replace("_","")}));return"id"===n&&(n="ID"),n&&t&&(n=n[0].toUpperCase()+n.slice(1)),n}(n,!0);t[i]=e[n]})),this.LastNomination=0}return e.prototype.toCustomJSON=function(){var e=this,t={};return Object.keys(this).forEach((function(n){var i=n.replace(/\.?([A-Z]+)/g,(function(e,t){return"_"+t.toLowerCase()})).replace(/^_/,"");t[i]=e[n]})),t},e.prototype.renderPixels=function(e){var t=this.BidID;e.forEach((function(e){var n=document.createElement("img");n.setAttribute("data-bid-id",t),n.setAttribute("src",e),n.setAttribute("width","1"),n.setAttribute("height","1"),document.body.appendChild(n)}))},e.prototype.renderImpressionPixels=function(){this.ImpressionPixels&&this.renderPixels(this.ImpressionPixels)},e.prototype.renderViewPixels=function(){this.ViewPixels&&this.renderPixels(this.ViewPixels)},e.prototype.renderClickPixels=function(){this.ClickPixels&&this.renderPixels(this.ClickPixels)},e.prototype.removeImpressionPixels=function(){for(var e=[],t=document.getElementsByTagName("img"),n=0;n<t.length;n++){var i=t[n];i.getAttribute("data-bid-id")===String(this.BidID)&&e.push(i)}e.forEach((function(e){return document.body.removeChild(e)}))},e.prototype.isExpired=function(){if(void 0===this.Expires)return!1;var e=this.Expires-this.Received,t=new Date(this.Expires);this.ClientReceived&&(t=new Date(this.ClientReceived+e));var n=new Date;return t.getTime()<n.getTime()},e}(),Z=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&+e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},Q=function(){return"y"===new URLSearchParams(window.location.search).get("tracing")},Y=function(){var e=anaStorage.getItem(d);return e||(e=Z(),anaStorage.setItem(d,e)),Q()?"tr"+e:e},ee=function(e,t){anaStorage.setItem(v+e,t)};var te=function(e){var t=localStorage.getItem(b),n=null;try{if(t)return n=JSON.parse(t),Object.keys(n.bidders).forEach((function(e){n.bidders[e].sync_date<Date.now()-864e5&&(n.bidders[e].sync_date=Date.now(),n.bidders[e].sync_counter=0)})),n}catch(e){}var i={group:-1,bidders:{}};return e?(Object.keys(e).forEach((function(e){i.bidders[e]={sync_counter:-1,sync_date:Date.now()}})),i):i},ne=function(e,t){var n,i,o=Object.keys(e).length,r=Math.ceil(o/6);-1===t.group?t.group=(n=0,i=r-1,Math.floor(Math.random()*(i-n+1)+n)):(t.group++,t.group>r-1&&(t.group=0));var a=6*t.group,s=a+6;s>o&&(s=o);var d=Object.keys(e).slice(a,s);d.forEach((function(e){void 0!==t.bidders[e]&&(t.bidders[e].sync_counter++,t.bidders[e].sync_counter>3&&(t.bidders[e].sync_counter=3))})),d=d.filter((function(e){return void 0!==t.bidders[e]&&t.bidders[e].sync_counter<3}));var c={};return d.forEach((function(t){c[t]=e[t]})),[c,t]},ie=function(e,t,n){if(!t)throw Error("propertyId is required");var i,o;(i=te(null),0===Object.keys(i.bidders).length||0!==Object.keys(i.bidders).filter((function(e){return i.bidders[e].sync_counter<3})).length)?(N("Not all bidders synced, continuing"),void 0===window.syncRequestLastTime&&(window.syncRequestLastTime={}),void 0===window.syncRequestLastTime[window.location.href]&&(window.syncRequestLastTime[window.location.href]=0),(new Date).getTime()-window.syncRequestLastTime[window.location.href]<2500?N("We have already called resync before 2.5 seconds, rejecting the call until later"):(window.syncRequestLastTime[window.location.href]=(new Date).getTime(),N("Updating last resync timer"),o=t,window.ANAWebPropertyId=o,function(e){anaStorage.setItem(d,e)}(n),N("sending a syncing cookie request to doh"),be.UserSync.getUrls([],(function(e){if(200===e.status){if(""!==e.responseType&&"text"!==e.responseType)throw Error('incorrect response type "'.concat(e.responseType,'" from ').concat(e.responseURL));var t=JSON.parse(e.responseText),n=t.sync_urls,i=te(n),o=ne(n,i),r=o[0];!function(e){try{localStorage.setItem(b,JSON.stringify(e))}catch(e){}}(o[1]);var a=t.cookie_ids,s=a?Object.keys(a):null;N("got response from /doh/sync:",r,a),Object.keys(r).forEach((function(e){s&&-1!==s.indexOf(e)||ge(e,r[e])})),a&&Object.keys(a).forEach((function(e){var t=a[e];t&&ee(e,t)}))}})))):N("Already all synced, no need to resync cookies across bidders")};function oe(e){this.callCounter++,document.body?document.body.appendChild(e):this.callCounter<200&&setTimeout(oe.bind(this,e),50)}var re,ae,se,de,ce,le,ue,pe,he,ge=function(e,t){var n=k(),i=document.createElement("iframe");i.setAttribute("src",t),i.setAttribute("frameborder","0"),i.setAttribute("scrolling","no"),i.setAttribute("marginheight","0"),i.setAttribute("marginwidth","0"),i.setAttribute("TOPMARGIN","0"),i.setAttribute("LEFTMARGIN","0"),i.setAttribute("allowtransparency","true"),i.setAttribute("width","0"),i.setAttribute("height","0"),i.setAttribute("data-property-id",n),N("creating cookie syncing iframe for "+e,t),setTimeout(oe.bind({callCounter:0},i),0)};!function(e){e[e.PageLoadSoundOn=1]="PageLoadSoundOn",e[e.PageLoadSoundOff=2]="PageLoadSoundOff",e[e.ClickSoundOn=3]="ClickSoundOn",e[e.MouseOverSoundOn=4]="MouseOverSoundOn",e[e.EnterViewpointSoundOn=5]="EnterViewpointSoundOn",e[e.EnterViewpointSoundOff=6]="EnterViewpointSoundOff"}(re||(re={})),function(e){e[e.GenericPostRoll=-2]="GenericPostRoll",e[e.GenericMidRoll=-1]="GenericMidRoll",e[e.PreRoll=0]="PreRoll",e[e.MidRoll3Sec=3]="MidRoll3Sec",e[e.MidRoll5Sec=5]="MidRoll5Sec",e[e.MidRoll10Sec=10]="MidRoll10Sec",e[e.MidRoll15Sec=15]="MidRoll15Sec",e[e.MidRoll30Sec=30]="MidRoll30Sec",e[e.MidRoll60Sec=60]="MidRoll60Sec"}(ae||(ae={})),function(e){e[e.InStream=1]="InStream",e[e.InBanner=2]="InBanner",e[e.InArticle=3]="InArticle",e[e.InFeed=4]="InFeed",e[e.Interstitial=5]="Interstitial"}(se||(se={})),function(e){e[e.InStream=1]="InStream",e[e.Overlay=2]="Overlay"}(de||(de={})),function(e){e[e.OnVideoCompletion=1]="OnVideoCompletion",e[e.OnLeavingViewport=2]="OnLeavingViewport",e[e.OnLeavingViewportContinues=3]="OnLeavingViewportContinues"}(ce||(ce={})),function(e){e[e.Unknown=0]="Unknown",e[e.AboveTheFold=1]="AboveTheFold",e[e.Deprecated=2]="Deprecated",e[e.BelowTheFold=3]="BelowTheFold",e[e.Header=4]="Header",e[e.Footer=5]="Footer",e[e.Sidebar=6]="Sidebar",e[e.FullScreen=7]="FullScreen"}(le||(le={})),function(e){e[e.Vast10=1]="Vast10",e[e.Vast20=2]="Vast20",e[e.Vast30=3]="Vast30",e[e.Vast10Wrapper=4]="Vast10Wrapper",e[e.Vast20Wrapper=5]="Vast20Wrapper",e[e.Vast30Wrapper=6]="Vast30Wrapper",e[e.Vast40=7]="Vast40",e[e.Vast40Wrapper=8]="Vast40Wrapper",e[e.Daast10=9]="Daast10",e[e.Daast10Wrapper=10]="Daast10Wrapper"}(ue||(ue={})),function(e){e[e.Vpaid10=1]="Vpaid10",e[e.Vpaid20=2]="Vpaid20",e[e.Mraid1=3]="Mraid1",e[e.Ormma=4]="Ormma",e[e.Mraid2=5]="Mraid2",e[e.Mraid3=6]="Mraid3"}(pe||(pe={})),function(e){e[e.Streaming=1]="Streaming",e[e.Progressive=2]="Progressive",e[e.Download=3]="Download"}(he||(he={}));var fe=function(){var e=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){var o=n[i].trim();if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}(c);return e||(e=Z()),me(e),Q()?"tr"+e:e},me=function(e){!function(e,t,n){var i="";if(n){var o=new Date;o.setTime(o.getTime()+60*n*1e3),i="; expires="+o.toUTCString()}document.cookie=e+"="+(t||"")+i+"; path=/"}(c,e,30)},ye=function(e,t,n){var i,o=C().consentManager,r=C().getUserEmail(),a={ad_unit:e,auction_timeout:n,inventory_type:"web",additional_targeting:t,property_id:k(),opportunity_data:{platform:"web",connection_type:L()},site:{page:document.location.href,referer:document.referrer},matched_ids:{ids:(i={},Object.keys(anaStorage).forEach((function(e){0===e.indexOf(v)&&(i[e.slice(v.length)]=anaStorage.getItem(e))})),i)},consent:{tcfV2:o.tcfV2String,usPrivacyString:o.usPrivacyString},session_id:fe()};return r&&(a.opportunity_data.lr_envelope={identifier:r,identifierType:E}),a},ve=function(e,t,n,i,o,r,a,s,d){var c=ye(e,t,d);return c.video_delivery=he.Progressive,c.video_placement=n,c.video_playback_method=i,c.video_position=o,c.video_start_delay=r,c.video_width=a,c.video_height=s,c},be={BannerBids:{get:function(e,t,n,i,o){D("".concat(Ee(),"/wana/bids/request"),{uid:Y(),ad_unit:e},ye(e,t,n),(function(e){switch(e.status){case 200:var t=JSON.parse(e.responseText).bids||[];i({code:200,bids:t.map((function(e){return new X(e)}))});break;case m:var n=void 0;n=JSON.parse(e.responseText).message===y?y:e.status.toString(),i({code:m,bids:[],err_msg:n});break;default:0!==e.status&&console.error("HTTP error "+e.status),i({code:e.status,bids:[],err_msg:e.status.toString()})}}),o)},invalidate:function(e,t,n,i){N("invalidating bids for adUnitID ".concat(e,":"),t);var o=t.map((function(e){var t=e.toCustomJSON();return t.creative="",t.impression_pixels=[],t.view_pixels=[],t.click_pixels=[],t}));D("".concat(Ee(),"/wana/bids/invalidate"),{uid:Y(),ad_unit:e},{bids:o},n,i)}},VideoBids:{get:function(e,t,n,i,o,r,a,s,d,c,l){var u=ve(e,t,n,o,i,r,a,s,d);D("".concat(Ee(),"/wana/bids/request"),{uid:Y(),ad_unit:e},u,(function(t){switch(t.status){case 200:var n=JSON.parse(t.responseText);N("".concat(e," got video bid response from ANA"),n);var i=n.bids||[];c({code:200,fallback_vast_url:n.fallback_vast_url,bids:i.map((function(e){return new X(e)}))});break;case m:var o=void 0;o=(n=JSON.parse(t.responseText)).message===y?y:t.status.toString(),c({code:m,bids:[],fallback_vast_url:null,err_msg:o});break;default:0!==t.status&&console.error("HTTP error "+t.status),c({code:t.status,bids:[],fallback_vast_url:null,err_msg:t.status.toString()})}}),l)},vicEvent:function(e,t,n){var i=function(e){return e.split("").map((function(e){return e.charCodeAt(0).toString(16).padStart(2,"0")})).join("")}(Y()+":"+t);O("".concat(Ee(),"/ana/vics/video"),{event:e,bk:i,bid_id:n},null,console.warn)}},VMAP:{get:function(e,t,n,i,o,r,a,s,d,c,l){var u=ve(e,t,n,o,i,r,a,s,d);D("".concat(Ee(),"/vmap/request"),{uid:Y()},u,(function(t){switch(t.status){case 200:var n=JSON.parse(t.responseText);N("".concat(e," got video bid response from ANA"),n),c({code:200,tag_url:n.tag_url});break;case m:var i=void 0;i=(n=JSON.parse(t.responseText)).message===y?y:t.status.toString(),c({code:m,tag_url:null,err_msg:i});break;default:0!==t.status&&console.error("HTTP error "+t.status),c({code:t.status,tag_url:null,err_msg:t.status.toString()})}}),l)}},UserSync:{getUrls:function(e,t){var n=k();D("".concat("https://ads.assemblyexchange.com","/doh/sync"),{uid:Y(),property_id:n},{synced_ids:e},t)},doSync:function(e,t,n){O(t,null,n)}},Hertz:{impression:function(e,t){void 0===t&&(t="adserver"),N("reporting on bid ".concat(t," impression to hertz for ").concat(e));var n=k(),i=Y(),o=fe();O("".concat(Ee(),"/hertz/impression"),{uid:i,ad_unit_id:e,session_id:o,bid_id:t,property_id:n},null)}}},we=function(e,t){t&&(be.BannerBids.invalidate(e,[t],null,console.warn),t.renderImpressionPixels())},Ee=function(){return window.ana_staging||-1!==window.location.href.indexOf(u)?a.replace("https://","https://staging."):a},Ae=function(e){var t=e.getBoundingClientRect(),n=t.width*t.height,i=window.innerWidth||document.documentElement.clientWidth,o=window.innerHeight||document.documentElement.clientHeight;return Te(t,i,o)/n>=.5},Te=function(e,t,n){return(Math.min(t,e.right)-Math.max(0,e.left))*(Math.min(n,e.bottom)-Math.max(0,e.top))},Se=function(){return Se=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Se.apply(this,arguments)},Ie={adUnitID:"",format:e.HORIZONTAL,elementID:"",collapseBeforeFill:!1,collapseIfNoFill:!1,dimensions:null,baseTargeting:{},passThroughANA:!1,apsEnabled:!0,adServerRender:!0},_e=function(){function e(e,t){this.options=Se(Se({},Ie),t),this.anaWeb=e,this.adUnitID=this.options.adUnitID,this.elementID=this.options.elementID,this.dimensions=this.options.dimensions,this.baseTargeting=Se({},this.options.baseTargeting),this.passThroughANA=this.options.passThroughANA,this.apsEnabled=e.apsEnabled&&this.options.apsEnabled,this.adServerRender=this.options.adServerRender,this.isSemiStickyUnit=!!this.options.isSemiStickyUnit,this.refreshCount=0,this.currentBid=null}return e.prototype.updateBaseTargeting=function(e){this.baseTargeting=Se(Se({},this.baseTargeting),e)},e.prototype.fetchANABids=function(e,t){var n=this;if(!this.anaWeb.hasFocus()&&this.refreshCount>0)return N("prevent ad slot refresh - document not in focus"),this.anaWeb.eventsTracker.adAttemptAborted(this.adUnitID,"not-in-focus"),t&&t();if(this.refreshCount++,this.passThroughANA)e&&e([]);else{var i=Se(Se({},this.anaWeb.globalTargeting),this.baseTargeting),o=this.anaWeb,r=this.adUnitID;this.anaWeb.eventsTracker.adAttemptMade(r),be.BannerBids.get(this.adUnitID,i,o.auctionTimeout,(function(i){var a=[];switch(setTimeout((function(){n.anaWeb.syncUserCookies()}),1e3),i.code){case 200:a=i.bids,o.eventsTracker.adAttemptSucceded(r,a.length),a.length>0&&o.bidManager.addBids(a,r);break;case m:return i.err_msg===y&&(console.warn("#".concat(n.elementID," ").concat(r," ANA user reached fcap")),o.eventsTracker.adAttemptFailed(r,"fcap")),void(t&&t(i.err_msg))}e&&e(a)}),(function(t){0!==t.status&&console.error(t),o.eventsTracker.adAttemptFailed(r,"".concat(t.status)),e&&e([])}))}},e.prototype.fetchAPSBids=function(e,t){throw Error("method `fetchAPSBids` is not implemented")},e.prototype.updateTargeting=function(){},e.prototype.getTopBid=function(e){var t=this.anaWeb,n=this.adUnitID;return t.bidManager.getBid(n,e)},e.prototype.renderInElement=function(e,t,n){var i=this.adUnitID,o=this.anaWeb;this.currentBid=t,function(e,t,n){var i=document.getElementById(e);if(!i)throw Error("tried to render ad on missing element "+e);for(;i.firstChild;)i.removeChild(i.firstChild);"none"===i.style.display&&(i.style.display="inline-block",i.style.lineHeight="0px");var o=document.createElement("iframe");o.setAttribute("srcdoc",t.Creative),o.setAttribute("frameborder","0"),o.setAttribute("scrolling","no"),o.setAttribute("marginheight","0"),o.setAttribute("marginwidth","0"),o.setAttribute("TOPMARGIN","0"),o.setAttribute("LEFTMARGIN","0"),o.setAttribute("allowtransparency","true");var r=t.Width,a=t.Height;o.setAttribute("width","".concat(r)),o.setAttribute("height","".concat(a)),i.append(o),J||(J=setInterval((function(){return $(n)}),25))}(e,t,o),function(e,t,n){var i=!1,o=function(){i||(clearInterval(a),i=!0)},r=0,a=setInterval((function(){var i=document.getElementById(e);if(!i)return N("viewability monitor: missing element ".concat(e,". stopping monitor")),void o();Ae(i)?r++:r=0,50*r>=1e3&&(N("viewability monitor: viewed ".concat(e,". stopping monitor")),t.renderViewPixels(),n&&n(),o())}),50)}(e,t,(function(){n&&n()})),we(i,t),o.eventsTracker.slotRendered(this.adUnitID,t),o.bidManager.useBid(i,t.BidID)},e.prototype.alreadyRendered=function(){throw Error("unimplemented method: alreadyRendered")},e}();_e.prototype.toString=function(){return"ANASlot('".concat(this.adUnitID,"', '").concat(this.elementID,"')")};var De,Oe=(De=function(e,t){return De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},De(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}De(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Re=function(){return Re=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Re.apply(this,arguments)},Ce=function(e){function t(t,n){var i,o,r,a=e.call(this,t,n)||this;if(a.fetched=function(){N("fetched ".concat(a))},a.rendered=function(){N("rendered ".concat(a))},a.format=a.options.format,a.collapseBeforeFill=a.options.collapseBeforeFill,a.collapseIfNoFill=a.options.collapseIfNoFill,a.slot=null,a.currentBid=null,a.slotType=H.GOOGLE,a.attemptCount=0,a.resetRequestMgr(),a.anaWeb.lazyLoad)return a.fetchBids(),M()&&(a.addSlotEventListener("slotRequested",a.fetched),a.addSlotEventListener("slotOnload",a.rendered)),a;if(i=a.adUnitID,o=new RegExp(/\/(\d+)(\/([\.|A-Z|a-z|\d|_|\-|\*|â€œ|\!|\\|\(|\)])+)+\/*/),i.length>100||!o.test(i))throw Error("Invalid AdunitID format, ".concat(a));if(!function(e){if(!Array.isArray(e)||0===e.length)return!1;if(2!==e.length||Array.isArray(e[0])||Array.isArray(e[1])){for(var t=!0,n=0,i=e;n<i.length;n++){var o=i[n];Array.isArray(o)?2!==o.length||"number"!=typeof o[0]||"number"!=typeof o[1]?t=!1:parseInt(o[0].toString())===o[0]&&parseInt(o[1].toString())===o[1]||(t=!1):t=!1}return t}return!(!Number.isInteger(e[0])||!Number.isInteger(e[1]))}(a.dimensions))throw Error("Invalid Adunit size, should be an array of bidimensional integer arrays, or it can be one bidimesional array of integers, ".concat(a));if(r=a.elementID,!document.getElementById(r)||googletag.pubads&&googletag.pubads().getSlots().find((function(e){return e.getSlotElementId()===r})))throw Error("Invalid elementID, might not be present of the page or already been used by another adUnit, ".concat(a));return googletag.cmd.push((function(){a.registerSlot()})),a}return Oe(t,e),t.prototype.resetRequestMgr=function(){this.requestMgr={didDirectRender:!1,anaRequestComplete:!1,apsRequestComplete:!1,gptRefreshComplete:!1},this.currentBid=null},t.prototype.fetchAPSBids=function(e){var t=this;this.anaWeb.apsEnabled&&window.apstag.fetchBids({slots:[{slotID:this.elementID,slotName:this.adUnitID,sizes:this.dimensions}]},(function(n){googletag.cmd.push((function(){t.updateApsTargeting(),t.apsRequestCompleted()})),e&&e(n)}))},t.prototype.anaRequestCompleted=function(){this.requestMgr.anaRequestComplete=!0},t.prototype.apsRequestCompleted=function(){this.requestMgr.apsRequestComplete=!0},t.prototype.alreadyRendered=function(){return!!this.requestMgr.didDirectRender&&(this.requestMgr.didDirectRender=!1,!0)},t.prototype.maybeRenderBid=function(e){return!(!e||this.adServerRender&&!e.DirectRender)&&(V(e,this),this.requestMgr.didDirectRender=!0,this.renderInElement(this.elementID,e),!0)},t.prototype.removeSlot=function(){var e=this;googletag.cmd.push((function(){var t=e.slot;googletag.destroySlots([t]),e.slot=null,document.getElementById(e.elementID).innerHTML=null}));var t=this.anaWeb,n=t.createdSlots.indexOf(this);-1!==n&&t.createdSlots.splice(n,1)},t.prototype.setAdServerRender=function(e){this.adServerRender=e},t.prototype.updateAnaTargeting=function(){var e=this,t=this.getTopBid(!0),n=this.slot,i=this.baseTargeting;if(t){if(this.currentBid=t,this.maybeRenderBid(t))return;null===n?(N("updateTargeting - register slot for ".concat(this)),this.registerSlot(t.Targeting)):Object.keys(Re(Re({},i),t.Targeting)).forEach((function(i){N("updateTargeting - set targeting ".concat(i,", ").concat(t.Targeting[i]," for ").concat(e)),n.setTargeting(i,t.Targeting[i])}))}else null===n&&(N("updateTargeting - register slot with no bid for ".concat(this)),this.registerSlot());this.updateRefreshCountTargeting()},t.prototype.updateApsTargeting=function(){window.apstag.setDisplayBids()},t.prototype.bidRequestReturned=function(e){return void 0===e&&(e=!0),!!this.requestMgr.anaRequestComplete&&(this.apsEnabled?!!this.requestMgr.apsRequestComplete&&(e&&this.refreshGPTSlot(),!0):(e&&this.refreshGPTSlot(),!0))},t.prototype.refreshGPTSlot=function(){var e=this;if(this.requestMgr.didDirectRender)return N("refreshGPTSlot, skipping since slot was rendered directly"),console.warn("resync all bidders from direct render"),void setTimeout((function(){e.anaWeb.syncUserCookies()}),1e3);this.requestMgr.gptRefreshComplete?N("refreshGPTSlot, skipping since slot is already refreshed"):(this.requestMgr.gptRefreshComplete=!0,this.currentBid&&this.anaWeb.eventsTracker.targetingSent(this.adUnitID),this.adServerRender&&googletag.cmd.push((function(){e.updateRefreshCountTargeting(),N("Calling GAM refresh for ",e),googletag.pubads().refresh([e.slot]),console.warn("resync all bidders from single slot"),setTimeout((function(){e.anaWeb.syncUserCookies()}),1e3)})))},t.prototype.refresh=function(e){var t=this;this.slot&&googletag.cmd.push((function(){t.slot.clearTargeting()})),this.resetRequestMgr();if(this.apsEnabled){this.fetchAPSBids((function(e){N("APS responded with bids for ".concat(t),e),googletag.cmd.push((function(){t.requestMgr.gptRefreshComplete||t.updateApsTargeting(),t.apsRequestCompleted(),t.bidRequestReturned()}))}))}this.fetchANABids((function(n){N("ANA responded with bids for ".concat(t),n),e&&e(n),googletag.cmd.push((function(){t.requestMgr.gptRefreshComplete||t.updateAnaTargeting(),t.anaRequestCompleted(),t.bidRequestReturned()}))}),(function(){N("ANA responded with NO bids for ".concat(t)),e&&e([]),googletag.cmd.push((function(){t.requestMgr.gptRefreshComplete||t.updateAnaTargeting(),t.anaRequestCompleted(),t.bidRequestReturned()}))})),setTimeout(this.refreshGPTSlot.bind(this),this.anaWeb.auctionTimeout+500)},t.prototype.registerSlot=function(e){var t=this;N("registerSlot - define slot for ".concat(this));var n=this,i=n.dimensions,o=n.format,r=n.collapseBeforeFill,a=n.collapseIfNoFill,s=n.adUnitID,d=n.elementID,c=n.baseTargeting,l=this.prepareDimensions(i,o);this.slot=googletag.defineSlot(s,l,d);var u=this.slot;this.addSlotEventListener("impressionViewable",(function(e){t.currentBid?(N("Rendering ViewPixels for ".concat(t.adUnitID),e),t.currentBid.renderViewPixels()):N("Ignoring ViewPixels on AdUnit since it does not have a currentBid on ",t.adUnitID)})),u.setCollapseEmptyDiv(r,a);var p=Re(Re({},c),e);p&&Object.keys(p).length&&Object.keys(p).forEach((function(e){N("registerSlot - set targeting ".concat(e,", ").concat(p[e]," for ").concat(t)),u.setTargeting(e,p[e])})),u.addService(googletag.pubads()),googletag.display(d)},t.prototype.addSlotEventListener=function(e,t){var n=this.elementID;googletag.cmd.push((function(){googletag.pubads().addEventListener(e,(function(e){e.slot.getSlotElementId()===n&&t(e)}))}))},t.prototype.updateRefreshCountTargeting=function(){this.slot.getTargetingKeys&&void 0===this.slot.getTargetingKeys().find((function(e){return"mlrf"===e}))&&(this.attemptCount++,this.slot.setTargeting("mlrf",this.attemptCount.toString()))},t.prototype.prepareDimensions=function(e,t){return e&&e.length?e:r[t]||[]},t.prototype.fetchBids=function(){var e=this;this.fetchANABids((function(t){N("fetchBids - ANA responded with bids for ".concat(e),t),googletag.cmd.push((function(){e.updateAnaTargeting(),e.anaRequestCompleted()}))}),(function(t){throw Error("".concat(e.slot," error getting ANA bids: ").concat(t))})),this.apsEnabled&&this.fetchAPSBids((function(t){N("fetchBids - APS responded with bids for ".concat(e),t),googletag.cmd.push((function(){e.apsRequestCompleted()}))}))},t}(_e);Ce.prototype.toString=function(){return"BannerSlot('".concat(this.adUnitID,"', '").concat(this.elementID,"')")};var ke=function(){function e(e,t,n,i,o){this.playerType=e,this.adUnitID=i,this.targeting=o,this.adsManagerLoadedCustomCbk=t,this.videoPlayerID=n,this.html5Player=document.getElementById(n),this.initAds()}return e.prototype.initAds=function(){throw new Error("must be implemented by child class")},e.prototype.anaBidRequest=function(e,t){var n=this;e((function(e){if(e.includes("bids=&")&&!t)throw Error("did not receive ANA bid and ad server render disabled");n.imaInit(e)}),(function(e){console.warn("".concat(n.videoPlayerID," error getting ANA bids: ").concat(e))}))},e.prototype.imaInit=function(e){throw new Error("must be implemented by child class")},e.prototype.vastUrlAndVideoSrc=function(e){N("".concat(this.videoPlayerID," imaInit"));var t,n=(t=window.ana_vast)||(-1!==window.location.href.indexOf("ana_vast=")&&(t=S(window.location.href).searchParams.get(l))?t:"");if(n||(n=e),n){var i=this.html5Player.currentSrc;if(!i&&""!==i)throw Error("".concat(this.videoPlayerID," does not have a valid src"));return N("".concat(this.videoPlayerID," vast used: ").concat(n,", src: ").concat(i)),{videoVastUrl:n,videoSrc:i}}N("".concat(this.videoPlayerID," we don't have an ad to show"))},e.prototype.adsManagerLoadedCallback=function(e){throw new Error("must be implemented by child class")},e.prototype.addDefaultListeners=function(){var e=this,t=window.google;this.adsManagerLoadedCustomCbk&&this.adsManagerLoadedCustomCbk(this.html5Player,this.playerType,this.adsManager);var n=[t.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,t.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,t.ima.AdEvent.Type.CLICK,t.ima.AdEvent.Type.VIDEO_CLICKED,t.ima.AdEvent.Type.VIDEO_ICON_CLICKED,t.ima.AdEvent.Type.STARTED,t.ima.AdEvent.Type.AD_PROGRESS,t.ima.AdEvent.Type.AD_BUFFERING,t.ima.AdEvent.Type.IMPRESSION,t.ima.AdEvent.Type.PAUSED,t.ima.AdEvent.Type.RESUMED,t.ima.AdEvent.Type.FIRST_QUARTILE,t.ima.AdEvent.Type.MIDPOINT,t.ima.AdEvent.Type.THIRD_QUARTILE,t.ima.AdEvent.Type.COMPLETE,t.ima.AdEvent.Type.DURATION_CHANGE,t.ima.AdEvent.Type.USER_CLOSE,t.ima.AdEvent.Type.LOADED,t.ima.AdEvent.Type.ALL_ADS_COMPLETED,t.ima.AdEvent.Type.SKIPPED,t.ima.AdEvent.Type.LINEAR_CHANGED,t.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,t.ima.AdEvent.Type.AD_METADATA,t.ima.AdEvent.Type.AD_BREAK_READY,t.ima.AdEvent.Type.LOG,t.ima.AdEvent.Type.VOLUME_CHANGED,t.ima.AdEvent.Type.VOLUME_MUTED,t.ima.AdEvent.Type.INTERACTION],i=function(){var t;t=e.adUnitID,be.Hertz.impression(t)};this.adsManager.addEventListener(t.ima.AdEvent.Type.IMPRESSION,i),this.adsManager.addEventListener(t.ima.AdEvent.Type.IMPRESSION,(function(){return e.adsManager.removeEventListener(t.ima.AdEvent.Type.IMPRESSION,i)}));for(var o=0;o<n.length;o++)this.adsManager.addEventListener(n[o],this.onAdEvent.bind(this)),N("".concat(this.videoPlayerID," bind ").concat(n[o]," ad event"))},e.prototype.onAdEvent=function(e){void 0===e&&(e={});var t=window.google,n=e.type;n!==t.ima.AdEvent.Type.AD_PROGRESS&&N("".concat(this.videoPlayerID," ad event: ").concat(n))},e}(),Pe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Me=function(e){function t(t,n,i,o){var r=e.call(this,W.VIDEO_JS,t,n,i,o)||this;return r.toggleOverlayedBtnContainer=function(){r.overlayedBtnContainer&&(r.overlayedBtnContainer.hidden=!r.overlayedBtnContainer.hidden)},r.onComplete=function(){r.adPlaying=!1},r.onStarted=function(){r.adPlaying=!0},r.onSkipped=function(){r.adPlaying=!1,r.adDisplayContainer.destroy(),r.html5Player.play()},r.onContentPauseRequested=function(){r.adPlaying=!0,r.html5Player.pause()},r.onContentResumeRequested=function(){r.adPlaying=!1,r.html5Player.play()},r.onAdLoaded=function(e){e.getAd().isLinear()||r.html5Player.play()},N("initializing IMAManagerHTML5 for",n),r.adPlaying=!1,r}return Pe(t,e),t.prototype.initAds=function(){var e=this,t=window.google;if(!this.html5Player)throw Error("internal videojs element was not found on the page using id=".concat(this.videoPlayerID,", this is probably because this was initialized before videojs was ready"));if(t){this.overlayedBtnContainer=document.createElement("div"),this.overlayedBtnContainer.classList.add("ana-ad-overlay"),this.overlayedBtnContainer.id=this.videoPlayerID+"_ana_ad_overlay";var n=document.createElement("div");n.classList.add("ana-ad-container"),n.id=this.videoPlayerID+"_ana_ad_container",this.html5Player.after(this.overlayedBtnContainer,n),this.adDisplayContainer=new t.ima.AdDisplayContainer(n,this.html5Player),this.adsLoader=new t.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.addEventListener(t.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.adsManagerLoadedCallback.bind(this),!1),this.adsLoader.addEventListener(t.ima.AdErrorEvent.Type.AD_ERROR,console.error,!1),this.html5Player.onended=this.adsLoader.contentComplete,window.addEventListener("resize",(function(){if(e.adsManager){var n=e.html5Player.clientWidth,i=e.html5Player.clientHeight;e.adsManager.resize(n,i,t.ima.ViewMode.NORMAL)}}))}else console.error("Google SDK not found.")},t.prototype.imaInit=function(e){if(e&&""!==e){var t=window.google,n=this.vastUrlAndVideoSrc(e).videoVastUrl;this.adsManager&&this.adsManager.destroy(),this.adsLoader.contentComplete();var i=new t.ima.AdsRequest;i.adTagUrl=n,i.linearAdSlotWidth=640,i.linearAdSlotHeight=480,i.nonLinearAdSlotWidth=640,i.nonLinearAdSlotHeight=150,i.forceNonLinearFullSlot=!0,i.omidAccessModeRules={},i.omidAccessModeRules[t.ima.OmidVerificationVendor.OTHER]=t.ima.OmidAccessMode.FULL,this.adsLoader.requestAds(i),this.overlayedBtnContainer.addEventListener("click",this.onOverlayedBtnContainerClick.bind(this)),this.overlayedBtnContainer.addEventListener("touchend",this.onOverlayedBtnContainerClick.bind(this))}},t.prototype.onOverlayedBtnContainerClick=function(e){e.preventDefault(),this.adPlaying?this.adsManager.resume():this.playAds(),this.toggleOverlayedBtnContainer()},t.prototype.playAds=function(){var e=window.google;this.adDisplayContainer&&this.adDisplayContainer.initialize(),this.html5Player.load();try{var t=this.html5Player.getBoundingClientRect(),n=t.width,i=t.height;this.adsManager.init(n,i,e.ima.ViewMode.NORMAL),this.adsManager.addEventListener(e.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested),this.adsManager.addEventListener(e.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested),this.adsManager.addEventListener(e.ima.AdEvent.Type.LOADED,this.onAdLoaded),this.adsManager.addEventListener(e.ima.AdEvent.Type.STARTED,this.onStarted),this.adsManager.addEventListener(e.ima.AdEvent.Type.SKIPPED,this.onSkipped),this.adsManager.addEventListener(e.ima.AdEvent.Type.COMPLETE,this.onComplete),this.adsManager.addEventListener(e.ima.AdEvent.Type.PAUSED,this.toggleOverlayedBtnContainer),this.adsManager.start()}catch(e){this.html5Player.play()}},t.prototype.adsManagerLoadedCallback=function(e){N("".concat(this.videoPlayerID," AdsManager loaded"));var t=window.google,n=new t.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.uiElements=[t.ima.UiElements.AD_ATTRIBUTION,t.ima.UiElements.COUNTDOWN],this.adsManager=e.getAdsManager(this.html5Player,n),this.addDefaultListeners()},t}(ke),Be=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Le=function(e){function t(t,n,i,o){var r=e.call(this,W.VIDEO_JS,t,n,i,o)||this;return N("initializing IMAManagerVideoJS for",n),navigator.userAgent.match(/iPad|Android/i)&&r.html5Player.hasAttribute("controls")&&r.html5Player.removeAttribute("controls"),r.overlayedBtnContainer=document.getElementById(n),r}return Be(t,e),t.prototype.initAds=function(){var e,t=window.videojs,n=window.google;if(!t)throw new Error("VideoJS not detected, dependency was not added correctly");if(n){if(this.html5Player=document.getElementById(this.videoPlayerID+"_html5_api"),!this.html5Player)throw Error("internal videojs element was not found on the page using id=".concat(this.videoPlayerID,", this is probably because this was initialized before videojs was ready"));this.videoJSPlayer=t(this.videoPlayerID);var i={id:this.videoPlayerID,adLabel:"Advertisement",disableAdControls:!1,showControlsForJSAds:!0,adsManagerLoadedCallback:this.adsManagerLoadedCallback.bind(this),omidVendorAccess:(e={},e[n.ima.OmidVerificationVendor.OTHER]=n.ima.OmidAccessMode.FULL,e)};this.videoJSPlayer.ima?this.videoJSPlayer.ima(i):console.error("IMA not found for video JS")}else console.error("Google SDK not found.")},t.prototype.imaInit=function(e){if(e&&""!==e){var t=this.vastUrlAndVideoSrc(e),n=t.videoVastUrl,i=t.videoSrc;this.videoJSPlayer.ima.setContentWithAdTag(i,n,!1),this.videoJSPlayer.ima.requestAds(),this.boundBidRequestClick=this.onOverlayedBtnContainerClick.bind(this),this.boundBidRequestTouch=this.onOverlayedBtnContainerClick.bind(this),this.overlayedBtnContainer.addEventListener("click",this.boundBidRequestClick),this.overlayedBtnContainer.addEventListener("touchend",this.boundBidRequestTouch)}},t.prototype.onOverlayedBtnContainerClick=function(e){e.preventDefault(),this.videoJSPlayer.ima.initializeAdDisplayContainer(),this.overlayedBtnContainer.removeEventListener("click",this.boundBidRequestClick),this.overlayedBtnContainer.removeEventListener("touchend",this.boundBidRequestTouch)},t.prototype.adsManagerLoadedCallback=function(){N("".concat(this.videoPlayerID," AdsManager loaded")),this.adsManager=this.videoJSPlayer.ima.getAdsManager(),this.addDefaultListeners()},t}(ke),Ne=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),xe=function(){return xe=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xe.apply(this,arguments)},Ue=function(e){function t(t,n,i){var o,r=e.call(this,t,i)||this;if(r.playerType=n,void 0===i.startDelay)throw Error("startDelay must be specified for video ad slots");if(i.startDelay<-2)throw Error("startDelay must be valid");if(void 0===i.adPlacement)throw Error("adPlacement must be specified for video ad slots");if(void 0===i.adPosition)throw Error("adPosition must be specified for video ad slots");if(i.adPosition<1||i.adPosition>7)throw Error("adPosition must be valid not Unknown");if(!i.playbackMethod||i.playbackMethod<1||i.playbackMethod>6)throw Error("playbackMethod must be specified for video ad slots");if(r.startDelay=i.startDelay,r.adPlacement=i.adPlacement,r.adPosition=i.adPosition,r.playbackMethod=i.playbackMethod,r.wrapperDiv=document.getElementById(r.elementID),r.dimensions&&0===r.dimensions.length)throw new Error("".concat(r.elementID," dimensions must be either omitted or have at least one element in the array"));switch(r.playerType){case W.VIDEO_JS:o=Le;break;case W.HTML5:o=Me;break;default:throw Error("unsupported video player type: ".concat(n))}return r.videoManager=new o(i.adsManagerLoadedCbk,r.elementID,r.adUnitID,r.baseTargeting),r.videoManager.anaBidRequest(r.fetchANAVMAP.bind(r),r.adServerRender),r}return Ne(t,e),t.prototype.fetchANAVMAP=function(e,t){var n=this,i=this.currentDimensions(),o=xe(xe({},this.anaWeb.globalTargeting),this.baseTargeting);be.VMAP.get(this.adUnitID,o,this.adPlacement,this.adPosition,this.playbackMethod,this.startDelay,i[0][0],i[0][1],this.anaWeb.auctionTimeout,(function(i){var o="";switch(i.code){case 200:o=i.tag_url,n.anaWeb.eventsTracker.adAttemptSucceded(n.adUnitID,0);break;case m:return void(i.err_msg===y?console.warn("#".concat(n.elementID," ").concat(n.adUnitID," ANA user reached fcap")):(n.anaWeb.eventsTracker.adAttemptFailed(n.adUnitID,"fcap"),t&&t(i.err_msg)))}n.adServerRender||(o+="&ad_server_render=0"),e&&e(o)}),(function(e){0!==e.status&&console.error(e),n.anaWeb.eventsTracker.adAttemptFailed(n.adUnitID,e.status.toString()),t(e.status.toString())})),this.anaWeb.eventsTracker.adAttemptMade(this.adUnitID)},t.prototype.fetchAPSBids=function(e,t){},t.prototype.currentDimensions=function(){var e;if(this.dimensions)e=this.dimensions;else{var t=this.playerDimensions();e=[[t.w,t.h]]}if(0===e.length||2!==e[0].length)throw new Error("".concat(this.elementID," final dimensions are not valid: ").concat(e));return e},t.prototype.playerDimensions=function(){var e=this.wrapperDiv.getBoundingClientRect(),t=Math.floor(e.width),n=Math.floor(e.height);if(0===t||0===n)throw Error("".concat(this.elementID," wrong video ad slot dimensions: ").concat(t,"x").concat(n));return{w:t,h:n}},t}(_e);Ue.prototype.toString=function(){return"VideoSlot('".concat(this.adUnitID,"', ").concat(this.playerType,", '").concat(this.elementID,"')")};var je,Ve=function(){function e(e){if(this.anaWeb=e,window.addEventListener)window.addEventListener("message",this.handleMessage.bind(this),!1),window.addEventListener("unload",(function(){e&&e.eventsTracker&&e.eventsTracker.pageviewExit()}));else{if(!window.attachEvent)throw Error("No event listener found!");window.attachEvent("onmessage",this.handleMessage.bind(this))}}return e.prototype.handleMessage=function(e){if(e&&(a=e.origin,g.some((function(e){return e.test(a)})))&&e.data&&e.data.bidID){var t=e.data,n=t.adUnitID,i=t.bidID,o=this.anaWeb.bidManager.getBidToRender(n,i);if(o){var r=this.anaWeb.createdSlots.find((function(e){return e.adUnitID===n}));V(o,r),e.source?e.source.postMessage(JSON.stringify(o),e.origin):console.error("e.source is not available in this context"),we(n,o),this.anaWeb.eventsTracker.slotRendered(n,o)}}var a;e&&function(e){return f.some((function(t){return t.test(e)}))}(e.origin)&&e.data&&e.data.msgType&&"cookieSyncingSuccess"===e.data.msgType&&(N("synced cookie message event for ".concat(e.data.bidderId,", id=").concat(e.data.partnerUid)),ee(e.data.bidderId,e.data.partnerUid))},e}(),qe=function(){return qe=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qe.apply(this,arguments)},Ge={enableSingleRequest:!1,globalTargeting:{},sandboxIframe:!1,collapseEmptyDivs:!1,enableLazyLoad:!1,lazyLoadOptConfig:{fetchMarginPercent:800,renderMarginPercent:400,mobileScaling:3}},Fe=function(e,t){if(void 0===t&&(t=null),window.googletag&&void 0!==window.googletag.pubads)throw new Error("attempting to initialize ANA sdk with pre-initialized gpt integration. aborting");var n;!function(e){document.body||console.error("loadGPTTagJS called before there is a body to append to");var t=document.createElement("script");t.async=!0,t.defer=!0,t.src=p,document.body.appendChild(t),N("added GPT script on the page ".concat(p)),e&&e.eventsTracker&&e.eventsTracker.gptAdded()}(t);var i=(n=e?qe(qe({},Ge),e):Ge).enableSingleRequest,o=n.globalTargeting,r=n.sandboxIframe,a=n.collapseEmptyDivs,s=n.enableLazyLoad,d=n.lazyLoadOptConfig;window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],googletag.cmd.push((function(){t&&t.eventsTracker&&t.eventsTracker.gptLoaded(),i&&googletag.pubads().enableSingleRequest(),r&&googletag.pubads().setSafeFrameConfig({sandbox:!0}),a&&googletag.pubads().collapseEmptyDivs(),o&&Object.keys(o).length&&Object.keys(o).forEach((function(e){googletag.pubads().setTargeting(e,o[e])})),s?(console.log("lazy load enabled",d),googletag.pubads().enableLazyLoad(d)):googletag.pubads().disableInitialLoad(),googletag.enableServices(),window.addEventListener("blur",(function(){"IFRAME"===document.activeElement.nodeName?(We(t),Je(t)):He=null})),window.addEventListener("focus",(function(){He=null}))}))},He=null,We=function(e){var t=document.activeElement;if(t&&"IFRAME"===t.tagName&&He!==t&&(He=t,document.activeElement.parentNode&&"DIV"===document.activeElement.parentNode.nodeName)){var n=document.activeElement.parentNode,i=null,o="";n.parentNode&&"DIV"===n.parentNode.nodeName&&n.parentNode.getAttribute("id")?(i=n.parentNode,o=i.getAttribute("id")):(i=n,o=n.getAttribute("id")),googletag.pubads().getSlots().forEach((function(t){if(o===t.getSlotElementId()&&e){var n=e.getBannerSlot(o);n&&n.currentBid?(N("Rendering ClickPixels if available for adUnit",o),n.currentBid.renderClickPixels()):N("Ignoring click pixel on add since it does not have a currentBid on",o)}}))}},Je=function(e){setInterval((function(){We(e)}),25)};!function(e){e.GOOGLE="googletag"}(je||(je={}));var ze=function(){return ze=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ze.apply(this,arguments)},Ke={pubID:null,adServer:je.GOOGLE},$e=function(e){if(window.apstag)throw new Error("attempting to initialize ANA sdk with pre-initialized apt integration");!function(){function e(e,t){window.apstag._Q.push([e,t])}document.body||console.error("loadAPSTagJS called before there is a body to append to"),window.apstag={init:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e("i",t)},fetchBids:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e("f",t)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};var t=document.createElement("script");t.async=!0,t.src=h;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),N("added APS script on the page ".concat(h))}();var t=ze(ze({},Ke),e),n=t.pubID,i=t.adServer;if(!n)throw new Error("to fully enable amazon publisher tag integration you need to pass at least `pubID`");window.apstag.init({pubID:n,adServer:i})},Xe=new(function(){function e(){this._usPrivacyData=null,this._tcData=null}return Object.defineProperty(e.prototype,"tcData",{get:function(){return this._tcData},set:function(e){this._tcData=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tcfV2String",{get:function(){return this._tcData?this._tcData.tcString:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"usPrivacyData",{get:function(){return this._usPrivacyData},set:function(e){this._usPrivacyData=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"usPrivacyString",{get:function(){return this._usPrivacyData?this._usPrivacyData.uspString:null},enumerable:!1,configurable:!0}),e}()),Ze=function(){function e(e,t,n){void 0===e&&(e=0),this.count=e,this.timeoutInt=n,this.doneCallback=t}return e.prototype.add=function(e){void 0===e&&(e=1),this.count+=e},e.prototype.decrement=function(e){void 0===e&&(e=1),this.count=this.count-e,0===this.count&&(this.timeoutInt&&clearTimeout(this.timeoutInt),this.doneCallback())},e}(),Qe=function(){function e(){this.bidsByID={},this.bidsByAdUnit={},this.usedBidIDs={}}return e.prototype.addBids=function(e,t){var n=this,i=this,o=i.usedBidIDs,r=i.bidsByID,a=i.bidsByAdUnit,s=(0,i.adUnitKey)(t);e.forEach((function(e){var t=e.BidID;e.ClientReceived=(new Date).getTime(),n.getBidByID(t)||o[t]||(r[t]=e,a[s]?a[s].push(e):a[s]=[e])})),a[s].sort((function(e,t){return e.Value-t.Value}))},e.prototype.getBid=function(e,t){void 0===t&&(t=!1);var n=this.bidsByAdUnit,i=(0,this.adUnitKey)(e);if(n[i]&&n[i].length){n[i]=n[i].filter((function(e){return!e.isExpired()}));var o=n[i];if(!t)return s=o[o.length-1];for(var r=Date.now(),a=o.length-1;a>=0;a--){var s;if((s=o[a]).LastNomination<r-1e3)return s.LastNomination=r,s}}return null},e.prototype.getBidByID=function(e){return this.bidsByID[e]||null},e.prototype.getBidToRender=function(e,t){return this.usedBidIDs[t]?null:(this.useBid(e,t),this.getBidByID(t))},e.prototype.useBid=function(e,t){var n=this,i=n.usedBidIDs,o=n.bidsByAdUnit,r=(0,n.adUnitKey)(e);if(!i[t]&&void 0!==o&&void 0!==o[r]){var a=o[r].map((function(e){return e.BidID})).indexOf(t);-1!==a&&o[r].splice(a,1),i[t]=!0}},e.prototype.reset=function(){this.bidsByID={},this.bidsByAdUnit={},this.usedBidIDs={}},e.prototype.adUnitKey=function(e){var t=window.location.href;return"".concat(e,":").concat(t)},e}(),Ye="https://xeno-soswcrde4a-uc.a.run.app/events",et="ANAEventsCache";function tt(){N("ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ ANA Web SDK ".concat("2.5.0"," ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚")),N("dispatching anaReadyEvent"),document.dispatchEvent(new CustomEvent("ANAReady"))}var nt,it=function(e,t,n,i){var o=window.pageviewUID;void 0===window.pageviewUID&&(o=Z(),window.pageviewUID=o);var r={uid:Y(),session_id:fe(),event:n,app_id:e,wid:o,lib_version:t,screen_width:Math.floor(performance.now()),device:"web",extra_json:{time_since_page_load:Math.floor(performance.now())}};return i&&(r.impression_type=i.impression_type,r.impression_sub_type=i.impression_sub_type,r.domain=i.bidder,r.extra_json.reason=i.reason,r.extra_json.totalBids=i.totalBids,i.slot&&(r.cohort=i.slot),i.bid&&(r.object_id=i.bid.BidID,r.sizes="".concat(i.bid.Width,"x").concat(i.bid.Height),r.extra_json.placement_id=i.bid.PlacementID,r.extra_json.bid_id=i.bid.BidID,r.extra_json.bid_type=i.bid.BidType,r.domain=i.bid.BidderName,r.extra_json.bidder_name=i.bid.BidderName,r.extra_json.direct_render=i.bid.DirectRender,r.extra_json.floor=i.bid.Floor,r.extra_json.width=i.bid.Width,r.extra_json.height=i.bid.Height,r.extra_json.impression_type=i.bid.ImpressionType,r.extra_json.targeting=i.bid.Targeting,r.extra_json.value=i.bid.Value,r.cookie_creation_ts=i.bid.Value)),r},ot=function(){function e(e,t){var n=this;this.propertyID=e,this.libVersion=t,this.timeoutId=setInterval((function(){return n.tickTimer()}),1e3,this)}return e.prototype.tickTimer=function(){var e=this;this.timeoutId&&clearInterval(this.timeoutId),this.sendCachedEvents(),this.timeoutId=setInterval((function(){return e.tickTimer()}),1e3,this)},e.prototype.sendCachedEvents=function(){var e=anaStorage.getItem(et),t=null,n=[];if(e)try{n=JSON.parse(e)}catch(e){n=[]}n&&0!==n.length&&(window.XMLHttpRequest?t=new XMLHttpRequest:window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLHTTP")),t&&(t.onerror=console.warn,t.open("POST","https://xeno-soswcrde4a-uc.a.run.app/events"),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify({events:n})),anaStorage.setItem(et,"[]")))},e.prototype.sendBeaconEvent=function(e,t){void 0===t&&(t={}),navigator.sendBeacon&&navigator.sendBeacon(Ye,JSON.stringify({events:[it(this.propertyID,this.libVersion,e,t)]}))},e.prototype.trackEvent=function(e,t){void 0===t&&(t={});var n=anaStorage.getItem(et),i=[];if(n)try{i=JSON.parse(n)}catch(e){i=[]}i.push(it(this.propertyID,this.libVersion,e,t));var o=JSON.stringify(i);try{anaStorage.setItem(et,o),o.length>2097152&&this.sendCachedEvents()}catch(e){var r=i.pop();console.error("Cant add event: ".concat(r.event," to cache, max quota exceeded"))}this.timeoutId},e.prototype.anaLoaded=function(){this.trackEvent("ana_loaded")},e.prototype.gptAdded=function(){this.trackEvent("gpt_added")},e.prototype.gptLoaded=function(){this.trackEvent("gpt_loaded")},e.prototype.slotCreated=function(e,t){this.trackEvent("slot_created",{slot:e,impressionType:t})},e.prototype.adAttemptMade=function(e){this.trackEvent("ad_attempt_made",{slot:e})},e.prototype.adAttemptAborted=function(e,t){this.trackEvent("ad_attempt_aborted",{slot:e,reason:t})},e.prototype.adAttemptFailed=function(e,t){this.trackEvent("ad_attempt_failed",{slot:e,reason:t})},e.prototype.adAttemptSucceded=function(e,t){this.trackEvent("ad_attempt_succeeded",{slot:e,totalBids:t})},e.prototype.slotRendered=function(e,t){this.trackEvent("ana_bid_render",{slot:e,bid:t})},e.prototype.targetingSent=function(e){this.trackEvent("targeting_sent",{slot:e})},e.prototype.pageviewExit=function(){this.sendBeaconEvent("pageview_text")},e}(),rt=function(){return rt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rt.apply(this,arguments)},at=function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},st={slotEventsHandlers:{},gptOptions:{globalTargeting:{}},apsOptions:null,syncCookies:!0,resyncCookiesAfterTimeout:5e3,propertyId:window.location.hostname,videoOptions:null,lightMode:!1,userEmail:null,auctionTimeout:w},dt=function(){function e(t){void 0===t&&(t={}),this.createdSlots=[],this.createdGoogleSlots=[],this.createdVideoContainers=[];var n,i=rt(rt({},st),t),o=i.slotEventsHandlers,r=i.gptOptions,a=i.apsOptions,d=i.syncCookies,c=i.resyncCookiesAfterTimeout,l=i.propertyId,u=i.lightMode,p=i.auctionTimeout,h=i.userEmail;x("auctionTimeout")&&parseInt(x("auctionTimeout"))>0&&(n=parseInt(x("auctionTimeout"))),this.bidManager=new Qe,this.consentManager=Xe,this.slotEventsHandlers=o,this.syncCookies=d,this.resyncCookiesAfterTimeout=c,this.propertyId=l,this.apsEnabled=!!a,this.refreshedAllSlots=!1,this.globalTargeting=r.globalTargeting,this.lazyLoad=r.enableLazyLoad,this.lightMode=!!u,this.auctionTimeout=n||p,this.eventsTracker=new ot(this.propertyId,s),this.msgHandler=new Ve(this),this.userEmail=h,this.eventsTracker.anaLoaded(),window.ANAWebSDKInstance=this,this.setFocusListeners(),t.auctionTimeout||n?(t.auctionTimeout||n)&&N("Setting auctionTimeout to ".concat(this.auctionTimeout)):N("auctionTimeout wasn't provided, using default value: ".concat(w)),(this.auctionTimeout<500||this.auctionTimeout>4e3)&&(this.auctionTimeout=w,console.error("auctionTimeout is out of range (".concat(500," - ").concat(4e3,"), using default value: ").concat(w))),"__tcfapi"in window&&(N("GDPR - consent management framework was found on the page"),window.__tcfapi("getTCData",2,(function(e,t){t?(N("getTCData cbk success",e),Xe.tcData=e):N("getTCData cbk fail",e)}))),"__uspapi"in window&&(N("CCPA - consent management framework was found on the page"),window.__uspapi("getUSPData",1,(function(e,t){t?(N("getUSPData cbk success",e),Xe.usPrivacyData=e):N("getUSPData cbk fail",e)}))),void 0===this.globalTargeting.SDK&&e.version&&(this.globalTargeting.SDK=e.version),void 0===this.globalTargeting.domain&&"localhost"!==window.location.hostname&&(this.globalTargeting.domain=window.location.hostname),void 0===this.globalTargeting.auctionTimeout&&this.auctionTimeout&&(this.globalTargeting.auctionTimeout=this.auctionTimeout.toString()),this.uid=Y(),this.sessionId=fe(),this.syncCookies&&this.syncUserCookies(),this.lightMode||(a&&$e(a),Fe(r,this)),window.addEventListener&&window.addEventListener("scroll",this.onScroll.bind(this))}return e.prototype.setFocusListeners=function(){var e=this;this.internalHasFocus=document.hasFocus(),j("focus",window,(function(){e.internalHasFocus=!0})),j("blur",window,(function(){e.internalHasFocus=!1})),j("scroll",window,(function(){e.internalHasFocus=!0})),j("visibilitychange",window,(function(){e.internalHasFocus="visible"===document.visibilityState})),j("touchstart",window,(function(){e.internalHasFocus=!0}))},e.prototype.createSlot=function(e,t){var n=null;switch(e){case H.GOOGLE:this.lightMode&&N("making google banner slots in light mode seems sketchy"),n=new Ce(this,t),this.createdGoogleSlots.push(n);break;case H.ANA:this.lightMode||N("making a lightmode slot without the SDK in lightmode seems sketchy"),n=new _e(this,t);break;default:throw Error("Specified slot type is not supported: ".concat(e))}return this.eventsTracker.slotCreated(t.adUnitID,"banner"),this.createdSlots.push(n),n},e.prototype.createVideoSlot=function(e,t){var n=new Ue(this,e,t);return this.eventsTracker.slotCreated(t.adUnitID,"video"),this.createdVideoContainers.push(n),n},e.prototype.refreshAllGoogleSlots=function(){var e=this;if(this.lazyLoad)throw new Error("ANA Web SDK does not support refreshAllGoogleSlots when lazy loading is enabled");var t=this.waitGroup;this.refreshedAllSlots=!1;var n=this.createdGoogleSlots;if(null==t){var i=setTimeout(this.onBidsFetchTimeout.bind(this),3e3),o=n.filter((function(e){return e.apsEnabled})).length,r=n.length+o;t=new Ze(r,this.onBidsFetchSuccess.bind(this),i),this.waitGroup=t,n.forEach((function(e){e.slot&&googletag.cmd.push((function(){e.slot.clearTargeting()})),e.resetRequestMgr()})),n.forEach((function(n){n&&(n.fetchANABids((function(i){N("refreshAllSlots - ANA responded with bids for ".concat(n),i),googletag.cmd.push((function(){N("ANA BIDS - auction is already completed?",e.refreshedAllSlots),e.refreshedAllSlots||n.updateAnaTargeting(),n.anaRequestCompleted(),t.decrement()}))}),(function(){n.updateRefreshCountTargeting(),e.waitGroup=null})),n.apsEnabled&&n.fetchAPSBids((function(i){N("refreshAllSlots - APS responded with bids for ".concat(n),i),googletag.cmd.push((function(){N("APS BIDS - auction is already completed?",e.refreshedAllSlots),e.refreshedAllSlots||n.updateApsTargeting(),n.apsRequestCompleted(),t.decrement()}))})))})),setTimeout(this.onBidsFetchSuccess.bind(this),this.auctionTimeout+500)}else console.warn("calling refreshAllSlots too fast")},e.prototype.hasFocus=function(){return document.hasFocus()||this.internalHasFocus},e.prototype.refreshSubscribedBannerSlots=function(e,t){if(!this.hasFocus())return N("skipping auto refresh, document not in focus, trying later with slots:",e),void setTimeout(this.refreshSubscribedBannerSlots.bind(this,e,t),300);N("auto refreshing slots:",e),e.forEach((function(e){return e.refresh()})),setTimeout(this.refreshSubscribedBannerSlots.bind(this,e,t),t)},e.prototype.autoRefreshSlots=function(e,t,n){void 0===t&&(t=3e4),void 0===n&&(n=!1),N("subscribed slots for auto refresh:",e,"in",t,"ms, firstInstantRefresh=",n),n?this.refreshSubscribedBannerSlots(e,t):setTimeout(this.refreshSubscribedBannerSlots.bind(this,e,t),t)},Object.defineProperty(e,"version",{get:function(){return"2.5.0"},enumerable:!1,configurable:!0}),e.prototype.onBidsFetchTimeout=function(){N("[WARNING!!!]onBidsFetchTimeout, we got timeout before all bidders where completed"),this.onBidsFetchSuccess()},e.prototype.onBidsFetchSuccess=function(){var e=this;if(N("onBidsFetchSuccess, this.refreshedAllSlots = ",this.refreshedAllSlots),this.refreshedAllSlots)N("onBidsFetchSuccess, skipping since all slots were already refreshed");else{this.refreshedAllSlots=!0;var t=[];this.createdGoogleSlots.forEach((function(e){e.adServerRender&&!e.alreadyRendered()&&t.push(e.slot)})),0!==t.length?googletag.cmd.push((function(){e.waitGroup=null,N("Calling GAM refresh for all the slots"),googletag.pubads().refresh(t),N("resync all bidders from all slots"),setTimeout((function(){e.syncUserCookies()}),1e3)})):this.waitGroup=null}},e.prototype.updateGlobalTargeting=function(e){var t;this.globalTargeting=rt(rt({},this.globalTargeting),e),(t=this.globalTargeting)&&Object.keys(t).length&&googletag.cmd.push((function(){Object.keys(t).forEach((function(e){googletag.pubads().setTargeting(e,t[e])}))}))},e.prototype.syncUserCookies=function(){if(this.syncCookies){if(!this.propertyId)throw Error("propertyId is needed to initialize SDK");var e=k();ie(this.eventsTracker,e,this.uid)}},e.prototype.getBannerSlot=function(e){var t=null;return this.createdSlots.forEach((function(n){n.elementID!==e&&0!==e.indexOf(n.elementID)||(t=n)})),t},e.prototype.onScroll=function(){at([],document.querySelectorAll("div.assembly-semi-sticky-container"),!0).forEach((function(e){try{var t=e.children[0],n=e.getBoundingClientRect(),i=t.getBoundingClientRect().height;if(i>304)return t.style.position="relative",void(t.style.marginTop="0px");n.top<=0&&n.top>i-n.height?(t.style.position="fixed",t.style.top=0,t.style.bottom="auto",t.style.marginTop="0px"):n.top<0&&n.top<i-n.height?(t.style.position="relative",t.style.marginTop=n.height-i+"px"):(t.style.position="relative",t.style.marginTop="0px")}catch(e){console.error(e)}}))},e.prototype.setUserEmail=function(e){this.userEmail=e},e.prototype.getUserEmail=function(){return this.userEmail},e}();return function(e){e.VideoMp4="video/mp4",e.VideoOgg="video/ogg"}(nt||(nt={})),"loading"!==document.readyState?setTimeout(tt,0):document.addEventListener("DOMContentLoaded",tt),window.ANAWeb=dt,window.SlotTypeEnum=H,dt.SlotTypeEnum=H,Object.defineProperty(dt,"uid",{get:function(){return Y()}}),Object.defineProperty(dt,"sessionId",{get:function(){return fe()}}),dt.AdPosition=le,dt.ContentDeliveryMethod=he,dt.PlaybackCessationMode=ce,dt.PlaybackMethod=re,dt.StartDelay=ae,dt.VideoApiFramework=pe,dt.VideoLinearity=de,dt.VideoPlacementType=se,dt.VideoPlayerType=W,dt.VideoProtocol=ue,dt.Mime=nt,o})()));
// MediaLab Inc.
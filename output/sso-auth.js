"use strict";(function(){var domain=window.location.host.replace(/^.*?([\w\d\-]+\.[\w\d\:]+)\r?$/,"$1");var hostPrefix="//accounts.";var colon=domain.indexOf(":");if(colon>-1){domain=domain.substr(0,colon)}var cookieDomain=domain;var Helpers={getCookie:function(name,cookies){var domainCookies=cookies?cookies:document.cookie;function escape(s){return s.replace(/([.*+?\^${}()|\[\]\/\\])/g,"\\$1")}var match=domainCookies.match(RegExp("(?:^|;\\s*)"+escape(name)+"=([^;]*)"));return match?match[1]:null},deleteCookie:function(name,currentDocument){currentDocument.cookie=name+"=; Domain=."+cookieDomain+"; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"},getSsoDone:function(callback){var xhttp=new XMLHttpRequest;xhttp.onreadystatechange=function(){const responseText=xhttp.responseText===""?"{}":xhttp.responseText;const response=JSON.parse(responseText);callback(this.status,response)};xhttp.open("GET","https://sso.accounts.dowjones.com/auth/sso-status",true);xhttp.withCredentials=true;xhttp.send()}};var ssoFiredAt=Helpers.getCookie("sso_fired_at");var trackId=Helpers.getCookie("TR");if(!window.location.host.includes(".wsj.com")){if(!trackId&&!ssoFiredAt){var date=new Date;date.setTime(date.getTime()+10*60*1e3);document.cookie="sso_fired_at="+Date.now()+"; Domain=."+cookieDomain+"; Path=/; Expires="+date.toGMTString();Helpers.getSsoDone((status,response)=>{if(response&&response.sso=="done"){var login_url=hostPrefix+domain+"/login?target="+encodeURIComponent(window.location.href);window.location.replace(login_url)}})}}})();

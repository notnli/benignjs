(globalThis.__LOADABLE_LOADED_CHUNKS__=globalThis.__LOADABLE_LOADED_CHUNKS__||[]).push([[91469],{867130:e=>{e.exports={"yloca-pill":"yloca-pill__09f24__K5TO2","yloca-pill--gold":"yloca-pill--gold__09f24__djMc7","yloca-pill--blue":"yloca-pill--blue__09f24__Gf7z7"}},768749:e=>{e.exports={"yloca-pill":"yloca-pill__09f24__pZqj0","yloca-pill--gold":"yloca-pill--gold__09f24__JSSaY","yloca-pill--blue":"yloca-pill--blue__09f24__vojkj"}},145296:e=>{e.exports={reviewerName:"reviewerName__09f24__FjYSB"}},138583:e=>{e.exports={offscreen:"offscreen__09f24__CTmKb",abpDetectionPixel:"abpDetectionPixel__09f24__GV3KT"}},921686:e=>{e.exports={localAdUnit:"localAdUnit__09f24__t2USA",reviewCountText:"reviewCountText__09f24__CCFJQ",hovercard:"hovercard__09f24__yA9j5",infoWrapper:"infoWrapper__09f24__V4c16",businessName:"businessName__09f24__UnatA"}},554482:e=>{e.exports={businessName:"businessName__09f24__iTrvI","businessName--small-attributes":"businessName--small-attributes__09f24__R8hcw","disabled-link":"disabled-link__09f24__Y1cF5",regularFont:"regularFont__09f24__UgASy",smallFont:"smallFont__09f24__ogpq_","truncate-container":"truncate-container__09f24__EmMWY","truncate-string":"truncate-string__09f24__PtaQ_"}},298346:e=>{e.exports={lightboxMain:"lightboxMain__09f24__zoRia",lightboxSidebar:"lightboxSidebar__09f24__uarCh"}},340806:e=>{e.exports={cornerButton:"cornerButton__09f24__PKQRL","cornerButton--top":"cornerButton--top__09f24__nzIqg","cornerButton--bottom":"cornerButton--bottom__09f24__U0AXG","cornerButton--left":"cornerButton--left__09f24__uMhjc","cornerButton--right":"cornerButton--right__09f24__jko7H"}},504131:e=>{e.exports={backdrop:"backdrop__09f24__xYYU4",backdropInner:"backdropInner__09f24__rSErG",lightboxContainer:"lightboxContainer__09f24__XoK2Z",fullHeight:"fullHeight__09f24__JEXV5",lightboxOpen:"lightboxOpen__09f24__gEpqh"}},394678:e=>{e.exports={feedbackButton:"feedbackButton__09f24__HCpSa",isActive:"isActive__09f24__viLcj"}},831790:e=>{e.exports={button:"button__09f24__YVZY_"}},571885:e=>{e.exports={main:"main__09f24__k6ec6",photo:"photo__09f24__ErzEM",video:"video__09f24__V7orE"}},492917:e=>{e.exports={mediaOverlay:"mediaOverlay__09f24__C3cWq",caption:"caption__09f24__s5vZl",displayName:"displayName__09f24__elj0E",mediaInfo:"mediaInfo__09f24__z1J_K"}},617250:e=>{e.exports={gridThumbnail:"gridThumbnail__09f24__eTKe6",isFullWidth:"isFullWidth__09f24__EY_4L",isSelected:"isSelected__09f24__foAwG"}},807621:e=>{e.exports={gridThumbnail:"gridThumbnail__09f24__z6hGQ",isSelected:"isSelected__09f24__ANyqk"}},716251:e=>{e.exports={main:"main__09f24__x0sMx",photo:"photo__09f24__uFewN",video:"video__09f24__Yl6_u"}},95488:e=>{e.exports={navLink:"navLink__09f24__fE8dO",navLinkIcon:"navLinkIcon__09f24__CoB3H",previous:"previous__09f24__d69Xv",next:"next__09f24__CCeZW"}},983312:e=>{e.exports={navLink:"navLink__09f24__ioje8",previous:"previous__09f24__Z9Ka9",navLinkIcon:"navLinkIcon__09f24__aUFp0",next:"next__09f24__tjUA4"}},448416:e=>{e.exports={actionLink:"actionLink__09f24__hOZE4"}},332527:e=>{e.exports={sidebarContainer:"sidebarContainer__09f24__iJY06",sidebarFooter:"sidebarFooter__09f24__IqsvV"}},642324:e=>{e.exports={fullWidthThumbnail:"fullWidthThumbnail__09f24__uaGg2",scrollContainer:"scrollContainer__09f24__ETkdm",noFocusOutline:"noFocusOutline__09f24__gbEF_"}},542696:e=>{e.exports={sidebarCTA:"sidebarCTA__09f24__flQm6"}},47860:e=>{e.exports={sidebarCTA:"sidebarCTA__09f24__CKeUB"}},234177:e=>{e.exports={"menu-popover-container":"menu-popover-container__09f24__JN_XM","menu-popover":"menu-popover__09f24__eS06z",menu:"menu__09f24__yxTZa"}},517538:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});n(87363);var o=n(529977),s=n(894320);const r=function(e){return(0,s.jsx)(o.Z,e)}},472033:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});n(87363);var o=n(657633),s=n(894320);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r.apply(this,arguments)}const i=function(e){return(0,s.jsx)(o.Z,r({svg:'<svg width="24" height="24" class="icon_svg"><path d="M20.63 2.034c-3.901-1.601-5.908-.677-7.678.14-1.851.854-3.601 1.662-8.08-.143a.93.93 0 00-.141-.025.992.992 0 00-1.981.094v19.8a1 1 0 102 0v-5.86c1.506.61 3.107.95 4.73 1.005a9.519 9.519 0 004.31-1.129c1.668-.769 2.987-1.373 6.08-.106a.999.999 0 001.38-.924V2.959a1 1 0 00-.62-.925zm-1.38 11.439a7.847 7.847 0 00-6.298.627c-1.852.855-3.602 1.663-8.08-.142a.954.954 0 00-.122-.022V4.123c4.837 1.794 7.07.776 9.04-.133a5.994 5.994 0 015.46-.345v9.828z"/></svg>',name:"24x24_flag_v2",v2:!0},e))}},400440:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});n(87363);var o=n(657633),s=n(894320);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r.apply(this,arguments)}const i=function(e){return(0,s.jsx)(o.Z,r({svg:'<svg width="16" height="16" class="icon_svg"><path d="M12.025 5.46l-3.5-3.438a.749.749 0 00-1.05 0l-3.5 3.438a.75.75 0 101.05 1.07L7.25 4.345v9.097a.75.75 0 001.5 0V4.345l2.225 2.185a.751.751 0 101.05-1.07z"/></svg>',name:"16x16_helpful_v2",v2:!0},e))}},701193:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});n(87363);var o=n(657633),s=n(894320);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r.apply(this,arguments)}const i=function(e){return(0,s.jsx)(o.Z,r({svg:'<svg width="24" height="24" class="icon_svg"><path d="M12 13.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm8 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm-16 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"/></svg>',name:"24x24_more_v2",v2:!0},e))}},697237:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});n(87363);var o=n(657633),s=n(894320);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r.apply(this,arguments)}const i=function(e){return(0,s.jsx)(o.Z,r({svg:'<svg width="16" height="16" class="icon_svg"><path d="M12.035 9.48a.75.75 0 00-1.06-.01L8.75 11.655V2.558a.75.75 0 10-1.5 0v9.097L5.025 9.47a.75.75 0 10-1.05 1.07l3.5 3.438a.75.75 0 001.05 0l3.5-3.438a.75.75 0 00.01-1.06z"/></svg>',name:"16x16_nothelpful_v2",v2:!0},e))}},839180:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});n(87363);var o=n(657633),s=n(894320);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r.apply(this,arguments)}const i=function(e){return(0,s.jsx)(o.Z,r({svg:'<svg width="16" height="16" class="icon_svg"><path d="M11.231 14.75H4.769a3.524 3.524 0 01-3.519-3.52V4.77a3.523 3.523 0 013.519-3.52h6.462a3.523 3.523 0 013.519 3.52v6.46a3.523 3.523 0 01-3.519 3.52zm-6.462-12A2.022 2.022 0 002.75 4.77v6.46a2.022 2.022 0 002.019 2.02h6.462a2.022 2.022 0 002.019-2.02V4.77a2.022 2.022 0 00-2.019-2.02H4.769z"/><path d="M11.226 7.229a.5.5 0 00-.404-.341l-1.64-.239-.734-1.486a.522.522 0 00-.896 0L6.818 6.65l-1.64.239a.5.5 0 00-.277.853l1.187 1.156-.28 1.633a.5.5 0 00.725.528L8 10.286l1.467.772a.498.498 0 00.725-.528l-.28-1.633L11.1 7.741a.5.5 0 00.127-.512z"/></svg>',name:"16x16_review_v2",v2:!0},e))}},691613:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});n(87363);var o=n(657633),s=n(894320);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r.apply(this,arguments)}const i=function(e){return(0,s.jsx)(o.Z,r({svg:'<svg width="18" height="18" class="icon_svg"><path d="M17.714 6.429L13 10.357V7.325c-1 0-5.097 1.47-6.286 3.621.274-3.08 4.286-5.5 6.286-5.5V2.5l4.714 3.929zM3 4v10h11v-2.5l1-1V15H2V3h8.5l-1 1H3z"/></svg>',name:"18x18_share"},e))}},555483:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var o=n(87363),s=n.n(o),r=n(280506),i=n(473550),a=n.n(i),l=n(365778),u=n(269703),c=n(867130),d=n.n(c),p=n(768749),h=n.n(p),f=n(894320);const m=e=>{let{pillColor:t,isPlural:n}=e;const o=s().useContext(r.default).v2_enabled?h():d();return(0,f.jsx)(l.xv,{bold:!0,size:"small",align:"center",className:a()(o["yloca-pill"],o[`yloca-pill--${t}`])},n?(0,u.ag)("Ads"):(0,u.ag)("Ad"))};m.defaultProps={pillColor:"gold",isPlural:!1};const g=m},215750:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});n(87363);var o=n(918),s=n.n(o),r=n(269703),i=n(365778),a=n(166020),l=n(431325),u=n(469526);var c=n(145296),d=n.n(c),p=n(894320);const h=e=>{let{userName:t,readMoreText:n,readMoreUrl:o,readMoreInline:u,boldUser:c,boldReadMore:h,showQuotes:f,text:m,offerTitle:g,headingSize:v,logAdsUxEvent:b}=e;return(0,p.jsx)(a.Z,null,t&&(0,p.jsx)(i.xv,{inline:!0,bold:c,className:d().reviewerName,size:"inherit"},(0,r.ag)("%{username} said",{username:t})),g&&(0,p.jsx)(i.xv,{size:v||null,bold:!0},g),(0,p.jsx)(a.Z,{"data-testid":"adsnippet.description",tag:l.Dr,dangerouslySetInnerHTML:f?{__html:s()(`"${m}"`)}:{__html:s()(m)}}),o&&n&&(0,p.jsx)(a.Z,{"data-testid":"adsnippet.readmore",display:u?"inline":null,marginLeft:u?1:0,nowrap:!0},(0,p.jsx)(i.xv,{inline:!0,bold:h,size:"inherit"},(0,p.jsx)(i.rU,{href:o,size:"inherit",role:"link",handleClick:b?()=>b("click","link","read more"):null},n))))},f=e=>{let{adLoggingInfo:t,bunsenJsLogger:n,userName:o,readMoreText:s,readMoreUrl:r,readMoreInline:a,snippetType:l,boldUser:u,boldReadMore:c,showQuotes:d,text:f,offerTitle:m,headingSize:g,logAdsUxEvent:v}=e;switch(l){case"review":return h({userName:o,readMoreText:s,readMoreUrl:r,readMoreInline:a,boldUser:u,boldReadMore:c,showQuotes:d,text:f,offerTitle:m,headingSize:g,logAdsUxEvent:v});case"specialty":return h({userName:null,readMoreText:s,readMoreUrl:r,readMoreInline:a,boldUser:u,boldReadMore:c,showQuotes:!1,text:f,offerTitle:m,headingSize:g,logAdsUxEvent:v});case"showcase":return t&&(e=>{let{bunsenJsLogger:t,adLoggingInfo:n,showcaseType:o,title:s,text:r}=e;const i={ad_campaign_encid:n.adCampaignId,business_encid:n.bizId,showcase_type:o,placement:n.adPlacement,flow:n.adFlow,title:s,text:r};t.logEvent(["showcase","impression","1.0"],i)})({adLoggingInfo:t,bunsenJsLogger:n,showcaseType:"competitor_showcase_ad",title:m,text:f}),h({userName:null,readMoreText:s,readMoreUrl:r,readMoreInline:a,boldUser:u,boldReadMore:c,showQuotes:!1,text:f,offerTitle:m,headingSize:g,logAdsUxEvent:v});case"demo":return(0,p.jsx)(i.xv,null,f);default:return null}};f.defaultProps={adLoggingInfo:null,userName:null,readMoreText:null,readMoreUrl:null,offerTitle:null,boldUser:!0,boldReadMore:!0,showQuotes:!0,readMoreInline:!0,headingSize:null,logAdsUxEvent:null};const m=(0,u.et)(f)},356501:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c,f:()=>u});var o=n(87363),s=n.n(o),r=n(431325),i=n(138583),a=n.n(i),l=n(894320);const u="ABP",c=e=>{let{channelURIs:t}=e;return(0,l.jsx)(s().Fragment,null,t.map((e=>(0,l.jsx)(r.Ei,{className:a().abpDetectionPixel,key:e,src:e}))))}},758258:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var o=n(864342),s=n(876186);const r={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},i={eventQueue:{},addEvent(e,t){this.eventQueue[t]=this.eventQueue[t]||[],this.eventQueue[t].push(e),this.throttledPostEvents()},postEvents(){Object.keys(this.eventQueue).forEach((e=>{const t={payload:JSON.stringify(this.eventQueue[e]),csrftok:this.eventQueue[e][0].csrftok};fetch(e,{method:"POST",credentials:"same-origin",body:s.stringify(t),headers:r})})),this.eventQueue={}},throttledPostEvents(){},bindUnloadEvent(){window.addEventListener("unload",i.postEvents.bind(i))}};i.throttledPostEvents=(0,o.Z)(i.postEvents.bind(i),1500);const a=i,l=e=>{let{adsLoggingRecords:t,servletURI:n,loggingCSRF:o}=e;t.forEach((e=>{let{uniqueRequestId:t,adPlacement:s,adSlot:r}=e;const i={data:{opportunity_id:t,placement:s,slot:`${r}`,time:Date.now(),type:"impression"},csrftok:o};a.addEvent(i,n),a.bindUnloadEvent()}))}},154200:(e,t,n)=>{"use strict";n.d(t,{Z:()=>U});var o=n(87363),s=n.n(o),r=n(166020),i=n(365778),a=n(269703),l=n(510832),u=n(808756),c=n(682642),d=n(563798),p=n(873734),h=n(522743),f=n(434725),m=n(921752),g=n(894320);const v=e=>{let{onChange:t,showError:n,value:o}=e;return(0,g.jsx)(m.Z,{onChange:e=>{const n=e.target.value;t(n)},label:(0,a.ag)("Please provide specific details below:"),validationStateType:n?"error":void 0,validationStateText:n?(0,a.ag)("This field is required."):void 0,id:"flag-content-message",value:o,name:"message"})};var b=n(253601),_=n(720302),x=n(61512);const y=(0,a.ag)("Why do you want to report this content?"),j={[x.Z.REVIEW]:(0,a.ag)("Why do you want to report this review?"),[x.Z.BUSINESS_PHOTO]:(0,a.ag)("Why do you want to report this photo?"),[x.Z.BUSINESS_VIDEO]:y,[x.Z.BUSINESS_REVIEW_COMMENT]:y,[x.Z.QUESTION]:(0,a.ag)("Why do you want to report this question?"),[x.Z.ANSWER]:(0,a.ag)("Why do you want to report this answer?"),[x.Z.QUESTION_FLAGGED_BY_BIZ_OWNER]:(0,a.ag)("Why do you want to report this question?"),[x.Z.ANSWER_FLAGGED_BY_BIZ_OWNER]:(0,a.ag)("Why do you want to report this answer?"),[x.Z.USER_INVITE]:(0,a.ag)("Why do you want to report this friend request?")},C=e=>{let{flagReasons:t,flaggableType:n,onChange:o}=e;const s=[{value:"",description:(0,a.ag)("Select an option...")},...t.map((e=>{let{code:t,description:n}=e;return{value:t,description:n}}))];return(0,g.jsx)(b.Z,{label:j[n],onChange:e=>{const t=e.target.value;o(t)},id:"flag-content-reason",name:"reason"},s.map((e=>(0,g.jsx)(_.Z,{key:e.value,value:e.value},e.description))))};function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const S=()=>(0,g.jsx)(s().Fragment,null,(0,g.jsx)(i.xv,{paragraph:!0},(0,a.ag)("Sorry, but we don’t take sides in factual disputes. If a review appears to reflect a user’s personal experience and opinions, it is our policy to let the user stand behind their review.")),(0,g.jsx)(i.xv,{paragraph:!0},(0,a.ag)("There’s always more than one side to a story, and business owners can address misunderstandings via their Business Account by posting a public comment or sending a direct message to the reviewer."))),Z=()=>(0,g.jsx)(s().Fragment,null,(0,g.jsx)(i.xv,{paragraph:!0},(0,a.ag)("We generally don’t take sides in factual disputes and allow Yelpers to stand behind their reviews, but please include information in the box below which might allow us to independently verify your claims.")));class T extends s().Component{constructor(){super(...arguments),w(this,"state",{selectedFlagReason:void 0,message:"",showFormError:!1}),w(this,"selectFlagReason",(e=>{const t=this.props.flagReasons.find((t=>t.code===e));this.setState({selectedFlagReason:t})})),w(this,"updateMessage",(e=>{this.setState({message:e})})),w(this,"onSubmit",(e=>{e.preventDefault();const{message:t,selectedFlagReason:n}=this.state,o=!t;if(this.setState({showFormError:o}),!o){const e=n&&n.code;this.props.onSubmit({message:t,reasonCode:e})}})),w(this,"onCancel",(e=>{e.preventDefault(),this.props.onCancel()}))}render(){const{flaggableType:e,flagReasons:t,contentGuidelinesUrl:n,termsOfServiceUrl:o}=this.props,{selectedFlagReason:s,showFormError:l,message:u}=this.state;let m=null,b=!1,_=!1;t.length?(m=(0,g.jsx)(C,{onChange:this.selectFlagReason,flagReasons:t,flaggableType:e}),s&&(e===x.Z.REVIEW&&"1"===s.code?(b=!0,"US"!==this.props.businessCountry&&(_=!0)):_=!0)):_=!0;const y=(0,g.jsx)(i.xv,{paragraph:!0},(0,g.jsx)(d.Trans,{id:(0,a.ag)("Please refer to our <0>Content Guidelines</0> and <1>Terms of Service</1> and let us know why you think the content you’ve reported may violate these guidelines.",{}).toString(),components:[(0,g.jsx)(i.rU,{target:"_blank",href:n}),(0,g.jsx)(i.rU,{target:"_blank",href:o})]}));return(0,g.jsx)(p.Z,{onSubmit:this.onSubmit},(0,g.jsx)(r.Z,{marginBottom:4},y),m,b&&(_?(0,g.jsx)(Z,null):(0,g.jsx)(S,null)),_&&(0,g.jsx)(v,{onChange:this.updateMessage,showError:l,value:u}),(0,g.jsx)(h.Z,{gutter:_?3:0,verticalAlign:"middle"},(0,g.jsx)(f.Z,{fill:!0,textAlign:"right"},(0,g.jsx)(c.Z,{type:"link",onClick:this.onCancel,text:(0,a.ag)("Cancel")})),_&&(0,g.jsx)(f.Z,null,(0,g.jsx)(c.Z,{type:"primary",text:(0,a.ag)("Send"),disabled:!u,aria:{"aria-label":"Send"}}))))}}w(T,"defaultProps",{flagReasons:[]});const k=T;function I(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class R extends s().Component{constructor(){super(...arguments),I(this,"state",{showLoadingSpinner:!1,showNetworkError:!1,statusMessage:null}),I(this,"submitForm",(e=>{this.setState({showLoadingSpinner:!0,showNetworkError:!1},(()=>{this.props.submitFlagRequest(e.message,e.reasonCode).then((e=>{e.isError?this.setState({showLoadingSpinner:!1,showNetworkError:!0}):this.setState({showLoadingSpinner:!1,statusMessage:e.message})}))}))}))}render(){const{onClose:e,flagReasons:t,flaggableType:n,contentGuidelinesUrl:o,termsOfServiceUrl:s}=this.props,{statusMessage:d,showNetworkError:p,showLoadingSpinner:h}=this.state;return d?(0,g.jsx)(r.Z,null,(0,g.jsx)(i.xv,{paragraph:!0},d),(0,g.jsx)(r.Z,{textAlign:"right"},(0,g.jsx)(c.Z,{onClick:e},(0,a.ag)("OK")))):(0,g.jsx)(u.Z,{isLoading:h},p&&(0,g.jsx)(r.Z,{marginBottom:2},(0,g.jsx)(l.Z,{type:"error"},(0,a.ag)("Oops, there was a problem flagging this content. Please try again later."))),(0,g.jsx)(k,{onCancel:e,onSubmit:this.submitForm,flagReasons:t,contentGuidelinesUrl:o,termsOfServiceUrl:s,flaggableType:n,businessCountry:this.props.businessCountry}))}}I(R,"defaultProps",{flagReasons:[]});const E=R;var N=n(931396);const M={[x.Z.REVIEW]:(0,a.ag)("Report Review"),[x.Z.BUSINESS_PHOTO]:(0,a.ag)("Report Photo"),[x.Z.BUSINESS_VIDEO]:(0,a.ag)("Report Video"),[x.Z.BUSINESS_REVIEW_COMMENT]:(0,a.ag)("Report Comment"),[x.Z.QUESTION]:(0,a.ag)("Report Question"),[x.Z.ANSWER]:(0,a.ag)("Report Answer"),[x.Z.QUESTION_FLAGGED_BY_BIZ_OWNER]:(0,a.ag)("Report Question"),[x.Z.ANSWER_FLAGGED_BY_BIZ_OWNER]:(0,a.ag)("Report Answer"),[x.Z.USER_INVITE]:(0,a.ag)("Report Friend Request")},U=e=>{let{contentGuidelinesUrl:t="/guidelines",termsOfServiceUrl:n="/static?p=tos",flagReasons:o=[],onClose:s,submitFlagRequest:a,flaggableType:l,businessCountry:u}=e;return(0,g.jsx)(N.Z,{onClose:s},(0,g.jsx)(r.Z,{textAlign:"left"},(0,g.jsx)(r.Z,null,(0,g.jsx)(i.X6,{level:4},M[l])),(0,g.jsx)(r.Z,{paddingTop:1},(0,g.jsx)(E,{contentGuidelinesUrl:t,termsOfServiceUrl:n,flagReasons:o,onClose:s,submitFlagRequest:a,flaggableType:l,businessCountry:u}))))}},931396:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});n(87363);var o=n(765956),s=n(894320);const r=e=>{let{children:t,onClose:n}=e;return(0,s.jsx)(o.ZP,{reserveTitleSpacing:!1,size:"medium",onClose:n,hiddenOverflow:!1},t)}},61512:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=Object.freeze({REVIEW:"review",BUSINESS_PHOTO:"business_photo",BUSINESS_VIDEO:"business_video",BUSINESS_REVIEW_COMMENT:"business_review_comment",QUESTION:"question",ANSWER:"answer",QUESTION_FLAGGED_BY_BIZ_OWNER:"question_flagged_by_biz_owner",ANSWER_FLAGGED_BY_BIZ_OWNER:"answer_flagged_by_biz_owner",USER_INVITE:"user_invite"})},338739:(e,t,n)=>{"use strict";n.d(t,{Z:()=>nt});var o=n(87363),s=n.n(o),r=n(269703),i=n(865766),a=n(166020),l=n(431325),u=n(473550),c=n.n(u),d=n(522743),p=n(434725),h=n(421106),f=n(365778),m=n(555483),g=n(760967),v=n(215750),b=n(280506),_=n(758258),x=n(554482),y=n.n(x),j=n(894320);function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},C.apply(this,arguments)}const w=e=>{let{children:t,size:n,shouldTruncateString:o,...s}=e;return(0,j.jsx)(f.xv,C({className:c()({[y().regularFont]:"regular"===n,[y().smallFont]:"small"===n,[y()["truncate-string"]]:o})},s),t)};w.defaultProps={size:"regular",shouldTruncateString:!1};const S=w;function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Z.apply(this,arguments)}const T=e=>{let{reviewCount:t,size:n,...o}=e;const s=1===t?"review":"reviews";return(0,j.jsx)(S,Z({inline:!0,size:n},o),t," ",s)};var k,I,R,E=n(921686),N=n.n(E),M=n(356501);class U extends s().Component{componentDidMount(){const{adUnitsContent:e,servletURI:t,loggingCSRF:n,uniqueRequestId:o}=this.props,s=e.map((e=>({adSlot:e.adSlot,adPlacement:e.adPlacement,uniqueRequestId:o})));s.length>0&&t&&n&&(0,_.Z)({adsLoggingRecords:s,servletURI:t,loggingCSRF:n})}render(){const e=this.context;return(0,j.jsx)(a.Z,{className:c()(N().localAdUnit,M.f)},this.props.adUnitsContent.map((t=>{let{businessInformation:n,snippet:o}=t;return(0,j.jsx)(s().Fragment,null,(0,j.jsx)(d.Z,{gutter:1,verticalAlign:e.v2_enabled?"baseline":null},e.v2_enabled?(0,j.jsx)(p.Z,null,(0,j.jsx)(m.Z,null)):(0,j.jsx)(p.Z,{fill:!0},(0,j.jsx)(m.Z,null),(0,j.jsx)(f.xv,{className:c()(y().businessName,N().businessName)},(0,j.jsx)(f.rU,{href:n.bizUrl,size:"inherit"},n.name))),e.v2_enabled&&(0,j.jsx)(p.Z,{fill:!0},(0,j.jsx)(f.xv,{className:c()(y().businessName,N().businessName)},(0,j.jsx)(f.rU,{href:n.bizUrl,size:"inherit"},n.name))),(0,j.jsx)(p.Z,{className:N().infoWrapper},(0,j.jsx)(g.Z,{bizSiteUrl:this.props.bizSiteUrl}))),(0,j.jsx)(a.Z,{marginBottom:1},!n.shouldSuppressRating&&(0,j.jsx)(h.Z,{microformat:!0,rating:n.rating,size:"regular"}),n.reviewCount&&(0,j.jsx)(a.Z,{display:"inline",marginLeft:1},(0,j.jsx)(T,{reviewCount:n.reviewCount,size:"regular",color:"mid"}))),o&&(0,j.jsx)(a.Z,{overflow:"hidden"},(0,j.jsx)(f.xv,{inline:!0},(0,j.jsx)(v.Z,o))))})))}}k=U,I="contextType",R=b.default,(I=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(I))in k?Object.defineProperty(k,I,{value:R,enumerable:!0,configurable:!0,writable:!0}):k[I]=R;const O=U;var P=n(643890),L=n(800075),A=n(437522),F=n(90553);const B=e=>{let{businessAvatar:t,businessName:n}=e;return(0,j.jsx)(d.Z,{gutter:1,verticalAlign:"middle"},(0,j.jsx)(p.Z,null,(0,j.jsx)(F.ZP,{src:t.src,srcSet:t.srcSet,altText:t.altText,width:30,height:30})),(0,j.jsx)(p.Z,{fill:!0},(0,j.jsx)(f.xv,{bold:!0,color:"white"},(0,j.jsx)(f.rU,{color:"inherit",href:t.url},n)),(0,j.jsx)(f.xv,{size:"small",color:"black-light"},(0,r.ag)("From the business owner"))))};var V=n(691613),z=n(913393),H=n(454160),W=n.n(H),D=n(965183),$=n(448416),q=n.n($);function G(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Q=`tooltip-${W()()}`,K={"aria-labelledby":Q};class Y extends s().Component{constructor(){super(...arguments),G(this,"state",{isModalVisible:!1}),G(this,"handleClick",(e=>{e.preventDefault(),this.openModal()})),G(this,"openModal",(()=>{this.setState({isModalVisible:!0},this.props.onModalOpen)})),G(this,"closeModal",(()=>{this.setState({isModalVisible:!1},this.props.onModalClose)}))}render(){const{mediaId:e,mediaType:t,businessAlias:n}=this.props;return(0,j.jsx)(s().Fragment,null,(0,j.jsx)(z.Z,{tooltipText:(0,r.ag)("Share"),id:Q},(0,j.jsx)(f.rU,{role:"button",modifier:"chiclet",className:q().actionLink,handleClick:this.handleClick,aria:K},(0,j.jsx)(V.Z,{color:"white"}))),this.state.isModalVisible&&(0,j.jsx)(D.Z,{businessAlias:n,mediaId:e,mediaType:t,onModalClose:this.closeModal}))}}const X=Y;var J=n(734101),ee=n(41937);function te(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ne=`tooltip-${W()()}`,oe={"aria-labelledby":ne};class se extends s().Component{constructor(){super(...arguments),te(this,"state",{isModalVisible:!1}),te(this,"handleClick",(e=>{const{isLoggedIn:t,loginUrl:n}=this.props;e.preventDefault(),t?this.openModal():window.location.assign(n)})),te(this,"openModal",(()=>{this.setState({isModalVisible:!0},this.props.onModalOpen)})),te(this,"closeModal",(()=>{this.setState({isModalVisible:!1},this.props.onModalClose)}))}render(){const{csrfToken:e,mediaId:t,mediaType:n,flagReasons:o}=this.props;return(0,j.jsx)(s().Fragment,null,(0,j.jsx)(z.Z,{tooltipText:(0,r.ag)("Report"),id:ne},(0,j.jsx)(f.rU,{role:"button",modifier:"chiclet",className:q().actionLink,handleClick:this.handleClick,aria:oe},(0,j.jsx)(J.Z,{color:"white"}))),this.state.isModalVisible&&(0,j.jsx)(ee.Z,{csrfToken:e,flagReasons:o,onModalClose:this.closeModal,mediaId:t,mediaType:n}))}}const re=se;var ie=n(778746);const ae=e=>{let t,{displayName:n,avatarSrcUrl:o,avatarSrcSetUrl:s,avatarLinkUrl:r,userUrl:i,friendCount:a,reviewCount:l,isCurrentlyElite:u,eliteYear:c}=e;return u&&c&&(t=parseInt(c.toString().split("").slice(-2).join(""),10)),(0,j.jsx)(ie.Z,{markupDisplayName:(0,j.jsx)(f.xv,{color:"white",inline:!0},n),src:o,srcSet:s,link:r,userUrl:i,friendCount:(0,j.jsx)(f.xv,{color:"white",inline:!0},a),reviewCount:(0,j.jsx)(f.xv,{color:"white",inline:!0},l),eliteYear:t})};var le=n(682642),ue=n(400440),ce=n(657633);function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},de.apply(this,arguments)}const pe=function(e){return(0,j.jsx)(ce.Z,de({svg:'<svg width="18" height="18" class="icon_svg"><path d="M15 10L9 3l-6 7h4v5h4v-5h4z"/></svg>',name:"18x18_arrow_up"},e))};var he=n(697237);function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},fe.apply(this,arguments)}const me=function(e){return(0,j.jsx)(ce.Z,fe({svg:'<svg width="18" height="18" class="icon_svg"><path d="M3 8l6 7 6-7h-4V3H7v5H3z"/></svg>',name:"18x18_arrow_down"},e))},ge={HELPFUL:"Helpful",NOT_HELPFUL:"NotHelpful"};var ve=n(394678),be=n.n(ve),_e=n(831790),xe=n.n(_e);function ye(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class je extends s().Component{constructor(){super(...arguments),ye(this,"onClickHelpful",(e=>{const{isLoggedIn:t,userVote:n,onVote:o}=this.props;t&&(e.preventDefault(),n!==ge.HELPFUL&&o(ge.HELPFUL))})),ye(this,"onClickNotHelpful",(e=>{const{isLoggedIn:t,userVote:n,onVote:o}=this.props;t&&(e.preventDefault(),n!==ge.NOT_HELPFUL&&o(ge.NOT_HELPFUL))}))}render(){const e=this.context,t=e.v2_enabled?xe():be(),{helpfulCount:n,userVote:o,loginUrl:i}=this.props;return(0,j.jsx)(s().Fragment,null,(0,j.jsx)(d.Z,{gutter:1},(0,j.jsx)(p.Z,null,e.v2_enabled?(0,j.jsx)(le.Z,{size:"small",onClick:this.onClickHelpful,className:c()(t.button,o===ge.HELPFUL?t.isActive:""),icon:ue.Z},(0,j.jsx)(f.xv,{bold:!0,size:"inherit",inline:!0,color:"inherit"},(0,r.ag)("Helpful")),Boolean(n)&&(0,j.jsx)(f.xv,{size:"inherit",inline:!0,color:"inherit"}," ",n)):(0,j.jsx)(f.rU,{role:"button",modifier:"chiclet",className:c()(t.feedbackButton,o===ge.HELPFUL?t.isActive:""),handleClick:this.onClickHelpful,href:i},(0,j.jsx)(pe,{color:"currentColor"}),(0,j.jsx)(f.xv,{bold:!0,size:"small",inline:!0,color:"inherit"},(0,r.ag)("Helpful")),Boolean(n)&&(0,j.jsx)(f.xv,{size:"small",inline:!0,color:"inherit"}," ",n))),(0,j.jsx)(p.Z,{fill:!0},e.v2_enabled?(0,j.jsx)(le.Z,{size:"small",icon:he.Z,onClick:this.onClickNotHelpful,className:c()(t.button,o===ge.NOT_HELPFUL?t.isActive:""),text:(0,r.ag)("Not Helpful")}):(0,j.jsx)(f.rU,{role:"button",modifier:"chiclet",className:c()(t.feedbackButton,o===ge.NOT_HELPFUL?t.isActive:""),handleClick:this.onClickNotHelpful,href:i},(0,j.jsx)(me,{color:"currentColor"}),(0,j.jsx)(f.xv,{bold:!0,size:"small",inline:!0,color:"inherit"},(0,r.ag)("Not Helpful"))))))}}ye(je,"contextType",b.default);const Ce=je;var we=n(492917),Se=n.n(we);const Ze=e=>{let{currentUserId:t,mediaItem:n,flagContentCsrfToken:o,photoFlagReasons:s,onVote:r,onModalOpen:i,onModalClose:l}=e;const{business:u,businessAvatar:h}=n,m=u.name,g=u.alias,v=n.user;let b=!1;v&&v.id===t&&(b=!0);const _=((e,t)=>`/login?return_url=${encodeURIComponent(`/biz_photos/${e}?select=${t}`)}`)(g,n.id);return(0,j.jsx)(a.Z,{padding:2,className:c()(Se().mediaOverlay)},(0,j.jsx)(a.Z,{className:Se().mediaInfo,paddingBottom:1,marginBottom:1},n.caption&&(0,j.jsx)(f.xv,{className:Se().caption,color:"white"},(0,j.jsx)(A.Z,null,n.caption)),(0,j.jsx)(f.xv,{size:"small",color:"black-light"},n.timeUploaded)),(0,j.jsx)(d.Z,{gutter:1,verticalAlign:"middle"},(0,j.jsx)(p.Z,{fill:!0},v?(0,j.jsx)(ae,{displayName:v.displayName,avatarSrcUrl:v.avatar.srcUrl,avatarSrcSetUrl:v.avatar.srcSetUrl,avatarLinkUrl:v.avatar.linkUrl,userUrl:v.url,friendCount:v.friendCount||0,reviewCount:v.reviewCount||0,isCurrentlyElite:v.isCurrentlyElite,eliteYear:v.eliteYear}):m&&(0,j.jsx)(B,{businessAvatar:h,businessName:m})),(0,j.jsx)(p.Z,null,(0,j.jsx)(d.Z,{gutter:0},(0,j.jsx)(p.Z,null,(0,j.jsx)(X,{mediaId:n.id,mediaType:n.type,businessAlias:g,onModalOpen:i,onModalClose:l})),!b&&(0,j.jsx)(p.Z,null,(0,j.jsx)(re,{mediaId:n.id,csrfToken:o,mediaType:n.type,flagReasons:"photo"===n.type?s:[],isLoggedIn:!!t,loginUrl:_,onModalOpen:i,onModalClose:l})))),"photo"===n.type&&(0,j.jsx)(p.Z,{nowrap:!0},(0,j.jsx)(Ce,{helpfulCount:n.helpfulCount,onVote:r,userVote:n.userVote,isLoggedIn:!!t,loginUrl:_}))))};var Te=n(67036),ke=n(301395);const Ie=e=>{let{photosUrl:t,totalMediaItems:n,businessName:o}=e;const i=s().useContext(b.default);return(0,j.jsx)(a.Z,null,(0,j.jsx)(f.X6,{level:i.v2_enabled?4:3,alternate:!i.v2_enabled},(0,r.ag)("Photos for %{businessName}",{businessName:o})),n>1&&(0,j.jsx)(f.rU,{href:t},(0,r.ag)("See All %{photoCount}",{photoCount:n})))};var Re=n(445316),Ee=n(561060),Ne=n(428121),Me=n(472033),Ue=n(833565);const Oe=e=>{let{businessAlias:t,currentUserId:n,flagContentCsrfToken:o,loginUrl:i,mediaId:a,mediaType:l,photoFlagReasons:u}=e;const[c,d]=s().useState(!1),[p,h]=s().useState(!1),f="photo"===l,m=!!n;return(0,j.jsx)(s().Fragment,null,(0,j.jsx)(Ue.Z,{items:[{icon:Ne.Z,onClick:()=>h(!0),text:f?(0,r.ag)("Share photo"):(0,r.ag)("Share video"),type:"button"},{icon:Me.Z,onClick:()=>{m?d(!0):window.location.assign(i)},text:f?(0,r.ag)("Report photo"):(0,r.ag)("Report video"),type:"button"}]}),p&&(0,j.jsx)(D.Z,{businessAlias:t,mediaId:a,mediaType:l,onModalClose:()=>h(!1)}),c&&(0,j.jsx)(ee.Z,{csrfToken:o,flagReasons:f?u:[],onModalClose:()=>d(!1),mediaId:a,mediaType:l}))};function Pe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Le extends s().Component{constructor(){super(...arguments),Pe(this,"handleClose",(e=>{e.preventDefault(),this.props.onClose()}))}render(){const{businessName:e,currentMediaIndex:t,currentUserId:n,flagContentCsrfToken:o,mediaItem:i,onVote:l,photoFlagReasons:u,photosUrl:c,totalMediaItems:h}=this.props,m=t+1,{business:g,businessAvatar:v}=i,b=g.alias,_=i.user;let x=`/biz/${b}`;v&&(x=v.url);const y=((e,t)=>`/login?return_url=${encodeURIComponent(`/biz_photos/${e}?select=${t}`)}`)(b,i.id);return(0,j.jsx)(s().Fragment,null,(0,j.jsx)(a.Z,{paddingBottom:2,marginBottom:2,borderBottom:!0},(0,j.jsx)(a.Z,{marginBottom:2},(0,j.jsx)(d.Z,{gutter:0,verticalAlign:"middle"},(0,j.jsx)(p.Z,{fill:!0},(0,j.jsx)(a.Z,{paddingRight:2},(0,j.jsx)(f.X6,{level:4},(0,r.ag)("Photos for %{businessName}",{businessName:e})))),(0,j.jsx)(p.Z,null,(0,j.jsx)(Oe,{businessAlias:b,currentUserId:n,flagContentCsrfToken:o,loginUrl:y,mediaId:i.id,mediaType:i.type,photoFlagReasons:u})),(0,j.jsx)(p.Z,null,(0,j.jsx)(Ee.Z,{icon:Re.Z,onClick:this.handleClose})))),(0,j.jsx)(f.xv,null,(0,r.ag)("%{number} of %{total}",{number:m,total:h})," ",h>1&&(0,j.jsx)(f.rU,{href:c},(0,r.ag)("See all photos")))),i.caption&&(0,j.jsx)(f.xv,{paragraph:!0,className:"caption-text"},(0,j.jsx)(A.Z,null,i.caption)),_?(0,j.jsx)(f.xv,{size:"small",color:"black-light",paragraph:!0,className:"uploading-user"},(0,j.jsx)(A.Z,null,(0,r.ag)("by <a %{link_attrs}>%{userName}</a> on %{date}",{link_attrs:`href="${_.url}"`,userName:_.displayName,date:i.timeUploaded}))):e&&(0,j.jsx)(f.xv,{size:"small",color:"black-light",paragraph:!0,className:"from-biz-owner"},(0,j.jsx)(A.Z,null,(0,r.ag)("from <a %{link_attrs}>%{bizName}</a> on %{date}",{link_attrs:`href="${x}"`,bizName:e,date:i.timeUploaded}))),"photo"===i.type&&(0,j.jsx)(Ce,{helpfulCount:i.helpfulCount,onVote:l,userVote:i.userVote,isLoggedIn:!!n,loginUrl:y}))}}const Ae=Le;var Fe=n(970574),Be=n(300957),Ve=n(517538),ze=n(542696),He=n.n(ze),We=n(47860),De=n.n(We);const $e=e=>{let{photosUrl:t}=e;const n=s().useContext(b.default),o=n.v2_enabled?De():He();let i;return i=n.v2_enabled?(0,j.jsx)(le.Z,{tagType:"link",type:"secondary",href:t,full:!0},(0,r.ag)("See All Photos")):(0,j.jsx)(f.rU,{href:t,className:o.sidebarCTA,role:"button"},(0,j.jsx)(d.Z,{gutter:1.5},(0,j.jsx)(p.Z,null,(0,j.jsx)(Be.Z,{color:"currentColor"})),(0,j.jsx)(p.Z,{fill:!0},(0,r.ag)("See All Photos")),(0,j.jsx)(p.Z,null,(0,j.jsx)(Ve.Z,{color:"currentColor"})))),(0,j.jsx)(a.Z,{marginTop:n.v2_enabled?2:0},i)};var qe=n(298346),Ge=n.n(qe),Qe=n(451532);function Ke(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ye extends o.Component{constructor(e){super(e),Ke(this,"_isMounted",!1),Ke(this,"isLastMediaItem",(()=>this.state.currentMediaIndex+1===this.state.mediaItems.length)),Ke(this,"isFirstMediaItem",(()=>0===this.state.currentMediaIndex)),Ke(this,"selectDirectMediaItem",(e=>{this.props.ygaTrackEvent({category:Qe.VR,action:"Change Media",eventLabel:"Select Thumbnail"}),this.selectMediaItemAtIndex(e)})),Ke(this,"onClose",(()=>{this.props.ygaTrackEvent({category:Qe.VR,action:"Close Lightbox"}),this.props.onClose()})),Ke(this,"selectNextMediaItem",(()=>{this.isLastMediaItem()||(this.props.ygaTrackEvent({category:Qe.VR,action:"Change Media",eventLabel:"Next"}),this.selectMediaItemAtIndex(this.state.currentMediaIndex+1))})),Ke(this,"selectPreviousMediaItem",(()=>{this.isFirstMediaItem()||(this.props.ygaTrackEvent({category:Qe.VR,action:"Change Media",eventLabel:"Previous"}),this.selectMediaItemAtIndex(this.state.currentMediaIndex-1))})),Ke(this,"selectMediaItemAtIndex",(e=>{this.state.currentMediaIndex!==e&&this.setState({currentMediaIndex:e},(()=>{const e=this.state.mediaItems[this.state.currentMediaIndex];this.props.onSelectMediaItem(e)}))})),Ke(this,"handleVote",(e=>{this.props.ygaTrackEvent({category:Qe.VR,action:"Vote",eventLabel:e}),this.props.onVote(this.state.mediaItems[this.state.currentMediaIndex],e).then((e=>{this._isMounted&&this.setState((t=>{const n=t.mediaItems.slice();return n.splice(t.currentMediaIndex,1,e),{mediaItems:n}}))}))})),Ke(this,"handleNestedModalOpen",(()=>{this.setState({isNestedModalOpen:!0})})),Ke(this,"handleNestedModalClose",(()=>{this.setState({isNestedModalOpen:!1})}));const t=this.props.initialMediaItems.indexOf(this.props.targetMediaItem);this.state={mediaItems:this.props.initialMediaItems,currentMediaIndex:t,isNestedModalOpen:!1}}componentDidMount(){this._isMounted=!0,this.props.ygaTrackEvent({category:Qe.VR,action:"Open Lightbox"})}componentWillUnmount(){this._isMounted=!1}render(){const e=this.context,{photosUrl:t,totalMediaItems:n,localAd:o,currentUserId:s,flagContentCsrfToken:r,photoFlagReasons:i}=this.props,{mediaItems:u,currentMediaIndex:c,isNestedModalOpen:d}=this.state,p=u[c],h=p.business.name;return(0,j.jsx)(P.Z,{onClose:this.onClose,onRightKeydown:this.selectNextMediaItem,onLeftKeydown:this.selectPreviousMediaItem,suppressKeyEvents:d},(0,j.jsx)(l.ZC,{className:Ge().lightboxMain,"data-testid":"lightboxMain"},(0,j.jsx)(L.Z,{mediaItem:p}),!e.v2_enabled&&(0,j.jsx)(Ze,{mediaItem:p,currentUserId:s,flagContentCsrfToken:r,onVote:this.handleVote,photoFlagReasons:i,onModalOpen:this.handleNestedModalOpen,onModalClose:this.handleNestedModalClose}),(0,j.jsx)(Te.Z,{onClickNext:this.selectNextMediaItem,onClickPrevious:this.selectPreviousMediaItem,showNext:!this.isLastMediaItem(),showPrevious:!this.isFirstMediaItem()})),(0,j.jsx)(a.Z,{className:Ge().lightboxSidebar,backgroundColor:"white"},(0,j.jsx)(ke.Z,{header:e.v2_enabled?(0,j.jsx)(Ae,{currentUserId:s,businessName:h,currentMediaIndex:c,mediaItem:p,onClose:this.onClose,onVote:this.handleVote,photosUrl:t,totalMediaItems:n,flagContentCsrfToken:r,photoFlagReasons:i}):(0,j.jsx)(Ie,{businessName:h,photosUrl:t,totalMediaItems:n}),body:(0,j.jsx)(Fe.Z,{mediaItems:u,currentMediaIndex:c,onClickMediaItem:this.selectDirectMediaItem,scrollContextFooter:t&&n>5&&(0,j.jsx)($e,{photosUrl:t})}),footer:o?(0,j.jsx)(a.Z,{"data-testid":"lightboxLocalAd",paddingTop:2,paddingLeft:e.v2_enabled?2:5,paddingRight:e.v2_enabled?2:5,paddingBottom:e.v2_enabled?2:4},(0,j.jsx)(O,o)):void 0})))}}Ke(Ye,"defaultProps",{localAd:void 0,currentUserId:void 0}),Ke(Ye,"contextType",b.default);const Xe=(0,i.Z)(Ye);function Je(){return Je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Je.apply(this,arguments)}function et(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class tt extends o.Component{constructor(){super(...arguments),et(this,"initialUrl",""),et(this,"initialOnPopState",null),et(this,"history",void 0),et(this,"historyState",{}),et(this,"initializePageState",(()=>{this.history&&this.history.pushState({codeTriggeredBackAction:!0},"open lightbox",window.location)})),et(this,"updatePageState",(e=>{const t=((e,t)=>{let n;return n="video"===e.type?e.user?"select_video":"select_biz_video":"select",`${t}/biz_photos/${e.business.alias}?${n}=${e.id}`})(e,window.location.origin);this.history&&(this.history.replaceState(this.history.state,"media",t),e.caption?document.title=`${e.caption}`:document.title=(0,r.ag)("Photos for %{business}",{business:e.business.name}).toString(),this.props.onUpdateHistory(t)),this.props.onSelectMediaItem&&this.props.onSelectMediaItem(e)}))}componentDidMount(){this.initialOnPopState=window.onpopstate,this.props.enableHistory&&(this.history=window.history,this.initialUrl=window.location.href,window.onpopstate=e=>{this.historyState.codeTriggeredBackAction||(this.props.ygaTrackEvent({category:Qe.VR,action:"Close Lightbox"}),this.props.mediaLightboxProps.onClose())},this.initializePageState(),this.updatePageState(this.props.mediaLightboxProps.targetMediaItem))}componentWillUnmount(){this.history&&(window.location.href!==this.initialUrl&&(this.historyState=this.history.state,this.history.back()),this.props.onUpdateHistory(this.initialUrl)),window.onpopstate=this.initialOnPopState}render(){return(0,j.jsx)(Xe,Je({},this.props.mediaLightboxProps,{onSelectMediaItem:this.updatePageState}))}}et(tt,"defaultProps",{enableHistory:!0});const nt=(0,i.Z)(tt)},643890:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var o=n(87363),s=n(166020),r=n(473550),i=n.n(r),a=n(280506),l=n(530816),u=n(269703),c=n(365778),d=n(340806),p=n.n(d),h=n(894320);function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends o.Component{constructor(){super(...arguments),f(this,"handleClick",(e=>{e.preventDefault(),this.props.onClick()}))}render(){const{position:e,label:t,IconComponent:n}=this.props,o="topLeft"===e||"topRight"===e,s="topLeft"===e||"bottomLeft"===e,r=(0,h.jsx)(n,{color:"currentColor"});return(0,h.jsx)(c.xv,{color:"white"},(0,h.jsx)(c.rU,{className:i()(p().cornerButton,o?p()["cornerButton--top"]:p()["cornerButton--bottom"],s?p()["cornerButton--left"]:p()["cornerButton--right"]),color:"inherit",handleClick:this.handleClick,role:"button",tabIndex:"0",href:""},s?r:t," ",s?t:r))}}const g=m,v=e=>{let{onClick:t}=e;return(0,h.jsx)(g,{position:"topRight",label:(0,u.ag)("Close"),IconComponent:l.Z,onClick:t})};var b=n(529977);const _=e=>{let{onClick:t,buttonText:n}=e;return(0,h.jsx)(g,{position:"bottomRight",label:n,IconComponent:b.Z,onClick:t})};var x=n(858642);const y=e=>{let{onClick:t,buttonText:n}=e;return(0,h.jsx)(g,{position:"bottomLeft",label:n,IconComponent:x.Z,onClick:t})};var j=n(504131),C=n.n(j);function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class S extends o.Component{constructor(){super(...arguments),w(this,"handleKeyPress",(e=>{const{onClose:t,onRightKeydown:n,onLeftKeydown:o,suppressKeyEvents:s}=this.props;s||("Escape"===e.key?t():"ArrowRight"===e.key?n&&n():"ArrowLeft"===e.key&&o&&o())})),w(this,"handleClickBackdrop",(e=>{const{onClose:t}=this.props;e.target===e.currentTarget&&t()}))}componentDidMount(){document.addEventListener("keydown",this.handleKeyPress),document.documentElement.classList.add(C().lightboxOpen)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyPress),document.documentElement.classList.remove(C().lightboxOpen)}render(){const{onClose:e,children:t,onClickPrevious:n,onClickNext:o,previousButtonText:r,nextButtonText:a}=this.props,l=this.context;return(0,h.jsx)(s.Z,{className:i()(C().backdrop),padding:5,onClick:this.handleClickBackdrop,"data-testid":"lightboxBackdrop"},(0,h.jsx)(s.Z,{className:i()(C().backdropInner,C().fullHeight)},!l.v2_enabled&&(0,h.jsx)(v,{onClick:e}),(0,h.jsx)(s.Z,{className:i()(C().lightboxContainer,C().fullHeight),"data-testid":"lightbox"},t),n&&r&&(0,h.jsx)(y,{onClick:n,buttonText:r}),o&&a&&(0,h.jsx)(_,{onClick:o,buttonText:a})))}}w(S,"defaultProps",{onRightKeydown:void 0,onLeftKeydown:void 0,children:void 0,onClickPrevious:void 0,onClickNext:void 0,previousButtonText:void 0,nextButtonText:void 0}),w(S,"contextType",a.default);const Z=S},41937:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});n(87363);var o=n(982985),s=n(154200),r=n(894320);const i={photo:"business_photo",video:"business_video"},a=e=>{let{csrfToken:t,flagReasons:n,mediaId:a,mediaType:l,onModalClose:u}=e;return(0,r.jsx)(s.Z,{flaggableType:i[l],contentGuidelinesUrl:"/guidelines",termsOfServiceUrl:"/static?p=tos",flagReasons:n,onClose:u,submitFlagRequest:(e,n)=>{const s={csrftok:t,flag_id:a,flag_type:i[l],message:e,reason:n},r=(0,o.Z)(s);return fetch("/flag_content/submit",{credentials:"include",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8","X-Requested-With":"XMLHttpRequest"},body:r}).then((e=>{if(e.ok)return e.json();throw new Error(e.statusText)})).then((e=>({isError:!1,message:e.msg}))).catch((()=>({isError:!0,message:null})))}})}},800075:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var o=n(87363),s=n.n(o),r=n(473550),i=n.n(r),a=n(431325),l=n(280506),u=n(571885),c=n.n(u),d=n(716251),p=n.n(d),h=n(894320);const f=e=>{let{mediaItem:t}=e;const n=s().useContext(l.default).v2_enabled?p():c();return(0,h.jsx)(a.ZC,{className:i()(n.main)},"photo"===t.type?(0,h.jsx)(a.Ei,{src:t.url,alt:"",className:n.photo}):(0,h.jsx)(a.nk,{autoPlay:!0,controls:!0,controlsList:"nodownload",loop:!1,muted:!0,src:t.url,alt:"",poster:t.poster,className:n.video}))}},67036:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var o=n(87363),s=n.n(o),r=n(365778),i=n(269703),a=n(473550),l=n.n(a),u=n(858642),c=n(529977),d=n(280506),p=n(95488),h=n.n(p),f=n(983312),m=n.n(f),g=n(894320);const v="previous",b="next",_=e=>{let{onClick:t,direction:n}=e;const s=(0,o.useContext)(d.default),a=s.v2_enabled?m():h(),p={[v]:(0,i.ag)("Previous"),[b]:(0,i.ag)("Next")},f={[v]:a.previous,[b]:a.next},_={[v]:u.Z,[b]:c.Z}[n],x=s.v2_enabled?"black-regular":"white";return(0,g.jsx)(r.rU,{href:"#",handleClick:e=>{e.preventDefault(),t()},className:l()(a.navLink,f[n]),title:p[n],role:"button"},(0,g.jsx)(_,{color:x,className:a.navLinkIcon}))},x=e=>{let{onClickNext:t,onClickPrevious:n,showNext:o,showPrevious:r}=e;return(0,g.jsx)(s().Fragment,null,r&&(0,g.jsx)(_,{onClick:n,direction:v}),o&&(0,g.jsx)(_,{onClick:t,direction:b}))}},857510:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var o=n(87363),s=n.n(o),r=n(280506),i=n(90553),a=n(166020),l=n(473550),u=n.n(l),c=n(675033),d=n(617250),p=n.n(d),h=n(807621),f=n.n(h),m=n(894320);const g=e=>{let{mediaItem:t,isSelected:n,onClick:o,isFullWidth:l}=e;const d=s().useContext(r.default).v2_enabled?f():p();let h=null,g=!1;switch(t.type){case"photo":h=t.url;break;case"video":h=t.poster,g=!0}if(!h)return null;let v=(0,m.jsx)(i.ZP,{src:h,stretchToFill:!0,isVideo:g});return v=t.isBeforePhoto?(0,m.jsx)(c.Z,null,v):v,(0,m.jsx)(a.Z,{onClick:o,className:u()(d.gridThumbnail,n?d.isSelected:"",l?d.isFullWidth:"")},v)}},965183:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var o=n(87363),s=n.n(o),r=n(118896),i=n(982985),a=n(894320);const l=(e,t,n,o)=>{const s={select:t,utm_campaign:n,utm_medium:"social",utm_source:"facebook.com"},r=`https://${o}/biz_photos/${e}?${(0,i.Z)(s)}`;return`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(r)}`},u=(e,t,n,o)=>{const s={select:t,utm_campaign:n,utm_medium:"copy_link",utm_source:"(direct)"};return`https://${o}/biz_photos/${e}?${(0,i.Z)(s)}`},c=(e,t,n,o)=>{const s={select:t,utm_medium:"social",utm_source:"twitter.com",utm_campaign:n},r={url:`https://${o}/biz_photos/${e}?${(0,i.Z)(s)}`,text:"Check out this photo on Yelp"};return`https://twitter.com/intent/tweet?${(0,i.Z)(r)}`},d=e=>{let{businessAlias:t,mediaId:n,mediaType:o,onModalClose:i}=e;const[d,p]=s().useState("www.yelp.com"),h="photo"===o?"www_photo_share_popup":"www_video_share_popup";return s().useEffect((()=>{"undefined"!=typeof window&&p(window.location.hostname)}),[]),(0,a.jsx)(r.Z,{contentType:o,facebookUrl:l(t,n,h,d),onClose:i,twitterUrl:c(t,n,h,d),shareUrl:u(t,n,h,d)})}},301395:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var o=n(87363),s=n(166020),r=n(280506),i=n(332527),a=n.n(i),l=n(894320);function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends o.Component{constructor(){super(...arguments),u(this,"keepHeaderRef",(e=>{this.headerRef=e})),u(this,"keepBodyRef",(e=>{this.bodyRef=e})),u(this,"keepFooterRef",(e=>{this.footerRef=e}))}componentDidMount(){this.dynamicallyPositionBody()}componentDidUpdate(){this.dynamicallyPositionBody()}dynamicallyPositionBody(){if(!this.bodyRef)return;const e=this.headerRef?this.headerRef.offsetHeight+6:0,t=this.footerRef?this.footerRef.offsetHeight:0;Object.assign(this.bodyRef.style,{position:"absolute",top:`${e}px`,bottom:`${t}px`,left:"0",right:"0"})}render(){const e=this.context,{header:t,body:n,footer:o}=this.props;return(0,l.jsx)(s.Z,{className:a().sidebarContainer,"data-testid":"lightboxSidebar"},t&&(0,l.jsx)(s.Z,{paddingTop:e.v2_enabled?3:5,paddingRight:e.v2_enabled?3:5,paddingBottom:e.v2_enabled?1:2,paddingLeft:e.v2_enabled?3:5,tagRef:this.keepHeaderRef,className:a().sidebarHeader},t),(0,l.jsx)(s.Z,{tagRef:this.keepBodyRef},n),o&&(0,l.jsx)(s.Z,{className:a().sidebarFooter,tagRef:this.keepFooterRef},o))}}u(c,"defaultProps",{header:void 0,footer:void 0}),u(c,"contextType",r.default);const d=c},970574:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var o=n(87363),s=n(434725),r=n(522743),i=n(166020),a=n(280506),l=n(473550),u=n.n(l),c=n(857510),d=n(642324),p=n.n(d),h=n(894320);function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends o.Component{constructor(){super(...arguments),f(this,"keepSelectedThumbnailRef",(e=>{this.selectedThumbnailRef=e,e&&e.focus()})),f(this,"keepScrollContainerRef",(e=>{this.scrollContainerRef=e}))}componentDidMount(){this.scrollThumbnailIntoView()}componentDidUpdate(){this.scrollThumbnailIntoView()}isThumbnailTopAboveContainerTop(){return!(!this.selectedThumbnailRef||!this.scrollContainerRef)&&this.scrollContainerRef.scrollTop>this.selectedThumbnailRef.offsetTop}isThumbnailBottomBelowContainerBottom(){if(!this.selectedThumbnailRef||!this.scrollContainerRef)return!1;const e=this.selectedThumbnailRef.offsetTop+this.selectedThumbnailRef.offsetHeight;return this.scrollContainerRef.scrollTop+this.scrollContainerRef.offsetHeight<e}scrollToThumbnailTop(){this.selectedThumbnailRef&&this.scrollContainerRef&&(this.scrollContainerRef.scrollTop=this.selectedThumbnailRef.offsetTop)}scrollToThumbnailBottom(){if(!this.selectedThumbnailRef||!this.scrollContainerRef)return;const e=this.selectedThumbnailRef.offsetTop+this.selectedThumbnailRef.offsetHeight;this.scrollContainerRef.scrollTop=e-this.scrollContainerRef.offsetHeight}scrollThumbnailIntoView(){this.isThumbnailTopAboveContainerTop()?this.scrollToThumbnailTop():this.isThumbnailBottomBelowContainerBottom()&&this.scrollToThumbnailBottom()}render(){const e=this.context,{mediaItems:t,scrollContextHeader:n,scrollContextFooter:o,currentMediaIndex:a,onClickMediaItem:l,noFullWidth:d}=this.props,f=t.map(((n,o)=>{const r=o===a,i=o+1;let f;var m,g;return f=!e.v2_enabled&&(!d&&(m=i,(g=t.length)<5||m%3==0||m===g&&m%3==1)),(0,h.jsx)(s.Z,{tabIndex:0,onFocus:()=>{l(o)},tagRef:e=>{r&&this.keepSelectedThumbnailRef(e)},key:n.url,className:u()(f?p().fullWidthThumbnail:"",p().noFocusOutline)},(0,h.jsx)(c.Z,{mediaItem:n,isSelected:r,onClick:()=>{l(o)},isFullWidth:f}))}));return(0,h.jsx)(i.Z,{className:p().scrollContainer,tagRef:this.keepScrollContainerRef},(0,h.jsx)(i.Z,{paddingRight:e.v2_enabled?3:5,paddingBottom:e.v2_enabled?2:3,paddingLeft:e.v2_enabled?3:5},n,(0,h.jsx)(r.Z,{gutter:1,layoutUnits:2,layoutWrap:"borderless"},f),o))}}f(m,"defaultProps",{scrollContextHeader:null,scrollContextFooter:null,noFullWidth:!1}),f(m,"contextType",a.default);const g=m},451532:(e,t,n)=>{"use strict";n.d(t,{H7:()=>s,MG:()=>r,VR:()=>o});const o="Lightbox",s="Popular Dish Lightbox",r="Project Lightbox"},833565:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var o=n(87363),s=n.n(o);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i={click:"onClick",focusin:"onFocus",focusout:"onFocus",mousedown:"onMouseDown",mouseup:"onMouseUp",touchstart:"onTouchStart",touchend:"onTouchEnd"},a=function(e){var t,n=e.children,a=e.onClickAway,l=e.focusEvent,u=void 0===l?"focusin":l,c=e.mouseEvent,d=void 0===c?"click":c,p=e.touchEvent,h=void 0===p?"touchend":p,f=(0,o.useRef)(null),m=(0,o.useRef)(null),g=(0,o.useRef)(!1);(0,o.useEffect)((function(){return setTimeout((function(){g.current=!0}),0),function(){g.current=!1}}),[]);var v=function(e){return function(t){m.current=t.target;var o=null==n?void 0:n.props[e];o&&o(t)}};(0,o.useEffect)((function(){var e,t,n=null!==(e=null===(t=f.current)||void 0===t?void 0:t.ownerDocument)&&void 0!==e?e:document,o=function(e){g.current&&(f.current&&f.current.contains(e.target)||m.current===e.target||!n.contains(e.target)||a(e))};return n.addEventListener(d,o),n.addEventListener(h,o),n.addEventListener(u,o),function(){n.removeEventListener(d,o),n.removeEventListener(h,o),n.removeEventListener(u,o)}}),[u,d,a,h]);var b=i[d],_=i[h],x=i[u];return s().Children.only((0,o.cloneElement)(n,(r(t={ref:function(e){f.current=e;var t=n.ref;"function"==typeof t?t(e):t&&(t.current=e)}},x,v(x)),r(t,b,v(b)),r(t,_,v(_)),t)))};a.displayName="ClickAwayListener";var l=n(431325),u=n(269703),c=n(166020),d=n(561060),p=n(701193),h=n(73804),f=n(750873),m=n(574430),g=n(187180),v=n(234177),b=n.n(v),_=n(894320);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},x.apply(this,arguments)}const y=(0,h.Z)((e=>{let{buttonType:t,items:n,title:s=(0,u.ag)("Menu"),updateOpenState:r,updateOnTabAway:i,updateMenuItems:h}=e;const v=o.useId(),y=o.useRef(null),[j,C]=o.useState(!1);o.useEffect((()=>{r(j)}),[j,r]),o.useEffect((()=>{y.current&&h&&h(y.current.querySelectorAll("a, button"))}),[h]),o.useEffect((()=>{i&&i((()=>{C(!1)}))}),[C,i]);const w=o.useCallback((e=>{y.current&&!y.current.contains(e.target)&&C(!1)}),[C]),S=o.useCallback((e=>{"Escape"===e.key&&C(!1)}),[C]),Z=o.useCallback((()=>{C((e=>!e))}),[C]),T=o.useCallback(((e,t)=>{const{onClick:n,...o}=e;return(0,_.jsx)(m.Z,x({key:`${v}-${t}`,onClick:e=>{n&&n(e),C(!1)}},o,{aria:{role:"menuitem"}}))}),[v,C]);return(0,_.jsx)(l.ZC,{onKeyUp:S,role:"presentation"},(0,_.jsx)(c.Z,{display:"inline-block",className:b()["menu-popover-container"]},(0,_.jsx)(d.Z,{icon:p.Z,onClick:Z,title:s,type:t,aria:{"aria-haspopup":!0,"aria-expanded":j}}),j?(0,_.jsx)(a,{onClickAway:w},(0,_.jsx)(o.Fragment,null,(0,_.jsx)(c.Z,{className:b()["menu-popover"]},(0,_.jsx)(f.Z,{className:b().menu,tagRef:y,aria:{role:"menu"}},n.map(((e,t)=>Array.isArray(e)?(0,_.jsx)(g.Z,{key:`${v}-${t}`},e.map(((e,n)=>T(e,`${t}-${n}`)))):T(e,t.toString()))))))):null))}))},925779:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var o=n||0,s=t;return[s[e[o++]],s[e[o++]],s[e[o++]],s[e[o++]],"-",s[e[o++]],s[e[o++]],"-",s[e[o++]],s[e[o++]],"-",s[e[o++]],s[e[o++]],"-",s[e[o++]],s[e[o++]],s[e[o++]],s[e[o++]],s[e[o++]],s[e[o++]]].join("")}},813049:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},454160:(e,t,n)=>{var o=n(813049),s=n(925779);e.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||o)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;++a)t[r+a]=i[a];return t||s(i)}}}]);
//# sourceMappingURL=https://js-sourcemaps.yelpcorp.com/assets/public/module_yelp-frontend_shared-96ba6d79fe844ce2a859c8f5ef5753a5894748aa.yji-3a4186b2de38bb281242.js.map
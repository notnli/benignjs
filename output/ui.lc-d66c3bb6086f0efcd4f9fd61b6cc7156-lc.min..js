(self["tmg.build"]=self["tmg.build"]||[]).push([[522,493,625,164,2,768,378,661,380,209,580,702,582],{181:(t,e,i)=>{t.exports=function t(e,i,s){function n(o,a){if(!i[o]){if(!e[o]){if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[o]={exports:{}};e[o][0].call(l.exports,(function(t){return n(e[o][1][t]||t)}),l,l.exports,t,e,i,s)}return i[o].exports}for(var r=void 0,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(t,e,i){"use strict";var s=t("../src/store-engine"),n=[t("../storages/localStorage"),t("../storages/sessionStorage"),t("../storages/cookieStorage"),t("../storages/memoryStorage")];e.exports=s.createStore(n,[])},{"../src/store-engine":2,"../storages/cookieStorage":4,"../storages/localStorage":5,"../storages/memoryStorage":6,"../storages/sessionStorage":7}],2:[function(t,e,i){"use strict";function s(t,e,i){i||(i=""),t&&!u(t)&&(t=[t]),e&&!u(e)&&(e=[e]);var s=i?"__storejs_"+i+"_":"",n=i?new RegExp("^"+s):null;if(!/^[a-zA-Z0-9_\-]*$/.test(i))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var p={_namespacePrefix:s,_namespaceRegexp:n,_testStorage:function(t){try{var e="__storejs__test__";t.write(e,e);var i=t.read(e)===e;return t.remove(e),i}catch(t){return!1}},_assignPluginFnProp:function(t,e){var i=this[e];this[e]=function(){var e=r(arguments,0),s=this,n=[function(){if(i)return a(arguments,(function(t,i){e[i]=t})),i.apply(s,e)}].concat(e);return t.apply(s,n)}},_serialize:function(t){return JSON.stringify(t)},_deserialize:function(t,e){if(!t)return e;var i="";try{i=JSON.parse(t)}catch(e){i=t}return void 0!==i?i:e},_addStorage:function(t){this.enabled||this._testStorage(t)&&(this.storage=t,this.enabled=!0)},_addPlugin:function(t){var e=this;if(u(t))a(t,(function(t){e._addPlugin(t)}));else{var i=o(this.plugins,(function(e){return t===e}));if(!i){if(this.plugins.push(t),!d(t))throw new Error("Plugins must be function values that return objects");var s=t.call(this);if(!h(s))throw new Error("Plugins must return an object of function properties");a(s,(function(i,s){if(!d(i))throw new Error("Bad plugin property: "+s+" from plugin "+t.name+". Plugins should only return functions.");e._assignPluginFnProp(i,s)}))}}},addStorage:function(t){(function(){var t="undefined"==typeof console?null:console;t&&(t.warn?t.warn:t.log).apply(t,arguments)})("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(t)}},m=l(p,g,{plugins:[]});return m.raw={},a(m,(function(t,e){d(t)&&(m.raw[e]=c(m,t))})),a(t,(function(t){m._addStorage(t)})),a(e,(function(t){m._addPlugin(t)})),m}var n=t("./util"),r=n.slice,o=n.pluck,a=n.each,c=n.bind,l=n.create,u=n.isList,d=n.isFunction,h=n.isObject;e.exports={createStore:s};var g={version:"2.0.12",enabled:!1,get:function(t,e){var i=this.storage.read(this._namespacePrefix+t);return this._deserialize(i,e)},set:function(t,e){return void 0===e?this.remove(t):(this.storage.write(this._namespacePrefix+t,this._serialize(e)),e)},remove:function(t){this.storage.remove(this._namespacePrefix+t)},each:function(t){var e=this;this.storage.each((function(i,s){t.call(e,e._deserialize(i),(s||"").replace(e._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(t){return this._namespacePrefix=="__storejs_"+t+"_"},createStore:function(){return s.apply(this,arguments)},addPlugin:function(t){this._addPlugin(t)},namespace:function(t){return s(this.storage,this.plugins,t)}}},{"./util":3}],3:[function(t,e,s){(function(t){"use strict";function i(t,e){return Array.prototype.slice.call(t,e||0)}function s(t,e){n(t,(function(t,i){return e(t,i),!1}))}function n(t,e){if(r(t)){for(var i=0;i<t.length;i++)if(e(t[i],i))return t[i]}else for(var s in t)if(t.hasOwnProperty(s)&&e(t[s],s))return t[s]}function r(t){return null!=t&&"function"!=typeof t&&"number"==typeof t.length}var o=Object.assign?Object.assign:function(t,e,i,n){for(var r=1;r<arguments.length;r++)s(Object(arguments[r]),(function(e,i){t[i]=e}));return t},a=function(){if(Object.create)return function(t,e,s,n){var r=i(arguments,1);return o.apply(this,[Object.create(t)].concat(r))};var t=function(){};return function(e,s,n,r){var a=i(arguments,1);return t.prototype=e,o.apply(this,[new t].concat(a))}}(),c=String.prototype.trim?function(t){return String.prototype.trim.call(t)}:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},l="undefined"!=typeof window?window:t;e.exports={assign:o,create:a,trim:c,bind:function(t,e){return function(){return e.apply(t,Array.prototype.slice.call(arguments,0))}},slice:i,each:s,map:function(t,e){var i=r(t)?[]:{};return n(t,(function(t,s){return i[s]=e(t,s),!1})),i},pluck:n,isList:r,isFunction:function(t){return t&&"[object Function]"==={}.toString.call(t)},isObject:function(t){return t&&"[object Object]"==={}.toString.call(t)},Global:l}}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,e,i){"use strict";function s(t){for(var e=l.cookie.split(/; ?/g),i=e.length-1;i>=0;i--)if(c(e[i])){var s=e[i].split("="),n=unescape(s[0]);t(unescape(s[1]),n)}}function n(t){t&&r(t)&&(l.cookie=escape(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function r(t){return new RegExp("(?:^|;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(l.cookie)}var o=t("../src/util"),a=o.Global,c=o.trim;e.exports={name:"cookieStorage",read:function(t){if(!t||!r(t))return null;var e="(?:^|.*;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(l.cookie.replace(new RegExp(e),"$1"))},write:function(t,e){t&&(l.cookie=escape(t)+"="+escape(e)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")},each:s,remove:n,clearAll:function(){s((function(t,e){n(e)}))}};var l=a.document},{"../src/util":3}],5:[function(t,e,i){"use strict";function s(){return r.localStorage}function n(t){return s().getItem(t)}var r=t("../src/util").Global;e.exports={name:"localStorage",read:n,write:function(t,e){return s().setItem(t,e)},each:function(t){for(var e=s().length-1;e>=0;e--){var i=s().key(e);t(n(i),i)}},remove:function(t){return s().removeItem(t)},clearAll:function(){return s().clear()}}},{"../src/util":3}],6:[function(t,e,i){"use strict";e.exports={name:"memoryStorage",read:function(t){return s[t]},write:function(t,e){s[t]=e},each:function(t){for(var e in s)s.hasOwnProperty(e)&&t(s[e],e)},remove:function(t){delete s[t]},clearAll:function(t){s={}}};var s={}},{}],7:[function(t,e,i){"use strict";function s(){return r.sessionStorage}function n(t){return s().getItem(t)}var r=t("../src/util").Global;e.exports={name:"sessionStorage",read:n,write:function(t,e){return s().setItem(t,e)},each:function(t){for(var e=s().length-1;e>=0;e--){var i=s().key(e);t(n(i),i)}},remove:function(t){return s().removeItem(t)},clearAll:function(){return s().clear()}}},{"../src/util":3}]},{},[1])(1)},414:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var s=i(453);class n{constructor(t){this.params=Object.assign({accordionSelector:"[data-accordion]",triggerSelector:"[data-accordion-trigger]",contentSelector:"[data-accordion-content]",hideClasses:["accordion--is-collapsed"]},t)}init(){const t=document.querySelectorAll(this.params.accordionSelector);t.length>0&&t.forEach((t=>{this.setTriggerListeners(t)}))}setTriggerListeners(t){let e=t.querySelector(this.params.triggerSelector);e&&e.addEventListener("click",(e=>{const i=t.dataset.accordionAnimate,s=parseInt(t.dataset.accordionMaxScreenWidth);(0===s||window.innerWidth<s)&&(e.preventDefault(),i?this.animateAccordion(t):this.toggleClass(t),this.toggleState(t))}))}toggleClass(t){this.params.hideClasses.forEach((e=>{t.classList.toggle(e)}))}toggleState(t){const e=t.querySelector(this.params.contentSelector);null!==e.getAttribute("aria-hidden")&&e.setAttribute("aria-hidden","false"===e.getAttribute("aria-hidden")?"true":"false");const i=t.querySelector(this.params.triggerSelector);null!==i.getAttribute("aria-expanded")&&(i.setAttribute("aria-expanded","false"===i.getAttribute("aria-expanded")?"true":"false"),this.toggleAccordionFocus(e,i)),null!==i.getAttribute("aria-label")&&i.hasAttribute("toggle-aria-label")&&this.toggleAriaLabel(i)}animateAccordion(t){const e=document.getElementById(t.dataset.accordionAnimate),i=e.clientHeight,s=e.scrollHeight,n=!i,r=e.style.height;if(t.classList.toggle("accordion--animation-collapsed"),e.style.height=(n||!r?s:0)+"px",!r)return t.classList.toggle("accordion--animation-collapsed"),this.animateAccordion(t)}toggleAriaLabel(t){const e=t.getAttribute("aria-label"),i="Show",s="Hide";if(e.startsWith(i)||e.startsWith(s)){const n=e.startsWith(i)?e.replace(i,s):e.replace(s,i);t.setAttribute("aria-label",n)}}toggleAccordionFocus(t,e){"true"===e.getAttribute("aria-expanded")?t.focus():e.focus()}}s.Z.subscribe({topic:"tmg.page.ready",func:()=>{new n({hideClasses:["accordion--is-collapsed","accordion--is-expanded"]}).init()},runIfAlreadyPublished:!0});const r=n},729:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var s=i(414),n=i(104),r=i(453);class o{constructor(){this.openTriggerSelector="[data-modal-open-button]",this.openButton=document.querySelector(this.openTriggerSelector),this.modal=document.querySelector(".all-sections-modal"),this.keydownActions=this.keydownActions.bind(this),this.options={hasContent:!0,keyboardNavigation:!1,firstFocusableElement:"",lastFocusableElement:""}}init(){this.modal&&(this.setModalHeaderContent(),this.initAccordionForModal(),this.initCountrySelector(),this.bindButtonClick(this.openButton))}bindButtonClick(t){t&&t.addEventListener("click",(t=>{t.preventDefault(),this.toggleModal()}))}toggleModal(){this.modal.classList.toggle("all-sections-modal--hidden"),document.querySelector("html").classList.toggle("all-sections-modal--is-open"),this.toggleFocusableElement(),this.bindKeydownEventListeners(),this.modal.classList.contains("all-sections-modal--hidden")?this.modal.setAttribute("aria-hidden",!0):this.modal.setAttribute("aria-hidden",!1)}bindKeydownEventListeners(){this.modal.classList.contains("all-sections-modal--hidden")?document.removeEventListener("keydown",this.keydownActions):document.addEventListener("keydown",this.keydownActions)}setModalHeaderContent(){this.modal.insertAdjacentHTML("afterbegin",`\n\t\t\t<header class="site-header all-sections-modal__header-wrapper">\n\t\t\t\t<div class="site-header__container site-header__primary-content all-sections-modal__header-content">\n\n\t\t\t\t\t<div class="site-header__logo">\n\t\t\t\t\t\t<a href="https://www.telegraph.co.uk" class="e-site-logo">\n\t\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg"\n\t\t\t\t\t\t\t\taria-labelledby="site-logo-title"\n\t\t\t\t\t\t\t\tclass="e-site-logo__image">\n\t\t\t\t\t\t\t\t<use xlink:href="#site-logo"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t${this.hasPoppyLogo()?this.getPoppyMarkup():""}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="all-sections-modal__button">\n\t\t\t\t\t\t<div class="e-site-header-button e-site-header-button--close">\n\t\t\t\t\t\t\t<a href=""\n\t\t\t\t\t\t\t\tclass="e-site-header-button__link"\n\t\t\t\t\t\t\t\taria-label="Close all sections navigation menu"\n\t\t\t\t\t\t\t\tdata-modal-close-button>\n\t\t\t\t\t\t\t\t<span class="all-sections-modal__button-text">Close Menu</span>\n\t\t\t\t\t\t\t\t<svg id="global-close" class="e-site-header-button__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792">\n\t\t\t\t\t\t\t\t\t<polygon points="1792,1712.8 975.2,896 1792,79.2 1712.8,0 896,816.8 79.2,0 0,79.2 816.8,896 0,1712.8 79.2,1792 896,975.2\n\t\t\t\t\t\t\t\t\t\t1712.8,1792"/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</header>`),this.bindButtonClick(document.querySelector("[data-modal-close-button]"))}keydownActions(t){this.bindEscapeKey(t),this.trapFocusWithinModal(t)}bindEscapeKey(t){27===t.keyCode&&(this.resetScrollPosition(),this.toggleModal())}trapFocusWithinModal(t){this.options.hasContent&&(9===t.keyCode||t.shiftKey&&9===t.keyCode)&&(this.options.keyboardNavigation||this.setFocusPosition(t,!0,!0),t.shiftKey&&9===t.keyCode?t.target===this.options.firstFocusableElement&&this.setFocusPosition(t,!1):9===t.keyCode&&t.target===this.options.lastFocusableElement&&this.setFocusPosition(t,!0))}setFocusPosition(t,e,i=!1){t.preventDefault(),i&&(this.options.keyboardNavigation=!0),e?this.options.firstFocusableElement.focus():this.options.lastFocusableElement.focus()}defineFocusableElements(){const t=this.modal.querySelectorAll("a, button");this.options.firstFocusableElement=t[0],this.options.lastFocusableElement=t[t.length-1]}toggleFocusableElement(){this.options.keyboardNavigation&&(this.modal.classList.contains("all-sections-modal--hidden")?this.openButton.focus():this.options.firstFocusableElement.focus())}resetScrollPosition(){this.modal.classList.contains("all-sections-modal--hidden")||0===this.modal.scrollTop||(this.modal.scrollTop=0)}initAccordionForModal(){new s.Z({accordionSelector:"[data-accordion-modal]",hideClasses:["accordion--is-collapsed","accordion--is-expanded"]}).init()}initCountrySelector(){const t=document.querySelector('[data-js="country-selector-all-section"]');t&&new n.ZP(t).init()}hasPoppyLogo(){const t=document.querySelector("[data-has-poppy-logo]");return t&&"true"===t.getAttribute("data-has-poppy-logo")}getPoppyMarkup(){return'<div class="e-site-logo__poppy">\n\t\t\t<svg viewbox="0 0 17 32">\n\t\t\t\t<use xlink:href="#poppy"></use>\n\t\t\t</svg>\n\t\t</div>'}}r.Z.subscribe({topic:"tmg.page.ready",func:()=>{(new o).init()},runIfAlreadyPublished:!0});const a=o},104:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>u});var s=i(453),n=i(42);const r="uk",o=new Map([["us",{title:"US Edition",pathname:"/us/",code:"us",iconNode:'<img src="/etc.clientlibs/settings/wcm/designs/telegraph/core/clientlibs/ui/dist/static/resources/images/flags/USA-SVG.svg" fetchpriority="high"/>'}],[r,{title:"UK Edition",pathname:"/",code:r,iconNode:'<img src="/etc.clientlibs/settings/wcm/designs/telegraph/core/clientlibs/ui/dist/static/resources/images/flags/UK-SVG.svg" fetchpriority="high"/>'}]]),a=o.get(r),c="tmg_ie";class l{constructor(t){this.element=t,this.activeCountry=a,this.activePagePath=window.location.pathname||a.pathname,this.countrySelectorButtonText=t&&t.querySelector('[data-js="country-selector__button-text"]'),this.countrySelectorButtonIcon=t&&t.querySelector('[data-js="country-selector__button-icon"]'),this.bindEvents()}setActiveItem(t){this.activeCountry=o.get(t)||a;const e=this.element.querySelector(`[data-country="${this.activeCountry.code}"]`);e&&e.parentNode.remove(),this.updateCountrySelectorButton(this.activeCountry)}updateCountrySelectorButton(t){this.activePagePath!==a.pathname&&(this.countrySelectorButtonText.innerText=t.title,this.countrySelectorButtonIcon.innerHTML=t.iconNode)}getTMGEditionCookie(){const t=n.Z.get(c);return t&&t.toLowerCase()}onClickEditionSelector(t){n.Z.set(c,t.currentTarget.dataset.country,{expires:365,domain:".telegraph.co.uk"})}bindEvents(){const t=this.element.querySelectorAll('[data-js="country-selector-link"]');for(let e of t)e.addEventListener("click",this.onClickEditionSelector)}init(){this.tmgEditionCookie?this.setActiveItem(this.tmgEditionCookie):o.forEach((({pathname:t},e)=>{t===this.activePagePath&&this.setActiveItem(e)}))}}s.Z.subscribe({topic:"tmg.page.ready",func:function(){const t=document.querySelector('[data-js="country-selector"]');t&&new l(t).init()},runIfAlreadyPublished:!0});const u=l},74:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var s=i(453),n=i(77);class r{constructor(t){this.params=Object.assign({scrollableBarSelector:"[data-drag-scroll]",activeClass:"is-dragging",defaultPositionSelector:""},t),this.options={scrollableBar:document.querySelector(this.params.scrollableBarSelector),isDragging:!1,startMousePosition:0,startScrollPosition:0,startScrollItem:null,endScrollItem:null}}init(){this.options.scrollableBar&&(""!==this.params.defaultPositionSelector&&this.scrollToCurrentItem(),this.isTouchDevice()||this.bindListeners())}bindListeners(){this.options.scrollableBar.addEventListener("mousedown",(t=>{this.onMouseDown(t)})),window.addEventListener("mouseup",(t=>{this.options.isDragging&&this.onMouseUp(t)})),window.addEventListener("mousemove",n.Z.throttle((t=>{this.options.isDragging&&this.onDrag(t)}),10)),this.handleDragLinkClick()}setStartPosition(t){this.options.startMousePosition=t.pageX-this.options.scrollableBar.offsetLeft,this.options.startScrollPosition=this.options.scrollableBar.scrollLeft}onMouseDown(t){this.options.isDragging=!0,t.preventDefault(),this.options.startScrollItem=t.target,this.options.endScrollItem=null,this.setStartPosition(t),this.toggleActiveClass(!0)}onMouseUp(t){this.options.isDragging=!1,this.toggleActiveClass(!1),this.options.endScrollItem=t.target}onDrag(t){let e=t.pageX-this.options.scrollableBar.offsetLeft-this.options.startMousePosition;this.options.scrollableBar.scrollLeft=this.options.startScrollPosition-e}handleDragLinkClick(){this.options.scrollableBar.querySelectorAll("a").forEach((t=>{t.addEventListener("click",(t=>{this.hasScrolled()&&this.options.startScrollItem===this.options.endScrollItem&&(t.preventDefault(),this.options.startScrollItem=null,this.options.endScrollItem=null)}))}))}hasScrolled(){return this.options.startScrollPosition!==this.options.scrollableBar.scrollLeft}scrollToCurrentItem(){const t=this.options.scrollableBar.querySelector(this.params.defaultPositionSelector);t&&t.offsetLeft>this.options.scrollableBar.offsetWidth-100&&(this.options.scrollableBar.scrollLeft=t.offsetLeft/2)}toggleActiveClass(t){(t&&!this.options.scrollableBar.classList.contains(this.params.activeClass)||!t&&this.options.scrollableBar.classList.contains(this.params.activeClass))&&this.options.scrollableBar.classList.toggle(this.params.activeClass)}isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints}}s.Z.subscribe({topic:"tmg.page.ready",func:()=>{new r({defaultPositionSelector:"[data-current-navigation-item]"}).init()},runIfAlreadyPublished:!0});const o=r},410:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var s=i(453),n=i(384),r=i(436);class o{constructor(){this.params={local:"local",qa:"qa",ci:"ci",staging:"staging",prod:"prod"},this.currentEnv=this.determineEnvironment(),n.Z.create("tmg.environment"),tmg.environment={currentEnv:this.currentEnv,getEnvironment:this.getEnvironment,getList:this.getList,getTld:this.getTld,isCommentingTurnedOn:this.isCommentingTurnedOn,isHttps:this.isHttps,isLocal:this.isLocal,isProd:this.isProd}}determineEnvironment(){const t=r.Z.getLocation().hostname.split(".");return t.some((t=>"local"===t||"127"===t||"localhost"===t))?this.getList().local:t.some((t=>/(^|-)ci[0-9]+(-app)?$/i.test(t)))?this.getList().ci:t.some((t=>/(^|-)qa[0-9]+(-app)?$/i.test(t)))?this.getList().qa:t.some((t=>/(^|-)staging(.*)$/i.test(t)))?this.getList().staging:this.getList().prod}getList(){return this.params}getEnvironment(){return this.currentEnv}getTld(){return"telegraph.co.uk"}isCommentingTurnedOn(){let t=!1;try{void 0!==tmg.COMMENTING_STATUS&&(t=!!tmg.COMMENTING_STATUS)}catch(t){console.log(t)}return t}isHttps(){return"https:"===r.Z.getLocation().protocol||this.isLocal()}isLocal(){return this.getEnvironment()===this.getList().local}isProd(){return this.getEnvironment()===this.getList().prod}}s.Z.subscribe({topic:"tmg.page.ready",func:new o,runIfAlreadyPublished:!0});const a=o},436:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var s=i(384),n=i(453);class r{constructor(){s.Z.create("tmg.page"),tmg.page={getMetaTag:this.getMetaTag,getMetaContent:this.getMetaContent,getPageType:this.getPageType,getPageTitle:this.getPageTitle,getChannel:this.getChannel,getBusinessSegment:this.getBusinessSegment,getCategory:this.getCategory,getContentType:this.getContentType,getArticleId:this.getArticleId,getPublishDate:this.getPublishDate,getKeywords:this.getKeywords,getLocation:this.getLocation,getLeadAssetLayout:this.getLeadAssetLayout,isArticle:this.isArticle,isSponsored:this.isSponsored,isGallery:this.isGallery,isGallery2:this.isGallery2,isPremium:this.isPremium,isApp:this.isApp.bind(this)}}getPageType(){return window.dataLayer&&window.dataLayer.pageType}getPageTitle(){return document.title}getChannel(){return this.getMetaContent("tmgads.channel")}getCategory(){return this.getMetaContent("DCSext.Category")}getBusinessSegment(){return this.getMetaContent("tmgads.businessSegment")}getContentType(){return this.getMetaContent("DCSext.Content_Type")}getArticleId(){return this.getMetaContent("tmgads.articleid")}getPublishDate(){return this.getMetaContent("DCSext.articleFirstPublished")}getKeywords(){return this.getMetaContent("keywords").split(",").map((t=>t.trim()))}getLocation(){return document.location}getMetaContent(t,e="content"){const i=this.getMetaTag(t);let s="generic";return i&&i.getAttribute(e)&&(s=i.getAttribute(e)),s}getMetaTag(t){return document.querySelector(`meta[name='${t}']`)}isArticle(){let t=!1;return["articleRenderer","articleRenderer2","longFormRenderer"].forEach((e=>{this.getPageType()===e&&(t=!0)})),t}isGallery(){return"galleryRenderer"===this.getPageType()}isGallery2(){return"galleryRenderer2"===this.getPageType()}isSponsored(){return"sponsored"===this.getBusinessSegment()}isPremium(){return"true"===this.getMetaContent("tmg.premium.state")}isApp(){return"true"===this.getMetaContent("tmg.app")}isAuthor(){return document.documentElement.hasAttribute("data-is-author")}getLeadAssetLayout(){return this.isArticle()&&document.querySelector("[data-lead-asset-layout]")?document.querySelector("[data-lead-asset-layout]").dataset.leadAssetLayout:this.isArticle()?"hidden":void 0}}n.Z.subscribe({topic:"tmg.page.ready",func:new r,runIfAlreadyPublished:!0});const o=new r},453:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var s=i(384);const n=new class{constructor(){this.topics=[],this.publishedTopics=[],this.UID=-1}subscribe({topic:t,func:e,runIfAlreadyPublished:i}){if("function"!=typeof e)return!1;if(i)for(let i=0;i<this.publishedTopics.length;i++)this.publishedTopics[i]===t&&e.call();const s=(this.UID+=1).toString();return this.topics.push({token:s,topic:t,func:e}),s}unsubscribe({topic:t}){for(let e=0;e<this.topics.length;e++)this.topics[e].topic===t&&this.topics.splice(e,1)}publish({topic:t}){this.publishedTopics.push(t);for(let e=0;e<this.topics.length;e++)this.topics[e].topic===t&&this.topics[e].func.call()}};s.Z.create("tmg.pubsub"),window.tmg.pubsub=n;const r=n},177:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var s=i(384),n=i(453),r=i(42),o=i(987),a=i(436),c=i(951),l=i(978);class u{constructor(){s.Z.create("tmg.dataLayerUtils"),window.dataLayer=window.dataLayer||{},this.cookieStatus=this.getCookies(),this.isPaymentRenderer=window.dataLayer.pageType&&"paymentRenderer"===window.dataLayer.pageType,this.listenerEvents=["click","input"],this.initListeners("[data-layer-event]"),tmg.dataLayerUtils={cookieStatus:this.cookieStatus,update:this.update,isPaymentRenderer:this.isPaymentRenderer,onRegistrationSuccess:this.onRegistrationSuccess,onRegistrationUpdate:this.onRegistrationUpdate,onSubscriptionConfirmation:this.onSubscriptionConfirmation,updateSubscription:this.updateSubscription,updateUserStatus:this.updateUserStatus,checkCookie:this.checkCookie,removeCookie:this.removeCookie,addPropertyValue:this.addPropertyValue},this.update()}update(){this.cookieStatus.registrationSuccess.value?(this.onRegistrationSuccess(),this.removeCookie(this.cookieStatus.registrationSuccess.name)):this.cookieStatus.registrationUpdate.value?(this.onRegistrationUpdate(),this.removeCookie(this.cookieStatus.registrationUpdate.name)):this.cookieStatus.subscriptionConfirmation.value?(this.onSubscriptionConfirmation(),this.removeCookie(this.cookieStatus.subscriptionConfirmation.name)):this.isPaymentRenderer&&this.updateSubscription(),this.updateUserStatus()}updateUserStatus(){o.Z.isLoggedIn()?window.dataLayer.userStatus=o.Z.isSubscriber()?"subscribed":"registered":window.dataLayer.userStatus="anonymous"}onRegistrationSuccess(){const t=this.checkCookie(this.cookieStatus.registrationSuccess,"success_facebook"),e=this.checkCookie(this.cookieStatus.registrationSuccess,"success_emailoffers-true");window.dataLayer.event=["registrationComplete"],window.dataLayer.registration={registrationType:t?"facebook":"email",emailOptIn:e?"true":"false"}}onRegistrationUpdate(){"1"!==this.cookieStatus.registrationUpdate.value?(window.dataLayer.event=["registrationUpdate","newsletterSignup"],window.dataLayer.newsletterType=this.cookieStatus.registrationUpdate.value):window.dataLayer.event=["registrationUpdate"],window.dataLayer.registration={registrationType:"email"}}onSubscriptionConfirmation(){window.dataLayer.event=["subscriptionConfirmation"],window.dataLayer.subscription=l.Z.tryParse(JSON.stringify(this.cookieStatus.subscriptionConfirmation.value))}updateSubscription(){window.dataLayer.event=["subscriptionCheckout"],window.dataLayer.subscription={productID:c.Z.getQuerystringParam(a.Z.getLocation().search,"productId")}}checkCookie(t,e){return!(!t||!e)&&t.value===e}removeCookie(t=null){t&&r.Z.remove(t,{domain:".telegraph.co.uk"})}initListeners(t){const e=document.querySelectorAll(t);e&&e.forEach((t=>this.bindListeners(t)))}bindListeners(t){this.listenerEvents.forEach((e=>{t.addEventListener(e,(t=>{this.addEvent(t.target.dataset.layerEvent)}))}))}addEvent(t){window.dataLayer.event!==t&&(window.dataLayer.event=t)}getCookies(){return{registrationSuccess:{name:"tmg_registration_success",value:r.Z.get("tmg_registration_success")},registrationUpdate:{name:"tmg_registration_update",value:r.Z.get("tmg_registration_update")},subscriptionConfirmation:{name:"tmg_subscription_confirmation",value:r.Z.get("tmg_subscription_confirmation")}}}static addPropertyValue(t,e){t&&e&&(window.dataLayer[t]=e)}}n.Z.subscribe({topic:"tmg.page.ready",func:()=>{new u},runIfAlreadyPublished:!0});const d=u},837:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var s=i(384);const n=()=>{s.Z.create("tmg.guid"),window.tmg.guid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))};i(453).Z.subscribe({topic:"tmg.page.ready",func:n,runIfAlreadyPublished:!0});const r={guid:n}},987:(t,e,i)=>{"use strict";i.d(e,{Z:()=>P});var s=i(42),n=i(978),r=i(384),o=i(470),a=i(436),c=i(453);const l={pId:"",firstName:"",lastName:"",username:"",email:"",readerType:"",subscriber:"",subButton:"",subscriptionType:"",subscriptionName:""},u={viafouraRefresh:"VfRefresh",pianoRefToken:"user_ref_token",pianoIDToken:"__utp",meterCount:"tmg_meter_count",personalisation:"tmg_p13n",publicId:"tmg_pid",registrationSuccess:"tmg_registration_success",rememberMe:"tmg_rem",session:"tmg_session",refreshToken:"tmg_refresh",subscriptionConfirmation:"tmg_subscription_confirmation"},d="ACCESS_TOKEN",h="validAppUser",g="tmg.user.mytelegraph.token",p="tmg.user.mytelegraph.onboarded.status",m="logged-in--",f="is-subscriber--",b="app-tmg-subscriber--",v=document.querySelector("html");let y={};const S=(t,e)=>{if(e||(()=>{let t=document.querySelectorAll(`[class*="${m}"], [class*="${f}"], [class*="${b}"]`);t=Array.prototype.slice.call(t),t.forEach((t=>{S(t,!0)}))})(),!t)return;let i=`\\b(?:${m}|${f}|${b}).+\\b`;return t.className=t.className.replace(new RegExp(i,"g"),""),t.classList&&(t.classList.add(`${m}${k()}`),t.classList.add(`${f}${E()}`),t.classList.add(`${b}${T()}`)),t.classList},w=()=>{let t=s.Z.get(u.personalisation);return n.Z.tryParse(t,l)},k=()=>!!s.Z.get(u.session),E=()=>"true"===y.subscriber,C=()=>!!localStorage.getItem(d),L=()=>localStorage.getItem(h)||"{}",T=()=>{try{const t=L(),e=C(),i="TMG"===JSON.parse(t).subscriptionType;return e&&i}catch(t){return!1}},A=()=>{try{const t=L(),e=C(),i="All Digital Access"===JSON.parse(t).subscriptionName;return e&&i}catch(t){return!1}},_=()=>(window.sessionStorage.removeItem("id_token"),window.sessionStorage.removeItem("access_token"),window.localStorage.removeItem(h),window.localStorage.removeItem(d),void 0!==window.vf&&window.vf.session.logout(),s.Z.remove(u.viafouraRefresh),s.Z.remove(u.session),I(),!0),I=()=>(y=w(),S(v),y),x={applyStatusCssClasses:S,clearAllData:()=>{_();for(let t in u)s.Z.remove(u[t]);o.Z.remove("fyre-auth"),o.Z.remove("fyre-authentication-creds"),I()},getPianoRefToken:()=>s.Z.get(u.pianoRefToken)||!1,getPianoIDToken:()=>s.Z.get(u.pianoIDToken)||!1,getMeterCount:()=>!1,getMyTelegraphToken:()=>{const t=o.Z.storage.read(g);return"undefined"!==t&&null!==t&&t},getProfile:w,getSubscriberId:()=>JSON.parse(localStorage.getItem("pid"))||"",getAccessToken:()=>localStorage.getItem(d)||"",getPublicId:()=>s.Z.get(u.publicId)||"",getSessionId:()=>s.Z.get(u.session)||"",getRefreshToken:()=>s.Z.get(u.refreshToken)||"",isLoggedIn:k,isLoggedInApp:()=>!!localStorage.getItem(h),isRegistered:()=>!!y.pId,isSubscriber:E,isAdLite:()=>!0===A()||"true"===a.Z.getMetaContent("tmg.isAdLite"),isGoogleShowcase:()=>"true"===a.Z.getMetaContent("tmg.isGoogleShowcase"),canComment:()=>k()&&E(),canCommentInApp:()=>T(),isAppTmgSubscriber:T,isAppTmgDigitalPlusSubscriber:A,isMyTelegraphOnboarded:()=>!!o.Z.storage.read(p),login:()=>(I(),!1),logout:_,setMyTelegraphToken:({token:t})=>o.Z.storage.write(g,t),setMyTelegraphOnboarded:({status:t})=>o.Z.storage.write(p,t),updateState:I};r.Z.create("tmg.user"),window.tmg.user=x,y=I(),c.Z.publish({topic:"tmg.user.ready"});const P=x},283:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var s=i(384),n=i(453);class r{constructor(){s.Z.create("tmg.utils"),tmg.utils={injectScript:this.injectScript,getRandomInt:this.getRandomInteger}}injectScript(t,e=!0){return new Promise(((i,s)=>{if(t){const s=document.createElement("script");s.setAttribute("src",t),s.addEventListener("load",i,!1),e&&s.setAttribute("defer","true"),document.querySelector("head").appendChild(s)}else s(Error("No src supplied"))}))}getRandomInteger(t,e){if(!t||!e)return;const i=Math.ceil(t),s=Math.floor(e);return Math.floor(Math.random()*(s-i)+i)}disableScrolling(){document.documentElement.style.overflow="hidden"}enableScrolling(){document.documentElement.style.overflow="auto"}}n.Z.subscribe({topic:"tmg.page.ready",func:new r,runIfAlreadyPublished:!0});const o=r},10:(t,e,i)=>{"use strict";i.r({});i.r({});var s=i(470),n=i(384),r=i(453);let o,a=[];const c=(t={})=>{l();const{selector:e=""}=t;return a=Array.from(document.querySelectorAll(`${e}.u-accordion__tab [type="checkbox"]`)),a},l=()=>{const t=document.querySelectorAll('[data-js="accordion-item"]');if(t.length>0)for(let e=0,i=t.length;e<i;e++)t[e].addEventListener("click",u)};function u(){this.setAttribute("aria-pressed","true"===this.getAttribute("aria-pressed")?"false":"true"),this.setAttribute("aria-expanded","true"===this.getAttribute("aria-expanded")?"false":"true")}o={init:c,closeAll:(t=a)=>{t.forEach((t=>{t.checked=!1}))},openAll:(t=a)=>{t.forEach((t=>{t.checked=!0}))},selectItem:l},n.Z.create("tmg.utils.accordion"),tmg.utils.accordion=o,r.Z.subscribe({topic:"tmg.page.ready",func:c,runIfAlreadyPublished:!0});const d=o;var h=i(42),g=i(978),p=i(501),m=i(77),f=i(951);function b(t,e){let i;t.forEach((t=>{const e=this.sections.find((e=>e.identifier===t.target.id));if(t.intersectionRatio>0)this.visibleElements.push(e);else{const t=this.visibleElements.indexOf(e);t>-1&&this.visibleElements.splice(t,1)}})),0!==this.visibleElements.length&&(i=1===this.visibleElements.length?this.visibleElements[0]:this.visibleElements.reduce((function(t,e){return t.index<e.index?t:e})),this.sections.map((t=>{t.identifier===i.identifier?t.navItem.classList.add("content-nav__item--selected"):t.navItem.classList.remove("content-nav__item--selected")})))}function v(t){const e=t[0];e.intersectionRatio<1&&e.boundingClientRect.y<0?this.elem.classList.add(`${this.className}--sticky`):this.elem.classList.remove(`${this.className}--sticky`)}class y{constructor(t){this.className="content-nav",this.elem=t,this.visibleElements=[],this.isOpen=this.elem.classList.contains(`${this.className}--open`),this.sections=[],this.toggle=this.toggle.bind(this),this.observer=null,this.observerSticky=null}init(){this.elem.addEventListener("click",this.toggle),this.createObservers(),this.addAnchorItems()}createObservers(){this.observer=new IntersectionObserver(b.bind(this),{root:null,rootMargin:"-60px"}),this.observerSticky=new IntersectionObserver(v.bind(this),{threshold:[.9,1]}),this.observerSticky.observe(this.elem)}addAnchorItems(){Array.from(this.elem.getElementsByTagName("li")).forEach(((t,e)=>{this.addAnchorItem(t,e)}))}addAnchorItem(t,e=0){const i=t.getElementsByTagName("a");if(0===i.length)return;const s=i[0].dataset.navitemId,n={identifier:s,index:e,navItem:t,target:document.getElementById(s),visible:!1};n.target&&(this.sections.push(n),this.observer.observe(n.target))}toggle(){this.isOpen=!this.isOpen,this.isOpen?this.elem.classList.add(`${this.className}--open`):this.elem.classList.remove(`${this.className}--open`)}}r.Z.subscribe({topic:"tmg.page.ready",func:()=>{const t=document.querySelector('[data-js="content-nav"]');t&&new y(t).init()},runIfAlreadyPublished:!0});class S{constructor(t){this.element=t,this.elementWidth=this.element.offsetWidth,this.thumbnailsContainer=this.element.querySelector('[data-js="carousel__thumbnails-container"]'),this.itemViewport=this.element.querySelector('[data-js="carousel__viewport"]'),this.itemWrapper=this.element.querySelector('[data-js="carousel__items"]'),this.item=Array.from(this.element.querySelectorAll('[data-js="carousel__item"]')),this.itemCount=this.item.length,this.controlForPrevious=this.element.querySelector('[data-js="carousel__control--previous"]'),this.controlForNext=this.element.querySelector('[data-js="carousel__control--next"]'),this.currentSlideIndex=0}init(){this.itemCount>1&&(this.setItemSizes(),this.bindControls(),this.showControls(),this.updateCurrentThumbnail(this.currentSlideIndex)),this.setItemSizesOnResize()}setItemSizesOnResize(){["orientationchange","resize"].forEach((t=>{window.addEventListener(t,(()=>{this.elementWidth=this.element.offsetWidth,this.setItemSizes()}),!1)}))}setItemSizes(){this.itemViewport.style.width=this.elementWidth+"px",this.itemWrapper.style.width=this.elementWidth*this.itemCount+"px";for(let t=0,e=this.itemCount;t<e;t++)this.item[t].style.width=this.elementWidth+"px"}bindControls(){this.controlForPrevious.addEventListener("click",this.goToPreviousSlide.bind(this)),this.controlForNext.addEventListener("click",this.goToNextSlide.bind(this)),this.thumbnailsContainer&&this.thumbnailsContainer.addEventListener("click",this.goToSelectedSlide.bind(this))}showControls(){this.controlForPrevious.classList.add("carousel__control--visible"),this.controlForNext.classList.add("carousel__control--visible")}showSlide(t){this.itemWrapper.style.left=-this.elementWidth*t+"px"}goToPreviousSlide(){this.currentSlideIndex<=0||(this.currentSlideIndex--,this.showSlide(this.currentSlideIndex),this.updateCurrentThumbnail(this.currentSlideIndex))}goToNextSlide(){this.currentSlideIndex>=this.itemCount-1||(this.currentSlideIndex++,this.showSlide(this.currentSlideIndex),this.updateCurrentThumbnail(this.currentSlideIndex))}goToSelectedSlide(t){const e=t.target.closest("li");if(e){const t=e.dataset.thumbnailId;this.currentSlideIndex=t>0?t-1:1,this.showSlide(this.currentSlideIndex),this.updateCurrentThumbnail(this.currentSlideIndex)}}updateCurrentThumbnail(t){if(this.thumbnailsContainer){const e="carousel__thumbnail--is-active",i=this.thumbnailsContainer.getElementsByClassName(e),s=Array.from(this.thumbnailsContainer.querySelectorAll('[data-js="carousel__thumbnail"]'));i.length>0&&(this.prevCurrentIndex=i[0].dataset.thumbnailId,i[0].classList.remove(e)),s.forEach((function(i,s){s!==t||i.classList.contains(e)||i.classList.add(e)}))}}}r.Z.subscribe({topic:"tmg.page.ready",func:()=>{const t=Array.from(document.querySelectorAll('[data-js="carousel"]'));t.length>0&&t.forEach((function(t){new S(t).init()}))},runIfAlreadyPublished:!0});class w{constructor(t){this.params=Object.assign({identifier:t.counter.getAttribute("data-counter-id"),max:t.counter.querySelector("[data-counter-max]").getAttribute("data-counter-max"),min:0,minusSelector:"[data-counter-minus]",plusSelector:"[data-counter-plus]",disabledSelector:"counter__button--disabled"},t),this.event=document.createEvent("HTMLEvents"),this.input=document.getElementById(this.params.identifier),this.minusBtn=this.params.counter.querySelector(this.params.minusSelector),this.plusBtn=this.params.counter.querySelector(this.params.plusSelector)}init(){this.input&&(this.bindPlusCounter(),this.bindMinusCounter(),this.event.initEvent("change",!1,!0))}bindPlusCounter(){this.plusBtn.addEventListener("click",(t=>{t.preventDefault(),this.addCounter()}))}bindMinusCounter(){this.minusBtn.addEventListener("click",(t=>{t.preventDefault(),this.minusCounter()}))}minusCounter(){const t=parseInt(this.input.value,10)-1,e=t<=this.params.min;this.updateValue(t,this.minusBtn,e),this.plusBtn.classList.remove(this.params.disabledSelector)}addCounter(){const t=parseInt(this.input.value,10)+1,e=t>=this.params.max;this.updateValue(t,this.plusBtn,e),this.minusBtn.classList.remove(this.params.disabledSelector)}updateValue(t,e,i=!1){!e.classList.contains(this.params.disabledSelector)&&t>=0&&(this.input.value=t,this.input.dispatchEvent(this.event)),e.classList.toggle(this.params.disabledSelector,i)}}r.Z.subscribe({topic:"tmg.page.ready",func:()=>{document.querySelectorAll("[data-counter-id]").forEach((t=>{t&&new w({counter:t}).init()}))},runIfAlreadyPublished:!0});var k=i(104);const E={className:"overlay-continuation",overlayTimeout:5e3};class C{constructor(t={}){this.options=Object.assign(E,t),this.overlayClickElem=document.querySelector(`[data-js="${this.options.className}__handler"]`),this.overlayContainer=document.querySelector(`[data-js="${this.options.className}"]`),this.overlayClose=document.querySelector(`[data-js="${this.options.className}__close"]`),this.overlayTimeout=null,this.overlayClickElem&&(this.overlayAnchor=this.overlayClickElem.href)}hasAllHtmlElements(){return null!==this.overlayClickElem&&null!==this.overlayContainer&&null!==this.overlayClose}init(){this.hasAllHtmlElements()&&(this.overlayClickElem.addEventListener("click",(t=>{t.preventDefault(),this.showOverlay()}),!1),this.overlayClose.addEventListener("click",(()=>{clearTimeout(this.overlayTimeout),this.overlayContainer.classList.remove(`${this.options.className}__visible`)})))}showOverlay(){const t=this;void 0!==this.overlayContainer&&this.overlayContainer.classList.add(`${this.options.className}__visible`),this.overlayTimeout=setTimeout((function(){t.closeAndRedirect()}),this.options.overlayTimeout)}closeAndRedirect(){window.location.href=this.overlayAnchor}}r.Z.subscribe({topic:"tmg.page.ready",func:()=>{(new C).init()},runIfAlreadyPublished:!0});let L,T,A,_,I,x={accordionOpen:!1,controlSelector:".navigation__menu-control",initialisedClass:"navigation--js-active",mainMenuSelector:".navigation__menu--main",menuCloseDelay:300,menuOpen:!1,moreSelector:".navigation__item--more .navigation__label-text",openedClass:"navigation--opened",selector:'[data-js="navigation"]'},P=!1,M=[],Z=[];const O=()=>{M=Array.from(document.querySelectorAll(x.selector)),M.length>0&&(Z=d.init({selector:`${x.selector} `}),q(),T.setAttribute("data-js",T.getAttribute("data-js").replace("navigation","")),N(),D())},q=()=>{T=document.querySelector(x.selector),A=T.querySelector(x.controlSelector),I=T.querySelector(x.moreSelector),_=T.querySelector(x.mainMenuSelector)},N=()=>{A.addEventListener("click",(()=>{U(),$(),event.preventDefault()})),I.addEventListener("click",(t=>{R()&&(U(),t.preventDefault())})),_.addEventListener("mouseenter",(()=>{P=!1})),T.addEventListener("mouseleave",(t=>{P=!0;let e=setTimeout((()=>{P&&B(),clearTimeout(e)}),x.menuCloseDelay)})),document.addEventListener("keyup",(t=>{"Escape"!==t.key&&27!==t.keyCode||B()}))},R=()=>"none"===window.getComputedStyle(A).display,D=()=>{T.classList.add(x.initialisedClass)},B=()=>{T.classList.remove(x.openedClass),$(),x.menuOpen=!1},U=()=>{x.menuOpen?B():(T.classList.add(x.openedClass),j(),x.menuOpen=!0)},j=()=>{d.openAll(Z),x.accordionOpen=!0},$=()=>{d.closeAll(Z),x.accordionOpen=!1};L={initializeAfterContentExists:O,toggleExpandedMenu:U},n.Z.create("tmg.components.navigation"),window.tmg.components.navigation=L,r.Z.subscribe({topic:"tmg.page.ready",func:O,runIfAlreadyPublished:!0});class F{constructor(t){this.element=t}init(){this.hideOptions(),this.bindEvents()}hideOptions(){this.element.classList.remove("product-sort--visible","product-sort--no-js")}bindEvents(){this.element.addEventListener("click",(()=>{this.element.classList.toggle("product-sort--visible")}))}}r.Z.subscribe({topic:"tmg.page.ready",func:()=>{const t=document.querySelector('[data-js="product-sort"]');t&&new F(t).init()},runIfAlreadyPublished:!0});class H{constructor(t){this.params=Object.assign({closeAttribute:"data-modal-dropdown-close",heading:t.modal.getAttribute("data-modal-dropdown"),id:t.modal.id,hidden:"modal-dropdown--hidden",save:"Save"},t),this.createModalBackground(),this.createModalHeading(),this.createModalSaveButton()}init(){this.bindCloseButtons(),this.bindOpenButtons()}bindCloseButtons(){document.querySelectorAll(`[${this.params.closeAttribute}]`).forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),this.toggleModalDropdown(!0)}))}))}bindOpenButtons(){document.querySelectorAll(`[data-modal-dropdown-open=${this.params.id}]`).forEach((t=>{t.addEventListener("click",(()=>{this.toggleModalDropdown()}))}))}toggleModalDropdown(t){this.params.modal.classList.toggle(this.params.hidden,t),this.background.classList.toggle(this.params.hidden,t)}createModalBackground(){this.background=document.createElement("div"),this.background.classList.add("modal-dropdown__background",this.params.hidden),this.background.setAttribute(this.params.closeAttribute,""),this.background.addEventListener("click",(()=>{this.toggleModalDropdown(!0)})),this.params.modal.parentNode.insertBefore(this.background,this.params.modal.parentNode.childNodes[0])}createModalHeading(){const t=document.createElement("h4");t.classList.add("modal-dropdown__heading","calendar-availability__hidden"),t.setAttribute(this.params.closeAttribute,""),t.innerHTML=this.params.heading,this.params.modal.insertBefore(t,this.params.modal.firstChild)}createModalSaveButton(){const t=document.createElement("a");t.classList.add("modal-dropdown__button","calendar-availability__hidden","call-to-action__link","call-to-action__link--full-width"),t.setAttribute(this.params.closeAttribute,""),t.innerHTML=this.params.save,this.params.modal.appendChild(t)}}r.Z.subscribe({topic:"tmg.page.ready",func:()=>{document.querySelectorAll("[data-modal-dropdown]").forEach((t=>{new H({modal:t}).init()}))},runIfAlreadyPublished:!0});var W=i(177),G=i(410),z=i(436);class V{constructor(t){this.params=Object.assign({icidSelector:"[data-icid]",indexSelector:"data-track-index",destinationSelector:"data-track-destination",storageName:"tmgComponentTracking",trackingItems:[{type:"txt",selector:"[data-track-txt]"},{type:"block",selector:"[data-track-block]"},{type:"img",selector:"[data-track-img]"}],wrapperSelector:"[data-track-wrapper]"},t)}init(){this.params.trackingItems.map((t=>t.selector)).forEach((t=>{this.setClickListener(t)})),document.querySelectorAll(this.params.icidSelector).forEach((t=>{this.setICID(t)}))}setClickListener(t){document.querySelectorAll(t).forEach((e=>{e.addEventListener("click",(()=>{this.setLocalStorage(t,e)}))}))}setLocalStorage(t,e){const i=this.lookupTrackingItem(t),s=this.getComponentName(e),n=e.getAttribute(this.params.indexSelector)||null,r=e.getAttribute(this.params.destinationSelector)||e.textContent;localStorage.setItem(this.params.storageName,JSON.stringify({componentName:s?this.cleanString(s):null,destination:this.cleanString(r),linkType:i?i.type:"",pageOfUse:this.getCurrentPagePath(),index:n}))}getComponentName(t){const e=t.closest(this.params.wrapperSelector);if(e)return e.getAttribute(this.params.wrapperSelector.replace("[","").replace("]",""))}getCurrentPagePath(){return document.location.pathname.replace(/\//g," ").trim().replace(/\s/g,"_")||"portal"}lookupTrackingItem(t){for(const e of this.params.trackingItems)if(e.selector===t)return e}cleanString(t){return t.trim().replace(/[,\s]+/g,"-").toLowerCase()}getICIDValue(t){const e=Object.assign({brand:z.Z.getChannel(),product:"generic",mediaType:"generic",contentType:z.Z.getContentType(),contentLocation:"generic"},t);return`${e.brand}_${e.product}_${e.mediaType}_${e.contentType}_${e.contentLocation}`}setICID(t){const e=this.getICIDValue(g.Z.tryParse(t.dataset.icid)),i=t.getAttribute("href");i&&t.setAttribute("href",f.Z.setQuerystringParam(i,"ICID",e))}}["tmg.page.ready","tmg.lightbox.ready","tmg.allsection.ready"].forEach((t=>{r.Z.subscribe({topic:t,func:()=>{(new V).init()},runIfAlreadyPublished:!0})}));const K=V;var J=i(283);const Q=t=>{const e=t.target.className,i=new RegExp(".*social-share_(\\w*)","i").exec(e);i&&i.length>0&&"_satellite"in window&&(_satellite.setVar("shareprovider",i[1]),_satellite.track("share"))};r.Z.subscribe({topic:"tmg.page.ready",func:()=>{const t=document.querySelectorAll("[class*='social-share_']");[].slice.call(t).forEach((t=>{t.addEventListener("click",Q)}))},runIfAlreadyPublished:!0});var Y=i(987);const X=()=>{const t=document.body,e="viewport--breakpoint",i=`.${e}`;let s,n="xs";return!(!window.getComputedStyle||!t)&&(s=document.querySelector(i),s||(s=document.createElement("div"),s.classList.add(e),t.appendChild(s)),n=window.getComputedStyle(s,"::after").content.replace(/[^a-z]/gi,"")||n,n)},tt=t=>(void 0===t&&(t=!0),t&&document.documentElement.clientWidth>=0?document.documentElement.clientWidth:t&&document.body&&document.body.clientWidth>=0?document.body.clientWidth:window.innerWidth>=0?window.innerWidth:0);let et={getBreakpointLabel:X,getWidth:tt};n.Z.create("tmg.utils.viewport"),tmg.utils.viewport=et,tmg.getMediaQuery=X,tmg.getViewportWidth=tt;var it=i(74),st=i(837),nt=i(729);r.Z.subscribe({topic:"tmg.page.ready",func:new class{constructor(t){this.params=Object.assign({triggerSelector:'[data-js="caption-trigger"]',imageSelector:'[data-js="article-body-image"]',captionSelector:'[data-js="caption"]',toggleClassName:"e-caption--visible",selectedClassName:"e-caption-trigger--selected"},t),this.captionTrigger=document.querySelectorAll(this.params.triggerSelector),this.captionTrigger.length&&this.activateCaptionTrigger()}activateCaptionTrigger(){this.captionTrigger.forEach((t=>{t.addEventListener("click",(()=>{this.toggleCaption(t)}))}))}toggleCaption(t){const e=t.closest(this.params.imageSelector).querySelector(this.params.captionSelector);e.classList.toggle(this.params.toggleClassName),this.toggleTriggerStyle(t),this.updateAriaLabel(t,e)}updateAriaLabel(t,e){t.setAttribute("aria-label",e.classList.contains(this.params.toggleClassName)?t.dataset.ariaClose:t.dataset.ariaOpen)}toggleTriggerStyle(t){t.classList.toggle(this.params.selectedClassName)}}});class rt{constructor(){this.userId=Y.Z.getProfile().pId,this.key="fb6cjraf9cejut2a",this.loadScript("liftigniter")}loadScript(t){const e=new J.Z;window.$igniter_var=t,window[t]=window[t]||function(){(window[t].q=window[t].q||[]).push(arguments)},window[t].l=1*new Date,e.injectScript(`//cdn.petametrics.com/${this.key}.js`).then((()=>{this.initialise(),r.Z.publish({topic:"tmg.liftigniter.ready"})}))}getConfiguration(){return window.liftIgniterPageKeywords=tmg.page.getKeywords(),{inventory:{features:[this.getFeature("pageType","tmg.page.getPageType()"),this.getFeature("businessSegment","tmg.page.getBusinessSegment()"),this.getFeature("channel","tmg.page.getChannel()"),this.getFeature("keywords","window.liftIgniterPageKeywords"),this.getFeature("displayDate","tmg.page.getPublishDate()")]}}}getFeature(t,e){return{name:t,type:"var",variable:e}}initialise(){liftigniter("init",this.key,{config:this.getConfiguration()}),Y.Z.isLoggedIn()&&liftigniter("setUserId",this.userId),liftigniter("send","pageview")}}r.Z.subscribe({topic:"tmg.page.ready",func:()=>{z.Z.isAuthor()||new rt},runIfAlreadyPublished:!0});class ot{constructor(t,e){this.element=t,this.params=e,this.register()}register(){liftigniter("setRequestFields",["title","url","image"]),liftigniter("register",{max:this.params.maxStories,widget:this.params.widget,callback:this.parseData.bind(this)})}parseData(t){const e="column"===this.params.layout;t.items.forEach(((t,i)=>{t.isRow=!e,t.image&&(t.image=t.image.replace("?impolicy=logo-overlay","?impolicy=utilities-thumbnail"),t.image=t.image.replace("?imwidth=1200","?impolicy=utilities-thumbnail"),t.image=t.image.replace("https://www.telegraph.co.uk","")),t.url&&(t.url=t.url.replace("https://www.telegraph.co.uk","")),t.className="u-separator-top",t.index=i,e&&(t.className="card--feature-switch grid-col grid-col-12 grid-col-sm-4 grid-col-md-2",t.image&&(t.image=t.image.replace("?impolicy=utilities-thumbnail","?imwidth=210")))})),this.render(t)}render(t){const e=`\n\t\t\t{{#items}}\n\t\t\t\t<article class="card u-clickable-area {{className}}" data-card data-track-wrapper="${this.params.trackingName}">\n\t\t\t\t\t<div class="card__content">\n\t\t\t\t\t\t<h3 class="list-headline u-heading-7">\n\t\t\t\t\t\t\t<a class="list-headline__link u-clickable-area__link" href="{{url}}" data-track-txt data-track-index="{{index}}" data-test="more-stories-link">\n\t\t\t\t\t\t\t\t<span class="list-headline__text">\n\t\t\t\t\t\t\t\t\t{{title}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t</div>\n\t\t\t\t\t{{#image}}\n\t\t\t\t\t\t<div class="card__thumbnail {{#isRow}}card__thumbnail--square{{/isRow}} u-order-first">\n\t\t\t\t\t\t\t<figure class="card__figure">\n\t\t\t\t\t\t\t\t<img src="{{image}}" class="card__image" loading="lazy" {{#isRow}} width="60" height="60" {{/isRow}} {{^isRow}} width="320" height="200" {{/isRow}} alt="Image of {{title}}" />\n\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{/image}}\n\t\t\t\t</article>\n\t\t\t{{/items}}`;this.element.innerHTML=liftigniter("render",e,t),this.track()}track(){liftigniter("track",{elements:this.element.querySelectorAll("[data-card]"),name:this.params.widget,source:"LI"}),(new K).init()}}r.Z.subscribe({topic:"tmg.liftigniter.ready",func:()=>{z.Z.isAuthor()||([...document.querySelectorAll("[data-liftigniter]")].forEach((t=>{new ot(t,g.Z.tryParse(t.dataset.liftigniter))})),liftigniter("fetch"))},runIfAlreadyPublished:!0});class at{constructor(t){this.container=t,this.structure=["continent","country","city","poi"],this.currentLevel=0,this.currentList=null,this.addOpenButton(),this.addBackButton(),this.container.querySelectorAll("[data-has-children]").forEach((t=>this.attachDomEvents(t)))}toggleList(){this.container.parentNode.classList.toggle("destinations-selector--open")}addOpenButton(){this.openButton=this.container.parentNode.querySelector("[data-button-open]"),this.openButton.addEventListener("click",this.toggleList.bind(this))}addBackButton(){this.backBt=this.container.parentNode.querySelector("[data-button-back]"),this.backBt.addEventListener("click",function(){this.setCurrentLevel(this.currentLevel-1)}.bind(this))}attachDomEvents(t){this.container.parentNode.querySelector("[data-selector-overlay]").addEventListener("click",this.toggleList.bind(this)),t.addEventListener("click",function(t){const e=this.structure.indexOf(t.target.dataset.childrenType);this.setCurrentLevel(e);const i=document.getElementById(t.target.dataset.showChildren);this.currentList=i,i.classList.add("destinations__list--active")}.bind(this),!1)}setCurrentLevel(t){if(t>0?(this.backBt.classList.remove("destinations-selector__back-bt--label-close"),this.backBt.classList.add("destinations-selector__back-bt--label-back")):(this.backBt.classList.add("destinations-selector__back-bt--label-close"),this.backBt.classList.remove("destinations-selector__back-bt--label-back")),t<0)this.toggleList();else{this.currentLevel=t;for(let e=t+1;e<this.structure.length;e++){const t=document.querySelectorAll(`#destination-${this.structure[e]} .destinations__list--active`);t.length>0&&Array.from(t).forEach((t=>{setTimeout((()=>{t.classList.remove("destinations__list--active")}),500)}))}this.container.style.transform=`translateX(-${100*t}%)`}}}r.Z.subscribe({topic:"tmg.page.ready",func:()=>{const t=document.querySelector('[data-js="destinations-selector__container"]');t&&new at(t)},runIfAlreadyPublished:!0});class ct{constructor(t){this.element=t}bindEvents(){this.element.addEventListener("click",(()=>{this.addBackToTopEvent()}))}addBackToTopEvent(){W.Z.addPropertyValue("event",["backToTheTop"])}}r.Z.subscribe({topic:"tmg.page.ready",func:()=>{const t=document.querySelector("[data-back-to-top-event]");t&&new ct(t).bindEvents()},runIfAlreadyPublished:!0});class lt{constructor(){this.isArticle=z.Z.isArticle()||z.Z.isGallery(),this.isPremium=z.Z.isPremium(),this.isSubscriber=Y.Z.isSubscriber(),this.userLoggedIn=Y.Z.isLoggedIn(),this.env=new G.Z,this.currentEnv=this.env.getEnvironment(),this.helpers=new class{constructor(t){this.currentEnv=t,this.envsConf={dev:{signInIframeUrl:"https://staging-ams64.telegraph.co.uk/gsi-iframe.html",loginUrl:"https://secure-staging-ams64.telegraph.co.uk/customer/secure/login",subscribeUrl:"https://secure-staging-ams64.telegraph.co.uk/customer/subscribe/",tmgUserUrl:"https://secure-qa6.telegraph.co.uk/customer/lib/tmguser.js"},staging:{signInIframeUrl:"https://staging-ams64.telegraph.co.uk/gsi-iframe.html",loginUrl:"https://secure-staging-ams64.telegraph.co.uk/customer/secure/login",subscribeUrl:"https://secure-staging-ams64.telegraph.co.uk/customer/subscribe/",tmgUserUrl:"https://secure-staging-ams64.telegraph.co.uk/customer/lib/tmguser.js"},prod:{signInIframeUrl:"https://www.telegraph.co.uk/gsi-iframe.html",loginUrl:"https://secure.telegraph.co.uk/customer/secure/login",subscribeUrl:"https://www.telegraph.co.uk/customer/subscribe/",tmgUserUrl:"https://secure.telegraph.co.uk/customer/lib/tmguser.js"}},this.utils=new J.Z}fetchUserState(){return Promise.resolve({id:h.Z.get("tmg_pid")||null,registrationTimestamp:Math.floor(h.Z.get("tmg_createddate")/1e3)||null})}waitForTmguser(){return new Promise((function t(e,i){window.tmguser?e(window.tmguser):setTimeout(t.bind(this,e,i),30)}))}loginRegisterGoogle(t){return new Promise(((e,i)=>{this.utils.injectScript(this.getEndpoints().tmgUserUrl,!1).then((()=>{this.waitForTmguser().then((()=>{this.tmgLogin(t.idToken).then((()=>{e(this.fetchUserState())})).catch((s=>{if(401===(s&&s.response&&s.response.status)){const n=s.response.data.socialProfile.email,r=s.response.data.socialProfile.firstName||"",o=s.response.data.socialProfile.lastName||"";this.createSSOAccount(n,r,o,t).then((()=>{window.dataLayer.registration={registrationType:"google showcase"},window.dataLayer.event=["registrationComplete"],e(this.fetchUserState())})).catch((t=>{i(t)}))}else i(s)}))}))}))}))}tmgLogin(t){return new Promise(((e,i)=>{tmguser.login("token","google",t).then((t=>{e(t)})).catch((t=>{i(t)}))}))}createSSOAccount(t,e,i,s){return new Promise(((n,r)=>{tmguser.createSSOAccount(t,e,i,"google").then((t=>{if(t.http_code>=400)r(t);else{const e=s.idToken,i=t.accessToken.id_token,o=t.accessToken.access_token;this.linkSSOAccount(e,i,o).then((t=>{n(t)})).catch((t=>{r(t)}))}})).catch((t=>{r(t)}))}))}linkSSOAccount(t,e,i){return new Promise(((s,n)=>{tmguser.linkSSOAccount(t,"google",e,i).then((()=>{this.tmgLogin(t).then((t=>{s(t)})).catch((t=>{n(t)}))})).catch((t=>{n(t)}))}))}getEndpoints(){return"prod"===this.currentEnv||"staging"===this.currentEnv?this.envsConf[this.currentEnv]:this.envsConf.dev}getCanonicalUrl(){return document.querySelector('link[rel="canonical"]').getAttribute("href")}sha512(t){const e=new TextEncoder("utf-8").encode(t);return crypto.subtle.digest("SHA-512",e).then((t=>this.hexString(t)))}hexString(t){let e=[];const i=new DataView(t);for(let t=0;t<i.byteLength;t+=4){const s="00000000",n=(s+i.getUint32(t).toString(16)).slice(-s.length);e.push(n)}return e.join("")}}(this.currentEnv),this.isGoogleShowcase=Y.Z.isGoogleShowcase()&&this.isArticle,this.showcaseEntitlementEvent={FREE:"EVENT_SHOWCASE_UNLOCKED_FREE_PAGE",SUBSCRIBED:"EVENT_SHOWCASE_UNLOCKED_BY_SUBSCRIPTION",METERED:"EVENT_SHOWCASE_UNLOCKED_BY_METER",IMPRESSION_PAYWALL:"EVENT_SHOWCASE_NO_ENTITLEMENTS_PAYWALL",IMPRESSION_REGWALL:"EVENT_SHOWCASE_NO_ENTITLEMENTS_REGWALL"},this.utils=new J.Z}init(){this.isGoogleShowcase&&this.initSubscriptions((t=>{this.subscriptions=t,this.subscriptions.init("telegraph.co.uk:showcase"),this.setupEvents(),this.handleUseCases()}))}initSubscriptions(t){(self.SWG=self.SWG||[]).push((function(e){t(e)}))}setupEvents(){this.subscriptions.setOnLoginRequest(this.loginRequest.bind(this)),this.subscriptions.setOnNativeSubscribeRequest(this.subscribeRequest.bind(this))}handleUseCases(){this.isPremium?this.userLoggedIn&&this.isSubscriber?this.setShowcaseEntitlement(this.showcaseEntitlementEvent.SUBSCRIBED,!0):this.unlockWithMetering():this.setShowcaseEntitlement(this.showcaseEntitlementEvent.FREE,this.userLoggedIn)}unlockWithMetering(){this.helpers.fetchUserState().then((t=>(this.utils.disableScrolling(),t.id&&t.registrationTimestamp?t:GaaMeteringRegwall.show({iframeUrl:this.helpers.getEndpoints().signInIframeUrl}).then((t=>this.helpers.loginRegisterGoogle(t).then((t=>t)).catch((t=>{console.error("GOOGLE SHOWCASE: GaaMeteringRegwall",t),this.showPaywall()}))))))).then((t=>this.helpers.sha512(this.helpers.getCanonicalUrl()).then((e=>this.getEntitlements(t,e))))).catch((t=>(console.error(t),this.showPaywall(),!1)))}setShowcaseEntitlement(t,e){this.subscriptions.setShowcaseEntitlement({entitlement:t,isUserRegistered:e})}getEntitlements(t,e){this.subscriptions.getEntitlements({clientTypes:[1],owner:"telegraph.co.uk",resource:{hashedCanonicalUrl:e},metering:{state:{id:t.id,standardAttributes:{registered_user:{timestamp:t.registrationTimestamp}}}}}).catch((()=>{this.showPaywall()})).then((t=>{this.onEntitlements(t)}))}onEntitlements(t){t&&t.enablesThisWithGoogleMetering()?t.consume((()=>{document.documentElement.style.removeProperty("overflow")})):(this.setShowcaseEntitlement(this.showcaseEntitlementEvent.IMPRESSION_PAYWALL,!0),this.showPaywall())}showPaywall(){window.martech.tools.launch({campaignClass:"PianoLibrary",campaignFolder:"TGT-1205--piano-library",campaignType:"aemManualTrigger"}),document.documentElement.style.removeProperty("overflow")}loginRequest(){window.location.href=`${this.helpers.getEndpoints().loginUrl}?redirectTo=${encodeURIComponent(window.location.href)}`}subscribeRequest(){window.location.href=`${this.helpers.getEndpoints().subscribeUrl}?redirectTo=${encodeURIComponent(window.location.href)}`}}r.Z.subscribe({topic:"tmg.page.ready",func:()=>{z.Z.isApp()||(new lt).init()},runIfAlreadyPublished:!0});class ut{constructor(t){this.tabs=t,this.active="is-active",this.tabLink="tabs__tab-link",this.tabContainer=document.querySelector(".tabs__container"),this.tabsTabItem=document.querySelector(".tabs__tab-item"),this.tabContent="tabs__tab-content",this.hashCheck(!1),this.attachEvents()}attachEvents(){document.querySelectorAll(`.${this.tabLink}`).forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault(),this.updateHash(t.hash,!0)}))})),window.addEventListener("hashchange",(t=>{t.preventDefault();const{detail:{isClicked:e}={}}=t;this.hashCheck(e)}))}showTab(t,e){const i=this.tabs.querySelector(`a[href="#${t}"]`).closest("li"),s=this.tabContainer.querySelector(`.${t}-tab`);this.tabs.querySelectorAll("li").forEach((t=>{t.setAttribute("aria-selected","false")})),this.tabContainer.querySelectorAll(`.${this.tabContent}`).forEach((t=>{t.setAttribute("aria-hidden","true")})),this.tabs.querySelectorAll(`.${this.active}`).forEach((t=>{t.classList.remove(this.active)})),i.classList.add(this.active),i.setAttribute("aria-selected","true"),s.classList.add(this.active),s.setAttribute("aria-hidden","false"),void 0===e&&document.getElementById(t).scrollIntoView(!0)}hashCheck(t){let e,i=window.location.hash.split("?")[0].substr(1);const s=i&&this.tabsTabItem.querySelector(`#tab-${i}`),n=i&&this.tabContainer.querySelector(`#${i}`),r=this.tabsTabItem.classList.contains(`${this.active}`);let o;i&&r&&!s&&!n||i&&(o=this.tabsTabItem.querySelector("a").getAttribute("href"),void 0!==o&&(o=o.substr(1)),!s&&n&&(i=this.tabContainer.querySelector(`#${i}`).getAttribute("id")),e=document.querySelector(`#tab-${i}`)?i:o,this.showTab(e,t))}updateHash(t,e){if(history.pushState){const i=window.location.origin+window.location.pathname+window.location.search+t;if(history.pushState(null,null,i),window.CustomEvent&&"function"==typeof window.CustomEvent){const t=new CustomEvent("hashchange",{detail:{isClicked:e}});window.dispatchEvent(t)}else{const t=document.createEvent("CustomEvent");t.initCustomEvent("hashchange",!0,!0,{isClicked:e}),window.dispatchEvent(t)}}else window.location.hash=t}}r.Z.subscribe({topic:"tmg.page.ready",func:()=>{const t=document.querySelector('[data-js="tabs"]');t&&new ut(t)},runIfAlreadyPublished:!0});class dt{constructor(t){this.element=t,this.description=this.element.querySelector('[data-js="gallery-item-description"]'),this.button=this.element.querySelector('[data-js="gallery-read-more"]')}bindButtonClick(){this.button.addEventListener("click",(()=>this.toggleTruncation()))}toggleTruncation(){const t=this.description.scrollHeight;this.description.classList.toggle("gallery-item__description--truncated"),this.button.innerHTML===this.button.dataset.jsReadmore?(this.description.style.setProperty("max-height",t+"px"),this.button.innerHTML=this.button.dataset.jsReadless):(this.description.style.removeProperty("max-height"),this.button.innerHTML=this.button.dataset.jsReadmore)}}let ht;r.Z.subscribe({topic:"tmg.page.ready",func:()=>{document.querySelectorAll('[data-js="gallery-item-content"]').forEach((function(t){new dt(t).bindButtonClick()}))},runIfAlreadyPublished:!0});const gt=()=>{const t=document.querySelector('[data-js="sticky-item-true"]'),e=document.querySelector(".tpl-article__layout-logos");if(e&&e.style&&(e.style.height=`${e.offsetHeight}px`),t){let e=t.getBoundingClientRect().top;window.addEventListener("scroll",m.Z.throttle((()=>pt(t,e)),10))}},pt=(t,e)=>{window.pageYOffset>e?t.classList.add("sticky-true"):t.classList.remove("sticky-true")};ht={init:gt},n.Z.create("tmg.utils.sticky"),tmg.utils.sticky=ht,r.Z.subscribe({topic:"tmg.page.ready",func:gt,runIfAlreadyPublished:!0});var mt=function(){return mt=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},mt.apply(this,arguments)};function ft(t,e,i){if(i||2===arguments.length)for(var s,n=0,r=e.length;n<r;n++)!s&&n in e||(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function bt(t){return Array.prototype.slice.call(t)}function vt(t,e){var i=Math.floor(t);return i===e||i+1===e?t:e}function yt(){return Date.now()}function St(t,e,i){if(e="data-keen-slider-"+e,null===i)return t.removeAttribute(e);t.setAttribute(e,i||"")}function wt(t,e){return e=e||document,"function"==typeof t&&(t=t(e)),Array.isArray(t)?t:"string"==typeof t?bt(e.querySelectorAll(t)):t instanceof HTMLElement?[t]:t instanceof NodeList?bt(t):[]}function kt(t){t.raw&&(t=t.raw),t.cancelable&&!t.defaultPrevented&&t.preventDefault()}function Et(t){t.raw&&(t=t.raw),t.stopPropagation&&t.stopPropagation()}function Ct(){var t=[];return{add:function(e,i,s,n){e.addListener?e.addListener(s):e.addEventListener(i,s,n),t.push([e,i,s,n])},input:function(t,e,i,s){this.add(t,e,function(t){return function(e){e.nativeEvent&&(e=e.nativeEvent);var i=e.changedTouches||[],s=e.targetTouches||[],n=e.detail&&e.detail.x?e.detail:null;return t({id:n?n.identifier?n.identifier:"i":s[0]?s[0]?s[0].identifier:"e":"d",idChanged:n?n.identifier?n.identifier:"i":i[0]?i[0]?i[0].identifier:"e":"d",raw:e,x:n&&n.x?n.x:s[0]?s[0].screenX:n?n.x:e.pageX,y:n&&n.y?n.y:s[0]?s[0].screenY:n?n.y:e.pageY})}}(i),s)},purge:function(){t.forEach((function(t){t[0].removeListener?t[0].removeListener(t[2]):t[0].removeEventListener(t[1],t[2],t[3])})),t=[]}}}function Lt(t,e,i){return Math.min(Math.max(t,e),i)}function Tt(t){return(t>0?1:0)-(t<0?1:0)||+t}function At(t){var e=t.getBoundingClientRect();return{height:vt(e.height,t.offsetHeight),width:vt(e.width,t.offsetWidth)}}function _t(t,e,i,s){var n=t&&t[e];return null==n?i:s&&"function"==typeof n?n():n}function It(t){return Math.round(1e6*t)/1e6}function xt(t){var e,i,s,n,r,o,a,c,l,u,d,h,g,p,m=1/0,f=[],b=null,v=0;function y(t){_(v+t)}function S(t){var e=w(v+t).abs;return C(e)?e:null}function w(t){var e=Math.floor(Math.abs(It(t/i))),s=It((t%i+i)%i);s===i&&(s=0);var n=Tt(t),r=a.indexOf(ft([],a,!0).reduce((function(t,e){return Math.abs(e-s)<Math.abs(t-s)?e:t}))),c=r;return n<0&&e++,r===o&&(c=0,e+=n>0?1:-1),{abs:c+e*o*n,origin:r,rel:c}}function k(t,e,i){var s;if(e||!T())return E(t,i);if(!C(t))return null;var n=w(null!=i?i:v),r=n.abs,a=t-n.rel,c=r+a;s=E(c);var l=E(c-o*Tt(a));return(null!==l&&Math.abs(l)<Math.abs(s)||null===s)&&(s=l),It(s)}function E(t,e){if(null==e&&(e=It(v)),!C(t)||null===t)return null;t=Math.round(t);var s=w(e),n=s.abs,r=s.rel,c=s.origin,l=A(t),u=(e%i+i)%i,d=a[c],h=Math.floor((t-(n-r))/o)*i;return It(d-u-d+a[l]+h+(c===o?i:0))}function C(t){return L(t)===t}function L(t){return Lt(t,l,u)}function T(){return n.loop}function A(t){return(t%o+o)%o}function _(e){var i;i=e-v,f.push({distance:i,timestamp:yt()}),f.length>6&&(f=f.slice(-6)),v=It(e);var s=I().abs;if(s!==b){var n=null!==b;b=s,n&&t.emit("slideChanged")}}function I(a){var c=a?null:function(){if(o){var t=T(),e=t?(v%i+i)%i:v,a=(t?v%i:v)-r[0][2],c=0-(a<0&&t?i-Math.abs(a):a),m=0,f=w(v),b=f.abs,y=f.rel,S=r[y][2],k=r.map((function(e,s){var r=c+m;(r<0-e[0]||r>1)&&(r+=(Math.abs(r)>i-1&&t?i:0)*Tt(-r));var a=s-y,l=Tt(a),u=a+b;t&&(-1===l&&r>S&&(u+=o),1===l&&r<S&&(u-=o),null!==d&&u<d&&(r+=i),null!==h&&u>h&&(r-=i));var g=r+e[0]+e[1],p=Math.max(r>=0&&g<=1?1:g<0||r>1?0:r<0?Math.min(1,(e[0]+r)/e[0]):(1-r)/e[0],0);return m+=e[0]+e[1],{abs:u,distance:n.rtl?-1*r+1-e[0]:r,portion:p,size:e[0]}}));return b=L(b),y=A(b),{abs:L(b),length:s,max:p,maxIdx:u,min:g,minIdx:l,position:v,progress:t?e/i:v/s,rel:y,slides:k,slidesLength:i}}}();return e.details=c,t.emit("detailsChanged"),c}return e={absToRel:A,add:y,details:null,distToIdx:S,idxToDist:k,init:function(e){if(function(){if(n=t.options,r=(n.trackConfig||[]).map((function(t){return[_t(t,"size",1),_t(t,"spacing",0),_t(t,"origin",0)]})),o=r.length){i=It(r.reduce((function(t,e){return t+e[0]+e[1]}),0));var e,l=o-1;s=It(i+r[0][2]-r[l][0]-r[l][2]-r[l][1]),a=r.reduce((function(t,i){if(!t)return[0];var s=r[t.length-1],n=t[t.length-1]+(s[0]+s[2])+s[1];return n-=i[2],t[t.length-1]>n&&(n=t[t.length-1]),n=It(n),t.push(n),(!e||e<n)&&(c=t.length-1),e=n,t}),null),0===s&&(c=0),a.push(It(i))}}(),!o)return I(!0);var f;!function(){var e=t.options.range,i=t.options.loop;d=l=i?_t(i,"min",-1/0):0,h=u=i?_t(i,"max",m):c;var s=_t(e,"min",null),n=_t(e,"max",null);s&&(l=s),n&&(u=n),g=l===-1/0?l:t.track.idxToDist(l||0,!0,0),p=u===m?u:k(u,!0,0),null===n&&(h=u),_t(e,"align",!1)&&u!==m&&0===r[A(u)][2]&&(p-=1-r[A(u)][0],u=S(p-v)),g=It(g),p=It(p)}(),f=e,Number(f)===f?y(E(L(e))):I()},to:_,velocity:function(){var t=yt(),e=f.reduce((function(e,i){var s=i.distance,n=i.timestamp;return t-n>200||(Tt(s)!==Tt(e.distance)&&e.distance&&(e={distance:0,lastTimestamp:0,time:0}),e.time&&(e.distance+=s),e.lastTimestamp&&(e.time+=n-e.lastTimestamp),e.lastTimestamp=n),e}),{distance:0,lastTimestamp:0,time:0});return e.distance/e.time||0}}}function Pt(t){var e,i,s,n,r,o,a,c;function l(t){return 2*t}function u(t){return Lt(t,a,c)}function d(t){return 1-Math.pow(1-t,3)}function h(){return s?t.track.velocity():0}function g(t,e){void 0===e&&(e=1e3);var i=147e-9+(t=Math.abs(t))/e;return{dist:Math.pow(t,2)/i,dur:t/i}}function p(){var e=t.track.details;e&&(r=e.min,o=e.max,a=e.minIdx,c=e.maxIdx)}function m(){t.animator.stop()}t.on("updated",p),t.on("optionsChanged",p),t.on("created",p),t.on("dragStarted",(function(){s=!1,m(),e=i=t.track.details.abs})),t.on("dragChecked",(function(){s=!0})),t.on("dragEnded",(function(){var s=t.options.mode;"snap"===s&&function(){var s=t.track,n=t.track.details,a=n.position,c=Tt(h());(a>o||a<r)&&(c=0);var l=e+c;0===n.slides[s.absToRel(l)].portion&&(l-=c),e!==i&&(l=i),Tt(s.idxToDist(l,!0))!==c&&(l+=c),l=u(l);var d=s.idxToDist(l,!0);t.animator.start([{distance:d,duration:500,easing:function(t){return 1+--t*t*t*t*t}}])}(),"free"!==s&&"free-snap"!==s||function(){m();var e="free-snap"===t.options.mode,i=t.track,s=h();n=Tt(s);var a=t.track.details,c=[];if(s||!e){var p=g(s),f=p.dist,b=p.dur;if(b=l(b),f*=n,e){var v=i.idxToDist(i.distToIdx(f),!0);v&&(f=v)}c.push({distance:f,duration:b,easing:d});var y=a.position,S=y+f;if(S<r||S>o){var w=S<r?r-y:o-y,k=0,E=s;if(Tt(w)===n){var C=Math.min(Math.abs(w)/Math.abs(f),1),L=function(t){return 1-Math.pow(1-t,1/3)}(C)*b;c[0].earlyExit=L,E=s*(1-C)}else c[0].earlyExit=0,k+=w;var T=g(E,100),A=T.dist*n;t.options.rubberband&&(c.push({distance:A,duration:l(T.dur),easing:d}),c.push({distance:-A+k,duration:500,easing:d}))}t.animator.start(c)}else t.moveToIdx(u(a.abs),!0,{duration:500,easing:function(t){return 1+--t*t*t*t*t}})}()})),t.on("dragged",(function(){i=t.track.details.abs}))}function Mt(t){var e,i,s,n,r,o,a,c,l,u,d,h,g,p,m,f,b,v,y=Ct();function S(e){if(o&&c===e.id){var g=C(e);if(l){if(!E(e))return k(e);u=g,l=!1,t.emit("dragChecked")}if(f)return u=g;kt(e);var p=function(e){if(b===-1/0&&v===1/0)return e;var s=t.track.details,o=s.length,a=s.position,c=Lt(e,b-a,v-a);if(0===o)return 0;if(!t.options.rubberband)return c;if(a<=v&&a>=b)return e;if(a<b&&i>0||a>v&&i<0)return e;var l=(a<b?a-b:a-v)/o,u=n*o,d=Math.abs(l*u),h=Math.max(0,1-d/r*2);return h*h*e}(a(u-g)/n*s);i=Tt(p);var m=t.track.details.position;(m>b&&m<v||m===b&&i>0||m===v&&i<0)&&Et(e),d+=p,!h&&Math.abs(d*n)>5&&(h=!0),t.track.add(p),u=g,t.emit("dragged")}}function w(e){!o&&t.track.details&&t.track.details.length&&(d=0,o=!0,h=!1,l=!0,c=e.id,E(e),u=C(e),t.emit("dragStarted"))}function k(e){o&&c===e.idChanged&&(o=!1,t.emit("dragEnded"))}function E(t){var e=L(),i=e?t.y:t.x,s=e?t.x:t.y,n=void 0!==g&&void 0!==p&&Math.abs(p-s)<=Math.abs(g-i);return g=i,p=s,n}function C(t){return L()?t.y:t.x}function L(){return t.options.vertical}function T(){n=t.size,r=L()?window.innerHeight:window.innerWidth;var e=t.track.details;e&&(b=e.min,v=e.max)}function A(t){h&&(Et(t),kt(t))}function _(){if(y.purge(),t.options.drag&&!t.options.disabled){var i;i=t.options.dragSpeed||1,a="function"==typeof i?i:function(t){return t*i},s=t.options.rtl?-1:1,T(),e=t.container,function(){var t="data-keen-slider-clickable";wt("[".concat(t,"]:not([").concat(t,"=false])"),e).map((function(t){y.add(t,"dragstart",Et),y.add(t,"mousedown",Et),y.add(t,"touchstart",Et)}))}(),y.add(e,"dragstart",(function(t){kt(t)})),y.add(e,"click",A,{capture:!0}),y.input(e,"ksDragStart",w),y.input(e,"ksDrag",S),y.input(e,"ksDragEnd",k),y.input(e,"mousedown",w),y.input(e,"mousemove",S),y.input(e,"mouseleave",k),y.input(e,"mouseup",k),y.input(e,"touchstart",w,{passive:!0}),y.input(e,"touchmove",S,{passive:!1}),y.input(e,"touchend",k),y.input(e,"touchcancel",k),y.add(window,"wheel",(function(t){o&&kt(t)}));var n="data-keen-slider-scrollable";wt("[".concat(n,"]:not([").concat(n,"=false])"),t.container).map((function(t){return function(t){var e;y.input(t,"touchstart",(function(t){e=C(t),f=!0,m=!0}),{passive:!0}),y.input(t,"touchmove",(function(i){var s=L(),n=s?t.scrollHeight-t.clientHeight:t.scrollWidth-t.clientWidth,r=e-C(i),o=s?t.scrollTop:t.scrollLeft,a=s&&"scroll"===t.style.overflowY||!s&&"scroll"===t.style.overflowX;if(e=C(i),(r<0&&o>0||r>0&&o<n)&&m&&a)return f=!0;m=!1,kt(i),f=!1})),y.input(t,"touchend",(function(){f=!1}))}(t)}))}}t.on("updated",T),t.on("optionsChanged",_),t.on("created",_),t.on("destroyed",y.purge)}function Zt(t){var e,i,s=null;function n(e,i,s){t.animator.active?o(e,i,s):requestAnimationFrame((function(){return o(e,i,s)}))}function r(){n(!1,!1,i)}function o(i,n,r){var o=0,a=t.size,u=t.track.details;if(u&&e){var d=u.slides;e.forEach((function(t,e){if(i)!s&&n&&c(t,null,r),l(t,null,r);else{if(!d[e])return;var u=d[e].size*a;!s&&n&&c(t,u,r),l(t,d[e].distance*a-o,r),o+=u}}))}}function a(e){return"performance"===t.options.renderMode?Math.round(e):e}function c(t,e,i){var s=i?"height":"width";null!==e&&(e=a(e)+"px"),t.style["min-"+s]=e,t.style["max-"+s]=e}function l(t,e,i){if(null!==e){e=a(e);var s=i?e:0;e="translate3d(".concat(i?0:e,"px, ").concat(s,"px, 0)")}t.style.transform=e,t.style["-webkit-transform"]=e}function u(){e&&(o(!0,!0,i),e=null),t.on("detailsChanged",r,!0)}function d(){n(!1,!0,i)}function h(){u(),i=t.options.vertical,t.options.disabled||"custom"===t.options.renderMode||(s="auto"===_t(t.options.slides,"perView",null),t.on("detailsChanged",r),(e=t.slides).length&&d())}t.on("created",h),t.on("optionsChanged",h),t.on("beforeOptionsChanged",(function(){u()})),t.on("updated",d),t.on("destroyed",u)}function Ot(t,e){return function(i){var s,n,r,o,a,c=Ct();function l(t){var e;St(i.container,"reverse","rtl"!==(e=i.container,window.getComputedStyle(e,null).getPropertyValue("direction"))||t?null:""),St(i.container,"v",i.options.vertical&&!t?"":null),St(i.container,"disabled",i.options.disabled&&!t?"":null)}function u(){d()&&f()}function d(){var t=null;if(o.forEach((function(e){e.matches&&(t=e.__media)})),t===s)return!1;s||i.emit("beforeOptionsChanged"),s=t;var e=t?r.breakpoints[t]:r;return i.options=mt(mt({},r),e),l(),w(),k(),v(),!0}function h(t){var e=At(t);return(i.options.vertical?e.height:e.width)/i.size||1}function g(){return i.options.trackConfig.length}function p(t){for(var a in s=!1,r=mt(mt({},e),t),c.purge(),n=i.size,o=[],r.breakpoints||[]){var l=window.matchMedia(a);l.__media=a,o.push(l),c.add(l,"change",u)}c.add(window,"orientationchange",S),c.add(window,"resize",y),d()}function m(t){i.animator.stop();var e=i.track.details;i.track.init(null!=t?t:e?e.abs:0)}function f(t){m(t),i.emit("optionsChanged")}function b(t,e){if(t)return p(t),void f(e);w(),k();var s=g();v(),g()!==s?f(e):m(e),i.emit("updated")}function v(){var t=i.options.slides;if("function"==typeof t)return i.options.trackConfig=t(i.size,i.slides);for(var e=i.slides,s=e.length,n="number"==typeof t?t:_t(t,"number",s,!0),r=[],o=_t(t,"perView",1,!0),a=_t(t,"spacing",0,!0)/i.size||0,c="auto"===o?a:a/o,l=_t(t,"origin","auto"),u=0,d=0;d<n;d++){var g="auto"===o?h(e[d]):1/o-a+c,p="center"===l?.5-g/2:"auto"===l?0:l;r.push({origin:p,size:g,spacing:a}),u+=g}if(u+=a*(n-1),"auto"===l&&!i.options.loop&&1!==o){var m=0;r.map((function(t){var e=u-m;return m+=t.size+a,e>=1||(t.origin=1-e-(u>1?0:1-u)),t}))}i.options.trackConfig=r}function y(){w();var t=i.size;i.options.disabled||t===n||(n=t,b())}function S(){y(),setTimeout(y,500),setTimeout(y,2e3)}function w(){var t=At(i.container);i.size=(i.options.vertical?t.height:t.width)||1}function k(){i.slides=wt(i.options.selector,i.container)}i.container=(a=wt(t,document)).length?a[0]:null,i.destroy=function(){c.purge(),i.emit("destroyed"),l(!0)},i.prev=function(){i.moveToIdx(i.track.details.abs-1,!0)},i.next=function(){i.moveToIdx(i.track.details.abs+1,!0)},i.update=b,p(i.options)}}var qt=function(t,e,i){try{return function(t,e){var i,s={};return i={emit:function(t){s[t]&&s[t].forEach((function(t){t(i)}));var e=i.options&&i.options[t];e&&e(i)},moveToIdx:function(t,e,s){var n=i.track.idxToDist(t,e);if(n){var r=i.options.defaultAnimation;i.animator.start([{distance:n,duration:_t(s||r,"duration",500),easing:_t(s||r,"easing",(function(t){return 1+--t*t*t*t*t}))}])}},on:function(t,e,i){void 0===i&&(i=!1),s[t]||(s[t]=[]);var n=s[t].indexOf(e);n>-1?i&&delete s[t][n]:i||s[t].push(e)},options:t},function(){if(i.track=xt(i),i.animator=function(t){var e,i,s,n,r,o;function a(e){o||(o=e),c(!0);var r=e-o;r>s&&(r=s);var d=n[i];if(d[3]<r)return i++,a(e);var h=d[2],g=d[4],p=d[0],m=d[1]*(0,d[5])(0===g?1:(r-h)/g);if(m&&t.track.to(p+m),r<s)return u();o=null,c(!1),l(null),t.emit("animationEnded")}function c(t){e.active=t}function l(t){e.targetIdx=t}function u(){var t;t=a,r=window.requestAnimationFrame(t)}function d(){var e;e=r,window.cancelAnimationFrame(e),c(!1),l(null),o&&t.emit("animationStopped"),o=null}return e={active:!1,start:function(e){if(d(),t.track.details){var r=0,o=t.track.details.position;i=0,s=0,n=e.map((function(t){var e,i=Number(o),n=null!==(e=t.earlyExit)&&void 0!==e?e:t.duration,a=t.easing,c=t.distance*a(n/t.duration)||0;o+=c;var l=s;return s+=n,r+=c,[i,t.distance,l,s,t.duration,a]})),l(t.track.distToIdx(r)),u(),t.emit("animationStarted")}},stop:d,targetIdx:null}}(i),e)for(var t=0,s=e;t<s.length;t++)(0,s[t])(i);i.track.init(i.options.initial||0),i.emit("created")}(),i}(e,ft([Ot(t,{drag:!0,mode:"snap",renderMode:"precision",rubberband:!0,selector:".keen-slider__slide"}),Zt,Mt,Pt],i||[],!0))}catch(t){console.error(t)}};class Nt{changeSlideAfterMilliseconds=5e3;activeIndicatorDataKey="carouselActiveTab";isDragging=!1;slider;indicatorContainer;startTime;remainingTime;timeoutId;sliderOptions;constructor(t,e){this.slider=t,this.sliderOptions=e,this.remainingTime=this.changeSlideAfterMilliseconds,this.slider.container.parentNode.classList.add(e.containerClasses),t.on("created",(()=>{this.initializeSliderEvents(),this.insertIndicators(),this.initializeControls()})),this.playPauseCarouselIfInViewport()}initializeSliderEvents(){let t,e,i;this.slider.on("slideChanged",(()=>{this.indicatorContainer&&this.activateIndicatorByIndex(this.activeSlideIndex)})),this.slider.on("dragStarted",(()=>{e=!1,i=new Date,t=this.activeSlideIndex,this.isDragging=!0,this.pause()})),this.slider.on("dragEnded",(()=>{!e&&new Date-i<350&&(location.href=this.sliderOptions.redirectURL),this.activeSlideIndex===this.targetSlideIndex&&this.activeSlideIndex===t||(this.remainingTime=this.changeSlideAfterMilliseconds),this.isDragging=!1,this.resume()})),this.slider.on("dragChecked",(()=>{e=!0}))}get targetSlideIndex(){return this.slider.animator.targetIdx%this.numberOfSlides}get activeSlideIndex(){return this.slider.track.details.abs%this.numberOfSlides}get numberOfSlides(){return this.slider.track.details.slides.length}get carouselWrapper(){return this.slider.container.parentNode}playPauseCarouselIfInViewport(){const t=document.querySelector(".navigation-wrapper");new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting?this.isDragging||this.resume():this.pause()}))})).observe(t)}insertIndicators(){if(!this.sliderOptions.showIndicators)return;this.indicatorContainer=document.createElement("div"),this.indicatorContainer.className="indicator-container";const t=document.createDocumentFragment();for(let e=0;e<this.numberOfSlides;e++)t.appendChild(this.createIndicatorDiv());this.indicatorContainer.appendChild(t),this.carouselWrapper.append(this.indicatorContainer),this.activateIndicatorByIndex(0)}createIndicatorDiv(){const t=document.createElement("div");return t.classList.add("indicator-item"),t}activateIndicatorByIndex(t){const e=[...this.indicatorContainer.children];e.forEach((t=>this.removeActiveFlag(t))),this.addActiveFlag(e.at(t))}removeActiveFlag(t){delete t.dataset[this.activeIndicatorDataKey]}addActiveFlag(t){t.dataset[this.activeIndicatorDataKey]="true"}pauseIndicator(){this.indicatorContainer.classList.add("paused")}resumeIndicator(){this.indicatorContainer.classList.remove("paused")}initializeControls(){if(!this.sliderOptions.showCaption&&!this.sliderOptions.showControls)return;const t=document.createElement("div");if(t.className="bottom-layer",this.sliderOptions.showCaption&&this.sliderOptions.captionText){const e=document.createElement("div");e.className="carousel-caption",e.innerHTML=this.sliderOptions.captionText,t.append(e)}if(this.sliderOptions.showControls){const e=document.createElement("div");e.className="carousel-controls-container";const i=this.previousButton(),s=this.nextButton();e.append(i,s),t.append(e)}this.carouselWrapper.append(t)}createControlButton(t,e,i){const s=document.createElement("button");s.className="carousel-control "+e,s.addEventListener("click",t);const n=document.createElement("span");return n.className=i,s.appendChild(n),s}previousButton=()=>this.createControlButton((()=>{this.prevSlide()}),"carousel-control-previous","previous-icon");nextButton=()=>this.createControlButton((()=>{this.nextSlide()}),"carousel-control-next","next-icon");startTimeout(){clearTimeout(this.timeoutId),this.startTime=(new Date).getTime(),this.timeoutId=setTimeout((()=>{this.isDragging||this.nextSlide()}),this.remainingTime)}pause(){clearTimeout(this.timeoutId),this.indicatorContainer&&this.pauseIndicator(),this.remainingTime=this.remainingTime-((new Date).getTime()-this.startTime||0)}resume(){this.isDragging||(this.indicatorContainer&&this.resumeIndicator(),this.startTimeout())}prevSlide(){this.slider.prev(),this.startTimeout()}nextSlide(){this.slider.next(),this.remainingTime=this.changeSlideAfterMilliseconds,this.startTimeout()}}document.addEventListener("DOMContentLoaded",(()=>{[...document.querySelectorAll('[data-js="keen-slider"]')].forEach((t=>{const e=t.dataset,{containerClasses:i,captionText:s,redirectURL:n,showIndicators:r,showCaption:o,showControls:a}=e,c={containerClasses:i,captionText:s,redirectURL:n,showIndicators:r,showControls:a,showCaption:o};new qt(t,{loop:!0},[t=>{new Nt(t,c)}])}))}));class Rt{constructor(t){this.element=t,this.accessToken=sessionStorage.getItem("access_token"),this.idToken=sessionStorage.getItem("id_token"),this.host=location.host,this.apiHost=()=>"secure.telegraph.co.uk"===this.host?"api.telegraph.co.uk":"api-preprod.telegraph.co.uk",this.proxyServletUrl="https://"+this.host+"/bin/core/proxyservlet",this.commonHeaderContent={access_token:this.accessToken,id_token:this.idToken,acccept:"application/json","api-auth":!0,"api-strip-cookies":!0,"content-type":"application/json","api-method":"GET","api-host":this.apiHost(),"api-protocol":"HTTPS",origin:"https://"+this.host,referer:"https://"+this.host+"/secure/personal/",dataType:"JSON","x-requested-with":"XMLHttpRequest"},this.apiPathUrl=()=>"secure.telegraph.co.uk"===this.host?"/commerce/":"secure-staging-ams64.telegraph.co.uk"===this.host?"/commerce-api-qa/commerce/":"/commerce-api-uat/commerce/",this.subIdUrl="",this.disableSpinner=()=>{let t=document.querySelector(".lds-spinner");return t?t.classList.add("hidden"):null}}init(){this.checkUser()}checkUser(){const t={"api-path":this.apiPathUrl()+"accounts/me?subscription=true&paymentMethod=true"},e=Object.assign({},this.commonHeaderContent,t),i={method:"POST",headers:new Headers(e)},s=this;this.accessToken&&this.idToken?fetch(this.proxyServletUrl,i).then((t=>t.json())).then((t=>{if(t.subscriptions){let e=t.subscriptions.filter((t=>"Active"===t.status))[0];if(e&&e["@id"]){let t=e["@id"];s.getSubscriptions(t)}else sessionStorage.setItem("upgradeErrorType","error-no-upgrade"),window.location.href="/secure/upgrade/error"}else sessionStorage.setItem("upgradeErrorType","error-no-upgrade"),window.location.href="/secure/upgrade/error"})).catch((function(){sessionStorage.setItem("upgradeErrorType","error-technical"),window.location.href="/secure/upgrade/error"})):window.location.href="/secure/login/?redirect=../upgrade"}getSubscriptions(t){this.subIdUrl=t.slice(t.indexOf(".co.uk/")+7,t.length);const e={"api-path":this.subIdUrl+"/upgrade-offers"},i=Object.assign({},this.commonHeaderContent,e),s={method:"POST",headers:new Headers(i)},n=this;fetch(this.proxyServletUrl,s).then((t=>t.json())).then((t=>{n.prepareResponse(t)})).catch((function(){sessionStorage.setItem("upgradeErrorType","error-technical"),window.location.href="/secure/upgrade/error"}))}prepareResponse(t){if(t){const e=t.priceChange;if(1===e.length&&0===Object.keys(e[0]).length&&e[0].constructor===Object||!e[0].alternatives)sessionStorage.setItem("upgradeErrorType","error-no-upgrade"),window.location.href="/secure/upgrade/error";else{const e=document.querySelector("#entry-template").innerHTML,i=Handlebars.compile(e)(t),s=t["@id"],n=this,r=()=>"Annually"===t.frequencyDescription?"an annual":"Monthly"===t.frequencyDescription?"a monthly":"a periodic",o=t.productFriendlyName,a=t.priceChange[0].number;document.querySelector(".subscription-list").innerHTML=i,n.disableSpinner(),document.querySelector(".site-header-subs__subscription").innerHTML=`You currently have ${r()} subscription to ${o}`,document.querySelectorAll(".call-to-action").forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault();let i=e.target.dataset.id,r=e.target.dataset.frequency,o=t.querySelector("button"),c=t.closest(".subscription__options").dataset.productName;o.innerHTML="Loading...",o.setAttribute("disabled",!0),o.classList.add("call-to-action__link--disabled"),n.upgradeSubscription(i,s,r,c,a)}),!1)}))}}else sessionStorage.setItem("upgradeErrorType","error-no-upgrade"),window.location.href="/secure/upgrade/error"}upgradeSubscription(t,e,i,s,n){const r={"api-path":this.subIdUrl+"/upgrade","api-method":"POST"},o=Object.assign({},this.commonHeaderContent,r),a=new Headers(o),c=(new Date).toISOString().slice(0,16)+"Z",l={body:JSON.stringify(n?{offerCode:t,priceChangeNumber:n,effectiveDate:c}:{offerCode:t}),method:"POST",headers:a},u={productName:s,frequency:i};sessionStorage.setItem("productDetails",JSON.stringify(u)),fetch(this.proxyServletUrl,l).then((t=>{t.status>308?(sessionStorage.setItem("upgradeErrorType","error-technical"),window.location.href="/secure/upgrade/error"):(sessionStorage.removeItem("upgradeErrorType"),window.location.href="/secure/upgrade/"+("Premium"===s?"confirmation-premium":"confirmation-premium-digital"))})).catch((function(){sessionStorage.setItem("upgradeErrorType","error-technical"),window.location.href="/secure/upgrade/error"}))}}r.Z.subscribe({topic:"tmg.page.ready",func:()=>{const t=document.querySelectorAll('[data-js="SubscriptionUpgrade"]');t.length>0&&new Rt(t).init()},runIfAlreadyPublished:!0});class Dt{constructor(t){this.element=t,this.accessToken=sessionStorage.getItem("access_token"),this.idToken=sessionStorage.getItem("id_token")}init(){sessionStorage.upgradeErrorType?this.errorPage():this.confirmationPage()}confirmationPage(){const t=JSON.parse(sessionStorage.productDetails);document.querySelector(".site-header-subs__subscription").innerHTML=`We have updated your subscription to ${t.productName} [${t.frequency}]`}errorPage(){const t=document.querySelector(".subscription--error"),e=t.querySelector(".subscription__title"),i=t.querySelector(".subscription__error-msg");t.removeAttribute("hidden"),t.removeAttribute("aria-hidden"),"error-technical"===sessionStorage.upgradeErrorType?(e.innerHTML="We're sorry, there seems to have been a technical error processing your upgrade.",i.innerHTML='To complete the transaction please contact our contact center \nUK calls: <a href="tel:08003163500">0800 316 3500</a> \nInternational calls: <a href="tel:+441622335007">+44 (0) 1622 33 50 07</a>'):(e.innerHTML="We're sorry, we don't have an upgrade available for you at the moment.",i.innerHTML='To find more about your subscription or talk to one of our team members please call our contact center on <a href="tel:08003163500">0800 316 3500</a> and quote your subscriber number.'),setTimeout((()=>{sessionStorage.removeItem("upgradeErrorType")}),1e3)}}r.Z.subscribe({topic:"tmg.page.ready",func:()=>{const t=document.querySelectorAll('[data-js="subscription-confirmation"]');t.length>0&&new Dt(t).init()},runIfAlreadyPublished:!0}),W.Z,G.Z,J.Z,Y.Z,s.Z,h.Z,p.Z,g.Z,m.Z,f.Z,k.ZP,z.Z,it.Z,st.Z,nt.Z},42:(t,e,i)=>{"use strict";function s(){for(var t=0,e={};t<arguments.length;t++){var i=arguments[t];for(var s in i)e[s]=i[s]}return e}i.d(e,{Z:()=>n});const n=function t(e){function i(t,n,r){var o;if(arguments.length>1){if("number"==typeof(r=s({path:"/"},i.defaults,r)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*r.expires),r.expires=a}try{o=JSON.stringify(n),/^[\{\[]/.test(o)&&(n=o)}catch(t){}return n=(n=encodeURIComponent(String(n))).replace(/%(20|23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(20|23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",n,r.expires&&"; expires="+r.expires.toUTCString(),r.path&&"; path="+r.path,r.domain&&"; domain="+r.domain,r.secure?"; secure":""].join("")}t||(o={});for(var c=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,u=0;u<c.length;u++){var d=c[u].split("="),h=d[0].replace(l,decodeURIComponent),g=d.slice(1).join("=");'"'===g.charAt(0)&&(g=g.slice(1,-1));try{if(g=e&&e(g,h)||g.replace(l,decodeURIComponent),this.json)try{g=JSON.parse(g)}catch(t){}if(t===h){o=g;break}t||(o[h]=g)}catch(t){}}return o}return i.get=i.set=i,i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,e){i(t,"",s(e,{expires:-1}))},i.withConverter=t,i}()},978:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var s=i(384);let n={};const r=t=>{let e={};return"string"==typeof t&&(e=o(t.replace(/'/g,'"'))),e},o=(t,e)=>{let i=e||{},s=t,n=!1,r="",o=[],d=[],h=[];const g=/[{?,\s]\s*"([^"]|\\")+"\s*:(\s*"([^"]|\\")+"|(.+))\s*[},]/gi,p=/^\s*{?\s*'|'\s*}?\s*$/i;if(!t)return i;if("[object Object]"===Object.prototype.toString.call(t))return t;if(n=c(s),n||(h=s.match(g)||[],h.forEach((t=>{if(t.includes('"label"')){const e=t.replace(/^\s*[{\s]|[,}]\s*$/gi,"").split(":")[1].replace(/\s*"([^]+|\\")"\s*$/gi,"$1"),i=e.replace(/"/gi,'\\"'),n=t.replace(e,i);s=s.replace(t,n)}})),r=s.replace(g,""),o=r.split(/,(?=(?:[^",]*:[^",]*)|[^",]*$)/)),o.forEach((t=>{const e=t.replace(/^\s*{|}\s*$/gi,"");c(a(e))||d.push(e)})),d.forEach((t=>{let e=!1,i=t;!0===p.test(t)&&(i=u(t),e=c(a(i))),e||!0!==/[^"']\w+[^"']:/.test(i)||(i=l(i),e=c(a(i))),e&&(s=s.replace(t,i))})),n=c(s),n)i=c(s);else try{JSON.parse(s)}catch(t){console.log("tmg.json.tryParse failed:",t)}return i},a=t=>`{${t}}`,c=t=>{let e=!1;try{e=JSON.parse(t)}catch(t){}return e},l=t=>{let e=t;return e=e.replace(/^\s*(.*?):/,'"$1":'),e},u=t=>{let e=t;return e=e.replace(/^\s*'([^']+|\\')':/,'"$1":'),e=e.replace(/:\s*('')\s*$/,': ""'),e=e.replace(/:\s*'([^']+|\\')'\s*$/,': "$1"'),e};n={parseFromAem:r,tryParse:o,simpleTryParse:c},s.Z.create("tmg.json"),tmg.json=n;const d=n;tmg.parseAemJson=r},384:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n}),window.tmg=window.tmg||{};const s=function(t){try{let e=tmg,i=t.split(".");return"tmg"===i[0]&&(i=i.slice(1)),i.forEach((t=>{void 0===e[t]&&(e[t]={}),e=e[t]})),e}catch(e){console.warn("couldn't create namespace:",t)}};window.tmg.createNamespace=s;const n={create:s}},501:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var s=i(384),n=i(951),r=i(453);class o{constructor(){this.redirectSelector="[data-redirect-current]"}init(){const t=document.querySelectorAll(this.redirectSelector);t.length&&this.setRedirects(t),s.Z.create("tmg.redirect"),window.tmg.redirect={getAmendedHref:this.getAmendedHref}}setRedirects(t){t.forEach((t=>{const e=t.getAttribute("href");e&&t.setAttribute("href",this.getAmendedHref(e))}))}getAmendedHref(t){return t.indexOf("redirectTo")>-1?n.Z.updateRedirectParam(t,window.location.href):n.Z.setQuerystringParam(t,"redirectTo",window.location.href)}}r.Z.subscribe({topic:"tmg.page.ready",func:(new o).init(),runIfAlreadyPublished:!0});const a=new o},77:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});const s={throttle:(t,e)=>{var i,s;return e=e||200,function(){var n=this,r=+new Date,o=arguments;i&&r<i+e?(clearTimeout(s),s=setTimeout((function(){i=r,t.apply(n,o)}),e)):(i=r,t.apply(n,o))}}}},951:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var s=i(384),n=i(436);const r=new RegExp(/\?[^#]*|(?=#)|$/),o=(()=>{const t={};return e=>t[e]||(t[e]=new RegExp(`([?&;]${e}(?=[=&;#]|$))=?([^&;#]*)`))})(),a=(t,e)=>{const i=o(e).exec(t);return i&&decodeURIComponent(i[2])},c=(t,e,i)=>{let s,c,l;return void 0===t&&(t=n.Z.getLocation().search),null===a(t,e)?(s=`${e}=${encodeURIComponent(i)}`,c=r.exec(t)[0],l=t.replace(r,(c.length?c+"&":"?")+s)):l=t.replace(o(e),`$1=${encodeURIComponent(i)}`),l},l=(t,e)=>{let i=e;if(null!==a(e,t)){let s,n=e.split("?")[0],r=(-1!==e.indexOf("?")?e.split("?")[1]:"").split("&");for(let e=r.length-1;e>=0;e-=1)s=r[e].split("=")[0],s===t&&r.splice(e,1);return i=n+(r.length>0?"?":"")+r.join("&"),i}return i},u=(t,e)=>{const i="redirectTo";return null!==a(t,i)?c(t,i,e):t};s.Z.create("tmg.GET_PARAM"),tmg.getQuerystringParam=a,tmg.setQuerystringParam=c,tmg.removeQuerystringParam=l,tmg.updateRedirectParam=u,location.search.substr(1).split("&").forEach((t=>{const e=t.split("=");e.length>1?tmg.GET_PARAM[e[0]]=decodeURIComponent(e[1]):tmg.GET_PARAM[e[0]]=""}));const d={matchParam:o,matchQuerystring:r,getQuerystringParam:a,removeQuerystringParam:l,setQuerystringParam:c,updateRedirectParam:u}},470:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var s=i(181),n=i.n(s);i(384).Z.create("tmg.store"),tmg.store=n();const r=n()}},t=>{t(t.s=10)}]);
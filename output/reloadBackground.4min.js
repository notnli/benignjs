(function(a){a.fn.reloadBackground=function(b){b=a.extend({onSuccess:function(){},onError:function(){},times:10},b);var c=/(^url\(['"]*)|(["']*\)$)/g;return this.each(function(){var m=a(this);var h=m.is("img");var f=h?m.attr("src"):m.css("background-image");if(!f){return}if(h){m.attr("src","/images/spacer.gif")}var g=f.replace(c,"");var d=g;var j=1;var k=a("<img/>").hide();a("body").append(k);k.error(e).load(l).attr("src",g);function e(){if(j>b.times){a(this).remove();b.onError();return}var o=a(this);var n=Math.random();setTimeout(i,j*1000+Math.floor(n*700));j+=j;function i(){d=Utils.padURLParameter(g,"rand",Math.random());o.attr("src",d)}}function l(){h?m.attr("src",f.replace(g,d)):m.css("background-image",f.replace(g,d));a(this).remove();b.onSuccess()}})}})(jQuery);
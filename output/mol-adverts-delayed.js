/*! For license information please see mol-adverts-delayed.js.LICENSE.txt */
(()=>{var __webpack_modules__={5851:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>c});var r=n(9796);const i={},o=(e,t)=>{let n=(e.match(t)||[])[1]||"";return n=n.split(/[._]/g),{build:parseInt(n[2]||-1,10),major:parseInt(n[0]||-1,10),minor:parseInt(n[1]||-1,10)}},a=()=>{const e=navigator.userAgent;i.ua=e,i.isWindows=Boolean(e.match(/Windows Phone|iemobile|WPDesktop/i));try{i.isIPad=(Boolean(e.match(/iPad/i))||"iPad"===navigator.platform||"MacIntel"===navigator.platform&&"ontouchend"in document)&&!i.isWindows}catch(e){i.isIPad=!1}i.isIDevice=(Boolean(e.match(/(iPad|iPhone|iPod)/i))||i.isIPad)&&!i.isWindows,i.isIPhone=Boolean(e.match(/iPhone/i))&&!i.isWindows,i.isAndroid=Boolean(e.match(/Android/i))&&!i.isWindows,i.isChrome=Boolean(e.match(/Chrome/i)),i.isFirefox=Boolean(e.match(/Firefox/i)),i.isKindleSilk=Boolean(e.match(/Silk|Kindle/i)),i.isAndroidPhone=i.isAndroid&&Boolean(e.match(/Mobile/i)),i.isAndroidTablet=i.isAndroid&&!Boolean(e.match(/Mobile/i)),i.isMobile=i.isIDevice||i.isAndroid||i.isWindows,i.isAndroidStock=i.isAndroid&&!i.isChrome&&!i.isFirefox&&!i.isKindleSilk;try{i.isIDevice?(i.mobileName=e.match(/(iPad|iPhone|iPod)/i)?e.match(/(iPad|iPhone|iPod)/i)[0]:"iPad",i.mobileVersion=o(e,/OS ((?:\d+[._]?)+)/i)):i.isAndroid?(i.mobileName="Android",i.mobileVersion=o(e,/Android ((?:\d+[._]?)+)/i)):i.isWindows?(i.mobileName="Windows Phone",i.mobileVersion=o(e,/Windows Phone ((?:\d+[._]?)+)/i)):(i.mobileName=null,i.mobileVersion={build:-1,major:-1,minor:-1})}catch(e){r.logger.error("Failed to parse mobile name and version",e),i.mobileName="unknown"}},s=()=>(r.logger.warn('"getZoom" function has been deprecated as it does not provide reliable values'),screen.deviceXDPI&&screen.logicalXDPI?screen.deviceXDPI/screen.logicalXDPI:document.width?document.width/window.innerWidth:screen.width&&window.innerWidth?screen.width/window.innerWidth:Math.max(document.documentElement.clientWidth,document.body.offsetWidth,document.body.scrollWidth)/(window.innerWidth||document.documentElement.clientWidth)),d=()=>window.matchMedia?window.matchMedia("(orientation:landscape)").matches:(window.innerWidth||document.documentElement.clientWidth)>(window.innerHeight||document.documentElement.clientHeight);try{a(),i.isAndroidStock&&(r.logger.debug("Executing Android Stock browser Orientation bug fix"),window.addEventListener("orientationchange",(()=>{const e=document.querySelector("meta[name=viewport]");if(e){const t=e.getAttribute("content");e.setAttribute("content","width=10000, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0"),setTimeout((()=>{e.setAttribute("content",t)}),0)}})))}catch(e){r.logger.error("Error parsing user agent",e)}const c={deviceData:i,disableScroll:()=>{document.body.style.overflow="hidden",document.ontouchmove=e=>e.preventDefault()},enableScroll:()=>{document.body.style.overflow="auto",document.ontouchmove=()=>!0},getMobileVersion:()=>i.mobileVersion,getZoom:s,isAndroid:()=>i.isAndroid,isAndroidPhone:()=>i.isAndroidPhone,isAndroidStock:()=>i.isAndroidStock,isAndroidTablet:()=>i.isAndroidTablet,isChrome:()=>i.isChrome,isFirefox:()=>i.isFirefox,isIDevice:()=>i.isIDevice,isIPad:()=>i.isIPad,isIPhone:()=>i.isIPhone,isKindleSilk:()=>i.isKindleSilk,isLandscape:d,isMobile:()=>i.isMobile,isPortrait:()=>!d(),isWindows:()=>i.isWindows,isZoomed:()=>s()>1,onTouchEnd:e=>(setTimeout(e,400),e()),parseUserAgent:a,setupMobileClass:()=>{if(r.logger.warn('"setupMobileClass" has been deprecated and "features detection" should be prefered over "device detection"'),i.mobileName){const e=i.mobileName.toLowerCase().replace(/ /,"-");document.body.classList.add(e)}}}},3596:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AD_ATTRIBUTE:()=>d,TAGS_ATTRIBUTE:()=>c,addLoadListener:()=>u,onAdLoaded:()=>w,parse:()=>h,refreshAdvert:()=>v,refreshAdvertsWithNewTags:()=>y,requestAdvert:()=>m,requestDelayedAdvert:()=>_,reset:()=>I,stringify:()=>f});var r=n(5975),i=n(4955),o=n(2614),a=n(8967);const s=n(4423),d="data-adverts-ad",c="data-adverts-tags",l=n(8197),u=n(9104),p=(0,a.x)("AdsRenderer"),f=s.stringify,h=s.parse;function g(){return o}function m(e){if(p("requestAdvert",e.pos,e),["gpt","oop"].some((t=>e.slotTypes.includes(t)))){if(e.id){const t=document.getElementById(e.id);t&&(t.setAttribute(d,s.stringify(e)),t.matches(".adHolder *")||t.classList.add("adHolder"))}return g().requestAd(e)}p("unsupported slot type, bailing",e.pos,e.slotTypes)}function v(e){g().refreshAdvert(e)}function y(e,t){const n=e.map(b).filter(Boolean).map((e=>e.ad));g().refreshAdvertsWithNewTags(n,t)}function b(e){const t=document.getElementById(e);if(t){const e=t.getAttribute(d),n=t.getAttribute(c);let r,o,a;if(e)return o=s.parse(e),r=(0,i.get)(o.pos)||o,a=n?s.parse(n):null,{ad:r,tags:a,container:t}}return null}async function _(e){}function w(e){for(let t=0,n=l.length;t<n;t++)l[t](e)}const T=r.ZP.broker("AdsRenderer");function I(){l.length=0}T.on("slot ready",m),T.on("ad rendered",((e,t)=>w(t))),T.on("refresh ads",(e=>{let{ids:t,plugins:n}=e;return y(t,n)}))},9104:(e,t,n)=>{const r=n(8197);e.exports=function(e){"function"==typeof e&&r.push(e)}},8197:e=>{e.exports=[]},2614:(e,t,n)=>{"use strict";n.r(t),n.d(t,{name:()=>b,refreshAdvert:()=>m,refreshAdvertsWithNewTags:()=>v,requestAd:()=>g,reset:()=>y});var r=n(5975),i=n(4634),o=n(9946),a=n(8967),s=n(939);const d=(e,t)=>new Promise(((n,r)=>{const o=(0,i.U2)("auction.maxTime",2e3),a=[];e.openStream({message:["get tags",{slot:t,timeout:o-100}],timeout:o,controlHandler:n=>{let{type:r,...i}=n;e.emit("auction event",t.pos,r,i)}}).on("data",(e=>{a.push(e)})).on("end",(()=>{e.emit("auction event",t.pos,"end"),n(a)})).on("error",(e=>r(e)))}));function c(e,t){t("formTags",e);const n=e.flat().map((e=>e?e.tags?e.tags:e:{}));return(0,s.Yb)(n.reduce(((e,t)=>({...e,...Array.isArray(t)&&t.reduce(((e,t)=>({...e,...t})),{})||t})),{}))}async function l(e,t,n){const r=await d(e,n),i=await e.invokeAll("get tags based on tags",r);return[{...c(r,t),...i.reduce(((e,t)=>({...e,...t})),{})}]}const u=r.ZP.broker("DfpServer"),p=(0,a.x)("DfpServer");let f={};u.on("destroy slot",(e=>{delete f[e]}));let h=Promise.resolve();async function g(e){if(f[e.pos])return f[e.pos];u.emit("start bidding",e.pos);let t=[];if(e.skipHeaderBiders)p("skipping header biders for",e.pos);else{p("starting auction for",e.pos);const n=(0,i.U2)("auction.maxTime",2e3),[r]=await Promise.all([l(u,p,e),(0,o.Ye)(n,[h])]);t=r,p("auction ended for",e.pos,t),u.emit("bidding ended",e.pos)}return u.emit("slot ready for ad",e,t),f[e.pos]={tags:t},{tags:t}}function m(e){u.emit("bidding ended",e.pos),u.emit("gpt refreshAdvert",e.pos)}function v(e,t){const n=[];e.forEach((async t=>{p("starting auction for",t.pos);const r=await l(u,p,t);n.push({ad:t,tags:r}),p("auction ended for",t.pos,r),u.emit("bidding ended",t.pos),n.length===e.length&&u.emit("slot ready to refresh",n)}))}function y(){f={}}u.on("set page level targeting",(e=>{p("new page level targeting:",e),h=h.then((()=>e)).then((()=>{}))}));const b="DfpServer"},4701:(e,t,n)=>{"use strict";n.r(t);var r=n(5975),i=n(7126),o=n(4955),a=n(1026),s=n(9461),d=n(4634),c=n(8967);function l(e,t){if(Array.isArray(e))e.forEach(t);else{if("object"!=typeof e||null===e)throw new Error(`dont know how to iterate on ${e}`);for(const[n,r]of Object.entries(e))t(r,n)}}const{onBodyAvailable:u}=n(6709),p=r.ZP.broker("DfpAsyncHandler"),f=(0,c.x)("dfpAsyncHandler"),h={},g={},m=["sky_right_top","sky_left_top","mpu_top","billboard","sticky_banner"],v=new Set(["mpu_puff_others","puff_ad_others","mpu_mobile_others","mpu_factbox","mpu_mobile_factbox"]);function y(e,t){if(e&&e.slots&&e.slots.length)return e.slots.forEach((function(r){const i=document.getElementById(r.slot.getSlotElementId()),o=!!i&&!i.classList.contains("watermark");var a;r.slot.addService(googletag.pubads()).setTargeting("pos",e.dfpPos||e.pos).setCollapseEmptyDiv(o,o&&function(e){const t="billboard"===e&&"home"===(n.g.PageCriteria.channel||"").slice(-4);return!m.includes(e)&&!t}(e.pos)),e.targeting&&l(e.targeting,((e,t)=>{r.slot.setTargeting(t,e)})),e.custom&&e.custom.length&&(a=r.slot,e.custom,l((function(e){Object.keys(e).forEach((function(t){a.setTargeting(t,e[t])}))}))),"number"==typeof window.orientation&&r.slot.setTargeting("orientation",MobileUtils.isLandscape()?"landscape":"portrait"),MobileUtils.isMobile()&&r.slot.setTargeting("lat",PageCriteria.latitude||"").setTargeting("lon",PageCriteria.longitude||""),f(`setting targeting for pos: ${e.pos}`,t),function(e,t){t.forEach((function(t){t&&"object"==typeof t&&Object.keys(t).forEach((function(n){e.setTargeting(n,t[n]+"")}))}))}(r.slot,t)})),e}p.on("api message","metadata",(e=>{f("metadata api call:",e);const{ico:t,...n}=e;t&&(n.referrer=t),p.emit("set page level targeting",n)})),p.on({message:"prepare to refresh ads",sync:!0},(e=>{const t=googletag.pubads().getSlots().reduce(((e,t)=>{const n=t.getTargeting("pos")[0];return e[n]=e[n]||t,e}),{});e.map((e=>({pos:e,slot:t[e]}))).forEach((e=>{let{pos:t,slot:n}=e;n?n.clearTargeting?n.clearTargeting():console.warn("-----\x3e NO slot.clearTargeting when refreshing ads",t):console.warn("-----\x3e NO SLOT to clear targeting when refreshing ads",t)}))})),p.on("slot ready for ad",((e,t)=>{!function(e,t){e.parentId=e.parentId||e.id,e.slots=e.slots||[],e.slots.forEach((function(t){t.parentId=t.parentId||t.id||e.parentId})),b((function(){!function(e){const t=(0,o.get)(e.pos)||e;t&&t.slots&&t.slots.length?e.slots=t.slots:w(e)}(e),y(e,t)})),b((function(){e.slots.forEach((t=>{p.emit("request slot",{pos:e.pos,slotType:t.type,type:e.type,parentId:t.parentId,adUnit:e.adUnit,slot:t.slot})}))}))}(e,t)}));const b=e=>googletag.cmd.push(e);p.on("set slot state",((e,t)=>{const n=g[e];n?n.molAd.state=t:h[e]=t})),p.on("request slot",(e=>{"gptSlot"===e.slotType&&(g[e.pos]=e.slot),e.slot.molAd={pos:e.pos,type:e.type,slotType:e.slotType,parentId:e.parentId,adUnit:e.adUnit,state:h[e.pos]},delete h[e.pos],p.invoke("googletag.display",e.parentId),p.emit("ad requested",e.pos)})),p.on("slot ready to refresh",(function(e){e.forEach((e=>y(e.ad,e.tags))),S(e.map((e=>e.ad)))})),p.on("destroy slot",(e=>{const t=(0,o.get)(e);t.slots&&(googletag.destroySlots(t.slots.map((e=>e.slot))),delete t.slots)}));const _={gpt:function(e){const t=(0,a.t2)(e),n=e.sizeMapping,r=e.id,i=e.adUnit,o=(0,d.U2)("dfp.networkCode");f("define slot for",e.pos,{sizes:t,sizeMapping:n,adUnit:i,id:r});const s=googletag.defineSlot("/"+o+"/"+i,t,r);if(!s)throw new C(e);e.sizeMapping&&function(e,t){const n=t.reduce(((e,t)=>{let[n,r]=t;return e.addSize(n,r)}),googletag.sizeMapping());e.defineSizeMapping(n.build())}(s,e.sizeMapping),e.slots.push({type:"gptSlot",slot:s,parentId:e.id}),p.emit("slot created",e,s)},gptOOP:function(e){const t=e.slotTypes.includes("gpt")?function(e){const t=e.parentId+"-oop";if(document.getElementById(t))return t;const n=document.getElementById(e.parentId),r=document.createElement("div");return r.id=t,n?n.parentNode.insertBefore(r,n.nextSibling):u((function(){document.body.appendChild(r)})),t}(e):e.parentId,n=(0,a.t2)(e),r=e.sizeMapping,i=e.adUnit,o=(0,d.U2)("dfp.networkCode");f("define oop slot for",e.pos,{sizes:n,sizeMapping:r,adUnit:i,id:t});const s=googletag.defineOutOfPageSlot("/"+o+"/"+i,t);if(!s)throw new C(e);e.slots.push({type:"oopGptSlot",slot:s,parentId:t})}};function w(e){return e.adUnit=e.adUnit||(0,i.Z)(e.pos),e.slots=e.slots||[],f(`${e.pos}: creating slots using slotTypes definition`),e.slotTypes.forEach((t=>{const n=_[t];n&&n(e)})),p.emit("update description",e.pos,e),e.slots.length&&y(e,[]),e}const T=e=>{let{slot:{molAd:{pos:t,parentId:n}}}=e;return n&&"string"==typeof n&&n.includes("-oop")?`${t}-oop`:t};function I(e){v.has(e)||b((function(){const t=(0,o.get)(e);t&&!t.gptSlot&&!t.oopGptSlot&&t.earlyBidding&&w(t)}))}function S(e){const t=e.map((function(e){return k(e.pos)}));p.invoke("googletag.pubads.refresh",t)}function k(e){return g[e]}p.on("slots initialized",(e=>{var t;t=e,b((function(){const e=googletag.pubads();e.set("page_url",location.hostname+location.pathname).setTargeting("article",adArticleId).setTargeting("environment",adEnvironment).setTargeting("country",PageCriteria.geo.toLowerCase()).addEventListener("slotRequested",(e=>e.slot.molAd&&p.emit("dfp slot requested",T(e),e))).addEventListener("slotRenderEnded",(e=>e.slot.molAd&&p.emit("ad rendered",T(e),e))).addEventListener("slotOnload",(e=>e.slot.molAd&&p.emit("ad loaded",e,T(e)))).addEventListener("impressionViewable",(e=>e.slot.molAd&&p.emit("ad viewable",T(e),e))).addEventListener("slotVisibilityChanged",(e=>e.slot.molAd&&p.emit("slot visibility changed",T(e),e))).addEventListener("slotResponseReceived",(e=>e.slot.molAd&&p.emit("slot response received",T(e),e))).setCentering(PageCriteria.isMobile&&!PageCriteria.isTablet),s.queryParams.testmode&&e.setTargeting("testmode",s.queryParams.testmode),p.emit("gpt initialized",googletag)})),t.forEach(I),b((function(){googletag.pubads().enableAsyncRendering(),googletag.enableServices()}))})),p.on("gpt refreshAdvert",(e=>{!function(e){const t=k(e);t&&(t.setTargeting("refresh","true"),p.invoke("googletag.pubads.refresh",[t]))}(e)})),p.on("gpt refreshAdverts",(e=>{S(e)}));class C extends Error{constructor(e){super(`Could not create a slot. googletag.defineSlot returned null. Probably because it has already been defined. Pos: ${e.pos}. ID: ${e.id}`)}}},4423:module=>{const omit=function(e,t){const n={};if(t=t||[],"object"==typeof e)for(const r in e)e.hasOwnProperty(r)&&-1===t.indexOf(r)&&(n[r]=DM.molFeMiniLodash.clone(e[r]));return n},stringify=function(e){return jsonStringify(omit(e,["slots"]))};var jsonStringify=JSON&&"function"==typeof JSON.stringify?JSON.stringify:function(e){switch(typeof e){case"string":return'"'+e.replace(/("|\\)/g,"\\$1")+'"';case"boolean":case"number":return e.toString();case"object":if("[object Array]"===Object.prototype.toString.call(e))return"["+e.map(stringify).join(",")+"]";if(e)return"{"+Object.keys(e).map((function(t){return stringify(t)+":"+stringify(e[t])})).join(",")+"}";case"undefined":case"function":return"null"}};const parse=JSON&&"function"==typeof JSON.parse?JSON.parse:function(value){return eval("data="+value)};module.exports={stringify,parse}},2756:(e,t,n)=>{const r=n(8189),i=function(e,t){this.eventsMap={},this.eventName=e,this.getDomCallback=t,this.domElement={};const n=this;DM.later("DOM_READY",(function(){s.call(n)}))};function o(e){const t=this.eventsMap[e];this.domElement[e]=this.getDomCallback(e),null!==this.domElement[e]&&this.on(this.domElement[e],this.eventName,(function(e){e.stopPropagation();const n=MobileUtils.isLandscape()?"landscape":"portrait";t.call(this,n)}))}function a(e){r.getElementById(e)?e in this.eventsMap&&o.call(this,e):delete this.eventsMap[e]}function s(){for(const e in this.eventsMap)a.call(this,e)}i.on=function(e,t,n){e.addEventListener(t,n)},i.fireEvent=document.createEvent?function(e,t){const n=e.ownerDocument.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}:function(e,t){const n=e.ownerDocument.createEventObject();n.eventType=t,e.fireEvent("on"+n.eventType,n)},i.prototype={constructor:i,registerEvent:function(e,t){this.eventsMap[e]=t,a.call(this,e)},getEvent:function(e){return this.eventsMap[e]},on:i.on,fireEvent:i.fireEvent},e.exports=i},1364:(e,t,n)=>{const r=n(2756),i=n(8189),o="data-impression-url",a="data-ted-tracking",s=new r("onImpression",(function(e){return function(e){return i.getElementById(e)}(e)}));e.exports={DATA_IMPRESSION_URL:o,onImpression:function(){s.registerEvent.apply(s,arguments)},registerImpression:function(e,t){const n=Array.prototype.filter.call(i.getAdContainer(e).getElementsByTagName("div"),(function(e){return e.getAttribute(o)}));n.length&&(function(e){const t=e.getAttribute(o);(new Image).src=t,e.getAttribute(a)&&(DM.later?DM.later("bundle",(function(){DM.pageEvents.fireEvent(DM.pageEvents.PAGE_AD_DISPLAYED,{type:"dfp-impression"})})):DM.pageEvents.fireEvent(DM.pageEvents.PAGE_AD_DISPLAYED,{type:"dfp-impression"}))}(n[0]),function(e){setTimeout((function(){!function(){s.fireEvent.apply(s,arguments)}(e,"onImpression"),e.getAttribute(a)&&(DM.later?DM.later("bundle",(function(){DM.pageEvents.fireEvent(DM.pageEvents.PAGE_AD_DISPLAYED,{type:"3rd-party-impression"})})):DM.pageEvents.fireEvent(DM.pageEvents.PAGE_AD_DISPLAYED,{type:"3rd-party-impression"}))}),0)}(n[0]),t.call(this,e))}}},9347:(e,t,n)=>{"use strict";n.d(t,{$R:()=>c,DZ:()=>r,M7:()=>l,TV:()=>d,Z$:()=>o,cl:()=>i,jj:()=>s,pj:()=>a,zu:()=>u});const r=(e,t,n)=>{const r=new Array(n.length);let i=0;for(let o=0,{length:a}=n;o<a;o++){const a=n[o];e(a)&&(r[i++]=t(a))}return r.length=i,r},i=(e,t)=>{const n=t.indexOf(e);return-1===n?t:[...t.slice(0,n),...t.slice(n+1)]},o=e=>e[e.length-1],a=e=>void 0===e?[]:Array.isArray(e)?e:[e],s=e=>{const t=new Set(e);return Array.from(t)},d=e=>{let t=e.length;const n=[...e];for(;t;){const e=Math.floor(Math.random()*t--),r=n[t];n[t]=n[e],n[e]=r}return n};function c(e,t){return e.map(((e,n)=>[e,t[n]]))}function l(e,t){const n=[...e];return n.sort(((e,n)=>e[t]-n[t])),n}function u(e,t){const n=new Set(t);return e.filter((e=>!n.has(e)))}},9946:(e,t,n)=>{"use strict";n.d(t,{Gv:()=>a,PQ:()=>p,S1:()=>o,Vs:()=>i,Ye:()=>c,gb:()=>l,yq:()=>d});class r extends Error{constructor(e){super(`Exceeded ${e}`)}}const i=e=>new Promise((t=>setTimeout(t,e))),o=e=>new Promise((t=>0===e?t(u(void 0,10)):setTimeout(t,e))),a=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r(e);throw await o(e),t},s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r(e);throw await i(e),t},d=(e,t,n)=>Promise.race([t,s(e,n)]),c=async(e,t)=>{const n=[],r=[];return await Promise.race([i(e),Promise.all(t.map((e=>e.then((e=>n.push(e))).catch((e=>r.push(e))))))]),{errors:r,results:n}};function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;const o=Date.now(),a=s=>Promise.resolve(e()).then((e=>{if(e)return e;if(Date.now()-o<n){const e=Math.min(1e3,2**s/2);return i(t+e).then((()=>a(s+1)))}throw new r(n)}));return a(0)}const u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return new Promise((n=>{n(t?u(e,t-1):e)}))};function p(){let e,t,n=!1;return{promise:new Promise(((n,r)=>{e=r,t=n})),reject(t){n||(n=!0,e(t))},resolve(e){n||(n=!0,t(e))}}}},4431:(e,t,n)=>{"use strict";n.d(t,{JT:()=>l,Oo:()=>d,Vl:()=>s,vE:()=>a});var r=n(9347);function i(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,o(e,t,"get"))}function o(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const a=e=>{if("function"==typeof Event)return new e.constructor(e.type,e);{const t=document.createEvent("Event");return t.initEvent(e.type,e.bubbles,e.cancelable),t}};function s(e,t,n){return e.on(t,n),()=>e.off(t,n)}function d(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}var c=new WeakMap;class l{constructor(){var e,t,n;n={writable:!0,value:[]},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=this,t=c),t.set(e,n)}on(e,t,n){return this.add(s(e,t,n))}one(e,t,n){return this.add(function(e,t,n){return e.one(t,n),()=>e.off(t,n)}(e,t,n))}addEventListener(e,t,n,r){return this.add(d(e,t,n,r))}add(e){return i(this,c).push(e),e}remove(e){var t,n,a;t=this,n=c,a=(0,r.cl)(e,i(this,c)),function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(t,o(t,n,"set"),a)}dispose(){for(const e of i(this,c))e()}}},1208:(e,t,n)=>{"use strict";function r(e,t){let n,r=0,i=!1;const o=a=>{if(i){r=a,clearTimeout(n),i=!1;const s=!n;n=setTimeout(o,t),e(s)}else n=void 0};return()=>{i=!0;const e=Date.now&&Date.now()||(new Date).getTime();(!n||e-r>=t)&&o(e)}}function i(e){let t=!1;return function(){if(!t){t=!0;try{return e(...arguments)}finally{t=!1}}}}n.d(t,{Ds:()=>a,FU:()=>r,jR:()=>d,ri:()=>o,v_:()=>s,yS:()=>i});const o=e=>{let t,n=!1;return function(){return n||(n=!0,t=e(...arguments)),t}},a=(e,t)=>{let n,r;const i=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];r=o,n&&clearTimeout(n),n=setTimeout((()=>{n=void 0,e(...r),r=void 0}),t)};return i.callNow=function(){n&&(clearTimeout(n),n=void 0);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];e(...i||r||[]),r=void 0},i};function s(e){let t=0;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e(++t,...r)}}function d(){let{min:e=1,max:t=10}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){let n=1;for(;;)yield Math.min(t,Math.max(e,Math.round(n++**2/10)))}()}},5975:(e,t,n)=>{"use strict";n.d(t,{Jj:()=>d,ZP:()=>u});var r=n(9946),i=n(9347),o=n(9315),a=n(8981),s=n.n(a);class d{constructor(e,t){var n,r,i,o=this;n=this,i=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o.bus.intercept(o,e,...n)},(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r="intercept"))in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.bus=e,this.id=t,this.options={}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.bus.emit(this,e,...n)}on(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.bus.on(this,e,...n)}once(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.pop();let o=!1;const a=[...n,function(){o||(s.cancel(),o=!0,i(...arguments))}],s=this.on(e,...a);return s}until(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise((t=>{const r=[...n,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t(n)}];this.once(e,...r)}))}register(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.bus.register(this,e,...n)}hasSubscriber(e){return this.bus.hasSubscriber(e)}interceptOnce(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.bus.interceptOnce(this,e,...n)}invoke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.bus.invoke(this,e,...n)}invokeAll(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.bus.invokeAll(this,e,...n)}registerStream(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.registerStream(this,...t)}registerUnboundedStream(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.registerUnboundedStream(this,...t)}openStream(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.openStream(this,...t)}createReadObjectStream(){return this.bus.createReadObjectStream()}createTransformObjectStream(e){return this.bus.createTransformObjectStream(e)}collectStreamAsPromise(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.collectStreamAsPromise(this,...t)}invokeChainMutable(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.invokeChainMutable(this,...t)}}class c extends Error{}class l extends c{constructor(e){super("No end point registered: "+JSON.stringify(e)),this.endpoint=e}}const u=new class{constructor(){this.subscriptions=[],this.interceptors=[],this.queued=[],this.started=!1,this.dispatcher=e=>e(),this.firedMessages=new Set,this.system=this.broker("MessageBus"),this.emitImmediately=this.emitImmediately.bind(this),this.showUncaughtErrors=!0,this.globalTimeoutOverride=void 0,this.logCall=()=>{}}queuePublish(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];const{promise:a,resolve:s}=(0,r.PQ)();return this.queued.push((()=>s(e(t,...i)))),a}queueStream(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const[a,s]=o.Ju();return this.queued.push((()=>{e(t,...r).pipe(s)})),a}broker(e){return new d(this,e)}emit(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this.started?this.emitWithInterceptors(e,t.toString(),...r):this.queuePublish(this.emitWithInterceptors.bind(this),e,t,...r)}doesMessageMatch(e,t){let n=0;for(;n<e.length;n++)if(e[n]!==t[n])return!1;return n}emitWithInterceptors(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.callInterceptors(e,"emit",this.emitImmediately,...n)}callInterceptors(e,t,n){for(var r=this,i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return new Promise(((i,a)=>{try{if(this.interceptors.length){const a=this.interceptors.filter((e=>!1!==this.doesMessageMatch(e.msg,o)));let s=!1;const d=function(){const i=a.shift();for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return o=l.length>0?l:o,i?(s=!0,r.logCall(e,t,i.broker,o,!0),r.callInterceptor(i.callback,o,d,i.broker)):(s&&r.logCall(e,t,void 0,o,!0,!0),n(e,t,o))};i(d())}else i(n(e,t,o))}catch(e){a(e)}}))}callInterceptor(e,t,n,r){return e(t,n)}emitImmediately(e,t,n){return Promise.all(this.subscriptions.reduce(((r,i)=>{const o=this.doesMessageMatch(i.msg,n);return!1!==o&&r.push(this.callSubscriber(e,t,i,o,n)),r}),[]))}callSubscriber(e,t,n,r,i){const o=i.slice(r);return new Promise(((r,a)=>{const s=()=>{try{this.logCall(e,t,n.broker,i),r(n.callback.apply(n.broker,o))}catch(e){"error"===i[0]?(console.error("Exception thrown while handling error for",i,e),a(e)):(this.system.emit("error",...i,e),a(e))}};n.sync?s():this.dispatcher(s)}))}addSubscription(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=t[t.length-1],a=t.splice(0,t.length-1);return this.subscribe(e,a,o,n,r,i)}on(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.addSubscription(e,n,!1)}register(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this.addSubscription(e,[t,...r],!0)}getOptions(e){let t=e&&e.options||{};for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=r[0];return"object"==typeof o?t={...t,...o}:t.message=r,Array.isArray(t.message)||(t.message=[t.message]),t.timeout=this.localTimeout(t.timeout),t}getSubscriptionsInterestedIn(e){return this.subscriptions.map((t=>({subscription:t,matchCount:this.doesMessageMatch(t.msg,e.message)}))).filter((e=>!1!==e.matchCount))}callFilteredSubscription(e,t,n,r){let{message:i,map:o}=n,{matchCount:a,subscription:s}=r;const d=this.callSubscriber(e,t,s,a,i);return o&&s.expectReturn?o(d,s):d}callFilteredSubscriptions(e,t,n,r){return r.reduce(((r,i)=>{const o=this.callFilteredSubscription(e,t,n,i);return i.subscription.expectReturn&&r.push(o),r}),[])}async invoke(e,t){var n=this;const i=async function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];const a=n.getOptions(e,...i),[s,...d]=n.getSubscriptionsInterestedIn(a).filter((e=>e.subscription.expectReturn));if(!s)return Promise.reject(new l(i));d.length>0&&console.warn("Total of",d.length+1,"endpoints registered for message",i);const c=n.callInterceptors(e,"invoke",((e,t,r)=>n.callFilteredSubscription(e,t,{...a,message:r},s)),...a.message);return void 0!==a.timeout?Promise.race([c,(0,r.Gv)(a.timeout)]):c};for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];return this.started?i(e,t,...a):this.queuePublish(i.bind(this),e,t,...a)}localTimeout(e){var t;return null!==(t=this.globalTimeoutOverride)&&void 0!==t?t:e}async invokeAll(e,t){var n=this;const i=async function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];const a=n.getOptions(e,...i),s=await n.callInterceptors(e,"invokeAll",((e,t,r)=>{const i={...a,message:r},o=n.getSubscriptionsInterestedIn(i);a.controlHandler&&a.controlHandler({type:"interested endpoint",endpoints:o.reduce(((e,t)=>{let{subscription:{broker:{id:n},expectReturn:r,unbounded:i}}=t;return r&&!i?[...e,n]:e}),[])});const s=n.callFilteredSubscriptions(e,t,i,o);return a.subscriptionsCalledCallback&&a.subscriptionsCalledCallback(o),s}),...a.message);let d=s?s.filter((e=>e)):[];const c=[];d=d.map((e=>e.then((e=>{c.push(e)}),(e=>{if(a.catch)try{a.catch(e)}catch(e){n.system.emit("error",e)}else n.system.emit("error",e)}))));let l=Promise.all(d).then((e=>e.filter((e=>e))));return void 0!==a.timeout&&(l=Promise.race([l,(0,r.S1)(a.timeout)])),l.then((()=>c))};for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];return this.started?i(e,t,...a):this.queuePublish(i.bind(this),e,t,...a)}subscribe(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=t[0],d="object"==typeof s?(0,i.pj)(s.message):t,c="object"==typeof s&&!!s.sync;if(n&&"function"!=typeof n)throw new Error(`Callback has to be a function, but a "${typeof n}" was passed`);const l={broker:e,msg:d,callback:n,sync:c,expectReturn:r,isStream:o,unbounded:a,cancel:()=>{this.subscriptions=(0,i.cl)(l,this.subscriptions)}};return this.subscriptions.push(l),l}hasSubscriber(e){return-1!==this.subscriptions.findIndex((t=>{let{msg:[n]}=t;return n===e}))}interceptOnce(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const o=r.pop();let a=!1;const s=[...r,function(){a||(d(),a=!0,o(...arguments))}],d=this.intercept(e,t,...s);return d}intercept(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];const a=[t,...r];let s=!1;const d=a.pop(),c={msg:a,callback:function(){if(!s)return d(...arguments)},broker:e};return this.interceptors.push(c),()=>{s=!0,this.interceptors=(0,i.cl)(c,this.interceptors)}}start(){var e,t,r,i=this;for(this.system.on("error",(function(){i.showUncaughtErrors&&console.error(...arguments)})),this.started=!0;this.queued.length;){var o;null===(o=this.queued.shift())||void 0===o||o()}this.system.emit("system ready"),null===(e=n.g.DM)||void 0===e||null===(t=e.later)||void 0===t||null===(r=t.go)||void 0===r||r.call(t,"mol-adverts")}setDispatcher(e){this.dispatcher=e}registerStream(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.addSubscription(e,n,!0,!0)}registerUnboundedStream(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.addSubscription(e,n,!0,!0,!0)}openStream(e){var t=this;const n=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];const d=t.getOptions(e,...i),c=o.KC();let l=!1,u=0;const p=()=>{l||0!=--u||(l=!0,c.push(null))};return void 0!==d.timeout&&((0,r.S1)(d.timeout).then((()=>{!l&&c.push(null),l=!0})),delete d.timeout),t.invokeAll(e,{...d,map:(e,n)=>{let{broker:r,unbounded:a}=n;return a||u++,e.then((e=>{const t=e instanceof s().Readable?e:o.nI(e?[e]:[]);t.on("data",(e=>!l&&c.push(e))),a||t.on("end",(()=>{d.controlHandler&&d.controlHandler({type:"stream done",endpoint:r.id}),p()}))}),(e=>{d.emitErrors?c.emit("error",e):t.system.emit("error",...i,e),a||p()}))},subscriptionsCalledCallback:()=>{l||0!==u||(l=!0,c.push(null))}}),c};for(var i=arguments.length,a=new Array(i>1?i-1:0),d=1;d<i;d++)a[d-1]=arguments[d];return this.started?n(e,...a):this.queueStream(n.bind(this),e,...a)}createReadObjectStream(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.KC(e)}createTransformObjectStream(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.U0(e)}collectStreamAsPromise(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o.$4(this.openStream(e,...n))}invokeChainMutable(e){var t=this;const n=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];const a=t.getOptions(e,...i),s=t.getSubscriptionsInterestedIn(a).filter((e=>e.subscription.expectReturn)),d=t.callInterceptors(e,"invokeChainMutable",((e,n,r)=>new Promise((o=>{const d=[...r],c=d.pop();o(s.reduce((async(r,o)=>{const s=await r,{matchCount:c,subscription:l}=o;return t.callSubscriber(e,n,l,c,[...d,s]).catch((e=>(a.onError&&a.onError(e,i),t.system.emit("error",...i,e),s)))}),Promise.resolve(c)))}))),...a.message);return void 0!==a.timeout?Promise.race([d,(0,r.Gv)(a.timeout)]):d};for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return this.started?n(e,...o):this.queuePublish(n.bind(this),e,...o)}}},4286:(e,t,n)=>{"use strict";function r(){const e=document.cookie.indexOf("x-loc=");if(-1===e)return;const t=document.cookie.indexOf(";",e);if(-1===t)return;const n=document.cookie.substring(e+6,t);return n.length>0&&"none"!==n.toLowerCase()?n:void 0}n.d(t,{K:()=>r})},939:(e,t,n)=>{"use strict";function r(e,t){return t.reduce(((t,n)=>(t[n]=e[n],t)),{})}function i(e,t){return Object.entries(t).reduce(((t,n)=>{let[r,i]=n;return t[r]=e[i],t}),{})}function o(e){for(const t in e)return!1;return!0}n.d(t,{$Z:()=>h,Ev:()=>i,T$:()=>f,Yb:()=>u,ar:()=>s,ei:()=>r,jF:()=>l,nr:()=>g,ns:()=>a,sE:()=>c,xb:()=>o});const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.g;for(const n of e)void 0===t[n]&&(t[n]={}),t=t[n];return t},s=e=>t=>{for(const n in e)if("function"==typeof e[n]&&!e[n](t[n]))return!1;return!0};function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){for(const n in e)if(d(e,n)&&t(e[n],n))return e[n]}function l(e,t,n){if(!d(e,t))return e;const r={...e,[n]:e[t]};return delete r[t],r}function u(e){const t={};return Object.keys(e).forEach((n=>{const r=e[n];p(r)?t[n]=u(r):void 0!==r&&(t[n]=r)})),t}function p(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function f(e){return e instanceof HTMLElement||e instanceof WeakMap||e instanceof Function||e instanceof Error||p(e)&&"function"==typeof e.then}function h(e){let t=0;const n="___MARK_",r={};return JSON.parse(JSON.stringify(e,(function(e,i){if(f(i)){const e=t++;return r[e]=i,`${n}${e}`}return i})),(function(e,t){return"string"==typeof t&&t.startsWith(n)?r[t.substr(8)]:t}))}function g(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},8393:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(9347);function i(e,t,n){o(e,t),t.set(e,n)}function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,d(e,t,"get"))}function s(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,d(e,t,"set"),n),n}function d(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var c=new WeakMap,l=new WeakMap,u=new WeakMap,p=new WeakMap,f=new WeakMap,h=new WeakSet;class g{constructor(e,t,n){var r;o(this,r=h),r.add(this),i(this,c,{writable:!0,value:!1}),i(this,l,{writable:!0,value:[]}),i(this,u,{writable:!0,value:void 0}),i(this,p,{writable:!0,value:void 0}),i(this,f,{writable:!0,value:!1}),s(this,u,n),s(this,p,e),this.state=Object.freeze(t)}deinit(){this.dispatch({type:"__DEINIT__"}),s(this,f,!1)}init(){s(this,f,!0),this.dispatch({type:"__INIT__"})}dispatch(e){if(!a(this,f))return void a(this,u).warn("Cannot dispatch actions before store has been initiated.");if(a(this,c))throw new Error("You shouldnt dispatch actions from a reducer");s(this,c,!0);const t=a(this,p).call(this,e,this.state);s(this,c,!1),t===this.state?a(this,u).call(this,e,"NO_CHANGE"):(this.state=Object.freeze(t),a(this,u).call(this,e,this.state),function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,h,m).call(this,e))}subscribe(e){return a(this,l).push(e),setTimeout((()=>e({type:"__INIT__"},this.state))),()=>{s(this,l,(0,r.cl)(e,a(this,l)))}}}function m(e){for(const t of a(this,l))t(e,this.state)}},9315:(e,t,n)=>{"use strict";n.d(t,{$4:()=>o,Ju:()=>a,KC:()=>d,TS:()=>u,U0:()=>c,UI:()=>p,c:()=>h,dE:()=>s,hX:()=>f,nI:()=>l});var r=n(8981),i=n.n(r);const o=e=>new Promise(((t,n)=>{const r=[];e.on("data",(e=>r.push(e))),e.on("end",(()=>t(r))),e.on("error",(e=>n(e)))})),a=()=>{const e=new(i().Readable)({objectMode:!0,read(){}}),t=new(i().Writable)({objectMode:!0,write(t,n,r){e.push(t),r()},final(t){e.push(null),t()}});return[e,t]},s=(e,t)=>d({start(){e.on("data",(e=>this.push(e))).on("end",(()=>{this.push(null),t()})).on("error",(e=>{console.log("------\x3e STREAM Error",e),this.destroy(e),t(e)}))}}),d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new(i().Readable)({objectMode:!0,read(){}});return e.start&&e.start.apply(t),t},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new(i().Transform)({objectMode:!0,...e})},l=e=>{let t=0;return new(i().Readable)({objectMode:!0,read(){e.length&&this.push(e[t++]),t===e.length&&this.push(null)}})},u=e=>{const t=d();let n=e.length;return n?(e.forEach((e=>{const r=e=>t.push(e),i=()=>{0==--n&&t.push(null)},o=e=>t.emit("error",e);e.on("data",r).on("end",i).on("error",o);const a=(e.off||e.removeListener).bind(e);t.on("close",(()=>{a("data",r),a("end",i),a("error",o)}))})),t):(t.push(null),t)},p=(e,t)=>d({start(){e.on("data",(e=>this.push(t(e)))).on("end",(()=>{this.push(null)})).on("error",(e=>this.destroy(e)))}}),f=(e,t)=>d({start(){e.on("data",(e=>{t(e)&&this.push(e)})).on("end",(()=>{this.push(null)})).on("error",(e=>this.destroy(e)))}}),h=(e,t)=>{const n=d(),r=e=>n.push(e);t.on("data",r);let i=!1;const o=(t.off||t.removeListener).bind(t);e.on("end",(()=>{i||(o("data",r),i=!0),n.push(null)}));const a=u([e,n]);return a.on("close",(()=>{i||(o("data",r),i=!0)})),a}},8538:(e,t,n)=>{"use strict";function r(e){const t=i(new URL(e).search.substring(1));return t?{specific:i(t.prev_scp),cust_params:i(t.cust_params)}:{}}function i(e){return e&&Object.fromEntries(e.split("&").map((e=>e.split("=").map(decodeURIComponent))))||void 0}function o(e,t){const n=e.startsWith("?"),r=e.substr(n?1:0).split("&").filter((e=>e.split("=")[0]!==t)).join("&");return r?`${n?"?":""}${r}`:""}function a(e){let t=0;if(0===e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}n.d(t,{Gi:()=>r,gY:()=>o,vp:()=>a})},1026:(e,t,n)=>{"use strict";n.d(t,{T3:()=>i,e$:()=>a,fb:()=>o,t2:()=>r});const r=e=>e.size||DM.molFeMiniLodash.map((e.type||"").split(","),(e=>DM.molFeMiniLodash.map(e.split("x"),Number)));function i(e,t,n){const r=e=>Array.isArray(e)&&2===e.length;if(!((i=e)&&Array.isArray(i)&&i.length&&i.every((e=>e&&r(e)&&r(e[0])&&Array.isArray(e[1])&&e[1].every(r)))))return t;var i;const o=(e=>e.sort(((e,t)=>t[0][0]-e[0][0])))([...e]),[a,s]=n,d=o.find((e=>{let[[t,n]]=e;return a>=t&&s>=n}));return d&&d[1]||t}function o(e){return t=e,Array.isArray(t)&&Array.isArray(t[0])?e.reduce(((e,t)=>{let[n,r]=e;return Array.isArray(t)?[Math.max(n,t[0]),Math.max(r,t[1])]:[n,r]}),[0,0]):e;var t}function a(e,t){return t.reduce(((t,n)=>{const r=new RegExp(n.replace(/\*/g,".*"));return t.push(...Object.keys(e).filter((e=>r.exec(e)))),t}),[])}},7126:(e,t,n)=>{"use strict";function r(e){const t=n.g.dartSiteId,r=n.g.PageCriteria.sponsored?"dm_dmnative":`${n.g.adAreaSiteId}_${n.g.adAreaSiteId}${n.g.adAreaId}_${n.g.adSubareaId}${n.g.adPageType}`;return"native_"===e.slice(0,7)?`dailymail.uk/dm_native/${e}`:"video"===e?`dm.video/dm_video_${n.g.adAreaId}`:`${t}/${r}/${e}`}n.d(t,{Z:()=>r})},9461:(e,t,n)=>{"use strict";n.d(t,{D1:()=>y,G9:()=>v,JW:()=>h,P0:()=>b,WH:()=>w,Y0:()=>I,ap:()=>o,bP:()=>f,cj:()=>m,ej:()=>d,kT:()=>p,oK:()=>_,queryParams:()=>a,r7:()=>T,s$:()=>g,zP:()=>u});var r=n(8538);function i(e){return window["inner"+e]||document.documentElement["client"+e]||document.body["client"+e]}function o(){let{usePixelRatio:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e&&window.devicePixelRatio||1;return{width:i("Width")*t,height:i("Height")*t}}const a=(()=>{let e={};try{e=window.location.search.substr(1).split("&").reduce(((e,t)=>{let[n,r]=t.split("=");switch(n=decodeURIComponent(n),!0){case n.startsWith("!"):e[n.substr(1)]=!1;break;case n.endsWith("[]"):n=n.substr(0,n.length-2),e[n]=!r||decodeURIComponent(r).split(",");break;case n.endsWith("[0]"):n=n.substr(0,n.length-3),e[n]=!r||decodeURIComponent(r).split(",");break;case/\[[-+]\]$/.test(n):e[n]=[...e[n]||[],...(r||"").split(",").map(decodeURIComponent)];break;default:e[n]=r?decodeURIComponent(r):"string"!=typeof r||r}return e}),{})}catch(t){console.error("ads",t),e={}}return e})(),s=/(%[0-9A-Z]{2})+/g,d=e=>{let t;const n=`; ${document.cookie}`.split(`; ${e}=`);if(n.length>1){const e=n.pop().split(";").shift();t='"'===e.charAt(0)?e.slice(1,-1):e,t=t.replace(s,decodeURIComponent)}return t},c=e=>{const t=new Date;switch(typeof e){case"undefined":return t.setMonth(t.getMonth()+1),t;case"number":return t.setDate(t.getDate()+e),t;case"string":return new Date(e);case"function":return c(e());case"object":if(e instanceof Date)return e;if(null===e)return c();default:throw new Error("Invalid expire time when setting cookie")}},l=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",i=arguments.length>4?arguments[4]:void 0,o=`${e}=${t};expires=${c(n).toUTCString()};path=${r}`;i&&(o+=`;domain=${i}`),document.cookie=o},u=(e,t)=>{const n=`${e}Expire`,r=c(d(n)).toUTCString();l(e,t,r),l(n,r,r)},p=e=>{l(e,"","Thu, 01 Jan 1970 00:00:01 GMT")};function f(){const e=/(Windows\s*[a-zA-Z]*)\s+([^;\s)]+)/i.exec(navigator.userAgent);return e&&"windows nt"===e[1].toLowerCase()&&parseFloat(e[2])>=6.4}const h="Microsoft Internet Explorer"===navigator.appName||!(!navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/rv:11/)),g=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),m=/(?:iPod|iPhone|iPad).*(?:OS)/i.test(navigator.userAgent),v=/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/.test(navigator.userAgent),y=/Firefox\/([0-9.]+)(?:\s|$)/.test(navigator.userAgent),b=/Edge\/([0-9._]+)/.test(navigator.userAgent);function _(){try{if(/iP(hone|od|ad)/.test(navigator.platform)){const e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}}catch(e){console.error(e)}return[-1,-1,-1]}function w(e){const{origin:t,pathname:i,search:o}=n.g.location,a=`${t}${i}${(0,r.gY)(o,e)}`;window.history.pushState(null,"",a)}function T(e){const t=e.getBoundingClientRect(),n=document.body,r=document.documentElement,i=window.pageYOffset||r.scrollTop||n.scrollTop,o=window.pageXOffset||r.scrollLeft||n.scrollLeft,a=r.clientTop||n.clientTop||0,s=r.clientLeft||n.clientLeft||0,d=t.top+i-a,c=t.left+o-s;return{top:Math.round(d),left:Math.round(c)}}function I(){var e,t,r;return null===(e=n.g.performance)||void 0===e||null===(t=e.getEntriesByType)||void 0===t||null===(r=t.call(e,"navigation"))||void 0===r?void 0:r[0]}},5537:(e,t,n)=>{"use strict";n.r(t);var r,i,o,a,s=n(1208),d=n(9461),c=n(5975),l=n(6364),u=n(3202),p=n.n(u);const f=c.ZP.broker("debug-output"),h=window.PageCriteria&&window.PageCriteria.pageViewId||(0,l.kb)();localStorage.getItem("mol.ads.debug")&&localStorage.removeItem("mol.ads.debug");const g=localStorage.getItem("dmg.ads.debug.label"),m=d.queryParams.adsDebugRemote||d.queryParams["ac.adsDebugRemote"]||(null===(r=n.g.adverts)||void 0===r||null===(i=r.config)||void 0===i?void 0:i.adsDebugRemote)||g,v=d.queryParams.adsBugReport||d.queryParams["ac.adsBugReport"]||(null===(o=n.g.adverts)||void 0===o||null===(a=o.config)||void 0===a?void 0:a.adsBugReport)||g,y="boolean"!=typeof m&&m;let b=[],_=0;const w=(0,s.Ds)((()=>{f.emit("send to bidmax",{_:{topic:"debug"},type:"multi",pvid:h,label:y,eventId:_++,payload:b}),b=[]}),1e3);function T(e){const t=new Set;try{return JSON.stringify(e,((e,n)=>{if("object"==typeof n&&null!==n){if(n instanceof Error)return{type:"Error",message:n.message,stack:n.stack};if(t.has(n))return"[circular reference]";t.add(n)}return"string"==typeof n&&n.length>4048?"[string too long: "+n.length+"]":function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}(n)?"[DOM Node]":n}))}catch(e){return"[error serializing value: "+e.message+"]"}}const I=(e,t)=>{b.push({type:e,timestamp:(new Date).toISOString(),payload:t}),b.length>=100?w.callNow():w()},S=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];I("log",{level:e,log:n.map(T).map((e=>{if(void 0===e)return e;if(e.length>1e4)return"[object too long: "+e.length+"]";try{return JSON.parse(e)}catch(t){k.error("Error parsing",e,t)}}))}),k[e](...n)},k={log:console.log,warn:console.warn,error:console.error,info:console.info};m&&(console.log=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return S("log",...t)},console.info=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return S("info",...t)},console.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return S("warn",...t)},console.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return S("error",...t)},window.onerror=function(e,t,n,r,i){return console.error("[UNCAUGHT]",{message:e,source:t,lineno:n,colno:r,error:i}),!1},window.addEventListener("unhandledrejection",(e=>{let{reason:t}=e;console.error("[PromiseRejectionUncaught]",{reason:t})})),f.on("send remote debug",I),f.on("system ready",(()=>{const{config:e}=n.g.adverts;I("config",{config:e})})),f.once("dom ready",(()=>{n.g.PageCriteria&&I("PageCriteria",n.g.PageCriteria),n.g.pagemeta&&I("pagemeta",n.g.pagemeta),f.invoke("get page level analytics").then((e=>I("bidmax",e)))}))),v&&f.once("dom ready",(()=>{const e=document.createElement("div");e.innerHTML=p()(),document.body.appendChild(e);const t=e.querySelector("#debugRemoteButtonText"),n=t.querySelector("textarea");t.querySelector("button").addEventListener("click",(e=>{e.preventDefault(),I("bugreport",{log:[n.value]}),console.info("bugreport",n.value),n.value="",t.style.display="none"})),g&&(window.leaveRemoteDebug.style.display="block",window.leaveRemoteDebug.addEventListener("click",(e=>{e.preventDefault(),localStorage.removeItem("dmg.ads.debug.label"),location.reload()})))}))},8967:(e,t,n)=>{"use strict";n.d(t,{x:()=>d});var r=n(9461),i=n(9347);const o=function(){let e=new Set;if(r.queryParams.adsDebug)e=new Set(((!0===r.queryParams.adsDebug?"all":r.queryParams.adsDebug)||"").toLowerCase().split(","));else if(localStorage.getItem("dmg.ads.debug.label"))e=new Set(["all"]);else{var t,i;const o=r.queryParams["ac.adsDebug"]||(null===(t=n.g.adverts)||void 0===t||null===(i=t.config)||void 0===i?void 0:i.adsDebug);"boolean"==typeof o?e=new Set(["all"]):Array.isArray(o)&&(e=new Set(o.map((e=>e.toLowerCase()))))}return e}(),a=o.has("all"),s=()=>{};function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[`%c${e}`,c()],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=a||o.has(e.toLowerCase()),l=r?console.log.bind(console,...(0,i.pj)(t)):s;return l.debugName=e,l.label=t,l.enabled=r,l.log=u("log"),l.trace=u("trace"),l.debug=u("debug"),l.info=u("info"),l.warn=u("warn"),l.error=u("error",!0),l.table=r?function(){l("Table:"),console.table(...arguments)}:s,l.extend=r=>{const[o,...a]=(0,i.pj)(t),s=n+1;return d(e,[`${o} %c${r}`,...a,c(s)],s)},l;function u(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:r)&&"function"==typeof console[e]?console[e].bind(console,...(0,i.pj)(t)):s}}function c(){return`display: inline-block; color: #fff; background: hsl(214deg 100% ${35+10*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}%); padding: 1px 4px; border-radius: 3px;`}},6364:(e,t,n)=>{"use strict";n.d(t,{MX:()=>i,RD:()=>r,_b:()=>d,kb:()=>o});const r=2147483647;function i(e,t){const n=t-e+1+e;return Math.floor(Math.random()*n)}function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){return function(e){const t=16*Math.random()|0;return"x"===e?t:3&t|8}(e).toString(16)}))}function a(e,t){if(null==e)return;let n=e/(t/100);return n>99&&(n=99),n<0&&(n=0),Math.round(n)}const s=/(.*)P(\d+)(s|k|m|gb|ms|px)$/;function d(e,t){const{cap:n}=function(e){const[,t,n,r]=e.match(s),i=function(e,t){return{m:e=>60*e*1e3,s:e=>1e3*e,k:e=>1e3*e,gb:e=>1e9*e,ms:e=>e,px:e=>e}[t](e)}(n,r);return{fieldName:t,period:n,unit:r,cap:i}}(e);return{[e]:a(t,n)}}},3387:(e,t,n)=>{"use strict";function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r=n=>String.prototype.split.call(t,n).filter(Boolean).reduce(((e,t)=>null!=e?e[t]:e),e),i=r(/[,[\]]+?/)||r(/[,[\].]+?/);return void 0===i||i===e?n:i}n.d(t,{Z:()=>r})},8983:(e,t,n)=>{"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>i(e,t)))}function i(e,t){if(e===t)return e;const n=typeof t;if("undefined"===n)return e;const r=Array.isArray(t);if(null===t||"string"===n||"number"===n||"boolean"===n||"function"===n||!r&&"object"===n&&null!==t&&t.constructor!==Object)return t;if(null===e)return i(void 0,t);const o=typeof e,a=Array.isArray(e);if(n!==o)return a?e:"function"===o&&"object"===n?(Object.entries(t).forEach((t=>{let[n,r]=t;e[n]=r})),e):"undefined"===o?r?i([],t):"object"===n?i({},t):t:"undefined"===n?e:t;if(a){const n=e.length,r=t.length;let o;for(o=0;o<n&&o<r;o++)e[o]=i(e[o],t[o]);for(o=n;o<r;o++)e[o]=i(void 0,t[o]);return e}if(r)return[...t];const s=Object.entries(t).sort(((e,t)=>{let[n]=e,[r]=t;return n.localeCompare(r)})),d=s.length,c=Object.entries(e).sort(((e,t)=>{let[n]=e,[r]=t;return n.localeCompare(r)}));let l=0;for(const[t,n]of c){let r,o,a=-1;for(;a<0&&l<d;)[r,o]=s[l],a=r.localeCompare(t),a<0&&(e[r]=i(void 0,o),l++);0===a&&(e[t]=i(n,o),l++)}for(;l<d;){const[t,n]=s[l++];e[t]=i(void 0,n)}return e}n.d(t,{Z:()=>r})},9044:(e,t,n)=>{"use strict";function r(e,t,n){const r=Array.isArray(t)?t:t.match(/([^[.\]])+/g);r.reduce(((e,t,i)=>(void 0===e[t]&&(e[t]={}),i===r.length-1&&(e[t]=n),e[t])),e)}n.d(t,{Z:()=>r})},5861:(e,t,n)=>{"use strict";var r=n(8967),i=n(9461);(i.queryParams.adsDebugRemote||i.queryParams["ac.adsDebugRemote"]||n.g.adverts.config&&n.g.adverts.config.adsDebugRemote||localStorage.getItem("dmg.ads.debug.label"))&&n(5537),(0,r.x)("bootstrap").log("loading",window.location.href)},3677:(e,t,n)=>{const r=n(5842);e.exports=e=>{const{videoAdServerUrl:t,linkBaseURL:n,scor:i,screen:o,videoId:a,customParams:s}=e;return new r(t).correlator(Date.now()).cust_params(s).description_url(n).url(`${location.protocol}//${location.hostname}${location.pathname}`).scor(i).sz(o.width+"x"+o.height).setRequestNonPersonalizedAds(Boolean(e.npa)).setRestrictDataProcessing(Boolean(e.rdp)).setPpid(e.ppid).addParam("vid",a).build()}},5842:(e,t,n)=>{const r=n(1121);function i(e){if(!e)throw new TypeError("Missing videoAdServerUrl");const t=function(e){const t=e.split("?");return{base_url:t[0],search:t[1]}}(e);var n;this.base_url=t.base_url,this.params={env:"vp",gdfp_req:1,impl:"s",output:"xml_vast4",unviewed_position_start:1,hl:"en",...(n=t.search,n?r.queryStringToObj(n,(function(e,t){return t&&!/(\[.+])/g.test(t)})):{}),output:"xml_vast4"}}i.encodeCustomParams=function(e){if("object"==typeof e)return Object.keys(e).forEach((t=>{const n=e[t];Array.isArray(n)?e[t]=n.join(","):e[t]=n})),encodeURIComponent(r.objToQueryString(e));throw new TypeError("encodeCustomParams only accepts an object map of key value pairs.")},i.prototype.iu=function(e){if(!/^\/[a-zA-z0-9\-_.~]+(\/[a-zA-z0-9\-_.~]+)*/.test(e))throw new TypeError("'iu' param must follow format: /network_id/directory_tree.../ad_unit");return this.params.iu=encodeURIComponent(e),this},i.prototype.sz=function(e){if(!/^[0-9]+x[0-9]+/.test(e))throw new TypeError("'sz' param must follow format like: 300x400.");return this.params.sz=e,this},i.prototype.url=function(e){return this.params.url=encodeURIComponent(r.urlParts(e).href),this},i.prototype.correlator=function(e){if("number"==typeof e&&!isNaN(e))return this.params.correlator=e,this;throw new TypeError("the passed correlator is not a number")},i.prototype.description_url=function(e){return this.params.description_url=encodeURIComponent(r.urlParts(e).href),this},i.prototype.hl=function(e){return this.params.hl=e,this},i.prototype.ciu_szs=function(e){return this.params.ciu_szs=e,this},i.prototype.scp=function(e){return this.params.scp=e,this},i.prototype.cust_params=function(e){return this.params.cust_params=i.encodeCustomParams(e),this},i.prototype.setRequestNonPersonalizedAds=function(e){return e&&(this.params.npa=1),this},i.prototype.setRestrictDataProcessing=function(e){return e&&(this.params.rdp=1),this},i.prototype.setPpid=function(e){return e&&(this.params.ppid=e),this},i.prototype.scor=function(e){if("number"==typeof e&&!isNaN(e))return this.params.scor=e,this;throw new TypeError("the passed scor is not a number")},i.prototype.addParam=function(e,t){return this.params[e]=t,this},i.prototype.build=function(){const e=this.params;return["env","gdfp_req","impl","output","unviewed_position_start","hl","url","correlator","description_url"].forEach((t=>{if(!e[t])throw new TypeError("Error building url, missing required param '"+t+"'")})),this.base_url+"?"+r.objToQueryString(this.params)},e.exports=i},8104:e=>{e.exports=e=>{const t=(e=>{const{cust_params:t,domain:n,embed:r,flyaway:i,muted:o,screen:a,source:s,title:d,videoId:c,videoStarts:l}=e,u="number"==typeof e.duration?e.duration/1e3:0,p={length:u>120?120:30*Math.floor(u/30),videoWidth:a.width,videoHeight:a.height,play:l,embed:r,ttid:c,domain:n,flyaway:i,s:o?"off":"on"};d&&(p.videoTitle=d.replace(/\s/g,"_").replace(/[^_\w]/g,"")),s&&(p.video=s.replace(/\s/g,"_")),window.adEnvironment&&(p.environment=window.adEnvironment);const f=t||{};return Object.keys(f).forEach((e=>{p[e]=f[e]})),p.sz=a.width+"x"+a.height,p})({...e,cust_params:{...e.cust_params}});return{customParams:t}}},43:e=>{e.exports=e=>{const{autoplay:t,fbiaEmbed:n,flyaway:r,isMobile:i,original:o,syndicationService:a,videoAdServerUrl:s}=e;let d=s;n&&-1===d.indexOf("dm.videofb")||"fbia"===a&&-1===d.indexOf("dm.videofb")?d=d.replace(/dm\.video/g,"dm.videofb"):"gamp"===a&&-1===d.indexOf("dm.videoamp")?d=d.replace(/dm\.video/g,"dm.videoamp"):i&&o&&!t&&!r&&(d=d.replace(/dm\.video/g,"dm.video.original"));let c="";return t&&(c+="ap"),r&&(c+="fa"),c.length&&(d=d.replace(/(dm\.video)([^&]+)?/,"$1$2_"+c)),d}},1121:(e,t,n)=>{const r=n(7245),i=document.createElement("a"),o=document.documentMode,a={appendGeolocation:function(e){try{return a.appendKeyToURL(e,"geo",window.PageCriteria.geo)}catch(t){return e}},appendKeyToURL:function(e,t,n){let r;r=/\?/.test(e)?"&":"?",r+=t+"="+encodeURIComponent(n.toString());const i=e.split("#");return 2===i.length?i[0]+r+"#"+i[1]:i[0]+r},objToQueryString:function(e){const t=[];return r.forEach(e,((e,n)=>{t.push(n+"="+e)})),t.join("&")},queryStringToObj:function(e,t){if(t=r.isFunction(t)?t:function(){return!0},!("string"==typeof e||e instanceof String))return{};const n=(e=e.trim().replace(/^\?/,"")).split("&"),i={};return r.forEach(n,(e=>{let n,r,o;""!==e&&(r=e.split("="),n=r[0],o=r[1],t(n,o)&&(i[n]=o))})),i},urlParts:function(e){let t,n=e;return o&&(i.setAttribute("href",n),n=i.href,/(.*):(\d+)/.test(i.host)&&(t=i.host.split(":"),i.host=t[0],i.port=t[1])),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:r.isNotEmptyString(i.port)?i.port:80,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}};e.exports=a},7245:e=>{function t(e){return"function"==typeof e}const n={forEach:function e(n,r,i){let o,a;if(n)if(t(n))for(o in n)"prototype"===o||"length"===o||"name"===o||n.hasOwnProperty&&!n.hasOwnProperty(o)||r.call(i,n[o],o,n);else if(s=n,"[object Array]"===Object.prototype.toString.call(s)){const e="object"!=typeof n;for(o=0,a=n.length;o<a;o++)(e||o in n)&&r.call(i,n[o],o,n)}else if(n.forEach&&n.forEach!==e)n.forEach(r,i,n);else for(o in n)n.hasOwnProperty(o)&&r.call(i,n[o],o,n);var s;return n},isFunction:t,isNotEmptyString:function(e){return function(e){return"string"==typeof e}(e)&&0!==e.length}};e.exports=n},9085:(e,t,n)=>{"use strict";function r(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e){if(this.agentId=Date.now()+"_"+this.getRandom(0,1e3),window&&(window.iiq_object_array=window.iiq_object_array||[],window.iiq_object_array.push(this)),this.partnerData={},this.version=5.32,this.intentIqData={},this.isCellular=!1,this.wasDebugCheck=!1,this.wasServerCalled=!1,this.wasCallFromConstructor=!1,this.wasCallbackFired=!1,this.callCount=0,this.manualCallCount=0,this.pubprovidedPrebidCallCount=0,this.noDataCounter=0,this.failCount=0,this.metadataConstant=256,this.syncRefreshMillis=36e5,this.shouldCallServer=!1,this.isPrebidConfigurationSet=!1,this.userProvidedConfig=e,this.lastDataUpdateDate=0,this.configurationTime=0,this.requestRtt=0,this.allBidsMap={},this.messagesArray=[],this.partnerAuctionIdsArray=[],this.reportingServerAddress="https://reports.intentiq.com",this.gatewayServerAddress="https://ucgfk6g6s7.execute-api.us-east-1.amazonaws.com",this.dataReportingPath="report",this.delayedSenderTimeouter=null,this.gatewayWasCalled=!1,this.localStorageEnabled=void 0,this.pubprovidedidsFailedToregister=!1,this.calltype={internal:"i",pubprovided:"p"},this.callbackTimeotID=null,this.eidsReceptionsTime=null,this.eidsNames=[],this.useLodalData=!1,this.auctionStartTimeData={},this.auctionEidsLength={},this.dataSentOnUnload=!1,this.hadEidsInLocalStorage,this.logger=this.initLogger(),this.isDebugMode=this.isDebug()||!1,this.currentBrowserLowerCase=this.detectBrowser().toLowerCase(),this.cookiFullBrowsersListLowercase=["chrome"],this.intentIqConfig={partner:e?e.partner:null,refreshInMillis:e&&"number"==typeof e.refreshInMillis?e.refreshInMillis:432e5,timeoutInMillis:e&&"number"==typeof e.timeoutInMillis?e.timeoutInMillis:3e3,isAsyncServerRequest:!e||"boolean"!=typeof e.isAsyncServerRequest||e.isAsyncServerRequest,callback:e&&"function"==typeof e.callback?e.callback:null,enhanceRequests:!e||"boolean"!=typeof e.enhanceRequests||e.enhanceRequests,sourceMetaData:e&&"string"==typeof e.sourceMetaData?this.translateMetadata(e.sourceMetaData):this.translateMetadata(""),iiqServerAddress:e&&"string"==typeof e.iiqServerAddress?e.iiqServerAddress:"https://api.intentiq.com",iiqPixelServerAddress:e&&"string"==typeof e.iiqPixelServerAddress?e.iiqPixelServerAddress:"https://sync.intentiq.com",partnerClientId:e&&"string"==typeof e.partnerClientId?e.partnerClientId:"",partnerClientIdType:e&&"number"==typeof e.partnerClientIdType?this.verifyIdType(e.partnerClientIdType):-1,pbjs:e&&void 0!==e.pbjs?e.pbjs:null,shouldRepalcePubprovided:!e||"boolean"!=typeof e.shouldRepalcePubprovided||e.shouldRepalcePubprovided,shouldSetUidsModulesConfig:!e||"boolean"!=typeof e.shouldSetUidsModulesConfig||e.shouldSetUidsModulesConfig,shouldClearDuplicatresForRubicon:!e||"boolean"!=typeof e.shouldClearDuplicatresForRubicon||e.shouldClearDuplicatresForRubicon,manualWinReportEnabled:!(!e||"boolean"!=typeof e.manualWinReportEnabled)&&e.manualWinReportEnabled,messageSendingDelay:e&&!isNaN(e.reportDelay)?e.reportDelay:0,domainName:e&&e.domainName?e.domainName:"",shouldReplaceUnifiedId:e&&"boolean"==typeof e.shouldReplaceUnifiedId?e.shouldReplaceUnifiedId:this.unifiedIdReplacementLogic(),browserBlackList:e&&"string"==typeof e.browserBlackList?e.browserBlackList.toLowerCase():"",shouldFilerTdidFromPPuid:!(!e||"boolean"!=typeof e.shouldFilerTdidFromPPuid)&&e.shouldFilerTdidFromPPuid,reportMethod:e&&"string"==typeof e.reportMethod?this.parseReportingMethod(e.reportMethod):"GET",appendEidsNamesToReport:!(!e||"boolean"!=typeof e.appendEidsNamesToReport)&&e.appendEidsNamesToReport},""!==this.intentIqConfig.browserBlackList&&this.intentIqConfig.browserBlackList.includes(this.currentBrowserLowerCase))return this.logger.info("Browser is in blacklist. Good buy."),void(this.intentIqConfig.callback&&this.intentIqConfig.callback());this.intentIqConfig.lsKeys={FIRST_PARTY_KEY:"_iiq_fdata",PARTNER_DATA_KEY:"_iiq_fdata_"+this.intentIqConfig.partner,LAST_SYNC_KEY:"_iiq_sync_"+this.intentIqConfig.partner,abGroup:"_iiq_ab_group_"+this.intentIqConfig.partner,abPercentage:"_iiq_ab_percentage_"+this.intentIqConfig.partner,pbMonitoringEnabled:"_iiq_pb_monitoringenabled_"+this.intentIqConfig.partner,pbPauseUntill:"_iiq_pb_pausetill_"+this.intentIqConfig.partner,requestRtt:"_iiq_requestrtt_"+this.intentIqConfig.partner,DEBUG_KEY:"_iiq_debug_level"},this.checkAndPrintPrebidInitAuctions("Before object init"),this.configurationTime=Date.now(),this.intentIqConfig.moduleIds={unifiedeId:null},this.intentIqConfig.operationalMode={vr:"VR",pixel:"PIXEL",dual:"DUAL",node:"NONE",current:e&&"string"==typeof e.mode?this.getOperationalMode(e.mode):"DUAL"},e&&e.intentIqData&&"undefined"!==e.intentIqData&&(this.intentIqData=e.intentIqData,this.intentIqConfig.operationalMode.current=this.intentIqConfig.operationalMode.vr,this.useLodalData=!0,this.intentIqConfig.pbmonitoring=!0),this.intentIqConfig.collisionPreventionMode={pub:"PUB",other:"OTHER",none:"NONE",current:e&&"string"==typeof e.idCollisionPreventionMode?this.parseCollisionPreventionMode(e.idCollisionPreventionMode):"NONE"},this.intentIqConfig.serverResponse={abPercentage:"abPercentage",abTestGroup:"abGroup",pbPauseUntill:"pbPauseUntil",pbMonitoringEnabled:"pbMonitoringEnabled",isInTestGroup:"isInTestGroup",enhanceRequests:"enhanceRequests",wasSubscribedForPrebid:"wasSubscribedForPrebid",hadEids:"hadEids",userActualPercentage:"userPercentage",ABTestingConfigurationSource:"ABTestingConfigurationSource",lateConfiguration:"lateConfiguration",jsverion:"jsversion",eidsNames:"eidsNames",requestRtt:"rtt",clientType:"clientType",adserverDeviceType:"AdserverDeviceType",terminationCause:"terminationCause",callCount:"callCount",manualCallCount:"mcc",pubprovidedidsFailedToregister:"ppcc",noDataCount:"noDataCount",profile:"profile",isProfileDeterministic:"pidDeterministic",siteId:"sid",hadEidsInLocalStorage:"idls",auctionStartTime:"ast",eidsReadTime:"eidt",agentId:"aid",auctionEidsLegth:"aeidln",wasServerCalled:"wsrvcll",refferer:"vrref"},this.intentIqConfig.urlParamsNames={isInTestGroup:"abtgu",testPercentage:"abtp",testPreviousPercentage:"abtpp",testGroup:"abtg",pbPauseUntill:"pbpause",requestRtt:"rrtt",lastDataUpdateDate:"dud"},this.intentIqConfig.analytics={requestRtt:0,clientType:"",adserverDeviceType:"",terminationCause:"",profile:"",siteId:null},this.intentIqConfig.abTesting={groupNames:{withoutIIQ:"B",withIIQ:"A",notYetDefined:"U",none:"N"},configurationSource:{percentage:"percentage",group:"group",iiqserver:"IIQServer",disabled:"disabled",currentConfigurationSource:this.parseConfigurationSource(e.ABTestingConfigurationSource)},currentPercentage:-1,isInTestGroup:e.disableIIQInThisGroup,previousPercentage:-1,currentTestGroup:"U",previousTestGroup:"U",shouldDiscardServerConfiguration:!1,userActualPercentage:e.abPercentage},this.intentIqConfig.pbmonitoring={pbMonitoringEnabled:!e||"boolean"!=typeof e.pbMonitoringEnabled||!0===e.pbMonitoringEnabled,pbPauseUntill:-1},this.intentIqConfig.subscriptionFlags={bidWon:!1,bidRequested:!1,beforeBidderHttp:!1,auctionInited:!1},this.intentIqConfig.isInPassiveMode=!1,this.intentIqConfig.metadatResolutionEnabled=!1,this.currentDataTTl=this.intentIqConfig.refreshInMillis,this.firstPartyData=this.loadOrCreateFirstPartyData(),this.initPbMonitoring(),this.subscribeForPrebidEvents(),this.initABTestingConfiguration(),this.clearDataIfInGroupBorPassiveMode(),this.getIntentIqData(),this.intentIqConfig.operationalMode.current!==this.intentIqConfig.operationalMode.vr&&this.pixelSync(),e=function(e,t){return"pbjs"==e||"lsKeys"==e||"serverResponse"==e||"urlParamsNames"==e||"groupNames"==e?"skipped in printing":t};var t=this;if(0===this.intentIqConfig.messageSendingDelay)this.logger.info("Skipping registering on unload events, message delay = 0");else{this.logger.info("Initializing on unload events");try{window.onbeforeunload=function(){t.dataSentOnUnload=!0,0<t.messagesArray.length&&t.dataSender(t)}}catch(e){this.logger.error("Failed to susbscibe for onbeforeunload")}try{window.onunload=function(){!1===t.dataSentOnUnload&&0<t.messagesArray.length&&t.dataSender(t)}}catch(e){this.logger.error("Failed to susbscibe for onbeforeunload")}}this.logger.info("========IIQ Agent version "+this.version+"========"),this.logger.info("--------User configuration---------"),this.logger.debug(JSON.stringify(this.userProvidedConfig,e,2)),this.logger.info("--------Startup configuration---------"),this.logger.debug(JSON.stringify(this.intentIqConfig,e,2)),this.logger.info("--------------------------------------"),this.callbackTimeotID||(this.logger.info("Configuring failsafe callback"),this.callbackTimeotID=setTimeout(this.fireCallbackOnRequestTimeout.bind(null,this),this.intentIqConfig.timeoutInMillis))}function i(e){this.constants={noteReported:"NR"},this.biddingPlatformId=e&&e.biddingPlatformId&&!isNaN(e.biddingPlatformId)?e.biddingPlatformId:1,this.partnerAuctionId=e&&e.partnerAuctionId?e.partnerAuctionId:this.constants.noteReported,this.bidderCode=e&&e.bidderCode?e.bidderCode:this.constants.noteReported,this.prebidAuctionId=e&&e.prebidAuctionId?e.prebidAuctionId:this.constants.noteReported,this.cpm=e&&e.cpm&&!isNaN(e.cpm)?e.cpm:-1,this.currency=e&&e.currency?e.currency:this.constants.noteReported,this.originalCpm=e&&e.originalCpm&&!isNaN(e.originalCpm)?e.originalCpm:this.cpm,this.originalCurrency=e&&e.originalCurrency?e.originalCurrency:this.currency,this.status=e&&e.status?e.status:this.constants.noteReported,this.placementId=e&&e.placementId?e.placementId:this.constants.noteReported}return r.prototype.unifiedIdReplacementLogic=function(){return this.currentBrowserLowerCase||(this.currentBrowserLowerCase=this.detectBrowser().toLowerCase()),this.cookiFullBrowsersListLowercase.includes(this.currentBrowserLowerCase)?(this.logger.info("CookieFull browser detected, setting unifyed id override logic to: FALSE"),!1):(this.logger.info("Cookieless browser detected, setting unifyed id override logic to: TRUE"),!0)},r.prototype.clearDataIfInGroupBorPassiveMode=function(){var e;this.intentIqConfig.isInPassiveMode||this.intentIqConfig.abTesting.currentTestGroup===this.intentIqConfig.abTesting.groupNames.withoutIIQ?(null!=(e=this.readData(this.intentIqConfig.lsKeys.PARTNER_DATA_KEY))&&((e=JSON.parse(e)).data={},this.storeData(this.intentIqConfig.lsKeys.PARTNER_DATA_KEY,JSON.stringify(e))),this.logger.info("Calling callback - passive mode or group B set"),this.fireCallback()):this.callbackTimeotID||(this.callbackTimeotID=setTimeout(this.fireCallbackOnRequestTimeout.bind(null,this),this.intentIqConfig.timeoutInMillis))},r.prototype.parseReportingMethod=function(e){try{switch(e.toUpperCase()){case"GET":default:return"GET";case"POST":return"POST"}}catch(e){this.logger.error(e)}return"GET"},r.prototype.fireCallbackOnRequestTimeout=function(e){e.logger.info("Trying to fire callback on timeout"),e.fireCallback()},r.prototype.checkAndPrintPrebidInitAuctions=function(e){try{if(!this.isDebug())return;if(this.logger.info("Validation at stage: "+e),!this.intentIqConfig.pbjs)return void this.logger.error("Pbjs wasn't defined");if(!this.intentIqConfig.pbjs.getEvent)return void this.logger.info("Pbjs was defined but it has no getEvents method. Right on time.");this.logger.info("Total amount of events is "+this.intentIqConfig.pbjs.getEvent()),this.logger.info("Amount of auctionInit events is "+this.intentIqConfig.pbjs.getEvents().filter((function(e){return"auctionInit"===e.eventType})).length)}catch(e){this.logger.error("Failed to report pbjs events state")}},r.prototype.extractIdentittyModulesIds=function(){try{if(this.intentIqData&&this.intentIqData.eids&&Array.isArray(this.intentIqData.eids)){var e,n=t(this.intentIqData.eids);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.source&&"adserver.org"===r.source&&r.uids[0].id){this.intentIqConfig.moduleIds.unifiedeId=r.uids[0].id;break}}}catch(e){n.e(e)}finally{n.f()}}}catch(e){}},r.prototype.fillEidsNames=function(){try{if(!this.intentIqConfig.appendEidsNamesToReport)return void this.logger.info("Skipping eids names population due to configuration");if(this.eidsNames=[],this.intentIqData&&this.intentIqData.eids&&Array.isArray(this.intentIqData.eids)){var e,n=t(this.intentIqData.eids);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.eidsNames.push(r.source)}}catch(e){n.e(e)}finally{n.f()}}}catch(e){this.logger.fatal("Failed to collect eids names")}},r.prototype.initPbMonitoring=function(){!0!==this.intentIqConfig.manualWinReportEnabled?this.userProvidedConfig&&"boolean"==typeof this.userProvidedConfig.pbMonitoringEnabled&&(this.intentIqConfig.pbmonitoring.pbMonitoringEnabled=!0===this.userProvidedConfig.pbMonitoringEnabled):this.intentIqConfig.pbmonitoring.pbMonitoringEnabled=!1},r.prototype.loadOrCreateFirstPartyData=function(){var e=this.tryParse(this.readData(this.intentIqConfig.lsKeys.FIRST_PARTY_KEY));return e&&e.pid&&(this.intentIqConfig.analytics.profile=e.pid),e&&e.pcid?e&&!e.pcidDate&&(e.pcidDate=Date.now()):e={pcid:this.generateGUID(),pcidDate:Date.now()},this.storeData(this.intentIqConfig.lsKeys.FIRST_PARTY_KEY,JSON.stringify(e)),e},r.prototype.parseConfigurationSource=function(e){return"percentage"===e||"group"===e||"IIQServer"===e||"disabled"===e?e:"disabled"},r.prototype.getOperationalMode=function(e){try{switch(e.toLowerCase()){case"bidenhancement":return"VR";case"sync":return"PIXEL";case"both":return"DUAL"}}catch(e){this.logger.error(e)}return this.intentIqConfig.operationalMode.dual},r.prototype.verifyIdType=function(e){return 0===e||1===e||3===e||4===e?e:-1},r.prototype.parseCollisionPreventionMode=function(e){try{switch(e.toLowerCase()){case"pub":return"PUB";case"other":return"OTHER";case"none":return"NONE"}}catch(e){this.logger.error(e)}return this.intentIqConfig.collisionPreventionMode.none},r.prototype.detectBrowser=function(){try{return-1!=(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))?"Opera":-1!=navigator.userAgent.indexOf("Chrome")||-1!=navigator.userAgent.indexOf("CriOS")?"Chrome":-1!=navigator.userAgent.indexOf("Safari")?"Safari":-1!=navigator.userAgent.indexOf("Firefox")?"Firefox":-1!=navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode?"IE":"Unknown"}catch(e){return"Unknown"}},r.prototype.translateMetadata=function(e){try{var t=e.split(".");return((+t[0]*this.metadataConstant+ +t[1])*this.metadataConstant+ +t[2])*this.metadataConstant+ +t[3]}catch(e){return NaN}},r.prototype.getRandom=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},r.prototype.generateRandom1to99=function(){return Math.floor(99*Math.random())+1},r.prototype.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},r.prototype.isEmptyObjAndArray=function(t){return!t||"object"==e(t)&&this.isEmpty(t)},r.prototype.isDefined=function(e){return void 0!==e&&null!=e},r.prototype.containsEids=function(e){var t=!1;try{t="data"in e&&"eids"in e.data&&Array.isArray(e.data.eids)&&0<e.data.eids.length}catch(e){}return t},r.prototype.generateRandomUsIp=function(){var e=this.readData("_iiq_ip");return(!e||this.isIpCellular(e)&&!this.isCellular||!this.isIpCellular(e)&&this.isCellular)&&(e=this.generateNewRandomIp(this.isCellular),this.storeData("_iiq_ip",e)),e},r.prototype.isIpCellular=function(e){return e.startsWith("107.77.208.")},r.prototype.generateNewRandomIp=function(e){return(e=e?"107.77.208.":"98.115.221.")+Math.floor(255*Math.random())},r.prototype.tryParse=function(e){try{return JSON.parse(e)}catch(e){this.logger.error(e)}return null},r.prototype.tryParseInt=function(e){try{return parseInt(e,10)}catch(e){return this.logger.error(e),-1}},r.prototype.addLevelValue=function(e){return"string"==typeof e&&this.logger.allLevels[e=e.toUpperCase()]?e.toUpperCase():"FATAL"},r.prototype.initLogger=function(){var e=this;return{info:function(e){this.log("INFO",e)},debug:function(e){this.log("DEBUG",e)},fatal:function(e){this.log("FATAL",e)},error:function(e){this.log("ERROR",e)},trace:function(e){this.log("TRACE",e)},log:function(e,t){this.isLessThanOrEqualTo(e)&&this._print(t,e)},isLessThanOrEqualTo:function(t){return this.allLevels[e.levelValue].value>=this.allLevels[t].value},_print:function(t,n){var r=this.allLevels[n].colour,i=this.allLevels[n].secondary_color,o=e&&e.intentIqConfig&&e.intentIqConfig.partner?e.intentIqConfig.partner:e.userProvidedConfig?e.userProvidedConfig.partner:null;console.log("".concat(o," %c[").concat(n,"]%c [").concat(Date.now(),"] %c").concat(t),"color: white ; background-color:"+r+"; border-radius: 3px","border:none","color: "+i+" ; border:1px solid "+r+"; border-radius: 3px")},allLevels:{FATAL:{value:10,colour:"magenta",secondary_color:"magenta"},INFO:{value:20,colour:"green",secondary_color:"green"},ERROR:{value:30,colour:"red",secondary_color:"red"},DEBUG:{value:40,colour:"cyan",secondary_color:"grey"},TRACE:{value:50,colour:"blue",secondary_color:"blue"}}}},r.prototype.isDebug=function(){var e;return this.wasDebugCheck||(this.levelValue="FATAL",!this.hasLocalStorage()||null!==(e=this.readData("_iiq_debug_level"))&&(this.isDebugMode=!0,this.levelValue=this.addLevelValue(e)),this.wasDebugCheck=!0),this.isDebugMode},r.prototype.setInfoLevel=function(){this.storeData("_iiq_debug_level","INFO")},r.prototype.setDebugLevel=function(){this.storeData("_iiq_debug_level","DEBUG")},r.prototype.setTraceLevel=function(){this.storeData("_iiq_debug_level","TRACE")},r.prototype.hasLocalStorage=function(){if(void 0!==this.localStorageEnabled)return this.localStorageEnabled;try{return this.localStorageEnabled=!!window.localStorage,this.localStorageEnabled}catch(e){this.localStorageEnabled=!1,this.logger.info("Local storage api disabled")}return!1},r.prototype.storeData=function(e,t){try{"string"==typeof e&&e.startsWith("iiq_fdata")&&this.logger.info("IntentIQ: storing data: key="+e+" value="+t),this.isDefined(t)&&this.hasLocalStorage()&&window.localStorage.setItem(e,t)}catch(e){this.logger.error(e)}},r.prototype.readData=function(e){try{if(this.hasLocalStorage())return window.localStorage.getItem(e)}catch(e){this.logger.error(e)}return null},r.prototype.generateGUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},r.prototype.clearCounters=function(){this.callCount=0,this.failCount=0,this.noDataCounter=0,this.manualCallCount=0,this.pubprovidedPrebidCallCount=0,this.savePartnerDataToLocalStore()},r.prototype.fireCallback=function(){try{var e;null===this.intentIqConfig.callback||void 0===this.intentIqConfig.callback||this.wasCallbackFired?this.logger.info("Skippping calback fire , already fired or not defined"):(e=this.wasCallbackFired,this.wasCallbackFired=!0,null!==this.callbackTimeotID&&(this.logger.info("Removing callback timeout - got it first"),clearTimeout(this.callbackTimeotID)),this.logger.info("Actual callback fire."),this.intentIqConfig.callback(this.intentIqData,!e))}catch(e){}},r.prototype.getInternalIntentIqEids=function(e){void 0===e&&(e=this);try{return e.getIntentIqEids(e,e.calltype.internal)}catch(t){e.failCount++,e.logger.error("Failed to get EIDS for internal call"),e.savePartnerDataToLocalStore()}return[]},r.prototype.getPubprovidedEids=function(e){void 0===e&&(e=this);try{var t=JSON.parse(JSON.stringify(e.getIntentIqEids(e,e.calltype.pubprovided)));if(0==e.intentIqConfig.shouldFilerTdidFromPPuid)return t;for(var n=0;n<t.length;n++)if(t[n].source&&"adserver.org"===t[n].source&&t[n].uids[0].id){t.splice(n,1);break}return t}catch(t){e.failCount++,e.logger.error("Failed to get EIDS for internal call"),e.savePartnerDataToLocalStore()}return[]},r.prototype.getIntentIqEids=function(e,t){void 0===e&&(e=this);try{if(e.intentIqConfig.isInPassiveMode||e.intentIqConfig.operationalMode.current===e.intentIqConfig.operationalMode.pixel)return[];if(e.intentIqConfig.abTesting.currentTestGroup===e.intentIqConfig.abTesting.groupNames.withoutIIQ)return[];var n=e.getIntentIqData(t);if(n&&n.eids)return n.eids}catch(t){e.failCount++,e.logger.error("Parse response eids got exception"),e.savePartnerDataToLocalStore()}return[]},r.prototype.loadPartnerData=function(){var e=this.tryParse(this.readData(this.intentIqConfig.lsKeys.PARTNER_DATA_KEY));return e?(this.hadEidsInLocalStorage=!1,(e.data||this.useLodalData)&&(!this.intentIqConfig.isInPassiveMode&&this.intentIqConfig.abTesting.currentTestGroup!==this.intentIqConfig.abTesting.groupNames.withoutIIQ||(e.data={}),!1===this.useLodalData?this.intentIqData=e.data:e.data=this.intentIqData,this.intentIqData&&this.intentIqData.eids&&Array.isArray(this.intentIqData.eids)&&(this.hadEidsInLocalStorage=0<this.intentIqData.eids.length),this.extractIdentittyModulesIds(),this.fillEidsNames(),this.eidsReceptionsTime=Date.now()),"number"==typeof e.callCount&&(this.callCount=e.callCount),"number"==typeof e.manualCallCount&&(this.manualCallCount=e.manualCallCount),"number"==typeof e.pubprovidedPrebidCallCount&&(this.pubprovidedPrebidCallCount=e.pubprovidedPrebidCallCount),"number"==typeof e.failCount&&(this.failCount=e.failCount),"number"==typeof e.noDataCounter&&(this.noDataCounter=e.noDataCounter),"number"==typeof e.cttl&&(this.currentDataTTl=e.cttl,this.logger.info("Custom data TTL loaded from LS, value: "+this.currentDataTTl)),e.date&&(this.lastDataUpdateDate=e.date,this.shouldCallServer=Date.now()-e.date>this.currentDataTTl),e.ct&&(this.intentIqConfig.analytics.clientType=e.clientType),e.adserverDeviceType&&(this.intentIqConfig.analytics.adserverDeviceType=e.adserverDeviceType),e.terminationCause&&(this.intentIqConfig.analytics.terminationCause=e.terminationCause),e.pidDeterministic&&(this.intentIqConfig.analytics.pidDeterministic=e.pidDeterministic),e.siteId&&(this.intentIqConfig.analytics.siteId=e.siteId)):(e={},this.shouldCallServer=!0),e},r.prototype.getIntentIqData=function(e){try{if(this.intentIqConfig.operationalMode.current===this.intentIqConfig.operationalMode.pixel)return{};if("number"!=typeof this.intentIqConfig.partner)return this.failCount++,this.logger.error("intentIqId requires a valid partner to be defined"),{};var t;this.partnerData=this.loadPartnerData(),this.wasCallFromConstructor?(void 0!==e?e===this.calltype.internal||e===this.calltype.pubprovided&&this.pubprovidedPrebidCallCount++:(this.manualCallCount++,this.containsEids(this.partnerData)||(this.noDataCounter=this.noDataCounter+1)),this.savePartnerDataToLocalStore()):this.wasCallFromConstructor=!0,this.shouldCallServer&&!this.wasServerCalled&&!1===this.useLodalData?(this.wasServerCalled=!0,t=this.createRequestUrl(!1),this.makeServerRequest(t,!0)):(this.savePartnerDataToLocalStore(),this.isPrebidConfigurationSet||(this.isPrebidConfigurationSet=!0,this.configurePrebid()));var n,r=!this.isEmptyObjAndArray(this.intentIqData)||!this.shouldCallServer;return this.intentIqConfig.callback&&!this.wasCallbackFired&&r&&(n=this.wasCallbackFired,this.wasCallbackFired=!0,this.logger.info("Actual callback fire."),this.intentIqConfig.callback(this.intentIqData,!n)),this.intentIqData||{}}catch(e){this.failCount++,this.logger.error("Exception occurred during main logic: "+e),this.savePartnerDataToLocalStore()}return{}},r.prototype.createPixelUrl=function(){var e=this.intentIqConfig.iiqPixelServerAddress+"/profiles_engine/ProfilesEngineServlet?at=20&mi=10&secure=1";return e+="&dpi="+this.intentIqConfig.partner,e+="&rnd="+this.getRandom(0,1e6),e=this.appendFirstPartyDataToUrl(e),e=this.addUniquenessToUrl(e),e=this.addMetaData(e),e=this.appendPartnersFirsyParty(e),e=this.appendReferrerToUrl(e),e+=this.version?"&jsver="+encodeURIComponent(this.version):"",this.appendABTestingData(e)},r.prototype.pixelSync=function(){try{var e,t=parseInt(this.readData(this.intentIqConfig.lsKeys.LAST_SYNC_KEY));(!t||Date.now()-t>this.syncRefreshMillis)&&(e=this.createPixelUrl(),this.appendImage(e),this.storeData(this.intentIqConfig.lsKeys.LAST_SYNC_KEY,Date.now()+""))}catch(e){this.logger.error("Error adding pixel to DOM "+e)}},r.prototype.appendImage=function(e){var t;this.isDefined(e)&&((t=document.createElement("img")).src=e,t.width=1,t.height=1,this.isDefined(document.body)?document.body.appendChild(t):window.addEventListener("load",(function(){try{document.body.appendChild(t)}catch(e){}})))},r.prototype.tryExtractConfiguration=function(e){this.intentIqConfig.abTesting.shouldDiscardServerConfiguration||(this.logger.info("Extracting AB testing parameter"),this.tryExtractABTestingConfiguration(e)),this.logger.info("Extracting monitoring parameter")},r.prototype.tryExtractABTestingConfiguration=function(e){var t;this.intentIqConfig.serverResponse.abPercentage in e&&(t=this.tryParseInt(e[this.intentIqConfig.serverResponse.abPercentage]),this.logger.info("abPercentage received: "+e[this.intentIqConfig.serverResponse.abPercentage]),t!==this.intentIqConfig.abTesting.currentPercentage&&(this.logger.info("abPercentage has changed from:"+this.intentIqConfig.abTesting.currentPercentage+" to:"+e[this.intentIqConfig.serverResponse.abPercentage]),this.intentIqConfig.abTesting.previousPercentage=this.intentIqConfig.abTesting.currentPercentage,this.intentIqConfig.abTesting.currentPercentage=t,this.generateTestGroupAccordingToPercentageAndConfigure(),this.persistABTestingSettingsToLS()))},r.prototype.configureABTestingForIIQServer=function(){this.intentIqConfig.abTesting.currentTestGroup=this.intentIqConfig.abTesting.groupNames.notYetDefined,this.intentIqConfig.abTesting.previousTestGroup=this.intentIqConfig.abTesting.groupNames.notYetDefined,this.intentIqConfig.abTesting.shouldDiscardServerConfiguration=!1,this.intentIqConfig.isInPassiveMode=!1},r.prototype.configureABTestingForGroupA=function(){this.intentIqConfig.abTesting.currentTestGroup=this.intentIqConfig.abTesting.groupNames.withIIQ,this.intentIqConfig.abTesting.previousTestGroup=this.intentIqConfig.abTesting.groupNames.notYetDefined,this.intentIqConfig.abTesting.currentPercentage=100,this.intentIqConfig.abTesting.shouldDiscardServerConfiguration=!0,this.intentIqConfig.isInPassiveMode=!1},r.prototype.configureABTestingForGroupB=function(){this.intentIqConfig.abTesting.currentTestGroup=this.intentIqConfig.abTesting.groupNames.withoutIIQ,this.intentIqConfig.abTesting.previousTestGroup=this.intentIqConfig.abTesting.groupNames.notYetDefined,this.intentIqConfig.abTesting.currentPercentage=0,this.intentIqConfig.abTesting.shouldDiscardServerConfiguration=!0,this.intentIqConfig.isInPassiveMode=!0},r.prototype.configureABTestingForPercentage=function(){this.intentIqConfig.abTesting.currentTestGroup=this.intentIqConfig.abTesting.groupNames.notYetDefined,this.intentIqConfig.abTesting.previousTestGroup=this.intentIqConfig.abTesting.groupNames.notYetDefined,this.intentIqConfig.abTesting.shouldDiscardServerConfiguration=!0,this.intentIqConfig.isInPassiveMode=!1},r.prototype.configurationSourceGroupInitilization=function(){this.userProvidedConfig&&"boolean"==typeof this.userProvidedConfig.disableIIQInThisGroup?(this.intentIqConfig.abTesting.isInTestGroup=!0===this.userProvidedConfig.disableIIQInThisGroup,!0===this.userProvidedConfig.disableIIQInThisGroup?this.configureABTestingForGroupB():this.configureABTestingForGroupA()):this.configureABTestingForGroupA()},r.prototype.configurationSourcePercentageInitilization=function(){switch(this.userProvidedConfig&&"number"==typeof this.userProvidedConfig.abPercentage&&this.userProvidedConfig.abPercentage<101&&-1<this.userProvidedConfig.abPercentage?this.intentIqConfig.abTesting.userActualPercentage=this.userProvidedConfig.abPercentage:this.intentIqConfig.abTesting.userActualPercentage=-2,this.intentIqConfig.abTesting.userActualPercentage){case 0:this.configureABTestingForGroupB();break;case 100:case-2:this.configureABTestingForGroupA();break;default:this.configureABTestingForPercentage()}},r.prototype.abTestingAdvancedConfiguration=function(){var e;this.intentIqConfig.abTesting.currentTestGroup===this.intentIqConfig.abTesting.groupNames.notYetDefined&&(e=this.readData(this.intentIqConfig.lsKeys.abPercentage),isNaN(parseInt(e))||(this.intentIqConfig.abTesting.currentPercentage=Number(e)),null!=(e=this.readData(this.intentIqConfig.lsKeys.abGroup))&&(this.intentIqConfig.abTesting.currentTestGroup=e,this.intentIqConfig.isInPassiveMode=this.intentIqConfig.abTesting.currentTestGroup===this.intentIqConfig.abTesting.groupNames.withoutIIQ),this.intentIqConfig.abTesting.configurationSource.currentConfigurationSource===this.intentIqConfig.abTesting.configurationSource.percentage&&this.isDefined(this.intentIqConfig.abTesting.userActualPercentage)&&0<this.intentIqConfig.abTesting.userActualPercentage&&this.intentIqConfig.abTesting.userActualPercentage<100&&this.intentIqConfig.abTesting.userActualPercentage!==this.intentIqConfig.abTesting.currentPercentage&&(this.intentIqConfig.abTesting.previousTestGroup=this.intentIqConfig.abTesting.currentTestGroup,this.intentIqConfig.abTesting.previousPercentage=this.intentIqConfig.abTesting.currentPercentage,this.intentIqConfig.abTesting.currentPercentage=this.intentIqConfig.abTesting.userActualPercentage,this.generateTestGroupAccordingToPercentageAndConfigure(),this.persistABTestingSettingsToLS()))},r.prototype.initABTestingConfiguration=function(){switch(this.intentIqConfig.abTesting.configurationSource.currentConfigurationSource){case this.intentIqConfig.abTesting.configurationSource.group:this.configurationSourceGroupInitilization();break;case this.intentIqConfig.abTesting.configurationSource.percentage:this.configurationSourcePercentageInitilization();break;case this.intentIqConfig.abTesting.configurationSource.iiqserver:this.configureABTestingForIIQServer();break;case this.intentIqConfig.abTesting.configurationSource.disabled:this.configureABTestingForGroupA()}this.abTestingAdvancedConfiguration()},r.prototype.generateTestGroupAccordingToPercentageAndConfigure=function(){this.generateRandom1to99()<this.intentIqConfig.abTesting.currentPercentage?(this.intentIqConfig.abTesting.currentTestGroup=this.intentIqConfig.abTesting.groupNames.withIIQ,this.intentIqConfig.isInPassiveMode=!1):(this.intentIqConfig.abTesting.currentTestGroup=this.intentIqConfig.abTesting.groupNames.withoutIIQ,this.intentIqConfig.isInPassiveMode=!0)},r.prototype.persistABTestingSettingsToLS=function(){this.isDefined(this.intentIqConfig.abTesting.currentTestGroup)&&this.storeData(this.intentIqConfig.lsKeys.abGroup,this.intentIqConfig.abTesting.currentTestGroup),this.isDefined(this.intentIqConfig.abTesting.currentPercentage)&&this.storeData(this.intentIqConfig.lsKeys.abPercentage,this.intentIqConfig.abTesting.currentPercentage)},r.prototype.getRequest=function(e,t,n,r){var i=new XMLHttpRequest;this.intentIqConfig.isAsyncServerRequest?i.open("GET",e,!0):i.open("GET",e,!1),e.startsWith("https")&&(i.withCredentials=!0),i.timeout=t,i.onreadystatechange=function(){n&&4===i.readyState&&n(i.responseText)},i.ontimeout=function(){r&&r()},i.send()},r.prototype.makeServerRequest=function(e,t){var n=this,r=!1;this.logger.info("Sending request"),this.requestRtt=Date.now(),!0===t&&(this.logger.info("Setting prebid config callback timeout"),this.callbackTimeotID||(this.callbackTimeotID=setTimeout(this.fireCallbackOnRequestTimeout.bind(null,this),this.intentIqConfig.timeoutInMillis))),this.clearCounters(),this.getRequest(e,9999999,(function(e){n.intentIqConfig.analytics.requestRtt=Date.now()-n.requestRtt;var t=n.tryParse(e);t&&(n.partnerData.date=Date.now(),"pid"in t&&(n.intentIqConfig.analytics.profile=t.pid,"ls"in t&&!0===t.ls&&(n.firstPartyData.pid=t.pid,r=!0)),"dbsaved"in t&&(n.firstPartyData.dbsaved=t.dbsaved,r=!0),"cttl"in t?(n.currentDataTTl=t.cttl,n.logger.info("Received custom TTL from server, value: "+n.currentDataTTl)):(n.currentDataTTl=n.intentIqConfig.refreshInMillis,n.logger.info("No custom TTL from server, setting customers value: "+n.currentDataTTl)),"gtwaddr"in t&&(n.gatewayServerAddress=t.gtwaddr),"tc"in t&&(n.intentIqConfig.analytics.terminationCause=t.tc,"mde"in t&&!0===t.mde&&!1===n.gatewayWasCalled&&!0===t.mde&&35===n.intentIqConfig.analytics.terminationCause&&"Safari"===n.detectBrowser()&&(n.logger.info("VP detected, trying to resolve."),n.gatewayWasCalled=!0,e=n.createRequestUrl(!0),n.makeServerRequest(e+="&gtw=true",!0))),"ct"in t&&(n.intentIqConfig.analytics.clientType=t.ct),"adt"in t&&(n.intentIqConfig.analytics.adserverDeviceType=t.adt),"sid"in t&&(n.intentIqConfig.analytics.siteId=t.sid),"pidd"in t&&(n.intentIqConfig.analytics.isProfileDeterministic=t.pidd),n.tryExtractConfiguration(t),n.containsEids(t)||(n.noDataCounter=n.noDataCounter+1),t.ls&&(!n.intentIqConfig.isInPassiveMode&&n.intentIqConfig.abTesting.currentTestGroup!==n.intentIqConfig.abTesting.groupNames.withoutIIQ||(t.data={}),n.partnerData.data=t.data,n.intentIqData=t.data,n.extractIdentittyModulesIds(),n.fillEidsNames(),n.eidsReceptionsTime=Date.now()),n.logger.info("Received Data: "+JSON.stringify(t))),r&&n.storeData(n.intentIqConfig.lsKeys.FIRST_PARTY_KEY,JSON.stringify(n.firstPartyData)),n.savePartnerDataToLocalStore(),n.isPrebidConfigurationSet||(n.isPrebidConfigurationSet=!0,n.configurePrebid()),n.fireCallback()}),(function(){n.intentIqConfig.analytics.requestRtt=-1,n.fireCallback()}))},r.prototype.savePartnerDataToLocalStore=function(){this.partnerData||(this.partnerData=this.tryParse(this.readData(this.intentIqConfig.lsKeys.PARTNER_DATA_KEY))),this.partnerData&&(this.partnerData.callCount=this.callCount,this.partnerData.pubprovidedPrebidCallCount=this.pubprovidedPrebidCallCount,this.partnerData.manualCallCount=this.manualCallCount,this.partnerData.failCount=this.failCount,this.partnerData.noDataCounter=this.noDataCounter,this.partnerData.cttl=this.currentDataTTl,this.partnerData.clientType=this.intentIqConfig.analytics.clientType,this.partnerData.adserverDeviceType=this.intentIqConfig.analytics.adserverDeviceType,this.partnerData.terminationCause=this.intentIqConfig.analytics.terminationCause,this.partnerData.profile=this.intentIqConfig.analytics.profile,this.partnerData.pidDeterministic=this.intentIqConfig.analytics.pidDeterministic,this.partnerData.siteId=this.intentIqConfig.analytics.siteId,this.storeData(this.intentIqConfig.lsKeys.PARTNER_DATA_KEY,JSON.stringify(this.partnerData)))},r.prototype.createRequestUrl=function(e){return e=(!0===e?this.gatewayServerAddress:this.intentIqConfig.iiqServerAddress)+"/profiles_engine/ProfilesEngineServlet?at=39&mi=10&dpi="+this.intentIqConfig.partner+"&pt=17&dpn=1",e+=this.intentIqConfig.pai?"&pai="+encodeURIComponent(this.intentIqConfig.pai):"",e+=this.version?"&jsver="+encodeURIComponent(this.version):"",e=this.appendFirstPartyDataToUrl(e),e+=this.appendCallCount(e),e+="number"==typeof this.failCount?"&iiqfailcount="+encodeURIComponent(this.failCount):"",e+="number"==typeof this.noDataCounter?"&iiqnodata="+encodeURIComponent(0<this.noDataCounter):"",e+="&iiqlocalstorageenabled="+encodeURIComponent(this.hasLocalStorage()),e=this.addUniquenessToUrl(e),e=this.addMetaData(e),e+="&cttl="+encodeURIComponent(this.currentDataTTl),e=this.appendPartnersFirsyParty(e),e=this.appendRttDate(e),e=this.appendLastDataUpdateDate(e),e=this.appendWithAnalyticsData(e),e+="number"==typeof this.pubprovidedPrebidCallCount?"&iiqppcc="+encodeURIComponent(this.pubprovidedPrebidCallCount):"",this.appendReferrerToUrl(e)},r.prototype.appendCallCount=function(e){return null===this.intentIqConfig.pbjs?"number"==typeof this.manualCallCount?"&iiqcallcount="+encodeURIComponent(this.manualCallCount):"":"number"==typeof this.callCount?"&iiqcallcount="+encodeURIComponent(this.callCount):""},r.prototype.appendLastDataUpdateDate=function(e){return isNaN(this.lastDataUpdateDate)?e:e+"&"+this.intentIqConfig.urlParamsNames.lastDataUpdateDate+"="+this.lastDataUpdateDate},r.prototype.appendRttDate=function(e){return isNaN(this.intentIqConfig.analytics.requestRtt)?e:e+"&"+this.intentIqConfig.urlParamsNames.requestRtt+"="+this.intentIqConfig.analytics.requestRtt},r.prototype.appendWithAnalyticsData=function(e){return e+"&"+this.intentIqConfig.urlParamsNames.testGroup+"="+this.intentIqConfig.abTesting.currentTestGroup},r.prototype.appendABTestingData=function(e){try{this.isDefined(this.intentIqConfig.abTesting.isInTestGroup)&&(e=e+"&"+this.intentIqConfig.urlParamsNames.isInTestGroup+"="+this.intentIqConfig.abTesting.isInTestGroup),this.isDefined(this.intentIqConfig.abTesting.currentPercentage)&&(e=e+"&"+this.intentIqConfig.urlParamsNames.testPercentage+"="+this.intentIqConfig.abTesting.currentPercentage),this.isDefined(this.intentIqConfig.abTesting.currentTestGroup)&&(e=e+"&"+this.intentIqConfig.urlParamsNames.testGroup+"="+this.intentIqConfig.abTesting.currentTestGroup)}catch(e){this.logger.error(e)}return e},r.prototype.appendPartnersFirsyParty=function(e){try{if(-1===this.intentIqConfig.partnerClientIdType)return e;""!==this.intentIqConfig.partnerClientId&&(e=(e=e+"&pcid="+this.intentIqConfig.partnerClientId)+"&idtype="+this.intentIqConfig.partnerClientIdType)}catch(e){this.logger.error(e)}return e},r.prototype.addMetaData=function(e){return isNaN(this.intentIqConfig.sourceMetaData)?e:e+="&fbp="+this.intentIqConfig.sourceMetaData},r.prototype.addUniquenessToUrl=function(e){return e+"&tsrnd="+Math.floor(1e3*Math.random())+"_"+(new Date).getTime()},r.prototype.appendFirstPartyDataToUrl=function(e){return e+=this.isDebug()?"&ip="+encodeURIComponent(this.generateRandomUsIp()):"",e+=this.firstPartyData.pid?"&pid="+encodeURIComponent(this.firstPartyData.pid):"",e+=this.firstPartyData.dbsaved?"&dbsaved="+encodeURIComponent(this.firstPartyData.dbsaved):"",(e+=this.firstPartyData.pcid?"&iiqidtype=2&iiqpcid="+encodeURIComponent(this.firstPartyData.pcid):"")+(this.firstPartyData.pcidDate?"&iiqpciddate="+encodeURIComponent(this.firstPartyData.pcidDate):"")},r.prototype.appendReferrerToUrl=function(e){return""!==this.getRefferer()&&(e+="&vrref="+this.getRefferer()),e},r.prototype.getRefferer=function(){return""!==this.intentIqConfig.domainName?encodeURIComponent(this.intentIqConfig.domainName):document.referrer&&""!==document.referrer?encodeURIComponent(document.referrer):""},r.prototype.updatePrebidObject=function(e,t){try{if(!e)return void this.logger.fatal("PBJS not provided while trying to update pbjs objecr refference");if(!t)return void this.logger.error("CALLBACK not provided while trying to update pbjs objecr refference");this.logger.info("String PBJS Reconfiguration"),this.intentIqConfig.subscriptionFlags={bidWon:!1,bidRequested:!1,beforeBidderHttp:!1,auctionInited:!1},this.wasCallbackFired=!1,this.intentIqConfig.pbjs=e,this.intentIqConfig.callback=t,this.subscribeForPrebidEvents(),this.configurePrebid(),this.getIntentIqData()}catch(e){this.logger.error(e)}},r.prototype.auctionCallCounter=function(e,t){t.logger.info("Auction started."),t.callCount++,t.savePartnerDataToLocalStore()},r.prototype.onBidWonEvent=function(e,t){try{if(!t.intentIqConfig.pbmonitoring.pbMonitoringEnabled)return void t.logger.info("pbMonitoringEnabled is disabled ");if(e==={})return void t.logger.info("eventData is empty");var n=t.prepareDataForDelivery(e,null,t);if(null===n)return void t.logger.info("Failed to prepare bid won data to send, "+t.intentIqConfig.partner);t.addDataToSendAndInitSender(n,t)}catch(e){t.logger.error(e)}},r.prototype.addDataToSendAndInitSender=function(e,t){try{t.messagesArray.push(e),t.logger.info("New data available to send, "+t.intentIqConfig.partner),t.startSender()}catch(e){t.logger.error(e)}},r.prototype.prepareDataForDelivery=function(e,t,n){try{if(-1!==n.intentIqConfig.pbmonitoring.pbPauseUntill&&!isNaN(n.intentIqConfig.pbmonitoring.pbPauseUntill)&&Date.now()<n.intentIqConfig.pbmonitoring.pbPauseUntill)return{};var r,i,o={};if(t)t&&(o.bidderCode=t.bidderCode,o.cpm=t.cpm,o.currency=t.currency,o.originalCpm=t.originalCpm,o.originalCurrency=t.originalCurrency,o.status=t.status,o.biddingPlatformId=t.biddingPlatformId,o.prebidAuctionId=t.prebidAuctionId,o.placementId=t.placementId,o.partnerAuctionId=t.partnerAuctionId,n.partnerAuctionIdsArray.push(o.partnerAuctionId));else{e.bidderCode&&(o.bidderCode=e.bidderCode),e.cpm&&(o.cpm=e.cpm),e.currency&&(o.currency=e.currency),e.originalCpm&&(o.originalCpm=e.originalCpm),e.originalCurrency&&(o.originalCurrency=e.originalCurrency),e.status&&(o.status=e.status),e.auctionId&&(o.prebidAuctionId=e.auctionId);var a=!1;if(e.params&&Array.isArray(e.params))for(var s=0;s<e.params.length;s++)if(e.params[0].placementId){o.placementId=e.params[0].placementId,a=!0;break}!1===a&&e.adUnitCode&&(o.placementId=e.adUnitCode),o.biddingPlatformId=1,o.partnerAuctionId="BW"}r=n.auctionStartTimeData[o.prebidAuctionId]||0,o[n.intentIqConfig.serverResponse.abPercentage]=n.intentIqConfig.abTesting.currentPercentage,o[n.intentIqConfig.serverResponse.abTestGroup]=n.intentIqConfig.abTesting.currentTestGroup,o[n.intentIqConfig.serverResponse.isInTestGroup]=n.intentIqConfig.abTesting.currentTestGroup,o[n.intentIqConfig.serverResponse.wasSubscribedForPrebid]=n.isSubscribedForPrebidEvents,o[n.intentIqConfig.serverResponse.enhanceRequests]=n.intentIqConfig.shouldSetUidsModulesConfig,o[n.intentIqConfig.serverResponse.hadEids]=!(null===n.eidsReceptionsTime||r<n.eidsReceptionsTime),void 0===n.auctionStartTimeData[o.prebidAuctionId]&&(o[n.intentIqConfig.serverResponse.hadEids]=void 0),o[n.intentIqConfig.serverResponse.userActualPercentage]=n.userProvidedConfig.abPercentage,o[n.intentIqConfig.serverResponse.ABTestingConfigurationSource]=n.userProvidedConfig.ABTestingConfigurationSource,o[n.intentIqConfig.serverResponse.jsverion]=n.version,o[n.intentIqConfig.serverResponse.lateConfiguration]=0===r?void 0:n.configurationTime>r,0!==r&&n.configurationTime>r&&n.logger.info("Late configuration suspected. Events were missed."),o[n.intentIqConfig.serverResponse.eidsNames]=n.eidsNames,o[n.intentIqConfig.serverResponse.requestRtt]=n.intentIqConfig.analytics.requestRtt,n.intentIqConfig.analytics.requestRtt=0,n.requestRtt=0,o[n.intentIqConfig.serverResponse.clientType]=n.intentIqConfig.analytics.clientType,o[n.intentIqConfig.serverResponse.adserverDeviceType]=n.intentIqConfig.analytics.adserverDeviceType,o[n.intentIqConfig.serverResponse.terminationCause]=n.intentIqConfig.analytics.terminationCause,o[n.intentIqConfig.serverResponse.profile]=n.intentIqConfig.analytics.profile,o[n.intentIqConfig.serverResponse.siteId]=n.intentIqConfig.analytics.siteId,o[n.intentIqConfig.serverResponse.hadEidsInLocalStorage]=n.hadEidsInLocalStorage,o[n.intentIqConfig.serverResponse.auctionStartTime]=r,o[n.intentIqConfig.serverResponse.eidsReadTime]=n.eidsReceptionsTime,o[n.intentIqConfig.serverResponse.agentId]=n.agentId,o[n.intentIqConfig.serverResponse.auctionEidsLegth]=n.auctionEidsLength[o.prebidAuctionId],o[n.intentIqConfig.serverResponse.wasServerCalled]=n.wasServerCalled,o[n.intentIqConfig.serverResponse.refferer]=n.getRefferer(),!n.hasLocalStorage()||null!==(i=n.readData(n.intentIqConfig.lsKeys.FIRST_PARTY_KEY))&&("pcid"in(i=JSON.parse(i))&&(i=i.pcid),o.pcid=i),o.partnerId=n.intentIqConfig.partner;var d=btoa(JSON.stringify(o));return n.logger.info("Data conversion succeed : "+JSON.stringify(d)),d}catch(e){return n.logger.error("Failed to convert data"),n.logger.error(e),{}}},r.prototype.startSender=function(){try{this.logger.info("We have some data to send - starting delayed sender. Delay = "+this.intentIqConfig.messageSendingDelay),this.isDefined(this.delayedSenderTimeouter)&&(this.logger.info("Updating sender"),clearTimeout(this.delayedSenderTimeouter)),this.delayedSenderTimeouter=setTimeout(this.dataSender.bind(null,this),this.intentIqConfig.messageSendingDelay)}catch(e){this.logger.error(e)}},r.prototype.dataSender=function(e){try{if(0==e.messagesArray.length)return void e.logger.info("Skipping data send , array is empty");var t="GET"===e.intentIqConfig.reportMethod,n=JSON.stringify(e.messagesArray),r=new XMLHttpRequest,i=e.reportingServerAddress+"/"+e.dataReportingPath+"?pid="+e.intentIqConfig.partner+"&mct="+e.messagesArray.length+"&agid="+e.agentId+(e.firstPartyData.pid?"&iiqid="+encodeURIComponent(e.firstPartyData.pcid):"")+"&jsver="+e.version+"&vrref="+e.getRefferer()+"&paucid="+encodeURIComponent(JSON.stringify(e.partnerAuctionIdsArray));t&&(i+="&payload="+n),i.startsWith("https")&&(r.withCredentials=!0),r.open(t?"GET":"POST",i,!0),t?r.setRequestHeader("Content-type","text/plain"):(r.setRequestHeader("Content-type","application/json"),r.setRequestHeader("Access-Control-Allow-Origin","*"),r.setRequestHeader("Access-Control-Allow-Credentials","true"),r.setRequestHeader("Access-Control-Allow-Methods","GET,HEAD,OPTIONS,POST,PUT"),r.setRequestHeader("Access-Control-Allow-Headers","Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers")),e.messagesArray=[],e.partnerAuctionIdsArray=[],r.onreadystatechange=function(){4==r.readyState&&200==r.status&&e.processResponse(r.responseText)},e.logger.info("Trying to send data: "),e.logger.info(n),t?r.send():r.send(n)}catch(t){e.logger.error(t)}},r.prototype.processResponse=function(e){try{if(this.logger.info("Response received"+JSON.stringify(e)),!this.isDefined(e))return void this.logger.info("Response is empty");var t=this.tryParse(e);if(!Array.isArray(t))return void this.logger.info("Wrong response format (not an array): "+e);if(0===t.length)return void this.logger.info("Control array is empty: "+e);this.logger.info("Sending new cntroll param for processing: "+JSON.stringify(t[0])),this.tryExtractConfiguration(t[0])}catch(e){this.logger.error(e)}},r.prototype.reportExternalWin=function(e){try{var t=new i(e),n=this.prepareDataForDelivery(null,t,this);if(null===n)return void this.logger.info("Failed to prepare bid won data to send, "+this.intentIqConfig.partner);this.addDataToSendAndInitSender(n,this)}catch(e){this.logger.error(e)}},r.prototype.tryRegisterForBidRequested=function(e){e.intentIqConfig.pbjs.onEvent("bidRequested",(function(t){e.clearDuplictesBeforeRubicon(t,e)}))},r.prototype.clearDuplictesBeforeRubicon=function(e,n){try{if("rubicon"!==e.bidderCode||e.bids.length<1)return;if(null!=n.intentIqConfig.moduleIds.unifiedeId){var r,i=t(e.bids);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.userId.tdid&&Array.isArray(o.userId.pubProvidedId)){for(var a=0;a<o.userId.pubProvidedId.length;a++)if("adserver.org"===o.userId.pubProvidedId[a].source){o.userId.pubProvidedId.splice(a,1);break}if(Array.isArray(o.userIdAsEids))for(var s=0;s<o.userIdAsEids.length;s++)if("adserver.org"===o.userIdAsEids[s].source&&o.userIdAsEids[s].uids[0].id===n.intentIqConfig.moduleIds.unifiedeId){o.userIdAsEids.splice(s,1);break}}}}catch(e){i.e(e)}finally{i.f()}}}catch(e){}},r.prototype.configurePrebid=function(){try{this.logger.info("Starting Prebid configuration "),this.intentIqConfig.pbjs&&this.intentIqConfig.pbjs.que?(this.logger.info("Pushing config for prebid "),this.intentIqConfig.pbjs.que.push(this.tryRegisterIds.bind(null,this))):this.logger.info("PBJS or QUE not defined")}catch(e){this.logger.error(e)}},r.prototype.subscribeForPrebidEvents=function(){try{this.logger.info("Starting Prebid subscription "),this.intentIqConfig.pbjs&&this.intentIqConfig.pbjs.que?(this.intentIqConfig.shouldClearDuplicatresForRubicon&&!this.intentIqConfig.subscriptionFlags.bidRequested&&(this.logger.info("Subscribing for bidRequested for rubicon cleanup"),this.intentIqConfig.pbjs.que.push(this.tryRegisterForBidRequested.bind(null,this)),this.intentIqConfig.subscriptionFlags.bidRequested=!0),this.intentIqConfig.pbmonitoring.pbMonitoringEnabled&&!this.intentIqConfig.subscriptionFlags.bidWon?(this.logger.info("Registering for subscription for bidWon event"),this.intentIqConfig.pbjs.que.push(this.tryRegisterForBidWon.bind(null,this)),this.intentIqConfig.subscriptionFlags.bidWon=!0):!0===this.intentIqConfig.manualWinReportEnabled&&this.logger.info("Manual won report enabled. Skipping bidwon subscription."),this.intentIqConfig.subscriptionFlags.auctionInited||(this.logger.info("Subscribing for auctionInited event"),this.intentIqConfig.pbjs.que.push(this.tryRegisterForAuctionInited.bind(null,this)),this.intentIqConfig.subscriptionFlags.auctionInited=!0)):this.logger.info("PBJS or QUE not defined")}catch(e){this.logger.error(e)}},r.prototype.tryRegisterForAuctionInited=function(e){e.intentIqConfig.pbjs.onEvent("auctionInit",(function(t){try{e.auctionEidsLength[t.auctionId]=t.bidderRequests[0].bids[0].userId&&t.bidderRequests[0].bids[0].userId.pubProvidedId?t.bidderRequests[0].bids[0].userId.pubProvidedId.length:-1}catch(t){}try{e.auctionStartTimeData[t.auctionId]=t.timestamp,e.auctionCallCounter(t,e)}catch(t){}}))},r.prototype.tryRegisterForBidWon=function(e){e.intentIqConfig.pbjs.onEvent("bidWon",(function(t){e.onBidWonEvent(t,e)}))},r.prototype.tryRegisterIds=function(e){if(void 0!==e)try{var t={name:"pubProvidedId",params:{eidsFunction:e.getPubprovidedEids.bind(null,e)}},n=e.intentIqConfig.pbjs.getConfig("userSync.userIds");if(e.logger.info("Registering PubProvided callback "),n?e.intentIqConfig.shouldRepalcePubprovided?(e.logger.info("Configured to set before others pubprovided"),n.unshift(t),e.intentIqConfig.pbjs.setConfig({userSync:{userIds:n}})):n.push(t):e.intentIqConfig.pbjs.setConfig({userSync:{userIds:[t]}}),!e.intentIqConfig.shouldSetUidsModulesConfig||null===e.intentIqConfig.moduleIds.unifiedeId)return void e.intentIqConfig.pbjs.refreshUserIds();t=e.setConfigObjectForUnifiedId(e.intentIqConfig.moduleIds.unifiedeId),(n=e.intentIqConfig.pbjs.getConfig("userSync.userIds"))&&Array.isArray(n)?((0!==n.filter((function(e){return"unifiedId"===e.name})).length||e.intentIqConfig.pbjs.getUserIds()&&e.intentIqConfig.pbjs.getUserIds().tdid)&&!e.intentIqConfig.shouldReplaceUnifiedId||(e.logger.info("Unshifting configuration for unifyedIds"),n.unshift(t)),e.intentIqConfig.pbjs.setConfig({userSync:{userIds:n}})):e.intentIqConfig.pbjs.setConfig({userSync:{userIds:[t]}}),e.intentIqConfig.pbjs.refreshUserIds()}catch(t){e.logger.error("Faild to register EIDS")}else console.log("IIQ : tryRegisterIds iiq object is undefined")},r.prototype.setConfigObjectForUnifiedId=function(e){return{name:"unifiedId",value:{tdid:e}}},r}n.r(t),n.d(t,{loadIIQ:()=>r})},4634:(e,t,n)=>{"use strict";n.d(t,{S1:()=>h,U2:()=>p,_D:()=>g,t8:()=>f});var r=n(3387),i=n(9044),o=n(9461),a=n(9347),s=n(7933),d=n(8967),c=n(8983);n.g.adverts.config=n.g.adverts.config||{};const l=(0,d.x)("config"),u={},p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=(0,r.Z)(u,...t);return"object"==typeof i?JSON.parse(JSON.stringify(i)):i},f=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.Z)(u,...t)};function h(){Object.entries(n.g.adverts.config).forEach((e=>{let[t,n]=e;try{if((0,s.j)(n)){const e=(0,s.H)(n);void 0!==e&&f(t,e)}else f(t,n)}catch(e){console.error(e)}})),n.g.adverts.config=u,function(){const e=JSON.parse(localStorage.getItem("mol-ads-control-panel-config")||"null");"object"==typeof e&&null!==e&&(0,c.Z)(u,e)}(),g(),function(e){if("string"!=typeof e.setPlugin)return;const t=e=>["on","true","1","enabled"].includes(e),[n,r,i]=e.setPlugin.split(",").reduce(((e,n)=>{let[r,i,o]=e;const[a,s]=n.split(":");if(void 0===s)return[r,i,o];if(a.includes("*")){const[e,n]=a.split("*");!t(s)&&""===n&&o.push(e)}else t(s)?r.add(a):i.add(a);return[r,i,o]}),[new Set([]),new Set([]),[]]),o=p("plugins.enabled",[]).filter((e=>!((e=>i.some((t=>e.includes(t)))&&!n.has(e))(e)||r.has(e)))),s=(0,a.jj)([...o,...n]);f("plugins.enabled",s)}(o.queryParams)}const g=()=>{Object.entries(o.queryParams).forEach((e=>{let[t,n]=e;if(t.startsWith("ac."))if(t.endsWith("[+]")){const e=t.substring(3,t.length-3);f(e,(0,a.jj)(p(e,[]).concat(n)))}else if(t.endsWith("[-]")){const e=t.substring(3,t.length-3);f(e,p(e,[]).filter((e=>!n.includes(e))))}else if(t.endsWith("{}")){const e=t.substring(3,t.length-2);f(e,(e=>{try{return JSON.parse(e)}catch(e){return l.error(e),{}}})(n))}else f(t.slice(3),(e=>""===e||"boolean"==typeof e?e:isNaN(e)?(e=>{const t="true"===e;return"false"===e||t?t:e})(e):parseFloat(e))(n))}))}},8307:(e,t,n)=>{"use strict";(0,n(4634).S1)()},7933:(e,t,n)=>{"use strict";n.d(t,{H:()=>d,j:()=>c});var r=n(9461),i=n(939),o=n(9347),a=n(3387),s=n(5851);function d(e){let{__targeting:t}=e;return((0,o.pj)(t).find(l)||{}).payload}function c(e){return"object"==typeof e&&!(null==e||!e.__targeting)}const l=(0,i.ar)({browser:u((function(e){switch(e){case"chrome":return r.G9;case"edge":return r.P0;case"ie":return r.JW;case"firefox":return r.D1;case"safari":return r.s$;default:return!1}})),cookie:u((function(e){return Object.entries(e).some((e=>{let[t,n]=e;return n.includes((0,r.ej)(t)||"")}))})),device:u((function(e){switch(e){case"tablet":return s.ZP.isIPad()||s.ZP.isAndroidTablet();case"desktop":return!s.ZP.isMobile()}})),iOSVersion:u((function(e){let{min:t,max:n}=e;const[i]=(0,r.oK)();return(void 0===t||t<=i)&&(void 0===n||n>=i)})),timeRange:u((function(e){let{end:t,start:n}=e;const r=new Date,i=t&&p(t)<=r,o=n&&p(n)>r;return!i&&!o})),globalContext:u((function(e){let{prop:t,op:r,value:i}=e;const s=(0,a.Z)(n.g,t);switch(r){case"includes":return"string"==typeof s?s.includes(i):(0,o.pj)(s).includes(i);case"startsWith":return"string"==typeof s&&s.startsWith(i)}})),topWindow:u((function(e){return e?window.top===window:window.top!==window}))});function u(e){return t=>void 0===t||(Array.isArray(t)?t.some(e):e(t))}function p(e){const[t,n,r]=e.split(":").map(Number),i=new Date;return i.setHours(t),i.setMinutes(n),i.setSeconds(r),i}},6709:(e,t,n)=>{"use strict";n.r(t),n.d(t,{appendStyle:()=>m,closest:()=>h,contains:()=>v,createIframe:()=>I,elementReady:()=>o,getElementBottomOffset:()=>d,getElementComputedHeight:()=>w,getElementComputedWidth:()=>_,getElementScaledHeight:()=>b,getElementWidthScale:()=>T,getOffset:()=>s,getPageSize:()=>p,getParent:()=>y,getRelativeContainer:()=>l,getVisibleText:()=>S,getWindow:()=>u,insertAfter:()=>k,isElement:()=>g,loaded:()=>a,onBodyAvailable:()=>r,untilBodyAvailable:()=>i,walk:()=>f});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;t.body?e():n.g.requestAnimationFrame((()=>{r(e,t)}))},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return new Promise((t=>r(t,e)))},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return new Promise(((r,i)=>{let o=!1;setTimeout((()=>{o=!0}),t);const a=()=>{const s=document.querySelector(e);s?r(s):o?i(new Error(`Element "${e}" not found after ${t}ms`)):setTimeout((()=>a()),n)};a()}))},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return new Promise((t=>{["complete","loaded","interactive"].includes(e.readyState)?t():e.addEventListener("DOMContentLoaded",t)}))},s=e=>{let t,n,r={top:0,left:0};const i=e&&e.ownerDocument;if(i)return t=i.documentElement,e.getBoundingClientRect&&(r=e.getBoundingClientRect()),n=u(i),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}};function d(e){return s(e).top+w(e)}const c=e=>{const t=getComputedStyle(e).getPropertyValue("position");return["relative","absolute"].includes(t)},l=e=>f(e,c,(e=>e.parentNode)),u=e=>{let t=null;return e&&(e===e.window?t=e:9===e.nodeType?t=e.defaultView||e.parentWindow:e.ownerDocument&&(t=e.ownerDocument.defaultView||e.ownerDocument.parentWindow)),t},p=()=>[document.body.scrollWidth,window.innerHeight+window.scrollMaxY,window.innerWidth,window.innerHeight],f=(e,t,n)=>{let r=e;for(;r;){if(t(r))return r;r=n(r)}},h=(e,t)=>f(e,t,(e=>{let{parentNode:t}=e;return t!==document&&t})),g=e=>e&&1===e.nodeType,m=e=>{if(!e)return;const t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:"textContent"in t?t.textContent=e:t.innerText=e,(document.body||document.head).appendChild(t)},v=(e,t)=>e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY,y=(e,t)=>f(e,(e=>e.matches(t)),(e=>e.parentNode)),b=e=>(e=>{const t=getComputedStyle(e),n=t.getPropertyValue("transform");if(n&&"none"!==n){const e=n.split("(")[1].split(")")[0].split(",");return parseFloat(e[3])}const r=t.getPropertyValue("zoom");return parseFloat(r||1)})(e)*w(e),_=e=>parseInt(getComputedStyle(e).getPropertyValue("width")),w=e=>parseInt(getComputedStyle(e).getPropertyValue("height")),T=e=>{const t=_(e);return _(document.body)/t};function I(e){let{content:t,insertMethod:n=(e=>{document.body.appendChild(e)}),width:r=0,height:i=0,log:o=(()=>{})}=e;const a=document.createElement("iframe");return a.border="0",a.style.width=`${r}px`,a.style.height=`${i}px`,a.style.border="none",o("inserting iframe"),n(a),o("writing iframe content",a),a.contentDocument.open(),a.contentDocument.domain=document.domain,a.contentDocument.write(t),a.contentDocument.close(),a}function S(e){window.getSelection().removeAllRanges();const t=document.createRange();t.selectNode(e),window.getSelection().addRange(t);const n=window.getSelection().toString().trim();return window.getSelection().removeAllRanges(),n}function k(e,t){t.parentNode.insertBefore(e,t.nextSibling)}},8949:(e,t,n)=>{"use strict";n.d(t,{H:()=>c});var r=n(9946),i=n(9461),o=n(4286),a=n(4634);const s=(0,r.gb)((()=>{var e;return null===(e=window.RTA)||void 0===e?void 0:e.ids}),300,3e3).then((e=>e.user||e.visit?{rta:{user:e.user,visit:e.visit}}:{})).catch((()=>({}))).then((e=>{var t,r;const{PageCriteria:s={},pagemeta:d={}}=window;return{account:"mol",adsFreeUser:null===(t=(r=n.g).isAdFreeEntitled)||void 0===t?void 0:t.call(r),articleId:s.articleId,channel:s.channel,configVersion:(0,a.U2)("__generated.commit.sha"),bundle:"facade",cmVersion:(0,a.U2)("__generated.rulesJs.version"),cmCluster:(0,a.U2)("__generated.rulesJs.cluster"),device:s.device,embed:!0,event_type:"bidmax",geo:s.geo,isMobile:s.isMobile,isTablet:s.isTablet,office:(0,o.K)(),pageType:s.pageType,pageViewId:s.pageViewId,referrer:document.referrer,sponsored:s.sponsored,subchannel:s.subchannel,timeAtSend:0,type_version:2,url:location.href,version:i.queryParams.bidmax||d.adsBundleVersion||"absent",...e}}));let d={};function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(arguments.length>1?arguments[1]:void 0)||!!(0,a.U2)("bidmax.dispatcher.useCurrentUrl");return s.then((r=>new Promise(((i,o)=>{const s=new XMLHttpRequest,c=t?`${n.g.location.origin}${n.g.location.pathname}`:(0,a.U2)("bidmax.dispatcher.url","//crta.dailymail.co.uk");s.open("POST",c,!0),s.addEventListener("abort",o),s.addEventListener("error",o),s.addEventListener("load",i),s.setRequestHeader("Content-Type","text/plain"),s.send(JSON.stringify({...r,...d,...e,timestamp:Date.now()}))})))).catch((e=>console.error(e)))}},7298:(e,t,n)=>{void 0===n.g.adverts&&(n.g.adverts={}),n.g.adverts.queue=n.g.adverts.queue||[],n.g.DM=n.g.DM||{}},319:(e,t,n)=>{"use strict";n.d(t,{fo:()=>o,uM:()=>a});const r=(0,n(8967).x)("plugin-registry"),i={};function o(e,t){r("registering plugin:",e),i[e]=t}function a(){return{...i}}},6644:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DELAYED:()=>d,IMMEDIATE:()=>a,LAZY:()=>s,getEnabledRenderedSlots:()=>v,getEnabledSlots:()=>y,getLoadingSettings:()=>m,initEmergencyRules:()=>S,initSlots:()=>T,isAdEnabled:()=>h,resetSlots:()=>w,setSupportedSlots:()=>I});var r=n(9461),i=n(939);(0,n(319).fo)("adListLoader",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,getConfig:r,setConfig:i}=e;const a=_(r("slots.enabled",{}),b),s=Object.keys(a),d=new Set(s),h=u.filter((e=>!d.has(e))),m=s.reduce(((e,t)=>({...e,[t]:g(a[t])})),{}),v=r("slotDescription",{});c=s.filter((e=>!v[e]||!!v[e].id)),l=h,o=m,i("slots.enabled",m),t.emit("slots initialized",c),p(),t.on("system ready",(()=>{n.g.DM.later("DOM_READY",(()=>{document.write=document.writeln=e=>{try{throw new Error(e)}catch(e){n.g.DM.log("ads","Error: there was an attempt to document.write in a rendered page: ",e)}}}))})),t.on("set slots enabled",((e,t)=>{f(e,t)}))}});let o={};const a="immediate",s="lazy",d="delayed";let c=[],l=[];const u=["adx_page_skins","adx_tracking","banner_top","billboard","bvp_puff_26","bvp_puff_29","fff","fff_overlay","half_mpu_top","inread_player","inread_player_mw","inread_player_top","intro_ad","leader_bottom","leader_lower_middle","leader_middle","leader_top","leader_very_bottom","leader_wide","mpu_bottom","mpu_bottom_right","mpu_channel","mpu_comments_1","mpu_comments_2","mpu_home","mpu_middle","mpu_mobile","mpu_mobile_bottom","mpu_mobile_lower_middle","mpu_mobile_top","mpu_mobile_upper_middle","mpu_puff_10","mpu_puff_15","mpu_puff_20","mpu_puff_30","mpu_puff_45","mpu_puff_5","mpu_top","native_fff_accessorise","native_fff_overlay_accessorise","network_banner","para_top","puff_ad_3","puff_ad_6","puff_ad_9","sky_left_bottom","sky_left_top","sky_right_bottom","sky_right_top","sticky_banner","video_ad","video_carousel"],p=()=>{f(l,!1),f(c,!0)},f=function(e,t){e.forEach((e=>{const n=`molads_${e}_on`,r=`molads_${e}_off`;document.documentElement.classList.add(t?n:r),document.documentElement.classList.remove(t?r:n)}))},h=e=>{const t=e&&(e.dfpPos||e.pos);return!(window.disableAds&&!r.queryParams.ignoreDisableAds)&&(!t||!u.includes(t)||c.includes(t))},g=e=>{let{loadingOffset:t,loadingTrigger:r,loadingType:i=a}=e;const o={type:i||a,trigger:r,offset:isNaN(t)?0:Number(t)};return o.type===a||o.type===d||o.type===s&&o.trigger||(n.g.DM.log("ads","Unknown loading type or invalid loading trigger, falling back to immediate loading :",o),o.type=a),o},m=e=>o[e]||{type:a,trigger:void 0,offset:0},v=()=>c.slice(),y=v,b=(r.queryParams.setSlot&&r.queryParams.setSlot.split(",")||[]).reduce(((e,t)=>{const[n,r]=t.split(":").map((e=>e.trim()));return e[n]="on,true,1,enabled".includes(r||"true"),e}),{}),_=(e,t)=>!t||t&&(0,i.xb)(t)?e:Object.entries(t).reduce(((e,t)=>{let[n,r]=t;return r?e[n]={}:delete e[n],e}),e),w=()=>{c=[],l=[]},T=()=>{},I=e=>{},S=()=>{}},438:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>init});var uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3334);const showThankYouMessage=(getConfig,log)=>{try{log("Showing thank you message"),eval(getConfig("abe.thankYouMessage.js","DM.later('bundle', function(){window.top.DM.molFeAdblockerDialog.thanks()})"))}catch(e){console.error(e)}};function init(e){let{broker:t,getConfig:n,log:r}=e;const i=JSON.parse(localStorage.getItem("mol.abe.data")||"{}"),o=new Promise((e=>{t.once("ad block detection result",(o=>{let{adblocker:a}=o;a&&(void 0===i.v&&(i.i=(new Date).toISOString(),i.v=2,i.u=(0,uuid__WEBPACK_IMPORTED_MODULE_0__.Z)(),i.n=!0),i.v++,i.l=(new Date).toISOString(),localStorage.setItem("mol.abe.data",JSON.stringify(i))),i.i&&(r(a?"Ad blocker detected":"No ad blocker detected"),a||i.c&&!(i.c<i.l)||(i.c=(new Date).toISOString(),i.n=!0,r("First page load with no ad blocker, saving:",i),localStorage.setItem("mol.abe.data",JSON.stringify(i)),showThankYouMessage(n,r)),t.emit("ex ad blocker user",a,!!i.c),i.c?e({exabd:!a}):e({}))}))}));if(!i.i)return;r("ABE ran at last once, waiting for to ad blocker detection");let a={};void 0!==i.c&&(a.exabd=i.c>i.l),o.then((e=>a=e));const s=e=>({[i.n?"exabd2":"exabd"]:!!e});t.emit("set page level targeting",s(a.exabd)),t.emit("set page level targeting",o.then((e=>{let{exabd:t}=e;return s(t)}))),t.register("call for page analytics",(()=>a))}init.ccpa={enabledIfDissent:!0},init.gdpr={enabledIfDissent:!0}},1625:(e,t,n)=>{"use strict";n(9946),n(8393),n(8949),n(7209);var r=n(8967);n(4431),(0,r.x)("abe.detectAdBlocker")},7209:(e,t,n)=>{"use strict";(0,n(319).fo)("scriptTagsMonitor",{init:function(e){let{broker:t,getConfig:n,log:i}=e;n("abe.detection.enabled",!1)?i("abd enabled, bailing"):n("__generated.modifiers.applied",[]).some((e=>e.startsWith("campaigns.rules-linteItem")))?i("takeover applied, bailing"):(i("loading"),function(e){const t=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.addEventListener("error",(()=>{r++})),t.apply(this,arguments)}}(),t.register("call for page-unload",(()=>(i("reporting:",{xhrErrors:r}),{stm:{xe:r}}))))},isAdsFreeSupported:!1,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0}});let r=0},8189:(e,t,n)=>{"use strict";n.r(t),n.d(t,{appendStyles:()=>M,default:()=>V,enableSlot:()=>O,getAdContainer:()=>j,getElementById:()=>N,getElementContainerById:()=>P,getElementOrIframeById:()=>k,isEmpty:()=>A,log:()=>R,nativeLoaded:()=>D,openAd:()=>B});var r=n(3596),i=n(6644),o=n(5975);const a=n(9104),s=n(4423),d=n(8189);let c;o.ZP.broker("NativeRenderer").on("system ready",(()=>{const e=window.location.href.match(/[&?]enable_native=([^&]+)/),t=e&&e[1];if(t){const e=i.initSlots;i.initSlots=function(n){n[t]={enabled:!0,state:"on"},e.apply(i,arguments)}}c=t,a((function(e){if(!e.isEmpty){const t=e.slot,n=t&&t.molAd;"native_"===n.pos.slice(0,7)&&"_dfp"===n.pos.slice(-4)&&p(n)}}))}));const l="\f\t",u=l.length;function p(e){const t=document.getElementById(e.parentId),n=d.getAdContainer(t);let r=!1;function i(){if(!r){r=!0;try{!function(e,t,n){const r=document.createElement("div");r.innerHTML=n;const i=r.childNodes;if("none"!==t.style.display){t.style.display="none";let n,r=t;const o=t.parentNode,a=e.pos.replace(/_dfp$/,"");for(let e=i.length;e--;)n=i[e],1===n.nodeType&&"SCRIPT"!==n.nodeName&&(o.insertBefore(n,t),r=n);const s=r,d=r;switch(e.pos){case"native_fff_overlay_accessorise":o.style.display="none";case"native_fff_accessorise":document.body.classList.add("fff-has-accessorise")}d&&s.hasAttribute("data-track-module")&&DM&&DM.externalLinkTracker&&(d.setAttribute("data-track-type","cl"),DM.externalLinkTracker(s.id,"cl")),c&&window.opener&&window.opener!==window&&window.opener.postMessage&&(window.addEventListener("message",f.bind(null,r,a)),h(window.opener,"isLoaded",!0,a))}}(e,t,n.body.innerHTML)}catch(e){console.error("Error moving native article: ",e)}}}n.body&&((n.defaultView||n.parentWindow).addEventListener("load",i),setTimeout(i,2e3))}function f(e,t,n){if(n.data.slice(0,u)===l){const r="data-native-ad-field";let i;try{i=s.parse(n.data.slice(u))}catch(e){console.error("Invalid message",e)}if(i&&i.type){const o=[].slice.call(e.querySelectorAll("["+r+"]"));let a;switch(i.type){case"getValues":a=o.map((function(e){return{name:e.getAttribute(r),value:e.textContent}}));break;case"setValues":o.forEach((function(e){const t=e.getAttribute(r);t in i.values&&(e.textContent=i.values[t])}))}a&&h(n.source,i.type,a,t,n.origin)}}}function h(e,t,n,r,i){const o={type:"response",query:t,position:r,value:n};e.postMessage(l+s.stringify(o),i||"*")}a((function(e){if(!e.isEmpty){const t=e.slot,n=t&&t.molAd;"native_"===n.pos.slice(0,7)&&"_dfp"===n.pos.slice(-4)&&p(n)}}));var g=n(6709),m=n(8967);function v(e){return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e]}class y{constructor(){this.subscriptions={}}clone(){return{emit:this.emit.bind(this),off:this.off.bind(this),on:this.on.bind(this),once:this.once.bind(this)}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];v.call(this,e).slice().forEach((e=>e(...n)))}off(e,t){const n=v.call(this,e);if(t){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}else n.length=0}on(e,t){v.call(this,e).push(t)}once(e,t){var n=this;const r=function(){n.off(e,r),t(...arguments)};this.on(e,r)}}var b=n(4955),_=n(1026),w=n(9347);const T=(e,t)=>{let n;try{n=e.contentDocument||e.contentWindow.document}catch(e){}return n||t},I=e=>t=>{const n=t&&T(t);return n&&n.getElementById(e)},S=e=>{const t=(e||document).getElementsByTagName("iframe");return Array.prototype.filter.call(t,C)},k=e=>{const t=I(e);return E(S(),(e=>t(e)&&e))},C=e=>e.id&&"google_ads_iframe_"===e.id.slice(0,18),E=(e,t)=>{for(let n=0,r=e.length;n<r;n++)if(t(e[n]))return e[n]},A=e=>{const t=document.getElementById(e),n=["a","iframe","object","img","video"];let r=!0;if(t)for(let e=n.length;r&&e--;)r=!t.getElementsByTagName(n[e]).length;return r},P=e=>{const t=k(e),n=/\badHolder\b/;if(!t)return;let r=t;for(;r&&!n.test(r.className||"");)r=r.parentNode;return r||(r=t),r},x=(e,t)=>{R("Disabling",t);const n=document.documentElement,r="molads_"+t;if("billboard"===t){q("billboard",R.extend("watermark")),e.emit("unstick position","billboard");const{DM:t}=window;t&&t.Rotator&&t.Rotator.initMiniCarousel()}n.classList.add(`collapse-${t}`),n.classList.remove(r+"_on"),n.classList.add(r+"_off")},O=e=>{const t="molads_"+e,n=document.documentElement;n.classList.remove(t+"_off"),n.classList.add(t+"_on")},D=(e,t,n)=>{const i=E(S(),(t=>t.contentWindow.name===e.name));if(i){const e=(0,g.closest)(i,(e=>e.hasAttribute(r.AD_ATTRIBUTE)));if(e){const t=r.parse(e.getAttribute(r.AD_ATTRIBUTE)||"{}");t&&p(t)}}},R=(0,m.x)("ad-integrator"),M=e=>{const t=e.match(/<style[^>]*\sclass="?integrate"?[^>]*>[^\f]*?<\/style>/gi);for(let e=0,n=t?t.length:0;e<n;e++)(0,g.appendStyle)(t[e].slice(t[e].indexOf(">")+1,-8))},N=e=>{let t=null;const n=S(),r=I(e);for(let e=0;!t&&e<n.length;e++)t=r(n[e]);return t},U=(e,t)=>{R(`collapseAd("#${t}")`);const n=(0,b.getById)(t);if(n)return void x(e,n.pos);R.warn("collapseAd - cannot find description of slot with id:",t);const i=P(t);if(i){R("collapsing",t);const n=r.parse(i.getAttribute(r.AD_ATTRIBUTE)||"{}");n&&n.pos?x(e,n.pos):i.style.display="none"}else R.warn("collapseAd: id",t,"is unknown")};function L(e,t){for(const n of(0,_.e$)((0,b.allDescriptions)(),(0,w.pj)(t)))R(`collapseAd({ pos: "${n}" })`),x(e,n)}const j=e=>{const t=S(e)[0];return t?T(t,document):e},B=e=>{const t=P(e),n=r.parse(t.getAttribute(r.AD_ATTRIBUTE)||"{}");n&&n.pos?O(n.pos):(t.style.height="auto",t.style.display="block")};function q(e,t){const n=(0,b.get)(e);if(!n)return void t.warn("Cannot find description");const r=document.getElementById(n.id);if(!r)return void t.warn("Cannot find element");const i=(0,g.closest)(r,(e=>e.classList.contains("watermark")));i?(t("removing watermark",i),i.classList.remove("watermark")):t.warn("Couldn't find an watermarked element")}const F=e=>{let{broker:t}=e;n.g.addEventListener("message",(e=>{let{data:n}=e;if("object"==typeof n&&"string"==typeof n.func)switch(R("received message",n),n.func){case"molads.addSkinToPage":return t.emit("add skin to page",n);case"molads.addSkinLabel":return t.emit("add skin label to page");case"molads.disableSticky":return t.emit("disable sticky position",n.pos);case"molads.disableForceView":return t.emit("disable force view when viewed",n.pos)}}));const r=new y;let i=[];t.on("external subscription",(function(){return r.on(...arguments)})),n.g.adverts.getRendered=()=>i,n.g.AdIntegrator=n.g.AdIntegrator||{},n.g.adverts.collapseAd=n.g.AdIntegrator.collapseAd=U.bind(null,t),n.g.adverts.collapseAdByPos=n.g.AdIntegrator.collapseAdByPos=L.bind(null,t),n.g.AdIntegrator.disableSlot=x.bind(null,t),t.on("ad rendered",((e,t)=>{t.isEmpty||(i.push(t.slot.molAd),r.emit("rendered",t),r.emit("rendered."+e,t))})),t.on("destroy slot",(e=>{i=i.filter((t=>t.pos!==e))})),t.on("remove watermark",(e=>{q(e,R.extend("remove watermark").extend(e))})),t.on("collapseAdByPos",(e=>L(t,e)))},V=F;F.isAdsFreeSupported=!0,F.ccpa={enabledIfDissent:!0},F.gdpr={enabledIfDissent:!0},F.disableIfNoAdsServable=!0},8081:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});const r=(0,n(8967).x)("mvt"),i=(e,t,n)=>{const i=(e=>e.map((e=>(r(`From scenario "${e.name}", loading config:`,e.config||{}),e.config||[]))).reduce(((e,t)=>e.concat(t)),[]).filter((e=>e)).reduce(((e,t)=>(Object.entries(t).forEach((t=>{let[n,r]=t;e[n]=r})),e)),{}))(n);Object.entries(i).forEach((e=>{let[n,r]=e;t(n,r)}))}},9383:(e,t,n)=>{"use strict";n.d(t,{s:()=>c});const r="page",i="mol.ads.mvt.tests",o=e=>{let[t,n]=e;return{...n,name:t}},a=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").match(/^(-?[0-9.]+)\s*(%?)$/);if(e){let t=parseFloat(e[1]);return"%"===e[2]&&(t/=100),t}return 0},s=function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=`${i}.${t.name}.selected`,s=r[o],c=t.scenarios.find((e=>e.name===s)),l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=`${i}.${t.name}.probabilityDraw`,o=t.size||t.scenarios.reduce(((e,t)=>{let{size:n}=t;return e+a(String(n))}),0),s=d(Math.min(Math.max(0,a(String(o))),1));let c=Number(n[r]);return isNaN(c)&&(c=Math.random(),n[r]=c.toString()),c<s}(e,t,r);if(l){if(c)n=c;else{const i=t.scenarios.filter((e=>{let{size:t}=e;return t}));if(t.scenarios.length===i.length){const e=Math.random();let r=0;n=t.scenarios.find((t=>{let{size:n}=t;return r+=n,d(r)>e}))}else i.length&&e.warn(`Test "${t.name}" has some scenarios with size and some without, falling back to global scope size`),n=t.scenarios[Math.floor(Math.random()*t.scenarios.length)];r[o]=n.name}return n}};function d(e){return Math.round(1e4*e)/1e4}function c(e,t){if(!n.g.adsMVTResults){const i={},a={},d=Object.entries(t).map(o).filter((e=>e.scenarios)).map((e=>({...e,scenarios:Object.entries(e.scenarios).map(o)}))),c=d.reduce(((t,n)=>{const o=n.scope||r,d="page"===o?i:"session"===o?sessionStorage:localStorage,c=s(e,n,d);return c?(a[n.name]=c.name,[...t,c]):t}),[]);n.g.adsMVTResults={pageStorage:i,selectedScenarios:a,scenarios:c,tests:d}}return n.g.adsMVTResults}},5452:(e,t,n)=>{"use strict";var r=n(4634),i=n(8967);(0,n(319).fo)("reconfigureSlotsEnabled",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},init:function(){let{getConfig:e=r.U2,setConfig:t=r.t8,log:n=(0,i.x)("reconfigureSlotsEnabled")}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=e("reconfigureSlotsEnabled",{remove:[]}).remove;if(n("slots to remove",o),o.length){const r=e("slots.enabled",{});for(const e of o)delete r[e];n("slots.enabled",r),t("slots.enabled",r)}}})},4955:(e,t,n)=>{"use strict";n.r(t),n.d(t,{allDescriptions:()=>u,get:()=>c,getById:()=>l});var r=n(9461),i=n(7126),o=n(939);(0,n(319).fo)("slots.descriptions",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,init:function(e){let{getConfig:t,setConfig:n,log:r}=e;const o=Object.entries(t("slotDescription",{})).reduce(((e,n)=>{let[o,a]=n;const s=t(`slotDescription.${o}.earlyBidding`,!0);return a.conditionalSizes&&(r("conditionalSizes found",o,a),function(e){var t,n;null!==(t=e.conditionalSizes)&&void 0!==t&&t.wideSkies&&null!==(n=e.conditionalSizes)&&void 0!==n&&n.sizes&&d&&(e.size=e.conditionalSizes.sizes)}(a)),{...e,[o]:["openweb","taboola","googleAdSense","amazon","widgets"].some((e=>{var t;return null==a||null===(t=a.slotTypes)||void 0===t?void 0:t.includes(e)}))?{id:o,pos:o,...a}:{type:(c=a.size,c.map((e=>{let[t,n]=e;return`${t}x${n}`})).join(",")),adUnit:(0,i.Z)(a.unit||o),pos:o,parentId:a.id,slots:[],slotTypes:["gpt"],earlyBidding:s,...a}};var c}),{});r("descriptionsFromSlotDescription",o),a={...a,...o},n("slotDescriptions.initial",a)},run:function(e){let{broker:t,getConfig:n}=e;a=n("slotDescriptions.initial"),t.on("update description",((e,n)=>{a[e]=n,t.emit("slot descriptions updated",a)})),t.emit("slot descriptions updated",a)}});let a={};const{width:s}=(0,r.ap)(),d=s>1580,c=e=>{const t=a[e];return t&&!t.pos&&(t.pos=e),t};function l(e){return(0,o.sE)(a,(t=>t.id===e))}const u=()=>a},908:(e,t,n)=>{"use strict";n.d(t,{LK:()=>T,hd:()=>w,oP:()=>b});const r="mol.ads.cmp.tcf.cache",i="__tcfapiLocator",o=["getTCData","hasUserConsentedToAll","hasUserDissentedToAll","getPurposesByVendorMap","getConsentDegree","getValidTCData","consentedVendors","getNonRegisteredVendorsConsents","getNonRegisteredVendors","getStoredRepromptVersion"],a=location.search.match(/adsDebug=[^&]*tcfv2/)?function(){return console.info(...arguments)}:()=>{},s=[],d=window;let c=!1;function l(){const e=d.document;if(!d.frames[i])if("interactive"===e.readyState||"complete"===e.readyState){const t=e.createElement("iframe");t.style.display="none",t.name=i,e.body.appendChild(t),c&&(e.removeEventListener("readystatechange",l),c=!1)}else"function"==typeof e.addEventListener?(e.addEventListener("readystatechange",l),c=!0):setTimeout(l,5)}a("creating");const u=localStorage.getItem(r);let p={};u&&(p=JSON.parse(u));let f=0;const h={},g=(e,t)=>{const n=p.getTCData,r=f++;a("adding provisional listener:",r),h[r]={},s.push(["addEventListener",2,(e,n)=>{const i=e.listenerId;h[r]?(h[r].realListenerId=i,h[r].listenerId=i,t({...e,listenerId:r},n)):a("ignoring event coz already removed listener:",{listenerId:r,realListenerId:i})}]),n&&t({...n,listenerId:r,eventStatus:"tcloaded",cached:!0},!0)},m=(e,t)=>{const n=e[3];a("removing provisional listener:",n);const r=h[n];if(!r)return a("unknown listener:",n),void t(!1);const i=r.realListenerId;delete h[n],i&&s.push(["removeEventListener",2,e=>t(e),i]),t(!0)};function v(){let e;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return s;const i=n[2],d=n[0];switch(d){case"setGdprApplies":n.length>3&&2===parseInt(n[1],10)&&"boolean"==typeof n[3]&&(e=n[3],"function"==typeof i&&i("set",!0));break;case"ping":"function"==typeof i&&i({gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"});break;default:if(o.length){if("addEventListener"===d)return g(n,i);if("removeEventListener"===d)return m(n,i)}if(~o.indexOf(d)){n[3]&&a("cache method called with argument:",n[3]);const e=p[d];if(void 0!==e)return a("returning cached value for",d),void i(e,!0)}a("queueing",d),s.push(n)}}function y(e){const t=e&&e.source;if(!t||"function"!=typeof t.postMessage)return void(t&&"function"!=typeof t.postMessage&&a("Message event.source.postMessage is not a function, bailing"));const n="string"==typeof e.data;let r=e.data;if(n)try{r=JSON.parse(e.data)}catch(e){return}if("object"==typeof r&&r.__tcfapiCall){const e=r.__tcfapiCall;window.__tcfapi(e.command,e.version,((r,i)=>{const o={__tcfapiReturn:{returnValue:r,success:i,callId:e.callId}};t.postMessage(n?JSON.stringify(o):o,"*")}),e.parameter)}}function b(){n.g.adverts.tcfv2Installed||(n.g.adverts.tcfv2Installed=!0,l(),d.__tcfapi=v,d.addEventListener("message",y,!1),n.g.adverts.updateCache=_)}async function _(e,t){if(e.tcString.length){const e=o.map((e=>new Promise((i=>{n.g.__tcfapi(e,2,((n,o)=>{if(t("caching",e),o){const t=JSON.parse(localStorage.getItem(r))||{};t[e]=n,localStorage.setItem(r,JSON.stringify(t))}else t("error caching method:",e);i()}))}))));await Promise.all(e)}}const w=()=>!!localStorage.getItem(r);function T(){localStorage.removeItem(r)}},6558:(e,t,n)=>{"use strict";n.d(t,{b:()=>a});var r=n(8538),i=n(9461),o=n(8250);function a(e){var t;const n=localStorage.getItem("mol.ads.watchdog");let a;try{a=n&&JSON.parse(n)}catch(t){e("error parsing last state",t)}return{ps:a,nt:(null===(t=(0,i.Y0)())||void 0===t?void 0:t.type)||"unknown",st:o.B,u:(0,r.vp)(window.location.href)}}},8250:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});const r=Date.now()},4204:(e,t,n)=>{var r=n(7906),i=[];e.exports=function(){var e=new Worker(URL.createObjectURL(new Blob(['(()=>{var e={};let t;onmessage=e=>{let{data:s}=e;if("setPattern"===s.cmd)t=new RegExp(s.pattern);else if("testMatch"===s.cmd){const{id:e,href:a}=s,n=t.test(a);postMessage({id:e,match:n})}},addEventListener("message",(function(t){var s,a=t.data,n=a.type,r=a.method,o=a.id,c=a.params;"RPC"===n&&r&&((s=e[r])?Promise.resolve().then((function(){return s.apply(e,c)})):Promise.reject("No such method")).then((function(e){postMessage({type:"RPC",id:o,result:e})})).catch((function(e){var t={message:e};e.stack&&(t.message=e.message,t.stack=e.stack,t.name=e.name),postMessage({type:"RPC",id:o,error:t})}))})),postMessage({type:"RPC",method:"ready"})})();'])),{name:"[fullhash].worker.js"});return URL.revokeObjectURL(URL.createObjectURL(new Blob(['(()=>{var e={};let t;onmessage=e=>{let{data:s}=e;if("setPattern"===s.cmd)t=new RegExp(s.pattern);else if("testMatch"===s.cmd){const{id:e,href:a}=s,n=t.test(a);postMessage({id:e,match:n})}},addEventListener("message",(function(t){var s,a=t.data,n=a.type,r=a.method,o=a.id,c=a.params;"RPC"===n&&r&&((s=e[r])?Promise.resolve().then((function(){return s.apply(e,c)})):Promise.reject("No such method")).then((function(e){postMessage({type:"RPC",id:o,result:e})})).catch((function(e){var t={message:e};e.stack&&(t.message=e.message,t.stack=e.stack,t.name=e.name),postMessage({type:"RPC",id:o,error:t})}))})),postMessage({type:"RPC",method:"ready"})})();']))),r(e,i),e}},5175:(e,t,n)=>{"use strict";const r=n(6666),i=n(9258),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=d,t.SlowBuffer=function(e){return+e!=e&&(e=0),d.alloc(+e)},t.INSPECT_MAX_BYTES=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,d.prototype),t}function d(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!d.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|g(e,t);let r=s(n);const i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(K(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return p(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(K(e,ArrayBuffer)||e&&K(e.buffer,ArrayBuffer))return f(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(K(e,SharedArrayBuffer)||e&&K(e.buffer,SharedArrayBuffer)))return f(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return d.from(r,t,n);const i=function(e){if(d.isBuffer(e)){const t=0|h(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||X(e.length)?s(0):p(e):"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return l(e),s(e<0?0:0|h(e))}function p(e){const t=e.length<0?0:0|h(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,d.prototype),r}function h(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function g(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||K(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(i)return r?-1:Z(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),X(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=d.from(t,r)),d.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){let o,a=1,s=e.length,d=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,d/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===d)return r*a}else-1!==r&&(o-=o-r),r=-1}else for(n+d>s&&(n=s-d),o=n;o>=0;o--){let n=!0;for(let r=0;r<d;r++)if(c(e,o+r)!==c(t,r)){n=!1;break}if(n)return o}return-1}function _(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=t.length;let a;for(r>o/2&&(r=o/2),a=0;a<r;++a){const r=parseInt(t.substr(2*a,2),16);if(X(r))return a;e[n+a]=r}return a}function w(e,t,n,r){return G(Z(t,e.length-n),e,n,r)}function T(e,t,n,r){return G(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function I(e,t,n,r){return G($(t),e,n,r)}function S(e,t,n,r){return G(function(e,t){let n,r,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,s,d;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128==(192&n)&&(d=(31&t)<<6|63&n,d>127&&(o=d));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(d=(15&t)<<12|(63&n)<<6|63&r,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(d=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,d>65535&&d<1114112&&(o=d))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}return function(e){const t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=E));return n}(r)}t.kMaxLength=a,d.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),d.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(e,t,n){return function(e,t,n){return l(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},d.allocUnsafe=function(e){return u(e)},d.allocUnsafeSlow=function(e){return u(e)},d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(K(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),K(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=d.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(K(t,Uint8Array))i+t.length>r.length?(d.isBuffer(t)||(t=d.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!d.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},d.byteLength=g,d.prototype._isBuffer=!0,d.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},d.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},d.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},d.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):m.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(e){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===d.compare(this,e)},d.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(d.prototype[o]=d.prototype.inspect),d.prototype.compare=function(e,t,n,r,i){if(K(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0);const s=Math.min(o,a),c=this.slice(r,i),l=e.slice(t,n);for(let e=0;e<s;++e)if(c[e]!==l[e]){o=c[e],a=l[e];break}return o<a?-1:a<o?1:0},d.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},d.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},d.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},d.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":case"latin1":case"binary":return T(this,e,t,n);case"base64":return I(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const E=4096;function A(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function P(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function x(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=J[e[r]];return i}function O(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,o){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function M(e,t,n,r,i){V(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function N(e,t,n,r,i){V(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function U(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,o){return t=+t,n>>>=0,o||U(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,o){return t=+t,n>>>=0,o||U(e,0,n,8),i.write(e,t,n,r,52,8),n+8}d.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,d.prototype),r},d.prototype.readUintLE=d.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},d.prototype.readUintBE=d.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},d.prototype.readUint8=d.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readBigUInt64LE=Y((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),d.prototype.readBigUInt64BE=Y((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),d.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},d.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},d.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readBigInt64LE=Y((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),d.prototype.readBigInt64BE=Y((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),d.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),i.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),i.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),i.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),i.read(this,e,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||R(this,e,t,n,Math.pow(2,8*n)-1,0);let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||R(this,e,t,n,Math.pow(2,8*n)-1,0);let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},d.prototype.writeUint8=d.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigUInt64LE=Y((function(e){return M(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeBigUInt64BE=Y((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}let i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},d.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}let i=n-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},d.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},d.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigInt64LE=Y((function(e){return M(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeBigInt64BE=Y((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},d.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},d.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},d.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},d.prototype.copy=function(e,t,n,r){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},d.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const o=d.isBuffer(e)?e:d.from(e,r),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%a]}return this};const B={};function q(e,t,n){B[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function F(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function V(e,t,n,r,i,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new B.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){z(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||W(t,e.length-(n+1))}(r,i,o)}function z(e,t){if("number"!=typeof e)throw new B.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,n){if(Math.floor(e)!==e)throw z(e,n),new B.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}q("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),q("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),q("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=F(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=F(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function Z(e,t){let n;t=t||1/0;const r=e.length;let i=null;const o=[];for(let a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function X(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function Y(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},7078:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var _src_prebidGlobal_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(6775),_src_utils_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(303),_src_utils_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(5446),_src_adloader_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(9092),_src_adapters_bidderFactory_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(1746),_src_config_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7533),_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2339),_src_polyfill_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(388),criteo_direct_rsa_validate_build_verify_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4651),_src_storageManager_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2814),_src_native_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(3660),_src_refererDetection_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3821),_src_utils_gpdr_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5145),GVLID=91,ADAPTER_VERSION=35,BIDDER_CODE="criteo",CDB_ENDPOINT="https://bidder.criteo.com/cdb",PROFILE_ID_INLINE=207,PROFILE_ID_PUBLISHERTAG=185,storage=(0,_src_storageManager_js__WEBPACK_IMPORTED_MODULE_1__.df)({bidderCode:BIDDER_CODE}),LOG_PREFIX="Criteo: ",FAST_BID_VERSION_PLACEHOLDER="%FAST_BID_VERSION%",FAST_BID_VERSION_CURRENT=135,FAST_BID_VERSION_LATEST="latest",FAST_BID_VERSION_NONE="none",PUBLISHER_TAG_URL_TEMPLATE="https://static.criteo.net/js/ld/publishertag.prebid"+FAST_BID_VERSION_PLACEHOLDER+".js",FAST_BID_PUBKEY_E=65537,FAST_BID_PUBKEY_N="ztQYwCE5BU7T9CDM5he6rKoabstXRmkzx54zFPZkWbK530dwtLBDeaWBMxHBUT55CYyboR/EZ4efghPi3CoNGfGWezpjko9P6p2EwGArtHEeS4slhu/SpSIFMjG6fdrpRoNuIAMhq1Z+Pr/+HOd1pThFKeGFr2/NhtAg+TXAzaU=",OPTOUT_COOKIE_NAME="cto_optout",BUNDLE_COOKIE_NAME="cto_bundle",GUID_RETENTION_TIME_HOUR=9360,OPTOUT_RETENTION_TIME_HOUR=43200,spec={code:BIDDER_CODE,gvlid:GVLID,supportedMediaTypes:[_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.Mk,_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.pX,_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.B5],getUserSyncs:function(e,t,n,r){if(canFastBid(_src_config_js__WEBPACK_IMPORTED_MODULE_3__.vc.getConfig("criteo.fastBidVersion")))return[];var i=(0,_src_refererDetection_js__WEBPACK_IMPORTED_MODULE_4__.nH)(),o="criteoPrebidAdapter";if(e.iframeEnabled&&(0,_src_utils_gpdr_js__WEBPACK_IMPORTED_MODULE_5__.h)(n)){var a=[];a.push("origin=".concat(o)),a.push("topUrl=".concat(i.domain)),n&&(n.gdprApplies&&a.push("gdpr=".concat(1==n.gdprApplies?1:0)),n.consentString&&a.push("gdpr_consent=".concat(n.consentString))),r&&a.push("us_privacy=".concat(r));var s=Math.random().toString(),d={bundle:readFromAllStorages(BUNDLE_COOKIE_NAME),cw:storage.cookiesAreEnabled(),lsw:storage.localStorageIsEnabled(),optoutCookie:readFromAllStorages(OPTOUT_COOKIE_NAME),origin:o,requestId:s,tld:i.domain,topUrl:i.domain,version:"7.47.0".replace(/\./g,"_")};window.addEventListener("message",(function e(t){if(t.data&&"https://gum.criteo.com"==t.origin&&t.data.requestId===s){this.removeEventListener("message",e),t.stopImmediatePropagation();var n=t.data;n.optout?(deleteFromAllStorages(BUNDLE_COOKIE_NAME),saveOnAllStorages(OPTOUT_COOKIE_NAME,!0,OPTOUT_RETENTION_TIME_HOUR)):n.bundle&&saveOnAllStorages(BUNDLE_COOKIE_NAME,n.bundle,GUID_RETENTION_TIME_HOUR)}}),!0);var c=JSON.stringify(d).replace(/"/g,"%22");return[{type:"iframe",url:"https://gum.criteo.com/syncframe?".concat(a.join("&"),"#").concat(c)}]}return[]},isBidRequestValid:function(e){return!(!e||!e.params||!e.params.zoneId&&!e.params.networkId||hasVideoMediaType(e)&&!hasValidVideoMediaType(e))},buildRequests:function(e,t){var n,r,i,o;e=(0,_src_native_js__WEBPACK_IMPORTED_MODULE_6__.lY)(e);var a=t.ortb2||{};Object.assign(t,{publisherExt:null===(n=a.site)||void 0===n?void 0:n.ext,userExt:null===(r=a.user)||void 0===r?void 0:r.ext,ceh:_src_config_js__WEBPACK_IMPORTED_MODULE_3__.vc.getConfig("criteo.ceh"),coppa:_src_config_js__WEBPACK_IMPORTED_MODULE_3__.vc.getConfig("coppa")});var s=_src_config_js__WEBPACK_IMPORTED_MODULE_3__.vc.getConfig("criteo.fastBidVersion"),d=canFastBid(s);if(!publisherTagAvailable()&&d){window.Criteo=window.Criteo||{},window.Criteo.usePrebidEvents=!1,tryGetCriteoFastBid();var c=getFastBidUrl(s);setTimeout((function(){(0,_src_adloader_js__WEBPACK_IMPORTED_MODULE_7__.B)(c,BIDDER_CODE)}),t.timeout)}if(publisherTagAvailable()){var l=new Criteo.PubTag.Adapters.Prebid(PROFILE_ID_PUBLISHERTAG,ADAPTER_VERSION,e,t,"7.47.0");i=l.buildCdbUrl(),o=l.buildCdbRequest()}else{var u=buildContext(e,t);i=buildCdbUrl(u),o=buildCdbRequest(u,e,t)}if(o)return{method:"POST",url:i,data:o,bidRequests:e}},interpretResponse:function(e,t){var n=e.body||e;if(publisherTagAvailable()){var r=Criteo.PubTag.Adapters.Prebid.GetAdapter(t);if(r)return r.interpretResponse(n,t)}var i=[];return n&&n.slots&&(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.kJ)(n.slots)&&n.slots.forEach((function(r){var o,a,s,d,c=(0,_src_polyfill_js__WEBPACK_IMPORTED_MODULE_9__.sE)(t.bidRequests,(function(e){return e.adUnitCode===r.impid&&(!e.params.zoneId||parseInt(e.params.zoneId)===r.zoneid)})),l=c.bidId,u={requestId:l,cpm:r.cpm,currency:r.currency,netRevenue:!0,ttl:r.ttl||60,creativeId:r.creativecode,width:r.width,height:r.height,dealId:r.deal};if(null!==(o=n.ext)&&void 0!==o&&null!==(a=o.paf)&&void 0!==a&&a.transmission&&null!==(s=r.ext)&&void 0!==s&&null!==(d=s.paf)&&void 0!==d&&d.content_id){var p={content_id:r.ext.paf.content_id,transmission:e.ext.paf.transmission};u.meta=Object.assign({},u.meta,{paf:p})}r.adomain&&(u.meta=Object.assign({},u.meta,{advertiserDomains:[r.adomain].flat()})),r.native?c.params.nativeCallback?u.ad=createNativeAd(l,r.native,c.params.nativeCallback):(u.native=createPrebidNativeAd(r.native),u.mediaType=_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.B5):r.video?(u.vastUrl=r.displayurl,u.mediaType=_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.pX):u.ad=r.creative,i.push(u)})),i},onTimeout:function(e){if(publisherTagAvailable()&&Array.isArray(e)){var t=[];e.forEach((function(e){-1===t.indexOf(e.auctionId)&&(t.push(e.auctionId),Criteo.PubTag.Adapters.Prebid.GetAdapter(e.auctionId).handleBidTimeout())}))}},onBidWon:function(e){publisherTagAvailable()&&e&&Criteo.PubTag.Adapters.Prebid.GetAdapter(e.auctionId).handleBidWon(e)},onSetTargeting:function(e){publisherTagAvailable()&&Criteo.PubTag.Adapters.Prebid.GetAdapter(e.auctionId).handleSetTargeting(e)}};function readFromAllStorages(e){var t=storage.getCookie(e),n=storage.getDataFromLocalStorage(e);return t||n||void 0}function saveOnAllStorages(e,t,n){var r=new Date;r.setTime(r.getTime()+60*n*60*1e3);var i="expires=".concat(r.toUTCString());storage.setCookie(e,t,i),storage.setDataInLocalStorage(e,t)}function deleteFromAllStorages(e){storage.setCookie(e,"",0),storage.removeDataFromLocalStorage(e)}function publisherTagAvailable(){return"undefined"!=typeof Criteo&&Criteo.PubTag&&Criteo.PubTag.Adapters&&Criteo.PubTag.Adapters.Prebid}function buildContext(e,t){var n,r="";t&&t.refererInfo&&(r=t.refererInfo.page);var i=(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.en)(null==t||null===(n=t.refererInfo)||void 0===n?void 0:n.topmostLocation).search,o={url:r,debug:"1"===i.pbt_debug,noLog:"1"===i.pbt_nolog,amp:!1};return e.forEach((function(e){"amp"===e.params.integrationMode&&(o.amp=!0)})),o}function buildCdbUrl(e){var t=CDB_ENDPOINT;t+="?profileId="+PROFILE_ID_INLINE,t+="&av="+String(ADAPTER_VERSION),t+="&wv="+encodeURIComponent("7.47.0"),t+="&cb="+String(Math.floor(99999999999*Math.random())),storage.localStorageIsEnabled()?t+="&lsavail=1":t+="&lsavail=0",e.amp&&(t+="&im=1"),e.debug&&(t+="&debug=1"),e.noLog&&(t+="&nolog=1");var n=readFromAllStorages(BUNDLE_COOKIE_NAME);return n&&(t+="&bundle=".concat(n)),readFromAllStorages(OPTOUT_COOKIE_NAME)&&(t+="&optout=1"),t}function checkNativeSendId(e){return!(e.nativeParams&&(e.nativeParams.image&&(!0!==e.nativeParams.image.sendId||!0===e.nativeParams.image.sendTargetingKeys)||e.nativeParams.icon&&(!0!==e.nativeParams.icon.sendId||!0===e.nativeParams.icon.sendTargetingKeys)||e.nativeParams.clickUrl&&(!0!==e.nativeParams.clickUrl.sendId||!0===e.nativeParams.clickUrl.sendTargetingKeys)||e.nativeParams.displayUrl&&(!0!==e.nativeParams.displayUrl.sendId||!0===e.nativeParams.displayUrl.sendTargetingKeys)||e.nativeParams.privacyLink&&(!0!==e.nativeParams.privacyLink.sendId||!0===e.nativeParams.privacyLink.sendTargetingKeys)||e.nativeParams.privacyIcon&&(!0!==e.nativeParams.privacyIcon.sendId||!0===e.nativeParams.privacyIcon.sendTargetingKeys)))}function buildCdbRequest(e,t,n){var r,i,o,a,s,d,c,l,u,p,f,h,g={publisher:{url:e.url,ext:n.publisherExt},regs:{coppa:!0===n.coppa?1:!1===n.coppa?0:void 0,gpp:null===(r=n.ortb2)||void 0===r||null===(i=r.regs)||void 0===i?void 0:i.gpp,gpp_sid:null===(o=n.ortb2)||void 0===o||null===(a=o.regs)||void 0===a?void 0:a.gpp_sid},slots:t.map((function(e){u=e.params.networkId||u,p=e.schain||p;var t={impid:e.adUnitCode,transactionid:e.transactionId,auctionId:e.auctionId};if(e.params.zoneId&&(t.zoneid=e.params.zoneId),(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e,"ortb2Imp.ext")&&(t.ext=e.ortb2Imp.ext),e.params.ext&&(t.ext=Object.assign({},t.ext,e.params.ext)),e.params.publisherSubId&&(t.publishersubid=e.params.publisherSubId),(e.params.nativeCallback||hasNativeMediaType(e))&&(t.native=!0,checkNativeSendId(e)||(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.yN)(LOG_PREFIX+"all native assets containing URL should be sent as placeholders with sendId(icon, image, clickUrl, displayUrl, privacyLink, privacyIcon)")),hasBannerMediaType(e)?t.sizes=parseSizes((0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e,"mediaTypes.banner.sizes"),parseSize):t.sizes=[],hasVideoMediaType(e)){var n={playersizes:parseSizes((0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e,"mediaTypes.video.playerSize"),parseSize),mimes:e.mediaTypes.video.mimes,protocols:e.mediaTypes.video.protocols,maxduration:e.mediaTypes.video.maxduration,api:e.mediaTypes.video.api,skip:e.mediaTypes.video.skip,placement:e.mediaTypes.video.placement,minduration:e.mediaTypes.video.minduration,playbackmethod:e.mediaTypes.video.playbackmethod,startdelay:e.mediaTypes.video.startdelay},r=e.params.video;void 0!==r&&(n.skip=n.skip||r.skip||0,n.placement=n.placement||r.placement,n.minduration=n.minduration||r.minduration,n.playbackmethod=n.playbackmethod||r.playbackmethod,n.startdelay=n.startdelay||r.startdelay||0),t.video=n}return enrichSlotWithFloors(t,e),t}))};return u&&(g.publisher.networkid=u),p&&(g.source={ext:{schain:p}}),g.user=(null===(s=n.ortb2)||void 0===s?void 0:s.user)||{},g.site=(null===(d=n.ortb2)||void 0===d?void 0:d.site)||{},n&&n.ceh&&(g.user.ceh=n.ceh),n&&n.gdprConsent&&(g.gdprConsent={},void 0!==n.gdprConsent.gdprApplies&&(g.gdprConsent.gdprApplies=!!n.gdprConsent.gdprApplies),g.gdprConsent.version=n.gdprConsent.apiVersion,void 0!==n.gdprConsent.consentString&&(g.gdprConsent.consentData=n.gdprConsent.consentString)),n&&n.uspConsent&&(g.user.uspIab=n.uspConsent),n&&null!==(c=n.ortb2)&&void 0!==c&&null!==(l=c.device)&&void 0!==l&&l.sua&&(g.user.ext=g.user.ext||{},g.user.ext.sua=(null===(f=n.ortb2)||void 0===f||null===(h=f.device)||void 0===h?void 0:h.sua)||{}),g}function parseSizes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return null==e?[]:Array.isArray(e[0])?e.map((function(e){return t(e)})):[t(e)]}function parseSize(e){return e[0]+"x"+e[1]}function hasVideoMediaType(e){return void 0!==(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e,"mediaTypes.video")}function hasBannerMediaType(e){return void 0!==(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e,"mediaTypes.banner")}function hasNativeMediaType(e){return void 0!==(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e,"mediaTypes.native")}function hasValidVideoMediaType(e){var t=!0;if(["mimes","playerSize","maxduration","protocols","api","skip","placement","playbackmethod"].forEach((function(n){void 0===(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e,"mediaTypes.video."+n)&&void 0===(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e,"params.video."+n)&&(t=!1,(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.H)("Criteo Bid Adapter: mediaTypes.video."+n+" is required"))})),t){var n=e.mediaTypes.video.placement||e.params.video.placement;if("instream"==e.mediaTypes.video.context&&1===n)return!0;if("outstream"==e.mediaTypes.video.context&&1!==n)return!0}return!1}function createPrebidNativeAd(e){return{sendTargetingKeys:!1,title:e.products[0].title,body:e.products[0].description,sponsoredBy:e.advertiser.description,icon:e.advertiser.logo,image:e.products[0].image,clickUrl:e.products[0].click_url,privacyLink:e.privacy.optout_click_url,privacyIcon:e.privacy.optout_image_url,cta:e.products[0].call_to_action,price:e.products[0].price,impressionTrackers:e.impression_pixels.map((function(e){return e.url}))}}function createNativeAd(e,t,n){var r="criteo_prebid_native_slots";return window[r]=window[r]||{},window[r][e]={callback:n,payload:t},'\n<script type="text/javascript">\nfor (var i = 0; i < 10; ++i) {\n var slots = window.parent.'.concat(r,';\n  if(!slots){continue;}\n  var responseSlot = slots["').concat(e,'"];\n  responseSlot.callback(responseSlot.payload);\n  break;\n}\n<\/script>')}function pickAvailableGetFloorFunc(e){if(e.getFloor)return e.getFloor;if(e.params.bidFloor&&e.params.bidFloorCur)try{var t=parseFloat(e.params.bidFloor);return function(){return{currency:e.params.bidFloorCur,floor:t}}}catch(e){}}function enrichSlotWithFloors(e,t){try{var n,r,i,o={},a=pickAvailableGetFloorFunc(t);if(a)null!==(n=t.mediaTypes)&&void 0!==n&&n.banner&&(o.banner={},parseSizes((0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(t,"mediaTypes.banner.sizes")).forEach((function(e){return o.banner[parseSize(e).toString()]=a.call(t,{size:e,mediaType:_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.Mk})}))),null!==(r=t.mediaTypes)&&void 0!==r&&r.video&&(o.video={},parseSizes((0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(t,"mediaTypes.video.playerSize")).forEach((function(e){return o.video[parseSize(e).toString()]=a.call(t,{size:e,mediaType:_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.pX})}))),null!==(i=t.mediaTypes)&&void 0!==i&&i.native&&(o.native={},o.native["*"]=a.call(t,{size:"*",mediaType:_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.B5})),Object.keys(o).length>0&&(e.ext||(e.ext={}),Object.assign(e.ext,{floors:o}))}catch(e){(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.H)("Could not parse floors from Prebid: "+e)}}function canFastBid(e){return e!==FAST_BID_VERSION_NONE}function getFastBidUrl(e){var t;return e===FAST_BID_VERSION_LATEST?t="":e?(String(e).split(".")[0]<102&&(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.yN)("Specifying a Fastbid version which is not supporting version selection."),t="."+e):t="."+FAST_BID_VERSION_CURRENT,PUBLISHER_TAG_URL_TEMPLATE.replace(FAST_BID_VERSION_PLACEHOLDER,t)}function tryGetCriteoFastBid(){try{var fastBidStorageKey="criteo_fast_bid",hashPrefix="// Hash: ",fastBidFromStorage=storage.getDataFromLocalStorage(fastBidStorageKey);if(null!==fastBidFromStorage){var firstLineEndPosition=fastBidFromStorage.indexOf("\n"),firstLine=fastBidFromStorage.substr(0,firstLineEndPosition).trim();if(firstLine.substr(0,hashPrefix.length)!==hashPrefix)(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.yN)("No hash found in FastBid"),storage.removeDataFromLocalStorage(fastBidStorageKey);else{var publisherTagHash=firstLine.substr(hashPrefix.length),publisherTag=fastBidFromStorage.substr(firstLineEndPosition+1);(0,criteo_direct_rsa_validate_build_verify_js__WEBPACK_IMPORTED_MODULE_0__.T)(publisherTag,publisherTagHash,FAST_BID_PUBKEY_N,FAST_BID_PUBKEY_E)?((0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.PN)("Using Criteo FastBid"),eval(publisherTag)):((0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.yN)("Invalid Criteo FastBid found"),storage.removeDataFromLocalStorage(fastBidStorageKey))}}}catch(e){}}(0,_src_adapters_bidderFactory_js__WEBPACK_IMPORTED_MODULE_11__.dX)(spec),(0,_src_prebidGlobal_js__WEBPACK_IMPORTED_MODULE_12__.z)("criteoBidAdapter")},6343:(e,t,n)=>{"use strict";n.d(t,{Pd:()=>l,Th:()=>c,_U:()=>u});var r=n(9092),i=n(303),o=n(5446),a=n(388),s=(0,n(6775).R)(),d="outstream";function c(e){var t=this,n=e.url,c=e.config,l=e.id,u=e.callback,p=e.loaded,f=e.adUnitCode,h=e.renderNow;this.url=n,this.config=c,this.handlers={},this.id=l,this.renderNow=h,this.loaded=p,this.cmd=[],this.push=function(e){"function"==typeof e?t.loaded?e.call():t.cmd.push(e):(0,i.H)("Commands given to Renderer.push must be wrapped in a function")},this.callback=u||function(){t.loaded=!0,t.process()},this.render=function(){var e=this,t=arguments,c=function(){e._render?e._render.apply(e,t):(0,i.yN)("No render function was provided, please use .setRender on the renderer")};!function(e){var t=s.adUnits,n=(0,a.sE)(t,(function(t){return t.code===e}));if(!n)return!1;var r=(0,o.Z)(n,"renderer"),i=!!(r&&r.url&&r.render),d=(0,o.Z)(n,"mediaTypes.video.renderer"),c=!!(d&&d.url&&d.render);return!!(i&&!0!==r.backupOnly||c&&!0!==d.backupOnly)}(f)?h?c():(this.cmd.unshift(c),(0,r.B)(n,d,this.callback,this.documentContext)):((0,i.yN)("External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ".concat(f)),c())}.bind(this)}function l(e){return!(!e||!e.url&&!e.renderNow)}function u(e,t,n){var r=null;e.config&&e.config.documentResolver&&(r=e.config.documentResolver(t,document,n)),r||(r=document),e.documentContext=r,e.render(t,e.documentContext)}c.install=function(e){return new c({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded,adUnitCode:e.adUnitCode,renderNow:e.renderNow})},c.prototype.getConfig=function(){return this.config},c.prototype.setRender=function(e){this._render=e},c.prototype.setEventHandlers=function(e){this.handlers=e},c.prototype.handleVideoEvent=function(e){var t=e.id,n=e.eventName;"function"==typeof this.handlers[n]&&this.handlers[n](),(0,i.ji)("Prebid Renderer event for id ".concat(t," type ").concat(n))},c.prototype.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(e){(0,i.H)("Error processing Renderer command: ",e)}}},6737:(e,t,n)=>{"use strict";n.d(t,{UL:()=>i,XG:()=>a,_U:()=>s,ic:()=>r,y2:()=>o});var r="core",i="bidder",o="userId",a="rtd",s="analytics"},4799:(e,t,n)=>{"use strict";n.d(t,{f:()=>a});var r=n(5446),i={};function o(e,t,n){var r=function(e,t){var n=i[e]=i[e]||{bidders:{}};return t?n.bidders[t]=n.bidders[t]||{}:n}(e,n);return r[t]=(r[t]||0)+1,r[t]}var a={incrementRequestsCounter:function(e){return o(e,"requestsCounter")},incrementBidderRequestsCounter:function(e,t){return o(e,"requestsCounter",t)},incrementBidderWinsCounter:function(e,t){return o(e,"winsCounter",t)},getRequestsCounter:function(e){return(0,r.Z)(i,"".concat(e,".requestsCounter"))||0},getBidderRequestsCounter:function(e,t){return(0,r.Z)(i,"".concat(e,".bidders.").concat(t,".requestsCounter"))||0},getBidderWinsCounter:function(e,t){return(0,r.Z)(i,"".concat(e,".bidders.").concat(t,".winsCounter"))||0}}},9484:(e,t,n)=>{"use strict";function r(e){var t=e;return{callBids:function(){},setBidderCode:function(e){t=e},getBidderCode:function(){return t}}}n.d(t,{Z:()=>r})},5801:(e,t,n)=>{"use strict";n.d(t,{VP:()=>F,ZP:()=>G,rp:()=>j,uV:()=>z,TJ:()=>q,nX:()=>B});var r=n(3014),i=n(1785),o=n(1909),a=n(303),s=n(5446),d=n(9267),c=n(7533),l=n(388),u=n(2339),p=[];function f(e,t){return e.labelAll?{labelAll:!0,labels:e.labelAll,activeLabels:t}:{labelAll:!1,labels:e.labelAny,activeLabels:t}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labels,n=void 0===t?[]:t,r=e.labelAll,i=void 0!==r&&r,o=e.activeLabels,c=void 0===o?[]:o,f=arguments.length>1?arguments[1]:void 0,h=arguments.length>2?arguments[2]:void 0,g=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:p).reduce((function(e,t){if("object"===(0,d.Z)(t)&&"string"==typeof t.mediaQuery&&t.mediaQuery.length>0){var n=!1;try{n=(0,a.Zy)().matchMedia(t.mediaQuery).matches}catch(e){(0,a.yN)("Unfriendly iFrame blocks sizeConfig from being correctly evaluated"),n=matchMedia(t.mediaQuery).matches}n&&(Array.isArray(t.sizesSupported)&&(e.shouldFilter=!0),["labels","sizesSupported"].forEach((function(n){return(t[n]||[]).forEach((function(t){return e[n][t]=!0}))})))}else(0,a.yN)('sizeConfig rule missing required property "mediaQuery"');return e}),{labels:{},sizesSupported:{},shouldFilter:!1});(0,a.PO)(f)||(f=h?{banner:{sizes:h}}:{});var m=(0,s.Z)(f,"banner.sizes");g.shouldFilter&&m&&((f=(0,a.I8)(f)).banner.sizes=m.filter((function(e){return g.sizesSupported[e]})));var v={active:!f.hasOwnProperty(u.Mk)||(0,s.Z)(f,"banner.sizes.length")>0&&(0===n.length||!i&&(n.some((function(e){return g.labels[e]}))||n.some((function(e){return(0,l.q9)(c,e)})))||i&&n.reduce((function(e,t){return e?g.labels[t]||(0,l.q9)(c,t):e}),!0)),mediaTypes:f};return m&&m.length!==f.banner.sizes.length&&(v.filterResults={before:m,after:f.banner.sizes}),v}c.vc.getConfig("sizeConfig",(function(e){return function(e){p=e}(e.sizeConfig)}));var g=n(3660),m=n(1746),v=n(174),y=n(8717),b=n(4799),_=n(3821),w=n(8048),T=n(5847),I=n(251),S=n(9218),k=n(6370),C=n(6737);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P="client",x="server",O={},D=O.bidderRegistry={},R=O.aliasRegistry={},M=[];c.vc.getConfig("s2sConfig",(function(e){e&&e.s2sConfig&&(M=(0,a.kJ)(e.s2sConfig)?e.s2sConfig:[e.s2sConfig])}));var N={},U=(0,y.z3)("sync",(function(e){var t=e.bidderCode,n=e.auctionId,r=e.bidderRequestId,i=e.adUnits,o=e.src,d=e.metrics;return i.reduce((function(e,i){var c=i.bids.filter((function(e){return e.bidder===t}));return null==t&&0===c.length&&null!=i.s2sBid&&c.push({bidder:null}),e.push(c.reduce((function(e,t){var c=null==(t=Object.assign({},t,{ortb2Imp:(0,a.Ee)({},i.ortb2Imp,t.ortb2Imp)},(0,a.iG)(i,["nativeParams","nativeOrtbRequest","mediaType","renderer"]))).mediaTypes?i.mediaTypes:t.mediaTypes;return(0,a.FS)(c)?t=Object.assign({},t,{mediaTypes:c}):(0,a.H)("mediaTypes is not correctly configured for adunit ".concat(i.code)),e.push(Object.assign({},t,{adUnitCode:i.code,transactionId:i.transactionId,sizes:(0,s.Z)(c,"banner.sizes")||(0,s.Z)(c,"video.playerSize")||[],bidId:t.bid_id||(0,a._d)(),bidderRequestId:r,auctionId:n,src:o,metrics:d,bidRequestsCount:b.f.getRequestsCounter(i.code),bidderRequestsCount:b.f.getBidderRequestsCounter(i.code,t.bidder),bidderWinsCount:b.f.getBidderWinsCounter(i.code,t.bidder)})),e}),[])),e}),[]).reduce(a.xH,[]).filter((function(e){return""!==e}))}),"getBids"),L=(0,y.z3)("sync",(function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).getS2SBidders;if(null==t)return e;var r=(void 0===n?z:n)(t);return e.filter((function(e){return r.has(e.bidder)}))}),"filterBidsForAdUnit"),j=new w.iK,B=new w.LO,q=new w.$e,F={getCoppa:function(){return!!c.vc.getConfig("coppa")}},V=(0,y.z3)("sync",(function(e,t){return function(e,t){return e.reduce((function(e,n){var r=h(f(n,t),n.mediaTypes,n.sizes),i=r.active,o=r.mediaTypes,s=r.filterResults;return i?(s&&(0,a.PN)('Size mapping filtered adUnit "'.concat(n.code,'" banner sizes from '),s.before,"to ",s.after),n.mediaTypes=o,n.bids=n.bids.reduce((function(e,r){var i=h(f(r,t),n.mediaTypes),o=i.active,s=i.mediaTypes,d=i.filterResults;return o?(d&&((0,a.PN)('Size mapping filtered adUnit "'.concat(n.code,'" bidder "').concat(r.bidder,'" banner sizes from '),d.before,"to ",d.after),r.mediaTypes=s),e.push(r)):(0,a.PN)('Size mapping deactivated adUnit "'.concat(n.code,'" bidder "').concat(r.bidder,'"')),e}),[]),e.push(n)):(0,a.PN)('Size mapping disabled adUnit "'.concat(n.code,'"')),e}),[])}(e,t)}),"setupAdUnitMediaTypes");function z(e){(0,a.kJ)(e)||(e=[e]);var t=new Set([null]);return e.filter((function(e){return e&&e.enabled})).flatMap((function(e){return e.bidders})).forEach((function(e){return t.add(e)})),t}var W=(0,y.z3)("sync",(function(e,t){var n,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).getS2SBidders,i=(void 0===r?z:r)(t);return(0,a.pP)(e).reduce((function(e,t){return e[i.has(t)?x:P].push(t),e}),(n={},(0,o.Z)(n,P,[]),(0,o.Z)(n,x,[]),n))}),"partitionBidders");function H(e,t){var n=D[e],r=(null==n?void 0:n.getSpec)&&n.getSpec();if(r&&r[t]&&"function"==typeof r[t])return[r,r[t]]}function Z(e,t,n,r){try{(0,a.PN)("Invoking ".concat(e,".").concat(t));for(var i=arguments.length,o=new Array(i>4?i-4:0),s=4;s<i;s++)o[s-4]=arguments[s];c.vc.runWithBidder(e,r.bind.apply(r,[n].concat(o)))}catch(n){(0,a.yN)("Error calling ".concat(t," of ").concat(e))}}function $(e,t,n){var i=H(e,t);null!=i&&Z.apply(void 0,[e,t].concat((0,r.Z)(i),[n]))}O.makeBidRequests=(0,y.z3)("sync",(function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6?arguments[6]:void 0;s=(0,S.Bf)(s),T.j8(I.FP.BEFORE_REQUEST_BIDS,e),(0,g.Fb)(e),e=V(e,i);var d=W(e,M),u=d[P],p=d[x];c.vc.getConfig("bidderSequence")===c.FD&&(u=(0,a.TV)(u));var f=(0,_.nH)(),h=[],m=o.global||{},v=o.bidder||{};function y(e){var t=Object.freeze((0,a.Ee)({},m,v[e.bidderCode]));return e.ortb2=t,e.bids.forEach((function(e){return e.ortb2=t})),e}M.forEach((function(r){if(r&&r.enabled){var i=function(e,t){var n=(0,a.I8)(e),r=!1;return n.forEach((function(e){var n=e.bids.filter((function(e){var n;return"pbsBidAdapter"===e.module&&(null===(n=e.params)||void 0===n?void 0:n.configName)===t.configName}));1===n.length?(e.s2sBid=n[0],r=!0,e.ortb2Imp=(0,a.Ee)({},e.s2sBid.ortb2Imp,e.ortb2Imp)):n.length>1&&(0,a.yN)('Multiple "module" bids for the same s2s configuration; all will be ignored',n),e.bids=L(e.bids,t).map((function(e){return e.bid_id=(0,a._d)(),e}))})),{adUnits:n=n.filter((function(e){return 0!==e.bids.length||null!=e.s2sBid})),hasModuleBids:r}}(e,r),o=i.adUnits,d=i.hasModuleBids,c=(0,a.DO)();(0===p.length&&d?[null]:p).forEach((function(e){var i=(0,a._d)(),d=s.fork(),l=y({bidderCode:e,auctionId:n,bidderRequestId:i,uniquePbsTid:c,bids:U({bidderCode:e,auctionId:n,bidderRequestId:i,adUnits:(0,a.I8)(o),src:I.os.YZ,metrics:d}),auctionStart:t,timeout:r.timeout,src:I.os.YZ,refererInfo:f,metrics:d});0!==l.bids.length&&h.push(l)})),o.forEach((function(e){var t=e.bids.filter((function(e){return(0,l.sE)(h,(function(t){return(0,l.sE)(t.bids,(function(t){return t.bidId===e.bid_id}))}))}));e.bids=t})),h.forEach((function(e){void 0===e.adUnitsS2SCopy&&(e.adUnitsS2SCopy=o.filter((function(e){return e.bids.length>0||null!=e.s2sBid})))}))}}));var b=function(e){var t=(0,a.I8)(e);return t.forEach((function(e){e.bids=L(e.bids,null)})),t.filter((function(e){return 0!==e.bids.length}))}(e);return u.forEach((function(e){var o=(0,a._d)(),d=s.fork(),c=y({bidderCode:e,auctionId:n,bidderRequestId:o,bids:U({bidderCode:e,auctionId:n,bidderRequestId:o,adUnits:(0,a.I8)(b),labels:i,src:"client",metrics:d}),auctionStart:t,timeout:r,refererInfo:f,metrics:d}),l=D[e];l||(0,a.H)("Trying to make a request for bidder that does not exist: ".concat(e)),l&&c.bids&&0!==c.bids.length&&h.push(c)})),h.forEach((function(e){j.getConsentData()&&(e.gdprConsent=j.getConsentData()),B.getConsentData()&&(e.uspConsent=B.getConsentData()),q.getConsentData()&&(e.gppConsent=q.getConsentData())})),h}),"makeBidRequests"),O.callBids=function(e,t,n,r,o,s,d){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};if(t.length){var u=t.reduce((function(e,t){return e[Number(void 0!==t.src&&t.src===I.os.YZ)].push(t),e}),[[],[]]),p=(0,i.Z)(u,2),f=p[0],h=p[1],g=[];h.forEach((function(e){for(var t=-1,n=0;n<g.length;++n)if(e.uniquePbsTid===g[n].uniquePbsTid){t=n;break}t<=-1&&g.push(e)}));var m=0;M.forEach((function(e){if(e&&g[m]&&z(e).has(g[m].bidderCode)){var t=(0,v.O)(s,o?{request:o.request.bind(null,"s2s"),done:o.done}:void 0),i=e.bidders,d=D[e.adapter],c=g[m].uniquePbsTid,u=g[m].adUnitsS2SCopy,p=h.filter((function(e){return e.uniquePbsTid===c}));if(d){var f={ad_units:u,s2sConfig:e,ortb2Fragments:l};if(f.ad_units.length){var y=p.map((function(e){return e.start=(0,a.AB)(),r.bind(e)})),b=(0,a.pP)(f.ad_units).filter((function(e){return i.includes(e)}));(0,a.ji)("CALLING S2S HEADER BIDDERS ==== ".concat(b.length>0?b.join(", "):'No bidder specified, using "ortb2Imp" definition(s) only')),p.forEach((function(e){T.j8(I.FP.BID_REQUESTED,A(A({},e),{},{tid:e.auctionId}))})),d.callBids(f,h,n,(function(){return y.forEach((function(e){return e()}))}),t)}}else(0,a.H)("missing "+e.adapter);m++}})),f.forEach((function(e){e.start=(0,a.AB)();var t=D[e.bidderCode];c.vc.runWithBidder(e.bidderCode,(function(){(0,a.ji)("CALLING BIDDER"),T.j8(I.FP.BID_REQUESTED,e)}));var i=(0,v.O)(s,o?{request:o.request.bind(null,e.bidderCode),done:o.done}:void 0),l=r.bind(e);try{c.vc.runWithBidder(e.bidderCode,a.ak.call(t.callBids,t,e,n,l,i,d,c.vc.callbackWithBidder(e.bidderCode)))}catch(t){(0,a.H)("".concat(e.bidderCode," Bid Adapter emitted an uncaught error when parsing their bidRequest"),{e:t,bidRequest:e}),l()}}))}else(0,a.yN)("callBids executed with no bidRequests.  Were they filtered by labels or sizing?")},O.videoAdapters=[],O.registerBidAdapter=function(e,t){var n,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).supportedMediaTypes,i=void 0===r?[]:r;e&&t?"function"==typeof e.callBids?(D[t]=e,w.qh.register(C.UL,t,null===(n=e.getSpec)||void 0===n?void 0:n.call(e).gvlid),(0,l.q9)(i,"video")&&O.videoAdapters.push(t),(0,l.q9)(i,"native")&&g.Sg.push(t)):(0,a.H)("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):(0,a.H)("bidAdapter or bidderCode not specified")},O.aliasBidAdapter=function(e,t,n){if(void 0===D[t]){var r=D[e];if(void 0===r){var i=[];M.forEach((function(n){if(n.bidders&&n.bidders.length){var r=n&&n.bidders;n&&(0,l.q9)(r,t)?R[t]=e:i.push(e)}})),i.forEach((function(e){(0,a.H)('bidderCode "'+e+'" is not an existing bidder.',"adapterManager.aliasBidAdapter")}))}else try{var o,s=function(e){var t=[];return(0,l.q9)(O.videoAdapters,e)&&t.push("video"),(0,l.q9)(g.Sg,e)&&t.push("native"),t}(e);if(r.constructor.prototype!=Object.prototype)(o=new r.constructor).setBidderCode(t);else{var d=r.getSpec(),c=n&&n.gvlid,u=n&&n.skipPbsAliasing;o=(0,m.PZ)(Object.assign({},d,{code:t,gvlid:c,skipPbsAliasing:u})),R[t]=e}O.registerBidAdapter(o,t,{supportedMediaTypes:s})}catch(t){(0,a.H)(e+" bidder does not currently support aliasing.","adapterManager.aliasBidAdapter")}}else(0,a.ji)('alias name "'+t+'" has been already specified.')},O.registerAnalyticsAdapter=function(e){var t=e.adapter,n=e.code,r=e.gvlid;t&&n?"function"==typeof t.enableAnalytics?(t.code=n,N[n]={adapter:t,gvlid:r},w.qh.register(C._U,n,r)):(0,a.H)('Prebid Error: Analytics adaptor error for analytics "'.concat(n,'"\n        analytics adapter must implement an enableAnalytics() function')):(0,a.H)("Prebid Error: analyticsAdapter or analyticsCode not specified")},O.enableAnalytics=function(e){(0,a.kJ)(e)||(e=[e]),(0,a.yi)(e,(function(e){var t=N[e.provider];t&&t.adapter?t.adapter.enableAnalytics(e):(0,a.H)("Prebid Error: no analytics adapter found in registry for '".concat(e.provider,"'."))}))},O.getBidAdapter=function(e){return D[e]},O.getAnalyticsAdapter=function(e){return N[e]},O.callTimedOutBidders=function(e,t,n){t=t.map((function(t){return t.params=(0,a.S0)(e,t.adUnitCode,t.bidder),t.timeout=n,t})),t=(0,a.vM)(t,"bidder"),Object.keys(t).forEach((function(e){$(e,"onTimeout",t[e])}))},O.callBidWonBidder=function(e,t,n){t.params=(0,a.S0)(n,t.adUnitCode,t.bidder),b.f.incrementBidderWinsCounter(t.adUnitCode,t.bidder),$(e,"onBidWon",t)},O.callSetTargetingBidder=function(e,t){$(e,"onSetTargeting",t)},O.callBidViewableBidder=function(e,t){$(e,"onBidViewable",t)},O.callBidderError=function(e,t,n){$(e,"onBidderError",{error:t,bidderRequest:n})},O.callDataDeletionRequest=(0,y.z3)("sync",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o="onDataDeletionRequest";Object.keys(D).filter((function(e){return!R.hasOwnProperty(e)})).forEach((function(e){var n=H(e,o);if(null!=n){var i=k.K.getBidsRequested().filter((function(t){return function(e){for(var t=new Set;R.hasOwnProperty(e)&&!t.has(e);)t.add(e),e=R[e];return e}(t.bidderCode)===e}));Z.apply(void 0,[e,o].concat((0,r.Z)(n),[i],t))}})),Object.entries(N).forEach((function(e){var n,r=(0,i.Z)(e,2),s=r[0],d=r[1],c=null==d||null===(n=d.adapter)||void 0===n?void 0:n[o];if("function"==typeof c)try{c.apply(d.adapter,t)}catch(e){(0,a.H)("error calling ".concat(o," of ").concat(s),e)}}))}));const G=O},1746:(e,t,n)=>{"use strict";n.d(t,{BF:()=>x,JY:()=>D,PZ:()=>E,Q1:()=>O,dX:()=>C});var r=n(1785),i=n(9267),o=n(9484),a=n(5801),s=n(7533),d=n(3776),c=n(4277),l=n(3660),u=n(3389),p=n(251),f=n(5847),h=n(388),g=n(174),m=n(303),v=n(5446),y=n(2339),b=n(8717),_=n(2814),w=n(6370),T=n(8962),I=n(9218),S=(0,_.eA)("bidderFactory"),k=["cpm","ttl","creativeId","netRevenue","currency"];function C(e){var t=Array.isArray(e.supportedMediaTypes)?{supportedMediaTypes:e.supportedMediaTypes}:void 0;function n(e){var n=E(e);a.ZP.registerBidAdapter(n,e.code,t)}n(e),Array.isArray(e.aliases)&&e.aliases.forEach((function(t){var r,i,o=t;(0,m.PO)(t)&&(o=t.code,r=t.gvlid,i=t.skipPbsAliasing),a.ZP.aliasRegistry[o]=e.code,n(Object.assign({},e,{code:o,gvlid:r,skipPbsAliasing:i}))}))}function E(e){return Object.assign(new o.Z(e.code),{getSpec:function(){return Object.freeze(Object.assign({},e))},registerSyncs:t,callBids:function(r,i,o,c,l,u){if(Array.isArray(r.bids)){var h={},g=[],v=R(r).measureTime("validate",(function(){return r.bids.filter(n)}));if(0!==v.length){var y={};v.forEach((function(e){y[e.bidId]=e,e.adUnitCode||(e.adUnitCode=e.placementCode)})),A(e,v,r,c,u,{onRequest:function(e){return f.j8(p.FP.BEFORE_BIDDER_HTTP,r,e)},onResponse:function(t){l(e.code),g.push(t)},onFledgeAuctionConfigs:function(e){e.forEach((function(e){var t=y[e.bidId];t?x(t.adUnitCode,e.config):(0,m.yN)("Received fledge auction configuration for an unknown bidId",e)}))},onError:function(t,n){l(e.code),a.ZP.callBidderError(e.code,n,r),f.j8(p.FP.BIDDER_ERROR,{error:n,bidderRequest:r}),(0,m.H)("Server call for ".concat(e.code," failed: ").concat(t," ").concat(n.status,". Continuing without bids."))},onBid:function(t){var n,r,o,a,s=y[t.requestId];if(s){if(t.adapterCode=s.bidder,n=t.bidderCode,r=s.bidder,o=T.S.get(r,"allowAlternateBidderCodes")||!1,a=T.S.get(r,"allowedAlternateBidderCodes"),n&&r&&r!==n&&(a=(0,m.kJ)(a)?a.map((function(e){return e.trim().toLowerCase()})).filter((function(e){return!!e})).filter(m.tT):a,!o||(0,m.kJ)(a)&&"*"!==a[0]&&!a.includes(n)))return(0,m.yN)("".concat(t.bidderCode," is not a registered partner or known bidder of ").concat(s.bidder,", hence continuing without bid. If you wish to support this bidder, please mark allowAlternateBidderCodes as true in bidderSettings.")),void i.reject(s.adUnitCode,t,p.Gw.Dg);t.originalCpm=t.cpm,t.originalCurrency=t.currency,t.meta=t.meta||Object.assign({},t[s.bidder]);var c=Object.assign((0,d.m)(p.Q_.Q,s),t);!function(e,t){var n=(0,I.Bf)(t.metrics);n.checkpoint("addBidResponse"),h[e]=!0,n.measureTime("addBidResponse.validate",(function(){return D(e,t)}))?i(e,t):i.reject(e,t,p.Gw.UI)}(s.adUnitCode,c)}else(0,m.yN)("Bidder ".concat(e.code," made bid for unknown request ID: ").concat(t.requestId,". Ignoring.")),i.reject(null,t,p.Gw.Gp)},onCompletion:b})}else b()}function b(){o(),s.vc.runWithBidder(e.code,(function(){f.j8(p.FP.BIDDER_DONE,r),t(g,r.gdprConsent,r.uspConsent,r.gppConsent)}))}}});function t(t,n,r,i){P(e,t,n,r,i)}function n(t){return!!e.isBidRequestValid(t)||((0,m.yN)("Invalid bid sent to bidder ".concat(e.code,": ").concat(JSON.stringify(t))),!1)}}var A=(0,b.z3)("sync",(function(e,t,n,r,o,a){var s=a.onRequest,d=a.onResponse,c=a.onFledgeAuctionConfigs,l=a.onError,u=a.onBid,p=a.onCompletion,f=R(n);p=f.startTiming("total").stopBefore(p);var h=f.measureTime("buildRequests",(function(){return e.buildRequests(t,n)}));if(h&&0!==h.length){Array.isArray(h)||(h=[h]);var g=(0,m.yx)(p,h.length);h.forEach((function(t){var n=f.fork();function a(e){null!=e&&(e.metrics=n.fork().renameWith()),u(e)}var p=o((function(r,i){y();try{r=JSON.parse(r)}catch(e){}r={body:r,headers:{get:i.getResponseHeader.bind(i)}},d(r);try{r=n.measureTime("interpretResponse",(function(){return e.interpretResponse(r,t)}))}catch(t){return(0,m.H)("Bidder ".concat(e.code," failed to interpret the server's response. Continuing without bids"),null,t),void g()}var o;r&&(0,m.kJ)(r.fledgeAuctionConfigs)?(c(r.fledgeAuctionConfigs),o=r.bids):o=r,o&&((0,m.kJ)(o)?o.forEach(a):a(o)),g()})),h=o((function(e,t){y(),l(e,t),g()}));s(t);var v,y=n.startTiming("net");switch(t.method){case"GET":r("".concat(t.url).concat((v=t.data)?"?".concat("object"===(0,i.Z)(v)?(0,m.Re)(v):v):""),{success:p,error:h},void 0,Object.assign({method:"GET",withCredentials:!0},t.options));break;case"POST":r(t.url,{success:p,error:h},"string"==typeof t.data?t.data:JSON.stringify(t.data),Object.assign({method:"POST",contentType:"text/plain",withCredentials:!0},t.options));break;default:(0,m.yN)("Skipping invalid request from ".concat(e.code,". Request type ").concat(t.type," must be GET or POST")),g()}}))}else p()}),"processBidderRequests"),P=(0,b.z3)("async",(function(e,t,n,r,i){var o=s.vc.getConfig("userSync.aliasSyncEnabled");if(e.getUserSyncs&&(o||!a.ZP.aliasRegistry[e.code])){var d=s.vc.getConfig("userSync.filterSettings"),l=e.getUserSyncs({iframeEnabled:!(!d||!d.iframe&&!d.all),pixelEnabled:!(!d||!d.image&&!d.all)},t,n,r,i);l&&(Array.isArray(l)||(l=[l]),l.forEach((function(t){c.k_.registerSync(t.type,e.code,t.url)})),c.k_.bidderDone(e.code))}}),"registerSyncs"),x=(0,b.z3)("sync",(function(e,t){}),"addComponentAuction");function O(e,t){var n=a.ZP.getBidAdapter(e);if(n.getSpec().getMappingFileInfo){var r=n.getSpec().getMappingFileInfo(),i=r.localStorageKey?r.localStorageKey:n.getBidderCode(),o=S.getDataFromLocalStorage(i);if(o){try{o=JSON.parse(o)}catch(t){(0,m.H)("Failed to parse ".concat(e," mapping data stored in local storage"))}return o.mapping[t]?o.mapping[t]:null}}}function D(e,t){var n,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,o=void 0===i?w.K.index:i;function a(e){return"Invalid bid from ".concat(t.bidderCode,". Ignoring bid: ").concat(e)}return e?t?(n=Object.keys(t),k.every((function(e){return(0,h.q9)(n,e)&&!(0,h.q9)([void 0,null],t[e])}))?"native"!==t.mediaType||(0,l.r4)(t,{index:o})?"video"!==t.mediaType||(0,u.Dn)(t,{index:o})?!("banner"===t.mediaType&&!function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,i=void 0===n?w.K.index:n;if((t.width||0===parseInt(t.width,10))&&(t.height||0===parseInt(t.height,10)))return t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),!0;var o=i.getBidRequest(t),a=i.getMediaTypes(t),s=o&&o.sizes||a&&a.banner&&a.banner.sizes,d=(0,m.sF)(s);if(1===d.length){var c=d[0].split("x"),l=(0,r.Z)(c,2),u=l[0],p=l[1];return t.width=parseInt(u,10),t.height=parseInt(p,10),!0}return!1}(e,t,{index:o})&&((0,m.H)(a("Banner bids require a width and height")),1)):((0,m.H)(a("Video bid does not have required vastUrl or renderer property")),!1):((0,m.H)(a("Native bid missing some required properties.")),!1):((0,m.H)(a("Bidder ".concat(t.bidderCode," is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params."))),!1)):((0,m.yN)("Some adapter tried to add an undefined bid for ".concat(e,".")),!1):((0,m.yN)("No adUnitCode was supplied to addBidResponse."),!1)}function R(e){return(0,I.Bf)(e.metrics).renameWith((function(t){return["adapter.client.".concat(t),"adapters.client.".concat(e.bidderCode,".").concat(t)]}))}(0,b.v5)("checkAdUnitSetup").before((function(e,t){if(!s.vc.getConfig("adpod.brandCategoryExclusion"))return e.call(this,t);t.filter((function(e){return(0,v.Z)(e,"mediaTypes.video.context")===y.Oh})).map((function(e){return e.bids.map((function(e){return e.bidder}))})).reduce(m.xH,[]).filter(m.tT).forEach((function(e){var t=a.ZP.getBidAdapter(e);if(t.getSpec().getMappingFileInfo){var n=t.getSpec().getMappingFileInfo(),r=n.refreshInDays?n.refreshInDays:1,i=n.localStorageKey?n.localStorageKey:t.getSpec().code,o=S.getDataFromLocalStorage(i);try{(!(o=o?JSON.parse(o):void 0)||(0,m.AB)()>o.lastUpdated+24*r*60*60*1e3)&&(0,g.h)(n.url,{success:function(t){try{t=JSON.parse(t);var n={lastUpdated:(0,m.AB)(),mapping:t.mapping};S.setDataInLocalStorage(i,JSON.stringify(n))}catch(t){(0,m.H)("Failed to parse ".concat(e," bidder translation mapping file"))}},error:function(){(0,m.H)("Failed to load ".concat(e," bidder translation file"))}})}catch(t){(0,m.H)("Failed to parse ".concat(e," bidder translation mapping file"))}}})),e.call(this,t)}))},9092:(e,t,n)=>{"use strict";n.d(t,{B:()=>s});var r=n(388),i=n(303),o=new WeakMap,a=["debugging","adloox","criteo","outstream","adagio","spotx","browsi","brandmetrics","justtag","tncId","akamaidap","ftrackId","inskin","hadron","medianet","improvedigital","aaxBlockmeter","confiant","arcspan"];function s(e,t,n,s,d){if(t&&e){if((0,r.q9)(a,t)){s||(s=document);var c=p(s,e);if(c)return n&&"function"==typeof n&&(c.loaded?n():c.callbacks.push(n)),c.tag;var l=o.get(s)||{},u={loaded:!1,tag:null,callbacks:[]};return l[e]=u,o.set(s,l),n&&"function"==typeof n&&u.callbacks.push(n),(0,i.yN)("module ".concat(t," is loading external JavaScript")),function(t,n,r,o){r||(r=document);var a=r.createElement("script");a.type="text/javascript",a.async=!0;var s=p(r,e);return s&&(s.tag=a),a.readyState?a.onreadystatechange=function(){"loaded"!==a.readyState&&"complete"!==a.readyState||(a.onreadystatechange=null,n())}:a.onload=function(){n()},a.src=t,o&&(0,i.D9)(a,o),(0,i.jC)(a,r),a}(e,(function(){u.loaded=!0;try{for(var e=0;e<u.callbacks.length;e++)u.callbacks[e]()}catch(e){(0,i.H)("Error executing callback","adloader.js:loadExternalScript",e)}}),s,d)}(0,i.H)("".concat(t," not whitelisted for loading external JavaScript"))}else(0,i.H)("cannot load external script without url and moduleCode");function p(e,t){var n=o.get(e);return n&&n[t]?n[t]:null}}},174:(e,t,n)=>{"use strict";n.d(t,{O:()=>d,h:()=>s});var r=n(9267),i=n(7533),o=n(303),a=4,s=d();function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.request,s=t.done;return function(t,d,c){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{var u,p=l.method||(c?"POST":"GET"),f=document.createElement("a");f.href=t;var h="object"===(0,r.Z)(d)&&null!==d?d:{success:function(){(0,o.ji)("xhr success")},error:function(e){(0,o.H)("xhr error",null,e)}};if("function"==typeof d&&(h.success=d),(u=new window.XMLHttpRequest).onreadystatechange=function(){if(u.readyState===a){"function"==typeof s&&s(f.origin);var e=u.status;e>=200&&e<300||304===e?h.success(u.responseText,u):h.error(u.statusText,u)}},i.vc.getConfig("disableAjaxTimeout")||(u.ontimeout=function(){(0,o.H)("  xhr timeout after ",u.timeout,"ms")}),"GET"===p&&c){var g=(0,o.en)(t,l);Object.assign(g.search,c),t=(0,o.Q2)(g)}u.open(p,t,!0),i.vc.getConfig("disableAjaxTimeout")||(u.timeout=e),l.withCredentials&&(u.withCredentials=!0),(0,o.yi)(l.customHeaders,(function(e,t){u.setRequestHeader(t,e)})),l.preflight&&u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.setRequestHeader("Content-Type",l.contentType||"text/plain"),"function"==typeof n&&n(f.origin),"POST"===p&&c?u.send(c):u.send()}catch(e){(0,o.H)("xhr construction",e),"object"===(0,r.Z)(d)&&null!==d&&d.error(e)}}}},5366:(e,t,n)=>{"use strict";n.d(t,{mv:()=>O,dg:()=>X,LX:()=>ee,vO:()=>L});var r=n(1785),i=n(9267),o=n(303),a=n(5446),s=n(5483),d=n(3660),c=n(174),l=n(7533),u=n(6370),p=15;function f(e){var t,n,r,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,o=void 0===i?u.K.index:i,a=e.vastXml?e.vastXml:(t=e.vastUrl,r=(n=e.vastImpUrl)?"<![CDATA[".concat(n,"]]>"):"",'<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA['.concat(t,"]]></VASTAdTagURI>\n        <Impression>").concat(r,"</Impression>\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>")),s=o.getAuction(e),d={type:"xml",value:a,ttlseconds:Number(e.ttl)+p};return l.vc.getConfig("cache.vasttrack")&&(d.bidder=e.bidder,d.bidid=e.requestId,d.aid=e.auctionId),null!=s&&(d.timestamp=s.getAuctionStart()),"string"==typeof e.customCacheKey&&""!==e.customCacheKey&&(d.key=e.customCacheKey),d}var h=n(6343),g=n(4277),m=n(8717),v=n(388),y=n(3389),b=n(2339),_=n(8962),w=n(5847),T=n(5801),I=n(251),S=n(8595),k=n(9218),C=n(3776),E=n(6775),A=g.k_.syncUsers,P="started",x="inProgress",O="completed";w.on(I.FP.BID_ADJUSTMENT,(function(e){!function(e){var t=function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i.index,s=void 0===a?u.K.index:a,d=i.bs,c=void 0===d?_.S:d;n=n||s.getBidRequest(t);var l=c.get((null==t?void 0:t.bidderCode)||(null===(r=n)||void 0===r?void 0:r.bidder),"bidCpmAdjustment");if(l&&"function"==typeof l)try{return l(e,Object.assign({},t),n)}catch(e){(0,o.H)("Error during bid adjustment",e)}return e}(e.cpm,e);t>=0&&(e.cpm=t)}(e)}));var D=4,R={},M={},N=[],U=(0,E.R)();function L(e){var t=e.adUnits,n=e.adUnitCodes,d=e.callback,c=e.cbTimeout,p=e.labels,f=e.auctionId,g=e.ortb2Fragments,m=e.metrics;m=(0,k.Bf)(m);var _,E,L,F,z=t,W=p,Z=n,$=f||(0,o.DO)(),X=c,J=new Set,Y=[],Q=d,ee=[],te=[],re=[],ie=[],oe=[];function ae(){return{auctionId:$,timestamp:_,auctionEnd:E,auctionStatus:F,adUnits:z,adUnitCodes:Z,labels:W,bidderRequests:ee,noBids:re,bidsReceived:te,bidsRejected:Y,winningBids:ie,timeout:X,metrics:m,seatNonBids:oe}}function se(e,n){if(n&&clearTimeout(L),void 0===E){var r=[];e&&((0,o.ji)("Auction ".concat($," timedOut")),i=J,(r=ee.map((function(e){return(e.bids||[]).filter((function(e){return!i.has(e.bidder)}))})).reduce(o.xH,[])).length&&w.j8(I.FP.BID_TIMEOUT,r)),F=O,E=Date.now(),m.checkpoint("auctionEnd"),m.timeBetween("requestBids","auctionEnd","requestBids.total"),m.timeBetween("callBids","auctionEnd","requestBids.callBids"),w.j8(I.FP.AUCTION_END,ae()),q(z,(function(){try{if(null!=Q){var n=Z,i=te.filter(o.ak.call(o.IK,this,n)).reduce(ne,{});Q.apply(U,[i,e,$]),Q=null}}catch(e){(0,o.H)("Error executing bidsBackHandler",null,e)}finally{r.length&&T.ZP.callTimedOutBidders(t,r,X);var a=l.vc.getConfig("userSync")||{};a.enableOverride||A(a.syncDelay)}}))}var i}function de(){l.vc.resetBidder(),(0,o.PN)("Bids Received for Auction with id: ".concat($),te),F=O,se(!1,!0)}function ce(e){J.add(e)}function le(e){var t=this;e.forEach((function(e){var t;t=e,ee=ee.concat(t)}));var n={},d={bidRequests:e,run:function(){var d,f;d=se.bind(null,!0),f=setTimeout(d,X),L=f,F=x,w.j8(I.FP.AUCTION_INIT,ae());var m=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,d=void 0===n?u.K.index:n,c=0,p=!1,f=new Set,g={},m={};function _(){c--,p&&0===c&&e()}function T(e,t,n){return g[t.requestId]=!0,function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,r=void 0===n?u.K.index:n,i=r.getBidderRequest(e),a=r.getAdUnit(e),s=i&&i.start||e.requestTimestamp;Object.assign(e,{responseTimestamp:e.responseTimestamp||(0,o.AB)(),requestTimestamp:e.requestTimestamp||s,cpm:parseFloat(e.cpm)||0,bidder:e.bidder||e.bidderCode,adUnitCode:t}),null!=(null==a?void 0:a.ttlBuffer)&&(e.ttlBuffer=a.ttlBuffer),e.timeToRespond=e.responseTimestamp-e.requestTimestamp}(t,e),c++,n(_)}function k(e,n){T(e,n,(function(e){var r=function(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,r=void 0===n?u.K.index:n;w.j8(I.FP.BID_ADJUSTMENT,e);var o=(null===(t=r.getBidRequest(e))||void 0===t?void 0:t.renderer)||r.getAdUnit(e).renderer,a=e.mediaType,d=r.getMediaTypes(e),c=d&&d[a],p=c&&c.renderer,f=null;p&&p.url&&p.render&&(!0!==p.backupOnly||!e.renderer)?f=p:o&&o.url&&o.render&&(!0!==o.backupOnly||!e.renderer)&&(f=o),f&&(e.renderer=h.Th.install({url:f.url,config:f.options}),e.renderer.setRender(f.render));var g=K(e.mediaType,d,l.vc.getConfig("mediaTypePriceGranularity")),m=(0,s.D)(e.cpm,"object"===(0,i.Z)(g)?g:l.vc.getConfig("customPriceBucket"),l.vc.getConfig("currency.granularityMultiplier"));return e.pbLg=m.low,e.pbMg=m.med,e.pbHg=m.high,e.pbAg=m.auto,e.pbDg=m.dense,e.pbCg=m.custom,e}(n);r.mediaType===b.pX?function(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).index,i=void 0===r?u.K.index:r,s=!0,d=(0,a.Z)(i.getMediaTypes({requestId:t.originalRequestId||t.requestId,transactionId:t.transactionId}),"video"),c=d&&(0,a.Z)(d,"context"),p=d&&(0,a.Z)(d,"useCacheKey");l.vc.getConfig("cache.url")&&(p||c!==y.gZ)&&(!t.videoCacheKey||l.vc.getConfig("cache.ignoreBidderCacheKey")?(s=!1,G(e,t,n,d)):t.vastUrl||((0,o.H)("videoCacheKey specified but not required vastUrl for video bid"),s=!1)),s&&(V(e,t),n())}(t,r,e):(null!=r.native&&"object"===(0,i.Z)(r.native)&&H(r),V(t,r),e())}))}function E(e,n,i){return T(e,n,(function(e){var a,s=(0,C.m)(I.Q_.H,null===(a=n.getIdentifiers)||void 0===a?void 0:a.call(n));return Object.assign(s,Object.fromEntries(Object.entries(n).filter((function(e){var t=(0,r.Z)(e,1)[0];return!s.hasOwnProperty(t)&&!["ad","adUrl","vastXml","vastUrl","native"].includes(t)})))),s.status=I.UE.G9,s.cpm=0,n.rejectionReason=i,(0,o.yN)("Bid from ".concat(n.bidder||"unknown bidder"," was rejected: ").concat(i),n),w.j8(I.FP.BID_REJECTED,n),t.addBidRejected(n),e(),s}))}function A(){var n=t.getBidRequests(),r=l.vc.getConfig("auctionOptions");if(f.add(this),r&&!(0,o.xb)(r)){var i=r.secondaryBidders;i&&!n.every((function(e){return(0,v.q9)(i,e.bidderCode)}))&&(n=n.filter((function(e){return!(0,v.q9)(i,e.bidderCode)})))}p=n.every((function(e){return f.has(e)})),this.bids.forEach((function(e){g[e.bidId]||(t.addNoBid(e),w.j8(I.FP.NO_BID,e))})),p&&0===c&&e()}return{addBidResponse:function(){function e(e,t){var n,r,i,o=d.getBidderRequest(t);r=o&&o.bidderRequestId||"",i=j.call({dispatch:k},e,t,(function(r){return null==n&&(n=E(e,t,r)),n})),null==m[r]&&(m[r]=S.Z.resolve()),m[r]=m[r].then((function(){return S.Z.resolve(i).catch((function(){}))}))}return e.reject=E,e}(),adapterDone:function(){!function(e,n){var r=e.timeout;(null==r||r>t.getTimeout())&&(r=t.getTimeout());var i=t.getAuctionStart()+r-Date.now(),o=m[e.bidderRequestId],a=m[""];(null!=o||null!=a)&&i>0?S.Z.race([S.Z.timeout(i),S.Z.resolve(a).then((function(){return o}))]).then(n):n()}(this,A.bind(this))}}}(de,t);T.ZP.callBids(z,e,m.addBidResponse,m.adapterDone,{request:function(e,t){p(R,t),p(n,e),M[e]||(M[e]={SRA:!0,origin:t}),n[e]>1&&(M[e].SRA=!1)},done:function(e){R[e]--,N[0]&&c(N[0])&&N.shift()}},X,ce,g)}};function c(e){var t=!0,n=l.vc.getConfig("maxRequestsPerOrigin")||D;return e.bidRequests.some((function(e){var r=1,i=void 0!==e.src&&e.src===I.os.YZ?"s2s":e.bidderCode;return M[i]&&(!1===M[i].SRA&&(r=Math.min(e.bids.length,n)),R[M[i].origin]+r>n&&(t=!1)),!t})),t&&e.run(),t}function p(e,t){void 0===e[t]?e[t]=1:e[t]++}c(d)||((0,o.yN)("queueing auction due to limited endpoint capacity"),N.push(d))}return w.on(I.FP.SEAT_NON_BID,(function(e){var t;e.auctionId===$&&(t=e.seatnonbid,oe=oe.concat(t))})),{addBidReceived:function(e){te=te.concat(e)},addBidRejected:function(e){Y=Y.concat(e)},addNoBid:function(e){re=re.concat(e)},executeCallback:se,callBids:function(){F=P,_=Date.now();var e=m.measureTime("requestBids.makeRequests",(function(){return T.ZP.makeBidRequests(z,_,$,X,W,g,m)}));(0,o.PN)("Bids Requested for Auction with id: ".concat($),e),m.checkpoint("callBids"),e.length<1?((0,o.yN)("No valid bid requests returned for auction"),de()):B.call({dispatch:le,context:this},e)},addWinningBid:function(e){ie=ie.concat(e),T.ZP.callBidWonBidder(e.adapterCode||e.bidder,e,t)},setBidTargeting:function(e){T.ZP.callSetTargetingBidder(e.adapterCode||e.bidder,e)},getWinningBids:function(){return ie},getAuctionStart:function(){return _},getTimeout:function(){return X},getAuctionId:function(){return $},getAuctionStatus:function(){return F},getAdUnits:function(){return z},getAdUnitCodes:function(){return Z},getBidRequests:function(){return ee},getBidsReceived:function(){return te},getNoBids:function(){return re},getNonBids:function(){return oe},getFPD:function(){return g},getMetrics:function(){return m}}}var j=(0,m.z3)("sync",(function(e,t,n){this.dispatch.call(null,e,t)}),"addBidResponse"),B=(0,m.z3)("sync",(function(e){this.dispatch.call(this.context,e)}),"addBidderRequests"),q=(0,m.z3)("async",(function(e,t){t&&t()}),"bidsBackCallback");function F(e,t){t.timeToRespond>e.getTimeout()+l.vc.getConfig("timeoutBuffer")&&e.executeCallback(!0)}function V(e,t){var n,r,i;n=t,i=!0===_.S.get(n.bidderCode,"allowZeroCpmBids")?n.cpm>=0:n.cpm>0,n.bidderCode&&(i||n.dealId)&&(r=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,r=void 0===n?u.K.index:n;if(!t)return{};var i=r.getBidRequest(t),o={};return te(o,ee(t.mediaType,e),t,i),e&&_.S.getOwn(e,I.k2.xn)&&(te(o,_.S.ownSettingsFor(e),t,i),t.sendStandardTargeting=_.S.get(e,"sendStandardTargeting")),t.native&&(o=Object.assign({},o,(0,d.Ur)(t))),o}(n.bidderCode,n)),n.adserverTargeting=Object.assign(n.adserverTargeting||{},r),(0,k.Bf)(t.metrics).timeSince("addBidResponse","addBidResponse.total"),w.j8(I.FP.BID_RESPONSE,t),e.addBidReceived(t),F(e,t)}var z,W,H=function(e){var t,n,r=null===(t=u.K.index.getAdUnit(e))||void 0===t?void 0:t.nativeOrtbRequest,i=null===(n=e.native)||void 0===n?void 0:n.ortb;if(r&&i){var o=(0,d.zq)(i,r);Object.assign(e.native,o)}},Z=function(e){!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.O,r={puts:e.map(f)};n(l.vc.getConfig("cache.timeout"))(l.vc.getConfig("cache.url"),function(e){return{success:function(t){var n;try{n=JSON.parse(t).responses}catch(t){return void e(t,[])}n?e(null,n):e(new Error("The cache server didn't respond with a responses property."),[])},error:function(t,n){e(new Error("Error storing video ad in the cache: ".concat(t,": ").concat(JSON.stringify(n))),[])}}}(t),JSON.stringify(r),{contentType:"text/plain",withCredentials:!0})}(e.map((function(e){return e.bidResponse})),(function(t,n){n.forEach((function(n,r){var i=e[r],a=i.auctionInstance,s=i.bidResponse,d=i.afterBidAdded;t?((0,o.yN)("Failed to save to the video cache: ".concat(t,". Video bid must be discarded.")),F(a,s)):""===n.uuid?((0,o.yN)("Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded."),F(a,s)):(s.videoCacheKey=n.uuid,s.vastUrl||(s.vastUrl=function(e){return"".concat(l.vc.getConfig("cache.url"),"?uuid=").concat(e)}(s.videoCacheKey)),V(a,s),d())}))}))};l.vc.getConfig("cache",(function(e){z="number"==typeof e.cache.batchSize&&e.cache.batchSize>0?e.cache.batchSize:1,W="number"==typeof e.cache.batchTimeout&&e.cache.batchTimeout>0?e.cache.batchTimeout:0}));var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:setTimeout,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z,n=[[]],r=!1,i=function(e){return e()};return function(o,a,s){var d=W>0?e:i;n[n.length-1].length>=z&&n.push([]),n[n.length-1].push({auctionInstance:o,bidResponse:a,afterBidAdded:s}),r||(r=!0,d((function(){n.forEach(t),n=[[]],r=!1}),W))}}(),G=(0,m.z3)("async",(function(e,t,n,r){$(e,t,n)}),"callPrebidCache");function K(e,t,n){if(e&&n){if(e===b.pX){var r=(0,a.Z)(t,"".concat(b.pX,".context"),"instream");if(n["".concat(b.pX,"-").concat(r)])return n["".concat(b.pX,"-").concat(r)]}return n[e]}}var X=function(e){return function(t){var n=e||function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,n=void 0===t?u.K.index:t,r=K(e.mediaType,n.getMediaTypes(e),l.vc.getConfig("mediaTypePriceGranularity"));return"string"==typeof e.mediaType&&r?"string"==typeof r?r:"custom":l.vc.getConfig("priceGranularity")}(t);return n===I.Ql.B7?t.pbAg:n===I.Ql.uN?t.pbDg:n===I.Ql.yE?t.pbLg:n===I.Ql.M2?t.pbMg:n===I.Ql.lj?t.pbHg:n===I.Ql.qN?t.pbCg:void 0}},J=function(){return function(e){return e.meta&&e.meta.advertiserDomains&&e.meta.advertiserDomains.length>0?[e.meta.advertiserDomains].flat()[0]:""}},Y=function(){return function(e){return e.meta&&e.meta.primaryCatId?e.meta.primaryCatId:""}};function Q(e,t){return{key:e,val:"function"==typeof t?function(e,n){return t(e,n)}:function(e){return(0,o.NA)(e,t)}}}function ee(e,t){var n=I.TD,r=Object.assign({},_.S.settingsFor(null));if(r[I.k2.xn]||(r[I.k2.xn]=function(){var e=I.TD;return[Q(e.BIDDER,"bidderCode"),Q(e.AD_ID,"adId"),Q(e.PRICE_BUCKET,X()),Q(e.SIZE,"size"),Q(e.DEAL,"dealId"),Q(e.SOURCE,"source"),Q(e.FORMAT,"mediaType"),Q(e.ADOMAIN,J()),Q(e.ACAT,Y())]}()),"video"===e){var i=r[I.k2.xn].slice();if(r[I.k2.xn]=i,[n.UUID,n.CACHE_ID].forEach((function(e){void 0===(0,v.sE)(i,(function(t){return t.key===e}))&&i.push(Q(e,"videoCacheKey"))})),l.vc.getConfig("cache.url")&&(!t||!1!==_.S.get(t,"sendStandardTargeting"))){var s=(0,o.en)(l.vc.getConfig("cache.url"));void 0===(0,v.sE)(i,(function(e){return e.key===n.CACHE_HOST}))&&i.push(Q(n.CACHE_HOST,(function(e){return(0,a.Z)(e,"adserverTargeting.".concat(n.CACHE_HOST))?e.adserverTargeting[n.CACHE_HOST]:s.hostname})))}}return r}function te(e,t,n,r){var i=t[I.k2.xn];return n.size=n.getSize(),(0,o.yi)(i,(function(i){var a=i.key,s=i.val;if(e[a]&&(0,o.yN)("The key: "+a+" is being overwritten"),(0,o.LQ)(s))try{s=s(n,r)}catch(e){(0,o.H)("bidmanager","ERROR",e)}(void 0===t.suppressEmptyKeys||!0!==t.suppressEmptyKeys)&&a!==I.TD.DEAL&&a!==I.TD.ACAT||!(0,o.jH)(s)&&null!=s?e[a]=s:(0,o.PN)("suppressing empty key '"+a+"' from adserver targeting")})),e}function ne(e,t){return e[t.adUnitCode]||(e[t.adUnitCode]={bids:[]}),e[t.adUnitCode].bids.push(t),e}},6370:(e,t,n)=>{"use strict";n.d(t,{K:()=>c});var r=n(303),i=n(5366),o=n(388);function a(e){Object.assign(this,{getAuction:function(t){var n=t.auctionId;if(null!=n)return e().find((function(e){return e.getAuctionId()===n}))},getAdUnit:function(t){var n=t.transactionId;if(null!=n)return e().flatMap((function(e){return e.getAdUnits()})).find((function(e){return e.transactionId===n}))},getMediaTypes:function(e){var t=e.transactionId,n=e.requestId;if(null!=n){var r=this.getBidRequest({requestId:n});if(null!=r&&(null==t||r.transactionId===t))return r.mediaTypes}else if(null!=t){var i=this.getAdUnit({transactionId:t});if(null!=i)return i.mediaTypes}},getBidderRequest:function(t){var n=t.requestId,r=t.bidderRequestId;if(null!=n||null!=r){var i=e().flatMap((function(e){return e.getBidRequests()}));return null!=r&&(i=i.filter((function(e){return e.bidderRequestId===r}))),null==n?i[0]:i.find((function(e){return e.bids&&null!=e.bids.find((function(e){return e.bidId===n}))}))}},getBidRequest:function(t){var n=t.requestId;if(null!=n)return e().flatMap((function(e){return e.getBidRequests()})).flatMap((function(e){return e.bids})).find((function(e){return e&&e.bidId===n}))}})}var s=n(251),d=n(9218),c=function(){var e=[],t={addWinningBid:function(t){var n=(0,d.Bf)(t.metrics);n.checkpoint("bidWon"),n.timeBetween("auctionEnd","bidWon","render.pending"),n.timeBetween("requestBids","bidWon","render.e2e");var i=(0,o.sE)(e,(function(e){return e.getAuctionId()===t.auctionId}));i?(t.status=s.UE.fe,i.addWinningBid(t)):(0,r.yN)("Auction not found when adding winning bid")},getAllWinningBids:function(){return e.map((function(e){return e.getWinningBids()})).reduce(r.xH,[])},getBidsRequested:function(){return e.map((function(e){return e.getBidRequests()})).reduce(r.xH,[])},getNoBids:function(){return e.map((function(e){return e.getNoBids()})).reduce(r.xH,[])},getBidsReceived:function(){return e.map((function(e){if(e.getAuctionStatus()===i.mv)return e.getBidsReceived()})).reduce(r.xH,[]).filter((function(e){return e}))},getAllBidsForAdUnitCode:function(t){return e.map((function(e){return e.getBidsReceived()})).reduce(r.xH,[]).filter((function(e){return e&&e.adUnitCode===t}))},getAdUnits:function(){return e.map((function(e){return e.getAdUnits()})).reduce(r.xH,[])},getAdUnitCodes:function(){return e.map((function(e){return e.getAdUnitCodes()})).reduce(r.xH,[]).filter(r.tT)},createAuction:function(t){var n=(0,i.vO)(t);return function(t){e.push(t)}(n),n},findBidByAdId:function(t){return(0,o.sE)(e.map((function(e){return e.getBidsReceived()})).reduce(r.xH,[]),(function(e){return e.adId===t}))},getStandardBidderAdServerTargeting:function(){return(0,i.LX)()[s.k2.xn]},setStatusForBids:function(n,r){var i=t.findBidByAdId(n);if(i&&(i.status=r),i&&r===s.UE.CK){var a=(0,o.sE)(e,(function(e){return e.getAuctionId()===i.auctionId}));a&&a.setBidTargeting(i)}},getLastAuctionId:function(){return e.length&&e[e.length-1].getAuctionId()},clearAllAuctions:function(){e.length=0}};return t.index=new a((function(){return e})),t}()},8962:(e,t,n)=>{"use strict";n.d(t,{S:()=>p});var r=n(6172),i=n(1976),o=n(5446),a=n(303),s=n(6775),d=n(251);function c(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var l=new WeakSet;function u(e){return null==e?this.defaultScope:e}var p=new(function(){function e(t,n){var i,o;(0,r.Z)(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(i=this,o=l),o.add(i),this.getSettings=t,this.defaultScope=n}return(0,i.Z)(e,[{key:"get",value:function(e,t){var n=this.getOwn(e,t);return void 0===n&&(n=this.getOwn(null,t)),n}},{key:"getOwn",value:function(e,t){return e=c(this,l,u).call(this,e),(0,o.Z)(this.getSettings(),"".concat(e,".").concat(t))}},{key:"getScopes",value:function(){var e=this;return Object.keys(this.getSettings()).filter((function(t){return t!==e.defaultScope}))}},{key:"settingsFor",value:function(e){return(0,a.Ee)({},this.ownSettingsFor(null),this.ownSettingsFor(e))}},{key:"ownSettingsFor",value:function(e){return e=c(this,l,u).call(this,e),this.getSettings()[e]||{}}}]),e}())((function(){return(0,s.R)().bidderSettings||{}}),d.k2.zF)},3776:(e,t,n)=>{"use strict";n.d(t,{m:()=>o});var r=n(303);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.src,i=void 0===n?"client":n,o=t.bidder,a=void 0===o?"":o,s=t.bidId,d=t.transactionId,c=t.auctionId,l=i,u=e||0;this.bidderCode=a,this.width=0,this.height=0,this.statusMessage=function(){switch(u){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}(),this.adId=(0,r._d)(),this.requestId=s,this.transactionId=d,this.auctionId=c,this.mediaType="banner",this.source=l,this.getStatusCode=function(){return u},this.getSize=function(){return this.width+"x"+this.height},this.getIdentifiers=function(){return{src:this.source,bidder:this.bidderCode,bidId:this.requestId,transactionId:this.transactionId,auctionId:this.auctionId}}}function o(e,t){return new i(e,t)}},7533:(e,t,n)=>{"use strict";n.d(t,{FD:()=>f,vc:()=>v});var r=n(1909),i=n(9267),o=n(1785),a=n(5483),s=n(388),d=n(303),c=n(5446),l=n(251);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p="TRUE"===(0,d.rD)(l.f).toUpperCase(),f="random",h={};h[f]=!0,h.fixed=!0;var g=f,m={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},v=function(){var e,t,n,l=[],f=null;function v(){function r(e){return c[e].val}function i(e,t){c[e].val=t}e={};var c={publisherDomain:{set:function(e){null!=e&&(0,d.yN)("publisherDomain is deprecated and has no effect since v7 - use pageUrl instead"),i("publisherDomain",e)}},priceGranularity:{val:m.MEDIUM,set:function(e){f(e)&&("string"==typeof e?i("priceGranularity",u(e)?e:m.MEDIUM):(0,d.PO)(e)&&(i("customPriceBucket",e),i("priceGranularity",m.CUSTOM),(0,d.ji)("Using custom price granularity")))}},customPriceBucket:{val:{},set:function(){}},mediaTypePriceGranularity:{val:{},set:function(e){null!=e&&i("mediaTypePriceGranularity",Object.keys(e).reduce((function(t,n){return f(e[n])?"string"==typeof e?t[n]=u(e[n])?e[n]:r("priceGranularity"):(0,d.PO)(e)&&(t[n]=e[n],(0,d.ji)("Using custom price granularity for ".concat(n))):(0,d.yN)("Invalid price granularity for media type: ".concat(n)),t}),{}))}},bidderSequence:{val:g,set:function(e){h[e]?i("bidderSequence",e):(0,d.yN)("Invalid order: ".concat(e,". Bidder Sequence was not set."))}},auctionOptions:{val:{},set:function(e){(function(e){if(!(0,d.PO)(e))return(0,d.yN)("Auction Options must be an object"),!1;for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("secondaryBidders"!==r&&"suppressStaleRender"!==r)return(0,d.yN)("Auction Options given an incorrect param: ".concat(r)),!1;if("secondaryBidders"===r){if(!(0,d.kJ)(e[r]))return(0,d.yN)("Auction Options ".concat(r," must be of type Array")),!1;if(!e[r].every(d.d8))return(0,d.yN)("Auction Options ".concat(r," must be only string")),!1}else if("suppressStaleRender"===r&&!(0,d.jn)(e[r]))return(0,d.yN)("Auction Options ".concat(r," must be of type boolean")),!1}return!0})(e)&&i("auctionOptions",e)}}},l={debug:p,bidderTimeout:3e3,enableSendAllBids:!0,useBidCache:!1,deviceAccess:!0,timeoutBuffer:400,disableAjaxTimeout:!1,maxNestedIframes:10};function u(e){return(0,s.sE)(Object.keys(m),(function(t){return e===m[t]}))}function f(e){if(!e)return(0,d.H)("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)u(e)||(0,d.yN)("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if((0,d.PO)(e)&&!(0,a.t)(e))return(0,d.H)("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}Object.defineProperties(l,Object.fromEntries(Object.entries(c).map((function(e){var t=(0,o.Z)(e,2),n=t[0],a=t[1];return[n,Object.assign({get:r.bind(null,n),set:i.bind(null,n),enumerable:!0},a)]})))),t&&P(Object.keys(t).reduce((function(e,n){return t[n]!==l[n]&&(e[n]=l[n]||{}),e}),{})),t=l,n={}}function y(){if(f&&n&&(0,d.PO)(n[f])){var e=n[f],r=new Set(Object.keys(t).concat(Object.keys(e)));return(0,s.Oc)(r).reduce((function(n,r){return void 0===e[r]?n[r]=t[r]:void 0===t[r]?n[r]=e[r]:(0,d.PO)(e[r])?n[r]=(0,d.Ee)({},t[r],e[r]):n[r]=e[r],n}),{})}return Object.assign({},t)}var b=[y,function(){var e=y();return Object.defineProperty(e,"ortb2",{get:function(){throw new Error("invalid access to 'orbt2' config - use request parameters instead")}}),e}].map((function(e){return function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){var t=arguments.length<=0?void 0:arguments[0];return t?(0,c.Z)(e(),t):y()}return A.apply(void 0,arguments)}})),_=(0,o.Z)(b,2),w=_[0],T=_[1],I=[T,w].map((function(e){return function(){var t=e.apply(void 0,arguments);return t&&"object"===(0,i.Z)(t)&&(t=(0,d.I8)(t)),t}})),S=(0,o.Z)(I,2),k=S[0],C=S[1];function E(n){if((0,d.PO)(n)){var r=Object.keys(n),i={};r.forEach((function(r){var o=n[r];(0,d.PO)(e[r])&&(0,d.PO)(o)&&(o=Object.assign({},e[r],o));try{i[r]=t[r]=o}catch(e){(0,d.yN)("Cannot set config for property ".concat(r," : "),e)}})),P(i)}else(0,d.H)("setConfig options must be an object")}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t;if("string"!=typeof e&&(i=e,e="*",n=t||{}),"function"==typeof i){var o={topic:e,callback:i};return l.push(o),n.init&&i("*"===e?T():(0,r.Z)({},e,T(e))),function(){l.splice(l.indexOf(o),1)}}(0,d.H)("listener must be a function")}function P(e){var t=Object.keys(e);l.filter((function(e){return(0,s.q9)(t,e.topic)})).forEach((function(t){t.callback((0,r.Z)({},t.topic,e[t.topic]))})),l.filter((function(e){return"*"===e.topic})).forEach((function(t){return t.callback(e)}))}function x(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{!function(e){if(!(0,d.PO)(e))throw"setBidderConfig bidder options must be an object";if(!Array.isArray(e.bidders)||!e.bidders.length)throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!(0,d.PO)(e.config))throw"setBidderConfig bidder options must contain a config object"}(e),e.bidders.forEach((function(r){n[r]||(n[r]={}),Object.keys(e.config).forEach((function(i){var o=e.config[i];if((0,d.PO)(o)){var a=t?d.Ee:Object.assign;n[r][i]=a({},n[r][i]||{},o)}else n[r][i]=o}))}))}catch(e){(0,d.H)(e)}}function O(e,t){f=e;try{return t()}finally{D()}}function D(){f=null}return v(),{getCurrentBidder:function(){return f},resetBidder:D,getConfig:T,getAnyConfig:w,readConfig:k,readAnyConfig:C,setConfig:E,mergeConfig:function(e){if((0,d.PO)(e)){var t=(0,d.Ee)(y(),e);return E(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)),t}(0,d.H)("mergeConfig input must be an object")},setDefaults:function(n){(0,d.PO)(e)?(Object.assign(e,n),Object.assign(t,n)):(0,d.H)("defaults must be an object")},resetConfig:v,runWithBidder:O,callbackWithBidder:function(e){return function(t){return function(){if("function"==typeof t){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return O(e,d.ak.call.apply(d.ak,[t,this].concat(r)))}(0,d.yN)("config.callbackWithBidder callback is not a function")}}},setBidderConfig:x,getBidderConfig:function(){return n},mergeBidderConfig:function(e){return x(e,!0)}}}()},8048:(e,t,n)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}n.d(t,{qh:()=>D,iK:()=>x,$e:()=>O,LO:()=>P,$P:()=>y});var o=n(9267);function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}var s=n(6172),d=n(1976),c=n(1909),l=n(266),u=n(5248),p=n(303),f=n(8595);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===(0,o.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function g(e,t,n){m(e,t),t.set(e,n)}function m(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var y=Object.freeze({}),b=new WeakMap,_=new WeakMap,w=new WeakMap,T=new WeakMap,I=new WeakSet,S=function(){function e(){var t;(0,s.Z)(this,e),m(this,t=I),t.add(this),g(this,b,{writable:!0,value:void 0}),g(this,_,{writable:!0,value:void 0}),g(this,w,{writable:!0,value:void 0}),g(this,T,{writable:!0,value:void 0}),(0,c.Z)(this,"generatedTime",void 0),this.reset()}return(0,d.Z)(e,[{key:"reset",value:function(){(0,u.Z)(this,w,(0,f.P)()),(0,u.Z)(this,b,!1),(0,u.Z)(this,_,null),(0,u.Z)(this,T,!1),this.generatedTime=null}},{key:"enable",value:function(){(0,u.Z)(this,b,!0)}},{key:"enabled",get:function(){return(0,l.Z)(this,b)}},{key:"ready",get:function(){return(0,l.Z)(this,T)}},{key:"promise",get:function(){return(0,l.Z)(this,T)?f.Z.resolve((0,l.Z)(this,_)):((0,l.Z)(this,b)||v(this,I,k).call(this,null),(0,l.Z)(this,w).promise)}},{key:"setConsentData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,p.AB)();this.generatedTime=t,v(this,I,k).call(this,e)}},{key:"getConsentData",value:function(){return(0,l.Z)(this,_)}}]),e}();function k(e){(0,u.Z)(this,T,!0),(0,u.Z)(this,_,e),(0,l.Z)(this,w).resolve(e)}var C,E,A,P=function(e){i(n,e);var t=h(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"getConsentMeta",value:function(){var e=this.getConsentData();if(e&&this.generatedTime)return{usp:e,generatedAt:this.generatedTime}}}]),n}(S),x=function(e){i(n,e);var t=h(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"getConsentMeta",value:function(){var e=this.getConsentData();if(e&&e.vendorData&&this.generatedTime)return{gdprApplies:e.gdprApplies,consentStringSize:(0,p.d8)(e.vendorData.tcString)?e.vendorData.tcString.length:0,generatedAt:this.generatedTime,apiVersion:e.apiVersion}}}]),n}(S),O=function(e){i(n,e);var t=h(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"getConsentMeta",value:function(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}}]),n}(S),D=(C={},E={},A={},{register:function(e,t,n){n&&((C[t]=C[t]||{})[e]=n,E.hasOwnProperty(t)?E[t]!==n&&(E[t]=A):E[t]=n)},get:function(e){var t={modules:C[e]||{}};return E.hasOwnProperty(e)&&E[e]!==A&&(t.gvlid=E[e]),t}})},5483:(e,t,n)=>{"use strict";n.d(t,{D:()=>p,t:()=>h});var r=n(388),i=n(303),o=n(7533),a=2,s={buckets:[{max:5,increment:.5}]},d={buckets:[{max:20,increment:.1}]},c={buckets:[{max:20,increment:.01}]},l={buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:20,increment:.5}]},u={buckets:[{max:5,increment:.05},{max:10,increment:.1},{max:20,increment:.5}]};function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=parseFloat(e);return isNaN(r)&&(r=""),{low:""===r?"":f(e,s,n),med:""===r?"":f(e,d,n),high:""===r?"":f(e,c,n),auto:""===r?"":f(e,u,n),dense:""===r?"":f(e,l,n),custom:""===r?"":f(e,t,n)}}function f(e,t,n){var s="";if(!h(t))return s;var d=t.buckets.reduce((function(e,t){return e.max>t.max?e:t}),{max:0}),c=0,l=(0,r.sE)(t.buckets,(function(t){if(e>d.max*n){var r=t.precision;void 0===r&&(r=a),s=(t.max*n).toFixed(r)}else{if(e<=t.max*n&&e>=c*n)return t.min=c,t;c=t.max}}));return l&&(s=function(e,t,n){var r=void 0!==t.precision?t.precision:a,s=t.increment*n,d=t.min*n,c=Math.floor,l=o.vc.getConfig("cpmRoundingFunction");"function"==typeof l&&(c=l);var u,p,f=Math.pow(10,r+2),h=(e*f-d*f)/(s*f);try{u=c(h)*s+d}catch(e){p=!0}return(p||"number"!=typeof u)&&((0,i.yN)("Invalid rounding function passed in config"),u=Math.floor(h)*s+d),(u=Number(u.toFixed(10))).toFixed(r)}(e,l,n)),s}function h(e){if((0,i.xb)(e)||!e.buckets||!Array.isArray(e.buckets))return!1;var t=!0;return e.buckets.forEach((function(e){e.max&&e.increment||(t=!1)})),t}},5847:(e,t,n)=>{"use strict";n.d(t,{S1:()=>p,j8:()=>h,on:()=>u,vw:()=>f});var r=n(303),i=n(251),o=Array.prototype.slice,a=Array.prototype.push,s=r.HA(i.FP,(function(e){return e})),d=i.aI,c=[],l=function(){var e={},t={on:function(t,n,i){if(function(e){return r.r3(s,e)}(t)){var o=e[t]||{que:[]};i?(o[i]=o[i]||{que:[]},o[i].que.push(n)):o.que.push(n),e[t]=o}else r.H("Wrong event name : "+t+" Valid event names :"+s)},emit:function(t){!function(t,n){r.ji("Emitting event for: "+t);var i=n[0]||{},o=i[d[t]],s=e[t]||{que:[]},l=r.HA(s,(function(e,t){return t})),u=[];c.push({eventType:t,args:i,id:o,elapsedTime:r.bd()}),o&&r.r3(l,o)&&a.apply(u,s[o].que),a.apply(u,s.que),r.yi(u,(function(e){if(e)try{e.apply(null,n)}catch(e){r.H("Error executing handler:","events.js",e)}}))}(t,o.call(arguments,1))},off:function(t,n,i){var o=e[t];r.xb(o)||r.xb(o.que)&&r.xb(o[i])||i&&(r.xb(o[i])||r.xb(o[i].que))||(i?r.yi(o[i].que,(function(e){var t=o[i].que;e===n&&t.splice(t.indexOf(e),1)})):r.yi(o.que,(function(e){var t=o.que;e===n&&t.splice(t.indexOf(e),1)})),e[t]=o)},get:function(){return e},addEvents:function(e){s=s.concat(e)},getEvents:function(){var e=[];return r.yi(c,(function(t){var n=Object.assign({},t);e.push(n)})),e}};return t}();r.u2(l.emit.bind(l));var u=l.on,p=l.off,f=(l.get,l.getEvents),h=l.emit;l.addEvents},8717:(e,t,n)=>{"use strict";n.d(t,{Bx:()=>f,Cd:()=>c,IF:()=>h,bA:()=>p,v5:()=>l,z3:()=>s});var r=n(3014),i=n(1242),o=n.n(i),a=n(8595),s=o()({ready:o().SYNC|o().ASYNC|o().QUEUE}),d=(0,a.P)();s.ready=function(){var e=s.ready;return function(){try{return e.apply(s,arguments)}finally{d.resolve()}}}();var c=d.promise,l=s.get,u={};function p(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).postInstallAllowed,i=void 0!==n&&n;s("async",(function(n){n.forEach((function(e){return t.apply(void 0,(0,r.Z)(e))})),i&&(u[e]=t)}),e)([])}function f(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=u[e];if(i)return i.apply(void 0,n);l(e).before((function(e,t){t.push(n),e(t)}))}function h(e,t){return Object.defineProperties(t,Object.fromEntries(["before","after","getHooks","removeAll"].map((function(t){return[t,{get:function(){return e[t]}}]})))),t}},2339:(e,t,n)=>{"use strict";n.d(t,{B5:()=>r,Mk:()=>o,Oh:()=>a,pX:()=>i});var r="native",i="video",o="banner",a="adpod"},3660:(e,t,n)=>{"use strict";n.d(t,{Fb:()=>P,JL:()=>U,Sg:()=>m,Ur:()=>R,e6:()=>D,eK:()=>N,lY:()=>B,r4:()=>O,xc:()=>v,zq:()=>V});var r=n(3014),i=n(1785),o=n(1909),a=n(5446),s=n(303),d=n(388),c=n(6370),l=n(251),u=n(2339);function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=[],v=Object.keys(l.FY).map((function(e){return l.FY[e]})),y={image:{ortb:{ver:"1.2",assets:[{required:1,id:1,img:{type:3,wmin:100,hmin:100}},{required:1,id:2,title:{len:140}},{required:1,id:3,data:{type:1}},{required:0,id:4,data:{type:2}},{required:0,id:5,img:{type:1,wmin:20,hmin:20}}]},image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}}},b=l.s$,_=l.oF,w=l.V1,T=l.zA,I=l.FY,S=z(w),k=z(b),C={img:1,js:2,1:"img",2:"js"},E={impression:1,"viewable-mrc50":2,"viewable-mrc100":3,"viewable-video50":4};function A(e){if(e&&e.type&&(!(!(t=e.type)||!(0,d.q9)(Object.keys(y),t))||((0,s.H)("".concat(t," nativeParam is not supported")),!1))&&(e=y[e.type]),!e||!e.ortb||x(e.ortb))return e;var t}function P(e){e.forEach((function(e){var t=e.nativeParams||(0,a.Z)(e,"mediaTypes.native");t&&(e.nativeParams=A(t)),e.nativeParams&&(e.nativeOrtbRequest=e.nativeParams.ortb||function(e){if(e||(0,s.PO)(e)){var t={ver:"1.2",assets:[]};for(var n in e)if(!T.includes(n))if(I.hasOwnProperty(n)){var r=e[n],i=0;r.required&&(0,s.jn)(r.required)&&(i=Number(r.required));var o={id:t.assets.length,required:i};if(n in w)o.data={type:b[w[n]]},r.len&&(o.data.len=r.len);else if("icon"===n||"image"===n){if(o.img={type:"icon"===n?_.ICON:_.MAIN},r.aspect_ratios)if((0,s.kJ)(r.aspect_ratios))if(r.aspect_ratios.length){var a=r.aspect_ratios[0],d=a.min_width,c=a.min_height;(0,s.U)(d)&&(0,s.U)(c)?(o.img.wmin=d,o.img.hmin=c):(0,s.H)("image.aspect_ratios min_width or min_height are invalid: ",d,c);var l=r.aspect_ratios.filter((function(e){return e.ratio_width&&e.ratio_height})).map((function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)}));l.length>0&&(o.img.ext={aspectratios:l})}else(0,s.H)("image.aspect_ratios was passed, but it's empty:",r.aspect_ratios);else(0,s.H)("image.aspect_ratios was passed, but it's not a an array:",r.aspect_ratios);r.sizes&&(2===r.sizes.length&&(0,s.U)(r.sizes[0])&&(0,s.U)(r.sizes[1])?(o.img.w=r.sizes[0],o.img.h=r.sizes[1],delete o.img.hmin,delete o.img.wmin):(0,s.H)("image.sizes was passed, but its value is not an array of integers:",r.sizes))}else"title"===n?o.title={len:r.len||140}:"ext"===n&&(o.ext=r,delete o.required);t.assets.push(o)}else(0,s.H)("Unrecognized native asset code: ".concat(n,". Asset will be ignored."));return t}(0,s.H)("Native assets object is empty or not an object: ",e)}(e.nativeParams))}))}function x(e){var t=e.assets;if(!Array.isArray(t)||0===t.length)return(0,s.H)("assets in mediaTypes.native.ortb is not an array, or it's empty. Assets: ",t),!1;var n=t.map((function(e){return e.id}));return t.length!==new Set(n).size||n.some((function(e){return e!==parseInt(e,10)}))?((0,s.H)("each asset object must have 'id' property, it must be unique and it must be an integer"),!1):e.hasOwnProperty("eventtrackers")&&!Array.isArray(e.eventtrackers)?((0,s.H)("ortb.eventtrackers is not an array. Eventtrackers: ",e.eventtrackers),!1):t.every((function(e){return function(e){if(!(0,s.PO)(e))return(0,s.H)("asset must be an object. Provided asset: ",e),!1;if(e.img){if(!(0,s.hj)(e.img.w)&&!(0,s.hj)(e.img.wmin))return(0,s.H)("for img asset there must be 'w' or 'wmin' property"),!1;if(!(0,s.hj)(e.img.h)&&!(0,s.hj)(e.img.hmin))return(0,s.H)("for img asset there must be 'h' or 'hmin' property"),!1}else if(e.title){if(!(0,s.hj)(e.title.len))return(0,s.H)("for title asset there must be 'len' property defined"),!1}else if(e.data){if(!(0,s.hj)(e.data.type))return(0,s.H)("for data asset 'type' property must be a number"),!1}else if(e.video&&!(Array.isArray(e.video.mimes)&&Array.isArray(e.video.protocols)&&(0,s.hj)(e.video.minduration)&&(0,s.hj)(e.video.maxduration)))return(0,s.H)("video asset is not properly configured"),!1;return!0}(e)}))}function O(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,r=(void 0===n?c.K.index:n).getAdUnit(e);if(!r)return!1;var i=r.nativeOrtbRequest;return function(e,t){if(!(0,a.Z)(e,"link.url"))return(0,s.H)("native response doesn't have 'link' property. Ortb response: ",e),!1;var n=t.assets.filter((function(e){return 1===e.required})).map((function(e){return e.id})),r=e.assets.map((function(e){return e.id})),i=n.every((function(e){return(0,d.q9)(r,e)}));return i||(0,s.H)("didn't receive a bid with all required assets. Required ids: ".concat(n,", but received ids in response: ").concat(r)),i}((null===(t=e.native)||void 0===t?void 0:t.ortb)||F(e.native,i),i)}function D(e,t){var n=t.native.ortb||q(t.native);return"click"===e.action?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).fetchURL,r=void 0===n?s.hq:n;if(t){var i,o=(e.assets||[]).filter((function(e){return e.link})).reduce((function(e,t){return e[t.id]=t.link,e}),{}),a=(null===(i=e.link)||void 0===i?void 0:i.clicktrackers)||[],d=o[t],c=a;d&&(c=d.clicktrackers||[]),c.forEach((function(e){return r(e)}))}else{var l;((null===(l=e.link)||void 0===l?void 0:l.clicktrackers)||[]).forEach((function(e){return r(e)}))}}(n,null==e?void 0:e.assetId):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.runMarkup,r=void 0===n?function(e){return(0,s.$8)(e)}:n,i=t.fetchURL,o=void 0===i?s.hq:i,a=(e.eventtrackers||[]).filter((function(e){return e.event===E.impression})).reduce((function(e,t){return C.hasOwnProperty(t.method)&&e[C[t.method]].push(t.url),e}),{img:[],js:[]}),d=a.img,c=a.js;e.imptrackers&&(d=d.concat(e.imptrackers)),d.forEach((function(e){return o(e)})),c=c.map((function(e){return'<script async src="'.concat(e,'"><\/script>')})),e.jstracker&&(c=c.concat([e.jstracker])),c.length&&r(c.join("\n"))}(n),e.action}function R(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,n=void 0===t?c.K.index:t,r={},i=n.getAdUnit(e);(0,a.Z)(i,"nativeParams.rendererUrl")?e.native.rendererUrl=L(i.nativeParams.rendererUrl):(0,a.Z)(i,"nativeParams.adTemplate")&&(e.native.adTemplate=L(i.nativeParams.adTemplate));var o=!1!==(0,a.Z)(i,"nativeParams.sendTargetingKeys"),s=function(e){var t={};return(0,a.Z)(e,"nativeParams.ext")&&Object.keys(e.nativeParams.ext).forEach((function(e){t[e]="hb_native_".concat(e)})),g(g({},l.FY),t)}(i),d=g(g({},e.native),e.native.ext);return delete d.ext,Object.keys(d).forEach((function(t){var n=s[t],d=L(e.native[t])||L((0,a.Z)(e,"native.ext.".concat(t)));if("adTemplate"!==t&&n&&d){var c=(0,a.Z)(i,"nativeParams.".concat(t,".sendId"));"boolean"!=typeof c&&(c=(0,a.Z)(i,"nativeParams.ext.".concat(t,".sendId"))),c&&(d="".concat(n,":").concat(e.adId));var l=(0,a.Z)(i,"nativeParams.".concat(t,".sendTargetingKeys"));"boolean"!=typeof l&&(l=(0,a.Z)(i,"nativeParams.ext.".concat(t,".sendTargetingKeys"))),("boolean"==typeof l?l:o)&&(r[n]=d)}})),r}function M(e,t,n){var r,i,o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).index,a=void 0===o?c.K.index:o,s={message:"assetResponse",adId:e.adId},d=a.getAdUnit(t),u=t.native;return t.native.ortb?s.ortb=t.native.ortb:null!==(r=d.mediaTypes)&&void 0!==r&&null!==(i=r.native)&&void 0!==i&&i.ortb&&(s.ortb=F(t.native,d.nativeOrtbRequest)),s.assets=[],(null==n?Object.keys(u):n).forEach((function(e){if("adTemplate"===e&&u[e])s.adTemplate=L(u[e]);else if("rendererUrl"===e&&u[e])s.rendererUrl=L(u[e]);else if("ext"===e)Object.keys(u[e]).forEach((function(t){if(u[e][t]){var n=L(u[e][t]);s.assets.push({key:t,value:n})}}));else if(u[e]&&l.FY.hasOwnProperty(e)){var t=L(u[e]);s.assets.push({key:e,value:t})}})),s}function N(e,t){var n=e.assets.map((function(e){return(0,s.V9)(l.FY,e)}));return M(e,t,n)}function U(e,t){return M(e,t,null)}function L(e){return(null==e?void 0:e.url)||e}function j(e){if(x(e)){var t,n={},r=p(e.assets);try{var i=function(){var e=t.value;if(e.title){var r={required:!!e.required&&Boolean(e.required),len:e.title.len};n.title=r}else if(e.img){var i={required:!!e.required&&Boolean(e.required)};e.img.w&&e.img.h?i.sizes=[e.img.w,e.img.h]:e.img.wmin&&e.img.hmin&&(i.aspect_ratios={min_width:e.img.wmin,min_height:e.img.hmin,ratio_width:e.img.wmin,ratio_height:e.img.hmin}),e.img.type===_.MAIN?n.image=i:n.icon=i}else if(e.data){var o=Object.keys(b).find((function(t){return b[t]===e.data.type})),a=Object.keys(w).find((function(e){return w[e]===o}));n[a]={required:!!e.required&&Boolean(e.required)},e.data.len&&(n[a].len=e.data.len)}};for(r.s();!(t=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}return n}}function B(e){if(!e||!(0,s.kJ)(e))return e;if(!e.some((function(e){var t;return null===(t=((null==e?void 0:e.mediaTypes)||{})[u.B5])||void 0===t?void 0:t.ortb})))return e;var t,n=(0,s.I8)(e),r=p(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.mediaTypes&&i.mediaTypes[u.B5]&&i.mediaTypes[u.B5].ortb&&(i.mediaTypes[u.B5]=Object.assign((0,s.ei)(i.mediaTypes[u.B5],T),j(i.mediaTypes[u.B5].ortb)),i.nativeParams=A(i.mediaTypes[u.B5]))}}catch(e){r.e(e)}finally{r.f()}return n}function q(e){var t={link:{},eventtrackers:[]};return Object.entries(e).forEach((function(e){var n=(0,i.Z)(e,2),r=n[0],o=n[1];switch(r){case"clickUrl":t.link.url=o;break;case"clickTrackers":t.link.clicktrackers=Array.isArray(o)?o:[o];break;case"impressionTrackers":(Array.isArray(o)?o:[o]).forEach((function(e){t.eventtrackers.push({event:E.impression,method:C.img,url:e})}));break;case"javascriptTrackers":t.jstracker=Array.isArray(o)?o.join(""):o}})),t}function F(e,t){var n=g(g({},q(e)),{},{assets:[]});function r(e,r){var i=t.assets.find(e);null!=i&&(r(i=(0,s.I8)(i)),n.assets.push(i))}return Object.keys(e).filter((function(t){return!!e[t]})).forEach((function(t){var n=L(e[t]);switch(t){case"title":r((function(e){return null!=e.title}),(function(e){e.title={text:n}}));break;case"image":case"icon":var i="image"===t?_.MAIN:_.ICON;r((function(e){return null!=e.img&&e.img.type===i}),(function(e){e.img={url:n}}));break;default:t in w&&r((function(e){return null!=e.data&&e.data.type===b[w[t]]}),(function(e){e.data={value:n}}))}})),n}function V(e,t){var n={},i=(null==t?void 0:t.assets)||[];n.clickUrl=e.link.url,n.privacyLink=e.privacy;var o,a=p((null==e?void 0:e.assets)||[]);try{var s=function(){var e=o.value,t=i.find((function(t){return e.id===t.id}));e.title?n.title=e.title.text:e.img?n[t.img.type===_.MAIN?"image":"icon"]={url:e.img.url,width:e.img.w,height:e.img.h}:e.data&&(n[S[k[t.data.type]]]=e.data.value)};for(a.s();!(o=a.n()).done;)s()}catch(e){a.e(e)}finally{a.f()}n.impressionTrackers=[];var d,c=[];null!=t&&t.imptrackers&&(d=n.impressionTrackers).push.apply(d,(0,r.Z)(t.imptrackers));var l,u=p((null==e?void 0:e.eventtrackers)||[]);try{for(u.s();!(l=u.n()).done;){var f=l.value;f.event===E.impression&&f.method===C.img&&n.impressionTrackers.push(f.url),f.event===E.impression&&f.method===C.js&&c.push(f.url)}}catch(e){u.e(e)}finally{u.f()}return c=c.map((function(e){return'<script async src="'.concat(e,'"><\/script>')})),null!=e&&e.jstracker&&c.push(e.jstracker),c.length&&(n.javascriptTrackers=c.join("\n")),n}function z(e){var t={};for(var n in e)t[e[n]]=n;return t}},388:(e,t,n)=>{"use strict";function r(e,t,n){return e&&e.includes(t,n)||!1}function i(){return Array.from.apply(Array,arguments)}function o(e,t,n){return e&&e.find(t,n)}n.d(t,{Oc:()=>i,q9:()=>r,sE:()=>o})},6775:(e,t,n)=>{"use strict";n.d(t,{R:()=>o,z:()=>a});var r=window,i=r.pbjs=r.pbjs||{};function o(){return i}function a(e){i.installedModules.push(e)}i.cmd=i.cmd||[],i.que=i.que||[],r===window&&(r._pbjsGlobals=r._pbjsGlobals||[],r._pbjsGlobals.push("pbjs"))},3821:(e,t,n)=>{"use strict";n.d(t,{hh:()=>a,nH:()=>c});var r=n(7533),i=n(303);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e)return e;if(/\w+:\/\//.exec(e))return e;var n=t.location.protocol;try{n=t.top.location.protocol}catch(e){}return/^\/\//.exec(e)?n+e:"".concat(n,"//").concat(e)}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.noLeadingWww,r=void 0!==n&&n,i=t.noPort,a=void 0!==i&&i;try{e=new URL(o(e))}catch(e){return}return e=a?e.hostname:e.host,r&&e.startsWith("www.")&&(e=e.substring(4)),e}function s(e){try{var t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return null}var d,c=function(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return i.top!==i?e:function(){var o=s(i.document),a=i.location.href;return t===o&&a===n||(t=o,n=a,r=e()),r}}((d=window,function(){var e,t,n,c,l=[],u=function(e){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}(d),p=r.vc.getConfig("maxNestedIframes"),f=!1,h=0,g=!1,m=!1,v=!1;do{var y=e,b=m,_=void 0,w=!1,T=null;m=!1,e=e?e.parent:d;try{_=e.location.href||null}catch(e){w=!0}if(w)if(b){var I=y.context;try{t=T=I.sourceUrl,v=!0,g=!0,e===d.top&&(f=!0),I.canonicalUrl&&(n=I.canonicalUrl)}catch(e){}}else{(0,i.yN)("Trying to access cross domain iframe. Continuing without referrer and location");try{var S=y.document.referrer;S&&(T=S,e===d.top&&(f=!0))}catch(e){}!T&&u&&u[h-1]&&(T=u[h-1],e===d.top&&(v=!0)),T&&!g&&(t=T)}else{if(_&&(t=T=_,g=!1,e===d.top)){f=!0;var k=s(e.document);k&&(n=k)}e.context&&e.context.sourceUrl&&(m=!0)}l.push(T),h++}while(e!==d.top&&h<p);l.reverse();try{c=d.top.document.referrer}catch(e){}var C=f||v?t:null,E=r.vc.getConfig("pageUrl")||n||null,A=r.vc.getConfig("pageUrl")||C||o(E,d);return C&&C.indexOf("?")>-1&&-1===A.indexOf("?")&&(A="".concat(A).concat(C.substring(C.indexOf("?")))),{reachedTop:f,isAmp:g,numIframes:h-1,stack:l,topmostLocation:t||null,location:C,canonicalUrl:E,page:A,domain:a(A)||null,ref:c||null,legacy:{reachedTop:f,isAmp:g,numIframes:h-1,stack:l,referer:t||null,canonicalUrl:E}}}))},2814:(e,t,n)=>{"use strict";n.d(t,{Dp:()=>s,Ld:()=>c,c$:()=>d,df:()=>p,eA:()=>f});var r=n(8717),i=n(303),o=n(8962),a=n(6737),s="html5",d="cookie",c=[];function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleName,n=e.moduleType,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).bidderSettings,l=void 0===r?o.S:r;function p(e,r){var o;return function(e){if(n!==a.UL)return!0;var r=l.get(t,"storageAllowed");return r&&!0!==r?Array.isArray(r)?r.some((function(t){return t===e})):r===e:!!r}(r)?(u(n,t,{hasEnforcementHook:!1},(function(t){if(t&&t.hasEnforcementHook)o=e(t);else{var n={hasEnforcementHook:!1,valid:(0,i.wn)()};o=e(n)}})),o):((0,i.PN)("bidderSettings denied access to device storage for bidder '".concat(t,"'")),e({valid:!1}))}function f(e,t,n){if(!n||"function"!=typeof n)return p(e,t);c.push((function(){var r=p(e,t);n(r)}))}var h=function(e){return f((function(e){if(e&&e.valid)try{return!!window.localStorage}catch(e){(0,i.H)("Local storage api disabled")}return!1}),s,e)};return{setCookie:function(e,t,n,r,i,o){return f((function(o){if(o&&o.valid){var a=i&&""!==i?" ;domain=".concat(encodeURIComponent(i)):"",s=n&&""!==n?" ;expires=".concat(n):"",d=null!=r&&"none"==r.toLowerCase()?"; Secure":"";document.cookie="".concat(e,"=").concat(encodeURIComponent(t)).concat(s,"; path=/").concat(a).concat(r?"; SameSite=".concat(r):"").concat(d)}}),d,o)},getCookie:function(e,t){return f((function(t){if(t&&t.valid){var n=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return n?decodeURIComponent(n[2]):null}return null}),d,t)},localStorageIsEnabled:function(e){return f((function(e){if(e&&e.valid)try{return localStorage.setItem("prebid.cookieTest","1"),"1"===localStorage.getItem("prebid.cookieTest")}catch(e){}finally{try{localStorage.removeItem("prebid.cookieTest")}catch(e){}}return!1}),s,e)},cookiesAreEnabled:function(e){return f((function(e){return!(!e||!e.valid)&&(0,i.IG)()}),d,e)},setDataInLocalStorage:function(e,t,n){return f((function(n){n&&n.valid&&h()&&window.localStorage.setItem(e,t)}),s,n)},getDataFromLocalStorage:function(e,t){return f((function(t){return t&&t.valid&&h()?window.localStorage.getItem(e):null}),s,t)},removeDataFromLocalStorage:function(e,t){return f((function(t){t&&t.valid&&h()&&window.localStorage.removeItem(e)}),s,t)},hasLocalStorage:h,findSimilarCookies:function(e,t){return f((function(t){if(t&&t.valid){var n=[];if((0,i.wn)())for(var r=document.cookie.split(";");r.length;){var o=r.pop(),a=o.indexOf("=");a=a<0?o.length:a,decodeURIComponent(o.slice(0,a).replace(/^\s+/,"")).indexOf(e)>=0&&n.push(decodeURIComponent(o.slice(a+1)))}return n}}),d,t)}}}var u=(0,r.z3)("async",(function(e,t,n,r){r(n)}),"validateStorageEnforcement");function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleType,n=e.moduleName,r=e.bidderCode;function i(){throw new Error("Invalid invocation for getStorageManager: must set either bidderCode, or moduleType + moduleName")}return r?((t&&t!==a.UL||n)&&i(),t=a.UL,n=r):n&&t||i(),l({moduleType:t,moduleName:n})}function f(e){return l({moduleName:e,moduleType:a.ic})}},4277:(e,t,n)=>{"use strict";n.d(t,{k_:()=>c});var r=n(1785),i=n(303),o=n(7533),a=n(388),s=n(2814);o.vc.setDefaults({userSync:(0,i.I8)({syncEnabled:!0,filterSettings:{image:{bidders:"*",filter:"include"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:0})});var d=(0,s.eA)("usersync"),c=function(e){var t={},n={image:[],iframe:[]},s=new Set,d={},c={image:!0,iframe:!1},l=e.config;function u(){if(l.syncEnabled&&e.browserSupportsCookies){try{c.iframe&&p(n.iframe,(function(e){var t=(0,r.Z)(e,2),o=t[0],a=t[1];(0,i.ji)("Invoking iframe user sync for bidder: ".concat(o)),(0,i.Vs)(a),function(e,t){e.image=e.image.filter((function(e){return e[0]!==t}))}(n,o)})),c.image&&p(n.image,(function(e){var t=(0,r.Z)(e,2),n=t[0],o=t[1];(0,i.ji)("Invoking image pixel user sync for bidder: ".concat(n)),(0,i.hq)(o)}))}catch(e){return(0,i.H)("Error firing user syncs",e)}n={image:[],iframe:[]}}}function p(e,t){(0,i.TV)(e).forEach(t)}return o.vc.getConfig("userSync",(function(e){if(e.userSync){var t=e.userSync.filterSettings;(0,i.PO)(t)&&(t.image||t.all||(e.userSync.filterSettings.image={bidders:"*",filter:"include"}))}l=Object.assign(l,e.userSync)})),t.registerSync=function(e,r,o){return s.has(r)?(0,i.ji)('already fired syncs for "'.concat(r,'", ignoring registerSync call')):l.syncEnabled&&(0,i.kJ)(n[e])?r?0!==l.syncsPerBidder&&Number(d[r])>=l.syncsPerBidder?(0,i.yN)('Number of user syncs exceeded for "'.concat(r,'"')):t.canBidderRegisterSync(e,r)?(n[e].push([r,o]),void(d=function(e,t){return e[t]?e[t]+=1:e[t]=1,e}(d,r))):(0,i.yN)('Bidder "'.concat(r,'" not permitted to register their "').concat(e,'" userSync pixels.')):(0,i.yN)("Bidder is required for registering sync"):(0,i.yN)('User sync type "'.concat(e,'" not supported'))},t.bidderDone=s.add.bind(s),t.syncUsers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e)return setTimeout(u,Number(e));u()},t.triggerUserSyncs=function(){l.enableOverride&&t.syncUsers()},t.canBidderRegisterSync=function(e,t){return!l.filterSettings||!function(e,t){var n=l.filterSettings;if(function(e,t){if(e.all&&e[t])return(0,i.yN)('Detected presence of the "filterSettings.all" and "filterSettings.'.concat(t,'" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.')),!1;var n=e.all?e.all:e[t],r=e.all?"all":t;if(!n)return!1;var o=n.filter,a=n.bidders;return o&&"include"!==o&&"exclude"!==o?((0,i.yN)('UserSync "filterSettings.'.concat(r,".filter\" setting '").concat(o,"' is not a valid option; use either 'include' or 'exclude'.")),!1):!!("*"===a||Array.isArray(a)&&a.length>0&&a.every((function(e){return(0,i.d8)(e)&&"*"!==e})))||((0,i.yN)('Detected an invalid setup in userSync "filterSettings.'.concat(r,".bidders\"; use either '*' (to represent all bidders) or an array of bidders.")),!1)}(n,e)){c[e]=!0;var r=n.all?n.all:n[e],o="*"===r.bidders?[t]:r.bidders,s={include:function(e,t){return!(0,a.q9)(e,t)},exclude:function(e,t){return(0,a.q9)(e,t)}};return s[r.filter||"include"](o,t)}return!c[e]}(e,t)},t}(Object.defineProperties({config:o.vc.getConfig("userSync")},{browserSupportsCookies:{get:function(){return!(0,i.fr)()&&d.cookiesAreEnabled()}}}))},303:(e,t,n)=>{"use strict";n.d(t,{$8:()=>we,$u:()=>re,AB:()=>ze,An:()=>B,Bq:()=>st,CS:()=>tt,D9:()=>St,DO:()=>j,EE:()=>D,Ee:()=>bt,FS:()=>Xe,G2:()=>ot,H:()=>Q,HA:()=>me,HC:()=>ct,HP:()=>It,I8:()=>je,IG:()=>Ze,IK:()=>Le,K$:()=>Me,LQ:()=>ae,NA:()=>Ae,NI:()=>H,Ob:()=>V,PN:()=>J,PO:()=>le,Q2:()=>vt,R_:()=>_e,Re:()=>F,S0:()=>Je,SG:()=>Ie,T9:()=>Oe,TV:()=>Ue,U:()=>it,V9:()=>Pe,Vs:()=>Te,W$:()=>wt,X4:()=>De,XV:()=>pt,Yp:()=>gt,ZH:()=>Re,Zy:()=>$,_R:()=>_t,_d:()=>L,ak:()=>N,bd:()=>We,d5:()=>ft,d8:()=>se,dj:()=>Tt,e7:()=>G,ei:()=>at,en:()=>mt,ew:()=>Fe,fr:()=>qe,hj:()=>ce,hl:()=>lt,hq:()=>be,iG:()=>Ke,jC:()=>ve,jH:()=>fe,ji:()=>X,jn:()=>ue,kJ:()=>de,ky:()=>nt,oV:()=>Ye,or:()=>rt,pP:()=>xe,qp:()=>ee,r3:()=>ge,rD:()=>ie,sF:()=>z,t0:()=>q,tT:()=>ke,u2:()=>A,uh:()=>dt,vM:()=>Ge,wn:()=>He,xH:()=>Ce,x_:()=>Ve,xb:()=>pe,yL:()=>Be,yN:()=>Y,yi:()=>he,yo:()=>ut,yx:()=>$e,zE:()=>Ee,zV:()=>et});var r,i=n(1785),o=n(3014),a=n(1909),s=n(9267),d=n(7533),c=n(1269),l=n.n(c),u=n(388),p=n(251),f=n(8595),h=n(6775),g="Array",m="String",v="Function",y="Number",b="Object",_="Boolean",w=Object.prototype.toString,T=Boolean(window.console),I=Boolean(T&&window.console.log),S=Boolean(T&&window.console.info),k=Boolean(T&&window.console.warn),C=Boolean(T&&window.console.error),E=(0,h.R)();function A(e){r=e}function P(){null!=r&&r.apply(void 0,arguments)}var x={checkCookieSupport:Ze,createTrackPixelIframeHtml:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?((!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e=encodeURI(e)),t&&(t='sandbox="'.concat(t,'"')),"<iframe ".concat(t,' id="').concat(L(),'"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="').concat(e,'">\n    </iframe>')):""},getWindowSelf:G,getWindowTop:$,getWindowLocation:K,insertUserSyncIframe:Te,insertElement:ve,isFn:ae,triggerPixel:be,logError:Q,logWarn:Y,logMessage:X,logInfo:J,parseQS:ht,formatQS:gt,deepEqual:yt},O={};function D(){return O}var R,M={},N=function(e,t){return t}.bind(null,1,M)()===M?Function.prototype.bind:function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}},U=(R=0,function(){return++R});function L(){return U()+Math.random().toString(16).substr(2)}function j(e){return e?(e^(window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random())>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,j)}function B(e,t){return t&&t[e]?t[e]:""}function q(e,t,n){return n?e+t+"="+encodeURIComponent(n)+"&":e}function F(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+encodeURIComponent(e[n])+"&");return t.replace(/&$/,"")}function V(e){return e&&Object.getOwnPropertyNames(e).length>0?(t=e,Object.keys(t)).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(Ae(e,t)))})).join("&"):"";var t}function z(e){var t,n,r=[];if("string"==typeof e){var i=e.split(","),o=/^(\d)+x(\d)+$/i;if(i)for(var a in i)n=a,((t=i).hasOwnProperty?t.hasOwnProperty(n):void 0!==t[n]&&t.constructor.prototype[n]!==t[n])&&i[a].match(o)&&r.push(i[a])}else if("object"===(0,s.Z)(e)){var d=e.length;if(d>0)if(2===d&&"number"==typeof e[0]&&"number"==typeof e[1])r.push(W(e));else for(var c=0;c<d;c++)r.push(W(e[c]))}return r}function W(e){if(Z(e))return e[0]+"x"+e[1]}function H(e){if(Z(e))return{w:e[0],h:e[1]}}function Z(e){return de(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1])}function $(){return window.top}function G(){return window.self}function K(){return window.location}function X(){ne()&&I&&console.log.apply(console,te(arguments,"MESSAGE:"))}function J(){ne()&&S&&console.info.apply(console,te(arguments,"INFO:"))}function Y(){ne()&&k&&console.warn.apply(console,te(arguments,"WARNING:")),P(p.FP.AUCTION_DEBUG,{type:"WARNING",arguments})}function Q(){ne()&&C&&console.error.apply(console,te(arguments,"ERROR:")),P(p.FP.AUCTION_DEBUG,{type:"ERROR",arguments})}function ee(e){function t(t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(void 0,[e].concat(r))}}return{logError:t(Q),logWarn:t(Y),logMessage:t(X),logInfo:t(J)}}function te(e,t){e=[].slice.call(e);var n=d.vc.getCurrentBidder();return t&&e.unshift(t),n&&e.unshift(r("#aaa")),e.unshift(r("#3b88c3")),e.unshift("%cPrebid"+(n?"%c".concat(n):"")),e;function r(e){return"display: inline-block; color: #fff; background: ".concat(e,"; padding: 1px 4px; border-radius: 3px;")}}function ne(){return!!d.vc.getConfig("debug")}function re(){var e=document.createElement("iframe");return e.id=L(),e.height=0,e.width=0,e.border="0px",e.hspace="0",e.vspace="0",e.marginWidth="0",e.marginHeight="0",e.style.border="0",e.scrolling="no",e.frameBorder="0",e.src="about:blank",e.style.display="none",e}function ie(e){return ht(K().search)[e]||""}function oe(e,t){return w.call(e)==="[object "+t+"]"}function ae(e){return oe(e,v)}function se(e){return oe(e,m)}function de(e){return oe(e,g)}function ce(e){return oe(e,y)}function le(e){return oe(e,b)}function ue(e){return oe(e,_)}function pe(e){if(!e)return!0;if(de(e)||se(e))return!(e.length>0);for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0}function fe(e){return se(e)&&(!e||0===e.length)}function he(e,t){if(!pe(e)){if(ae(e.forEach))return e.forEach(t,this);var n=0,r=e.length;if(r>0)for(;n<r;n++)t(e[n],n,e);else for(n in e)hasOwnProperty.call(e,n)&&t.call(this,e[n],n)}}function ge(e,t){if(pe(e))return!1;if(ae(e.indexOf))return-1!==e.indexOf(t);for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}function me(e,t){if(pe(e))return[];if(ae(e.map))return e.map(t);var n=[];return he(e,(function(r,i){n.push(t(r,i,e))})),n}function ve(e,t,n,r){var i;t=t||document,i=n?t.getElementsByTagName(n):t.getElementsByTagName("head");try{if((i=i.length?i:t.getElementsByTagName("body")).length){i=i[0];var o=r?null:i.firstChild;return i.insertBefore(e,o)}}catch(e){}}function ye(e,t){var n=null;return new f.Z((function(r){var i=function t(){e.removeEventListener("load",t),e.removeEventListener("error",t),null!=n&&window.clearTimeout(n),r()};e.addEventListener("load",i),e.addEventListener("error",i),null!=t&&(n=window.setTimeout(i,t))}))}function be(e,t,n){var r=new Image;t&&x.isFn(t)&&ye(r,n).then(t),r.src=e}function _e(e){var t=e.source,n=e.burl;t===p.os.YZ&&n&&x.triggerPixel(n)}function we(e){if(e){var t=document.createElement("iframe");t.id=L(),t.width=0,t.height=0,t.hspace="0",t.vspace="0",t.marginWidth="0",t.marginHeight="0",t.style.display="none",t.style.height="0px",t.style.width="0px",t.scrolling="no",t.frameBorder="0",t.allowtransparency="true",x.insertElement(t,document,"body"),t.contentWindow.document.open(),t.contentWindow.document.write(e),t.contentWindow.document.close()}}function Te(e,t,n){var r=x.createTrackPixelIframeHtml(e,!1,"allow-scripts allow-same-origin"),i=document.createElement("div");i.innerHTML=r;var o=i.firstChild;t&&x.isFn(t)&&ye(o,n).then(t),x.insertElement(o,document,"html",!0)}function Ie(e){return e?'<div style="position:absolute;left:0px;top:0px;visibility:hidden;">'+'<img src="'+encodeURI(e)+'"></div>':""}function Se(e,t,n){return null==t?n:se(t)?t:ce(t)?t.toString():void x.logWarn("Unsuported type for param: "+e+" required type: String")}function ke(e,t,n){return n.indexOf(e)===t}function Ce(e,t){return e.concat(t)}function Ee(e,t){var n;if(e)return t.some((function(t){var r=(0,u.sE)(t.bids,(function(t){return["bidId","adId","bid_id"].some((function(n){return t[n]===e}))}));return r&&(n=r),r})),n}function Ae(e,t){return e[t]}function Pe(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t)return n}function xe(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.adUnits).map((function(e){return e.bids.map((function(e){return e.bidder})).reduce(Ce,[])})).reduce(Ce,[]).filter((function(e){return void 0!==e})).filter(ke)}function Oe(){if(window.googletag&&ae(window.googletag.pubads)&&ae(window.googletag.pubads().getSlots))return!0}function De(){if(window.apntag&&ae(window.apntag.getTag))return!0}var Re=Ne("timeToRespond",(function(e,t){return e>t})),Me=Ne("responseTimestamp",(function(e,t){return e>t}));function Ne(e,t){return function(n,r){return n.cpm===r.cpm?t(n[e],r[e])?r:n:n.cpm<r.cpm?r:n}}function Ue(e){for(var t=e.length;t>0;){var n=Math.floor(Math.random()*t),r=e[--t];e[t]=e[n],e[n]=r}return e}function Le(e,t){return(0,u.q9)(e,t&&t.adUnitCode)}function je(e){return l()(e)}function Be(){try{return x.getWindowSelf()!==x.getWindowTop()}catch(e){return!0}}function qe(){return/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)}function Fe(e,t){if(e)return e.replace(/\$\{AUCTION_PRICE\}/g,t)}function Ve(e,t){if(e&&t&&"string"==typeof t)return e.replace(/\${CLICKTHROUGH}/g,t)}function ze(){return(new Date).getTime()}function We(){return window.performance&&window.performance.now&&window.performance.now()||0}function He(){return!1!==d.vc.getConfig("deviceAccess")}function Ze(){if(window.navigator.cookieEnabled||document.cookie.length)return!0}function $e(e,t){if(t<1)throw new Error("numRequiredCalls must be a positive number. Got ".concat(t));var n=0;return function(){++n===t&&e.apply(this,arguments)}}function Ge(e,t){return e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e}),{})}function Ke(e,t){return t.filter((function(t){return e[t]})).reduce((function(t,n){return Object.assign(t,(0,a.Z)({},n,e[n]))}),{})}function Xe(e){var t=["banner","native","video"];return!!Object.keys(e).every((function(e){return(0,u.q9)(t,e)}))&&(!e.video||!e.video.context||(0,u.q9)(["instream","outstream","adpod"],e.video.context))}function Je(e,t,n){return e.filter((function(e){return e.code===t})).map((function(e){return e.bids})).reduce(Ce,[]).filter((function(e){return e.bidder===n})).map((function(e){return e.params||{}}))}function Ye(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack}Ne("responseTimestamp",(function(e,t){return e<t}));var Qe=function(e,t){return e.getAdUnitPath()===t||e.getSlotElementId()===t};function et(e){return function(t){return Qe(e,t)}}function tt(e){return function(t){return Qe(t,e)}}function nt(e){var t=function(e){var t;return Oe()&&(t=(0,u.sE)(window.googletag.pubads().getSlots(),tt(e))),t}(e);return t?{gptSlot:t.getAdUnitPath(),divId:t.getSlotElementId()}:{}}function rt(e,t){var n=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return"\n    ".concat(e.code," is a ").concat(n," ad unit\n    containing bidders that don't support ").concat(n,": ").concat(t,".\n    This bidder won't fetch demand.\n  ")}function it(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function ot(e){return e.replace(/(?:^|\.?)([A-Z])/g,(function(e,t){return"_"+t.toLowerCase()})).replace(/^_/,"")}function at(e,t){return"object"!==(0,s.Z)(e)?{}:t.reduce((function(n,r,i){if("function"==typeof r)return n;var o=r,a=r.match(/^(.+?)\sas\s(.+?)$/i);a&&(r=a[1],o=a[2]);var s=e[r];return"function"==typeof t[i+1]&&(s=t[i+1](s,n)),void 0!==s&&(n[o]=s),n}),{})}function st(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keywords",n=[];return he(e,(function(e,r){if(de(e)){var i=[];he(e,(function(e){((e=Se(t+"."+r,e))||""===e)&&i.push(e)})),e=i}else{if(!se(e=Se(t+"."+r,e)))return;e=[e]}n.push({key:r,value:e})})),n}function dt(e,t){return Object.keys(e).forEach((function(n){var r,i;t[n]&&(ae(e[n])?t[n]=e[n](t[n]):t[n]=(r=e[n],i=t[n],"string"===r?i&&i.toString():"number"===r?Number(i):i),isNaN(t[n])&&delete t.key)})),t}function ct(e,t){return de(e)&&(!t||e.length===t)&&e.every((function(e){return it(e)}))}function lt(e,t){for(var n=[],r=0;r<t;r++){var i=le(e)?je(e):e;n.push(i)}return n}function ut(e,t){for(var n=[],r=0;r<Math.ceil(e.length/t);r++){var i=r*t,o=i+t;n.push(e.slice(i,o))}return n}function pt(e){return Math.min.apply(Math,(0,o.Z)(e))}function ft(e){return Math.max.apply(Math,(0,o.Z)(e))}function ht(e){return e?e.replace(/^\?/,"").split("&").reduce((function(e,t){var n=t.split("="),r=(0,i.Z)(n,2),o=r[0],a=r[1];return/\[\]$/.test(o)?(e[o=o.replace("[]","")]=e[o]||[],e[o].push(a)):e[o]=a||"",e}),{}):{}}function gt(e){return Object.keys(e).map((function(t){return Array.isArray(e[t])?e[t].map((function(e){return"".concat(t,"[]=").concat(e)})).join("&"):"".concat(t,"=").concat(e[t])})).join("&")}function mt(e,t){var n=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?n.href=e:n.href=decodeURIComponent(e);var r=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:n.href,protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:r?n.search:x.parseQS(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}}function vt(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat(x.formatQS(e.search||"")):"")+(e.hash?"#".concat(e.hash):"")}function yt(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).checkTypes,r=void 0!==n&&n;if(e===t)return!0;if("object"!==(0,s.Z)(e)||null===e||"object"!==(0,s.Z)(t)||null===t||r&&e.constructor!==t.constructor)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e){if(!t.hasOwnProperty(i))return!1;if(!yt(e[i],t[i],{checkTypes:r}))return!1}return!0}function bt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;var i=n.shift();if(le(e)&&le(i)){var s=function(t){le(i[t])?(e[t]||Object.assign(e,(0,a.Z)({},t,{})),bt(e[t],i[t])):de(i[t])?e[t]?de(e[t])&&i[t].forEach((function(n){for(var r=1,i=0;i<e[t].length;i++)if(yt(e[t][i],n)){r=0;break}r&&e[t].push(n)})):Object.assign(e,(0,a.Z)({},t,(0,o.Z)(i[t]))):Object.assign(e,(0,a.Z)({},t,i[t]))};for(var d in i)s(d)}return bt.apply(void 0,[e].concat(n))}function _t(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=function(e,t){if(ae(Math.imul))return Math.imul(e,t);var n=(4194303&e)*(t|=0);return 4290772992&e&&(n+=(4290772992&e)*t|0),0|n},i=3735928559^n,o=1103547991^n,a=0;a<e.length;a++)i=r(i^(t=e.charCodeAt(a)),2654435761),o=r(o^t,1597334677);return i=r(i^i>>>16,2246822507)^r(o^o>>>13,3266489909),(4294967296*(2097151&(o=r(o^o>>>16,2246822507)^r(i^i>>>13,3266489909)))+(i>>>0)).toString()}function wt(e){return e?e.defaultView:null}function Tt(e){try{return JSON.parse(e)}catch(e){}}function It(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=new Map,r=function(){var r=t.apply(this,arguments);return n.has(r)||n.set(r,e.apply(this,arguments)),n.get(r)};return r.clear=n.clear.bind(n),r}function St(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}},5145:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var r=n(5446);function i(e){return null==e||!e.gdprApplies||!0===(0,r.Z)(e,"vendorData.purpose.consents.1")}},9218:(e,t,n)=>{"use strict";n.d(t,{A:()=>_,Bf:()=>g,V6:()=>v,g3:()=>b});var r=n(1785),i=n(7533);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a="performanceMetrics",s=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},d=new WeakMap;function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.now,n=void 0===t?s:t,r=e.mkNode,i=void 0===r?p:r,o=e.mkTimer,a=void 0===o?u:o,c=e.mkRenamer,l=void 0===c?function(e){return e}:c,f=e.nodes,h=void 0===f?d:f;return function(){return function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return{forEach:function(t){t(e)}}};r=l(r);var o=("timestamps",function(e){return t.dfWalk({visit:function(t,n){var r=n.timestamps;if(r.hasOwnProperty(e))return r[e]}})});function s(e,n){var i=r(e);t.dfWalk({follow:function(e,t){return t.propagate&&(!e||!e.stopPropagation)},visit:function(e,t){i.forEach((function(r){null==e?t.metrics[r]=n:(t.groups.hasOwnProperty(r)||(t.groups[r]=[]),t.groups[r].push(n))}))}})}function d(e){return a(n,(function(t){return s(e,t)}))}function c(){var e={};return t.dfWalk({visit:function(t,n){e=Object.assign({},!t||t.includeGroups?n.groups:null,n.metrics,e)}}),e}var u={startTiming:d,measureTime:function(e,t){return d(e).stopAfter(t)()},measureHookTime:function(e,t,n){var r=d(e);return n(function(e){var t=r.stopBefore(e);return t.bail=e.bail&&r.stopBefore(e.bail),t.stopTiming=r,t.untimed=e,t}(t))},checkpoint:function(e){t.timestamps[e]=n()},timeSince:function(e,t){var r=o(e),i=null!=r?n()-r:null;return null!=t&&s(t,i),i},timeBetween:function(e,t,n){var r=o(e),i=o(t),a=null!=r&&null!=i?i-r:null;return null!=n&&s(n,a),a},setMetric:s,getMetrics:c,fork:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.propagate,a=void 0===o||o,s=n.stopPropagation,d=void 0!==s&&s,c=n.includeGroups;return e(i([[t,{propagate:a,stopPropagation:d,includeGroups:void 0!==c&&c}]]),r)},join:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.propagate,i=void 0===r||r,o=n.stopPropagation,a=void 0!==o&&o,s=n.includeGroups,d=void 0!==s&&s,c=h.get(e);null!=c&&c.addParent(t,{propagate:i,stopPropagation:a,includeGroups:d})},newMetrics:function(){return e(t.newSibling(),r)},renameWith:function(n){return e(t,n)},toJSON:function(){return c()}};return h.set(u,t),u}(i([]))}}function l(e,t,n){return function(){t&&t();try{return e.apply(this,arguments)}finally{n&&n()}}}function u(e,t){var n=e(),r=!1;function i(){r||(t(e()-n),r=!0)}return i.stopBefore=function(e){return l(e,i)},i.stopAfter=function(e){return l(e,null,i)},i}function p(e){return{metrics:{},timestamps:{},groups:{},addParent:function(t,n){e.push([t,n])},newSibling:function(){return p(e.slice())},dfWalk:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.visit,a=n.follow,s=void 0===a?function(){return!0}:a,d=n.visited,c=void 0===d?new Set:d,l=n.inEdge;if(!c.has(this)){if(c.add(this),null!=(t=i(l,this)))return t;var u,p=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){d=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(d)throw a}}}}(e);try{for(p.s();!(u=p.n()).done;){var f=(0,r.Z)(u.value,2),h=f[0],g=f[1];if(s(l,g)&&null!=(t=h.dfWalk({visit:i,follow:s,visited:c,inEdge:g})))return t}}catch(e){p.e(e)}finally{p.f()}}}}}var f=function(){var e=function(){},t=function(){return{}},n={forEach:e},r=function(){return null};r.stopBefore=function(e){return e},r.stopAfter=function(e){return e};var i=Object.defineProperties({dfWalk:e,newSibling:function(){return i},addParent:e},Object.fromEntries(["metrics","timestamps","groups"].map((function(e){return[e,{get:t}]}))));return c({now:function(){return 0},mkNode:function(){return i},mkRenamer:function(){return function(){return n}},mkTimer:function(){return r},nodes:{get:e,set:e}})()}(),h=!0;function g(e){return h&&e||f}i.vc.getConfig(a,(function(e){h=!!e[a]}));var m,v=(m=c(),function(){return h?m():f});function y(e,t){return function(n,r){return function(i){for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];var d=this;return g(t.apply(d,a)).measureHookTime(e+n,i,(function(e){return r.call.apply(r,[d,e].concat(a))}))}}}var b=y("requestBids.",(function(e){return e.metrics})),_=y("addBidResponse.",(function(e,t){return t.metrics}))},8595:(e,t,n)=>{"use strict";n.d(t,{P:()=>m,Z:()=>h});var r=n(1785),i=n(6172),o=n(1976),a=n(266),s=n(5248);function d(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function c(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),n}var l=0,u=1,p=new WeakMap,f=new WeakMap,h=function(){function e(t){if((0,i.Z)(this,e),d(this,p,{writable:!0,value:void 0}),d(this,f,{writable:!0,value:void 0}),"function"!=typeof t)throw new Error("resolver not a function");var n=[],o=[],a=[l,u].map((function(e){return function(t){if(e===l&&"function"==typeof(null==t?void 0:t.then))t.then(h,g);else if(!n.length)for(n.push(e,t);o.length;)o.shift()()}})),c=(0,r.Z)(a,2),h=c[0],g=c[1];try{t(h,g)}catch(e){g(e)}(0,s.Z)(this,p,n),(0,s.Z)(this,f,o)}return(0,o.Z)(e,[{key:"then",value:function(e,t){var n=this,i=(0,a.Z)(this,p);return new this.constructor((function(o,s){var d=function(){var n=i[1],a=i[0]===l?[e,o]:[t,s],d=(0,r.Z)(a,2),c=d[0],u=d[1];if("function"==typeof c){try{n=c(n)}catch(e){return void s(e)}u=o}u(n)};i.length?d():(0,a.Z)(n,f).push(d)}))}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"finally",value:function(e){var t,n=this;return this.then((function(n){return t=n,e()}),(function(r){return t=n.constructor.reject(r),e()})).then((function(){return t}))}}],[{key:"timeout",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new e((function(e){0===t?e():setTimeout(e,t)}))}},{key:"race",value:function(t){var n=this;return new this((function(r,i){c(n,e,g).call(n,t,(function(e,t){return e?r(t):i(t)}))}))}},{key:"all",value:function(t){var n=this;return new this((function(r,i){var o=[];c(n,e,g).call(n,t,(function(e,t,n){return e?o[n]=t:i(t)}),(function(){return r(o)}))}))}},{key:"allSettled",value:function(t){var n=this;return new this((function(r){var i=[];c(n,e,g).call(n,t,(function(e,t,n){return i[n]=e?{status:"fulfilled",value:t}:{status:"rejected",reason:t}}),(function(){return r(i)}))}))}},{key:"resolve",value:function(e){return new this((function(t){return t(e)}))}},{key:"reject",value:function(e){return new this((function(t,n){return n(e)}))}}]),e}();function g(e,t,n){var r=this,i=e.length;function o(){t.apply(this,arguments),--i<=0&&n&&n()}0===e.length&&n?n():e.forEach((function(e,t){return r.resolve(e).then((function(e){return o(!0,e,t)}),(function(e){return o(!1,e,t)}))}))}function m(){var e,t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).promiseFactory;function r(e){return function(t){return e(t)}}return{promise:(void 0===n?function(e){return new h(e)}:n)((function(n,r){e=n,t=r})),resolve:r(e),reject:r(t)}}},3389:(e,t,n)=>{"use strict";n.d(t,{Dn:()=>l,LD:()=>c,gZ:()=>d});var r=n(5446),i=n(303),o=n(7533),a=n(8717),s=n(6370),d="outstream",c="instream";function l(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,n=void 0===t?s.K.index:t,i=(0,r.Z)(n.getMediaTypes(e),"video"),o=i&&(0,r.Z)(i,"context"),a=i&&(0,r.Z)(i,"useCacheKey"),d=n.getAdUnit(e);return u(e,d,i,o,a)}var u=(0,a.z3)("sync",(function(e,t,n,r,a){return n&&(a||r!==d)?o.vc.getConfig("cache.url")||!e.vastXml||e.vastUrl?!(!e.vastUrl&&!e.vastXml):((0,i.H)('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with pbjs.setConfig({ cache: {url: "..."} });\n      '),!1):!(r===d&&!a&&!(e.renderer||t&&t.renderer||n.renderer))}),"checkVideoBidSetup")},2297:(e,t,n)=>{var r=n(6856);e.exports=function(e){var t,n="",i=e||{};return function(e,i,o,a,s,d,c,l){n=n+'<div class="branded-content"><div class="branded-content__title">'+r.escape(null==(t=c)?"":t)+'</div><div class="branded-content__player vjs-video-container vjs-responsive"><video class="video-js vjs-default-skin"'+r.attr("id",s,!0,!0)+r.attr("controls",!0,!0,!0)+' preload="false"'+r.attr("width",l,!0,!0)+r.attr("height",a,!0,!0)+r.attr("data-opts",i,!0,!0)+"><source"+r.attr("src",d,!0,!0)+' type="video/mp4"></video></div><div class="branded-content__description"><a'+r.attr("href",e,!0,!0)+' rel="nofollow" target="_blank">'+r.escape(null==(t=o)?"":t)+"</a></div></div>"}.call(this,"click"in i?i.click:"undefined"!=typeof click?click:void 0,"dataOpts"in i?i.dataOpts:"undefined"!=typeof dataOpts?dataOpts:void 0,"description"in i?i.description:"undefined"!=typeof description?description:void 0,"height"in i?i.height:"undefined"!=typeof height?height:void 0,"id"in i?i.id:"undefined"!=typeof id?id:void 0,"src"in i?i.src:"undefined"!=typeof src?src:void 0,"title"in i?i.title:"undefined"!=typeof title?title:void 0,"width"in i?i.width:"undefined"!=typeof width?width:void 0),n}},4197:(e,t,n)=>{var r=n(6856);e.exports=function(e){var t="",n=e||{};return function(e,n,i,o,a){t=t+'<div class="branded-content"><div class="branded-content__player vjs-video-container vjs-responsive"><video class="video-js vjs-default-skin"'+r.attr("id",i,!0,!0)+r.attr("controls",!0,!0,!0)+' preload="false"'+r.attr("width",a,!0,!0)+r.attr("height",n,!0,!0)+r.attr("data-opts",e,!0,!0)+"><source"+r.attr("src",o,!0,!0)+' type="video/mp4"></video></div></div>'}.call(this,"dataOpts"in n?n.dataOpts:"undefined"!=typeof dataOpts?dataOpts:void 0,"height"in n?n.height:"undefined"!=typeof height?height:void 0,"id"in n?n.id:"undefined"!=typeof id?id:void 0,"src"in n?n.src:"undefined"!=typeof src?src:void 0,"width"in n?n.width:"undefined"!=typeof width?width:void 0),t}},3202:(e,t,n)=>{n(6856),e.exports=function(e){return""+'<div style="position:fixed; z-index:999999; top:20px; left:20px; display: flex; flex-direction: column; "><div style="display: flex; flex-direction: row; gap: 10px;"><button id="debugRemoteButton" style="background-color:red; color:white; border:1px solid darkred; padding:10px;" onclick="debugRemoteButtonText.style.display = (debugRemoteButtonText.style.display === \'none\' ? \'flex\' : \'none\')">Mark as buggy</button><button id="leaveRemoteDebug" style="background-color:green; color:white; border:1px solid darkgreen; padding:10px; display: none">Leave debug mode</button></div><div id="debugRemoteButtonText" style="display:none; flex-direction: column; gap: 10px; align-items: flex-end; background-color: #ffebeb; padding: 15px; align-items: flex-end;"><textarea style="display:block; width:100%" placeholder="Description"></textarea><button style="background-color:red; color:white; display:block; border:1px solid darkred; padding:10px;">Confirm</button></div></div>'}},9458:(e,t,n)=>{n(6856),e.exports=function(e){return""+'<div id="enterDebugRemoteContainer" style="margin:0 auto; position:fixed; left: 0; top: 0; width: 100%;height: 100%;z-index: 2147483647; display: flex; align-items: center; justify-content: center;"><div style="left: 0;top: 0;position: fixed;width: 100%;height: 100%;background-color: white;opacity: 0.8;z-index: -1;"></div><div style="border: 1px solid black; padding: 10px; background-color: white; display: flex; flex-direction: column; gap: 10px; padding: 15px;"><span style="font-size: 2em">Enter Ads debug mode</span><textarea id="debugRemoteLabel" style="font-size: 3em; display:block; width:100%" placeholder="Label" rows="1" onkeydown="if (event.key === \'Escape\') {closeDebugRemoteButton.click()}"></textarea><div style="font-size: 2em; display: flex; flex-direction: row; gap: 10px; align-items: flex-end; gap: 5px; justify-content: flex-end;"><button id="closeDebugRemoteButton" style="padding:10px;" onclick="window.enterDebugRemoteContainer.style.display = \'none\'">Cancel</button><button id="enterDebugRemoteButton" style="background-color:green; color:white; padding:10px;">Confirm</button></div></div></div>'}},5937:(e,t,n)=>{var r=n(6856);e.exports=function(e){var t="",n=e||{};return function(e,n){t=t+'<video class="video-js"'+r.attr("controls",!0,!0,!0)+r.attr("disablePictureInPicture",!0,!0,!0)+' height="250"'+r.attr("id",n,!0,!0)+r.attr("poster",e,!0,!0)+' preload="auto" width="445"><p class="vjs-no-js">To view this video please enable JavaScript, \nand consider upgrading to a web browser that <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p></video><div id="mpu_player_wrapper"><div class="adHolder" id="mpu_player"></div></div>'}.call(this,"poster"in n?n.poster:"undefined"!=typeof poster?poster:void 0,"videoId"in n?n.videoId:"undefined"!=typeof videoId?videoId:void 0),t}},8147:(e,t,n)=>{var r=n(6856);e.exports=function(e){var t="",n=e||{};return function(e,n,i,o){t=t+"<script>window.dataLayer = window.dataLayer || []\nwindow.dataLayer.push({\n  'gtm.start': new Date().getTime(),\n  event: 'gtm.js'\n})\nconst analytics = window['$$mm-analytics'] = window['$$mm-analytics'] || {}\nif (typeof analytics.firstEmbed === 'undefined') {\n  analytics.firstEmbed = Date.now()\n}\n<\/script><script"+r.attr("src",i,!0,!0)+'><\/script><iframe height="0" width="0"'+r.attr("src",n,!0,!0)+"></iframe><script"+(r.attr("async",!0,!0,!0)+r.attr("src",e,!0,!0))+"><\/script><script"+(r.attr("async",!0,!0,!0)+r.attr("src",o,!0,!0))+"><\/script>"}.call(this,"configScript"in n?n.configScript:"undefined"!=typeof configScript?configScript:void 0,"googleTagManagerIframeScript"in n?n.googleTagManagerIframeScript:"undefined"!=typeof googleTagManagerIframeScript?googleTagManagerIframeScript:void 0,"googleTagManagerScript"in n?n.googleTagManagerScript:"undefined"!=typeof googleTagManagerScript?googleTagManagerScript:void 0,"injectorScript"in n?n.injectorScript:"undefined"!=typeof injectorScript?injectorScript:void 0),t}},7906:e=>{e.exports=function(e,t){var n=0,r={};e.addEventListener("message",(function(t){var n=t.data;if("RPC"===n.type)if(n.id){var i=r[n.id];i&&(delete r[n.id],n.error?i[1](Object.assign(Error(n.error.message),n.error)):i[0](n.result))}else{var o=document.createEvent("Event");o.initEvent(n.method,!1,!1),o.data=n.params,e.dispatchEvent(o)}})),t.forEach((function(t){e[t]=function(){var i=arguments;return new Promise((function(o,a){var s=++n;r[s]=[o,a],e.postMessage({type:"RPC",id:s,method:t,params:[].slice.call(i)})}))}}))}},9475:function(e,t){var n,r,i;!function(o,a){"use strict";r=[],void 0===(i="function"==typeof(n=function(){return function(){var e,t=navigator,n=t.connection||t.mozConnection||t.webkitConnection||{downlinkMax:1/0};if(!("downlinkMax"in n))if("bandwidth"in n)n.downlinkMax=8*n.bandwidth;else{switch(n.type){case"none":e=0;break;case"2g":e=.134;break;case"bluetooth":case"cellular":e=2;break;case"3g":e=8.95;break;case"4g":e=100;break;case"ethernet":e=550;break;case"wifi":e=600;break;default:e=1/0}n.downlinkMax=e}return n.downlinkMax}})?n.apply(t,r):n)||(e.exports=i)}()},3595:(e,t,n)=>{"use strict";var r=n(1667);e.exports=function(e,t){return void 0===t&&(t=!1),function(n,i,o){if(n)e(n);else if(i.statusCode>=400&&i.statusCode<=599){var a=o;if(t)if(r.TextDecoder){var s=(void 0===(d=i.headers&&i.headers["content-type"])&&(d=""),d.toLowerCase().split(";").reduce((function(e,t){var n=t.split("="),r=n[0],i=n[1];return"charset"===r.trim()?i.trim():e}),"utf-8"));try{a=new TextDecoder(s).decode(o)}catch(e){}}else a=String.fromCharCode.apply(null,new Uint8Array(o));e({cause:a})}else e(null,o);var d}}},1731:(e,t,n)=>{"use strict";var r=n(1667),i=n(3737),o=n(8495);d.httpHandler=n(3595);var a=function(e){var t={};return e?(e.trim().split("\n").forEach((function(e){var n=e.indexOf(":"),r=e.slice(0,n).trim().toLowerCase(),i=e.slice(n+1).trim();void 0===t[r]?t[r]=i:Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]})),t):t};function s(e,t,n){var r=e;return o(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=i({},t,{uri:e}),r.callback=n,r}function d(e,t,n){return c(t=s(e,t,n))}function c(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,r,i){t||(t=!0,e.callback(n,r,i))};function r(){var e=void 0;if(e=l.response?l.response:l.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(l),v)try{e=JSON.parse(e)}catch(e){}return e}function i(e){return clearTimeout(u),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,y)}function o(){if(!c){var t;clearTimeout(u),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var i=y,o=null;return 0!==t?(i={body:r(),statusCode:t,method:f,headers:{},url:p,rawRequest:l},l.getAllResponseHeaders&&(i.headers=a(l.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),n(o,i,i.body)}}var s,c,l=e.xhr||null;l||(l=e.cors||e.useXDR?new d.XDomainRequest:new d.XMLHttpRequest);var u,p=l.url=e.uri||e.url,f=l.method=e.method||"GET",h=e.body||e.data,g=l.headers=e.headers||{},m=!!e.sync,v=!1,y={body:void 0,headers:{},statusCode:0,method:f,url:p,rawRequest:l};if("json"in e&&!1!==e.json&&(v=!0,g.accept||g.Accept||(g.Accept="application/json"),"GET"!==f&&"HEAD"!==f&&(g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json"),h=JSON.stringify(!0===e.json?h:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(o,0)},l.onload=o,l.onerror=i,l.onprogress=function(){},l.onabort=function(){c=!0},l.ontimeout=i,l.open(f,p,!m,e.username,e.password),m||(l.withCredentials=!!e.withCredentials),!m&&e.timeout>0&&(u=setTimeout((function(){if(!c){c=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)}}),e.timeout)),l.setRequestHeader)for(s in g)g.hasOwnProperty(s)&&l.setRequestHeader(s,g[s]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(h||null),l}e.exports=d,e.exports.default=d,d.XMLHttpRequest=r.XMLHttpRequest||function(){},d.XDomainRequest="withCredentials"in new d.XMLHttpRequest?d.XMLHttpRequest:r.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){d["delete"===e?"del":e]=function(t,n,r){return(n=s(t,n,r)).method=e.toUpperCase(),c(n)}}))},4663:(e,t)=>{"use strict";function n(e,t){return void 0===t&&(t=Object),t&&"function"==typeof t.freeze?t.freeze(e):e}var r=n({HTML:"text/html",isHTML:function(e){return e===r.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),i=n({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===i.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.find=function(e,t,n){if(void 0===n&&(n=Array.prototype),e&&"function"==typeof n.find)return n.find.call(e,t);for(var r=0;r<e.length;r++)if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];if(t.call(void 0,i,r,e))return i}},t.freeze=n,t.MIME_TYPE=r,t.NAMESPACE=i},662:(e,t,n)=>{var r=n(4663),i=n(9529),o=n(4775),a=n(9628),s=i.DOMImplementation,d=r.NAMESPACE,c=a.ParseError,l=a.XMLReader;function u(e){this.options=e||{locator:{}}}function p(){this.cdata=!1}function f(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function h(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function g(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function m(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}u.prototype.parseFromString=function(e,t){var n=this.options,r=new l,i=n.domBuilder||new p,a=n.errorHandler,s=n.locator,c=n.xmlns||{},u=/\/x?html?$/.test(t),f=u?o.HTML_ENTITIES:o.XML_ENTITIES;return s&&i.setDocumentLocator(s),r.errorHandler=function(e,t,n){if(!e){if(t instanceof p)return t;e=t}var r={},i=e instanceof Function;function o(t){var o=e[t];!o&&i&&(o=2==e.length?function(n){e(t,n)}:e),r[t]=o&&function(e){o("[xmldom "+t+"]\t"+e+h(n))}||function(){}}return n=n||{},o("warning"),o("error"),o("fatalError"),r}(a,i,s),r.domBuilder=n.domBuilder||i,u&&(c[""]=d.HTML),c.xml=c.xml||d.XML,e&&"string"==typeof e?r.parse(e,c,f):r.errorHandler.error("invalid doc source"),i.doc},p.prototype={startDocument:function(){this.doc=(new s).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var i=this.doc,o=i.createElementNS(e,n||t),a=r.length;m(this,o),this.currentElement=o,this.locator&&f(this.locator,o);for(var s=0;s<a;s++){e=r.getURI(s);var d=r.getValue(s),c=(n=r.getQName(s),i.createAttributeNS(e,n));this.locator&&f(r.getLocator(s),c),c.value=c.nodeValue=d,o.setAttributeNode(c)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&f(this.locator,n),m(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=g.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&f(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=g.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&f(this.locator,r),m(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(e,t,n);this.locator&&f(this.locator,i),m(this,i),this.doc.doctype=i}},warning:function(e){console.warn("[xmldom warning]\t"+e,h(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,h(this.locator))},fatalError:function(e){throw new c(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){p.prototype[e]=function(){return null}})),t.DOMParser=u,i.DOMImplementation,i.XMLSerializer},9529:(e,t,n)=>{var r=n(4663),i=r.find,o=r.NAMESPACE;function a(e){return""!==e}function s(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function d(e){if(!e)return[];var t=function(e){return e?e.split(/[\t\n\f\r ]+/).filter(a):[]}(e);return Object.keys(t.reduce(s,{}))}function c(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function l(e,t){var n=e.prototype;if(!(n instanceof t)){function r(){}r.prototype=t.prototype,c(n,r=new r),e.prototype=n=r}n.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),n.constructor=e)}var u={},p=u.ELEMENT_NODE=1,f=u.ATTRIBUTE_NODE=2,h=u.TEXT_NODE=3,g=u.CDATA_SECTION_NODE=4,m=u.ENTITY_REFERENCE_NODE=5,v=u.ENTITY_NODE=6,y=u.PROCESSING_INSTRUCTION_NODE=7,b=u.COMMENT_NODE=8,_=u.DOCUMENT_NODE=9,w=u.DOCUMENT_TYPE_NODE=10,T=u.DOCUMENT_FRAGMENT_NODE=11,I=u.NOTATION_NODE=12,S={},k={},C=(S.INDEX_SIZE_ERR=(k[1]="Index size error",1),S.DOMSTRING_SIZE_ERR=(k[2]="DOMString size error",2),S.HIERARCHY_REQUEST_ERR=(k[3]="Hierarchy request error",3)),E=(S.WRONG_DOCUMENT_ERR=(k[4]="Wrong document",4),S.INVALID_CHARACTER_ERR=(k[5]="Invalid character",5),S.NO_DATA_ALLOWED_ERR=(k[6]="No data allowed",6),S.NO_MODIFICATION_ALLOWED_ERR=(k[7]="No modification allowed",7),S.NOT_FOUND_ERR=(k[8]="Not found",8)),A=(S.NOT_SUPPORTED_ERR=(k[9]="Not supported",9),S.INUSE_ATTRIBUTE_ERR=(k[10]="Attribute in use",10));function P(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,k[e]),this.message=k[e],Error.captureStackTrace&&Error.captureStackTrace(this,P);return n.code=e,t&&(this.message=this.message+": "+t),n}function x(){}function O(e,t){this._node=e,this._refresh=t,D(this)}function D(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);ye(e,"length",n.length),c(n,e),e._inc=t}}function R(){}function M(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function N(e,t,n,r){if(r?t[M(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(r&&V(i,e,r),function(e,t,n){e&&e._inc++,n.namespaceURI===o.XMLNS&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(i,e,n))}}function U(e,t,n){var r=M(t,n);if(!(r>=0))throw new P(E,new Error(e.tagName+"@"+n));for(var i=t.length-1;r<i;)t[r]=t[++r];if(t.length=i,e){var o=e.ownerDocument;o&&(V(o,e,n),n.ownerElement=null)}}function L(){}function j(){}function B(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function q(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(q(e,t))return!0}while(e=e.nextSibling)}function F(){this.ownerDocument=this}function V(e,t,n,r){e&&e._inc++,n.namespaceURI===o.XMLNS&&delete t._nsMap[n.prefix?n.localName:""]}function z(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var i=t.firstChild,o=0;i;)r[o++]=i,i=i.nextSibling;r.length=o,delete r[r.length]}}}function W(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,z(e.ownerDocument,e),t}function H(e){return e&&e.nodeType===j.DOCUMENT_TYPE_NODE}function Z(e){return e&&e.nodeType===j.ELEMENT_NODE}function $(e){return e&&e.nodeType===j.TEXT_NODE}function G(e,t){var n=e.childNodes||[];if(i(n,Z)||H(t))return!1;var r=i(n,H);return!(t&&r&&n.indexOf(r)>n.indexOf(t))}function K(e,t){var n=e.childNodes||[];if(i(n,(function(e){return Z(e)&&e!==t})))return!1;var r=i(n,H);return!(t&&r&&n.indexOf(r)>n.indexOf(t))}function X(e,t,n){var r=e.childNodes||[],o=t.childNodes||[];if(t.nodeType===j.DOCUMENT_FRAGMENT_NODE){var a=o.filter(Z);if(a.length>1||i(o,$))throw new P(C,"More than one element or text in fragment");if(1===a.length&&!G(e,n))throw new P(C,"Element in fragment can not be inserted before doctype")}if(Z(t)&&!G(e,n))throw new P(C,"Only one element can be added and only after doctype");if(H(t)){if(i(r,H))throw new P(C,"Only one doctype is allowed");var s=i(r,Z);if(n&&r.indexOf(s)<r.indexOf(n))throw new P(C,"Doctype can only be inserted before an element");if(!n&&s)throw new P(C,"Doctype can not be appended since element is present")}}function J(e,t,n){var r=e.childNodes||[],o=t.childNodes||[];if(t.nodeType===j.DOCUMENT_FRAGMENT_NODE){var a=o.filter(Z);if(a.length>1||i(o,$))throw new P(C,"More than one element or text in fragment");if(1===a.length&&!K(e,n))throw new P(C,"Element in fragment can not be inserted before doctype")}if(Z(t)&&!K(e,n))throw new P(C,"Only one element can be added and only after doctype");if(H(t)){if(i(r,(function(e){return H(e)&&e!==n})))throw new P(C,"Only one doctype is allowed");var s=i(r,Z);if(n&&r.indexOf(s)<r.indexOf(n))throw new P(C,"Doctype can only be inserted before an element")}}function Y(e,t,n,r){(function(e,t,n){if(!function(e){return e&&(e.nodeType===j.DOCUMENT_NODE||e.nodeType===j.DOCUMENT_FRAGMENT_NODE||e.nodeType===j.ELEMENT_NODE)}(e))throw new P(C,"Unexpected parent node type "+e.nodeType);if(n&&n.parentNode!==e)throw new P(E,"child not in parent");if(!function(e){return e&&(Z(e)||$(e)||H(e)||e.nodeType===j.DOCUMENT_FRAGMENT_NODE||e.nodeType===j.COMMENT_NODE||e.nodeType===j.PROCESSING_INSTRUCTION_NODE)}(t)||H(t)&&e.nodeType!==j.DOCUMENT_NODE)throw new P(C,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)})(e,t,n),e.nodeType===j.DOCUMENT_NODE&&(r||X)(e,t,n);var i=t.parentNode;if(i&&i.removeChild(t),t.nodeType===T){var o=t.firstChild;if(null==o)return t;var a=t.lastChild}else o=a=t;var s=n?n.previousSibling:e.lastChild;o.previousSibling=s,a.nextSibling=n,s?s.nextSibling=o:e.firstChild=o,null==n?e.lastChild=a:n.previousSibling=a;do{o.parentNode=e}while(o!==a&&(o=o.nextSibling));return z(e.ownerDocument||e,e),t.nodeType==T&&(t.firstChild=t.lastChild=null),t}function Q(){this._nsMap={}}function ee(){}function te(){}function ne(){}function re(){}function ie(){}function oe(){}function ae(){}function se(){}function de(){}function ce(){}function le(){}function ue(){}function pe(e,t){var n=[],r=9==this.nodeType&&this.documentElement||this,i=r.prefix,o=r.namespaceURI;if(o&&null==i&&null==(i=r.lookupPrefix(o)))var a=[{namespace:o,prefix:null}];return ge(this,n,e,t,a),n.join("")}function fe(e,t,n){var r=e.prefix||"",i=e.namespaceURI;if(!i)return!1;if("xml"===r&&i===o.XML||i===o.XMLNS)return!1;for(var a=n.length;a--;){var s=n[a];if(s.prefix===r)return s.namespace!==i}return!0}function he(e,t,n){e.push(" ",t,'="',n.replace(/[<&"]/g,B),'"')}function ge(e,t,n,r,i){if(i||(i=[]),r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case p:var a=e.attributes,s=a.length,d=e.firstChild,c=e.tagName,l=c;if(!(n=o.isHTML(e.namespaceURI)||n)&&!e.prefix&&e.namespaceURI){for(var u,v=0;v<a.length;v++)if("xmlns"===a.item(v).name){u=a.item(v).value;break}if(!u)for(var I=i.length-1;I>=0;I--)if(""===(S=i[I]).prefix&&S.namespace===e.namespaceURI){u=S.namespace;break}if(u!==e.namespaceURI)for(I=i.length-1;I>=0;I--){var S;if((S=i[I]).namespace===e.namespaceURI){S.prefix&&(l=S.prefix+":"+c);break}}}t.push("<",l);for(var k=0;k<s;k++)"xmlns"==(C=a.item(k)).prefix?i.push({prefix:C.localName,namespace:C.value}):"xmlns"==C.nodeName&&i.push({prefix:"",namespace:C.value});for(k=0;k<s;k++){var C,E,A;fe(C=a.item(k),0,i)&&(he(t,(E=C.prefix||"")?"xmlns:"+E:"xmlns",A=C.namespaceURI),i.push({prefix:E,namespace:A})),ge(C,t,n,r,i)}if(c===l&&fe(e,0,i)&&(he(t,(E=e.prefix||"")?"xmlns:"+E:"xmlns",A=e.namespaceURI),i.push({prefix:E,namespace:A})),d||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(c)){if(t.push(">"),n&&/^script$/i.test(c))for(;d;)d.data?t.push(d.data):ge(d,t,n,r,i.slice()),d=d.nextSibling;else for(;d;)ge(d,t,n,r,i.slice()),d=d.nextSibling;t.push("</",l,">")}else t.push("/>");return;case _:case T:for(d=e.firstChild;d;)ge(d,t,n,r,i.slice()),d=d.nextSibling;return;case f:return he(t,e.name,e.value);case h:return t.push(e.data.replace(/[<&]/g,B).replace(/]]>/g,"]]&gt;"));case g:return t.push("<![CDATA[",e.data,"]]>");case b:return t.push("\x3c!--",e.data,"--\x3e");case w:var P=e.publicId,x=e.systemId;if(t.push("<!DOCTYPE ",e.name),P)t.push(" PUBLIC ",P),x&&"."!=x&&t.push(" ",x),t.push(">");else if(x&&"."!=x)t.push(" SYSTEM ",x,">");else{var O=e.internalSubset;O&&t.push(" [",O,"]"),t.push(">")}return;case y:return t.push("<?",e.target," ",e.data,"?>");case m:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function me(e,t,n){var r;switch(t.nodeType){case p:(r=t.cloneNode(!1)).ownerDocument=e;case T:break;case f:n=!0}if(r||(r=t.cloneNode(!1)),r.ownerDocument=e,r.parentNode=null,n)for(var i=t.firstChild;i;)r.appendChild(me(e,i,n)),i=i.nextSibling;return r}function ve(e,t,n){var r=new t.constructor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=t[i];"object"!=typeof o&&o!=r[i]&&(r[i]=o)}switch(t.childNodes&&(r.childNodes=new x),r.ownerDocument=e,r.nodeType){case p:var a=t.attributes,s=r.attributes=new R,d=a.length;s._ownerElement=r;for(var c=0;c<d;c++)r.setAttributeNode(ve(e,a.item(c),!0));break;case f:n=!0}if(n)for(var l=t.firstChild;l;)r.appendChild(ve(e,l,n)),l=l.nextSibling;return r}function ye(e,t,n){e[t]=n}S.INVALID_STATE_ERR=(k[11]="Invalid state",11),S.SYNTAX_ERR=(k[12]="Syntax error",12),S.INVALID_MODIFICATION_ERR=(k[13]="Invalid modification",13),S.NAMESPACE_ERR=(k[14]="Invalid namespace",14),S.INVALID_ACCESS_ERR=(k[15]="Invalid access",15),P.prototype=Error.prototype,c(S,P),x.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)ge(this[r],n,e,t);return n.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},O.prototype.item=function(e){return D(this),this[e]},l(O,x),R.prototype={length:0,item:x.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new P(A);var n=this.getNamedItem(e.nodeName);return N(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new P(A);return t=this.getNamedItemNS(e.namespaceURI,e.localName),N(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return U(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return U(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},L.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,n){var r=new F;if(r.implementation=this,r.childNodes=new x,r.doctype=n||null,n&&r.appendChild(n),t){var i=r.createElementNS(e,t);r.appendChild(i)}return r},createDocumentType:function(e,t,n){var r=new oe;return r.name=e,r.nodeName=e,r.publicId=t||"",r.systemId=n||"",r}},j.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return Y(this,e,t)},replaceChild:function(e,t){Y(this,e,t,J),t&&this.removeChild(t)},removeChild:function(e){return W(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return ve(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==h&&e.nodeType==h?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&n[r]===e)return r;t=t.nodeType==f?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n&&Object.prototype.hasOwnProperty.call(n,e))return n[e];t=t.nodeType==f?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},c(u,j),c(u,j.prototype),F.prototype={nodeName:"#document",nodeType:_,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==T){for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return Y(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===p&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),W(this,e)},replaceChild:function(e,t){Y(this,e,t,J),e.ownerDocument=this,t&&this.removeChild(t),Z(e)&&(this.documentElement=e)},importNode:function(e,t){return me(this,e,t)},getElementById:function(e){var t=null;return q(this.documentElement,(function(n){if(n.nodeType==p&&n.getAttribute("id")==e)return t=n,!0})),t},getElementsByClassName:function(e){var t=d(e);return new O(this,(function(n){var r=[];return t.length>0&&q(n.documentElement,(function(i){if(i!==n&&i.nodeType===p){var o=i.getAttribute("class");if(o){var a=e===o;if(!a){var s=d(o);a=t.every((c=s,function(e){return c&&-1!==c.indexOf(e)}))}a&&r.push(i)}}var c})),r}))},createElement:function(e){var t=new Q;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new x,(t.attributes=new R)._ownerElement=t,t},createDocumentFragment:function(){var e=new ce;return e.ownerDocument=this,e.childNodes=new x,e},createTextNode:function(e){var t=new ne;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new re;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new ie;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new le;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new ee;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new de;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new Q,r=t.split(":"),i=n.attributes=new R;return n.childNodes=new x,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new ee,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},l(F,j),Q.prototype={nodeType:p,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===T?this.insertBefore(e,null):function(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,z(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new O(this,(function(t){var n=[];return q(t,(function(r){r===t||r.nodeType!=p||"*"!==e&&r.tagName!=e||n.push(r)})),n}))},getElementsByTagNameNS:function(e,t){return new O(this,(function(n){var r=[];return q(n,(function(i){i===n||i.nodeType!==p||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||r.push(i)})),r}))}},F.prototype.getElementsByTagName=Q.prototype.getElementsByTagName,F.prototype.getElementsByTagNameNS=Q.prototype.getElementsByTagNameNS,l(Q,j),ee.prototype.nodeType=f,l(ee,j),te.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(k[C])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},l(te,j),ne.prototype={nodeName:"#text",nodeType:h,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},l(ne,te),re.prototype={nodeName:"#comment",nodeType:b},l(re,te),ie.prototype={nodeName:"#cdata-section",nodeType:g},l(ie,te),oe.prototype.nodeType=w,l(oe,j),ae.prototype.nodeType=I,l(ae,j),se.prototype.nodeType=v,l(se,j),de.prototype.nodeType=m,l(de,j),ce.prototype.nodeName="#document-fragment",ce.prototype.nodeType=T,l(ce,j),le.prototype.nodeType=y,l(le,j),ue.prototype.serializeToString=function(e,t,n){return pe.call(e,t,n)},j.prototype.toString=pe;try{if(Object.defineProperty){function be(e){switch(e.nodeType){case p:case T:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(be(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(O.prototype,"length",{get:function(){return D(this),this.$$length}}),Object.defineProperty(j.prototype,"textContent",{get:function(){return be(this)},set:function(e){switch(this.nodeType){case p:case T:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ye=function(e,t,n){e["$$"+t]=n}}}catch(_e){}t.DocumentType=oe,t.DOMException=P,t.DOMImplementation=L,t.Element=Q,t.Node=j,t.NodeList=x,t.XMLSerializer=ue},4775:(e,t,n)=>{var r=n(4663).freeze;t.XML_ENTITIES=r({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=r({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",times:"",divide:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",euro:"",trade:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:""}),t.entityMap=t.HTML_ENTITIES},9684:(e,t,n)=>{var r=n(9529);r.DOMImplementation,r.XMLSerializer,t.DOMParser=n(662).DOMParser},9628:(e,t,n)=>{var r=n(4663).NAMESPACE,i=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,o=new RegExp("[\\-\\.0-9"+i.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),a=new RegExp("^"+i.source+o.source+"*(?::"+i.source+o.source+"*)?$");function s(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,s)}function d(){}function c(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function l(e,t,n,i,o,a){function s(e,t,r){n.attributeNames.hasOwnProperty(e)&&a.fatalError("Attribute "+e+" redefined"),n.addValue(e,t,r)}for(var d,c=++t,l=0;;){var u=e.charAt(c);switch(u){case"=":if(1===l)d=e.slice(t,c),l=3;else{if(2!==l)throw new Error("attribute equal must after attrName");l=3}break;case"'":case'"':if(3===l||1===l){if(1===l&&(a.warning('attribute value must after "="'),d=e.slice(t,c)),t=c+1,!((c=e.indexOf(u,t))>0))throw new Error("attribute value no end '"+u+"' match");s(d,p=e.slice(t,c).replace(/&#?\w+;/g,o),t-1),l=5}else{if(4!=l)throw new Error('attribute value must after "="');s(d,p=e.slice(t,c).replace(/&#?\w+;/g,o),t),a.warning('attribute "'+d+'" missed start quot('+u+")!!"),t=c+1,l=5}break;case"/":switch(l){case 0:n.setTagName(e.slice(t,c));case 5:case 6:case 7:l=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),0==l&&n.setTagName(e.slice(t,c)),c;case">":switch(l){case 0:n.setTagName(e.slice(t,c));case 5:case 6:case 7:break;case 4:case 1:"/"===(p=e.slice(t,c)).slice(-1)&&(n.closed=!0,p=p.slice(0,-1));case 2:2===l&&(p=d),4==l?(a.warning('attribute "'+p+'" missed quot(")!'),s(d,p.replace(/&#?\w+;/g,o),t)):(r.isHTML(i[""])&&p.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+p+'" missed value!! "'+p+'" instead!!'),s(p,p,t));break;case 3:throw new Error("attribute value missed!!")}return c;case"":u=" ";default:if(u<=" ")switch(l){case 0:n.setTagName(e.slice(t,c)),l=6;break;case 1:d=e.slice(t,c),l=2;break;case 4:var p=e.slice(t,c).replace(/&#?\w+;/g,o);a.warning('attribute "'+p+'" missed quot(")!!'),s(d,p,t);case 5:l=6}else switch(l){case 2:n.tagName,r.isHTML(i[""])&&d.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+d+'" missed value!! "'+d+'" instead2!!'),s(d,d,t),t=c,l=1;break;case 5:a.warning('attribute space is required"'+d+'"!!');case 6:l=1,t=c;break;case 3:l=4,t=c;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function u(e,t,n){for(var i=e.tagName,o=null,a=e.length;a--;){var s=e[a],d=s.qName,c=s.value;if((f=d.indexOf(":"))>0)var l=s.prefix=d.slice(0,f),u=d.slice(f+1),p="xmlns"===l&&u;else u=d,l=null,p="xmlns"===d&&"";s.localName=u,!1!==p&&(null==o&&(o={},h(n,n={})),n[p]=o[p]=c,s.uri=r.XMLNS,t.startPrefixMapping(p,c))}for(a=e.length;a--;)(l=(s=e[a]).prefix)&&("xml"===l&&(s.uri=r.XML),"xmlns"!==l&&(s.uri=n[l||""]));var f;(f=i.indexOf(":"))>0?(l=e.prefix=i.slice(0,f),u=e.localName=i.slice(f+1)):(l=null,u=e.localName=i);var g=e.uri=n[l||""];if(t.startElement(g,u,i,e),!e.closed)return e.currentNSMap=n,e.localNSMap=o,!0;if(t.endElement(g,u,i),o)for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&t.endPrefixMapping(l)}function p(e,t,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var o=e.indexOf("</"+n+">",t),a=e.substring(t+1,o);if(/[&<]/.test(a))return/^script$/i.test(n)?(i.characters(a,0,a.length),o):(a=a.replace(/&#?\w+;/g,r),i.characters(a,0,a.length),o)}return t+1}function f(e,t,n,r){var i=r[n];return null==i&&((i=e.lastIndexOf("</"+n+">"))<t&&(i=e.lastIndexOf("</"+n)),r[n]=i),i<t}function h(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function g(e,t,n,r){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(i=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3}var o=function(e,t){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(e);n=i.exec(e);)if(r.push(n),n[1])return r}(e,t),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var s=o[1][0],d=!1,c=!1;a>3&&(/^public$/i.test(o[2][0])?(d=o[3][0],c=a>4&&o[4][0]):/^system$/i.test(o[2][0])&&(c=o[3][0]));var l=o[a-1];return n.startDTD(s,d,c),n.endDTD(),l.index+l[0].length}return-1}function m(e,t,n){var r=e.indexOf("?>",t);if(r){var i=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,n.processingInstruction(i[1],i[2]),r+2):-1}return-1}function v(){this.attributeNames={}}s.prototype=new Error,s.prototype.name=s.name,d.prototype={parse:function(e,t,n){var i=this.domBuilder;i.startDocument(),h(t,t={}),function(e,t,n,i,o){function a(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(o.error("entity not found:"+e),e)}function d(t){if(t>S){var n=e.substring(S,t).replace(/&#?\w+;/g,a);w&&h(S),i.characters(n,0,t-S),S=t}}function h(t,n){for(;t>=b&&(n=_.exec(e));)y=n.index,b=y+n[0].length,w.lineNumber++;w.columnNumber=t-y+1}for(var y=0,b=0,_=/.*(?:\r\n?|\n)|.*$/g,w=i.locator,T=[{currentNSMap:t}],I={},S=0;;){try{var k=e.indexOf("<",S);if(k<0){if(!e.substr(S).match(/^\s*$/)){var C=i.doc,E=C.createTextNode(e.substr(S));C.appendChild(E),i.currentElement=E}return}switch(k>S&&d(k),e.charAt(k+1)){case"/":var A=e.indexOf(">",k+3),P=e.substring(k+2,A).replace(/[ \t\n\r]+$/g,""),x=T.pop();A<0?(P=e.substring(k+2).replace(/[\s<].*/,""),o.error("end tag name: "+P+" is not complete:"+x.tagName),A=k+1+P.length):P.match(/\s</)&&(P=P.replace(/[\s<].*/,""),o.error("end tag name: "+P+" maybe not complete"),A=k+1+P.length);var O=x.localNSMap,D=x.tagName==P;if(D||x.tagName&&x.tagName.toLowerCase()==P.toLowerCase()){if(i.endElement(x.uri,x.localName,P),O)for(var R in O)Object.prototype.hasOwnProperty.call(O,R)&&i.endPrefixMapping(R);D||o.fatalError("end tag name: "+P+" is not match the current start tagName:"+x.tagName)}else T.push(x);A++;break;case"?":w&&h(k),A=m(e,k,i);break;case"!":w&&h(k),A=g(e,k,i,o);break;default:w&&h(k);var M=new v,N=T[T.length-1].currentNSMap,U=(A=l(e,k,M,N,a,o),M.length);if(!M.closed&&f(e,A,M.tagName,I)&&(M.closed=!0,n.nbsp||o.warning("unclosed xml attribute")),w&&U){for(var L=c(w,{}),j=0;j<U;j++){var B=M[j];h(B.offset),B.locator=c(w,{})}i.locator=L,u(M,i,N)&&T.push(M),i.locator=w}else u(M,i,N)&&T.push(M);r.isHTML(M.uri)&&!M.closed?A=p(e,A,M.tagName,a,i):A++}}catch(e){if(e instanceof s)throw e;o.error("element parse error: "+e),A=-1}A>S?S=A:d(Math.max(k,S)+1)}}(e,t,n,i,this.errorHandler),i.endDocument()}},v.prototype={setTagName:function(e){if(!a.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,n){if(!a.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=d,t.ParseError=s},6666:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=s(e),a=o[0],d=o[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,d)),l=0,u=d>0?a-4:a;for(n=0;n<u;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===d&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[l++]=255&t),1===d&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=16383,s=0,c=r-i;s<c;s+=a)o.push(d(e,s,s+a>c?c:s+a));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function d(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},9945:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){null!==e&&this.fromHexString(e)}return e.prototype.toHexString=function(){if(this.s<0)return"-"+this.negate().toHexString();var e,t=!1,n="",r=this.t,i=this.DB-r*this.DB%4;if(r-- >0)for(i<this.DB&&(e=this[r]>>i)>0&&(t=!0,n=u(e));r>=0;)i<4?(e=(this[r]&(1<<i)-1)<<4-i,e|=this[--r]>>(i+=this.DB-4)):(e=this[r]>>(i-=4)&15,i<=0&&(i+=this.DB,--r)),e>0&&(t=!0),t&&(n+=u(e));return t?n:"0"},e.prototype.fromHexString=function(t){if(null!==t){this.t=0,this.s=0;for(var n=t.length,r=!1,i=0;--n>=0;){var o=c(t,n);o<0?"-"==t.charAt(n)&&(r=!0):(r=!1,0==i?this[this.t++]=o:i+4>this.DB?(this[this.t-1]|=(o&(1<<this.DB-i)-1)<<i,this[this.t++]=o>>this.DB-i):this[this.t-1]|=o<<i,(i+=4)>=this.DB&&(i-=this.DB))}this.clamp(),r&&e.ZERO.subTo(this,this)}},e.prototype.negate=function(){var t=i();return e.ZERO.subTo(this,t),t},e.prototype.abs=function(){return this.s<0?this.negate():this},e.prototype.mod=function(t){var n=i();return this.abs().divRemTo(t,null,n),this.s<0&&n.compareTo(e.ZERO)>0&&t.subTo(n,n),n},e.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},e.prototype.lShiftTo=function(e,t){for(var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(e/this.DB),a=this.s<<n&this.DM,s=this.t-1;s>=0;--s)t[s+o+1]=this[s]>>r|a,a=(this[s]&i)<<n;for(s=o-1;s>=0;--s)t[s]=0;t[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()},e.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},e.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},e.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},e.prototype.multiplyTo=function(t,n){var r=this.abs(),i=t.abs(),o=r.t;for(n.t=o+i.t;--o>=0;)n[o]=0;for(o=0;o<i.t;++o)n[o+r.t]=r.am(0,i[o],n,o,0,r.t);n.s=0,n.clamp(),this.s!=t.s&&e.ZERO.subTo(n,n)},e.prototype.divRemTo=function(t,n,r){var a=t.abs();if(!(a.t<=0)){var s=this.abs();if(s.t<a.t)return null!=n&&n.fromHexString("0"),void(null!=r&&this.copyTo(r));null==r&&(r=i());var d=i(),c=this.s,l=t.s,u=this.DB-o(a[a.t-1]);u>0?(a.lShiftTo(u,d),s.lShiftTo(u,r)):(a.copyTo(d),s.copyTo(r));var p=d.t,f=d[p-1];if(0!=f){var h=f*(1<<this.F1)+(p>1?d[p-2]>>this.F2:0),g=this.FV/h,m=(1<<this.F1)/h,v=1<<this.F2,y=r.t,b=y-p,_=null==n?i():n;for(d.dlShiftTo(b,_),r.compareTo(_)>=0&&(r[r.t++]=1,r.subTo(_,r)),e.ONE.dlShiftTo(p,_),_.subTo(d,d);d.t<p;)d[d.t++]=0;for(;--b>=0;){var w=r[--y]==f?this.DM:Math.floor(r[y]*g+(r[y-1]+v)*m);if((r[y]+=d.am(0,w,r,b,0,p))<w)for(d.dlShiftTo(b,_),r.subTo(_,r);r[y]<--w;)r.subTo(_,r)}null!=n&&(r.drShiftTo(p,n),c!=l&&e.ZERO.subTo(n,n)),r.t=p,r.clamp(),u>0&&r.rShiftTo(u,r),c<0&&e.ZERO.subTo(r,r)}}},e.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&o)<<i,t[a-n]=this[a]>>r;r>0&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}},e.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},e.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},e.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},e.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new p(t):new f(t),this.exp(e,n)},e.prototype.exp=function(t,n){if(t>4294967295||t<1)return e.ONE;var r=i(),a=i(),s=n.convert(this),d=o(t)-1;for(s.copyTo(r);--d>=0;)if(n.sqrTo(r,a),(t&1<<d)>0)n.mulTo(a,s,r);else{var c=r;r=a,a=c}return n.revert(r)},e.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},e.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},e.prototype.am1=function(e,t,n,r,i,o){for(;--o>=0;){var a=t*this[e++]+n[r]+i;i=Math.floor(a/67108864),n[r++]=67108863&a}return i},e.prototype.am2=function(e,t,n,r,i,o){for(var a=32767&t,s=t>>15;--o>=0;){var d=32767&this[e],c=this[e++]>>15,l=s*d+c*a;i=((d=a*d+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+s*c+(i>>>30),n[r++]=1073741823&d}return i},e.prototype.am3=function(e,t,n,r,i,o){for(var a=16383&t,s=t>>14;--o>=0;){var d=16383&this[e],c=this[e++]>>14,l=s*d+c*a;i=((d=a*d+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+s*c,n[r++]=268435455&d}return i},e}();function i(){return new r(null)}function o(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}t.BigInteger=r,t.nbi=i,t.nbits=o;var a,s,d=[];for(a="0".charCodeAt(0),s=0;s<=9;++s)d[a++]=s;for(a="a".charCodeAt(0),s=10;s<36;++s)d[a++]=s;for(a="A".charCodeAt(0),s=10;s<36;++s)d[a++]=s;function c(e,t){var n=d[e.charCodeAt(t)];return null==n?-1:n}t.intAt=c;var l="0123456789abcdefghijklmnopqrstuvwxyz";function u(e){return l.charAt(e)}t.int2char=u,t.b64toHex=function(e){var t,n="",r=0,i=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(t));o<0||(0==r?(n+=u(o>>2),i=3&o,r=1):1==r?(n+=u(i<<2|o>>4),i=15&o,r=2):2==r?(n+=u(i),n+=u(o>>2),i=3&o,r=3):(n+=u(i<<2|o>>4),n+=u(15&o),r=0))}return 1==r&&(n+=u(i<<2)),n},t.removeExtraSymbols=function(e){return e.replace(/^1f+00/,"").replace("3031300d060960864801650304020105000420","")};var p=function(){function e(e){this.m=e}return e.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},e.prototype.revert=function(e){return e},e.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},e.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},e.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},e}(),f=function(){function e(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}return e.prototype.convert=function(e){var t=i();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(r.ZERO)>0&&this.m.subTo(t,t),t},e.prototype.revert=function(e){var t=i();return e.copyTo(t),this.reduce(t),t},e.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},e.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},e.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},e}();function h(e){var t=i();return t.fromHexString(e.toString()),t}t.nbv=h,r.ZERO=h(0),r.ONE=h(1),"Microsoft Internet Explorer"==navigator.appName?(r.prototype.am=r.prototype.am2,n=30):"Netscape"!=navigator.appName?(r.prototype.am=r.prototype.am1,n=26):(r.prototype.am=r.prototype.am3,n=28),r.prototype.DB=n,r.prototype.DM=(1<<n)-1,r.prototype.DV=1<<n,r.prototype.FV=Math.pow(2,52),r.prototype.F1=52-n,r.prototype.F2=2*n-52},2529:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.hash=function(t){t=e.utf8Encode(t||"");for(var n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],i=(t+=String.fromCharCode(128)).length/4+2,o=Math.ceil(i/16),a=new Array(o),s=0;s<o;s++){a[s]=new Array(16);for(var d=0;d<16;d++)a[s][d]=t.charCodeAt(64*s+4*d)<<24|t.charCodeAt(64*s+4*d+1)<<16|t.charCodeAt(64*s+4*d+2)<<8|t.charCodeAt(64*s+4*d+3)<<0}var c=8*(t.length-1)/Math.pow(2,32),l=8*(t.length-1)>>>0;for(a[o-1][14]=Math.floor(c),a[o-1][15]=l,s=0;s<o;s++){for(var u=new Array(64),p=0;p<16;p++)u[p]=a[s][p];for(p=16;p<64;p++)u[p]=e.q1(u[p-2])+u[p-7]+e.q0(u[p-15])+u[p-16]>>>0;var f=r[0],h=r[1],g=r[2],m=r[3],v=r[4],y=r[5],b=r[6],_=r[7];for(p=0;p<64;p++){var w=_+e.z1(v)+e.Ch(v,y,b)+n[p]+u[p],T=e.z0(f)+e.Maj(f,h,g);_=b,b=y,y=v,v=m+w>>>0,m=g,g=h,h=f,f=w+T>>>0}r[0]=r[0]+f>>>0,r[1]=r[1]+h>>>0,r[2]=r[2]+g>>>0,r[3]=r[3]+m>>>0,r[4]=r[4]+v>>>0,r[5]=r[5]+y>>>0,r[6]=r[6]+b>>>0,r[7]=r[7]+_>>>0}var I=new Array(r.length);for(_=0;_<r.length;_++)I[_]=("00000000"+r[_].toString(16)).slice(-8);return I.join("")},e.utf8Encode=function(e){try{return(new TextEncoder).encode(e).reduce((function(e,t){return e+String.fromCharCode(t)}),"")}catch(t){return unescape(encodeURIComponent(e))}},e.ROTR=function(e,t){return t>>>e|t<<32-e},e.z0=function(t){return e.ROTR(2,t)^e.ROTR(13,t)^e.ROTR(22,t)},e.z1=function(t){return e.ROTR(6,t)^e.ROTR(11,t)^e.ROTR(25,t)},e.q0=function(t){return e.ROTR(7,t)^e.ROTR(18,t)^t>>>3},e.q1=function(t){return e.ROTR(17,t)^e.ROTR(19,t)^t>>>10},e.Ch=function(e,t,n){return e&t^~e&n},e.Maj=function(e,t,n){return e&t^e&n^t&n},e}();t.Sha256=n},4651:(e,t,n)=>{"use strict";var r=n(9945),i=n(2529);t.T=function(e,t,n,o){var a=new r.BigInteger(r.b64toHex(t)),s=new r.BigInteger(r.b64toHex(n)),d=a.modPowInt(o,s);return r.removeExtraSymbols(d.toHexString())===i.Sha256.hash(e)}},5446:(e,t,n)=>{"use strict";function r(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}n.d(t,{Z:()=>r})},3346:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,o,a,c;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=d(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,c=l,console&&console.warn&&console.warn(c)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):h(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return d(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var d=o[e];if(void 0===d)return!1;if("function"==typeof d)r(d,this,t);else{var c=d.length,l=h(d,c);for(n=0;n<c;++n)r(l[n],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,u(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,u(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},1242:e=>{s.SYNC=1,s.ASYNC=2,s.QUEUE=4;var t="fun-hooks",n=Object.freeze({useProxy:!0,ready:0}),r=new WeakMap,i="2,1,0"===[1].reduce((function(e,t,n){return[e,t,n]}),2).toString()?Array.prototype.reduce:function(e,t){var n,r=Object(this),i=r.length>>>0,o=0;if(t)n=t;else{for(;o<i&&!(o in r);)o++;n=r[o++]}for(;o<i;)o in r&&(n=e(n,r[o],o,r)),o++;return n};function o(e,t){return Array.prototype.slice.call(e,t)}var a=Object.assign||function(e){return i.call(o(arguments,1),(function(e,t){return t&&Object.keys(t).forEach((function(n){e[n]=t[n]})),e}),e)};function s(e){var d,c={},l=[];function u(e,t){return"function"==typeof e?g.call(null,"sync",e,t):"string"==typeof e&&"function"==typeof t?g.apply(null,arguments):"object"==typeof e?p.apply(null,arguments):void 0}function p(e,t,n){var r=!0;void 0===t&&(t=Object.getOwnPropertyNames(e),r=!1);var i={},o=["constructor"];do{(t=t.filter((function(t){return!("function"!=typeof e[t]||-1!==o.indexOf(t)||t.match(/^_/))}))).forEach((function(t){var r=t.split(":"),o=r[0],a=r[1]||"sync";if(!i[o]){var s=e[o];i[o]=e[o]=g(a,s,n?[n,o]:void 0)}})),e=Object.getPrototypeOf(e)}while(r&&e);return i}function f(e){var n=Array.isArray(e)?e:e.split(".");return i.call(n,(function(r,i,o){var a=r[i],s=!1;return a||(o===n.length-1?(d||l.push((function(){s||console.warn(t+": referenced '"+e+"' but it was never created")})),r[i]=h((function(e){r[i]=e,s=!0}))):r[i]={})}),c)}function h(e){var t=[],n=[],i=function(){},o={before:function(e,n){return d.call(this,t,"before",e,n)},after:function(e,t){return d.call(this,n,"after",e,t)},getHooks:function(e){var r=t.concat(n);"object"==typeof e&&(r=r.filter((function(t){return Object.keys(e).every((function(n){return t[n]===e[n]}))})));try{a(r,{remove:function(){return r.forEach((function(e){e.remove()})),this}})}catch(e){console.error("error adding `remove` to array, did you modify Array.prototype?")}return r},removeAll:function(){return this.getHooks().remove()}},s={install:function(r,o,a){this.type=r,i=a,a(t,n),e&&e(o)}};return r.set(o.after,s),o;function d(e,r,o,a){var s={hook:o,type:r,priority:a||10,remove:function(){var r=e.indexOf(s);-1!==r&&(e.splice(r,1),i(t,n))}};return e.push(s),e.sort((function(e,t){return t.priority-e.priority})),i(t,n),this}}function g(n,i,c){var u=i.after&&r.get(i.after);if(u){if(u.type!==n)throw t+": recreated hookable with different type";return i}var p,g,m=c?f(c):h(),v={get:function(e,t){return m[t]||Reflect.get.apply(Reflect,arguments)}};return d||l.push(y),e.useProxy&&"function"==typeof Proxy&&Proxy.revocable?g=new Proxy(i,v):(g=function(){return v.apply?v.apply(i,this,o(arguments)):i.apply(this,arguments)},a(g,m)),r.get(g.after).install(n,g,(function(e,t){var r,i=[];function a(e){i.push(e.hook)}e.length||t.length?(e.forEach(a),r=i.push(void 0)-1,t.forEach(a),p=function(e,t,a){var s,d=0,c="async"===n&&"function"==typeof a[a.length-1]&&a.pop();function l(e){"sync"===n?s=e:c&&c.apply(null,arguments)}function u(e){if(i[d]){var r=o(arguments);return u.bail=l,r.unshift(u),i[d++].apply(t,r)}"sync"===n?s=e:c&&c.apply(null,arguments)}return i[r]=function(){var r=o(arguments,1);"async"===n&&c&&(delete u.bail,r.push(u));var i=e.apply(t,r);"sync"===n&&u(i)},u.apply(null,a),s}):p=void 0,y()})),g;function y(){!d&&("sync"!==n||e.ready&s.SYNC)&&("async"!==n||e.ready&s.ASYNC)?"sync"!==n&&e.ready&s.QUEUE?v.apply=function(){var e=arguments;l.push((function(){g.apply(e[1],e[2])}))}:v.apply=function(){throw t+": hooked function not ready"}:v.apply=p}}return(e=a({},n,e)).ready?u.ready=function(){d=!0,function(e){for(var t;t=e.shift();)t()}(l)}:d=!0,u.get=f,u}e.exports=s},1709:(e,t,n)=>{var r,i=void 0!==n.g?n.g:"undefined"!=typeof window?window:{},o=n(4760);"undefined"!=typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=o),e.exports=r},1667:(e,t,n)=>{var r;r="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},e.exports=r},9258:(e,t)=>{t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,d=(1<<s)-1,c=d>>1,l=-7,u=n?i-1:0,p=n?-1:1,f=e[t+u];for(u+=p,o=f&(1<<-l)-1,f>>=-l,l+=s;l>0;o=256*o+e[t+u],u+=p,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+u],u+=p,l-=8);if(0===o)o=1-c;else{if(o===d)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=c}return(f?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,d,c=8*o-i-1,l=(1<<c)-1,u=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-a))<1&&(a--,d*=2),(t+=a+u>=1?p/d:p*Math.pow(2,1-u))*d>=2&&(a++,d/=2),a+u>=l?(s=0,a=l):a+u>=1?(s=(t*d-1)*Math.pow(2,i),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=h,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+f]=255&a,f+=h,a/=256,c-=8);e[n+f-h]|=128*g}},3730:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},8495:e=>{e.exports=function(e){if(!e)return!1;var n=t.call(e);return"[object Function]"===n||"function"==typeof e&&"[object RegExp]"!==n||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var t=Object.prototype.toString},1269:e=>{e.exports=function e(t){var n=Array.isArray(t)?[]:{};for(var r in t){var i=t[r];n[r]=i&&"object"==typeof i?e(i):i}return n}},5827:(e,t)=>{function n(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return a[e];var n,o=String(e);return(n=r[o.toLowerCase()])?n:(n=i[o.toLowerCase()])||(1===o.length?o.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){var o;if(o=r[t.toLowerCase()])return o===n;if(o=i[t.toLowerCase()])return o===n}else if("number"==typeof t)return t===n;return!1}};var r=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=t.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)r[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)r[o-48]=o;for(o=1;o<13;o++)r["f"+o]=o+111;for(o=0;o<10;o++)r["numpad "+o]=o+96;var a=t.names=t.title={};for(o in r)a[r[o]]=o;for(var s in i)r[s]=i[s]},4399:function(e){!function(t){var n,r={},i={16:!1,18:!1,17:!1,91:!1},o="all",a={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,command:91},s={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},d=function(e){return s[e]||e.toUpperCase().charCodeAt(0)},c=[];for(n=1;n<20;n++)s["f"+n]=111+n;function l(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function u(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var p={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function f(e){for(n in i)i[n]=e[p[n]]}function h(e,t,n){var i,o;i=m(e),void 0===n&&(n=t,t="all");for(var a=0;a<i.length;a++)o=[],(e=i[a].split("+")).length>1&&(o=v(e),e=[e[e.length-1]]),e=e[0],(e=d(e))in r||(r[e]=[]),r[e].push({shortcut:i[a],scope:t,method:n,key:i[a],mods:o})}for(n in a)h[n]=!1;function g(){return o||"all"}function m(e){var t;return""==(t=(e=e.replace(/\s/g,"")).split(","))[t.length-1]&&(t[t.length-2]+=","),t}function v(e){for(var t=e.slice(0,e.length-1),n=0;n<t.length;n++)t[n]=a[t[n]];return t}function y(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,(function(){n(window.event)}))}y(document,"keydown",(function(e){!function(e){var t,n,o,s,d,u;if(t=e.keyCode,-1==l(c,t)&&c.push(t),93!=t&&224!=t||(t=91),t in i)for(o in i[t]=!0,a)a[o]==t&&(h[o]=!0);else if(f(e),h.filter.call(this,e)&&t in r)for(u=g(),s=0;s<r[t].length;s++)if((n=r[t][s]).scope==u||"all"==n.scope){for(o in d=n.mods.length>0,i)(!i[o]&&l(n.mods,+o)>-1||i[o]&&-1==l(n.mods,+o))&&(d=!1);(0!=n.mods.length||i[16]||i[18]||i[17]||i[91])&&!d||!1===n.method(e,n)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}(e)})),y(document,"keyup",(function(e){var t,n=e.keyCode,r=l(c,n);if(r>=0&&c.splice(r,1),93!=n&&224!=n||(n=91),n in i)for(t in i[n]=!1,a)a[t]==n&&(h[t]=!1)})),y(window,"focus",(function(){for(n in i)i[n]=!1;for(n in a)h[n]=!1}));var b=t.key;t.key=h,t.key.setScope=function(e){o=e||"all"},t.key.getScope=g,t.key.deleteScope=function(e){var t,n,i;for(t in r)for(n=r[t],i=0;i<n.length;)n[i].scope===e?n.splice(i,1):i++},t.key.filter=function(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"==t||"SELECT"==t||"TEXTAREA"==t)},t.key.isPressed=function(e){return"string"==typeof e&&(e=d(e)),-1!=l(c,e)},t.key.getPressedKeyCodes=function(){return c.slice(0)},t.key.noConflict=function(){var e=t.key;return t.key=b,e},t.key.unbind=function(e,t){var n,i,o,a,s,c=[];for(n=m(e),a=0;a<n.length;a++){if((i=n[a].split("+")).length>1&&(c=v(i),e=i[i.length-1]),e=d(e),void 0===t&&(t=g()),!r[e])return;for(o=0;o<r[e].length;o++)(s=r[e][o]).scope===t&&u(s.mods,c)&&(r[e][o]={})}},e.exports=h}(this)},9288:(e,t,n)=>{var r,i="__lodash_hash_undefined__",o=1/0,a="[object Function]",s="[object GeneratorFunction]",d="[object Symbol]",c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,u=/^\./,p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,h=/^\[object .+?Constructor\]$/,g="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,m="object"==typeof self&&self&&self.Object===Object&&self,v=g||m||Function("return this")(),y=Array.prototype,b=Function.prototype,_=Object.prototype,w=v["__core-js_shared__"],T=(r=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",I=b.toString,S=_.hasOwnProperty,k=_.toString,C=RegExp("^"+I.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),E=v.Symbol,A=y.splice,P=j(v,"Map"),x=j(Object,"create"),O=E?E.prototype:void 0,D=O?O.toString:void 0;function R(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function M(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function N(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function U(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!=n&&r!=r)return i;return-1}function L(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function j(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!z(e)||T&&T in e)return!1;var t=function(e){var t=z(e)?k.call(e):"";return t==a||t==s}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?C:h;return t.test(function(e){if(null!=e){try{return I.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}R.prototype.clear=function(){this.__data__=x?x(null):{}},R.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},R.prototype.get=function(e){var t=this.__data__;if(x){var n=t[e];return n===i?void 0:n}return S.call(t,e)?t[e]:void 0},R.prototype.has=function(e){var t=this.__data__;return x?void 0!==t[e]:S.call(t,e)},R.prototype.set=function(e,t){return this.__data__[e]=x&&void 0===t?i:t,this},M.prototype.clear=function(){this.__data__=[]},M.prototype.delete=function(e){var t=this.__data__,n=U(t,e);return!(n<0||(n==t.length-1?t.pop():A.call(t,n,1),0))},M.prototype.get=function(e){var t=this.__data__,n=U(t,e);return n<0?void 0:t[n][1]},M.prototype.has=function(e){return U(this.__data__,e)>-1},M.prototype.set=function(e,t){var n=this.__data__,r=U(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},N.prototype.clear=function(){this.__data__={hash:new R,map:new(P||M),string:new R}},N.prototype.delete=function(e){return L(this,e).delete(e)},N.prototype.get=function(e){return L(this,e).get(e)},N.prototype.has=function(e){return L(this,e).has(e)},N.prototype.set=function(e,t){return L(this,e).set(e,t),this};var B=F((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(W(e))return D?D.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}(t);var n=[];return u.test(e)&&n.push(""),e.replace(p,(function(e,t,r,i){n.push(r?i.replace(f,"$1"):t||e)})),n}));function q(e){if("string"==typeof e||W(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}function F(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(F.Cache||N),n}F.Cache=N;var V=Array.isArray;function z(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function W(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&k.call(e)==d}e.exports=function(e,t,n){var r=null==e?void 0:function(e,t){var n;t=function(e,t){if(V(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!W(e))||l.test(e)||!c.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:V(n=t)?n:B(n);for(var r=0,i=t.length;null!=e&&r<i;)e=e[q(t[r++])];return r&&r==i?e:void 0}(e,t);return void 0===r?n:r}},7019:(e,t,n)=>{var r="__lodash_hash_undefined__",i="[object Function]",o="[object GeneratorFunction]",a=/^\[object .+?Constructor\]$/,s="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,c=s||d||Function("return this")();function l(e,t){return!(!e||!e.length)&&function(e,t,n){if(t!=t)return function(e,t,n,r){for(var i=e.length,o=-1;++o<i;)if(t(e[o],o,e))return o;return-1}(e,p);for(var r=-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t)>-1}function u(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function p(e){return e!=e}function f(e,t){return e.has(t)}var h,g=Array.prototype,m=Function.prototype,v=Object.prototype,y=c["__core-js_shared__"],b=(h=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+h:"",_=m.toString,w=v.hasOwnProperty,T=v.toString,I=RegExp("^"+_.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=g.splice,k=Math.max,C=Math.min,E=U(c,"Map"),A=U(Object,"create");function P(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function x(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function O(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function D(e){var t=-1,n=e?e.length:0;for(this.__data__=new O;++t<n;)this.add(e[t])}function R(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!=n&&r!=r)return i;return-1}function M(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!q(e)}(e)}(e)?e:[]}function N(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function U(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!F(e)||b&&b in e)return!1;var t=q(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?I:a;return t.test(function(e){if(null!=e){try{return _.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}P.prototype.clear=function(){this.__data__=A?A(null):{}},P.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},P.prototype.get=function(e){var t=this.__data__;if(A){var n=t[e];return n===r?void 0:n}return w.call(t,e)?t[e]:void 0},P.prototype.has=function(e){var t=this.__data__;return A?void 0!==t[e]:w.call(t,e)},P.prototype.set=function(e,t){return this.__data__[e]=A&&void 0===t?r:t,this},x.prototype.clear=function(){this.__data__=[]},x.prototype.delete=function(e){var t=this.__data__,n=R(t,e);return!(n<0||(n==t.length-1?t.pop():S.call(t,n,1),0))},x.prototype.get=function(e){var t=this.__data__,n=R(t,e);return n<0?void 0:t[n][1]},x.prototype.has=function(e){return R(this.__data__,e)>-1},x.prototype.set=function(e,t){var n=this.__data__,r=R(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},O.prototype.clear=function(){this.__data__={hash:new P,map:new(E||x),string:new P}},O.prototype.delete=function(e){return N(this,e).delete(e)},O.prototype.get=function(e){return N(this,e).get(e)},O.prototype.has=function(e){return N(this,e).has(e)},O.prototype.set=function(e,t){return N(this,e).set(e,t),this},D.prototype.add=D.prototype.push=function(e){return this.__data__.set(e,r),this},D.prototype.has=function(e){return this.__data__.has(e)};var L,j,B=(L=function(e){var t=u(e,M);return t.length&&t[0]===e[0]?function(e,t,n){for(var r=l,i=e[0].length,o=e.length,a=o,s=Array(o),d=1/0,c=[];a--;){var u=e[a];d=C(u.length,d),s[a]=i>=120&&u.length>=120?new D(a&&u):void 0}u=e[0];var p=-1,h=s[0];e:for(;++p<i&&c.length<d;){var g=u[p],m=g;if(g=0!==g?g:0,!(h?f(h,m):r(c,m,n))){for(a=o;--a;){var v=s[a];if(!(v?f(v,m):r(e[a],m,n)))continue e}h&&h.push(m),c.push(g)}}return c}(t):[]},j=k(void 0===j?L.length-1:j,0),function(){for(var e=arguments,t=-1,n=k(e.length-j,0),r=Array(n);++t<n;)r[t]=e[j+t];t=-1;for(var i=Array(j+1);++t<j;)i[t]=e[t];return i[j]=r,function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(L,this,i)});function q(e){var t=F(e)?T.call(e):"";return t==i||t==o}function F(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=B},8909:(e,t,n)=>{var r,i="__lodash_hash_undefined__",o="[object Function]",a="[object GeneratorFunction]",s=/^\[object .+?Constructor\]$/,d="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,l=d||c||Function("return this")(),u=Array.prototype,p=Function.prototype,f=Object.prototype,h=l["__core-js_shared__"],g=(r=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",m=p.toString,v=f.hasOwnProperty,y=f.toString,b=RegExp("^"+m.call(v).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_=u.splice,w=A(l,"Map"),T=A(Object,"create");function I(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function S(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function k(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function C(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!=n&&r!=r)return i;return-1}function E(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function A(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!x(e)||g&&g in e)return!1;var t=function(e){var t=x(e)?y.call(e):"";return t==o||t==a}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?b:s;return t.test(function(e){if(null!=e){try{return m.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function P(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(P.Cache||k),n}function x(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}I.prototype.clear=function(){this.__data__=T?T(null):{}},I.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},I.prototype.get=function(e){var t=this.__data__;if(T){var n=t[e];return n===i?void 0:n}return v.call(t,e)?t[e]:void 0},I.prototype.has=function(e){var t=this.__data__;return T?void 0!==t[e]:v.call(t,e)},I.prototype.set=function(e,t){return this.__data__[e]=T&&void 0===t?i:t,this},S.prototype.clear=function(){this.__data__=[]},S.prototype.delete=function(e){var t=this.__data__,n=C(t,e);return!(n<0||(n==t.length-1?t.pop():_.call(t,n,1),0))},S.prototype.get=function(e){var t=this.__data__,n=C(t,e);return n<0?void 0:t[n][1]},S.prototype.has=function(e){return C(this.__data__,e)>-1},S.prototype.set=function(e,t){var n=this.__data__,r=C(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},k.prototype.clear=function(){this.__data__={hash:new I,map:new(w||S),string:new I}},k.prototype.delete=function(e){return E(this,e).delete(e)},k.prototype.get=function(e){return E(this,e).get(e)},k.prototype.has=function(e){return E(this,e).has(e)},k.prototype.set=function(e,t){return E(this,e).set(e,t),this},P.Cache=k,e.exports=P},6247:(e,t,n)=>{e=n.nmd(e);var r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object AsyncFunction]",s="[object Function]",d="[object GeneratorFunction]",c="[object Null]",l="[object Object]",u="[object Proxy]",p="[object Undefined]",f=/^\[object .+?Constructor\]$/,h=/^(?:0|[1-9]\d*)$/,g={};g["[object Float32Array]"]=g["[object Float64Array]"]=g["[object Int8Array]"]=g["[object Int16Array]"]=g["[object Int32Array]"]=g["[object Uint8Array]"]=g["[object Uint8ClampedArray]"]=g["[object Uint16Array]"]=g["[object Uint32Array]"]=!0,g[o]=g["[object Array]"]=g["[object ArrayBuffer]"]=g["[object Boolean]"]=g["[object DataView]"]=g["[object Date]"]=g["[object Error]"]=g[s]=g["[object Map]"]=g["[object Number]"]=g[l]=g["[object RegExp]"]=g["[object Set]"]=g["[object String]"]=g["[object WeakMap]"]=!1;var m,v,y,b="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,_="object"==typeof self&&self&&self.Object===Object&&self,w=b||_||Function("return this")(),T=t&&!t.nodeType&&t,I=T&&e&&!e.nodeType&&e,S=I&&I.exports===T,k=S&&b.process,C=function(){try{return I&&I.require&&I.require("util").types||k&&k.binding&&k.binding("util")}catch(e){}}(),E=C&&C.isTypedArray,A=Array.prototype,P=Function.prototype,x=Object.prototype,O=w["__core-js_shared__"],D=P.toString,R=x.hasOwnProperty,M=(m=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",N=x.toString,U=D.call(Object),L=RegExp("^"+D.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=S?w.Buffer:void 0,B=w.Symbol,q=w.Uint8Array,F=(j&&j.allocUnsafe,v=Object.getPrototypeOf,y=Object,function(e){return v(y(e))}),V=Object.create,z=x.propertyIsEnumerable,W=A.splice,H=B?B.toStringTag:void 0,Z=function(){try{var e=pe(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),$=j?j.isBuffer:void 0,G=Math.max,K=Date.now,X=pe(w,"Map"),J=pe(Object,"create"),Y=function(){function e(){}return function(t){if(!Se(t))return{};if(V)return V(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Q(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ee(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function te(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ne(e){var t=this.__data__=new ee(e);this.size=t.size}function re(e,t,n){(void 0!==n&&!ve(e[t],n)||void 0===n&&!(t in e))&&ae(e,t,n)}function ie(e,t,n){var r=e[t];R.call(e,t)&&ve(r,n)&&(void 0!==n||t in e)||ae(e,t,n)}function oe(e,t){for(var n=e.length;n--;)if(ve(e[n][0],t))return n;return-1}function ae(e,t,n){"__proto__"==t&&Z?Z(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}Q.prototype.clear=function(){this.__data__=J?J(null):{},this.size=0},Q.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Q.prototype.get=function(e){var t=this.__data__;if(J){var n=t[e];return n===r?void 0:n}return R.call(t,e)?t[e]:void 0},Q.prototype.has=function(e){var t=this.__data__;return J?void 0!==t[e]:R.call(t,e)},Q.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=J&&void 0===t?r:t,this},ee.prototype.clear=function(){this.__data__=[],this.size=0},ee.prototype.delete=function(e){var t=this.__data__,n=oe(t,e);return!(n<0||(n==t.length-1?t.pop():W.call(t,n,1),--this.size,0))},ee.prototype.get=function(e){var t=this.__data__,n=oe(t,e);return n<0?void 0:t[n][1]},ee.prototype.has=function(e){return oe(this.__data__,e)>-1},ee.prototype.set=function(e,t){var n=this.__data__,r=oe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},te.prototype.clear=function(){this.size=0,this.__data__={hash:new Q,map:new(X||ee),string:new Q}},te.prototype.delete=function(e){var t=ue(this,e).delete(e);return this.size-=t?1:0,t},te.prototype.get=function(e){return ue(this,e).get(e)},te.prototype.has=function(e){return ue(this,e).has(e)},te.prototype.set=function(e,t){var n=ue(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ne.prototype.clear=function(){this.__data__=new ee,this.size=0},ne.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ne.prototype.get=function(e){return this.__data__.get(e)},ne.prototype.has=function(e){return this.__data__.has(e)},ne.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ee){var r=n.__data__;if(!X||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new te(r)}return n.set(e,t),this.size=n.size,this};function se(e){return null==e?void 0===e?p:c:H&&H in Object(e)?function(e){var t=R.call(e,H),n=e[H];try{e[H]=void 0;var r=!0}catch(e){}var i=N.call(e);return r&&(t?e[H]=n:delete e[H]),i}(e):function(e){return N.call(e)}(e)}function de(e){return ke(e)&&se(e)==o}function ce(e,t,n,r,i){e!==t&&function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[++r];if(!1===t(i[s],s,i))break}}(t,(function(o,a){if(i||(i=new ne),Se(o))!function(e,t,n,r,i,o,a){var s=ge(e,n),d=ge(t,n),c=a.get(d);if(c)re(e,n,c);else{var u,p,f,h,g,m=o?o(s,d,n+"",e,t,a):void 0,v=void 0===m;if(v){var y=be(d),b=!y&&we(d),_=!y&&!b&&Ce(d);m=d,y||b||_?be(s)?m=s:ke(g=s)&&_e(g)?m=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(s):b?(v=!1,m=function(e,t){return e.slice()}(d)):_?(v=!1,h=new(f=(u=d).buffer).constructor(f.byteLength),new q(h).set(new q(f)),p=h,m=new u.constructor(p,u.byteOffset,u.length)):m=[]:function(e){if(!ke(e)||se(e)!=l)return!1;var t=F(e);if(null===t)return!0;var n=R.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&D.call(n)==U}(d)||ye(d)?(m=s,ye(s)?m=function(e){return function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],d=void 0;void 0===d&&(d=e[s]),i?ae(n,s,d):ie(n,s,d)}return n}(e,Ee(e))}(s):Se(s)&&!Te(s)||(m=function(e){return"function"!=typeof e.constructor||he(e)?{}:Y(F(e))}(d))):v=!1}v&&(a.set(d,m),i(m,d,r,o,a),a.delete(d)),re(e,n,m)}}(e,t,a,n,ce,r,i);else{var s=r?r(ge(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),re(e,a,s)}}),Ee)}var le=Z?function(e,t){return Z(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:xe;function ue(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function pe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Se(e)||function(e){return!!M&&M in e}(e))&&(Te(e)?L:f).test(function(e){if(null!=e){try{return D.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function fe(e,t){var n=typeof e;return!!(t=null==t?i:t)&&("number"==n||"symbol"!=n&&h.test(e))&&e>-1&&e%1==0&&e<t}function he(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||x)}function ge(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var me=function(e){var t=0,n=0;return function(){var r=K(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(le);function ve(e,t){return e===t||e!=e&&t!=t}var ye=de(function(){return arguments}())?de:function(e){return ke(e)&&R.call(e,"callee")&&!z.call(e,"callee")},be=Array.isArray;function _e(e){return null!=e&&Ie(e.length)&&!Te(e)}var we=$||function(){return!1};function Te(e){if(!Se(e))return!1;var t=se(e);return t==s||t==d||t==a||t==u}function Ie(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Se(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ke(e){return null!=e&&"object"==typeof e}var Ce=E?function(e){return function(t){return e(t)}}(E):function(e){return ke(e)&&Ie(e.length)&&!!g[se(e)]};function Ee(e){return _e(e)?function(e,t){var n=be(e),r=!n&&ye(e),i=!n&&!r&&we(e),o=!n&&!r&&!i&&Ce(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],d=s.length;for(var c in e)!t&&!R.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||fe(c,d))||s.push(c);return s}(e,!0):function(e){if(!Se(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=he(e),n=[];for(var r in e)("constructor"!=r||!t&&R.call(e,r))&&n.push(r);return n}(e)}var Ae,Pe=(Ae=function(e,t,n){ce(e,t,n)},function(e,t){return me(function(e,t,n){return t=G(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=G(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}(e,t,xe),e+"")}((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(i=Ae.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(e,t,n){if(!Se(n))return!1;var r=typeof t;return!!("number"==r?_e(n)&&fe(t,n.length):"string"==r&&t in n)&&ve(n[t],e)}(t[0],t[1],o)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var a=t[n];a&&Ae(e,a,n)}return e})));function xe(e){return e}e.exports=Pe},8622:(e,t,n)=>{var r,i="__lodash_hash_undefined__",o=1/0,a=9007199254740991,s="[object Function]",d="[object GeneratorFunction]",c="[object Symbol]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,p=/^\./,f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/\\(\\)?/g,g=/^\[object .+?Constructor\]$/,m=/^(?:0|[1-9]\d*)$/,v="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,y="object"==typeof self&&self&&self.Object===Object&&self,b=v||y||Function("return this")(),_=Array.prototype,w=Function.prototype,T=Object.prototype,I=b["__core-js_shared__"],S=(r=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",k=w.toString,C=T.hasOwnProperty,E=T.toString,A=RegExp("^"+k.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=b.Symbol,x=_.splice,O=F(b,"Map"),D=F(Object,"create"),R=P?P.prototype:void 0,M=R?R.toString:void 0;function N(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function U(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function L(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function j(e,t,n){var r=e[t];C.call(e,t)&&Z(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function B(e,t){for(var n=e.length;n--;)if(Z(e[n][0],t))return n;return-1}function q(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function F(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!G(e)||S&&S in e)return!1;var t=function(e){var t=G(e)?E.call(e):"";return t==s||t==d}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?A:g;return t.test(function(e){if(null!=e){try{return k.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function V(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||m.test(e))&&e>-1&&e%1==0&&e<t}N.prototype.clear=function(){this.__data__=D?D(null):{}},N.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},N.prototype.get=function(e){var t=this.__data__;if(D){var n=t[e];return n===i?void 0:n}return C.call(t,e)?t[e]:void 0},N.prototype.has=function(e){var t=this.__data__;return D?void 0!==t[e]:C.call(t,e)},N.prototype.set=function(e,t){return this.__data__[e]=D&&void 0===t?i:t,this},U.prototype.clear=function(){this.__data__=[]},U.prototype.delete=function(e){var t=this.__data__,n=B(t,e);return!(n<0||(n==t.length-1?t.pop():x.call(t,n,1),0))},U.prototype.get=function(e){var t=this.__data__,n=B(t,e);return n<0?void 0:t[n][1]},U.prototype.has=function(e){return B(this.__data__,e)>-1},U.prototype.set=function(e,t){var n=this.__data__,r=B(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},L.prototype.clear=function(){this.__data__={hash:new N,map:new(O||U),string:new N}},L.prototype.delete=function(e){return q(this,e).delete(e)},L.prototype.get=function(e){return q(this,e).get(e)},L.prototype.has=function(e){return q(this,e).has(e)},L.prototype.set=function(e,t){return q(this,e).set(e,t),this};var z=H((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(K(e))return M?M.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}(t);var n=[];return p.test(e)&&n.push(""),e.replace(f,(function(e,t,r,i){n.push(r?i.replace(h,"$1"):t||e)})),n}));function W(e){if("string"==typeof e||K(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}function H(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(H.Cache||L),n}function Z(e,t){return e===t||e!=e&&t!=t}H.Cache=L;var $=Array.isArray;function G(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function K(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&E.call(e)==c}e.exports=function(e,t,n){return null==e?e:function(e,t,n,r){if(!G(e))return e;t=function(e,t){if($(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!K(e))||u.test(e)||!l.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:function(e){return $(e)?e:z(e)}(t);for(var i=-1,o=t.length,a=o-1,s=e;null!=s&&++i<o;){var d=W(t[i]),c=n;if(i!=a){var p=s[d];void 0===(c=r?r(p,d,s):void 0)&&(c=G(p)?p:V(t[i+1])?[]:{})}j(s,d,c),s=s[d]}return e}(e,t,n)}},4441:(e,t,n)=>{var r=n(8694).getUint64;e.exports=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},i=12;0===n.version?(n.earliestPresentationTime=t.getUint32(i),n.firstOffset=t.getUint32(i+4),i+=8):(n.earliestPresentationTime=r(e.subarray(i)),n.firstOffset=r(e.subarray(i+8)),i+=16),i+=2;var o=t.getUint16(i);for(i+=2;o>0;i+=12,o--)n.references.push({referenceType:(128&e[i])>>>7,referencedSize:2147483647&t.getUint32(i),subsegmentDuration:t.getUint32(i+4),startsWithSap:!!(128&e[i+8]),sapType:(112&e[i+8])>>>4,sapDeltaTime:268435455&t.getUint32(i+8)});return n}},9750:e=>{var t,n,r,i,o,a,s,d=9e4;t=function(e){return e*d},n=function(e,t){return e*t},r=function(e){return e/d},i=function(e,t){return e/t},o=function(e,n){return t(i(e,n))},a=function(e,t){return n(r(e),t)},s=function(e,t,n){return r(n?e:e-t)},e.exports={ONE_SECOND_IN_TS:d,secondsToVideoTs:t,secondsToAudioTs:n,videoTsToSeconds:r,audioTsToSeconds:i,audioTsToVideoTs:o,videoTsToAudioTs:a,metadataTsToSeconds:s}},8694:e=>{var t=Math.pow(2,32);e.exports={getUint64:function(e){var n,r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getBigUint64?(n=r.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(n):n:r.getUint32(0)*t+r.getUint32(4)},MAX_UINT32:t}},2695:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,d=[],c=!1,l=-1;function u(){c&&s&&(c=!1,s.length?d=s.concat(d):l=-1,d.length&&p())}function p(){if(!c){var e=a(u);c=!0;for(var t=d.length;t;){for(s=d,d=[];++l<t;)s&&s[l].run();l=-1,t=d.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new f(e,t)),1!==d.length||c||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},6856:(e,t,n)=>{"use strict";var r=Object.prototype.hasOwnProperty;function i(e,t){return Array.isArray(e)?function(e,t){for(var n,r="",o="",a=Array.isArray(t),s=0;s<e.length;s++)(n=i(e[s]))&&(a&&t[s]&&(n=d(n)),r=r+o+n,o=" ");return r}(e,t):e&&"object"==typeof e?function(e){var t="",n="";for(var i in e)i&&e[i]&&r.call(e,i)&&(t=t+n+i,n=" ");return t}(e):e||""}function o(e){if(!e)return"";if("object"==typeof e){var t="";for(var n in e)r.call(e,n)&&(t=t+n+":"+e[n]+";");return t}return e+""}function a(e,t,n,r){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(r?e:e+'="'+e+'"');var i=typeof t;return"object"!==i&&"function"!==i||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=d(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}t.merge=function e(t,n){if(1===arguments.length){for(var r=t[0],i=1;i<t.length;i++)r=e(r,t[i]);return r}for(var a in n)if("class"===a){var s=t[a]||[];t[a]=(Array.isArray(s)?s:[s]).concat(n[a]||[])}else if("style"===a){s=(s=o(t[a]))&&";"!==s[s.length-1]?s+";":s;var d=o(n[a]);d=d&&";"!==d[d.length-1]?d+";":d,t[a]=s+d}else t[a]=n[a];return t},t.classes=i,t.style=o,t.attr=a,t.attrs=function(e,t){var n="";for(var s in e)if(r.call(e,s)){var d=e[s];if("class"===s){n=a(s,d=i(d),!1,t)+n;continue}"style"===s&&(d=o(d)),n+=a(s,d,!1,t)}return n};var s=/["&<>]/;function d(e){var t=""+e,n=s.exec(t);if(!n)return e;var r,i,o,a="";for(r=n.index,i=0;r<t.length;r++){switch(t.charCodeAt(r)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 60:o="&lt;";break;case 62:o="&gt;";break;default:continue}i!==r&&(a+=t.substring(i,r)),i=r+1,a+=o}return i!==r?a+t.substring(i,r):a}t.escape=d,t.rethrow=function e(t,r,i,o){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&r||o))throw t.message+=" on line "+i,t;var a,s,d,c;try{o=o||n(7044).readFileSync(r,{encoding:"utf8"}),a=3,s=o.split("\n"),d=Math.max(i-a,0),c=Math.min(s.length,i+a)}catch(n){return t.message+=" - could not read from "+r+" ("+n.message+")",void e(t,null,i)}a=s.slice(d,c).map((function(e,t){var n=t+d+1;return(n==i?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=r;try{t.message=(r||"Pug")+":"+i+"\n"+a+"\n\n"+t.message}catch(e){}throw t}},553:e=>{"use strict";var t={};function n(e,n,r){r||(r=Error);var i=function(e){var t,r;function i(t,r,i){return e.call(this,function(e,t,r){return"string"==typeof n?n:n(e,t,r)}(t,r,i))||this}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i}(r);i.prototype.name=r.name,i.prototype.code=e,t[e]=i}function r(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,o,a,s,d;if("string"==typeof t&&(o="not ",t.substr(0,4)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-9,n)===t}(e," argument"))a="The ".concat(e," ").concat(i," ").concat(r(t,"type"));else{var c=("number"!=typeof d&&(d=0),d+1>(s=e).length||-1===s.indexOf(".",d)?"argument":"property");a='The "'.concat(e,'" ').concat(c," ").concat(i," ").concat(r(t,"type"))}return a+". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},673:(e,t,n)=>{"use strict";var r=n(2695),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=l;var o=n(5006),a=n(8719);n(3730)(l,o);for(var s=i(a.prototype),d=0;d<s.length;d++){var c=s[d];l.prototype[c]||(l.prototype[c]=a.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||r.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},4343:(e,t,n)=>{"use strict";e.exports=i;var r=n(8597);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(3730)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},5006:(e,t,n)=>{"use strict";var r,i=n(2695);e.exports=k,k.ReadableState=S,n(3346).EventEmitter;var o,a=function(e,t){return e.listeners(t).length},s=n(8208),d=n(5175).Buffer,c=n.g.Uint8Array||function(){},l=n(6029);o=l&&l.debuglog?l.debuglog("stream"):function(){};var u,p,f,h=n(4506),g=n(3390),m=n(1111).getHighWaterMark,v=n(553).q,y=v.ERR_INVALID_ARG_TYPE,b=v.ERR_STREAM_PUSH_AFTER_EOF,_=v.ERR_METHOD_NOT_IMPLEMENTED,w=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(3730)(k,s);var T=g.errorOrDestroy,I=["error","close","destroy","pause","resume"];function S(e,t,i){r=r||n(673),e=e||{},"boolean"!=typeof i&&(i=t instanceof r),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",i),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(u||(u=n(7361).s),this.decoder=new u(e.encoding),this.encoding=e.encoding)}function k(e){if(r=r||n(673),!(this instanceof k))return new k(e);var t=this instanceof r;this._readableState=new S(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function C(e,t,n,r,i){o("readableAddChunk",t);var a,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?x(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,O(e)))}}(e,s);else if(i||(a=function(e,t){var n,r;return r=t,d.isBuffer(r)||r instanceof c||"string"==typeof t||void 0===t||e.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],t)),n}(s,t)),a)T(e,a);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===d.prototype||(t=function(e){return d.from(e)}(t)),r)s.endEmitted?T(e,new w):E(e,s,t,!0);else if(s.ended)T(e,new b);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?E(e,s,t,!1):D(e,s)):E(e,s,t,!1)}else r||(s.reading=!1,D(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function E(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&x(e)),D(e,t)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),k.prototype.destroy=g.destroy,k.prototype._undestroy=g.undestroy,k.prototype._destroy=function(e,t){t(e)},k.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=d.from(e,t),t=""),n=!0),C(this,e,t,!1,n)},k.prototype.unshift=function(e){return C(this,e,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(e){u||(u=n(7361).s);var t=new u(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var A=1073741824;function P(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(O,e))}function O(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function D(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(R,e,t))}function R(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(o("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function M(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function N(e){o("readable nexttick read 0"),e.read(0)}function U(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function B(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick(q,t,e))}function q(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function F(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}k.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):x(this),null;if(0===(e=P(e,t))&&t.ended)return 0===t.length&&B(this),null;var r,i=t.needReadable;return o("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",i=!0),t.ended||t.reading?o("reading or ended",i=!1):i&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=P(n,t))),null===(r=e>0?j(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&B(this)),null!==r&&this.emit("data",r),r},k.prototype._read=function(e){T(this,new _("_read()"))},k.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,o("pipe count=%d opts=%j",r.pipesCount,t);var s=t&&!1===t.end||e===i.stdout||e===i.stderr?g:d;function d(){o("onend"),e.end()}r.endEmitted?i.nextTick(s):n.once("end",s),e.on("unpipe",(function t(i,a){o("onunpipe"),i===n&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,o("cleanup"),e.removeListener("close",f),e.removeListener("finish",h),e.removeListener("drain",c),e.removeListener("error",p),e.removeListener("unpipe",t),n.removeListener("end",d),n.removeListener("end",g),n.removeListener("data",u),l=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}));var c=function(e){return function(){var t=e._readableState;o("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,L(e))}}(n);e.on("drain",c);var l=!1;function u(t){o("ondata");var i=e.write(t);o("dest.write",i),!1===i&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==F(r.pipes,e))&&!l&&(o("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function p(t){o("onerror",t),g(),e.removeListener("error",p),0===a(e,"error")&&T(e,t)}function f(){e.removeListener("finish",h),g()}function h(){o("onfinish"),e.removeListener("close",f),g()}function g(){o("unpipe"),n.unpipe(e)}return n.on("data",u),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",p),e.once("close",f),e.once("finish",h),e.emit("pipe",n),r.flowing||(o("pipe resume"),n.resume()),e},k.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=F(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},k.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,o("on readable",r.length,r.reading),r.length?x(this):r.reading||i.nextTick(N,this))),n},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(M,this),n},k.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||i.nextTick(M,this),t},k.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(U,e,t))}(this,e)),e.paused=!1,this},k.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(o("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){o("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<I.length;a++)e.on(I[a],this.emit.bind(this,I[a]));return this._read=function(t){o("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=n(8187)),p(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),k._fromList=j,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(k.from=function(e,t){return void 0===f&&(f=n(3733)),f(k,e,t)})},8597:(e,t,n)=>{"use strict";e.exports=l;var r=n(553).q,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,d=n(673);function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);d.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?p(this,null,null):this._flush((function(t,n){p(e,t,n)}))}function p(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}n(3730)(l,d),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,d.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){d.prototype._destroy.call(this,e,(function(e){t(e)}))}},8719:(e,t,n)=>{"use strict";var r,i=n(2695);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(undefined),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=k,k.WritableState=S;var a,s={deprecate:n(72)},d=n(8208),c=n(5175).Buffer,l=n.g.Uint8Array||function(){},u=n(3390),p=n(1111).getHighWaterMark,f=n(553).q,h=f.ERR_INVALID_ARG_TYPE,g=f.ERR_METHOD_NOT_IMPLEMENTED,m=f.ERR_MULTIPLE_CALLBACK,v=f.ERR_STREAM_CANNOT_PIPE,y=f.ERR_STREAM_DESTROYED,b=f.ERR_STREAM_NULL_VALUES,_=f.ERR_STREAM_WRITE_AFTER_END,w=f.ERR_UNKNOWN_ENCODING,T=u.errorOrDestroy;function I(){}function S(e,t,a){r=r||n(673),e=e||{},"boolean"!=typeof a&&(a=t instanceof r),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=p(this,e,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if("function"!=typeof o)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,o){--t.pendingcb,n?(i.nextTick(o,r),i.nextTick(O,e,t),e._writableState.errorEmitted=!0,T(e,r)):(o(r),e._writableState.errorEmitted=!0,T(e,r),O(e,t))}(e,n,r,t,o);else{var a=P(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||A(e,n),r?i.nextTick(E,e,n,a,o):E(e,n,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function k(e){var t=this instanceof(r=r||n(673));if(!t&&!a.call(k,this))return new k(e);this._writableState=new S(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),d.call(this)}function C(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function E(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),O(e,t)}function A(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,d=!0;n;)i[s]=n,n.isBuf||(d=!1),n=n.next,s+=1;i.allBuffers=d,C(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,u=n.callback;if(C(e,t,!1,t.objectMode?1:c.length,c,l,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function P(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){e._final((function(n){t.pendingcb--,n&&T(e,n),t.prefinished=!0,e.emit("prefinish"),O(e,t)}))}function O(e,t){var n=P(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.nextTick(x,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}n(3730)(k,d),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===k&&e&&e._writableState instanceof S}})):a=function(e){return e instanceof this},k.prototype.pipe=function(){T(this,new v)},k.prototype.write=function(e,t,n){var r,o=this._writableState,a=!1,s=!o.objectMode&&(r=e,c.isBuffer(r)||r instanceof l);return s&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=I),o.ending?function(e,t){var n=new _;T(e,n),i.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var o;return null===n?o=new b:"string"==typeof n||t.objectMode||(o=new h("chunk",["string","Buffer"],n)),!o||(T(e,o),i.nextTick(r,o),!1)}(this,o,e,n))&&(o.pendingcb++,a=function(e,t,n,r,i,o){if(!n){var a=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,n)),t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else C(e,t,!1,s,r,i,o);return d}(this,o,s,e,t,n)),a},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},k.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(e,t,n){n(new g("_write()"))},k.prototype._writev=null,k.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,O(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),k.prototype.destroy=u.destroy,k.prototype._undestroy=u.undestroy,k.prototype._destroy=function(e,t){t(e)}},8187:(e,t,n)=>{"use strict";var r,i=n(2695);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(2426),s=Symbol("lastResolve"),d=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),u=Symbol("lastPromise"),p=Symbol("handlePromise"),f=Symbol("stream");function h(e,t){return{value:e,done:t}}function g(e){var t=e[s];if(null!==t){var n=e[f].read();null!==n&&(e[u]=null,e[s]=null,e[d]=null,t(h(n,!1)))}}function m(e){i.nextTick(g,e)}var v=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((o(r={get stream(){return this[f]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(h(void 0,!0));if(this[f].destroyed)return new Promise((function(t,n){i.nextTick((function(){e[c]?n(e[c]):t(h(void 0,!0))}))}));var n,r=this[u];if(r)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[l]?n(h(void 0,!0)):t[p](n,r)}),r)}}(r,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(h(o,!1));n=new Promise(this[p])}return this[u]=n,n}},Symbol.asyncIterator,(function(){return this})),o(r,"return",(function(){var e=this;return new Promise((function(t,n){e[f].destroy(null,(function(e){e?n(e):t(h(void 0,!0))}))}))})),r),v);e.exports=function(e){var t,n=Object.create(y,(o(t={},f,{value:e,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,d,{value:null,writable:!0}),o(t,c,{value:null,writable:!0}),o(t,l,{value:e._readableState.endEmitted,writable:!0}),o(t,p,{value:function(e,t){var r=n[f].read();r?(n[u]=null,n[s]=null,n[d]=null,e(h(r,!1))):(n[s]=e,n[d]=t)},writable:!0}),t));return n[u]=null,a(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[d];return null!==t&&(n[u]=null,n[s]=null,n[d]=null,t(e)),void(n[c]=e)}var r=n[s];null!==r&&(n[u]=null,n[s]=null,n[d]=null,r(h(void 0,!0))),n[l]=!0})),e.on("readable",m.bind(null,n)),n}},4506:(e,t,n)=>{"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(5175).Buffer,s=n(462).inspect,d=s&&s.custom||"inspect";function c(e,t,n){a.prototype.copy.call(e,t,n)}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t=a.allocUnsafe(e>>>0),n=this.head,r=0;n;)c(n.data,t,r),r+=n.data.length,n=n.next;return t}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:d,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&o(t.prototype,n),e}()},3390:(e,t,n)=>{"use strict";var r=n(2695);function i(e,t){a(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function a(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,s=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return s||d?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(a,this,e)):r.nextTick(a,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?n._writableState?n._writableState.errorEmitted?r.nextTick(o,n):(n._writableState.errorEmitted=!0,r.nextTick(i,n,e)):r.nextTick(i,n,e):t?(r.nextTick(o,n),t(e)):r.nextTick(o,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}},2426:(e,t,n)=>{"use strict";var r=n(553).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var a=n.readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,d=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){s=!1,c=!0,a||o.call(t)},u=t._readableState&&t._readableState.endEmitted,p=function(){a=!1,u=!0,s||o.call(t)},f=function(e){o.call(t,e)},h=function(){var e;return a&&!u?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):s&&!c?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},g=function(){t.req.on("finish",l)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",l),t.on("abort",h),t.req?g():t.on("request",g)):s&&!t._writableState&&(t.on("end",d),t.on("close",d)),t.on("end",p),t.on("finish",l),!1!==n.error&&t.on("error",f),t.on("close",h),function(){t.removeListener("complete",l),t.removeListener("abort",h),t.removeListener("request",g),t.req&&t.req.removeListener("finish",l),t.removeListener("end",d),t.removeListener("close",d),t.removeListener("finish",l),t.removeListener("end",p),t.removeListener("error",f),t.removeListener("close",h)}}},3733:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},2970:(e,t,n)=>{"use strict";var r,i=n(553).q,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function d(e){e()}function c(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var l,u=function(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var p=t.map((function(e,i){var o=i<t.length-1;return function(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;e.on("close",(function(){s=!0})),void 0===r&&(r=n(2426)),r(e,{readable:t,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var d=!1;return function(t){if(!s&&!d)return d=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new a("pipe"))}}(e,o,i>0,(function(e){l||(l=e),e&&p.forEach(d),o||(p.forEach(d),u(l))}))}));return t.reduce(c)}},1111:(e,t,n)=>{"use strict";var r=n(553).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},8208:(e,t,n)=>{e.exports=n(3346).EventEmitter},9685:(e,t,n)=>{var r=n(5175),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},5891:e=>{e.exports=function(e,t){var n,r=null;try{n=JSON.parse(e,t)}catch(e){r=e}return[r,n]}},8981:(e,t,n)=>{e.exports=i;var r=n(3346).EventEmitter;function i(){r.call(this)}n(3730)(i,r),i.Readable=n(5006),i.Writable=n(8719),i.Duplex=n(673),i.Transform=n(8597),i.PassThrough=n(4343),i.finished=n(2426),i.pipeline=n(2970),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",d));var a=!1;function s(){a||(a=!0,e.end())}function d(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(l(),0===r.listenerCount(this,"error"))throw e}function l(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",d),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",l),n.removeListener("close",l),e.removeListener("close",l)}return n.on("error",c),e.on("error",c),n.on("end",l),n.on("close",l),e.on("close",l),e.emit("pipe",n),e}},7361:(e,t,n)=>{"use strict";var r=n(9685).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=d,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=l,this.end=u,t=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function d(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.s=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=a(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=a(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},4316:function(e){var t,n,r,i,o;t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,n=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var d=n.exec(s.path);s.netLoc=d[1],s.path=d[2]}s.netLoc&&!s.path&&(s.path="/");var c={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(c.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var l=s.path,u=l.substring(0,l.lastIndexOf("/")+1)+a.path;c.path=o.normalizePath(u)}else c.path=s.path,a.params||(c.params=s.params,a.query||(c.query=s.query));return null===c.path&&(c.path=r.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(c)},parseURL:function(e){var n=t.exec(e);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(i,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=o},72:(e,t,n)=>{function r(e){try{if(!n.g.localStorage)return!1}catch(e){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},4067:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)}},4745:(e,t,n)=>{"use strict";let r;n.d(t,{Z:()=>o});const i=new Uint8Array(16);function o(){if(!r&&(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}},26:(e,t,n)=>{"use strict";n.d(t,{S:()=>i});const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));function i(e,t=0){return(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase()}},3334:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(4067),i=n(4745),o=n(26);const a=function(e,t,n){if(r.Z.randomUUID&&!t&&!e)return r.Z.randomUUID();const a=(e=e||{}).random||(e.rng||i.Z)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return(0,o.S)(a)}},448:(e,t,n)=>{var r=n(1667),i=e.exports={WebVTT:n(518),VTTCue:n(8076),VTTRegion:n(1032)};r.vttjs=i,r.WebVTT=i.WebVTT;var o=i.VTTCue,a=i.VTTRegion,s=r.VTTCue,d=r.VTTRegion;i.shim=function(){r.VTTCue=o,r.VTTRegion=a},i.restore=function(){r.VTTCue=s,r.VTTRegion=d},r.VTTCue||i.shim()},518:(e,t,n)=>{var r=n(1709),i=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function o(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function a(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function s(){this.values=i(null)}function d(e,t,n,r){var i=r?e.split(r):[e];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(n);2===a.length&&t(a[0].trim(),a[1].trim())}}function c(e,t,n){var r=e;function i(){var t=a(e);if(null===t)throw new o(o.Errors.BadTimeStamp,"Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function c(){e=e.replace(/^\s+/,"")}if(c(),t.startTime=i(),c(),"--\x3e"!==e.substr(0,3))throw new o(o.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),c(),t.endTime=i(),c(),function(e,t){var r=new s;d(e,(function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];r.integer(e,a),r.percent(e,a)&&r.set("snapToLines",!1),r.alt(e,a,["auto"]),2===o.length&&r.alt("lineAlign",o[1],["start","center","end"]);break;case"position":o=t.split(","),r.percent(e,o[0]),2===o.length&&r.alt("positionAlign",o[1],["start","center","end"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");try{t.line=r.get("line","auto")}catch(e){}t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100);try{t.align=r.get("align","center")}catch(e){t.align=r.get("align","middle")}try{t.position=r.get("position","auto")}catch(e){t.position=r.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=r.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}o.prototype=i(Error.prototype),o.prototype.constructor=o,o.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},s.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var l=r.createElement&&r.createElement("textarea"),u={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},p={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},f={v:"title",lang:"lang"},h={rt:"ruby"};function g(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]*>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function r(e,t){return!h[t.localName]||h[t.localName]===e.localName}function i(t,n){var r=u[t];if(!r)return null;var i=e.document.createElement(r),o=f[t];return o&&n&&(i[o]=n.trim()),i}for(var o,s,d=e.document.createElement("div"),c=d,g=[];null!==(o=n());)if("<"!==o[0])c.appendChild(e.document.createTextNode((s=o,l.innerHTML=s,s=l.textContent,l.textContent="",s)));else{if("/"===o[1]){g.length&&g[g.length-1]===o.substr(2).replace(">","")&&(g.pop(),c=c.parentNode);continue}var m,v=a(o.substr(1,o.length-2));if(v){m=e.document.createProcessingInstruction("timestamp",v),c.appendChild(m);continue}var y=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!y)continue;if(!(m=i(y[1],y[3])))continue;if(!r(c,m))continue;if(y[2]){var b=y[2].split(".");b.forEach((function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(p.hasOwnProperty(n)){var r=t?"background-color":"color",i=p[n];m.style[r]=i}})),m.className=b.join(" ")}g.push(y[1]),c.appendChild(m),c=m}return d}var m=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function v(e){for(var t=0;t<m.length;t++){var n=m[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function y(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function i(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var o=n.match(/^.*(\n|\r)/);return o?(e.length=0,o[0]):n}return"ruby"===t.tagName?i(e):t.childNodes?(r(e,t),i(e)):void 0}for(r(t,e);n=i(t);)for(var o=0;o<n.length;o++)if(v(n.charCodeAt(o)))return"rtl";return"ltr"}function b(){}function _(e,t,n){b.call(this),this.cue=t,this.cueDiv=g(e,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=e.document.createElement("div"),r={direction:y(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var i=0;switch(t.positionAlign){case"start":i=t.position;break;case"center":i=t.position-t.size/2;break;case"end":i=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function w(e){var t,n,r,i;if(e.div){n=e.div.offsetHeight,r=e.div.offsetWidth,i=e.div.offsetTop;var o=(o=e.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();e=e.div.getBoundingClientRect(),t=o?Math.max(o[0]&&o[0].height||0,e.height/o.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||n,this.bottom=e.bottom||i+(e.height||n),this.width=e.width||r,this.lineHeight=void 0!==t?t:e.lineHeight}function T(e,t,n,r){var i=new w(t),o=t.cue,a=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r}(o),s=[];if(o.snapToLines){var d;switch(o.vertical){case"":s=["+y","-y"],d="height";break;case"rl":s=["+x","-x"],d="width";break;case"lr":s=["-x","+x"],d="width"}var c=i.lineHeight,l=c*Math.round(a),u=n[d]+c,p=s[0];Math.abs(l)>u&&(l=l<0?-1:1,l*=Math.ceil(u/c)*c),a<0&&(l+=""===o.vertical?n.height:n.width,s=s.reverse()),i.move(p,l)}else{var f=i.lineHeight/n.height*100;switch(o.lineAlign){case"center":a-=f/2;break;case"end":a-=f}switch(o.vertical){case"":t.applyStyles({top:t.formatStyle(a,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(a,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(a,"%")})}s=["+y","-x","+x","-y"],i=new w(t)}var h=function(e,t){for(var i,o=new w(e),a=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(r);)e.move(t[s]);if(e.within(n))return e;var d=e.intersectPercentage(n);a>d&&(i=new w(e),a=d),e=new w(o)}return i||o}(i,s);t.move(h.toCSSCompatValues(n))}function I(){}b.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},b.prototype.formatStyle=function(e,t){return 0===e?0:e+t},_.prototype=i(b.prototype),_.prototype.constructor=_,w.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},w.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},w.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},w.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},w.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},w.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},w.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},w.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},I.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},I.convertCueToDOMTree=function(e,t){return e&&t?g(e,t):null},I.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var i=[],o=w.getSimpleBoxPosition(r),a={font:Math.round(.05*o.height*100)/100+"px sans-serif"};!function(){for(var n,s,d=0;d<t.length;d++)s=t[d],n=new _(e,s,a),r.appendChild(n.div),T(0,n,o,i),s.displayState=n.div,i.push(w.getSimpleBoxPosition(n))}()}else for(var s=0;s<t.length;s++)r.appendChild(t[s].displayState)},I.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},I.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof o))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t,n=this;function r(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),r}e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var l=(i=r()).match(/^WEBVTT([ \t].*)?$/);if(!l||!l[0])throw new o(o.Errors.BadSignature);n.state="HEADER"}for(var u=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(u?u=!1:i=r(),n.state){case"HEADER":/:/.test(i)?(t=i).match(/X-TIMESTAMP-MAP/)?d(t,(function(e,t){"X-TIMESTAMP-MAP"===e&&function(e){var t=new s;d(e,(function(e,n){switch(e){case"MPEGT":t.integer(e+"S",n);break;case"LOCA":t.set(e+"L",a(n))}}),/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:t.get("MPEGTS"),LOCAL:t.get("LOCAL")})}(t)}),/=/):d(t,(function(e,t){"Region"===e&&function(e){var t=new s;if(d(e,(function(e,n){switch(e){case"id":t.set(e,n);break;case"width":t.percent(e,n);break;case"lines":t.integer(e,n);break;case"regionanchor":case"viewportanchor":var r=n.split(",");if(2!==r.length)break;var i=new s;if(i.percent("x",r[0]),i.percent("y",r[1]),!i.has("x")||!i.has("y"))break;t.set(e+"X",i.get("x")),t.set(e+"Y",i.get("y"));break;case"scroll":t.alt(e,n,["up"])}}),/=/,/\s/),t.has("id")){var r=new(n.vttjs.VTTRegion||n.window.VTTRegion);r.width=t.get("width",100),r.lines=t.get("lines",3),r.regionAnchorX=t.get("regionanchorX",0),r.regionAnchorY=t.get("regionanchorY",100),r.viewportAnchorX=t.get("viewportanchorX",0),r.viewportAnchorY=t.get("viewportanchorY",100),r.scroll=t.get("scroll",""),n.onregion&&n.onregion(r),n.regionList.push({id:t.get("id"),region:r})}}(t)}),/:/):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(e){n.cue.align="middle"}if(n.state="CUE",-1===i.indexOf("--\x3e")){n.cue.id=i;continue}case"CUE":try{c(i,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var p=-1!==i.indexOf("--\x3e");if(!i||p&&(u=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=i.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":i||(n.state="ID");continue}}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new o(o.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=I},8076:e=>{var t={"":1,lr:1,rl:1},n={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function r(e){return"string"==typeof e&&!!n[e.toLowerCase()]&&e.toLowerCase()}function i(e,n,i){this.hasBeenReset=!1;var o="",a=!1,s=e,d=n,c=i,l=null,u="",p=!0,f="auto",h="start",g="auto",m="auto",v=100,y="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return o},set:function(e){o=""+e}},pauseOnExit:{enumerable:!0,get:function(){return a},set:function(e){a=!!e}},startTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");s=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");d=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return c},set:function(e){c=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===n)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=n,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return p},set:function(e){p=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return f},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=r(e);t?(h=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");g=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return m},set:function(e){var t=r(e);t?(m=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return v},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");v=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return y},set:function(e){var t=r(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");y=t,this.hasBeenReset=!0}}}),this.displayState=void 0}i.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=i},1032:e=>{var t={"":!0,up:!0};function n(e){return"number"==typeof e&&e>=0&&e<=100}e.exports=function(){var e=100,r=3,i=0,o=100,a=0,s=100,d="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!n(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return r},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");r=e}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!n(e))throw new Error("RegionAnchorX must be between 0 and 100.");o=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!n(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!n(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!n(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function(){return d},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);!1===n?console.warn("Scroll: an invalid or illegal string was specified."):d=n}}})}},7745:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>$u});var r=n(1785),i=n(1909),o=n(6775),a=n(303),s=n(5446);function d(e,t,n){t.split&&(t=t.split("."));for(var r,i,o=0,a=t.length,s=e;o<a&&"__proto__"!==(i=t[o++])&&"constructor"!==i&&"prototype"!==i;)s=s[i]=o===a?n:typeof(r=s[i])==typeof t?r:0*t[o]!=0||~(""+t[o]).indexOf(".")?{}:[]}var c=n(5847),l=n(3660),u=n(251),p=n(6370),f=n(388),h=n(6343),g=n(7533),m=u.FP,v=m.AD_RENDER_FAILED,y=m.AD_RENDER_SUCCEEDED;function b(e){var t=e.reason,n=e.message,r=e.bid,i=e.id,o={reason:t,message:n};r&&(o.bid=r),i&&(o.adId=i),(0,a.H)(n),c.j8(v,o)}function _(e){var t=e.doc,n=e.bid,r=e.id,i={doc:t};n&&(i.bid=n),r&&(i.adId=r),c.j8(y,i)}var w=u.FP.BID_WON,T=u.FP.STALE_RENDER,I=new WeakSet,S={"Prebid Request":function(e,t,n){if(null!=n){if(n.status!==u.UE.fe||((0,a.yN)("Ad id ".concat(n.adId," has been rendered before")),c.j8(T,n),!(0,s.Z)(g.vc.getConfig("auctionOptions"),"suppressStaleRender"))){try{!function(e,t){var n=e.adId,r=e.ad,i=e.adUrl,o=e.width,s=e.height,d=e.renderer,c=e.cpm,l=e.originalCpm;(0,h.Pd)(d)?(0,h._U)(d,e):n&&(C(e),t({message:"Prebid Response",ad:(0,a.ew)(r,l||c),adUrl:(0,a.ew)(i,l||c),adId:n,width:o,height:s}))}(n,e)}catch(e){return void b({reason:u.q_.EXCEPTION,message:e.message,id:t.adId,bid:n})}p.K.addWinningBid(n),c.j8(w,n)}}else b({reason:u.q_.CANNOT_FIND_AD,message:"Cannot find ad for cross-origin render request: '".concat(t.adId,"'"),id:t.adId})},"Prebid Event":function(e,t,n){if(null!=n)if(n.status===u.UE.fe)switch(t.event){case u.FP.AD_RENDER_FAILED:b({bid:n,id:t.adId,reason:t.info.reason,message:t.info.message});break;case u.FP.AD_RENDER_SUCCEEDED:_({doc:null,bid:n,id:t.adId});break;default:(0,a.H)("Received x-origin event request for unsupported event: '".concat(t.event,"' (adId: '").concat(t.adId,"')"))}else(0,a.yN)("Received x-origin event request without corresponding render request for ad '".concat(t.adId,"'"));else(0,a.H)("Cannot find ad '".concat(t.adId,"' for x-origin event request"))}};function k(e){var t=e.message?"message":"data",n={};try{n=JSON.parse(e[t])}catch(e){return}if(n&&n.adId&&n.message){var r=(0,f.sE)(p.K.getBidsReceived(),(function(e){return e.adId===n.adId}));S.hasOwnProperty(n.message)&&S[n.message](function(e){return null==e.origin&&0===e.ports.length?function(){var e="Cannot post message to a frame with null origin. Please update creatives to use MessageChannel, see https://github.com/prebid/Prebid.js/issues/7870";throw(0,a.H)(e),new Error(e)}:e.ports.length>0?function(t){e.ports[0].postMessage(JSON.stringify(t))}:function(t){e.source.postMessage(JSON.stringify(t),e.origin)}}(e),n,r)}}function C(e){var t=e.adId,n=e.adUnitCode,r=e.width,i=e.height;["div","iframe"].forEach((function(e){var o=function(e){var r=function(e,t){return(0,a.T9)()?function(e){var t=(0,f.sE)(window.googletag.pubads().getSlots(),(function(t){return(0,f.sE)(t.getTargetingKeys(),(function(n){return(0,f.q9)(t.getTargeting(n),e)}))}));return t?t.getSlotElementId():null}(e):(0,a.X4)()?function(e){var t=window.apntag.getTag(e);return t&&t.targetId}(t):t}(t,n),i=document.getElementById(r);return i&&i.querySelector(e)}(e+':not([style*="display: none"])');if(o){var s=o.style;s.width=r?r+"px":"100%",s.height=i+"px"}else(0,a.yN)("Unable to locate matching page element for adUnitCode ".concat(n,".  Can't resize it to ad's dimensions.  Please review setup."))}))}Object.assign(S,{"Prebid Native":function(e,t,n){if(null!=n)switch(I.has(n)||(I.add(n),p.K.addWinningBid(n),c.j8(w,n)),t.action){case"assetRequest":e((0,l.eK)(t,n));break;case"allAssetRequest":e((0,l.JL)(t,n));break;case"resizeNativeHeight":n.height=t.height,n.width=t.width,C(n);break;default:(0,l.e6)(t,n)}else(0,a.H)("Cannot find ad for x-origin event request: '".concat(t.adId,"'"))}});var E=n(4277),A=n(3014),P=n(2339),x=n(8717),O=n(8962),D=[],R=1;g.vc.getConfig("ttlBuffer",(function(e){"number"==typeof e.ttlBuffer?R=e.ttlBuffer:(0,a.H)("Invalid value for ttlBuffer",e.ttlBuffer)}));var M="targetingControls.allowTargetingKeys",N="targetingControls.addTargetingKeys",U='Only one of "'.concat(M,'" or "').concat(N,'" can be set'),L=Object.keys(u.TD).map((function(e){return u.TD[e]})),j={isActualBid:function(e){return e.getStatusCode()===u.Q_.Q},isBidNotExpired:function(e){return e.responseTimestamp+1e3*(e.ttl-(e.hasOwnProperty("ttlBuffer")?e.ttlBuffer:R))>(0,a.AB)()},isUnusedBid:function(e){return e&&(e.status&&!(0,f.q9)([u.UE.fe],e.status)||!e.status)}};function B(e){return!Object.values(j).some((function(t){return!t(e)}))}var q=(0,x.z3)("sync",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])){var r=[],i=g.vc.getConfig("sendBidsControl.dealPrioritization"),o=(0,a.vM)(e,"adUnitCode");return Object.keys(o).forEach((function(e){var s=[],d=(0,a.vM)(o[e],"bidderCode");Object.keys(d).forEach((function(e){return s.push(d[e].reduce(t))})),n>0?(s=i?s.sort(F(!0)):s.sort((function(e,t){return t.cpm-e.cpm})),r.push.apply(r,(0,A.Z)(s.slice(0,n)))):r.push.apply(r,(0,A.Z)(s))})),r}return e}));function F(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return void 0!==t.adserverTargeting.hb_deal&&void 0===n.adserverTargeting.hb_deal?-1:void 0===t.adserverTargeting.hb_deal&&void 0!==n.adserverTargeting.hb_deal?1:e?n.cpm-t.cpm:n.adserverTargeting.hb_pb-t.adserverTargeting.hb_pb}}var V=function(e){var t={},n={};function r(e,t){return e.adserverTargeting&&t&&((0,a.kJ)(t)&&(0,f.q9)(t,e.adUnitCode)||"string"==typeof t&&e.adUnitCode===t)}function o(t){return"string"==typeof t?[t]:(0,a.kJ)(t)?t:e.getAdUnitCodes()||[]}function d(){var t=e.getBidsReceived();if(g.vc.getConfig("useBidCache")){var r=g.vc.getConfig("bidCacheFilterFunction");"function"==typeof r&&(t=t.filter((function(e){return n[e.adUnitCode]===e.auctionId||!!r(e)})))}else t=t.filter((function(e){return n[e.adUnitCode]===e.auctionId}));return t=t.filter((function(e){return(0,s.Z)(e,"video.context")!==P.Oh})).filter(B),q(t,a.K$)}function c(e,n){var r=t.getWinningBids(e,n),o=p();return r=r.map((function(e){return(0,i.Z)({},e.adUnitCode,Object.keys(e.adserverTargeting).filter((function(t){return void 0===e.sendStandardTargeting||e.sendStandardTargeting||-1===o.indexOf(t)})).reduce((function(t,n){var r=[e.adserverTargeting[n]],o=(0,i.Z)({},n.substring(0,20),r);if(n===u.TD.DEAL){var a="".concat(n,"_").concat(e.bidderCode).substring(0,20),s=(0,i.Z)({},a,r);return[].concat((0,A.Z)(t),[o,s])}return[].concat((0,A.Z)(t),[o])}),[]))})),r}function p(){return e.getStandardBidderAdServerTargeting().map((function(e){return e.key})).concat(L).filter(a.tT)}function h(e,t,n,r){return Object.keys(t.adserverTargeting).filter(m()).forEach((function(n){e.length&&e.filter(function(e){return function(n){return n.adUnitCode===t.adUnitCode&&n.adserverTargeting[e]}}(n)).forEach(function(e){return function(n){(0,a.kJ)(n.adserverTargeting[e])||(n.adserverTargeting[e]=[n.adserverTargeting[e]]),n.adserverTargeting[e]=n.adserverTargeting[e].concat(t.adserverTargeting[e]).filter(a.tT),delete t.adserverTargeting[e]}}(n))})),e.push(t),e}function m(){var e=p();return e=e.concat(l.xc),function(t){return-1===e.indexOf(t)}}function v(e){return(0,i.Z)({},e.adUnitCode,Object.keys(e.adserverTargeting).filter(m()).map((function(t){return(0,i.Z)({},t.substring(0,20),[e.adserverTargeting[t]])})))}function y(e,t){return t.map((function(t){return(0,i.Z)({},"".concat(t,"_").concat(e.bidderCode).substring(0,20),[e.adserverTargeting[t]])}))}return t.setLatestAuctionForAdUnit=function(e,t){n[e]=t},t.resetPresetTargeting=function(t,n){if((0,a.T9)()){var r=o(t),i=e.getAdUnits().filter((function(e){return(0,f.q9)(r,e.code)})),s=D.reduce((function(e,t){return e[t]=null,e}),{});window.googletag.pubads().getSlots().forEach((function(e){var t=(0,a.LQ)(n)&&n(e);i.forEach((function(n){(n.code===e.getAdUnitPath()||n.code===e.getSlotElementId()||(0,a.LQ)(t)&&t(n.code))&&e.updateTargetingFromMap(s)}))}))}},t.resetPresetTargetingAST=function(e){o(e).forEach((function(e){var t=window.apntag.getTag(e);if(t&&t.keywords){var n=Object.keys(t.keywords),r={};n.forEach((function(e){(0,f.q9)(D,e.toLowerCase())||(r[e]=t.keywords[e])})),window.apntag.modifyTag(e,{keywords:r})}}))},t.getAllTargeting=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d(),p=o(t),m=c(p,n).concat(function(e,t){return t.filter((function(t){return(0,f.q9)(e,t.adUnitCode)})).map((function(e){return Object.assign({},e)})).reduce(h,[]).map(v).filter((function(e){return e}))}(p,n)).concat(g.vc.getConfig("enableSendAllBids")?function(e,t){var n=L.concat(l.xc),o=g.vc.getConfig("sendBidsControl.bidLimit"),s=q(t,a.ZH,o),d=g.vc.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),c=d?d.map((function(e){return u.TD[e]})):n;return s.map((function(t){if(r(t,e))return(0,i.Z)({},t.adUnitCode,y(t,n.filter((function(e){return void 0!==t.adserverTargeting[e]&&-1!==c.indexOf(e)}))))})).filter((function(e){return e}))}(p,n):function(e,t){if(!0===g.vc.getConfig("targetingControls.alwaysIncludeDeals")){var n=L.concat(l.xc);return q(t,a.ZH).map((function(t){if(t.dealId&&r(t,e))return(0,i.Z)({},t.adUnitCode,y(t,n.filter((function(e){return void 0!==t.adserverTargeting[e]}))))})).filter((function(e){return e}))}return[]}(p,n)).concat(function(t){function n(e){return(0,s.Z)(e,u.k2.xn)}return e.getAdUnits().filter((function(e){return(0,f.q9)(t,e.code)&&n(e)})).map((function(e){return(0,i.Z)({},e.code,function(e){var t=n(e);return Object.keys(t).map((function(e){return(0,a.d8)(t[e])&&(t[e]=t[e].split(",").map((function(e){return e.trim()}))),(0,a.kJ)(t[e])||(t[e]=[t[e]]),(0,i.Z)({},e,t[e])}))}(e))}))}(p));m.map((function(e){Object.keys(e).map((function(t){e[t].map((function(e){-1===D.indexOf(Object.keys(e)[0])&&(D=Object.keys(e).concat(D))}))}))}));var b=Object.keys(Object.assign({},u.kF,u.FY)),_=g.vc.getConfig(M),w=g.vc.getConfig(N);if(null!=w&&null!=_)throw new Error(U);_=null!=w?b.concat(w):_||b,Array.isArray(_)&&_.length>0&&(m=function(e,t){var n=Object.assign({},u.TD,u.FY),r=Object.keys(n),i={};(0,a.PN)("allowTargetingKeys - allowed keys [ ".concat(t.map((function(e){return n[e]})).join(", ")," ]")),e.map((function(e){var o=Object.keys(e)[0],a=e[o].filter((function(e){var o=Object.keys(e)[0],a=0===r.filter((function(e){return 0===o.indexOf(n[e])})).length||(0,f.sE)(t,(function(e){var t=n[e];return 0===o.indexOf(t)}));return i[o]=!a,a}));e[o]=a}));var o=Object.keys(i).filter((function(e){return i[e]}));return(0,a.PN)("allowTargetingKeys - removed keys [ ".concat(o.join(", ")," ]")),e.filter((function(e){return e[Object.keys(e)[0]].length>0}))}(m,_)),m=function(e){var t=e.map((function(e){return(0,i.Z)({},Object.keys(e)[0],e[Object.keys(e)[0]].map((function(e){return(0,i.Z)({},Object.keys(e)[0],e[Object.keys(e)[0]].join(","))})).reduce((function(e,t){return Object.assign(t,e)}),{}))})).reduce((function(e,t){var n=Object.keys(t)[0];return e[n]=Object.assign({},e[n],t[n]),e}),{});return t}(m);var T=g.vc.getConfig("targetingControls.auctionKeyMaxChars");return T&&((0,a.PN)("Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ".concat(T," characters.  Running checks on auction keys...")),m=function(e,t){var n=(0,a.I8)(e),r=Object.keys(n).map((function(e){return{adUnitCode:e,adserverTargeting:n[e]}})).sort(F());return r.reduce((function(e,r,i,o){var s,d=(s=r.adserverTargeting,Object.keys(s).reduce((function(e,t){return e+"".concat(t,"%3d").concat(encodeURIComponent(s[t]),"%26")}),""));i+1===o.length&&(d=d.slice(0,-3));var c=r.adUnitCode,l=d.length;return l<=t?(t-=l,(0,a.PN)("AdUnit '".concat(c,"' auction keys comprised of ").concat(l," characters.  Deducted from running threshold; new limit is ").concat(t),n[c]),e[c]=n[c]):(0,a.yN)("The following keys for adUnitCode '".concat(c,"' exceeded the current limit of the 'auctionKeyMaxChars' setting.\nThe key-set size was ").concat(l,", the current allotted amount was ").concat(t,".\n"),n[c]),i+1===o.length&&0===Object.keys(e).length&&(0,a.H)("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e}),{})}(m,T)),p.forEach((function(e){m[e]||(m[e]={})})),m},g.vc.getConfig("targetingControls",(function(e){null!=(0,s.Z)(e,M)&&null!=(0,s.Z)(e,N)&&(0,a.H)(U)})),t.setTargetingForGPT=function(e,t){window.googletag.pubads().getSlots().forEach((function(n){Object.keys(e).filter(t?t(n):(0,a.zV)(n)).forEach((function(t){Object.keys(e[t]).forEach((function(n){var r=e[t][n];"string"==typeof r&&-1!==r.indexOf(",")&&(r=r.split(",")),e[t][n]=r})),(0,a.ji)("Attempting to set targeting-map for slot: ".concat(n.getSlotElementId()," with targeting-map:"),e[t]),n.updateTargetingFromMap(e[t])}))}))},t.getWinningBids=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d(),n=o(e);return t.filter((function(e){return(0,f.q9)(n,e.adUnitCode)})).filter((function(e){return!0===O.S.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0})).map((function(e){return e.adUnitCode})).filter(a.tT).map((function(e){return t.filter((function(t){return t.adUnitCode===e?t:null})).reduce(a.ZH)}))},t.setTargetingForAst=function(e){var n=t.getAllTargeting(e);try{t.resetPresetTargetingAST(e)}catch(e){(0,a.H)("unable to reset targeting for AST"+e)}Object.keys(n).forEach((function(e){return Object.keys(n[e]).forEach((function(t){if((0,a.ji)("Attempting to set targeting for targetId: ".concat(e," key: ").concat(t," value: ").concat(n[e][t])),(0,a.d8)(n[e][t])||(0,a.kJ)(n[e][t])){var r={};t.search(/pt[0-9]/)<0?r[t.toUpperCase()]=n[e][t]:r[t]=n[e][t],window.apntag.setKeywords(e,r,{overrideKeyValue:!0})}}))}))},t.isApntagDefined=function(){if(window.apntag&&(0,a.LQ)(window.apntag.setKeywords))return!0},t}(p.K),z=n(3776),W=n(9092),H=n(8595),Z="__pbjs_debugging__";function $(){return(0,o.R)().installedModules.includes("debugging")}function G(e){return new H.Z((function(t){(0,W.B)(e,"debugging",t)}))}var K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.load,n=void 0===t?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alreadyInstalled,n=void 0===t?$:t,r=e.script,i=void 0===r?G:r,s=null;return function(){return null==s&&(s=new H.Z((function(e,t){setTimeout((function(){if(n())e();else{var r="https://cdn.jsdelivr.net/npm/prebid.js@7.47.0/dist/debugging-standalone.js";(0,a.ji)('Debugging module not installed, loading it from "'.concat(r,'"...')),(0,o.R)()._installDebugging=!0,i(r).then((function(){(0,o.R)()._installDebugging({DEBUG_KEY:Z,hook:x.z3,config:g.vc,createBid:z.m,logger:(0,a.qp)("DEBUG:")})})).then(e,t)}}))}))),s}}():t,r=e.hook,i=void 0===r?(0,x.v5)("requestBids"):r,s=null,d=!1;function c(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(s||H.Z.resolve()).then((function(){return e.apply(t,r)}))}function l(){i.getHooks({hook:c}).remove(),d=!1}return{enable:function(){d||(s=n(),i.before(c,99),d=!0)},disable:l,reset:function(){s=null,l()}}}();K.reset,g.vc.getConfig("debugging",(function(e){var t=e.debugging;null!=t&&t.enabled?K.enable():K.disable()}));var X=n(4799),J=n(2814),Y=n(5801),Q=n(9218),ee=n(3821),te=(0,J.eA)(),ne=(0,a.HP)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host;if(!te.cookiesAreEnabled())return e;var t,n,r=e.split(".");if(2===r.length)return e;var i=-2,o="_rdc".concat(Date.now()),s="writeable";do{t=r.slice(i).join(".");var d=new Date((0,a.AB)()+1e4).toUTCString();te.setCookie(o,s,d,"Lax",t,void 0),te.getCookie(o,void 0)===s?(n=!1,te.setCookie(o,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,t,void 0)):(i+=-1,n=Math.abs(i)<=r.length)}while(n);return t})),re=["architecture","bitness","model","platformVersion","fullVersionList"],ie=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,n=(0,a.xb)(t)?null:Object.freeze(ae(1,t));return function(){return n}}(),oe=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,n={},r=new WeakMap;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;if(!r.has(e)){var i=Array.from(e);i.sort(),r.set(e,i.join("|"))}var o=r.get(e);if(!n.hasOwnProperty(o))try{n[o]=t.getHighEntropyValues(e).then((function(e){return(0,a.xb)(e)?null:Object.freeze(ae(2,e))})).catch((function(){return null}))}catch(e){n[o]=H.Z.resolve(null)}return n[o]}}();function ae(e,t){function n(e,t){var n={brand:e};return(0,a.d8)(t)&&!(0,a.jH)(t)&&(n.version=t.split(".")),n}var r={source:e};return t.platform&&(r.platform=n(t.platform,t.platformVersion)),(t.fullVersionList||t.brands)&&(r.browsers=(t.fullVersionList||t.brands).map((function(e){return n(e.brand,e.version)}))),t.hasOwnProperty("mobile")&&(r.mobile=t.mobile?1:0),["model","bitness","architecture"].forEach((function(e){var n=t[e];(0,a.d8)(n)&&(r[e]=n)})),r}var se=["dooh","app","site"];function de(e){return function(t){return se.reduce((function(n,r){return ce(t,r)&&(null!=n?((0,a.yN)("".concat(e," specifies both '").concat(n,"' and '").concat(r,"'; dropping the latter.")),delete t[r]):n=r),n}),null),t}}function ce(e,t){return null!=e[t]&&Object.keys(e[t]).length>0}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ue={getRefererInfo:ee.nH,findRootDomain:ne,getWindowTop:a.Zy,getWindowSelf:a.e7,getHighEntropySUA:oe,getLowEntropySUA:ie},pe=de("FPD"),fe=(0,x.z3)("sync",(function(e){return H.Z.all([e,(t=g.vc.getConfig("firstPartyData.uaHints"),Array.isArray(t)&&0!==t.length?ue.getHighEntropySUA(t):H.Z.resolve(ue.getLowEntropySUA())).catch((function(){return null}))]).then((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1],o=ue.getRefererInfo();!function(e){["app","site","device"].forEach((function(t){var n=g.vc.getConfig(t);null!=n&&(e[t]=(0,a.Ee)({},n,e[t]))}))}(n),Object.entries(me).forEach((function(e){var t=(0,r.Z)(e,2),i=t[0],s=(0,t[1])(n,o);s&&Object.keys(s).length>0&&(n[i]=(0,a.Ee)({},s,n[i]))})),i&&d(n,"device.sua",Object.assign({},i,n.device.sua)),n=pe(n);var s,c=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(se);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(ce(n,l)){n[l]=(0,a.Ee)({},ve(0,o),n[l]);break}}}catch(e){c.e(e)}finally{c.f()}return n}));var t}));function he(e){try{return e(ue.getWindowTop())}catch(t){return e(ue.getWindowSelf())}}function ge(e){return(0,a.iG)(e,Object.keys(e))}var me={site:function(e,t){if(!se.filter((function(e){return"site"!==e})).some(ce.bind(null,e)))return ge({page:t.page,ref:t.ref})},device:function(){return he((function(e){return{w:e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth,h:e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight,dnt:(0,a.oV)()?1:0,ua:e.navigator.userAgent,language:e.navigator.language.split("-").shift()}}))},regs:function(){var e={};he((function(e){return e.navigator.globalPrivacyControl}))&&d(e,"ext.gpc",1);var t=g.vc.getConfig("coppa");return"boolean"==typeof t&&(e.coppa=t?1:0),e}};function ve(e,t){var n,r,i,o=(0,ee.hh)(t.page,{noLeadingWww:!0});return ge({domain:o,keywords:null===(n=he((function(e){return e.document.querySelector("meta[name='keywords']")})))||void 0===n||null===(r=n.content)||void 0===r||null===(i=r.replace)||void 0===i?void 0:i.call(r,/\s/g,""),publisher:ge({domain:ue.findRootDomain(o)})})}var ye=(0,o.R)(),be=E.k_.triggerUserSyncs,_e=u.FP,we=_e.ADD_AD_UNITS,Te=_e.BID_WON,Ie=_e.REQUEST_BIDS,Se=_e.SET_TARGETING,ke=_e.STALE_RENDER,Ce=u.q_,Ee=Ce.PREVENT_WRITING_ON_MAIN_DOCUMENT,Ae=Ce.NO_AD,Pe=Ce.EXCEPTION,xe=Ce.CANNOT_FIND_AD,Oe=Ce.MISSING_DOC_OR_ADID,De={bidWon:function(e){var t=p.K.getBidsRequested().map((function(e){return e.bids.map((function(e){return e.adUnitCode}))})).reduce(a.xH).filter(a.tT);if((0,a.r3)(t,e))return!0;(0,a.H)('The "'+e+'" placement is not defined.')}};function Re(e,t,n){e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=t,e.defaultView.frameElement.height=n)}function Me(e,t){var n=[];return(0,a.kJ)(e)&&(t?e.length===t:e.length>0)&&(e.every((function(e){return(0,a.HC)(e,2)}))?n=e:(0,a.HC)(e,2)&&n.push(e)),n}function Ne(e){var t=(0,a.I8)(e),n=t.mediaTypes.banner,r=Me(n.sizes);return r.length>0?(n.sizes=r,t.sizes=r):((0,a.H)("Detected a mediaTypes.banner object without a proper sizes field.  Please ensure the sizes are listed like: [[300, 250], ...].  Removing invalid mediaTypes.banner object from request."),delete t.mediaTypes.banner),t}function Ue(e){var t=(0,a.I8)(e),n=t.mediaTypes.video;if(n.playerSize){var r="number"==typeof n.playerSize[0]?2:1,i=Me(n.playerSize,r);i.length>0?(2===r&&(0,a.PN)("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),n.playerSize=i,t.sizes=i):((0,a.H)("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete t.mediaTypes.video.playerSize)}return t}function Le(e){var t=(0,a.I8)(e),n=t.mediaTypes.native;if(n.ortb){var r=Object.keys(u.FY).filter((function(e){return u.FY[e].includes("hb_native_")})),i=Object.keys(n).filter((function(e){return r.includes(e)}));i.length>0&&((0,a.H)("when using native OpenRTB format, you cannot use legacy native properties. Deleting ".concat(i," keys from request.")),i.forEach((function(e){return delete t.mediaTypes.native[e]})))}return n.image&&n.image.sizes&&!Array.isArray(n.image.sizes)&&((0,a.H)("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete t.mediaTypes.native.image.sizes),n.image&&n.image.aspect_ratios&&!Array.isArray(n.image.aspect_ratios)&&((0,a.H)("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete t.mediaTypes.native.image.aspect_ratios),n.icon&&n.icon.sizes&&!Array.isArray(n.icon.sizes)&&((0,a.H)("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete t.mediaTypes.native.icon.sizes),t}function je(e,t){var n=(0,s.Z)(e,"mediaTypes.".concat(t,".pos"));if(!(0,a.hj)(n)||isNaN(n)||!isFinite(n)){var r="Value of property 'pos' on ad unit ".concat(e.code," should be of type: Number");(0,a.yN)(r),c.j8(u.FP.AUCTION_DEBUG,{type:"WARNING",arguments:r}),delete e.mediaTypes[t].pos}return e}function Be(e){var t=function(t){return"adUnit.code '".concat(e.code,"' ").concat(t)},n=e.mediaTypes,r=e.bids;return null==r||(0,a.kJ)(r)?null==r&&null==e.ortb2Imp?((0,a.H)(t("has no 'adUnit.bids' and no 'adUnit.ortb2Imp'. Removing adUnit from auction")),null):n&&0!==Object.keys(n).length?(null==e.ortb2Imp||null!=r&&0!==r.length||(e.bids=[{bidder:null}],(0,a.ji)(t("defines 'adUnit.ortb2Imp' with no 'adUnit.bids'; it will be seen only by S2S adapters"))),e):((0,a.H)(t("does not define a 'mediaTypes' object.  This is a required field for the auction, so this adUnit has been removed.")),null):((0,a.H)(t("defines 'adUnit.bids' that is not an array. Removing adUnit from auction")),null)}!function(){var e=null;try{e=window.sessionStorage}catch(e){}if(null!==e){var t=K,n=null;try{n=e.getItem(Z)}catch(e){}null!==n&&t.enable()}}(),ye.bidderSettings=ye.bidderSettings||{},ye.libLoaded=!0,ye.version="v7.47.0",(0,a.PN)("Prebid.js v7.47.0 loaded"),ye.installedModules=ye.installedModules||[],ye.adUnits=ye.adUnits||[],ye.triggerUserSyncs=be;var qe={validateAdUnit:Be,validateBannerMediaType:Ne,validateSizes:Me};Object.assign(qe,{validateNativeMediaType:Le}),Object.assign(qe,{validateVideoMediaType:Ue});var Fe,Ve=(0,x.z3)("sync",(function(e){var t=[];return e.forEach((function(e){if(null!=(e=Be(e))){var n,r,i,o=e.mediaTypes;o.banner&&(n=Ne(e),o.banner.hasOwnProperty("pos")&&(n=je(n,"banner"))),o.video&&(r=Ue(n||e),o.video.hasOwnProperty("pos")&&(r=je(r,"video"))),o.native&&(i=Le(r||n||e));var a=Object.assign({},n,r,i);t.push(a)}})),t}),"checkAdUnitSetup");function ze(e){var t=p.K[e]().filter(a.ak.call(a.IK,this,p.K.getAdUnitCodes())),n=p.K.getLastAuctionId();return t.map((function(e){return e.adUnitCode})).filter(a.tT).map((function(e){return t.filter((function(t){return t.auctionId===n&&t.adUnitCode===e}))})).filter((function(e){return e&&e[0]&&e[0].adUnitCode})).map((function(e){return(0,i.Z)({},e[0].adUnitCode,{bids:e})})).reduce((function(e,t){return Object.assign(e,t)}),{})}function We(e,t,n){var r=t.querySelector(n);e.parentNode&&e.parentNode===r||(0,a.jC)(e,t,n)}ye.getAdserverTargetingForAdUnitCodeStr=function(e){if((0,a.PN)("Invoking pbjs.getAdserverTargetingForAdUnitCodeStr",arguments),e){var t=ye.getAdserverTargetingForAdUnitCode(e);return(0,a.Ob)(t)}(0,a.ji)("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},ye.getHighestUnusedBidResponseForAdUnitCode=function(e){if(e){var t=p.K.getAllBidsForAdUnitCode(e).filter(B);return t.length?t.reduce(a.ZH):{}}(0,a.ji)("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},ye.getAdserverTargetingForAdUnitCode=function(e){return ye.getAdserverTargeting(e)[e]},ye.getAdserverTargeting=function(e){return(0,a.PN)("Invoking pbjs.getAdserverTargeting",arguments),V.getAllTargeting(e)},ye.getConsentMetadata=function(){return(0,a.PN)("Invoking pbjs.getConsentMetadata"),{gdpr:Y.rp.getConsentMeta(),usp:Y.nX.getConsentMeta(),gpp:Y.TJ.getConsentMeta(),coppa:!!g.vc.getConfig("coppa")}},ye.getNoBids=function(){return(0,a.PN)("Invoking pbjs.getNoBids",arguments),ze("getNoBids")},ye.getNoBidsForAdUnitCode=function(e){return{bids:p.K.getNoBids().filter((function(t){return t.adUnitCode===e}))}},ye.getBidResponses=function(){return(0,a.PN)("Invoking pbjs.getBidResponses",arguments),ze("getBidsReceived")},ye.getBidResponsesForAdUnitCode=function(e){return{bids:p.K.getBidsReceived().filter((function(t){return t.adUnitCode===e}))}},ye.setTargetingForGPTAsync=function(e,t){if((0,a.PN)("Invoking pbjs.setTargetingForGPTAsync",arguments),(0,a.T9)()){var n=V.getAllTargeting(e);V.resetPresetTargeting(e,t),V.setTargetingForGPT(n,t),Object.keys(n).forEach((function(e){Object.keys(n[e]).forEach((function(t){"hb_adid"===t&&p.K.setStatusForBids(n[e][t],u.UE.CK)}))})),c.j8(Se,n)}else(0,a.H)("window.googletag is not defined on the page")},ye.setTargetingForAst=function(e){(0,a.PN)("Invoking pbjs.setTargetingForAn",arguments),V.isApntagDefined()?(V.setTargetingForAst(e),c.j8(Se,V.getAllTargeting())):(0,a.H)("window.apntag is not defined on the page")},ye.renderAd=(0,x.z3)("async",(function(e,t,n){if((0,a.PN)("Invoking pbjs.renderAd",arguments),(0,a.ji)("Calling renderAd with adId :"+t),t)try{var r=p.K.findBidByAdId(t);if(!r){var i="Error trying to write ad. Cannot find ad by given id : ".concat(t);return void b({reason:xe,message:i,id:t})}if(r.status===u.UE.fe&&((0,a.yN)("Ad id ".concat(r.adId," has been rendered before")),c.j8(ke,r),(0,s.Z)(g.vc.getConfig("auctionOptions"),"suppressStaleRender")))return;if(r.ad=(0,a.ew)(r.ad,r.originalCpm||r.cpm),r.adUrl=(0,a.ew)(r.adUrl,r.originalCpm||r.cpm),n&&n.clickThrough){var o=n.clickThrough;r.ad=(0,a.x_)(r.ad,o),r.adUrl=(0,a.x_)(r.adUrl,o)}p.K.addWinningBid(r),c.j8(Te,r);var d=r.height,l=r.width,f=r.ad,m=r.mediaType,v=r.adUrl,y=r.renderer,w=r.adUnitCode,T=ye.adUnits.filter((function(e){return e.code===w})),I=ye.videoModule;if(T.video&&I)return void I.renderBid(T.video.divId,r);if(!e){var S="Error trying to write ad Id :".concat(t," to the page. Missing document");return void b({reason:Oe,message:S,id:t})}var k=document.createComment("Creative ".concat(r.creativeId," served by ").concat(r.bidder," Prebid.js Header Bidding"));if((0,a.jC)(k,e,"html"),(0,h.Pd)(y))(0,h._U)(y,r,e),We(k,e,"html"),_({doc:e,bid:r,id:t});else if(e===document&&!(0,a.yL)()||"video"===m){var C="Error trying to write ad. Ad render call ad id ".concat(t," was prevented from writing to the main document.");b({reason:Ee,message:C,bid:r,id:t})}else if(f)e.write(f),e.close(),Re(e,l,d),We(k,e,"html"),(0,a.R_)(r),_({doc:e,bid:r,id:t});else if(v){var E=(0,a.$u)();E.height=d,E.width=l,E.style.display="inline",E.style.overflow="hidden",E.src=v,(0,a.jC)(E,e,"body"),Re(e,l,d),We(k,e,"html"),(0,a.R_)(r),_({doc:e,bid:r,id:t})}else{var A="Error trying to write ad. No ad for bid response id: ".concat(t);b({reason:Ae,message:A,bid:r,id:t})}}catch(e){var P="Error trying to write ad Id :".concat(t," to the page:").concat(e.message);b({reason:Pe,message:P,id:t})}else{var x="Error trying to write ad Id :".concat(t," to the page. Missing adId");b({reason:Oe,message:x,id:t})}})),ye.removeAdUnit=function(e){(0,a.PN)("Invoking pbjs.removeAdUnit",arguments),e?((0,a.kJ)(e)?e:[e]).forEach((function(e){for(var t=ye.adUnits.length-1;t>=0;t--)ye.adUnits[t].code===e&&ye.adUnits.splice(t,1)})):ye.adUnits=[]},ye.requestBids=(Fe=(0,x.z3)("async",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,n=e.timeout,i=e.adUnits,o=e.adUnitCodes,s=e.labels,d=e.auctionId,l=e.ttlBuffer,u=e.ortb2,p=e.metrics,h=e.defer;c.j8(Ie);var m=n||g.vc.getConfig("bidderTimeout");(0,a.PN)("Invoking pbjs.requestBids",arguments),o&&o.length?i=i.filter((function(e){return(0,f.q9)(o,e.code)})):o=i&&i.map((function(e){return e.code}));var v={global:(0,a.Ee)({},g.vc.getAnyConfig("ortb2")||{},u||{}),bidder:Object.fromEntries(Object.entries(g.vc.getBidderConfig()).map((function(e){var t=(0,r.Z)(e,2);return[t[0],t[1].ortb2]})).filter((function(e){var t=(0,r.Z)(e,2);return t[0],null!=t[1]})))};return fe(H.Z.resolve(v.global)).then((function(e){return v.global=e,He({bidsBackHandler:t,timeout:m,adUnits:i,adUnitCodes:o,labels:s,auctionId:d,ttlBuffer:l,ortb2Fragments:v,metrics:p,defer:h})}))}),"requestBids"),(0,x.IF)(Fe,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.adUnits||ye.adUnits;return e.adUnits=(0,a.kJ)(t)?t.slice():[t],e.metrics=(0,Q.V6)(),e.metrics.checkpoint("requestBids"),e.defer=(0,H.P)({promiseFactory:function(e){return new Promise(e)}}),Fe.call(this,e),e.defer.promise})));var He=(0,x.z3)("async",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,n=e.timeout,r=e.adUnits,i=e.ttlBuffer,o=e.adUnitCodes,s=e.labels,c=e.auctionId,l=e.ortb2Fragments,u=e.metrics,h=e.defer,m=(0,Y.uV)(g.vc.getConfig("s2sConfig")||[]);function v(e,n,r){if("function"==typeof t)try{t(e,n,r)}catch(e){(0,a.H)("Error executing bidsBackHandler",null,e)}h.resolve({bids:e,timedOut:n,auctionId:r})}if((r=(0,Q.Bf)(u).measureTime("requestBids.validate",(function(){return Ve(r)}))).forEach((function(e){var t,n,r=Object.keys(e.mediaTypes||{banner:"banner"}),o=e.bids.map((function(e){return e.bidder})),s=Y.ZP.bidderRegistry,c=o.filter((function(e){return!m.has(e)})),l=(null===(t=e.ortb2Imp)||void 0===t||null===(n=t.ext)||void 0===n?void 0:n.tid)||(0,a.DO)();e.transactionId=l,null==i||e.hasOwnProperty("ttlBuffer")||(e.ttlBuffer=i),d(e,"ortb2Imp.ext.tid",l),c.forEach((function(t){var n=s[t],i=n&&n.getSpec&&n.getSpec(),o=i&&i.supportedMediaTypes||["banner"];r.some((function(e){return(0,f.q9)(o,e)}))?X.f.incrementBidderRequestsCounter(e.code,t):((0,a.yN)((0,a.or)(e,t)),e.bids=e.bids.filter((function(e){return e.bidder!==t})))})),X.f.incrementRequestsCounter(e.code)})),r&&0!==r.length){var y=p.K.createAuction({adUnits:r,adUnitCodes:o,callback:v,cbTimeout:n,labels:s,auctionId:c,ortb2Fragments:l,metrics:u}),b=r.length;b>15&&(0,a.PN)("Current auction ".concat(y.getAuctionId()," contains ").concat(b," adUnits."),r),o.forEach((function(e){return V.setLatestAuctionForAdUnit(e,y.getAuctionId())})),y.callBids()}else(0,a.ji)("No adUnits configured. No bids requested."),v()}),"startAuction");ye.requestBids.before((function(e,t){function n(e){for(var t;t=e.shift();)t()}n(J.Ld),n(Ze),e.call(this,t)}),49),ye.addAdUnits=function(e){(0,a.PN)("Invoking pbjs.addAdUnits",arguments),ye.adUnits.push.apply(ye.adUnits,(0,a.kJ)(e)?e:[e]),c.j8(we)},ye.onEvent=function(e,t,n){(0,a.PN)("Invoking pbjs.onEvent",arguments),(0,a.LQ)(t)?!n||De[e].call(null,n)?c.on(e,t,n):(0,a.H)('The id provided is not valid for event "'+e+'" and no handler was set.'):(0,a.H)('The event handler provided is not a function and was not set on event "'+e+'".')},ye.offEvent=function(e,t,n){(0,a.PN)("Invoking pbjs.offEvent",arguments),n&&!De[e].call(null,n)||c.S1(e,t,n)},ye.getEvents=function(){return(0,a.PN)("Invoking pbjs.getEvents"),c.vw()},ye.registerBidAdapter=function(e,t){(0,a.PN)("Invoking pbjs.registerBidAdapter",arguments);try{Y.ZP.registerBidAdapter(e(),t)}catch(e){(0,a.H)("Error registering bidder adapter : "+e.message)}},ye.registerAnalyticsAdapter=function(e){(0,a.PN)("Invoking pbjs.registerAnalyticsAdapter",arguments);try{Y.ZP.registerAnalyticsAdapter(e)}catch(e){(0,a.H)("Error registering analytics adapter : "+e.message)}},ye.createBid=function(e){return(0,a.PN)("Invoking pbjs.createBid",arguments),(0,z.m)(e)};var Ze=[],$e=(0,x.z3)("async",(function(e){e&&!(0,a.xb)(e)?((0,a.PN)("Invoking pbjs.enableAnalytics for: ",e),Y.ZP.enableAnalytics(e)):(0,a.H)("pbjs.enableAnalytics should be called with option {}")}),"enableAnalyticsCb");function Ge(e){e.forEach((function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(e){(0,a.H)("Error processing command :","prebid.js",e)}}))}ye.enableAnalytics=function(e){Ze.push($e.bind(this,e))},ye.aliasBidder=function(e,t,n){(0,a.PN)("Invoking pbjs.aliasBidder",arguments),e&&t?Y.ZP.aliasBidAdapter(e,t,n):(0,a.H)("bidderCode and alias must be passed as arguments","pbjs.aliasBidder")},ye.aliasRegistry=Y.ZP.aliasRegistry,g.vc.getConfig("aliasRegistry",(function(e){"private"===e.aliasRegistry&&delete ye.aliasRegistry})),ye.getAllWinningBids=function(){return p.K.getAllWinningBids()},ye.getAllPrebidWinningBids=function(){return p.K.getBidsReceived().filter((function(e){return e.status===u.UE.CK}))},ye.getHighestCpmBids=function(e){return V.getWinningBids(e)},ye.markWinningBidAsUsed=function(e){var t=[];e.adUnitCode&&e.adId?t=p.K.getBidsReceived().filter((function(t){return t.adId===e.adId&&t.adUnitCode===e.adUnitCode})):e.adUnitCode?t=V.getWinningBids(e.adUnitCode):e.adId?t=p.K.getBidsReceived().filter((function(t){return t.adId===e.adId})):(0,a.yN)("Improper use of markWinningBidAsUsed. It needs an adUnitCode or an adId to function."),t.length>0&&(t[0].status=u.UE.fe)},ye.getConfig=g.vc.getAnyConfig,ye.readConfig=g.vc.readAnyConfig,ye.mergeConfig=g.vc.mergeConfig,ye.mergeBidderConfig=g.vc.mergeBidderConfig,ye.setConfig=g.vc.setConfig,ye.setBidderConfig=g.vc.setBidderConfig,ye.que.push((function(){window.addEventListener("message",k,!1)})),ye.cmd.push=function(e){if("function"==typeof e)try{e.call()}catch(e){(0,a.H)("Error processing command :",e.message,e.stack)}else(0,a.H)("Commands written into pbjs.cmd.push must be wrapped in a function")},ye.que.push=ye.cmd.push,ye.processQueue=function(){x.z3.ready(),Ge(ye.que),Ge(ye.cmd)};const Ke=ye;var Xe=n(1746);function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qe="33across",et=["33across_mgni"],tt="USD",nt=/^[a-zA-Z0-9_-]{22}$/,rt={SIAB:"siab",INVIEW:"inview",INSTREAM:"instream"},it=["mimes","minduration","maxduration","placement","protocols","startdelay","skip","skipafter","minbitrate","maxbitrate","delivery","playbackmethod","api","linearity"],ot={uniqueSiteIds:[]};function at(e){return"".concat(e.params.siteId,":").concat(e.params.productId)}function st(e){return"".concat(e.bidId)}function dt(e){var t,n=e.bidRequests,r=e.gdprConsent,i=void 0===r?{}:r,o=e.uspConsent,d=e.pageUrl,c=e.referer,l=e.ttxSettings,u={},p=n[0],f=p.params,h=f.siteId,g=f.test;return u.imp=[],n.forEach((function(e){var t,n,r;u.imp.push((t=e,n=(0,s.Z)(t,"ortb2Imp.ext.gpid"),r={id:t.bidId,ext:Ye({ttx:{prod:(0,s.Z)(t,"params.productId")}},n?{gpid:n}:{})},(0,s.Z)(t,"mediaTypes.banner")&&(r.banner=Ye({},function(e){var t,n,r=(0,s.Z)(e,"mediaTypes.banner",{}),i=(n=e.adUnitCode,document.getElementById(n)||document.getElementById(function(e){if((0,a.T9)())for(var t=googletag.pubads().getSlots(),n=(0,a.CS)(e),r=0;r<t.length;r++)if(n(t[r])){var i=t[r].getSlotElementId();return(0,a.PN)("[33Across Adapter] Map ad unit path to HTML element id: '".concat(e,"' -> ").concat(i)),i}return(0,a.yN)("[33Across Adapter] Unable to locate element for ad unit code: '".concat(e,"'")),null}(n))),o=function(e){return(0,a.kJ)(e)&&2===e.length&&!(0,a.kJ)(e[0])?[lt(e)]:e.map(lt)}(r.sizes);t="function"==typeof e.getFloor?o.map((function(t){var n,r=ft(e,t,P.Mk);return r&&(n={ext:{ttx:{bidfloors:[r]}}}),Object.assign({},t,n)})):o;var d,c=function(e){return e.reduce((function(e,t){return t.h*t.w<e.h*e.w?t:e}))}(o),l=(d=function(e){return!function(){try{return(0,a.e7)()!==(0,a.Zy)()}catch(e){return!0}}()&&null!==e}(i)?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.w,i=n.h;return"visible"===t.document.visibilityState?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.w,r=t.h,i=e.getBoundingClientRect(),o=i.width,a=i.height,s=i.left,d=i.top,c=i.right,l=i.bottom;return(0===o||0===a)&&n&&r&&(o=n,a=r,c=s+n,l=d+r),{width:o,height:a,left:s,top:d,right:c,bottom:l}}(e,{w:n.w,h:n.h}),i=function(e){for(var t={left:e[0].left,right:e[0].right,top:e[0].top,bottom:e[0].bottom},n=1;n<e.length;++n){if(t.left=Math.max(t.left,e[n].left),t.right=Math.min(t.right,e[n].right),t.left>=t.right)return null;if(t.top=Math.max(t.top,e[n].top),t.bottom=Math.min(t.bottom,e[n].bottom),t.top>=t.bottom)return null}return t.width=t.right-t.left,t.height=t.bottom-t.top,t}([{left:0,top:0,right:t.innerWidth,bottom:t.innerHeight},r]);return null!==i?i.width*i.height/(r.width*r.height)*100:0}(e,t,{w:r,h:i}):0}(i,(0,a.Zy)(),c):"nm",{ttx:{viewability:{amount:isNaN(d)?d:Math.round(d)}}});return{format:t,ext:l}}(t))),(0,s.Z)(t,"mediaTypes.video")&&(r.video=function(e){var t=(0,s.Z)(e,"mediaTypes.video",{}),n=(0,s.Z)(e,"params.video",{}),r=Ye(Ye({},t),n),i={},o=lt(r.playerSize[0]),a=o.w,d=o.h;i.w=a,i.h=d,it.forEach((function(e){r.hasOwnProperty(e)&&(i[e]=r[e])}));var c=pt(e);if(i.placement=i.placement||2,c===rt.INSTREAM&&(i.startdelay=i.startdelay||0,i.placement=1),"function"==typeof e.getFloor){var l=ft(e,{w:i.w,h:i.h},P.pX);l&&Object.assign(i,{ext:{ttx:{bidfloors:[l]}}})}return i}(t)),r))})),u.site={id:h},u.device=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,a.e7)(),r={ext:{ttx:Ye(Ye({},ht()),{},{pxr:n.devicePixelRatio,vp:(e=function(){var e=(0,a.e7)();try{for(;e.parent!==e&&e.parent.document;)e=e.parent}catch(e){}return e}().document.documentElement,{w:e.clientWidth,h:e.clientHeight}),ah:n.screen.availHeight,mtp:n.navigator.maxTouchPoints})}};return t.sua&&(r.sua=(0,a.ei)(t.sua,["browsers","platform","model"])),r}(null===(t=p.ortb2)||void 0===t?void 0:t.device),d&&(u.site.page=d),c&&(u.site.ref=c),u.id=p.auctionId,i.consentString&&(u.user=ct(u.user,{consent:i.consentString})),Array.isArray(p.userIdAsEids)&&p.userIdAsEids.length>0&&(u.user=ct(u.user,{eids:p.userIdAsEids})),u.regs=ct(u.regs,{gdpr:Number(i.gdprApplies)}),o&&(u.regs=ct(u.regs,{us_privacy:o})),u.ext={ttx:{prebidStartedAt:Date.now(),caller:[{name:"prebidjs",version:"7.47.0"}]}},p.schain&&(u.source=ct(u.source,{schain:p.schain})),1===g&&(u.test=1),{method:"POST",url:l&&l.url||"".concat("https://ssc.33across.com/api/v1/hb","?guid=").concat(h),data:JSON.stringify(u),options:{contentType:"text/plain",withCredentials:!0}}}function ct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return(0,a.Ee)({},e,{ext:t})}function lt(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function ut(e){return(0,a.Ee)({},e,{params:{productId:pt(e)}})}function pt(e){var t=e.params,n=e.mediaTypes,r=n.banner,i=n.video;return i&&!r&&"instream"===i.context?rt.INSTREAM:t.productId===rt.INVIEW?t.productId:rt.SIAB}function ft(e,t,n){var r=e.getFloor({currency:tt,mediaType:n,size:[t.w,t.h]});if(!isNaN(r.floor)&&r.currency===tt)return r.floor}function ht(){var e=(0,a.e7)(),t=e.innerWidth,n=e.innerHeight,r=e.screen,i=[Math.max(r.width,r.height),Math.min(r.width,r.height)],o=i[0],s=i[1];return n>t?{w:s,h:o}:{w:o,h:s}}var gt={NON_MEASURABLE:"nm",code:Qe,aliases:et,supportedMediaTypes:[P.Mk,P.pX],gvlid:58,isBidRequestValid:function(e){return function(e){return!(e.bidder!==Qe&&!et.includes(e.bidder)||!e.params)&&!!function(e){return null!==((0,s.Z)(e,"params.siteId","")||"").trim().match(nt)}(e)}(e)&&function(e){var t=(0,s.Z)(e,"mediaTypes.banner");return void 0===t||!!Array.isArray(t.sizes)}(e)&&function(e){var t=(0,s.Z)(e,"mediaTypes.video"),n=(0,s.Z)(e,"params.video",{});if(void 0===t)return!0;if(!Array.isArray(t.playerSize))return!1;if(!t.context)return!1;var r=Ye(Ye({},t),n);return!(!Array.isArray(r.mimes)||0===r.mimes.length)&&(!(!Array.isArray(r.protocols)||0===r.protocols.length)&&((void 0===r.placement||"number"==typeof r.placement)&&("instream"!==t.context||void 0===r.startdelay||"number"==typeof r.startdelay)))}(e)},buildRequests:function(e,t){var n=function(e,t){var n,r,i=Object.assign({},g.vc.getConfig("ttxSettings")),o=Object.assign({consentString:void 0,gdprApplies:!1},t&&t.gdprConsent),s=t&&t.uspConsent,d=null==t||null===(n=t.refererInfo)||void 0===n?void 0:n.page,c=null==t||null===(r=t.refererInfo)||void 0===r?void 0:r.ref;return ot.uniqueSiteIds=e.map((function(e){return e.params.siteId})).filter(a.tT),{ttxSettings:i,gdprConsent:o,uspConsent:s,pageUrl:d,referer:c}}(e,t),r=n.ttxSettings,i=n.gdprConsent,o=n.uspConsent,s=n.pageUrl,d=n.referer,c=function(e,t){return function(e,t){var n={};return e.forEach((function(e){var r=t(e);n[r]=n[r]||[],n[r].push(e)})),n}(t.map(ut),!0===(e&&e.enableSRAMode)?at:st)}(r,e),l=[];for(var u in c)l.push(dt({bidRequests:c[u],gdprConsent:i,uspConsent:o,pageUrl:s,referer:d,ttxSettings:r}));return l},interpretResponse:function(e,t){var n=e.body,r=n.seatbid,i=n.cur,o=void 0===i?"USD":i;return(0,a.kJ)(r)?r.filter((function(e){return(0,a.kJ)(e.bid)&&e.bid.length>0})).reduce((function(e,t){return e.concat(t.bid.map((function(e){return function(e,t){var n=e.adomain&&e.adomain.length,r={requestId:e.impid,bidderCode:Qe,cpm:e.price,width:e.w,height:e.h,ad:e.adm,ttl:e.ttl||60,creativeId:e.crid,mediaType:(0,s.Z)(e,"ext.ttx.mediaType",P.Mk),currency:t,netRevenue:!0};return n&&(r.meta={advertiserDomains:e.adomain}),r.mediaType===P.pX&&("xml"===(0,s.Z)(e,"ext.ttx.vastType","xml")?r.vastXml=r.ad:r.vastUrl=r.ad),r}(e,o)})))}),[]):[]},getUserSyncs:function(e,t,n,r){var i=e.iframeEnabled?ot.uniqueSiteIds.map((function(e){return function(e){var t=e.siteId,n=void 0===t?"zzz000000000003zzz":t,r=e.gdprConsent,i=void 0===r?{}:r,o=e.uspConsent,a=g.vc.getConfig("ttxSettings"),s=a&&a.syncUrl||"https://ssc-cms.33across.com/ps/?m=xch&rt=html&ru=deb",d=i.consentString,c=i.gdprApplies,l={type:"iframe",url:"".concat(s,"&id=").concat(n,"&gdpr_consent=").concat(encodeURIComponent(d),"&us_privacy=").concat(encodeURIComponent(o))};return"boolean"==typeof c&&(l.url+="&gdpr=".concat(Number(c))),l}({gdprConsent:n,uspConsent:r,siteId:e})})):[];return ot.uniqueSiteIds=[],i}};(0,Xe.dX)(gt),(0,o.z)("33acrossBidAdapter");var mt=n(174),vt="33acrossId",yt={name:vt,gvlid:58,decode:function(e){return(0,i.Z)({},vt,{envelope:e})},getId:function(e,t){var n=e.params,r=void 0===n?{}:n;if("string"==typeof r.pid){var i=r.pid,o=r.apiUrl,s=void 0===o?"https://lexicon.33across.com/v1/envelope":o;return{callback:function(e){(0,mt.O)(1e4)(s,{success:function(t){var n;try{n=function(e){if(e.succeeded){if(e.data.envelope)return e.data.envelope;(0,a.ji)("".concat(vt,": No envelope was received"))}else"Cookied User"==e.error?(0,a.ji)("".concat(vt,": Unsuccessful response").concat(" ",e.error)):(0,a.H)("".concat(vt,": Unsuccessful response").concat(" ",e.error))}(JSON.parse(t))}catch(e){(0,a.H)("".concat(vt,": ID reading error:"),e)}e(n)},error:function(t){(0,a.H)("".concat(vt,": ID error response"),t),e()}},function(e,t){var n=Y.nX.getConsentData(),r=Boolean(null==t?void 0:t.gdprApplies),i={pid:e,gdpr:Number(r),src:"pbjs",ver:"7.47.0"};return n&&(i.us_privacy=n),r&&(i.gdpr_consent=t.consentString||""),i}(i,t),{method:"GET",withCredentials:!0})}}}(0,a.H)("".concat(vt,": Submodule requires a partner ID to be defined"))}};(0,x.Bx)("userId",yt),(0,o.z)("33acrossIdSystem");var bt=n(9267),_t=g.vc.getConfig,wt={code:"adf",aliases:[{code:"adformOpenRTB",gvlid:50},{code:"adform",gvlid:50}],gvlid:50,supportedMediaTypes:[P.B5,P.Mk,P.pX],isBidRequestValid:function(e){var t=e.params||{},n=t.mid,r=t.inv,i=t.mname;return!!(n||r&&i)},buildRequests:function(e,t){var n,i,o=t.ortb2||{},c=o.user;"object"===(0,bt.Z)(_t("app"))?(n=_t("app")||{},o.app&&(0,a.Ee)(n,o.app)):(i=_t("site")||{},o.site&&(0,a.Ee)(i,o.site),i.page||(i.page=t.refererInfo.page));var l=_t("device")||{};l.w=l.w||window.innerWidth,l.h=l.h||window.innerHeight,l.ua=l.ua||navigator.userAgent;var u=Tt(e,"params.adxDomain")||"adx.adform.net",p=Tt(e,"params.pt")||Tt(e,"params.priceType")||"net",f=t.auctionId,h=Tt(e,"params.test"),m=_t("currency.adServerCurrency"),v=m&&[m],y=Tt(e,"userIdAsEids"),b=Tt(e,"schain"),_=e.map((function(e,t){e.netRevenue=p;var n=e.getFloor?e.getFloor({currency:m||"USD"}):{},i=n.floor,o=n.currency,d=e.params,c={id:t+1,tagid:d.mid,bidfloor:i,bidfloorcur:o,ext:{bidder:{inv:d.inv,mname:d.mname}}};if(e.nativeOrtbRequest&&e.nativeOrtbRequest.assets){for(var l=e.nativeOrtbRequest.assets,u=[],f=0;f<l.length;f++){var h=(0,a.I8)(l[f]),g=h.img;if(g){var v=g.ext&&g.ext.aspectratios;if(v){var y=parseInt(v[0].split(":")[0],10),b=parseInt(v[0].split(":")[1],10);g.wmin=g.wmin||0,g.hmin=b*g.wmin/y|0}}u.push(h)}c.native={request:{assets:u}}}var _=(0,s.Z)(e,"mediaTypes.banner");if(_&&_.sizes){var w=(0,a.sF)(_.sizes).map((function(e){var t=e.split("x"),n=(0,r.Z)(t,2),i=n[0],o=n[1];return{w:parseInt(i,10),h:parseInt(o,10)}}));c.banner={format:w}}var T=(0,s.Z)(e,"mediaTypes.video");return T&&(c.video=T),c})),w={id:t.auctionId,site:i,app:n,user:c,device:l,source:{tid:f,fd:1},ext:{pt:p},cur:v,imp:_};return h&&(w.is_debug=!!h,w.test=1),g.vc.getConfig("coppa")&&d(w,"regs.coppa",1),void 0!==(0,s.Z)(t,"gdprConsent.gdprApplies")&&(d(w,"user.ext.consent",t.gdprConsent.consentString),d(w,"regs.ext.gdpr",1&t.gdprConsent.gdprApplies)),t.uspConsent&&d(w,"regs.ext.us_privacy",t.uspConsent),y&&d(w,"user.ext.eids",y),b&&d(w,"source.ext.schain",b),{method:"POST",url:"https://"+u+"/adx/openrtb",data:JSON.stringify(w),bids:e}},interpretResponse:function(e,t){var n=t.bids;if(e.body){var r,i,o=e.body,a=o.seatbid,d=o.cur,c=(r=a.map((function(e){return e.bid})),(i=[]).concat.apply(i,(0,A.Z)(r))).reduce((function(e,t){return e[t.impid-1]=t,e}),[]);return n.map((function(e,t){var n=c[t];if(n){var r=(0,s.Z)(n,"ext.prebid.type"),i={requestId:e.bidId,cpm:n.price,creativeId:n.crid,ttl:360,netRevenue:"net"===e.netRevenue,currency:d,mediaType:r,width:n.w,height:n.h,dealId:n.dealid,meta:{mediaType:r,advertiserDomains:n.adomain}};return n.native?i.native={ortb:n.native}:i[r===P.pX?"vastXml":"ad"]=n.adm,e.renderer||r!==P.pX||"outstream"!==(0,s.Z)(e,"mediaTypes.video.context")||(i.renderer=h.Th.install({id:e.bidId,url:"https://s2.adform.net/banners/scripts/video/outstream/render.js",adUnitCode:e.adUnitCode}),i.renderer.setRender(It)),i}})).filter(Boolean)}}};function Tt(e,t){for(var n,r=0;r<e.length;r++)if(n=(0,s.Z)(e[r],t))return n}function It(e){e.renderer.push((function(){window.Adform.renderOutstream(e)}))}(0,Xe.dX)(wt),(0,o.z)("adfBidAdapter");var St,kt,Ct,Et="USD",At={image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1},cta:{required:!1}},Pt={code:"adyoulike",gvlid:259,supportedMediaTypes:[P.Mk,P.B5,P.pX],aliases:["ayl"],isBidRequestValid:function(e){var t=Mt(Rt(e)),n=t.width>0&&t.height>0;return e.params&&e.params.placement&&(n||e.mediaTypes&&e.mediaTypes.native)},buildRequests:function(e,t){e=(0,l.lY)(e);var n=!1,r={Version:"1.0",Bids:e.reduce((function(e,t){var r,i=(r=t,(0,s.Z)(r,"mediaTypes.banner")?P.Mk:(0,s.Z)(r,"mediaTypes.video")?P.pX:(0,s.Z)(r,"mediaTypes.native")?P.B5:void 0),o=Rt(t),a=Mt(o);if(e[t.bidId]={},e[t.bidId].PlacementID=t.params.placement,e[t.bidId].TransactionID=t.transactionId,e[t.bidId].Width=a.width,e[t.bidId].Height=a.height,e[t.bidId].AvailableSizes=o.join(","),"function"==typeof t.getFloor&&(e[t.bidId].Pricing=function(e,t,n){var r=e.getFloor({currency:Et,mediaType:n,size:[t.width,t.height]});if(!isNaN(r.floor)&&r.currency===Et)return r.floor}(t,a,i)),t.schain&&(e[t.bidId].SChain=t.schain),i===P.B5){var d=t.mediaTypes.native;"image"===d.type&&(d=Object.assign({},At,d)),d.clickUrl={required:!0},e[t.bidId].Native=d}if(i===P.pX){n=!0,e[t.bidId].Video=t.mediaTypes.video;var c=t.mediaTypes.video.playerSize;Array.isArray(c)&&!Array.isArray(c[0])&&(e[t.bidId].Video.playerSize=[c])}return e}),{}),PageRefreshed:xt()};t.gdprConsent&&(r.gdprConsent={consentString:t.gdprConsent.consentString,consentRequired:"boolean"==typeof t.gdprConsent.gdprApplies?t.gdprConsent.gdprApplies:null}),t.uspConsent&&(r.uspConsent=t.uspConsent),t.ortb2&&(r.ortb2=t.ortb2),(0,s.Z)(t,"userIdAsEids")&&(r.userId=t.userIdAsEids),r.pbjs_version="7.47.0";var i=JSON.stringify(r);return{method:"POST",url:Ot(e,t,n),data:i,options:{withCredentials:!0}}},interpretResponse:function(e,t){var n=[],r={};try{r=JSON.parse(t.data).Bids}catch(e){}return e.body.forEach((function(e){var t=function(e,t){if(e&&(e.Ad||e.Native||e.Vast)){var n=t&&t[e.BidID];n&&(e.Width&&"0"!==e.Width||(e.Width=n.Width),e.Height&&"0"!==e.Height||(e.Height=n.Height));var r={requestId:e.BidID,ttl:3600,creativeId:e.CreativeID,cpm:e.Price,netRevenue:!0,currency:Et,meta:e.Meta||{advertiserDomains:[]}},i=e.Vast;return i?(r.width=e.Width,r.height=e.Height,r.vastXml=window.atob(i),r.mediaType="video"):n.Native?(r.native=function(e,t){if("object"===(0,bt.Z)(e.Native))return e.Native;var n={},r={},i={};if("string"==typeof e.Ad){r=JSON.parse(e.Ad.match(/\/\*PREBID\*\/(.*)\/\*PREBID\*\//)[1]),i=r.Content.Preview.Text;var o=r.TrackingPrefix+"/pixel?event_kind=IMPRESSION&attempt="+r.Attempt,a=r.TrackingPrefix+"/pixel?event_kind=INSERTION&attempt="+r.Attempt;r.Campaign&&(o+="&campaign="+r.Campaign,a+="&campaign="+r.Campaign),n.clickUrl=r.TrackingPrefix+"/ar?event_kind=CLICK&attempt="+r.Attempt+"&campaign="+r.Campaign+"&url="+encodeURIComponent(r.Content.Landing.Url),r.OnEvents?(n.clickTrackers=Lt(r.OnEvents.CLICK),n.impressionTrackers=Lt(r.OnEvents.IMPRESSION),n.javascriptTrackers=Lt(r.OnEvents.IMPRESSION,!0)):n.impressionTrackers=[],n.impressionTrackers.push(o,a)}return Object.keys(t).map((function(o,a){switch(o){case"title":n[o]=i.TITLE;break;case"body":n[o]=i.DESCRIPTION;break;case"cta":n[o]=i.CALLTOACTION;break;case"sponsoredBy":n[o]=r.Content.Preview.Sponsor.Name;break;case"image":var d=t.image.sizes||[];d.length||(d[0]=e.Width||300,d[1]=e.Height||250);var c=Ut(r,(0,s.Z)(r,"Content.Preview.Thumbnail.Image"),d[0],d[1]);c&&(n[o]={url:c,width:d[0],height:d[1]});break;case"icon":var l=t.icon.sizes||[];l.length||(l[0]=50,l[1]=50);var u=Ut(r,(0,s.Z)(r,"Content.Preview.Sponsor.Logo.Resource"),l[0],l[1]);u&&(n[o]={url:u,width:l[0],height:l[1]});break;case"privacyIcon":n[o]=Ut(r,(0,s.Z)(r,"Content.Preview.Credit.Logo.Resource"),25,25);break;case"privacyLink":n[o]=(0,s.Z)(r,"Content.Preview.Credit.Url")}})),n}(e,n.Native),r.mediaType="native"):(r.width=e.Width,r.height=e.Height,r.ad=e.Ad),r}}(e,r);t&&n.push(t)})),n}};function xt(){try{if(performance&&performance.navigation)return performance.navigation.type===performance.navigation.TYPE_RELOAD}catch(e){}return!1}function Ot(e,t,n){var r=function(e){var t=(0,f.sE)(e,(function(e){return e.params.DC}));return t?"-"+t.params.DC:""}(e),i=n?"/hb-api/prebid-video/v1":"/hb-api/prebid/v1";return(0,a.Q2)({protocol:"https",host:"".concat("hb-api").concat(r,".omnitagjs.com"),pathname:i,search:Dt(t)})}function Dt(e){var t,n={};if(e){var r,i=e.refererInfo;i&&(i.location&&(n.RefererUrl=encodeURIComponent(i.location),i.reachedTop||(n.SafeFrame=!0)),n.PageUrl=encodeURIComponent(i.topmostLocation),n.PageReferrer=encodeURIComponent(i.location));var o=null===(r=e.ortb2)||void 0===r?void 0:r.site;o&&(n.PageUrl=encodeURIComponent(o.page||(null==i?void 0:i.topmostLocation)),n.PageReferrer=encodeURIComponent(o.ref||(null==i?void 0:i.location)))}var a=null==e||null===(t=e.refererInfo)||void 0===t?void 0:t.canonicalUrl;return a&&(n.CanonicalUrl=encodeURIComponent(a)),n}function Rt(e){var t=e.sizes||[];return e.mediaTypes&&e.mediaTypes.banner&&(t=e.mediaTypes.banner.sizes||[]),e.params&&Array.isArray(e.params.size)&&(t=e.params.size,Array.isArray(t[0])||(t=[t])),(0,a.sF)(t)}function Mt(e){var t={},n=e[0];if("string"!=typeof n)return t;var r=n.toUpperCase().split("X"),i=parseInt(r[0],10);i&&(t.width=i);var o=parseInt(r[1],10);return o&&(t.height=o),t}function Nt(e){return e?"https://blobs.omnitagjs.com/blobs/"+e.substr(16,2)+"/"+e.substr(16)+"/"+e:""}function Ut(e,t,n,r){var i="";if(t&&t.Kind)switch(t.Kind){case"INTERNAL":i=Nt(t.Data.Internal.BlobReference.Uid);break;case"EXTERNAL":var o=e.DynamicPrefix,a=t.Data.External.Url;if((a=(a=a.replace(/\[height\]/i,""+r)).replace(/\[width\]/i,""+n)).indexOf(o)>=0){var s=/.*url=([^&]*)/gm.exec(a);(i=s?s[1]:"")||(i=Nt(/.*key=([^&]*)/gm.exec(a)[1]))}else i=a}return i}function Lt(e,t){var n=[];return e?(e.map((function(e,r){(t&&"JAVASCRIPT_URL"===e.Kind||!t&&"PIXEL_URL"===e.Kind)&&n.push(e.Url)})),n):n}function jt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(0,Xe.dX)(Pt),(0,o.z)("adyoulikeBidAdapter");var Bt={AOL:"aol",VERIZON:"verizon",ONEMOBILE:"onemobile",ONEDISPLAY:"onedisplay"},qt={GET:"display-get"},Ft={GET:"mobile-get",POST:"mobile-post"},Vt="iframe",zt="img",Wt="image",Ht=["admixer.net","adserver.org","adtelligent.com","akamai.com","amxdt.net","audigent.com","britepool.com","criteo.com","crwdcntrl.net","deepintent.com","epsilon.com","hcn.health","id5-sync.com","idx.lat","intentiq.com","intimatemerger.com","liveintent.com","liveramp.com","mediawallahscript.com","merkleinc.com","netid.de","neustar.biz","nextroll.com","novatiq.com","parrable.com","pubcid.org","quantcast.com","tapad.com","uidapi.com","verizonmedia.com","yahoo.com","zeotap.com"],Zt=Jt(St||(St=jt(["","/pubapi/3.0/","/","/","/","/ADTECH;v=2;cmd=bid;cors=yes;alias=",";misc=",";",""])),"host","network","placement","pageid","sizeid","alias","misc","dynamicParams"),$t=Jt(kt||(kt=jt(["","/bidRequest?"])),"host"),Gt=Jt(Ct||(Ct=jt(["dcn=","&pos=","&cmd=bid",""])),"dcn","pos","dynamicParams"),Kt={us:"adserver-us.adtech.advertising.com",eu:"adserver-eu.adtech.advertising.com",as:"adserver-as.adtech.advertising.com"},Xt="https";function Jt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=r[r.length-1]||{},s=[e[0]];return n.forEach((function(t,n){var i=(0,a.U)(t)?r[t]:o[t];s.push(i,e[n+1])})),s.join("")}}function Yt(e){return e===Bt.AOL||e===Bt.VERIZON||e===Bt.ONEMOBILE}function Qt(e){if(Yt(e.bidder)&&e.params.id&&e.params.imp&&e.params.imp[0]){var t=e.params.imp[0];return t.id&&t.tagid&&t.banner&&t.banner.w&&t.banner.h}}function en(e){return Yt(e.bidder)&&e.params.dcn&&e.params.pos}function tn(e){return((t=e.bidder)===Bt.AOL||t===Bt.VERIZON||t===Bt.ONEDISPLAY)&&e.params.placement&&e.params.network;var t}function nn(e){return e.userIdAsEids.filter((function(e){return-1!==Ht.indexOf(e.source)}))}var rn={code:Bt.AOL,gvlid:25,aliases:[Bt.ONEMOBILE,Bt.ONEDISPLAY,Bt.VERIZON],supportedMediaTypes:[P.Mk],isBidRequestValid:function(e){return tn(e)||function(e){return en(e)||Qt(e)}(e)},buildRequests:function(e,t){var n,r,i=this,o={};return t&&(o.gdpr=t.gdprConsent,o.uspConsent=t.uspConsent,o.gppConsent=t.gppConsent,!o.gppConsent&&null!==(n=t.ortb2)&&void 0!==n&&null!==(r=n.regs)&&void 0!==r&&r.gpp&&(o.gppConsent={gppString:t.ortb2.regs.gpp,applicableSections:t.ortb2.regs.gpp_sid})),e.map((function(e){var t=function(e){return en(e)?Ft.GET:Qt(e)?Ft.POST:tn(e)?qt.GET:void 0}(e);if(t)return i.formatBidRequest(t,e,o)}))},interpretResponse:function(e,t){var n=e.body;if(n){var r=this._parseBidResponse(n,t);if(r)return r}else(0,a.H)("Empty bid response",t.bidderCode,n)},getUserSyncs:function(e,t){var n=!(0,a.xb)(t)&&t[0].body;return n&&n.ext&&n.ext.pixels?this.parsePixelItems(n.ext.pixels):[]},formatBidRequest:function(e,t,n){var r;switch(e){case qt.GET:r={url:this.buildMarketplaceUrl(t,n),method:"GET",ttl:60};break;case Ft.GET:r={url:this.buildOneMobileGetUrl(t,n),method:"GET",ttl:3600};break;case Ft.POST:r={url:this.buildOneMobileBaseUrl(t),method:"POST",ttl:3600,data:this.buildOpenRtbRequestData(t,n),options:{contentType:"application/json",customHeaders:{"x-openrtb-version":"2.2"}}}}return r.bidderCode=t.bidder,r.bidId=t.bidId,r.userSyncOn=t.params.userSyncOn,r},buildMarketplaceUrl:function(e,t){var n,r=e.params,i=r.server,o=r.region||"us";return Kt.hasOwnProperty(o)||((0,a.yN)("Unknown region '".concat(o,"' for AOL bidder.")),o="us"),n=i||Kt[o],r.region=o,this.applyProtocol(Zt({host:n,network:r.network,placement:parseInt(r.placement),pageid:r.pageId||0,sizeid:r.sizeId||0,alias:r.alias||(0,a._d)(),misc:(new Date).getTime(),dynamicParams:this.formatMarketplaceDynamicParams(r,t)}))},buildOneMobileGetUrl:function(e,t){var n=e.params,r=n.dcn,i=n.pos,o=n.ext;"object"===(0,bt.Z)(e.userId)&&(o=o||{},nn(e).forEach((function(e){o["eid"+e.source]=e.uids[0].id})));var a=this.buildOneMobileBaseUrl(e);if(r&&i){var s=this.formatOneMobileDynamicParams(o,t);a+=Gt({dcn:r,pos:i,dynamicParams:s})}return a},buildOneMobileBaseUrl:function(e){return this.applyProtocol($t({host:e.params.host||"c2shb.ssp.yahoo.com"}))},applyProtocol:function(e){return/^https?:\/\//i.test(e)?e:0===e.indexOf("//")?"".concat(Xt,":").concat(e):"".concat(Xt,"://").concat(e)},formatMarketplaceDynamicParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};Object.assign(n,this.formatKeyValues(e.keyValues)),Object.assign(n,this.formatConsentData(t));var r="";return(0,a.yi)(n,(function(e,t){r+="".concat(t,"=").concat(encodeURIComponent(e),";")})),r},formatOneMobileDynamicParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.isSecureProtocol()&&(e.secure=1),Object.assign(e,this.formatConsentData(t));var n="";return(0,a.yi)(e,(function(e,t){n+="&".concat(t,"=").concat(encodeURIComponent(e))})),n},buildOpenRtbRequestData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={id:e.params.id,imp:e.params.imp};if(this.isEUConsentRequired(t)&&(d(n,"regs.ext.gdpr",1),t.gdpr.consentString&&d(n,"user.ext.consent",t.gdpr.consentString)),t.uspConsent&&d(n,"regs.ext.us_privacy",t.uspConsent),"object"===(0,bt.Z)(e.userId)){n.user=n.user||{},n.user.ext=n.user.ext||{};var r=nn(e);r.length>0&&(n.user.ext.eids=r)}return n},isEUConsentRequired:function(e){return!!(e&&e.gdpr&&e.gdpr.gdprApplies)},formatKeyValues:function(e){var t={};return(0,a.yi)(e,(function(e,n){t["kv".concat(n)]=e})),t},formatConsentData:function(e){var t={};return this.isEUConsentRequired(e)&&(t.gdpr=1,e.gdpr.consentString&&(t.euconsent=e.gdpr.consentString)),e.uspConsent&&(t.us_privacy=e.uspConsent),e.gppConsent&&e.gppConsent.gppString&&(t.gpp=e.gppConsent.gppString,t.gpp_sid=e.gppConsent.applicableSections),t},parsePixelItems:function(e){var t=/\w*(?=\s)/,n=/src=("|')(.*?)\1/,r=[];if(e){var i=e.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi);i&&i.forEach((function(e){var i=e.match(t)[0],o=e.match(n)[2];i&&o&&r.push({type:i===zt?Wt:Vt,url:o})}))}return r},_parseBidResponse:function(e,t){var n,r;try{n=e.seatbid[0].bid[0]}catch(e){return}if(n.ext&&n.ext.encp)r=n.ext.encp;else if(null===(r=n.price)||isNaN(r))return void(0,a.H)("Invalid price in bid response",Bt.AOL,n);return{bidderCode:t.bidderCode,requestId:t.bidId,ad:n.adm,cpm:r,width:n.w,height:n.h,creativeId:n.crid||0,pubapiId:e.id,currency:e.cur||"USD",dealId:n.dealid,netRevenue:!0,meta:{advertiserDomains:n&&n.adomain?n.adomain:[]},ttl:t.ttl}},isOneMobileBidder:Yt,isSecureProtocol:function(){return"https:"===document.location.protocol}};(0,Xe.dX)(rn),(0,o.z)("aolBidAdapter");var on=n(3389),an=n(5145),sn="appnexus",dn=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],cn=["minduration","maxduration","skip","skipafter","playbackmethod","api","startdelay"],ln=["age","externalUid","external_uid","segments","gender","dnt","language"],un=["geo","device_id"],pn=["enabled","dongle","member_id","debug_timeout"],fn={apn_debug_dongle:"dongle",apn_debug_member_id:"member_id",apn_debug_timeout:"debug_timeout"},hn={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5}},gn={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0}},icon:{serverName:"icon",requiredParams:{required:!0}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},mn=/\/\/cdn\.adnxs\.com\/v|\/\/cdn\.adnxs\-simple\.com\/v/,vn=(0,J.df)({bidderCode:sn}),yn={code:sn,gvlid:32,aliases:[{code:"appnexusAst",gvlid:32},{code:"emxdigital",gvlid:183},{code:"pagescience",gvlid:32},{code:"defymedia",gvlid:32},{code:"gourmetads",gvlid:32},{code:"matomy",gvlid:32},{code:"featureforward",gvlid:32},{code:"oftmedia",gvlid:32},{code:"adasta",gvlid:32},{code:"beintoo",gvlid:618}],supportedMediaTypes:[P.Mk,P.pX,P.B5],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.placement_id||e.params.member&&(e.params.invCode||e.params.inv_code))},buildRequests:function(e,t){var n,r,i=(e=(0,l.lY)(e)).map(wn),o=(0,f.sE)(e,In),d={};!0===g.vc.getConfig("coppa")&&(d={coppa:!0}),o&&Object.keys(o.params.user).filter((function(e){return(0,f.q9)(ln,e)})).forEach((function(e){var t=(0,a.G2)(e);if("segments"===e&&(0,a.kJ)(o.params.user[e])){var n=[];o.params.user[e].forEach((function(e){(0,a.hj)(e)?n.push({id:e}):(0,a.PO)(e)&&n.push(e)})),d[t]=n}else"segments"!==e&&(d[t]=o.params.user[e])}));var c,u=(0,f.sE)(e,kn);u&&u.params&&u.params.app&&(c={},Object.keys(u.params.app).filter((function(e){return(0,f.q9)(un,e)})).forEach((function(e){return c[e]=u.params.app[e]})));var p,h=(0,f.sE)(e,Cn);h&&h.params&&u.params.app&&u.params.app.id&&(p={appid:h.params.app.id});var m={},v={},y=vn.getCookie("apn_prebid_debug")||null;if(y)try{m=JSON.parse(y)}catch(e){(0,a.H)("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{Object.keys(fn).forEach((function(e){var t=(0,a.rD)(e);(0,a.d8)(t)&&""!==t&&(m[fn[e]]=t,m.enabled=!0)})),m=(0,a.uh)({member_id:"number",debug_timeout:"number"},m);var b=(0,f.sE)(e,En);b&&b.debug&&(m=b.debug)}m&&m.enabled&&Object.keys(m).filter((function(e){return(0,f.q9)(pn,e)})).forEach((function(e){v[e]=m[e]}));var _=(0,f.sE)(e,Sn),w=_?parseInt(_.params.member,10):0,T=e[0].schain,I=(0,f.sE)(e,Pn),S={tags:(0,A.Z)(i),user:d,sdk:{source:"pbjs",version:"7.47.0"},schain:T};I&&(S.iab_support={omidpn:"Appnexus",omidpv:"7.47.0"}),w>0&&(S.member_id=w),u&&(S.device=c),h&&(S.app=p);var k,C,E=(0,a.I8)(t&&t.ortb2),P=(k=E,C=[],["site.keywords","site.content.keywords","user.keywords","app.keywords","app.content.keywords"].forEach((function(e){var t=(0,s.Z)(k,e);(0,a.d8)(t)&&C.push(t)})),C).map((function(e){return Mn(e)})),x=(0,a.I8)(g.vc.getConfig("appnexusAuctionKeywords"))||{};Object.keys(x).forEach((function(e){((0,a.d8)(x[e])||(0,a.hj)(x[e]))&&(x[e]=[x[e]])}));var O=a.Ee.apply(void 0,[{},x].concat((0,A.Z)(P))),D=(0,a.Bq)(O);if(D.length>0&&(D.forEach(_n),S.keywords=D),g.vc.getConfig("adpod.brandCategoryExclusion")&&(S.brand_category_uniqueness=!0),v.enabled&&(S.debug=v,(0,a.PN)("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(v,null,4))),t&&t.gdprConsent&&(S.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~"))){var R=t.gdprConsent.addtlConsent,M=R.substring(R.indexOf("~")+1);S.gdpr_consent.addtl_consent=M.split(".").map((function(e){return parseInt(e,10)}))}if(t&&t.uspConsent&&(S.us_privacy=t.uspConsent),null!=t&&t.gppConsent?S.privacy={gpp:t.gppConsent.gppString,gpp_sid:t.gppConsent.applicableSections}:null!=t&&null!==(n=t.ortb2)&&void 0!==n&&null!==(r=n.regs)&&void 0!==r&&r.gpp&&(S.privacy={gpp:t.ortb2.regs.gpp,gpp_sid:t.ortb2.regs.gpp_sid}),t&&t.refererInfo){var N={rd_ref:encodeURIComponent(t.refererInfo.topmostLocation),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map((function(e){return encodeURIComponent(e)})).join(",")},U=t.refererInfo.canonicalUrl;(0,a.d8)(U)&&""!==U&&(N.rd_can=U),S.referrer_detection=N}if((0,f.sE)(e,An)&&e.filter(An).forEach((function(e){var t=function(e,t){var n=t.mediaTypes.video,r=n.durationRangeSec,i=n.requireExactDuration,o=function(e){var t=e.adPodDurationSec,n=e.durationRangeSec,r=e.requireExactDuration,i=(0,a.XV)(n),o=Math.floor(t/i);return r?Math.max(o,n.length):o}(t.mediaTypes.video),s=(0,a.d5)(r),d=e.filter((function(e){return e.uuid===t.bidId})),c=a.hl.apply(void 0,(0,A.Z)(d).concat([o]));if(i){var l=Math.ceil(o/r.length),u=(0,a.yo)(c,l);r.forEach((function(e,t){u[t].map((function(t){xn(t,"minduration",e),xn(t,"maxduration",e)}))}))}else c.map((function(e){return xn(e,"maxduration",s)}));return c}(i,e),n=S.tags.filter((function(t){return t.uuid!==e.bidId}));S.tags=[].concat((0,A.Z)(n),(0,A.Z)(t))})),e[0].userId){var L=[];e[0].userIdAsEids.forEach((function(e){!e||!e.uids||e.uids.length<1||e.uids.forEach((function(t){var n={source:e.source,id:t.id};"adserver.org"==e.source?n.rti_partner="TDID":"uidapi.com"==e.source&&(n.rti_partner="UID2"),L.push(n)}))})),L.length&&(S.eids=L)}i[0].publisher_id&&(S.publisher_id=i[0].publisher_id);var j=function(e,t){var n=[],r={withCredentials:!0},i="https://ib.adnxs.com/ut/v3/prebid";if((0,an.h)(null==t?void 0:t.gdprConsent)||(i="https://ib.adnxs-simple.com/ut/v3/prebid"),"TRUE"!==(0,a.rD)("apn_test").toUpperCase()&&!0!==g.vc.getConfig("apn_test")||(r.customHeaders={"X-Is-Test":1}),e.tags.length>15){var o=(0,a.I8)(e);(0,a.yo)(e.tags,15).forEach((function(e){o.tags=e;var a=JSON.stringify(o);n.push({method:"POST",url:i,data:a,bidderRequest:t,options:r})}))}else{var s=JSON.stringify(e);n={method:"POST",url:i,data:s,bidderRequest:t,options:r}}return n}(S,t);return j},interpretResponse:function(e,t){var n=this,r=t.bidderRequest;e=e.body;var i=[];if(!e||e.error){var o="in response for ".concat(r.bidderCode," adapter");return e&&e.error&&(o+=": ".concat(e.error)),(0,a.H)(o),i}if(e.tags&&e.tags.forEach((function(e){var t,o=(t=e)&&t.ads&&t.ads.length&&(0,f.sE)(t.ads,(function(e){return e.rtb}));if(o&&(!0===O.S.get(r.bidderCode,"allowZeroCpmBids")?o.cpm>=0:o.cpm>0)&&(0,f.q9)(n.supportedMediaTypes,o.ad_type)){var d=function(e,t,n){var r=(0,a.zE)(e.uuid,[n]),i=(0,a._d)(),o={adId:i,requestId:e.uuid,cpm:t.cpm,creativeId:t.creative_id,dealId:t.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:r.adUnitCode,appnexus:{buyerMemberId:t.buyer_member_id,dealPriority:t.deal_priority,dealCode:t.deal_code}};if(t.adomain&&(o.meta=Object.assign({},o.meta,{advertiserDomains:[t.adomain]})),t.advertiser_id&&(o.meta=Object.assign({},o.meta,{advertiserId:t.advertiser_id})),t.buyer_member_id&&(o.meta=Object.assign({},o.meta,{dchain:function(e){return{ver:"1.0",complete:0,nodes:[{bsid:e.buyer_member_id.toString()}]}}(t)})),t.brand_id&&(o.meta=Object.assign({},o.meta,{brandId:t.brand_id})),t.rtb.video)switch(Object.assign(o,{width:t.rtb.video.player_width,height:t.rtb.video.player_height,vastImpUrl:t.notify_url,ttl:3600}),(0,s.Z)(r,"mediaTypes.video.context")){case P.Oh:var d=(0,Xe.Q1)(r.bidder,t.brand_category_id);o.meta=Object.assign({},o.meta,{primaryCatId:d});var c=t.deal_priority;o.video={context:P.Oh,durationSeconds:Math.floor(t.rtb.video.duration_ms/1e3),dealTier:c},o.vastUrl=t.rtb.video.asset_url;break;case on.gZ:if(o.adResponse=e,o.adResponse.ad=o.adResponse.ads[0],o.adResponse.ad.video=o.adResponse.ad.rtb.video,o.vastXml=t.rtb.video.content,t.renderer_url){var l=(0,f.sE)(n.bids,(function(t){return t.bidId===e.uuid})),u=(0,s.Z)(l,"mediaTypes.video.renderer.options");u||(u=(0,s.Z)(l,"renderer.options")),o.renderer=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=h.Th.install({id:t.renderer_id,url:t.renderer_url,config:n,loaded:!1,adUnitCode:e});try{r.setRender(On)}catch(e){(0,a.yN)("Prebid Error calling setRender on renderer",e)}return r.setEventHandlers({impression:function(){return(0,a.ji)("AppNexus outstream video impression event")},loaded:function(){return(0,a.ji)("AppNexus outstream video loaded event")},ended:function(){(0,a.ji)("AppNexus outstream renderer video event"),document.querySelector("#".concat(e)).style.display="none"}}),r}(o.adUnitCode,t,u)}break;case on.LD:o.vastUrl=t.notify_url+"&redir="+encodeURIComponent(t.rtb.video.asset_url)}else if(t.rtb[P.B5]){var p,g=t.rtb[P.B5];if(function(e){if(!e||""===e)return!1;var t=e.match(mn),n=null!=t&&t.length>=1,r=e.match("trk.js"),i=null!=r&&r.length>=1;return e.startsWith("<script")&&i&&n}(t.viewability.config)){var m="pbjs_adid="+i+";pbjs_auc="+r.adUnitCode;p=t.viewability.config.replace("dom_id=%native_dom_id%",m)}var v=g.javascript_trackers;null==v?v=p:(0,a.d8)(v)?v=[v,p]:v.push(p),o[P.B5]={title:g.title,body:g.desc,body2:g.desc2,cta:g.ctatext,rating:g.rating,sponsoredBy:g.sponsored,privacyLink:g.privacy_link,address:g.address,downloads:g.downloads,likes:g.likes,phone:g.phone,price:g.price,salePrice:g.saleprice,clickUrl:g.link.url,displayUrl:g.displayurl,clickTrackers:g.link.click_trackers,impressionTrackers:g.impression_trackers,video:g.video,javascriptTrackers:v},g.main_img&&(o.native.image={url:g.main_img.url,height:g.main_img.height,width:g.main_img.width}),g.icon&&(o.native.icon={url:g.icon.url,height:g.icon.height,width:g.icon.width})}else{Object.assign(o,{width:t.rtb.banner.width,height:t.rtb.banner.height,ad:t.rtb.banner.content});try{if(t.rtb.trackers)for(var y=0;y<t.rtb.trackers[0].impression_urls.length;y++){var b=t.rtb.trackers[0].impression_urls[y],_=(0,a.SG)(b);o.ad+=_}}catch(e){(0,a.H)("Error appending tracking pixel",e)}}return o}(e,o,r);d.mediaType=function(e){var t=e.ad_type;return t===P.pX?P.pX:t===P.B5?P.B5:P.Mk}(o),i.push(d)}})),e.debug&&e.debug.debug_info){var d="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info;d=d.replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),(0,a.ji)("https://console.appnexus.com/docs/understanding-the-debug-auction"),(0,a.ji)(d)}return i},getMappingFileInfo:function(){return{url:"https://acdn.adnxs-simple.com/prebid/appnexus-mapping/mappings.json",refreshInDays:2}},getUserSyncs:function(e,t,n,r,i){if(e.iframeEnabled&&(0,an.h)(n)&&function(e){return!e||!Array.isArray(e.applicableSections)||e.applicableSections.every((function(e){return"number"==typeof e&&e<=5}))}(i))return[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]},transformBidParams:function(e,t,n,r){var i=a.Bq;if(!0===t){var o=null,d=g.vc.getConfig("s2sConfig");(0,a.PO)(d)?o=(0,s.Z)(d,"endpoint.p1Consent"):(0,a.kJ)(d)&&d.forEach((function(e){(0,f.q9)(e.bidders,n.bids[0].bidder)&&(o=(0,s.Z)(e,"endpoint.p1Consent"))})),o&&o.match("/openrtb2/prebid")&&(i=Rn)}return e=(0,a.uh)({member:"string",invCode:"string",placementId:"number",keywords:i,publisherId:"number"},e),t&&(bn(e.keywords)&&e.keywords.forEach(_n),Object.keys(e).forEach((function(t){var n=(0,a.G2)(t);n!==t&&(e[n]=e[t],delete e[t])})),e.use_pmt_rule="boolean"==typeof e.use_payment_rule&&e.use_payment_rule,e.use_payment_rule&&delete e.use_payment_rule),e}};function bn(e){return!!((0,a.kJ)(e)&&e.length>0)}function _n(e){bn(e.value)&&""===e.value[0]&&delete e.value}function wn(e){var t={};Object.keys(e.params).forEach((function(t){var n=(0,a.G2)(t);n!==t&&(e.params[n]=e.params[t],delete e.params[t])})),t.sizes=Tn(e.sizes),t.primary_size=t.sizes[0],t.ad_types=[],t.uuid=e.bidId,e.params.placement_id?t.id=parseInt(e.params.placement_id,10):t.code=e.params.inv_code,t.allow_smaller_sizes=e.params.allow_smaller_sizes||!1,t.use_pmt_rule="boolean"==typeof e.params.use_payment_rule?e.params.use_payment_rule:"boolean"==typeof e.params.use_pmt_rule&&e.params.use_pmt_rule,t.prebid=!0,t.disable_psa=!0;var n=function(e){if(!(0,a.LQ)(e.getFloor))return e.params.reserve?e.params.reserve:null;var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return(0,a.PO)(t)&&!isNaN(t.floor)&&"USD"===t.currency?t.floor:null}(e);if(n&&(t.reserve=n),e.params.position)t.position={above:1,below:2}[e.params.position]||0;else{var r=(0,s.Z)(e,"mediaTypes.banner.pos")||(0,s.Z)(e,"mediaTypes.video.pos");0!==r&&1!==r&&3!==r||(t.position=3===r?2:r)}e.params.traffic_source_code&&(t.traffic_source_code=e.params.traffic_source_code),e.params.private_sizes&&(t.private_sizes=Tn(e.params.private_sizes)),e.params.supply_type&&(t.supply_type=e.params.supply_type),e.params.pub_click&&(t.pubclick=e.params.pub_click),e.params.ext_inv_code&&(t.ext_inv_code=e.params.ext_inv_code),e.params.publisher_id&&(t.publisher_id=parseInt(e.params.publisher_id,10)),e.params.external_imp_id&&(t.external_imp_id=e.params.external_imp_id);var i=(0,s.Z)(e,"ortb2Imp.ext.data.keywords");if((0,a.d8)(i)&&""!==i||!(0,a.xb)(e.params.keywords)){var o=Mn(i),d=(0,a.PO)(e.params.keywords)?(0,a.I8)(e.params.keywords):{};Object.keys(d).forEach((function(e){((0,a.d8)(d[e])||(0,a.hj)(d[e]))&&(d[e]=[d[e]])}));var c=(0,a.Ee)({},d,o),l=(0,a.Bq)(c);l.length>0&&(l.forEach(_n),t.keywords=l)}var u,h,g=(0,s.Z)(e,"ortb2Imp.ext.data.pbadslot");if(g&&(t.gpid=g),(e.mediaType===P.B5||(0,s.Z)(e,"mediaTypes.".concat(P.B5)))&&(t.ad_types.push(P.B5),0===t.sizes.length&&(t.sizes=Tn([1,1])),e.nativeParams)){var m=(u=e.nativeParams,h={},Object.keys(u).forEach((function(e){var t=gn[e]&&gn[e].serverName||gn[e]||e,n=gn[e]&&gn[e].requiredParams;if(h[t]=Object.assign({},n,u[e]),(t===gn.image.serverName||t===gn.icon.serverName)&&h[t].sizes){var r=h[t].sizes;((0,a.HC)(r)||(0,a.kJ)(r)&&r.length>0&&r.every((function(e){return(0,a.HC)(e)})))&&(h[t].sizes=Tn(h[t].sizes))}t===gn.privacyLink&&(h.privacy_supported=!0)})),h);t[P.B5]={layouts:[m]}}var v=(0,s.Z)(e,"mediaTypes.".concat(P.pX)),y=(0,s.Z)(e,"mediaTypes.video.context");t.hb_source=v&&"adpod"===y?7:1,(e.mediaType===P.pX||v)&&t.ad_types.push(P.pX),(e.mediaType===P.pX||v&&"outstream"!==y)&&(t.require_asset_url=!0),e.params.video&&(t.video={},Object.keys(e.params.video).filter((function(e){return(0,f.q9)(dn,e)})).forEach((function(n){switch(n){case"context":case"playback_method":var r=e.params.video[n];r=(0,a.kJ)(r)?r[0]:r,t.video[n]=hn[n][r];break;case"frameworks":break;default:t.video[n]=e.params.video[n]}})),e.params.video.frameworks&&(0,a.kJ)(e.params.video.frameworks)&&(t.video_frameworks=e.params.video.frameworks)),v&&(t.video=t.video||{},Object.keys(v).filter((function(e){return(0,f.q9)(cn,e)})).forEach((function(e){switch(e){case"minduration":case"maxduration":"number"!=typeof t.video[e]&&(t.video[e]=v[e]);break;case"skip":"boolean"!=typeof t.video.skippable&&(t.video.skippable=1===v[e]);break;case"skipafter":"number"!=typeof t.video.skipoffset&&(t.video.skippoffset=v[e]);break;case"playbackmethod":if("number"!=typeof t.video.playback_method){var n=v[e];(n=(0,a.kJ)(n)?n[0]:n)>=1&&n<=4&&(t.video.playback_method=n)}break;case"api":if(!t.video_frameworks&&(0,a.kJ)(v[e])){var r=v[e].map((function(e){var t=4===e?5:5===e?4:e;if(t>=1&&t<=5)return t})).filter((function(e){return e}));t.video_frameworks=r}break;case"startdelay":case"placement":var i="context";if("number"!=typeof t.video[i]){var o=v.placement,s=v.startdelay,d=function(e){if(e)return 2===e?"in-banner":e>2?"outstream":void 0}(o)||function(e){if(e)return 0===e?"pre_roll":-1===e?"mid_roll":-2===e?"post_roll":void 0}(s);t.video[i]=hn[i][d]}}}))),e.renderer&&(t.video=Object.assign({},t.video,{custom_renderer_present:!0})),e.params.frameworks&&(0,a.kJ)(e.params.frameworks)&&(t.banner_frameworks=e.params.frameworks);var b=(0,f.sE)(p.K.getAdUnits(),(function(t){return e.transactionId===t.transactionId}));return b&&b.mediaTypes&&b.mediaTypes.banner&&t.ad_types.push(P.Mk),0===t.ad_types.length&&delete t.ad_types,t}function Tn(e){var t=[],n={};if((0,a.kJ)(e)&&2===e.length&&!(0,a.kJ)(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"===(0,bt.Z)(e))for(var r=0;r<e.length;r++){var i=e[r];(n={}).width=parseInt(i[0],10),n.height=parseInt(i[1],10),t.push(n)}return t}function In(e){return!!e.params.user}function Sn(e){return!!parseInt(e.params.member,10)}function kn(e){if(e.params)return!!e.params.app}function Cn(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function En(e){return!!e.debug}function An(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===P.Oh}function Pn(e){var t=!1,n=e.params,r=e.params.video;return n.frameworks&&(0,a.kJ)(n.frameworks)&&(t=(0,f.q9)(e.params.frameworks,6)),!t&&r&&r.frameworks&&(0,a.kJ)(r.frameworks)&&(t=(0,f.q9)(e.params.video.frameworks,6)),t}function xn(e,t,n){(0,a.xb)(e.video)&&(e.video={}),e.video[t]=n}function On(e,t){!function(e){try{var t=document.getElementById(e).querySelectorAll("div[id^='google_ads']");t[0]&&t[0].style.setProperty("display","none")}catch(e){}}(e.adUnitCode),function(e){try{var t=document.getElementById(e).querySelectorAll("script[id^='sas_script']");t[0].nextSibling&&"iframe"===t[0].nextSibling.localName&&t[0].nextSibling.style.setProperty("display","none")}catch(e){}}(e.adUnitCode),e.renderer.push((function(){((0,a.W$)(t)||window).ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},Dn.bind(null,e))}))}function Dn(e,t,n){e.renderer.handleVideoEvent({id:t,eventName:n})}function Rn(e){var t="";return Object.keys(e).forEach((function(n){(0,a.d8)(e[n])?""!==e[n]?t+="".concat(n,"=").concat(e[n],","):t+="".concat(n,","):(0,a.kJ)(e[n])&&(""===e[n][0]?t+="".concat(n,","):e[n].forEach((function(e){t+="".concat(n,"=").concat(e,",")})))})),t=t.substring(0,t.length-1)}function Mn(e){var t={};return(0,a.d8)(e)&&""!==e&&e.split(/\s*(?:,)\s*/).forEach((function(e){if(-1!==e.indexOf("=")){var n=e.split("="),r=n[0],i=n[1];t.hasOwnProperty(r)?t[r].push(i):t[r]=[i]}else t.hasOwnProperty(e)||(t[e]=[""])})),t}(0,Xe.dX)(yn),(0,o.z)("appnexusBidAdapter");var Nn,Un,Ln,jn,Bn,qn,Fn,Vn=["request","imp","bidResponse","response"],zn=["default","pbs"],Wn=Vn[0],Hn=Vn[1],Zn=Vn[2],$n=Vn[3],Gn=zn[0],Kn=zn[1],Xn=new Set(Vn),Jn=(Nn={},{registerOrtbProcessor:function(e){var t=e.type,n=e.name,r=e.fn,i=e.priority,o=void 0===i?0:i,a=e.dialects,s=void 0===a?[Gn]:a;if(!Xn.has(t))throw new Error("ORTB processor type must be one of: ".concat(Vn.join(", ")));s.forEach((function(e){Nn.hasOwnProperty(e)||(Nn[e]={}),Nn[e].hasOwnProperty(t)||(Nn[e][t]={}),Nn[e][t][n]={priority:o,fn:r}}))},getProcessors:function(e){return Nn[e]||{}}}),Yn=Jn.registerOrtbProcessor,Qn=Jn.getProcessors,er=2,tr=!1,nr={iab:function(e){var t=e.onSuccess,n=e.onError,r=e.onEvent;function o(e,i){(0,a.PN)("Received a response from CMP",e),i?(r(e),!1!==e.gdprApplies&&"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||or(e,{onSuccess:t,onError:n})):n("CMP unable to register callback function.  Please check CMP setup.")}var s={},d=function(){for(var e,t,n=window;;){try{if("function"==typeof n.__tcfapi){t=n.__tcfapi,e=n;break}}catch(e){}try{if(n.frames.__tcfapiLocator){e=n;break}}catch(e){}if(n===window.top)break;n=n.parent}return{cmpFrame:e,cmpFunction:t}}(),c=d.cmpFrame,l=d.cmpFunction;if(!c)return n("TCF2 CMP not found.");"function"==typeof l?((0,a.PN)("Detected CMP API is directly accessible, calling it now..."),l("addEventListener",er,o)):((0,a.PN)("Detected CMP is outside the current iframe where Prebid.js is located, calling it now..."),function(e,t,n){var r="__tcfapi",o="".concat(r,"Call");window[r]=function(e,n,r,a){var d=Math.random()+"",c=(0,i.Z)({},o,{command:e,version:n,parameter:a,callId:d});s[d]=r,t.postMessage(c,"*")},window.addEventListener("message",(function(e){var t="".concat(r,"Return"),n="string"==typeof e.data&&(0,f.q9)(e.data,t)?JSON.parse(e.data):e.data;if(n[t]&&n[t].callId){var i=n[t];s.hasOwnProperty(i.callId)&&s[i.callId](i.returnValue,i.success)}}),!1),window[r]("addEventListener",er,n)}(0,c,o))},static:function(e){var t=e.onSuccess,n=e.onError;or(Bn,{onSuccess:t,onError:n})}};function rr(e){var t,n,r=!1,i=null,o=!1;function a(e){null!=i&&clearTimeout(i),r||null==e||(0===e?t():i=setTimeout(t,e))}function s(t,n,i){if(a(null),r=!0,Y.rp.setConsentData(t),"function"==typeof e){for(var o=arguments.length,s=new Array(o>3?o-3:0),d=3;d<o;d++)s[d-3]=arguments[d];e.apply(void 0,[n,i].concat(s))}}if((0,f.q9)(Object.keys(nr),Un)){var d={onSuccess:function(e){return s(e,!1)},onError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];s.apply(void 0,[null,!0,e].concat(n))},onEvent:function(e){n=e,o||(o=!0,null!=qn&&a(qn))}};t=function(){var e=function(e){s(e,!1,"".concat(o?"Timeout waiting for user action on CMP":"CMP did not load",", continuing auction..."))};or(n,{onSuccess:e,onError:function(){return e(ar(void 0))}})},nr[Un](d),null!=qn&&o||a(Ln)}else s(null,!1,"CMP framework (".concat(Un,") is not a supported framework.  Aborting consentManagement module and resuming auction."))}var ir=(0,Q.g3)("gdpr",(function(e,t){var n;n=function(n,r){if(r){var i=a.yN;n&&(i=a.H,r="".concat(r," Canceling auction as per consentManagement config."));for(var o=arguments.length,s=new Array(o>2?o-2:0),d=2;d<o;d++)s[d-2]=arguments[d];i.apply(void 0,[r].concat(s))}n?(e.stopTiming(),"function"==typeof t.bidsBackHandler?t.bidsBackHandler():(0,a.H)("Error executing bidsBackHandler")):e.call(this,t)},Fn?((0,a.PN)("User consent information already known.  Pulling internally stored information..."),n(!1)):rr(n)}));function or(e,t){var n=t.onSuccess,r=t.onError;!function(){var t=e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:jn,n=e&&e.tcString;return!("boolean"==typeof t&&(!0!==t||n&&(0,a.d8)(n)))}()?n(ar(e)):r("CMP returned unexpected value during lookup process.",e)}function ar(e){return Fn={consentString:e?e.tcString:void 0,vendorData:e||void 0,gdprApplies:e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:jn},e&&e.addtlConsent&&(0,a.d8)(e.addtlConsent)&&(Fn.addtlConsent=e.addtlConsent),Fn.apiVersion=er,Fn}g.vc.getConfig("consentManagement",(function(e){return function(e){var t;(e=e&&(e.gdpr||e.usp||e.gpp?e.gdpr:e))&&"object"===(0,bt.Z)(e)?((0,a.d8)(e.cmpApi)?Un=e.cmpApi:(Un="iab",(0,a.PN)("consentManagement config did not specify cmp.  Using system default setting (".concat("iab",")."))),(0,a.hj)(e.timeout)?Ln=e.timeout:(Ln=1e4,(0,a.PN)("consentManagement config did not specify timeout.  Using system default setting (".concat(1e4,")."))),qn=(0,a.hj)(e.actionTimeout)?e.actionTimeout:null,jn=!0===e.defaultGdprScope,(0,a.PN)("consentManagement module has been activated..."),"static"===Un&&((0,a.PO)(e.consentData)?(null!=(null===(t=Bn=e.consentData)||void 0===t?void 0:t.getTCData)&&(Bn=Bn.getTCData),Ln=0):(0,a.H)("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),tr||(0,o.R)().requestBids.before(ir,50),tr=!0,Y.rp.enable(),rr()):(0,a.yN)("consentManagement (gdpr) config not defined, exiting consent manager")}(e.consentManagement)})),fe.before((function(e,t){return e(t.then((function(e){var t=Y.rp.getConsentData();return t&&("boolean"==typeof t.gdprApplies&&d(e,"regs.ext.gdpr",t.gdprApplies?1:0),d(e,"user.ext.consent",t.consentString)),e})))})),Yn({type:Wn,name:"gdprAddtlConsent",fn:function(e,t){var n,r=null===(n=t.gdprConsent)||void 0===n?void 0:n.addtlConsent;r&&"string"==typeof r&&d(e,"user.ext.ConsentedProvidersSettings.consented_providers",r)}}),(0,o.z)("consentManagement");var sr,dr,cr="iab",lr=cr,ur=50,pr=!1,fr={iab:function(e){var t,n=e.onSuccess,r=e.onError,i=(t={},{consentDataCallback:function(e,i){i&&e.uspString&&(t.usPrivacy=e.uspString),t.usPrivacy?mr(t,{onSuccess:n,onError:r}):r("Unable to get USP consent string.")}}),o={},s=function(){for(var e,t,n=window;;){try{if("function"==typeof n.__uspapi){t=n.__uspapi,e=n;break}}catch(e){}try{if(n.frames.__uspapiLocator){e=n;break}}catch(e){}if(n===window.top)break;n=n.parent}return{uspapiFrame:e,uspapiFunction:t}}(),d=s.uspapiFrame,c=s.uspapiFunction;if(!d)return r("USP CMP not found.");function l(e,t){try{e("registerDeletion",t,Y.ZP.callDataDeletionRequest)}catch(e){(0,a.H)("Error invoking CMP `registerDeletion`:",e)}}(0,a.LQ)(c)?((0,a.PN)("Detected USP CMP is directly accessible, calling it now..."),c("getUSPData",1,i.consentDataCallback),l(c,1)):((0,a.PN)("Detected USP CMP is outside the current iframe where Prebid.js is located, calling it now..."),p("getUSPData",d,i.consentDataCallback),l(p,d));var u=!1;function p(e,t,n){var r,i,a;u||(window.addEventListener("message",(function(e){var t=e&&e.data&&e.data.__uspapiReturn;t&&t.callId&&o.hasOwnProperty(t.callId)&&(o[t.callId](t.returnValue,t.success),delete o[t.callId])}),!1),u=!0),r=n,a={__uspapiCall:{command:e,version:1,callId:i=Math.random()+""}},o[i]=r,t.postMessage(a,"*")}},static:function(e){var t=e.onSuccess,n=e.onError;mr(sr,{onSuccess:t,onError:n})}};function hr(e){var t=null,n=!1;function r(r,i){if(null!=t&&clearTimeout(t),n=!0,Y.nX.setConsentData(r),null!=e){for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];e.apply(void 0,[i].concat(a))}}if(fr[lr]){var i={onSuccess:r,onError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r.apply(void 0,[null,"".concat(e," Resuming auction without consent data as per consentManagement config.")].concat(n))}};fr[lr](i),n||(0===ur?mr(void 0,i):t=setTimeout(i.onError.bind(null,"USPAPI workflow exceeded timeout threshold."),ur))}else r(null,"USP framework (".concat(lr,") is not a supported framework. Aborting consentManagement module and resuming auction."))}var gr=(0,Q.g3)("usp",(function(e,t){var n=this;pr||vr(),hr((function(r){if(null!=r){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];a.yN.apply(void 0,[r].concat(o))}e.call(n,t)}))}));function mr(e,t){var n=t.onSuccess,r=t.onError;e&&e.usPrivacy?(function(e){e&&e.usPrivacy&&(dr=e.usPrivacy)}(e),n(dr)):r("USPAPI returned unexpected value during lookup process.",e)}function vr(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];pr||((0,a.PN)("USPAPI consentManagement module has been activated".concat(e?"":" using default values (api: '".concat(lr,"', timeout: ").concat(ur,"ms)"))),pr=!0,Y.nX.enable()),hr()}g.vc.getConfig("consentManagement",(function(e){return function(e){(e=e&&e.usp)&&"object"===(0,bt.Z)(e)||(0,a.yN)("consentManagement.usp config not defined, using defaults"),e&&(0,a.d8)(e.cmpApi)?lr=e.cmpApi:(lr=cr,(0,a.PN)("consentManagement.usp config did not specify cmpApi. Using system default setting (".concat(cr,")."))),e&&(0,a.hj)(e.timeout)?ur=e.timeout:(ur=50,(0,a.PN)("consentManagement.usp config did not specify timeout. Using system default setting (".concat(50,")."))),"static"===lr&&((0,a.PO)(e.consentData)&&(0,a.PO)(e.consentData.getUSPData)?(e.consentData.getUSPData.uspString&&(sr={usPrivacy:e.consentData.getUSPData.uspString}),ur=0):(0,a.H)("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),vr(!0)}(e.consentManagement)})),(0,x.v5)("requestBids").before(gr,50),fe.before((function(e,t){return e(t.then((function(e){var t=Y.nX.getConsentData();return t&&d(e,"regs.ext.us_privacy",t),e})))})),(0,o.z)("consentManagementUsp"),n(7078);var yr,br=4,_r=[],wr={},Tr=!1,Ir=!0,Sr="USD",kr=!1,Cr={},Er={},Ar=function(){var e;function t(){e=(0,H.P)()}return t(),{done:function(){return e.resolve()},reset:t,promise:function(){return e.promise}}}();function Pr(e){yr?((0,a.yN)(e),(0,a.yN)("Currency failed loading rates, falling back to currency.defaultRates")):(0,a.H)(e)}g.vc.getConfig("currency",(function(e){return function(e){var t="https://cdn.jsdelivr.net/gh/prebid/currency-file@1/latest.json?date=$$TODAY$$";if("object"===(0,bt.Z)(e.rates)&&(Cr.conversions=e.rates,Tr=!0,Ir=!1),"object"===(0,bt.Z)(e.defaultRates)&&(yr=e.defaultRates,Cr.conversions=yr,Tr=!0),"string"==typeof e.adServerCurrency){(0,a.PN)("enabling currency support",arguments),Sr=e.adServerCurrency,e.conversionRateFile&&((0,a.PN)("currency using override conversionRateFile:",e.conversionRateFile),t=e.conversionRateFile);var n=t.indexOf("$$TODAY$$");if(-1!==n){var r=new Date,i="".concat(r.getMonth()+1),s="".concat(r.getDate());i.length<2&&(i="0".concat(i)),s.length<2&&(s="0".concat(s));var d="".concat(r.getFullYear()).concat(i).concat(s);t="".concat(t.substring(0,n)).concat(d).concat(t.substring(n+9,t.length))}!function(e){wr={},kr=!0,(0,a.PN)("Installing addBidResponse decorator for currency module",arguments),(0,o.R)().convertCurrency=function(e,t,n){return parseFloat(e)*Dr(t,n)},(0,x.v5)("addBidResponse").before(xr,100),Ir?(Ir=!1,(0,mt.h)(e,{success:function(e){try{Cr=JSON.parse(e),(0,a.PN)("currencyRates set to "+JSON.stringify(Cr)),wr={},Tr=!0,Or(),Ar.done()}catch(t){Pr("Failed to parse currencyRates response: "+e)}},error:function(){Pr.apply(void 0,arguments),Ar.done()}})):Ar.done()}(t)}else(0,a.PN)("disabling currency support"),function(){(0,a.PN)("Uninstalling addBidResponse decorator for currency module",arguments),(0,x.v5)("addBidResponse").getHooks({hook:xr}).remove(),delete(0,o.R)().convertCurrency,Sr="USD",wr={},kr=!1,Tr=!1,Ir=!0,Cr={},Er={}}();"object"===(0,bt.Z)(e.bidderCurrencyDefault)&&(Er=e.bidderCurrencyDefault)}(e.currency)}));var xr=(0,Q.A)("currency",(function(e,t,n,r){if(!n)return e.call(this,t,n,r);var i=n.bidderCode||n.bidder;if(Er[i]){var o=Er[i];n.currency&&o!==n.currency?(0,a.yN)("Currency default '".concat(i,": ").concat(o,"' ignored. adapter specified '").concat(n.currency,"'")):n.currency=o}if(n.currency||((0,a.yN)('Currency not specified on bid.  Defaulted to "USD"'),n.currency="USD"),n.getCpmInNewCurrency=function(e){return(parseFloat(this.cpm)*Dr(this.currency,e)).toFixed(3)},n.currency===Sr)return e.call(this,t,n,r);_r.push(function(e,t,n){return function(){var r=n[1];if(void 0!==r&&"currency"in r&&"cpm"in r){var i=r.currency;try{var o=Dr(i);1!==o&&(r.cpm=(parseFloat(r.cpm)*o).toFixed(4),r.currency=Sr)}catch(e){(0,a.yN)("Returning NO_BID, getCurrencyConversion threw error: ",e),n[1]=n[2](u.Gw.Xx)}}return e.apply(t,n)}}(e,this,[t,n,r])),!kr||Tr?Or():e.untimed.bail(Ar.promise())}));function Or(){for(;_r.length>0;)_r.shift()()}function Dr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sr,r=null,i="".concat(e,"->").concat(n);if(i in wr)r=wr[i],(0,a.ji)("Using conversionCache value "+r+" for "+i);else if(!1===kr){if("USD"!==e)throw new Error("Prebid currency support has not been enabled and fromCurrency is not USD");r=1}else if(e===n)r=1;else if(e in Cr.conversions){if(!(n in(t=Cr.conversions[e])))throw new Error("Specified adServerCurrency in config '"+n+"' not found in the currency rates file");r=t[n],(0,a.PN)("getCurrencyConversion using direct "+e+" to "+n+" conversionRate "+r)}else if(n in Cr.conversions){if(!(e in(t=Cr.conversions[n])))throw new Error("Specified fromCurrency '"+e+"' not found in the currency rates file");r=Rr(1/t[e],br),(0,a.PN)("getCurrencyConversion using reciprocal "+e+" to "+n+" conversionRate "+r)}else{var o=Object.keys(Cr.conversions)[0];if(!(e in Cr.conversions[o]))throw new Error("Specified fromCurrency '"+e+"' not found in the currency rates file");var s=1/Cr.conversions[o][e];if(!(n in Cr.conversions[o]))throw new Error("Specified adServerCurrency in config '"+n+"' not found in the currency rates file");r=Rr(s*Cr.conversions[o][n],br),(0,a.PN)("getCurrencyConversion using intermediate "+e+" thru "+o+" to "+n+" conversionRate "+r)}return i in wr||((0,a.ji)("Adding conversionCache value "+r+" for "+i),wr[i]=r),r}function Rr(e,t){for(var n=1,r=0;r<t;r++)n+="0";return Math.round(e*n)/n}function Mr(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}Yn({type:Wn,name:"currency",fn:function(e,t,n){kr&&(e.cur=e.cur||[n.currency||Sr])}}),(0,o.z)("currency");var Nr=["mind","maxd","size","playerSize","protocols","durationRangeSec"];function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jr="grid",Br="https://grid.bidswitch.net/hbjson",qr="tmguid",Fr=(0,J.df)({bidderCode:jr}),Vr="Bid from response has no auid parameter - ",zr="Bid from response has no adm parameter - ",Wr="Array of bid objects is empty",Hr="Seatbid array from response has empty item",Zr="Response is empty",$r="Response has empty seatbid array",Gr="Seatbid from response has no array of bid objects - ",Kr={trustx:{endpoint:"https://grid.bidswitch.net/hbjson?sp=trustx",syncurl:"https://x.bidswitch.net/sync?ssp=themediagrid",bidResponseExternal:{netRevenue:!1}},gridNM:{defaultParams:{multiRequest:!0}}},Xr=!1,Jr={code:jr,gvlid:686,aliases:["playwire","adlivetech","gridNM",{code:"trustx",skipPbsAliasing:!0}],supportedMediaTypes:[P.Mk,P.pX],isBidRequestValid:function(e){return e&&Boolean(e.params.uid||e.params.secid)},buildRequests:function(e,t){if(!e.length)return null;var n=null,i=null,o=null,d=null,c=null,l=null,u=null,p=!1,f=t||{},h=f.bidderRequestId,m=f.auctionId,v=f.gdprConsent,y=f.uspConsent,b=f.timeout,_=f.refererInfo,w=f.gppConsent,T=_?encodeURIComponent(_.page):"",I=b,S=[],k={},C=[],E={},x=[],O=[],D=[];e.forEach((function(e){var t={bid:e,savedPrebidBid:null};if(e.params.withCriteo&&ei.isBidRequestValid(e)&&(E[e.bidId]=t,x.push(e)),e.params.uid||e.params.secid){h||(h=e.bidderRequestId),m||(m=e.auctionId),o||(o=e.schain),d||(d=e.userIdAsEids),u||(u=Kr[e.bidder]&&Kr[e.bidder].endpoint);var s=e.params,c=e.mediaTypes,l=e.bidId,f=e.adUnitCode,g=e.rtd,v=e.ortb2Imp,y=Lr(Lr({},(Kr[e.bidder]||{}).defaultParams),s),b=y.secid,_=y.pubid,w=y.source,A=y.uid,R=y.keywords,M=y.forceBidder,N=y.multiRequest,U=y.content,L=y.video,j=function(e,t){var n=e.video?"video":"banner",i=t.params.bidFloor||t.params.floorcpm||0;if("function"==typeof t.getFloor){var o=t.getFloor({currency:"USD",mediaType:n,size:t.sizes.map((function(e){var t=(0,r.Z)(e,2);return{w:t[0],h:t[1]}}))});"object"!==(0,bt.Z)(o)||"USD"!==o.currency||isNaN(parseFloat(o.floor))||(i=Math.max(i,parseFloat(o.floor)))}return i}(c||{},e),B=g&&g.jwplayer&&g.jwplayer.targeting;B&&!i&&B.content&&(i=B.content);var q={id:l.toString(),tagid:(b||A).toString(),ext:{divid:f.toString()}};if(v&&(v.instl&&(q.instl=v.instl),v.ext&&(v.ext.data&&(q.ext.data=v.ext.data,q.ext.data.adserver&&q.ext.data.adserver.adslot?q.ext.gpid=q.ext.data.adserver.adslot.toString():v.ext.data.pbadslot&&(q.ext.gpid=v.ext.data.pbadslot.toString())),v.ext.gpid&&(q.ext.gpid=v.ext.gpid.toString()))),(0,a.xb)(R)||(n||(n=R),q.ext.bidder={keywords:R}),j&&(q.bidfloor=j),!c||c[P.Mk]){var F=function(e,t){var n=t.sizes||e.sizes;if(n&&n.length){var r=n.map((function(e){return(0,a.NI)(e)})),i=(0,a.NI)(n[0]);return r.length&&(i.format=r),i}}(e,c?c[P.Mk]:{});F&&(q.banner=F)}if(c&&c[P.pX]){var V=function(e,t,n){var r=Lr(Lr({},t),e),i=r.mind,o=r.maxd,s=r.size,d=r.playerSize,c=r.protocols,l=r.durationRangeSec,u=void 0===l?[]:l,p=Mr(r,Nr);if(s&&(0,a.d8)(s)){var f=s.split("x");2===f.length&&parseInt(f[0])&&parseInt(f[1])&&(p.w=parseInt(f[0]),p.h=parseInt(f[1]))}if(!p.w||!p.h){var h=((d||n||[]).toString().match(/^\d+,\d+/)||[])[0],g=h&&h.split(",").map((function(e){return parseInt(e)}));g&&2===g.length&&Object.assign(p,(0,a.NI)(g))}if(p.w&&p.h){var m=i||u[0]||p.minduration,v=o||u[1]||p.maxduration;return m&&(p.minduration=m),v&&(p.maxduration=v),c&&c.length&&(p.protocols=c),p}}(L,c[P.pX],e.sizes);V&&(q.video=V)}if(q.banner||q.video)if(N){var z={tid:e.auctionId&&e.auctionId.toString(),ext:{wrapper:"Prebid_js",wrapper_version:"7.47.0"}};e.schain&&(z.ext.schain=e.schain);var W={id:e.bidderRequestId&&e.bidderRequestId.toString(),site:{page:T},tmax:I,source:z,imp:[q]};_&&(W.site.publisher={id:_});var H=U||B&&B.content;H&&(W.site.content=H),C.push(W),O.push(w),D.push(t)}else k[l]=t,S.push(q);!p&&M&&Kr[M]&&(p=M)}})),(p=g.vc.getConfig("forceBidderName")||p)&&Kr[p]&&(u=Kr[p].endpoint,this.forceBidderName=p);var R={tid:m&&m.toString(),ext:{wrapper:"Prebid_js",wrapper_version:"7.47.0"}};o&&(R.ext.schain=o);var M=S.length||!C.length?{id:h&&h.toString(),site:{page:T},tmax:I,source:R,imp:S}:null;i&&(M.site.content=i),[].concat(C,[M]).forEach((function(e){if(e){c=null;var r=(0,s.Z)(t,"ortb2.user.data");r&&r.length&&(c={data:(0,A.Z)(r)}),v&&v.consentString&&(l={consent:v.consentString});var i=(0,s.Z)(t,"ortb2.user.ext.device");i&&((l=l||{}).device=Lr({},i)),d&&d.length&&((l=l||{}).eids=(0,A.Z)(d)),l&&Object.keys(l).length&&((c=c||{}).ext=l);var o=Fr.getDataFromLocalStorage(qr)||function(){if(g.vc.getConfig("localStorageWriteAllowed")){var e=(0,a.DO)().replace(/-/g,"");return Fr.setDataInLocalStorage(qr,e),e}return null}();o&&((c=c||{}).id=o.toString()),c&&(e.user=c);var u=(0,s.Z)(t,"ortb2.user.keywords")||null,p=(0,s.Z)(t,"ortb2.site.keywords")||null;u&&((n=n||{}).user=n.user||{},n.user.ortb2=[{name:"keywords",keywords:u.split(",")}]),p&&((n=n||{}).site=n.site||{},n.site.ortb2=[{name:"keywords",keywords:p.split(",")}]),n&&(n=function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];if(r)if("site"===n||"user"===n){var i={};Object.keys(r).forEach((function(e){if(Array.isArray(r[e])){var t=[];r[e].forEach((function(e){if("object"===(0,bt.Z)(e)&&e.name){var n={name:e.name,segments:[]};Object.keys(e).forEach((function(t){Array.isArray(e[t])&&e[t].forEach((function(e){e&&("string"==typeof e?n.segments.push({name:t,value:e}):"segments"===t&&"string"==typeof e.name&&"string"==typeof e.value&&n.segments.push(e))}))})),n.segments.length&&t.push(n)}})),t.length&&(i[e]=t)}})),t[n]=i}else t[n]=r})),Object.keys(t).length&&t}(n))&&(e.ext={keywords:n}),v&&v.gdprApplies&&(e.regs={ext:{gdpr:v.gdprApplies?1:0}});var f=(0,s.Z)(t,"ortb2.regs")||{};if(w||null!=f&&f.gpp){var h,m,b,_={gpp:null!==(h=null==w?void 0:w.gppString)&&void 0!==h?h:null==f?void 0:f.gpp,gpp_sid:null!==(m=null==w?void 0:w.applicableSections)&&void 0!==m?m:null==f?void 0:f.gpp_sid};e.regs=(0,a.Ee)(null!==(b=null==e?void 0:e.regs)&&void 0!==b?b:{},_)}y&&(e.regs||(e.regs={ext:{}}),e.regs.ext||(e.regs.ext={}),e.regs.ext.us_privacy=y),!0===g.vc.getConfig("coppa")&&(e.regs||(e.regs={}),e.regs.coppa=1);var T=(0,s.Z)(t,"ortb2.site");if(T){var I=[].concat((0,A.Z)(T.cat||[]),(0,A.Z)(T.pagecat||[])).filter((function(e){return e&&"string"==typeof e}));I.length&&(e.site.cat=I);var S=(0,s.Z)(T,"content.genre");S&&"string"==typeof S&&(e.site.content=Lr(Lr({},e.site.content),{},{genre:S}));var k=(0,s.Z)(T,"content.data");if(k&&k.length){var C=e.site.content||{};e.site.content=(0,a.Ee)(C,{data:k})}var E=(0,s.Z)(T,"content.id");E&&(e.site.content=Lr(Lr({},e.site.content),{},{id:E}))}}}));var N=x.length&&ei.buildRequests(x,t);return N&&(N.criteoBidsMap=E),[].concat((0,A.Z)(C.map((function(e,t){var n,r=(u||Br).replace(/[?&]sp=([^?&=]+)/,(function(e,t){return t&&(n=t),""})),i=O[t]||n;return{method:"POST",url:r+(r.indexOf("?")>-1?"&":"?")+"no_mapping=1"+(i?"&sp=".concat(i):""),data:JSON.stringify(e),bidObject:D[t]}}))),(0,A.Z)(M?[{method:"POST",url:u||Br,data:JSON.stringify(M),bidsMap:k}]:[]),(0,A.Z)(N?[N]:[]))},interpretResponse:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.Th;if(t.criteoBidsMap&&t.bidRequests)return ei.interpretResponse(e,t).filter((function(e){var n=(t.criteoBidsMap[e.requestId]||{}).savedPrebidBid;return Yr(e.cpm,n&&n.cpm)}));e=e&&e.body;var r,i=[];e?e.seatbid&&!e.seatbid.length&&(r=$r):r=Zr;var o=this.forceBidderName||this.code;return!r&&e.seatbid&&e.seatbid.forEach((function(e){!function(e,t,n,r,i){if(e){var o;if(e.auid||(o=Vr+JSON.stringify(e)),o||e.adm||e.nurl){var s=t.bidsMap?t.bidsMap[e.impid]:t.bidObject,d=s||{},c=d.bid,l=d.savedPrebidBid;if(c&&Yr(e.price,l&&l.cpm)){var u={requestId:c.bidId,cpm:e.price,width:e.w,height:e.h,creativeId:e.auid,currency:"USD",netRevenue:!0,ttl:360,meta:{advertiserDomains:e.adomain?e.adomain:[]},dealId:e.dealid};s.savedPrebidBid=u,e.ext&&e.ext.bidder&&e.ext.bidder.grid&&e.ext.bidder.grid.demandSource&&(u.adserverTargeting={hb_ds:e.ext.bidder.grid.demandSource},u.meta.demandSource=e.ext.bidder.grid.demandSource),"video"===e.content_type?(e.adm?(u.vastXml=e.adm,u.adResponse={content:u.vastXml}):e.nurl&&(u.vastUrl=e.nurl),u.mediaType=P.pX,c.renderer||c.mediaTypes&&c.mediaTypes.video&&"outstream"!==c.mediaTypes.video.context||(u.renderer=function(e,t,n){var r=n.install({id:t.id,url:t.url,loaded:!1});try{r.setRender(Qr)}catch(e){(0,a.yN)("Prebid Error calling setRender on renderer",e)}return r}(0,{id:c.bidId,url:"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js"},r))):(u.ad=e.adm,u.mediaType=P.Mk);var p=Kr[i]&&Kr[i].bidResponseExternal||{};n.push((0,a.Ee)(u,p))}}else o=zr+JSON.stringify(e);o&&(0,a.H)(o)}}(function(e){return e?e.bid?e.bid[0]||(0,a.H)(Wr):(0,a.H)(Gr+JSON.stringify(e)):(0,a.H)(Hr),e&&e.bid&&e.bid[0]}(e),t,i,n,o)})),r&&(0,a.H)(r),i},getUserSyncs:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[2],o=t[3];if(!Xr&&r.pixelEnabled){var a="";i&&("boolean"==typeof i.gdprApplies&&(a+="&gdpr=".concat(Number(i.gdprApplies))),"string"==typeof i.consentString&&(a+="&gdpr_consent=".concat(i.consentString))),o&&(a+="&us_privacy=".concat(o));var s=this.forceBidderName||this.code,d=Kr[s]&&Kr[s].syncurl||"https://x.bidswitch.net/sync?ssp=themediagrid";return Xr=!0,{type:"image",url:d+a}}}};function Yr(e,t){return!(0,a.hj)(t)||e>t||e===t&&Math.random()>.5}function Qr(e){e.renderer.push((function(){window.ANOutstreamVideo.renderAd({targetId:e.adUnitCode,adResponse:e.adResponse})}))}var ei={isBidRequestValid:function(e){return!(!e||!e.params||!e.params.zoneId&&!e.params.networkId||ii(e)&&!function(e){var t=!0;if(["mimes","playerSize","maxduration","protocols","api","skip","placement","playbackmethod"].forEach((function(n){void 0===(0,s.Z)(e,"mediaTypes.video."+n)&&void 0===(0,s.Z)(e,"params.video."+n)&&(t=!1,(0,a.H)("TheMediaGrid Bid Adapter (withCriteo mode): mediaTypes.video."+n+" is required"))})),t){var n=e.mediaTypes.video.placement||e.params.video.placement;if("instream"===e.mediaTypes.video.context&&1===n)return!0;if("outstream"===e.mediaTypes.video.context&&1!==n)return!0}return!1}(e))},buildRequests:function(e,t){var n,r,i,o,d=t.ortb2||{};Object.assign(t,{publisherExt:null===(n=d.site)||void 0===n?void 0:n.ext,userExt:null===(r=d.user)||void 0===r?void 0:r.ext,ceh:g.vc.getConfig("criteo.ceh"),coppa:g.vc.getConfig("coppa")});var c=function(e,t){var n,r="";t&&t.refererInfo&&(r=t.refererInfo.page);var i=(0,a.en)(null==t||null===(n=t.refererInfo)||void 0===n?void 0:n.topmostLocation).search,o={url:r,debug:"1"===i.pbt_debug,noLog:"1"===i.pbt_nolog,amp:!1};return e.forEach((function(e){"amp"===e.params.integrationMode&&(o.amp=!0)})),o}(e,t);if(i=function(e){var t="https://bidder.criteo.com/cdb";t+="?profileId=207",t+="&av="+String(34),t+="&wv="+encodeURIComponent("7.47.0"),t+="&cb="+String(Math.floor(99999999999*Math.random())),Fr.localStorageIsEnabled()?t+="&lsavail=1":t+="&lsavail=0",e.amp&&(t+="&im=1"),e.debug&&(t+="&debug=1"),e.noLog&&(t+="&nolog=1");var n=ti("cto_bundle");n&&(t+="&bundle=".concat(n)),ti("cto_optout")&&(t+="&optout=1");var r=ti("cto_sid");r&&(t+="&sid=".concat(r));var i=ti("cto_idcpy");return i&&(t+="&idcpy=".concat(i)),t}(c),o=function(e,t,n){var r,i,o={publisher:{url:e.url,ext:n.publisherExt},regs:{coppa:!0===n.coppa?1:!1===n.coppa?0:void 0},slots:t.map((function(e){r=e.params.networkId||r,i=e.schain||i;var t={impid:e.adUnitCode,transactionid:e.transactionId,auctionId:e.auctionId};if(e.params.zoneId&&(t.zoneid=e.params.zoneId),(0,s.Z)(e,"ortb2Imp.ext")&&(t.ext=e.ortb2Imp.ext),e.params.ext&&(t.ext=Object.assign({},t.ext,e.params.ext)),e.params.publisherSubId&&(t.publishersubid=e.params.publisherSubId),function(e){return void 0!==(0,s.Z)(e,"mediaTypes.banner")}(e)?t.sizes=ni((0,s.Z)(e,"mediaTypes.banner.sizes"),ri):t.sizes=[],ii(e)){var n={playersizes:ni((0,s.Z)(e,"mediaTypes.video.playerSize"),ri),mimes:e.mediaTypes.video.mimes,protocols:e.mediaTypes.video.protocols,maxduration:e.mediaTypes.video.maxduration,api:e.mediaTypes.video.api,skip:e.mediaTypes.video.skip,placement:e.mediaTypes.video.placement,minduration:e.mediaTypes.video.minduration,playbackmethod:e.mediaTypes.video.playbackmethod,startdelay:e.mediaTypes.video.startdelay},o=e.params.video;void 0!==o&&(n.skip=n.skip||o.skip||0,n.placement=n.placement||o.placement,n.minduration=n.minduration||o.minduration,n.playbackmethod=n.playbackmethod||o.playbackmethod,n.startdelay=n.startdelay||o.startdelay||0),t.video=n}return function(e,t){try{var n,r,i={};if(t.getFloor)null!==(n=t.mediaTypes)&&void 0!==n&&n.banner&&(i.banner={},ni((0,s.Z)(t,"mediaTypes.banner.sizes")).forEach((function(e){return i.banner[ri(e).toString()]=t.getFloor({size:e,mediaType:P.Mk})}))),null!==(r=t.mediaTypes)&&void 0!==r&&r.video&&(i.video={},ni((0,s.Z)(t,"mediaTypes.video.playerSize")).forEach((function(e){return i.video[ri(e).toString()]=t.getFloor({size:e,mediaType:P.pX})}))),Object.keys(i).length>0&&(e.ext||(e.ext={}),Object.assign(e.ext,{floors:i}))}catch(e){(0,a.H)("Could not parse floors from Prebid: "+e)}}(t,e),t}))};return r&&(o.publisher.networkid=r),i&&(o.source={ext:{schain:i}}),o.user={ext:n.userExt},n&&n.ceh&&(o.user.ceh=n.ceh),n&&n.gdprConsent&&(o.gdprConsent={},void 0!==n.gdprConsent.gdprApplies&&(o.gdprConsent.gdprApplies=!!n.gdprConsent.gdprApplies),o.gdprConsent.version=n.gdprConsent.apiVersion,void 0!==n.gdprConsent.consentString&&(o.gdprConsent.consentData=n.gdprConsent.consentString)),n&&n.uspConsent&&(o.user.uspIab=n.uspConsent),o}(c,e,t),o)return{method:"POST",url:i,data:o,bidRequests:e}},interpretResponse:function(e,t){var n=e.body||e,r=[];return n&&n.slots&&(0,a.kJ)(n.slots)&&n.slots.forEach((function(i){var o,a,s,d,c={requestId:(0,f.sE)(t.bidRequests,(function(e){return e.adUnitCode===i.impid&&(!e.params.zoneId||parseInt(e.params.zoneId)===i.zoneid)})).bidId,cpm:i.cpm,currency:i.currency,netRevenue:!0,ttl:i.ttl||60,creativeId:i.creativecode,width:i.width,height:i.height,dealId:i.dealCode};if(null!==(o=n.ext)&&void 0!==o&&null!==(a=o.paf)&&void 0!==a&&a.transmission&&null!==(s=i.ext)&&void 0!==s&&null!==(d=s.paf)&&void 0!==d&&d.content_id){var l={content_id:i.ext.paf.content_id,transmission:e.ext.paf.transmission};c.meta=Object.assign({},c.meta,{paf:l})}i.adomain&&(c.meta=Object.assign({},c.meta,{advertiserDomains:i.adomain})),i.video?(c.vastUrl=i.displayurl,c.mediaType=P.pX):c.ad=i.creative,r.push(c)})),r}};function ti(e){var t=Fr.getCookie(e),n=Fr.getDataFromLocalStorage(e);return t||n||void 0}function ni(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return void 0===e?[]:Array.isArray(e[0])?e.map((function(e){return t(e)})):[t(e)]}function ri(e){return e[0]+"x"+e[1]}function ii(e){return void 0!==(0,s.Z)(e,"mediaTypes.video")}(0,Xe.dX)(Jr),(0,o.z)("gridBidAdapter");var oi=n(6172),ai=n(1976),si=n(6737);function di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ci(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?di(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function li(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function ui(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var pi=30,fi="id5id",hi="".concat(fi,"_privacy"),gi="html5",mi="User ID - ID5 submodule: ",vi=["pbjs-id5id","id5id.1st","id5id"],yi=(0,J.df)({moduleType:si.y2,moduleName:"id5Id"}),bi={name:"id5Id",gvlid:131,decode:function(e,t){var n=0;if(e&&"string"==typeof e.universal_uid){var r={id5id:{uid:e.universal_uid,ext:{linkType:n=e.link_type||n}}};switch((0,s.Z)(e,"ab_testing.result")){case"control":(0,a.PN)(mi+"A/B Testing - user is in the Control Group: ID5 ID is NOT exposed"),d(r,"id5id.ext.abTestingControlGroup",!0);break;case"error":(0,a.H)(mi+"A/B Testing ERROR! controlGroupPct must be a number >= 0 and <= 1");break;case"normal":(0,a.PN)(mi+"A/B Testing - user is NOT in the Control Group"),d(r,"id5id.ext.abTestingControlGroup",!1)}return(0,a.PN)(mi+"Decoded ID",r),r}},getId:function(e,t,n){if(Oi(e)){if(Ui(t))return{callback:function(r){new ki(e,t,n,Y.nX.getConsentData()).execute().then((function(e){r(e)})).catch((function(e){(0,a.H)(mi+"getId fetch encountered an error",e),r()}))}};(0,a.PN)(mi+"Skipping ID5 local storage write because no consent given.")}},extendId:function(e,t,n){return Oi(e),Ui(t)?(Mi(e&&e.params&&e.params.partner||0),(0,a.PN)(mi+"using cached ID",n),n):((0,a.PN)(mi+"No consent given for ID5 local storage writing, skipping nb increment."),n)}},_i=new WeakSet,wi=new WeakSet,Ti=new WeakSet,Ii=new WeakSet,Si=new WeakSet,ki=function(){function e(t,n,r,i){(0,oi.Z)(this,e),li(this,Si),li(this,Ii),li(this,Ti),li(this,wi),li(this,_i),this.submoduleConfig=t,this.gdprConsentData=n,this.cacheIdObj=r,this.usPrivacyData=i}return(0,ai.Z)(e,[{key:"execute",value:function(){var e=this;return ui(this,wi,Ei).call(this,this.submoduleConfig).then((function(t){return ui(e,Ti,Ai).call(e,t.extensionsCall).then((function(n){return ui(e,Ii,Pi).call(e,t.fetchCall,n)}))})).then((function(t){try{Ri(e.submoduleConfig.params.partner,0),t.privacy&&Ni(hi,JSON.stringify(t.privacy),pi)}catch(e){(0,a.H)(mi+e)}return t}))}}]),e}();function Ci(e,t,n){return new Promise((function(r,i){(0,mt.h)(e,{success:function(e){r(e)},error:function(e){i(e)}},t,n)}))}function Ei(e){var t=e.params.configUrl||"https://id5-sync.com/api/config/prebid";return ui(this,_i,Ci).call(this,t,JSON.stringify(e),{method:"POST"}).then((function(e){var t=JSON.parse(e);return(0,a.PN)(mi+"config response received from the server",t),t}))}function Ai(e){if(void 0===e)return Promise.resolve(void 0);var t=e.url,n=e.method||"GET",r="GET"===n?void 0:JSON.stringify(e.body||{});return ui(this,_i,Ci).call(this,t,r,{method:n}).then((function(e){var t=JSON.parse(e);return(0,a.PN)(mi+"extensions response received from the server",t),t}))}function Pi(e,t){var n=e.url,r=e.overrides||{},i=ci(ci(ci({},ui(this,Si,xi).call(this)),r),{},{extensions:t});return ui(this,_i,Ci).call(this,n,JSON.stringify(i),{method:"POST",withCredentials:!0}).then((function(e){var t=JSON.parse(e);return(0,a.PN)(mi+"fetch response received from the server",t),t}))}function xi(){var e,t=this.submoduleConfig.params,n=this.gdprConsentData&&"boolean"==typeof this.gdprConsentData.gdprApplies&&this.gdprConsentData.gdprApplies?1:0,r=(0,ee.nH)(),i=this.cacheIdObj&&this.cacheIdObj.signature?this.cacheIdObj.signature:(vi.forEach((function(t){yi.getCookie(t)&&(e=(0,a.dj)(yi.getCookie(t))||e)})),e&&e.signature||""),o=Mi(t.partner),s={partner:t.partner,gdpr:n,nbPage:o,o:"pbjs",tml:r.topmostLocation,ref:r.ref,cu:r.canonicalUrl,top:r.reachedTop?1:0,u:r.stack[0]||window.location.href,v:"7.47.0",storage:this.submoduleConfig.storage,localStorage:yi.localStorageIsEnabled()?1:0};!n||void 0===this.gdprConsentData.consentString||(0,a.xb)(this.gdprConsentData.consentString)||(0,a.jH)(this.gdprConsentData.consentString)||(s.gdpr_consent=this.gdprConsentData.consentString),void 0===this.usPrivacyData||(0,a.xb)(this.usPrivacyData)||(0,a.jH)(this.usPrivacyData)||(s.us_privacy=this.usPrivacyData),void 0===i||(0,a.jH)(i)||(s.s=i),void 0===t.pd||(0,a.jH)(t.pd)||(s.pd=t.pd),void 0===t.provider||(0,a.jH)(t.provider)||(s.provider=t.provider);var d=t.abTesting||{enabled:!1};return d.enabled&&(s.ab_testing={enabled:!0,control_group_pct:d.controlGroupPct}),s}function Oi(e){return e&&e.params&&e.params.partner&&"number"==typeof e.params.partner?e.storage&&e.storage.type&&e.storage.name?(e.storage.type!==gi&&(0,a.yN)(mi+"storage type recommended to be '".concat(gi,"'. In a future release this may become a strict requirement")),e.storage.name!==fi&&(0,a.yN)(mi+"storage name recommended to be '".concat(fi,"'. In a future release this may become a strict requirement")),!0):((0,a.H)(mi+"storage required to be set"),!1):((0,a.H)(mi+"partner required to be defined as a number"),!1)}function Di(e){return"".concat(fi,"_").concat(e,"_nb")}function Ri(e,t){Ni(Di(e),t,pi)}function Mi(e){var t=function(e){var t,n,r=(t=Di(e),""===(n=yi.getDataFromLocalStorage("".concat(t,"_exp")))||n&&new Date(n).getTime()-Date.now()>0?yi.getDataFromLocalStorage(t):(yi.removeDataFromLocalStorage(t),null));return r?parseInt(r):0}(e)+1;return Ri(e,t),t}function Ni(e,t,n){yi.setDataInLocalStorage("".concat(e,"_exp"),function(e){return new Date(Date.now()+864e5*e).toUTCString()}(n)),yi.setDataInLocalStorage("".concat(e),t)}function Ui(e){var t=e&&"boolean"==typeof e.gdprApplies&&e.gdprApplies,n=(0,s.Z)(e,"vendorData.purpose.consents.1"),r=(0,s.Z)(e,"vendorData.vendor.consents.".concat(131..toString()));return!!(!t||n&&r)}(0,x.Bx)("userId",bi),(0,o.z)("id5IdSystem");var Li=new WeakMap;function ji(e){return(e=(0,a.sF)(e)).map((function(e){var t=e.split("x"),n=(0,r.Z)(t,2),i=n[0],o=n[1];return{w:parseInt(i,10),h:parseInt(o,10)}}))}var Bi,qi=new Set(["pos","placement","plcmt","api","mimes","protocols","playbackmethod","minduration","maxduration","w","h","startdelay","placement","linearity","skip","skipmin","skipafter","minbitrate","maxbitrate","delivery","playbackend"]),Fi={instream:1},Vi={1:P.Mk,2:P.pX,4:P.B5},zi=(Bi={},(0,i.Z)(Bi,Wn,{fpd:{priority:99,fn:function(e,t){(0,a.Ee)(e,t.ortb2)}},onlyOneClient:{priority:-99,fn:de("ORTB request")},props:{fn:function(e,t){var n;Object.assign(e,{id:e.id||t.auctionId,test:e.test||0});var r=parseInt(t.timeout,10);isNaN(r)||(e.tmax=r),d(e,"source.tid",(null===(n=e.source)||void 0===n?void 0:n.tid)||t.auctionId)}}}),(0,i.Z)(Bi,Hn,{fpd:{priority:99,fn:function(e,t){(0,a.Ee)(e,t.ortb2Imp)}},id:{fn:function(e,t){e.id=t.bidId}},banner:{fn:function(e,t,n){if(!n.mediaType||n.mediaType===P.Mk){var r=(0,s.Z)(t,"mediaTypes.banner");if(r){var i={topframe:!0===(0,a.yL)()?0:1};r.sizes&&(i.format=ji(r.sizes)),r.hasOwnProperty("pos")&&(i.pos=r.pos),e.banner=(0,a.Ee)(i,e.banner)}}}},pbadslot:{fn:function(e){var t,n,r,i,o=null===(t=e.ext)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.pbadslot;o&&"string"==typeof o||null===(r=e.ext)||void 0===r||null===(i=r.data)||void 0===i||delete i.pbadslot}}}),(0,i.Z)(Bi,Zn,{mediaType:{priority:99,fn:function(e,t,n){if(!e.mediaType){var r=n.mediaType;if(!r&&!Vi.hasOwnProperty(t.mtype))throw new Error("Cannot determine mediaType for response");e.mediaType=r||Vi[t.mtype]}}},banner:{fn:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).createPixel,t=void 0===e?function(e){return(0,a.SG)(decodeURIComponent(e))}:e;return function(e,n){e.mediaType===P.Mk&&(n.adm&&n.nurl?(e.ad=n.adm,e.ad+=t(n.nurl)):n.adm?e.ad=n.adm:n.nurl&&(e.adUrl=n.nurl))}}()},props:{fn:function(e,t,n){var i;Object.entries({requestId:null===(i=n.bidRequest)||void 0===i?void 0:i.bidId,seatBidId:t.id,cpm:t.price,currency:n.ortbResponse.cur||n.currency,width:t.w,height:t.h,dealId:t.dealid,creative_id:t.crid,creativeId:t.crid,burl:t.burl,ttl:t.exp||n.ttl,netRevenue:n.netRevenue}).filter((function(e){var t=(0,r.Z)(e,2);return t[0],void 0!==t[1]})).forEach((function(t){var n=(0,r.Z)(t,2),i=n[0],o=n[1];return e[i]=o})),e.meta||(e.meta={}),t.adomain&&(e.meta.advertiserDomains=t.adomain)}}}),Bi);function Wi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.shift(),i=t.length>1?Wi.apply(void 0,t):t[0];return Object.fromEntries(Vn.map((function(e){return[e,Object.assign({},r[e],i[e])]})))}function Hi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=void 0===t?{}:t,i=e.processors,o=void 0===i?Zi:i,s=e.overrides,d=void 0===s?{}:s,c=e.imp,l=e.request,u=e.bidResponse,p=e.response,f=new WeakMap;function h(e,t,n,i){var a;return function(){return null==a&&(a=function(){var a=n.bind(this,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Li.has(e)){var n=Object.entries(e);n.sort((function(e,t){return(e=e[1].priority||0)===(t=t[1].priority||0)?0:e>t?-1:1})),Li.set(e,n.map((function(e){var t=(0,r.Z)(e,2);return[t[0],t[1].fn]})))}var i=Li.get(e).filter((function(e){var n=(0,r.Z)(e,1)[0];return!t.hasOwnProperty(n)||t[n]})).map((function(e){var n=(0,r.Z)(e,2),i=n[0],o=n[1];return t.hasOwnProperty(i)?t[i].bind(this,o):o}));return function(){var e=this,t=Array.from(arguments);i.forEach((function(n){n.apply(e,t)}))}}(o()[e]||{},d[e]||{}));return t&&(a=t.bind(this,a)),function(){try{return a.apply(this,arguments)}catch(e){i.call.apply(i,[this,e].concat(Array.prototype.slice.call(arguments)))}}}()),a.apply(this,arguments)}}var g=h(Hn,c,(function(e,t,n){var r={};return e(r,t,n),r}),(function(e,t,n){(0,a.H)("Error while converting bidRequest to ORTB imp; request skipped.",{error:e,bidRequest:t,context:n})})),m=h(Wn,l,(function(e,t,n,r){var i={imp:t};return e(i,n,r),i}),(function(e,t,n,r){throw(0,a.H)("Error while converting to ORTB request",{error:e,imps:t,bidderRequest:n,context:r}),e})),v=h(Zn,u,(function(e,t,n){var r={};return e(r,t,n),r}),(function(e,t,n){(0,a.H)("Error while converting ORTB seatbid.bid to bidResponse; bid skipped.",{error:e,bid:t,context:n})})),y=h($n,p,(function(e,t,n,r){var i={bids:t};return e(i,n,r),i}),(function(e,t,n,r){throw(0,a.H)("Error while converting from ORTB response",{error:e,bidResponses:t,ortbResponse:n,context:r}),e}));return{toORTB:function(e){var t=e.bidderRequest,r=e.bidRequests,i=e.context,o=void 0===i?{}:i;r=r||t.bids;var s={req:Object.assign({bidRequests:r},n,o),imp:{}};s.req.impContext=s.imp;var d=r.map((function(e){var r=Object.assign({bidderRequest:t,reqContext:s.req},n,o),i=g(e,r);if(null!=i){if(i.hasOwnProperty("id"))return Object.assign(r,{bidRequest:e,imp:i}),s.imp[i.id]=r,i;(0,a.H)("Converted ORTB imp does not specify an id, ignoring bid request",e,i)}})).filter(Boolean),c=m(d,t,s.req);return s.req.bidderRequest=t,null!=c&&f.set(c,s),c},fromORTB:function(e){var t=e.request,n=e.response,r=f.get(t);if(null==r)throw new Error("ortbRequest passed to `fromORTB` must be the same object returned by `toORTB`");function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign(e,{ortbRequest:t},n,e)}var o=Object.fromEntries((t.imp||[]).map((function(e){return[e.id,e]}))),s=(n.seatbid||[]).flatMap((function(e){return(e.bid||[]).map((function(t){if(o.hasOwnProperty(t.impid)&&r.imp.hasOwnProperty(t.impid))return v(t,i(r.imp[t.impid],{imp:o[t.impid],seatbid:e,ortbResponse:n}));(0,a.H)("ORTB response seatbid[].bid[].impid does not match any imp in request; ignoring bid",t)}))})).filter(Boolean);return y(s,n,i(r.req))}}}zi[Hn].native={fn:function(e,t,n){if(!n.mediaType||n.mediaType===P.B5){var r,i=t.nativeOrtbRequest;i&&(null!==(r=(i=Object.assign({},n.nativeRequest,i)).assets)&&void 0!==r&&r.length?e.native=(0,a.Ee)({},{request:JSON.stringify(i),ver:i.ver},e.native):(0,a.yN)("mediaTypes.native is set, but no assets were specified. Native request skipped.",t))}}},zi[Zn].native={fn:function(e,t){if(e.mediaType===P.B5){var n;if(n="string"==typeof t.adm?JSON.parse(t.adm):t.adm,!(0,a.PO)(n)||!Array.isArray(n.assets))throw new Error("ORTB native response contained no assets");e.native={ortb:n}}}},zi[Hn].video={fn:function(e,t,n){if(!n.mediaType||n.mediaType===P.pX){var i=(0,s.Z)(t,"mediaTypes.video");if(!(0,a.xb)(i)){var o=Object.fromEntries(Object.entries(i).filter((function(e){var t=(0,r.Z)(e,1)[0];return qi.has(t)})));if(i.playerSize){var d=ji(i.playerSize);d.length>1&&(0,a.yN)("video request specifies more than one playerSize; all but the first will be ignored"),Object.assign(o,d[0])}var c=Fi[i.context];null!=c&&(o.placement=c),e.video=(0,a.Ee)(o,e.video)}}}},zi[Zn].video={fn:function(e,t,n){if(e.mediaType===P.pX){if((0,s.Z)(n.imp,"video.w")&&(0,s.Z)(n.imp,"video.h")){var r=[n.imp.video.w,n.imp.video.h];e.playerWidth=r[0],e.playerHeight=r[1]}t.adm&&(e.vastXml=t.adm),t.nurl&&(e.vastUrl=t.nurl)}}};var Zi=(0,a.HP)((function(){return Wi(zi,Qn(Gn))}));function $i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$i(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ki="improvedigital",Xi={DEFAULT_MIMES:["video/mp4"],PLACEMENT_TYPE:{INSTREAM:1,OUTSTREAM:3}},Ji={code:Ki,gvlid:253,aliases:["id"],supportedMediaTypes:[P.Mk,P.B5,P.pX],syncStore:{extendMode:!1,placementId:null},isBidRequestValid:function(e){return!!(e&&e.params&&(e.params.placementId||e.params.placementKey&&e.params.publisherId))},buildRequests:function(e,t){return this.syncStore.placementId=this.syncStore.placementId||e[0].params.placementId,Qi.buildServerRequests(e,t)},interpretResponse:function(e,t){var n=t.ortbRequest;return Yi.fromORTB({request:n,response:e.body}).bids},getUserSyncs:function(e,t,n,r){if(!0===g.vc.getConfig("coppa")||!(0,an.h)(n))return[];var i=[];if(!this.syncStore.extendMode&&e.pixelEnabled||!e.iframeEnabled)e.pixelEnabled&&t.forEach((function(e){(0,s.Z)(e,"body.ext.".concat(Ki,".sync"),[]).forEach((function(e){i.some((function(t){return t.url===e}))||i.push({type:"image",url:e})}))}));else{var o=n||{},a=o.gdprApplies,d=o.consentString,c=new Set;this.syncStore.extendMode&&t&&t.forEach((function(e){var t,n;null!=e&&null!==(t=e.body)&&void 0!==t&&null!==(n=t.ext)&&void 0!==n&&n.responsetimemillis&&Object.keys(e.body.ext.responsetimemillis).forEach((function(e){return c.add(e)}))})),i.push({type:"iframe",url:"https://hb.360yield.com/prebid-universal-creative/load-cookie.html"+"?placement_id=".concat(this.syncStore.placementId)+(this.syncStore.extendMode?"&pbs=1":"")+("boolean"==typeof a?"&gdpr=".concat(Number(a)):"")+(d?"&gdpr_consent=".concat(d):"")+(r?"&us_privacy=".concat(encodeURIComponent(r)):"")+(c.size?"&bidders=".concat((0,A.Z)(c).join(",")):"")})}return i}};(0,Xe.dX)(Ji);var Yi=Hi({context:{ttl:300,nativeRequest:{eventtrackers:[{event:1,methods:[1,2]}]}},imp:function(e,t,n){var r=e(t,n);r.secure=Number("https:"===window.location.protocol),!r.bidfloor&&t.params.bidFloor&&(r.bidfloor=t.params.bidFloor,r.bidfloorcur=(0,a.An)("bidFloorCur",t.params).toUpperCase()||"USD");var i=n.extendMode?"ext.prebid.bidder.improvedigital":"ext.bidder",o=t.params.placementId;return o?(d(r,"".concat(i,".placementId"),o),n.extendMode&&d(r,"ext.prebid.storedrequest.id",""+o)):(d(r,"".concat(i,".publisherId"),(0,a.An)("publisherId",t.params)),d(r,"".concat(i,".placementKey"),(0,a.An)("placementKey",t.params))),d(r,"".concat(i,".keyValues"),(0,a.An)("keyValues",t.params)||void 0),r},request:function(e,t,n,r){var i=e(t,n,r);return(0,a.Ee)(i,{id:(0,a._d)(),source:{tid:r.bidRequests[0].transactionId},ext:{improvedigital:{sdk:{name:"pbjs",version:"7.47.0"}}}}),i},bidResponse:function(e,t,n){if(t.adm&&t.price&&!t.hasOwnProperty("errorCode")){var r,i=n.bidRequest;n.mediaType=1===(r=Object.keys(i.mediaTypes)).length?r[0]:-1!==t.adm.search(/^(<\?xml|<vast)/i)?P.pX:"{"===t.adm[0]?P.B5:P.Mk;var o=e(t,n),a=(0,s.Z)(t,"ext.".concat(Ki),{});return Object.assign(o,{dealId:"string"==typeof a.buying_type&&"rtb"!==a.buying_type?a.line_item_id:void 0,netRevenue:a.is_net||!1}),o.mediaType===P.pX&&Qi.isOutstreamVideo(i)&&Object.assign(o,{adResponse:{content:o.vastXml},renderer:eo.createRenderer(i)}),to.forwardBid({bidRequest:i,bid:o}),o}},overrides:{imp:{banner:function(e,t,n,r){if(n.mediaTypes[P.Mk]){if(!0!==g.vc.getConfig("improvedigital.usePrebidSizes")){var o=Object.assign({},n.mediaTypes[P.Mk],{sizes:null});n=Gi(Gi({},n),{},{mediaTypes:(0,i.Z)({},P.Mk,o)})}e(t,n,r)}},video:function(e,t,n,r){var o;if(n.mediaTypes[P.pX]){var a=Object.assign({mimes:Xi.DEFAULT_MIMES},n.mediaTypes[P.pX],null===(o=n.params)||void 0===o?void 0:o.video);e(t,Gi(Gi({},n),{},{mediaTypes:(0,i.Z)({},P.pX,a)}),r),d(t,"ext.is_rewarded_inventory",1===a.rewarded||1===(0,s.Z)(a,"ext.rewarded")||void 0),!t.video.placement&&Qi.isOutstreamVideo(n)&&(t.video.placement=Xi.PLACEMENT_TYPE.OUTSTREAM)}}},request:{gdprAddtlConsent:function(e,t,n){var r,i=null==n||null===(r=n.gdprConsent)||void 0===r?void 0:r.addtlConsent;if(i)if(Ji.syncStore.extendMode)e(t,n);else if(i&&-1!==i.indexOf("~")){var o=i.substring(i.indexOf("~")+1);o&&d(t,"user.ext.consented_providers_settings.consented_providers",o.split(".").map((function(e){return parseInt(e,10)})))}}}}}),Qi={buildServerRequests:function(e,t){var n=this,r=!0===g.vc.getConfig("improvedigital.extend"),i=[],o=!0===g.vc.getConfig("improvedigital.singleRequest"),a=[],s=[];function d(e,n){if(e)return"https://pbs.360yield.com/openrtb2/auction";var r=[];return r.push((0,an.h)(null==t?void 0:t.gdprConsent)?"https://ad.360yield.com":"https://ad.360yield-basic.com"),n&&r.push(n),r.push("pb"),r.join("/")}function c(e,n,r){var i=Yi.toORTB({bidRequests:e,bidderRequest:t,context:{extendMode:r}});return{method:"POST",url:d(r,n),data:JSON.stringify(i),ortbRequest:i,bidderRequest:t}}var l=null;return e.map((function(e){var t=e.params.publisherId,d=n.isExtendModeEnabled(r,e.params);if(o){if(l){if(t&&l!==t)throw new Error("All Improve Digital placements in a single call must have the same publisherId. Please check your 'params.publisherId' or turn off the single request mode.")}else l=t;d?a.push(e):s.push(e)}else i.push(c([e],t,d))})),o?(a.length&&i.push(c(a,l,!0)),s.length&&i.push(c(s,l,!1)),i):i},isExtendModeEnabled:function(e,t){var n="boolean"==typeof t.extend?t.extend:e;return n&&!Ji.syncStore.extendMode&&(Ji.syncStore.extendMode=!0),n},isOutstreamVideo:function(e){return"outstream"===(0,s.Z)(e,"mediaTypes.video.context")}},eo={RENDERER_URL:"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js",createRenderer:function(e){var t=h.Th.install({id:e.adUnitCode,url:this.RENDERER_URL,config:(0,s.Z)(e,"renderer.options"),adUnitCode:e.adUnitCode});try{t.setRender(this.render)}catch(e){(0,a.yN)("Prebid Error calling setRender on renderer",e)}return t},render:function(e){e.renderer.push((function(){window.ANOutstreamVideo.renderAd({sizes:[e.width,e.height],targetId:e.adUnitCode,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},eo.handleRendererEvents.bind(null,e))}))},handleRendererEvents:function(e,t,n){e.renderer.handleVideoEvent({id:t,eventName:n})}},to={RENDERER_URL:"https://cdn.360yield.com/razr/tag.js",forwardBid:function(e){var t=e.bidRequest,n=e.bid;if(n.mediaType===P.Mk){var r={prebid:{bidRequest:t,bid:n}},i=JSON.stringify(r).replace(/<\/script>/gi,"\\x3C/script>"),o="<script>window.__razr_config = ".concat(i,";<\/script>");n.ad=n.ad.replace(/<body[^>]*>/,(function(e){return e+o})),this.installListener()}},installListener:function(){this._listenerInstalled||(window.addEventListener("message",(function(e){var t,n,r=null===(t=e.data)||void 0===t||null===(n=t.razr)||void 0===n?void 0:n.load;if(r){e.source&&(r.source=e.source,r.id&&e.source.postMessage({razr:{id:r.id}},"*"));var i=window.razr=window.razr||{};i.q=i.q||[],i.q.push(r),i.loaded||(0,W.B)(to.RENDERER_URL,Ki)}})),this._listenerInstalled=!0)}};(0,o.z)("improvedigitalBidAdapter");var no="inskin",ro={code:no,isBidRequestValid:function(e){return!(!e.params.networkId||!e.params.siteId)},buildRequests:function(e,t){var n,r={method:"POST",url:"",data:"",bidRequest:[]};if(e.length<1)return r;var i=Object.assign({placements:[],time:Date.now(),user:{},url:t.refererInfo.page,enableBotFiltering:!0,includePricingData:!0,parallel:!0},e[0].params);e[0].schain?i.rtb={schain:e[0].schain}:i.publisherId&&(i.rtb={schain:{ext:{sid:String(i.publisherId)}}}),delete i.publisherId,i.keywords=i.keywords||[];var o=[];if(t&&t.gdprConsent){i.consent={gdprVendorId:150,gdprConsentString:t.gdprConsent.consentString,gdprConsentRequired:"boolean"!=typeof t.gdprConsent.gdprApplies||t.gdprConsent.gdprApplies};var a=t.gdprConsent.vendorData;a&&(a.purposeOneTreatment&&(i.keywords.push("cst-nodisclosure"),o.push("nodisclosure")),[{id:1,kw:"nocookies"},{id:2,kw:"nocontext"},{id:3,kw:"nodmp"},{id:4,kw:"nodata"},{id:7,kw:"noclicks"},{id:9,kw:"noresearch"}].map((function(e){(function(e,t){var n={150:{id:150,name:"Inskin Media LTD",purposes:{1:1,3:3,4:4,9:9,10:10},legIntPurposes:{2:2,7:7},flexiblePurposes:{2:2,7:7},specialPurposes:{1:1,2:2},features:{3:3},specialFeatures:{},policyUrl:"http://www.inskinmedia.com/privacy-policy.html"}},r=150;try{if(n[r].purposes[e]&&!n[r].flexiblePurposes[e]&&t.purpose.consents[e]&&t.vendor.consents[r])return!0}catch(e){}try{if(n[r].legIntPurposes[e]&&!n[r].flexiblePurposes[e]&&t.purpose.legitimateInterests[e]&&t.vendor.legitimateInterests[r])return!0}catch(e){}try{if(n[r].legIntPurposes[e]&&n[r].flexiblePurposes[e]&&(t.purpose.legitimateInterests[e]&&t.vendor.legitimateInterests[r]||t.purpose.consents[e]&&t.vendor.consents[r]))return!0}catch(e){}try{if(n[r].legIntPurposes[e]&&n[r].flexiblePurposes[e]&&t.purpose.consents[e]&&t.vendor.consents[r])return!0}catch(e){}try{if(n[r].purposes[e]&&n[r].flexiblePurposes[e]&&(t.purpose.legitimateInterests[e]&&t.vendor.legitimateInterests[r]||t.purpose.consents[e]&&t.vendor.consents[r]))return!0}catch(e){}try{if(n[r].purposes[e]&&n[r].flexiblePurposes[e]&&t.purpose.legitimateInterests[e]&&t.vendor.legitimateInterests[r])return!0}catch(e){}return!1})(e.id,a)||(i.keywords.push("cst-"+e.kw),o.push(e.kw))})))}return e.map((function(e){n="https://mfad.inskinad.com/api/v2";var t,r,a=Object.assign({divName:e.bidId,adTypes:e.adTypes||(t=e.sizes,r=[],t.forEach((function(e){var t=io.indexOf(e[0]+"x"+e[1]);t>=0&&r.push(t)})),r),eventIds:[40,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295]},e.params);a.adTypes.push(5,9,163,2163,3006),a.properties=a.properties||{},a.properties.screenWidth=screen.width,a.properties.screenHeight=screen.height,o.length&&(a.properties.restrictions=o),a.networkId&&a.siteId&&i.placements.push(a)})),r.data=JSON.stringify(i),r.bidRequest=e,r.url=n,r},interpretResponse:function(e,t){var n,r,i,o,a=[],s={};r=t.bidRequest,e=(e||{}).body;for(var d=0;d<r.length;d++)if(n={},i=(o=r[d]).bidId,s[i]=o,e){var c=e.decisions&&e.decisions[i],l=c&&c.contents&&c.contents[0]&&c.contents[0].data,u=l&&l.customData&&l.customData.pubCPM,p=c&&c.pricing&&c.pricing.clearPrice,f=u||p;c&&f&&(c.impressionUrl+="&property:pubcpm="+f,o.price=f,n.requestId=i,n.cpm=f,n.width=c.width,n.height=c.height,n.ad=oo(i,c),n.currency="USD",n.creativeId=c.adId,n.ttl=360,n.meta={advertiserDomains:c.adomain?c.adomain:[]},n.netRevenue=!0,a.push(n))}return a.length&&window.addEventListener("message",(function(t){if(t.data&&"ism-bid"===t.data.from&&e.decisions&&e.decisions[t.data.bidId]){var n="ism_tag_"+Math.floor(1e17*Math.random());window[n]={plr_AdSlot:t.source&&t.source.frameElement,bidId:t.data.bidId,bidPrice:s[t.data.bidId].price,serverResponse:e};var r="https://cdn.inskinad.com/isfe/publishercode/"+s[t.data.bidId].params.siteId+"/default.js?autoload&id="+n;(0,W.B)(r,no)}})),a},getUserSyncs:function(e){var t=[];return e.pixelEnabled&&(t.push({type:"image",url:"https://e.serverbid.com/udb/9969/match?redir=https%3A%2F%2Fmfad.inskinad.com%2Fudb%2F9874%2Fpool%2Fset%2Fi.gif%3FpoolId%3D9969%26poolKey%3D"}),t.push({type:"image",url:"https://ssum.casalemedia.com/usermatchredir?s=185638&cb=https%3A%2F%2Fmfad.inskinad.com%2Fudb%2F9874%2Fsync%2Fi.gif%3FpartnerId%3D1%26userId%3D"})),e.iframeEnabled&&t.push({type:"iframe",url:"https://ssum-sec.casalemedia.com/usermatch?s=184665&cb=https%3A%2F%2Fmfad.inskinad.com%2Fudb%2F9874%2Fsync%2Fi.gif%3FpartnerId%3D1%26userId%3D"}),t}},io=[null,"120x90","120x90","468x60","728x90","300x250","160x600","120x600","300x100","180x150","336x280","240x400","234x60","88x31","120x60","120x240","125x125","220x250","250x250","250x90","0x0","200x90","300x50","320x50","320x480","185x185","620x45","300x125","800x250"];function oo(e,t){return"<script>window.top.postMessage({from: 'ism-bid', bidId: '"+e+"'}, '*');<\/script>"+(0,a.SG)(t.impressionUrl)}function ao(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function so(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function co(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?so(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):so(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}io[77]="970x90",io[123]="970x250",io[43]="300x600",(0,Xe.dX)(ro),(0,o.z)("inskinBidAdapter");var lo="ix",uo="roundel",po=[P.Mk,P.pX,P.B5],fo=[144,144],ho={JPY:1},go={PBJS:"p",IX:"x"},mo={BID_SIZE_INVALID_FORMAT:1,BID_SIZE_NOT_INCLUDED:2,PROPERTY_NOT_INCLUDED:3,SITE_ID_INVALID_VALUE:4,BID_FLOOR_INVALID_FORMAT:5,IX_FPD_EXCEEDS_MAX_SIZE:6,EXCEEDS_MAX_SIZE:7,PB_FPD_EXCEEDS_MAX_SIZE:8,VIDEO_DURATION_INVALID:9},vo={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},yo={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID","id5-sync.com":"","crwdcntrl.net":"","epsilon.com":"","audigent.com":"","pubcid.org":"","trustpid.com":"","intimatemerger.com":""},bo=["britepoolid","lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId"],_o=["mimes","minduration","maxduration"],wo=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h"],To="ixdiag",Io="".concat(lo,"_features"),So=!1,ko=(0,J.df)({bidderCode:lo}),Co={REQUESTED_FEATURE_TOGGLES:[],featureToggles:{},isFeatureEnabled:function(e){return(0,s.Z)(this.featureToggles,"features.".concat(e,".activated"),!1)},getFeatureToggles:function(){if(ko.localStorageIsEnabled()){var e=(0,a.dj)(ko.getDataFromLocalStorage(Io));(0,s.Z)(e,"expiry")&&e.expiry>=(new Date).getTime()?this.featureToggles=e:this.clearFeatureToggles()}},setFeatureToggles:function(e){var t=e.body,n=new Date,r=(0,s.Z)(t,"ext.features");r&&(this.featureToggles={expiry:n.setHours(n.getHours()+1),features:r},ko.localStorageIsEnabled()&&ko.setDataInLocalStorage(Io,JSON.stringify(this.featureToggles)))},clearFeatureToggles:function(){this.featureToggles={},ko.localStorageIsEnabled()&&ko.removeDataFromLocalStorage(Io)}},Eo=0,Ao="",Po="";function xo(e){var t=Oo(e,P.pX),n=(0,s.Z)(e,"mediaTypes.video"),r=(0,s.Z)(e,"params.video");if(Uo(n,r).length)return{};for(var i in t.video=r?(0,a.I8)(e.params.video):{},t.ext.tid=(0,s.Z)(e,"ortb2Imp.ext.tid"),Vo(t,e),n)-1===wo.indexOf(i)||t.video.hasOwnProperty(i)||(t.video[i]=n[i]);if(t.video.minduration>t.video.maxduration)return(0,a.H)("IX Bid Adapter: video minduration [".concat(t.video.minduration,"] cannot be greater than video maxduration [").concat(t.video.maxduration,"]"),{bidder:lo,code:mo.VIDEO_DURATION_INVALID}),{};var o=r&&r.context||n&&n.context;if(o&&!t.video.hasOwnProperty("placement")&&(o===on.LD?t.video.placement=1:o===on.gZ?(0,s.Z)(r,"playerConfig.floatOnScroll")?t.video.placement=5:t.video.placement=4:(0,a.yN)("IX Bid Adapter: Video context '".concat(o,"' is not supported"))),!t.video.w||!t.video.h){var d=Lo((0,s.Z)(t,"video.playerSize"))||Lo((0,s.Z)(e,"params.size"));if(!d)return(0,a.yN)("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};t.video.w=d[0],t.video.h=d[1]}return Do(e,t,P.pX),t}function Oo(e,t){var n={};if(n.id=e.bidId,n.ext={},(0,s.Z)(e,"params.".concat(t,".siteId"))&&!isNaN(Number(e.params[t].siteId)))switch(t){case P.Mk:n.ext.siteID=e.params.banner.siteId.toString();break;case P.pX:n.ext.siteID=e.params.video.siteId.toString();break;case P.B5:n.ext.siteID=e.params.native.siteId.toString()}else n.ext.siteID=e.params.siteId.toString();return!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||(n.ext.sid=String(e.params.id)),n}function Do(e,t,n){var r=null,i=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(r={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),(0,a.LQ)(e.getFloor)){var o="*",s="*";if(n&&(0,a.r3)(po,n)){var d=t[n];o=n,s=[d.w,d.h]}try{i=e.getFloor({mediaType:o,size:s})}catch(e){(0,a.yN)("priceFloors module call getFloor failed, error : ",e)}}i?(t.bidfloor=i.floor,t.bidfloorcur=i.currency,t.ext.fl=go.PBJS):r&&(t.bidfloor=r.floor,t.bidfloorcur=r.currency,t.ext.fl=go.IX)}function Ro(e,t,n){var r={},i=!(!(0,s.Z)(e,"exp")||!(0,a.U)(e.exp)),o=(0,s.Z)(e,"dealid")||(0,s.Z)(e,"ext.dealid");ho.hasOwnProperty(t)?r.cpm=e.price/ho[t]:r.cpm=e.price/100,r.requestId=e.impid,o&&(r.dealId=o),r.netRevenue=!0,r.currency=t,r.creativeId=e.hasOwnProperty("crid")?e.crid:"-",2!=e.mtype||(!e.ext||e.ext.vasturl)&&e.ext?e.ext&&e.ext.vasturl&&(r.vastUrl=e.ext.vasturl):r.vastXml=e.adm;var d=null;if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{d=JSON.parse(e.adm)}catch(e){(0,a.yN)("adm looks like JSON but failed to parse: ",e)}return e.ext&&e.ext.vasturl||2==e.mtype?(r.width=n.video.w,r.height=n.video.h,r.mediaType=P.pX,r.mediaTypes=n.mediaTypes,r.ttl=i?e.exp:3600):d&&d.native?(r.native={ortb:d.native},r.width=e.w?e.w:1,r.height=e.h?e.h:1,r.mediaType=P.B5,r.ttl=i?e.exp:3600):(r.ad=e.adm,r.width=e.w,r.height=e.h,r.mediaType=P.Mk,r.ttl=i?e.exp:300),r.meta={},r.meta.networkId=(0,s.Z)(e,"ext.dspid"),r.meta.brandId=(0,s.Z)(e,"ext.advbrandid"),r.meta.brandName=(0,s.Z)(e,"ext.advbrand"),e.adomain&&e.adomain.length>0&&(r.meta.advertiserDomains=e.adomain),r}function Mo(e){return Array.isArray(e)&&2===e.length&&(0,a.U)(e[0])&&(0,a.U)(e[1])}function No(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(Mo(e))return e[0]===t[0]&&e[1]===t[1];for(var n=0;n<e.length;n++)if(e[n][0]===t[0]&&e[n][1]===t[1])return!0;return!1}function Uo(e,t){var n=[];e||(0,a.yN)("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");for(var r=0,i=_o;r<i.length;r++){var o=i[r],s=e&&e.hasOwnProperty(o),d=t&&t.hasOwnProperty(o);s||d||n.push("IX Bid Adapter: ".concat(o," is not included in either the adunit or params level"))}var c=e&&e.hasOwnProperty("protocol"),l=e&&e.hasOwnProperty("protocols"),u=t&&t.hasOwnProperty("protocol"),p=t&&t.hasOwnProperty("protocols");return c||l||u||p||n.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),n}function Lo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Mo(e)?e:!!Mo(e[0])&&e[0]}function jo(e,t,n){if(e)return co(co({},(0,f.sE)(n,(function(t){return t.bidId===e}))),(0,f.sE)(t,(function(t){return t.id===e})))}function Bo(e,t,n,r){var i="https://htlb.casalemedia.com/openrtb/pbjs",o=function(e){var t=[],n={};if((0,a.kJ)(e)){var r,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ao(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ao(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;yo.hasOwnProperty(o.source)&&(0,s.Z)(o,"uids.0")&&(n[o.source]=!0,""!=yo[o.source]&&(o.uids[0].ext={rtiPartner:yo[o.source]}),delete o.uids[0].atype,t.push(o))}}catch(e){i.e(e)}finally{i.f()}}return{toSend:t,seenSources:n}}((0,s.Z)(e,"0.userIdAsEids")),c=o.toSend;if(window.headertag&&"function"==typeof window.headertag.getIdentityInfo&&function(e,t){var n=window.headertag.getIdentityInfo();if(n&&"object"===(0,bt.Z)(n))for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];!i.responsePending&&i.data&&"object"===(0,bt.Z)(i.data)&&Object.keys(i.data).length&&!t.seenSources[i.data.source]&&e.push(i.data)}}(c,o),t&&t.bidderCode===uo&&!o.seenSources["liveramp.com"])return[];var l=[],u=function(e){var t={};return t.id=e[0].bidderRequestId.toString(),t.site={},t.ext={},t.ext.source="prebid",t.ext.ixdiag={},t.ext.ixdiag.ls=ko.localStorageIsEnabled(),t.imp=[],t.at=1,t}(e);u=function(e,t){return t.length>0&&(e.ext.features={},t.forEach((function(t){e.ext.features[t]={activated:Co.isFeatureEnabled(t)}}))),e}(u,Co.REQUESTED_FEATURE_TOGGLES);var p=function(e){for(var t=e.map((function(e){return e.transactionId})).filter((function(e,t,n){return n.indexOf(e)===t})),n={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"7.47.0",userIds:Wo(e[0]),url:window.location.href.split("?")[0]},r=function(r){o=e.filter((function(e){return e.transactionId===t[r]}))[0],(0,s.Z)(o,"mediaTypes")&&(Object.keys(o.mediaTypes).length>1&&n.mfu++,(0,s.Z)(o,"mediaTypes.native")&&n.nu++,(0,s.Z)(o,"mediaTypes.banner")&&n.bu++,"outstream"===(0,s.Z)(o,"mediaTypes.video.context")&&(n.ou++,Qo(o)&&(n.ren=!0)),"instream"===(0,s.Z)(o,"mediaTypes.video.context")&&n.iu++,n.allu++)},i=0;i<t.length;i++){var o;r(i)}return n}(e);for(var f in p)u.ext.ixdiag[f]=p[f];u=function(e,t,n,r,i){var o=(0,s.Z)(t,"timeout");o&&(e.ext.ixdiag.tmax=o),g.vc.getConfig("userSync")&&(e.ext.ixdiag.syncsPerBidder=g.vc.getConfig("userSync").syncsPerBidder);var d=function(){if(ko.localStorageIsEnabled()){var e,t={};try{e=JSON.parse(ko.getDataFromLocalStorage(To)||"{}")}catch(e){return(0,a.H)("ix can not read ixdiag from localStorage."),null}return Object.keys(e).forEach((function(n){Object.keys(e[n]).forEach((function(r){"number"==typeof e[n][r]&&(t[r]=t[r]?t[r]+e[n][r]:e[n][r])}))})),t}}();return(0,a.xb)(d)||(e.ext.ixdiag.err=d),e.ext.ixdiag.imps=Object.keys(n).length,e.source={tid:r[0].auctionId},r[0].schain&&(e.source.ext={},e.source.ext.schain=r[0].schain),i.length>0&&(e.user={},e.user.eids=i),document.referrer&&""!==document.referrer&&(e.site.ref=document.referrer),e}(u,t,n,e,c),u=function(e,t){if(t){t.gdprConsent&&((Ao=t.gdprConsent).hasOwnProperty("gdprApplies")&&(e.regs={ext:{gdpr:Ao.gdprApplies?1:0}}),Ao.hasOwnProperty("consentString")&&(e.user=e.user||{},e.user.ext={consent:Ao.consentString||""},Ao.hasOwnProperty("addtlConsent")&&Ao.addtlConsent&&(e.user.ext.consented_providers_settings={addtl_consent:Ao.addtlConsent}))),t.uspConsent&&(d(e,"regs.ext.us_privacy",t.uspConsent),Po=t.uspConsent);var n=(0,s.Z)(t,"refererInfo.page");n&&(e.site.page=n),t.gppConsent&&(d(e,"regs.gpp",t.gppConsent.gppString),d(e,"regs.gpp_sid",t.gppConsent.applicableSections))}return g.vc.getConfig("coppa")&&d(e,"regs.coppa",1),e}(u,t);var h={};!function(e,t,n,r,i,o){Eo=e[0].params.siteId,o.s=Eo;var a=t&&t.bidderCode||"ix",s=g.vc.getConfig(a);if(s&&"object"===(0,bt.Z)(s.firstPartyData)){var d=s.firstPartyData,c="?";for(var l in d)d.hasOwnProperty(l)&&(c+="".concat(encodeURIComponent(l),"=").concat(encodeURIComponent(d[l]),"&"));c=c.slice(0,-1),"page"in n.site?n.site.page+=c:n.site.page=c}}(e,t,u,0,0,h);for(var m=Object.keys(n),v=!1,y=0;y<m.length&&!(l.length>=4);y++){u=qo(n,m,u,y);var b=(0,s.Z)(t,"ortb2")||{},_=co({},b.site||b.context),w=co({},b.user);if(!(0,a.xb)(b)&&!v){u=Fo(t,u,b,_,w);var T=(0,a.I8)(u);T.site=(0,a.Ee)({},T.site,_),T.user=(0,a.Ee)({},T.user,w),u.site=(0,a.Ee)({},u.site,_),u.user=(0,a.Ee)({},u.user,w),v=!0}u=zo(n,u,m,y),y===m.length-1&&(l.push({method:"POST",url:i+"?s="+Eo,data:(0,a.I8)(u),option:{contentType:"text/plain"},validBidRequests:e}),u.imp=[],v=!1)}return l}function qo(e,t,n,r){var i=e[t[r]],o=i.missingImps,s=void 0===o?[]:o,c=i.ixImps,l={ixImps:void 0===c?[]:c,missingBannerImpressions:s},u=Object.keys(l).map((function(e){return l[e]})).filter((function(e){return Array.isArray(e)})).reduce((function(e,t){return e.concat.apply(e,(0,A.Z)(t))}),[]),p=e[t[r]].gpid,f=e[t[r]].dfp_ad_unit_code,h=e[t[r]].tid,g=e[t[r]].sid;if(u.length&&P.Mk in u[0]){for(var m=u[0],v={id:m.id,banner:{topframe:m.banner.topframe,format:u.map((function(e){var t=e.banner;return{w:t.w,h:t.h,ext:e.ext}}))}},y=0;y<v.banner.format.length;y++)null!=v.banner.format[y].ext&&null!=v.banner.format[y].ext.sid&&delete v.banner.format[y].ext.sid,"bidfloor"in u[y]&&(v.banner.format[y].ext.bidfloor=u[y].bidfloor);var b=e[t[r]].pos;(0,a.U)(b)&&(v.banner.pos=b),(f||p||h||g)&&(v.ext={},v.ext.dfp_ad_unit_code=f,v.ext.gpid=p,v.ext.tid=h,v.ext.sid=g),"bidfloor"in u[0]&&(v.bidfloor=u[0].bidfloor),"bidfloorcur"in u[0]&&(v.bidfloorcur=u[0].bidfloorcur);var _=e[t[r]].adUnitFPD;_&&(v.ext.data=_),n.imp.push(v)}else{var w;u.forEach((function(e){return d(e,"ext.gpid",p)})),(w=n.imp).push.apply(w,(0,A.Z)(u))}return n}function Fo(e,t,n,r,i){if(t.ext.ixdiag.fpd=!0,Object.keys(r).forEach((function(e){-1===vo.SITE.indexOf(e)&&delete r[e]})),Object.keys(i).forEach((function(e){-1===vo.USER.indexOf(e)&&delete i[e]})),n.device){var o=co({},n.device.sua);(0,a.xb)(o)||d(t,"device.sua",o)}return n.hasOwnProperty("regs")&&!e.gppConsent&&(n.regs.hasOwnProperty("gpp")&&"string"==typeof n.regs.gpp&&d(t,"regs.gpp",n.regs.gpp),n.regs.hasOwnProperty("gpp_sid")&&Array.isArray(n.regs.gpp_sid)&&d(t,"regs.gpp_sid",n.regs.gpp_sid)),t}function Vo(e,t){var n=(0,s.Z)(t,"ortb2Imp.ext.data");n&&d(e,"ext.data",n)}function zo(e,t,n,r,i,o){var a=e[n[r]].pbadslot,s=e[n[r]].tagId,d=e[n[r]].adUnitCode,c=e[n[r]].divId;return(a||s||d||c)&&(t.ext.ixdiag.pbadslot=a,t.ext.ixdiag.tagid=s,t.ext.ixdiag.adunitcode=d,t.ext.ixdiag.divId=c),t}function Wo(e){var t=e.userId||{};return bo.filter((function(e){return t[e]}))}function Ho(e,t){if(t)for(var n=0;n<e.length;n++){var r=e[n];if(t[0]===r[0]&&t[1]===r[1]){e.splice(n,1);break}}}function Zo(e,t){var n=function(e){var t=Oo(e,P.B5),n=e.nativeOrtbRequest;return n.eventtrackers=[{event:1,methods:[1,2]}],n.privacy=1,t.native={request:JSON.stringify(n),ver:"1.2"},t.ext.tid=(0,s.Z)(e,"ortb2Imp.ext.tid"),Vo(t,e),Do(e,t,P.B5),t}(e);if(0!=Object.keys(n).length){t[e.transactionId]={},t[e.transactionId].ixImps=[],t[e.transactionId].ixImps.push(n),t[e.transactionId].gpid=(0,s.Z)(e,"ortb2Imp.ext.gpid"),t[e.transactionId].dfp_ad_unit_code=(0,s.Z)(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.transactionId].pbadslot=(0,s.Z)(e,"ortb2Imp.ext.data.pbadslot"),t[e.transactionId].tagId=(0,s.Z)(e,"params.tagId");var r=e.adUnitCode,i=document.getElementById(r)?r:(0,a.ky)(r).divId;t[e.transactionId].adUnitCode=r,t[e.transactionId].divId=i}}function $o(e,t){var n=xo(e);if(0!=Object.keys(n).length){t[e.transactionId]={},t[e.transactionId].ixImps=[],t[e.transactionId].ixImps.push(n),t[e.transactionId].gpid=(0,s.Z)(e,"ortb2Imp.ext.gpid"),t[e.transactionId].dfp_ad_unit_code=(0,s.Z)(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.transactionId].pbadslot=(0,s.Z)(e,"ortb2Imp.ext.data.pbadslot"),t[e.transactionId].tagId=(0,s.Z)(e,"params.tagId");var r=e.adUnitCode,i=document.getElementById(r)?r:(0,a.ky)(r).divId;t[e.transactionId].adUnitCode=r,t[e.transactionId].divId=i}}function Go(e,t,n){var r=function(e){var t=Oo(e,P.Mk);t.banner={};var n=(0,s.Z)(e,"params.size");return n&&(t.banner.w=n[0],t.banner.h=n[1]),t.banner.topframe=(0,a.yL)()?0:1,Do(e,t,P.Mk),t}(e),i=No((0,s.Z)(e,"mediaTypes.banner.sizes"),(0,s.Z)(e,"params.size"));n.hasOwnProperty(e.transactionId)||(n[e.transactionId]={}),n[e.transactionId].gpid=(0,s.Z)(e,"ortb2Imp.ext.gpid"),n[e.transactionId].dfp_ad_unit_code=(0,s.Z)(e,"ortb2Imp.ext.data.adserver.adslot"),n[e.transactionId].tid=(0,s.Z)(e,"ortb2Imp.ext.tid"),n[e.transactionId].pbadslot=(0,s.Z)(e,"ortb2Imp.ext.data.pbadslot"),n[e.transactionId].tagId=(0,s.Z)(e,"params.tagId"),n[e.transactionId].pos=(0,s.Z)(e,"mediaTypes.banner.pos");var o=(0,s.Z)(e,"ortb2Imp.ext.data");o&&(n[e.transactionId].adUnitFPD=o);var d=(0,s.Z)(e,"params.id");!d||"string"!=typeof d&&"number"!=typeof d||(n[e.transactionId].sid=String(d));var c=e.adUnitCode,l=document.getElementById(c)?c:(0,a.ky)(c).divId;n[e.transactionId].adUnitCode=c,n[e.transactionId].divId=l,i&&(n[e.transactionId].hasOwnProperty("ixImps")||(n[e.transactionId].ixImps=[]),n[e.transactionId].ixImps.push(r)),function(e,t,n){var r=e.transactionId;if(t.hasOwnProperty(r)){var i=[];t[r].hasOwnProperty("missingSizes")&&(i=t[r].missingSizes),Ho(i,e.params.size),t[r].missingSizes=i}else if((0,s.Z)(e,"mediaTypes.banner.sizes")){var o=(0,a.I8)(e.mediaTypes.banner.sizes);Ho(o,e.params.size);var d={missingSizes:o,impression:n};t[r]=d}}(e,t,r)}function Ko(e,t,n){var r=(0,a.I8)(t);return r.banner.w=n[0],r.banner.h=n[1],Do(e,r,P.Mk),r}function Xo(e){"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===lo&&function(e){if(ko.localStorageIsEnabled()){var t;try{t=JSON.parse(ko.getDataFromLocalStorage(To)||"{}")}catch(e){(0,a.yN)("ix can not read ixdiag from localStorage.")}var n=new Date;if(Object.keys(t).map((function(e){var r=new Date(e);r.setDate(r.getDate()+7)-n<0&&delete t[e]})),"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===lo){var r=n.toISOString().slice(0,10),i=e.arguments[1].code;i&&(t[r]=t[r]||{},Number(t[r][i])||(t[r][i]=0),t[r][i]++)}ko.setDataInLocalStorage(To,JSON.stringify(t))}}(e)}function Jo(e){e.renderer.push((function(){var t=e.adUnitCode,n=document.getElementById(t)?t:(0,a.ky)(t).divId;n?window.createIXPlayer(n,e):(0,a.yN)("IX Bid Adapter: adUnitCode: ".concat(n," not found on page."))}))}function Yo(e,t){var n=h.Th.install({id:e,url:t,loaded:!1});try{n.setRender(Jo)}catch(e){return(0,a.yN)("Prebid Error calling setRender on renderer",e),null}return t?n:((0,a.yN)("Outstream renderer URL not found"),null)}function Qo(e){if("outstream"!==(0,s.Z)(e,"mediaTypes.video.context"))return!1;var t=(0,s.Z)(e,"mediaTypes.video.renderer");return t||(t=(0,s.Z)(e,"renderer")),!("object"===(0,bt.Z)(t)&&t.url&&t.render)||t.backupOnly}var ea={code:lo,gvlid:10,aliases:[{code:uo,gvlid:10,skipPbsAliasing:!1}],supportedMediaTypes:po,isBidRequestValid:function(e){So||(c.on(u.FP.AUCTION_DEBUG,Xo),c.on(u.FP.AD_RENDER_FAILED,Xo),So=!0);var t,n,r=(0,s.Z)(e,"params.video"),i=(0,s.Z)(e,"params.size"),o=(0,s.Z)(e,"mediaTypes.banner.sizes"),d=(0,s.Z)(e,"mediaTypes.video"),l=(0,s.Z)(e,"mediaTypes.video.playerSize"),p=e.params.hasOwnProperty("bidFloor"),f=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!(0,a.r3)(po,e.mediaType))return(0,a.yN)("IX Bid Adapter: media type is not supported."),!1;if((0,s.Z)(e,"mediaTypes.banner")&&!o)return!1;if(i){var h=Lo(i);if(!h)return(0,a.H)("IX Bid Adapter: size has invalid format.",{bidder:lo,code:mo.BID_SIZE_INVALID_FORMAT}),!1;if(!No(e.sizes,h)&&!No(l,h)&&!No(o,h))return(0,a.H)("IX Bid Adapter: bid size is not included in ad unit sizes or player size.",{bidder:lo,code:mo.BID_SIZE_NOT_INCLUDED}),!1}if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return(0,a.H)("IX Bid Adapter: siteId must be string or number type.",{bidder:lo,code:mo.SITE_ID_INVALID_VALUE}),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return(0,a.H)("IX Bid Adapter: siteId must valid value",{bidder:lo,code:mo.SITE_ID_INVALID_VALUE}),!1;if((p||f)&&!(p&&f&&(t=e.params.bidFloor,n=e.params.bidFloorCur,Boolean("number"==typeof t&&"string"==typeof n&&n.match(/^[A-Z]{3}$/)))))return(0,a.H)("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format.",{bidder:lo,code:mo.BID_FLOOR_INVALID_FORMAT}),!1;if(d&&r){var g=xo(e).video,m=Uo(d,r);if((0,s.Z)(e,"mediaTypes.video.context")===on.gZ&&Qo(e)&&g){var v=[(0,s.Z)(g,"w"),(0,s.Z)(g,"h")];if(!(v[0]>=fo[0]&&v[1]>=fo[1]))return(0,a.H)("IX Bid Adapter: ".concat(v," is an invalid size for IX outstream renderer")),!1}if(m.length)return m.forEach((function(e){(0,a.H)(e,{bidder:lo,code:mo.PROPERTY_NOT_INCLUDED})})),!1}return function(e){return void 0===(0,s.Z)(e,"mediaTypes.native")||e.nativeOrtbRequest&&Array.isArray(e.nativeOrtbRequest.assets)&&e.nativeOrtbRequest.assets.length>0}(e)},buildRequests:function(e,t){var n=[],r={},i={},o={},d={};for(var c in Co.getFeatureToggles(),e.forEach((function(e){var t=Object.keys((0,s.Z)(e,"mediaTypes",{}));for(var n in t)switch(t[n]){case P.Mk:Go(e,d,r);break;case P.pX:$o(e,i);break;case P.B5:Zo(e,o);break;default:(0,a.yN)("IX Bid Adapter: ad unit mediaTypes ".concat(n," is not supported"))}})),d)if(d.hasOwnProperty(c)){var l=d[c].missingSizes;r.hasOwnProperty(c)||(r[c]={}),r[c].hasOwnProperty("missingImps")||(r[c].missingImps=[],r[c].missingCount=0);for(var u=d[c].impression,p=0;p<l.length;p++){var f=Ko(e[0],u,l[p]);r[c].missingImps.push(f),r[c].missingCount++}}return Object.keys(r).length>0&&n.push.apply(n,(0,A.Z)(Bo(e,t,r))),Object.keys(i).length>0&&n.push.apply(n,(0,A.Z)(Bo(e,t,i))),Object.keys(o).length>0&&n.push.apply(n,(0,A.Z)(Bo(e,t,o))),n},interpretResponse:function(e,t){var n=[],r=null;if(!e.hasOwnProperty("body")||!e.body.hasOwnProperty("seatbid"))return Co.setFeatureToggles(e),n;for(var i=e.body,o=i.seatbid,d=0;d<o.length;d++)if(o[d].hasOwnProperty("bid")){for(var c=o[d].bid,l=t.data,u=0;u<c.length;u++){var p=jo(c[u].impid,l.imp,t.validBidRequests);if((r=Ro(c[u],i.cur,p)).mediaType===P.pX&&Qo(p)){var f=(0,s.Z)(i,"ext.videoplayerurl");if(r.renderer=Yo(c[u].bidId,f),!r.renderer)continue}n.push(r)}if((0,s.Z)(l,"ext.ixdiag.err")&&ko.localStorageIsEnabled())try{ko.removeDataFromLocalStorage(To)}catch(e){(0,a.H)("ix can not clear ixdiag from localStorage.")}}return Co.setFeatureToggles(e),n},transformBidParams:function(e,t){return(0,a.uh)({siteID:"number"},e)},getUserSyncs:function(e,t){var n=[],r=null;if(t.length>0&&(r=(0,s.Z)(t[0],"body.ext.publishersyncsperbidderoverride")),void 0!==r&&0==r)return[];if(e.iframeEnabled)n.push({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"});else{var i=null;g.vc.getConfig("userSync")&&(i=g.vc.getConfig("userSync").syncsPerBidder),0===i&&(i=r),i=r&&(0===i||i)?r>i?i:r:1;for(var o=0;o<i;o++)n.push({type:"image",url:ta(i,o)})}return n}};function ta(e,t){var n="",r="0";return Ao&&Ao.hasOwnProperty("gdprApplies")&&(r=Ao.gdprApplies?"1":"0"),Ao&&Ao.hasOwnProperty("consentString")&&(n=Ao.consentString||""),"https://dsum.casalemedia.com/pbusermatch?origin=prebid&site_id="+Eo.toString()+"&p="+e.toString()+"&i="+t.toString()+"&gdpr="+r+"&gdpr_consent="+n+"&us_privacy="+(Po||"")}(0,Xe.dX)(ea),(0,o.z)("ixBidAdapter");var na={code:"justpremium",gvlid:62,time:6e4,isBidRequestValid:function(e){return!!(e&&e.params&&e.params.zone)},buildRequests:function(e,t){var n,i,o=(n={},i={},e.forEach((function(e){var t=e.params,r=t.zone;if(1!==n[r]){var o=t.allow||t.formats||[],a=t.exclude||[];if(0===o.length&&0===a.length)return n[t.zone]=1;n[r]=n[r]||[[],{}],n[r][0]=function(e){for(var t=e.concat(),n=0;n<t.length;++n)for(var r=n+1;r<t.length;++r)t[n]===t[r]&&t.splice(r--,1);return t}(n[r][0].concat(o)),a.forEach((function(e){n[r][1][e]?n[r][1][e]++:n[r][1][e]=1})),i[r]=i[r]||0,a.length&&i[r]++}})),Object.keys(i).forEach((function(e){if(1!==n[e]){var t=[];Object.keys(n[e][1]).forEach((function(r){n[e][1][r]===i[e]&&t.push(r)})),n[e][1]=t}})),Object.keys(n).forEach((function(e){1!==n[e]&&n[e][1].length&&(n[e][0].forEach((function(t){var r=n[e][1].indexOf(t);r>-1&&n[e][1].splice(r,1)})),n[e][0].length=0),1===n[e]||n[e][0].length||n[e][1].length||(n[e]=1)})),n),a=function(){var e;try{e=window.top}catch(t){e=window}return{screenWidth:e.screen.width,screenHeight:e.screen.height,innerWidth:e.innerWidth,innerHeight:e.innerHeight}}(),d=function(){if(!window.top)return null;var e,t=new URLSearchParams(window.top.location.search);return function(e){return 0===Object.keys(e).length?null:e}((e={ggAdbuyid:t.get("gg_adbuyid"),ggDealid:t.get("gg_dealid"),ggEadbuyid:t.get("gg_eadbuyid")},Object.fromEntries(Object.entries(e).filter((function(e){var t=(0,r.Z)(e,2);return t[0],null!=t[1]})))))}(),c={zone:e.map((function(e){return parseInt(e.params.zone)})).filter((function(e,t,n){return n.indexOf(e)===t})),referer:t.refererInfo.page,sw:a.screenWidth,sh:a.screenHeight,ww:a.innerWidth,wh:a.innerHeight,c:o,id:e[0].params.zone,sizes:{},ggExt:d};e.forEach((function(e){var t=e.params.zone,n=c.sizes;n[t]=n[t]||[],n[t].push.apply(n[t],e.mediaTypes&&e.mediaTypes.banner&&e.mediaTypes.banner.sizes)})),(0,s.Z)(e[0],"userId.pubcid")?c.pubcid=(0,s.Z)(e[0],"userId.pubcid"):(0,s.Z)(e[0],"crumbs.pubcid")&&(c.pubcid=(0,s.Z)(e[0],"crumbs.pubcid")),c.uids=e[0].userId,t&&t.gdprConsent&&(c.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:"boolean"!=typeof t.gdprConsent.gdprApplies||t.gdprConsent.gdprApplies}),t&&t.uspConsent&&(c.us_privacy=t.uspConsent),c.version={prebid:"7.47.0",jp_adapter:"1.8.3"},e[0].schain&&(c.schain=e[0].schain);var l=JSON.stringify(c);return{method:"POST",url:"https://pre.ads.justpremium.com/v/2.0/t/xhr?i="+ +new Date,data:l,bids:e}},interpretResponse:function(e,t){var n=e.body,r=[];return t.bids.forEach((function(e){var t=function(e,t){var n=e.zone;if(t[n])for(var r=t[n].length;r--;)if(ra(e,t[n][r]))return t[n].splice(r,1).pop();return!1}(e.params,n.bid);if(t){var i=e.mediaTypes&&e.mediaTypes.banner&&e.mediaTypes.banner.sizes&&e.mediaTypes.banner.sizes.length&&e.mediaTypes.banner.sizes[0]||[],o={requestId:e.bidId,creativeId:t.id,width:i[0]||t.width,height:i[1]||t.height,ad:t.adm,cpm:t.price,netRevenue:!0,currency:t.currency||"USD",ttl:t.ttl||na.time,format:t.format,meta:{advertiserDomains:t.adomain&&t.adomain.length>0?t.adomain:[]}};t.ext&&t.ext.pg&&(o.adserverTargeting={hb_deal_justpremium:"jp_pg"}),r.push(o)}})),r},getUserSyncs:function(e,t,n,r){var i="https://pre.ads.justpremium.com/v/1.0/t/sync?_c=a"+Math.random().toString(36).substring(7)+Date.now(),o=[];if(n&&"boolean"==typeof n.gdprApplies&&n.gdprApplies&&n.consentString&&(i=i+"&consentString="+encodeURIComponent(n.consentString)),r&&(i=i+"&usPrivacy="+encodeURIComponent(r)),e.iframeEnabled&&o.push({type:"iframe",url:i}),e.pixelEnabled&&0!==t.length){var a=t.map((function(e){var t;return null==e||null===(t=e.body)||void 0===t?void 0:t.pxs})).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return void 0!==e}));o=[].concat((0,A.Z)(o),(0,A.Z)(a))}return o}};function ra(e,t){var n=t.format;return e.allow&&e.allow.length?e.allow.indexOf(n)>-1:!e.exclude||!e.exclude.length||e.exclude.indexOf(n)<0}(0,Xe.dX)(na),(0,o.z)("justpremiumBidAdapter");var ia,oa,aa,sa=Object.freeze({CODE:"kargo",HOST:"krk2.kargo.com",REQUEST_METHOD:"POST",REQUEST_ENDPOINT:"/api/v1/prebid",TIMEOUT_ENDPOINT:"/api/v1/event/timeout",GVLID:972,SUPPORTED_MEDIA_TYPES:[P.Mk,P.pX]}),da=(0,J.df)({bidderCode:sa.CODE}),ca=Object.freeze({KEY:"currency",US_DOLLAR:"USD"}),la=Object.freeze({SOCIAL_CANVAS:"params.socialCanvas",SUA:"ortb2.device.sua",TDID_ADAPTER:"userId.tdid"}),ua=Object.freeze({BROWSERS:"browsers",MOBILE:"mobile",MODEL:"model",PLATFORM:"platform",SOURCE:"source"}),pa=[ua.BROWSERS,ua.MOBILE,ua.MODEL,ua.SOURCE,ua.PLATFORM],fa=Object.freeze({KEY:"krg_crb",SYNC_URL:"https://crb.kargo.com/api/v1/initsyncrnd/{UUID}?seed={SEED}&idx={INDEX}&gdpr={GDPR}&gdpr_consent={GDPR_CONSENT}&us_privacy={US_PRIVACY}&gpp={GPP_STRING}&gpp_sid={GPP_SID}",SYNC_COUNT:5,PAGE_VIEW_ID:"pageViewId",PAGE_VIEW_TIMESTAMP:"pageViewTimestamp",PAGE_VIEW_URL:"pageViewUrl"});function ha(){try{var e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=-177&e[6]|64,e[8]=-65&e[8]|128;var t=Array.prototype.map.call(new Uint8Array(e),(function(e){return("00"+e.toString(16)).slice(-2)})).join("");return t.slice(0,8)+"-"+t.slice(8,12)+"-"+t.slice(12,16)+"-"+t.slice(16,20)+"-"+t.slice(20)}catch(e){return""}}function ga(){return ia||(ia=ha()),ia}function ma(e){try{return da.getDataFromLocalStorage(e)}catch(e){return null}}function va(e,t,n,r,i){var o=ya._getCrb(),s={crbIDs:o.syncIds||{}};e&&(s.tdID=e),!e&&o.tdID&&(s.tdID=o.tdID),t&&(s.usp=t);try{n&&(s.gdpr={consent:n.consentString||"",applies:!!n.gdprApplies})}catch(e){}if(null!=o.lexId&&(s.kargoID=o.lexId),null!=o.clientId&&(s.clientID=o.clientId),null!=o.optOut&&(s.optOut=o.optOut),null!=r&&(s.sharedIDEids=r),i){var d={};i&&i.consentString&&(d.gppString=i.consentString),i&&i.applicableSections&&(d.applicableSections=i.applicableSections),(0,a.xb)(d)||(s.gpp=d)}return s}var ya={gvlid:sa.GVLID,code:sa.CODE,isBidRequestValid:function(e){return!(!e||!e.params||!e.params.placementId)},buildRequests:function(e,t){var n=g.vc.getConfig(ca.KEY),r=n&&n.adServerCurrency?n.adServerCurrency:null,i=[];(0,a.yi)(e,(function(e){i.push(function(e){var t={id:e.bidId,tid:e.transactionId,pid:e.params.placementId,code:e.adUnitCode};null!=e.floorData&&e.floorData.floorMin>0&&(t.floor=e.floorData.floorMin),e.bidRequestsCount>0&&(t.bidRequestCount=e.bidRequestsCount),e.bidderRequestsCount>0&&(t.bidderRequestCount=e.bidderRequestsCount),e.bidderWinsCount>0&&(t.bidderWinCount=e.bidderWinsCount);var n=function(e){if(null!=e.ortb2Imp){if(null!=e.ortb2Imp.gpid&&""!=e.ortb2Imp.gpid)return e.ortb2Imp.gpid;if(null!=e.ortb2Imp.ext&&null!=e.ortb2Imp.ext.data){if(null!=e.ortb2Imp.ext.data.pbAdSlot&&""!=e.ortb2Imp.ext.data.pbAdSlot)return e.ortb2Imp.ext.data.pbAdSlot;if(null!=e.ortb2Imp.ext.data.adServer&&null!=e.ortb2Imp.ext.data.adServer.adSlot&&""!=e.ortb2Imp.ext.data.adServer.adSlot)return e.ortb2Imp.ext.data.adServer.adSlot}}return null!=e.adUnitCode&&""!=e.adUnitCode?e.adUnitCode:""}(e);return null!=n&&""!=n&&(t.fpd={gpid:n}),null!=e.mediaTypes&&(null!=e.mediaTypes.banner&&(t.banner=e.mediaTypes.banner),null!=e.mediaTypes.video&&(t.video=e.mediaTypes.video),null!=e.mediaTypes.native&&(t.native=e.mediaTypes.native)),t}(e))}));var o=e[0],d=(0,s.Z)(o,la.TDID_ADAPTER),c=function(e){var t;return{pageURL:null==e||null===(t=e.refererInfo)||void 0===t?void 0:t.page,rawCRB:da.getCookie(fa.KEY),rawCRBLocalStorage:ma(fa.KEY)}}(t),l=Object.assign({},{pbv:"7.47.0",aid:o.auctionId,sid:ga(),url:c.pageURL,timeout:t.timeout,ts:(new Date).getTime(),device:{size:[window.screen.width,window.screen.height]},imp:i,user:va(d,t.uspConsent,t.gdprConsent,o.userIdAsEids,t.gppConsent)}),u=oa===window.location.pathname?++aa:(oa=window.location.pathname,aa=0);null!=u&&(l.requestCount=u),null!=r&&r!=ca.US_DOLLAR&&(l.cur=r),null!=c.rawCRB&&(l.rawCRB=c.rawCRB),null!=c.rawCRBLocalStorage&&(l.rawCRBLocalStorage=c.rawCRBLocalStorage);var p=(0,s.Z)(o,la.SOCIAL_CANVAS);null!=p&&(l.socan=p);var f=(0,s.Z)(o,la.SUA);if(f){var h=[];pa.forEach((function(e){var t=f[e];if(t&&("string"!=typeof t||""!==t.trim()))switch(e){case ua.MOBILE&&t<1:case ua.SOURCE&&t<1:break;default:h.push(e)}})),l.device.sua=(0,a.ei)(f,h)}var m=null!=ma(fa.PAGE_VIEW_ID),v=null!=ma(fa.PAGE_VIEW_TIMESTAMP),y=null!=ma(fa.PAGE_VIEW_URL),b={};return m&&(b.id=ma(fa.PAGE_VIEW_ID)),v&&(b.timestamp=Number(ma(fa.PAGE_VIEW_TIMESTAMP))),y&&(b.url=ma(fa.PAGE_VIEW_URL)),(0,a.xb)(b)||(l.page=b),Object.assign({},t,{method:sa.REQUEST_METHOD,url:"https://".concat(sa.HOST).concat(sa.REQUEST_ENDPOINT),data:l,currency:r})},interpretResponse:function(e,t){var n=e.body,i=[];return(0,a.xb)(n)||"object"!==(0,bt.Z)(n)||Object.entries(n).forEach((function(e){var n=(0,r.Z)(e,2),o=n[0],a=n[1],s={mediaType:a.mediaType&&sa.SUPPORTED_MEDIA_TYPES.includes(a.mediaType)?a.mediaType:P.Mk};a.metadata&&a.metadata.landingPageDomain&&(s.clickUrl=a.metadata.landingPageDomain[0],s.advertiserDomains=a.metadata.landingPageDomain);var d={requestId:o,cpm:Number(a.cpm),width:a.width,height:a.height,ttl:300,creativeId:a.id,dealId:a.targetingCustom,netRevenue:!0,currency:a.currency||t.currency,mediaType:s.mediaType,meta:s};s.mediaType==P.pX?a.admUrl?d.vastUrl=a.admUrl:d.vastXml=a.adm:d.ad=a.adm,i.push(d)})),i},getUserSyncs:function(e,t,n,r,i){var o=[],a=ha(),s=ya._getCrb().clientId,d=n&&n.gdprApplies?1:0,c=n&&n.consentString?n.consentString:"",l=i&&i.consentString?i.consentString:"",u=i&&i.applicableSections&&Array.isArray(i.applicableSections)?i.applicableSections.join(","):"";if("string"==typeof r&&4==r.length&&1==r[0]&&"Y"==r[2])return o;if(e.iframeEnabled&&a&&s)for(var p=0;p<fa.SYNC_COUNT;p++)o.push({type:"iframe",url:fa.SYNC_URL.replace("{UUID}",s).replace("{SEED}",a).replace("{INDEX}",p).replace("{GDPR}",d).replace("{GDPR_CONSENT}",c).replace("{US_PRIVACY}",r||"").replace("{GPP_STRING}",l).replace("{GPP_SID}",u)});return o},supportedMediaTypes:sa.SUPPORTED_MEDIA_TYPES,onTimeout:function(e){null!=e&&e.forEach((function(e){!function(e,t){var n={aid:e,ato:t};try{var r=(0,a.Q2)({protocol:"https",hostname:sa.HOST,pathname:sa.TIMEOUT_ENDPOINT,search:n});(0,a.hq)(r)}catch(e){}}(e.auctionId,e.timeout)}))},_getCrb:function(){var e=function(){try{return JSON.parse(atob(ma(fa.KEY)))}catch(e){return{}}}();return Object.keys(e).length?e:function(){try{var e=JSON.parse(da.getCookie(fa.KEY));if(e&&e.v){var t=JSON.parse(atob(e.v));if(t)return t}return{}}catch(e){return{}}}()},_getSessionId:ga};(0,Xe.dX)(ya),(0,o.z)("kargoBidAdapter");var ba,_a={ajax:mt.h},wa=Object.values(u.FP).filter((function(e){return e!==u.FP.AUCTION_DEBUG})),Ta=(ba={},(0,i.Z)(ba,u.FP.AUCTION_INIT,Sa),(0,i.Z)(ba,u.FP.AUCTION_END,Sa),(0,i.Z)(ba,u.FP.BID_REQUESTED,(function(e){return{bidderCode:e.bidderCode,time:e.start,bids:e.bids.map((function(e){return{transactionId:e.transactionId,adUnitCode:e.adUnitCode,bidId:e.bidId,startTime:e.startTime,sizes:(0,a.sF)(e.sizes).toString(),params:e.params}}))}})),(0,i.Z)(ba,u.FP.BID_TIMEOUT,(function(e){return e.map((function(e){return e.bidder})).filter(a.tT)})),(0,i.Z)(ba,u.FP.BID_RESPONSE,(function(e){return{bidderCode:e.bidder,transactionId:e.transactionId,adUnitCode:e.adUnitCode,statusMessage:e.statusMessage,mediaType:e.mediaType,renderedSize:e.size,cpm:e.cpm,currency:e.currency,netRevenue:e.netRevenue,timeToRespond:e.timeToRespond,bidId:e.bidId,requestId:e.requestId,creativeId:e.creativeId}})),(0,i.Z)(ba,u.FP.BID_WON,(function(e){return{adId:e.adId,bidderCode:e.bidder,adUnitCode:e.adUnitCode,statusMessage:e.statusMessage,mediaType:e.mediaType,renderedSize:e.size,cpm:e.cpm,currency:e.currency,netRevenue:e.netRevenue,timeToRespond:e.timeToRespond,bidId:e.requestId,dealId:e.dealId,status:e.status,creativeId:e.creativeId}})),(0,i.Z)(ba,u.FP.NO_BID,(function(e){return{bidderCode:e.bidder,transactionId:e.transactionId,adUnitCode:e.adUnitCode,bidId:e.bidId}})),ba);var Ia=Object.assign(function(e){var t,n,i,o,s,d=e.url,l=e.analyticsType,p=e.global,f=e.handler,h=[],g=!1,m=(o=!1,s=function(){if(!o){o=!0;try{for(var e=0,t=0;h.length>0;){e++;var r=h.length;if(h.shift()(),h.length>=r?t++:t=0,t>=10)return(0,a.H)("Detected probable infinite loop, discarding events",h),void(h.length=0)}(0,a.ji)("".concat(n," analytics: processed ").concat(e," events"))}finally{o=!1}}},function(){null!=i&&(clearTimeout(i),i=null),i=setTimeout(s,100)});return Object.defineProperties({track:function(e){var t=e.eventType,n=e.args;"bundle"===this.getAdapterType()&&window[p](f,t,n),"endpoint"===this.getAdapterType()&&v.apply(void 0,arguments)},enqueue:y,enableAnalytics:b,disableAnalytics:function(){Object.entries(t||{}).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];c.S1(n,i)})),this.enableAnalytics=this._oldEnable?this._oldEnable:b,g=!1},getAdapterType:function(){return l},getGlobal:function(){return p},getHandler:function(){return f},getUrl:function(){return d}},{enabled:{get:function(){return g}}});function v(e){var t=e.eventType,n=e.args,r=e.callback;_a.ajax(d,r,JSON.stringify({eventType:t,args:n}))}function y(e){var t=this,n=e.eventType,r=e.args;h.push((function(){t.track({eventType:n,args:r})})),m()}function b(e){var r=this;n=null==e?void 0:e.provider;var i,o,s,d,l,f=this;if("object"!==(0,bt.Z)(e)||"object"!==(0,bt.Z)(e.options)||void 0===e.options.sampling||Math.random()<parseFloat(e.options.sampling)){var h=(o=(i=e||{}).includeEvents,s=void 0===o?wa:o,d=i.excludeEvents,l=void 0===d?[]:d,new Set(Object.values(u.FP).filter((function(e){return s.includes(e)})).filter((function(e){return!l.includes(e)}))));c.vw().forEach((function(e){if(e&&h.has(e.eventType)){var t=e.eventType,n=e.args;y.call(f,{eventType:t,args:n})}})),t=Object.fromEntries(Array.from(h).map((function(t){var n=t===u.FP.AUCTION_INIT?function(n){n.config="object"===(0,bt.Z)(e)&&e.options||{},r.enqueue({eventType:t,args:n})}:function(e){return r.enqueue({eventType:t,args:e})};return c.on(t,n),[t,n]})))}else(0,a.ji)('Analytics adapter for "'.concat(p,'" disabled by sampling'));this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return(0,a.ji)('Analytics adapter for "'.concat(p,'" already enabled, unnecessary call to `enableAnalytics`.'))},g=!0}}({analyticsType:"endpoint"}),{track:function(e){var t,n,r=e.eventType,i=e.args;if(u.FP.AUCTION_INIT===r&&Ia.context.aggregatedEvents.splice(0),Ta[r]&&Ia.context.aggregatedEvents.push({eventType:r,data:Ta[r](i)}),r===u.FP.AUCTION_END){if(!Ia.context.aggregatedEvents.filter((function(e){return e.eventType===u.FP.BID_WON}))[0]&&V.getWinningBids()[0]){var o=Ta[u.FP.BID_WON](V.getWinningBids()[0]);Ia.context.aggregatedEvents.push({eventType:u.FP.BID_WON,data:o})}!function(e){var t=e.host,n=e.method,r=e.payload,i={protocol:"https",hostname:void 0===t?"tracker.konduit.me":t,pathname:e.path};"GET"===n&&(i.search=r);var o,a,s=((o=i).protocol||"http")+"://"+(o.host||o.hostname+(o.port?":".concat(o.port):""))+(o.pathname||"")+(o.search?"?".concat((a=o.search||"",Object.keys(a).map((function(e){return Array.isArray(a[e])?a[e].map((function(t){return"".concat(e,"[]=").concat(t)})).join("&"):"".concat(e,"=").concat(a[e])})).join("&"))):"")+(o.hash?"#".concat(o.hash):"");(0,mt.h)(s,void 0,"POST"===n?JSON.stringify(r):null,{contentType:"application/json",method:n,withCredentials:!0})}({method:"POST",path:"/analytics-initial-event",payload:(t=g.vc.getConfig("konduit.konduitId"),n=window.screen,{konduitId:t,prebidVersion:"7.47.0",konduitPrebidModuleVersion:"1.0.0",environment:{screen:{width:n.width,height:n.height},language:navigator.language},events:Ia.context.aggregatedEvents})})}}});function Sa(e){return{auctionId:e.auctionId,timestamp:e.timestamp,auctionEnd:e.auctionEnd,auctionStatus:e.auctionStatus,adUnitCodes:e.adUnitCodes,labels:e.labels,timeout:e.timeout}}Ia.originEnableAnalytics=Ia.enableAnalytics,Ia.enableAnalytics=function(e){g.vc.getConfig("konduit.konduitId")?(Ia.context={aggregatedEvents:[]},Ia.originEnableAnalytics(e)):(0,a.H)("A konduitId in config is required to use konduitAnalyticsAdapter")},Y.ZP.registerAnalyticsAdapter({adapter:Ia,code:"konduit"}),(0,o.z)("konduitAnalyticsAdapter");var ka=(0,o.R)(),Ca=n(5483),Ea=n(5366),Aa="Konduit",Pa="enableSendAllBids",xa="A konduitId param is required to be in configs",Oa="No bids received in the auction";function Da(e){return(e=[].slice.call(e)).unshift("".concat(Aa,": ")),e}function Ra(){a.H.apply(void 0,(0,A.Z)(Da(arguments)))}function Ma(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t){ka.adServers=ka.adServers||{},ka.adServers[e]=ka.adServers[e]||{},Object.keys(t).forEach((function(n){ka.adServers[e][n]?(0,a.yN)("Attempting to add an already registered function property ".concat(n," for AdServer ").concat(e,".")):ka.adServers[e][n]=t[n]}))}("konduit",{processBids:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=g.vc.getConfig("konduit.konduitId");if(e=e||{},!t)return Ra(xa),e.callback&&e.callback(new Error(xa),[]),null;var n=e.bids||p.K.getBidsReceived(),r=e.bid||V.getWinningBids(e.adUnitCode,n)[0],i=[];if(g.vc.getConfig(Pa)?i.push.apply(i,(0,A.Z)(n)):r&&i.push(r),!i.length)return Ra(Oa),e.callback&&e.callback(new Error(Oa),[]),null;var o=g.vc.getConfig("priceGranularity"),s=[];i.forEach((function(e){!function(e,t,n){e.kCpm=e.cpm,e.adserverTargeting||(e.adserverTargeting={});var r=(0,Ea.dg)(n)(e);g.vc.getConfig(Pa)&&(e.adserverTargeting["k_cpm_".concat(e.bidderCode)]=r),t.bidderCode===e.bidderCode&&t.creativeId===e.creativeId&&(e.adserverTargeting.k_cpm=r)}(e,r,o),s.push(function(e){return{auctionId:e.auctionId,vastUrl:e.vastUrl,bidderCode:e.bidderCode,creativeId:e.creativeId,adUnitCode:e.adUnitCode,cpm:e.cpm,currency:e.currency}}(e))})),function(e){var t=e.host,n=e.protocol,r=e.method,i=void 0===r?"GET":r,o=e.payload,a=e.callbacks,s=e.timeout,d={protocol:void 0===n?"https":n,hostname:void 0===t?"p.konduit.me":t,pathname:e.path};"GET"===i&&(d.search=o);var c,l,u=((c=d).protocol||"http")+"://"+(c.host||c.hostname+(c.port?":".concat(c.port):""))+(c.pathname||"")+(c.search?"?".concat((l=c.search||"",Object.keys(l).map((function(e){return Array.isArray(l[e])?l[e].map((function(t){return"".concat(e,"[]=").concat(t)})).join("&"):"".concat(e,"=").concat(l[e])})).join("&"))):"")+(c.hash?"#".concat(c.hash):"");(0,mt.O)(s)(u,a,"POST"===i?JSON.stringify(o):null,{contentType:"application/json",method:i,withCredentials:!0})}({method:"POST",path:"/api/bidsProcessor",timeout:e.timeout||1e3,payload:{clientId:t,konduitPrebidModuleVersion:"1.0.0",enableSendAllBids:g.vc.getConfig(Pa),bids:s,bidResponsesCount:p.K.getBidsReceived().length},callbacks:{success:function(n){var s=null;!function(){a.PN.apply(void 0,(0,A.Z)(Da(arguments)))}("Bids processed successfully ",n);try{var d=JSON.parse(n),c=d.kCpmData,l=d.cacheData;if((0,a.xb)(l))throw new Error("A bid was not cached");r.adserverTargeting.konduit_id=t,r.adserverTargeting.k_id=t,i.forEach((function(e){var t="".concat(e.bidderCode,":").concat(e.creativeId);!function(e,t,n,r){if((0,a.hj)(e)){t.kCpm=e;var i=(0,Ca.D)(e,g.vc.getConfig("customPriceBucket"),g.vc.getConfig("currency.granularityMultiplier")),o=i.custom||i[r]||i.med;g.vc.getConfig(Pa)&&(t.adserverTargeting["k_cpm_".concat(t.bidderCode)]=o),n.bidderCode===t.bidderCode&&n.creativeId===t.creativeId&&(t.adserverTargeting.k_cpm=o)}}(c[t],e,r,o),function(e,t,n){(0,a.d8)(e)&&(t.konduitCacheKey=e,g.vc.getConfig(Pa)&&(t.adserverTargeting["k_cache_key_".concat(t.bidderCode)]=e),n.bidderCode===t.bidderCode&&n.creativeId===t.creativeId&&(t.adserverTargeting.k_cache_key=e,t.adserverTargeting.konduit_cache_key=e))}(l[t],e,r)}))}catch(e){s=e,Ra("Error parsing JSON response for bidsProcessor data: ",e)}e.callback&&e.callback(s,i)},error:function(t){Ra("Bids were not processed successfully ",t),e.callback&&e.callback((0,a.d8)(t)?new Error(t):t,i)}}})}}),(0,o.z)("konduitWrapper");var Na=[P.Mk,P.pX],Ua="6.0.0",La="USD",ja="https://hb.minutemedia-prebid.com/",Ba="iframe",qa="pixel",Fa={code:"minutemedia",gvlid:918,version:Ua,supportedMediaTypes:Na,isBidRequestValid:function(e){return e.params?!!e.params.org||((0,a.yN)("org is a mandatory param for MinuteMedia adapter"),!1):((0,a.yN)("no params have been set to MinuteMedia adapter"),!1)},buildRequests:function(e,t){var n={},r=e[0],i=r.params.testMode;return n.params=function(e,t){var n,r=window.location.hostname,i=g.vc.getConfig("userSync")||{},o=i.syncEnabled,d=i.filterSettings,c=t.bidderCode,l=e.params,u=t.timeout,p={wrapper_type:"prebidjs",wrapper_vendor:"pbjs",wrapper_version:"7.47.0",adapter_version:Ua,auction_start:(0,a.AB)(),publisher_id:l.org,publisher_name:r,site_domain:r,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,device_type:(n=navigator.userAgent,/ipad|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(n.toLowerCase())?"5":/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(n.toLowerCase())?"4":/smart[-_\s]?tv|hbbtv|appletv|googletv|hdmi|netcast|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b/i.test(n.toLowerCase())?"3":"1"),ua:navigator.userAgent,session_id:(0,a.An)("auctionId",e),tmax:u},f=(0,a.An)("userId",e);f&&(p.userIds=JSON.stringify(f));var h=t.ortb2||{};if(h.site&&(p.site_metadata=JSON.stringify(h.site)),h.user&&(p.user_metadata=JSON.stringify(h.user)),o){var m=function(e,t){var n="image";return e&&["all","iframe"].some((function(n){return Wa(e[n],t)}))?Ba:e&&e[n]&&!Wa(e[n],t)?void 0:qa}(d,c);m&&(p.cs_method=m)}return t.uspConsent&&(p.us_privacy=t.uspConsent),t&&t.gdprConsent&&t.gdprConsent.gdprApplies&&(p.gdpr=t.gdprConsent.gdprApplies,p.gdpr_consent=t.gdprConsent.consentString),l.ifa&&(p.ifa=l.ifa),e.schain&&(p.schain=function(e){if((0,a.xb)(e))return"";var t="".concat(e.ver,",").concat(e.complete);return e.nodes.forEach((function(e){t+="!",t+="".concat(za(e.asi),","),t+="".concat(za(e.sid),","),t+="".concat(e.hp?encodeURIComponent(e.hp):"",","),t+="".concat(za(e.rid),","),t+="".concat(za(e.name),","),t+="".concat(za(e.domain))})),t}(e.schain)),t&&t.refererInfo&&(p.referrer=(0,s.Z)(t,"refererInfo.ref"),p.page_url=(0,s.Z)(t,"refererInfo.page")||window.location.href),p}(r,t),n.bids=function(e,t){var n=[];return e.length&&e.forEach((function(e){n.push(function(e,t){var n=e.params,r=function(e){return e.mediaTypes&&e.mediaTypes.banner}(e)?P.Mk:P.pX,i=function(e,t){var n=[];return(0,s.Z)(e,"mediaTypes.".concat(t,".sizes"))?n=e.mediaTypes[t].sizes:Array.isArray(e.sizes)&&e.sizes.length>0&&(n=e.sizes),n}(e,r);isNaN(n.floorPrice)&&(n.floorPrice=0);var o={mediaType:r,adUnitCode:(0,a.An)("adUnitCode",e),sizes:i,floorPrice:Math.max(Va(e,r),n.floorPrice),bidId:(0,a.An)("bidId",e),loop:(0,a.An)("bidderRequestsCount",e),bidderRequestId:(0,a.An)("bidderRequestId",e),transactionId:(0,a.An)("transactionId",e)},d=(0,s.Z)(e,"mediaTypes.".concat(r,".pos"));d&&(o.pos=d);var c=(0,s.Z)(e,"ortb2Imp.ext.gpid");c&&(o.gpid=c);var l=n.placementId||(0,s.Z)(e,"mediaTypes.".concat(r,".name"));if(l&&(o.placementId=l),r===P.pX){var u,p=(0,s.Z)(e,"mediaTypes.video.playbackmethod");Array.isArray(p)&&(0,a.U)(p[0])?u=p[0]:(0,a.U)(p)&&(u=p),u&&(o.playbackMethod=u);var f=(0,s.Z)(e,"mediaTypes.video.placement");f&&(o.placement=f);var h=(0,s.Z)(e,"mediaTypes.video.minduration");h&&(o.minDuration=h);var g=(0,s.Z)(e,"mediaTypes.video.maxduration");g&&(o.maxDuration=g);var m=(0,s.Z)(e,"mediaTypes.video.skip");m&&(o.skip=m);var v=(0,s.Z)(e,"mediaTypes.video.linearity");v&&(o.linearity=v)}return o}(e))})),n}(e),{method:"POST",url:Ha(i),data:n}},interpretResponse:function(e){var t=e.body,n=[];return t.bids&&t.bids.forEach((function(e){var t={requestId:e.requestId,cpm:e.cpm,currency:e.currency||La,width:e.width,height:e.height,ttl:e.ttl||360,creativeId:e.requestId,netRevenue:e.netRevenue||!0,nurl:e.nurl,mediaType:e.mediaType,meta:{mediaType:e.mediaType}};e.mediaType===P.pX?t.vastXml=e.vastXml:e.mediaType===P.Mk&&(t.ad=e.ad),e.adomain&&e.adomain.length&&(t.meta.advertiserDomains=e.adomain),n.push(t)})),n},getUserSyncs:function(e,t){var n,r=[],i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ma(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ma(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(e.iframeEnabled&&o.body.params.userSyncURL&&r.push({type:"iframe",url:o.body.params.userSyncURL}),e.pixelEnabled&&(0,a.kJ)(o.body.params.userSyncPixels)){var s=o.body.params.userSyncPixels.map((function(e){return{type:"image",url:e}}));r.push.apply(r,(0,A.Z)(s))}}}catch(e){i.e(e)}finally{i.f()}return r},onBidWon:function(e){null!=e&&((0,a.PN)("onBidWon:",e),e.hasOwnProperty("nurl")&&e.nurl.length>0&&(0,a.hq)(e.nurl))}};function Va(e,t){if(!(0,a.LQ)(e.getFloor))return 0;var n=e.getFloor({currency:La,mediaType:t,size:"*"});return n.currency===La&&n.floor?n.floor:0}function za(e){return(0,a.xb)(e)?"":encodeURIComponent(e)}function Wa(e,t){if(!e)return!1;var n="include"===e.filter,r=(0,a.kJ)(e.bidders)?e.bidders:[t];return n&&(0,a.r3)(r,t)}function Ha(e){return e?ja+"hb-multi-mm-test":ja+"hb-mm-multi"}function Za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,Xe.dX)(Fa),(0,o.z)("minutemediaBidAdapter");var Ga={code:"openx",supportedMediaTypes:[P.Mk,P.pX],isBidRequestValid:function(e){var t=e.params.delDomain||e.params.platform;return s.Z(e,"mediaTypes.banner")&&t?!!e.params.unit||s.Z(e,"mediaTypes.banner.sizes.length")>0:!(!e.params.unit||!t)},buildRequests:function(e,t){var n=e.filter((function(e){return Ja(e)})),r=e.filter((function(e){return function(e){return s.Z(e,"mediaTypes.banner")||!Ja(e)}(e)})),i=r.length?[Xa(r,t,P.Mk)]:[];return n.forEach((function(e){i.push(Xa([e],t,P.pX))})),i},interpretResponse:function(e,t){return e.body||(e.body={nbr:0}),Ka.fromORTB({request:t.data,response:e.body})},getUserSyncs:function(e,t,n,r){if(e.iframeEnabled||e.pixelEnabled){var i=e.iframeEnabled?"iframe":"image",o=[],a="https://u.openx.net/w/1.0/pd";if(n&&(o.push("gdpr="+(n.gdprApplies?1:0)),o.push("gdpr_consent="+encodeURIComponent(n.consentString||""))),r&&o.push("us_privacy="+encodeURIComponent(r)),t.length>0&&t[0].body&&t[0].body.ext){var s=t[0].body.ext;s.delDomain?a="https://".concat(s.delDomain,"/w/1.0/pd"):s.platform&&o.push("ph="+s.platform)}else o.push("ph=2d1251ae-7f3a-47cf-bd2a-2f288854a0ba");return[{type:i,url:"".concat(a).concat(o.length>0?"?"+o.join("&"):"")}]}},transformBidParams:function(e,t){return a.uh({unit:"string",customFloor:"number"},e)}};(0,Xe.dX)(Ga);var Ka=Hi({context:{netRevenue:!0,ttl:300},imp:function(e,t,n){var r=e(t,n);return(0,a.Ee)(r,{tagid:t.params.unit,ext:{divid:t.adUnitCode}}),t.params.customParams&&d(r,"ext.customParams",t.params.customParams),t.params.customFloor&&!r.bidfloor&&(r.bidfloor=t.params.customFloor),r},request:function(e,t,n,r){var i=e(t,n,r);(0,a.Ee)(i,{at:1,ext:{bc:"".concat("hb_pb_ortb","_").concat("2.0")}});var o=r.bidRequests[0];return o.params.coppa&&d(i,"regs.coppa",1),o.params.doNotTrack&&d(i,"device.dnt",1),o.params.platform&&d(i,"ext.platform",o.params.platform),o.params.delDomain&&d(i,"ext.delDomain",o.params.delDomain),o.params.response_template_name&&d(i,"ext.response_template_name",o.params.response_template_name),o.params.test&&(i.test=1),i},bidResponse:function(e,t,n){var r=e(t,n);t.ext&&(r.meta.networkId=t.ext.dsp_id,r.meta.advertiserId=t.ext.buyer_id,r.meta.brandId=t.ext.brand_id);var i=n.ortbResponse;return i.ext&&i.ext.paf&&(r.meta.paf=Object.assign({},i.ext.paf),r.meta.paf.content_id=s.Z(t,"ext.paf.content_id")),r},response:function(e,t,n,i){var o=i.ortbRequest;o.ext&&(o.ext.delDomain&&d(n,"ext.delDomain",o.ext.delDomain),o.ext.platform&&d(n,"ext.platform",o.ext.platform));var a=e(t,n,i),c=s.Z(n,"ext.fledge_auction_configs");return c?(c=Object.entries(c).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return{bidId:n,config:Object.assign({auctionSignals:{}},i)}})),{bids:a.bids,fledgeAuctionConfigs:c}):a.bids},overrides:{imp:{bidfloor:function(e,t,n,r){var i={};e(i,n,$a($a({},r),{},{currency:"USD"})),"USD"===i.bidfloorcur&&Object.assign(t,i)},video:function(e,t,n,r){var o,a=n.mediaTypes[P.pX];a&&(a=Object.assign({},a,n.params.video),n=$a($a({},n),{},{mediaTypes:(0,i.Z)({},P.pX,a)})),e(t,n,r),t.video&&"outstream"===(null===(o=a)||void 0===o?void 0:o.context)&&(t.video.placement=t.video.placement||4)}}}});function Xa(e,t,n){return{method:"POST",url:g.vc.getConfig("openxOrtbUrl")||"https://rtb.openx.net/openrtbb/prebidjs",data:Ka.toORTB({bidRequests:e,bidderRequest:t,context:{mediaType:n}})}}function Ja(e){return s.Z(e,"mediaTypes.video")}(0,o.z)("openxBidAdapter");var Ya="https://elb.the-ozone-project.com",Qa="/openrtb2/auction",es="/static/load-cookie.html",ts="https://test.ozpr.net",ns="2.8.0",rs={gvlid:524,aliases:[{code:"lmc",gvlid:524}],version:ns,code:"ozone",supportedMediaTypes:[P.pX,P.Mk],cookieSyncBag:{publisherId:null,siteId:null,userIdObject:{}},propertyBag:{pageId:null,buildRequestsStart:0,buildRequestsEnd:0,endpointOverride:null},whitelabel_defaults:{logId:"OZONE",bidder:"ozone",keyPrefix:"oz",auctionUrl:Ya+Qa,cookieSyncUrl:Ya+es,rendererUrl:"https://prebid.the-ozone-project.com/ozone-renderer.js"},loadWhitelabelData:function(e){if(!this.propertyBag.whitelabel){this.propertyBag.whitelabel=JSON.parse(JSON.stringify(this.whitelabel_defaults));var t=e.bidder||"ozone";this.propertyBag.whitelabel.logId=t.toUpperCase(),this.propertyBag.whitelabel.bidder=t;var n=g.vc.getConfig(t)||{};(0,a.PN)("got bidderConfig: ",JSON.parse(JSON.stringify(n))),n.kvpPrefix&&(this.propertyBag.whitelabel.keyPrefix=n.kvpPrefix);var r=this.getGetParametersAsObject();n.endpointOverride&&(n.endpointOverride.origin&&(this.propertyBag.endpointOverride=n.endpointOverride.origin,this.propertyBag.whitelabel.auctionUrl=n.endpointOverride.origin+Qa,this.propertyBag.whitelabel.cookieSyncUrl=n.endpointOverride.origin+es),r.hasOwnProperty("renderer")?r.renderer.match("%3A%2F%2F")?this.propertyBag.whitelabel.rendererUrl=decodeURIComponent(r.renderer):this.propertyBag.whitelabel.rendererUrl=r.renderer:n.endpointOverride.rendererUrl&&(this.propertyBag.whitelabel.rendererUrl=n.endpointOverride.rendererUrl),n.endpointOverride.cookieSyncUrl&&(this.propertyBag.whitelabel.cookieSyncUrl=n.endpointOverride.cookieSyncUrl),n.endpointOverride.auctionUrl&&(this.propertyBag.endpointOverride=n.endpointOverride.auctionUrl,this.propertyBag.whitelabel.auctionUrl=n.endpointOverride.auctionUrl));try{r.hasOwnProperty("auction")&&"dev"===r.auction&&((0,a.PN)("GET: auction=dev"),this.propertyBag.whitelabel.auctionUrl=ts+Qa),r.hasOwnProperty("cookiesync")&&"dev"===r.cookiesync&&((0,a.PN)("GET: cookiesync=dev"),this.propertyBag.whitelabel.cookieSyncUrl=ts+es)}catch(e){}(0,a.PN)("set propertyBag.whitelabel to",this.propertyBag.whitelabel)}},getAuctionUrl:function(){return this.propertyBag.whitelabel.auctionUrl},getCookieSyncUrl:function(){return this.propertyBag.whitelabel.cookieSyncUrl},getRendererUrl:function(){return this.propertyBag.whitelabel.rendererUrl},isBidRequestValid:function(e){this.loadWhitelabelData(e),(0,a.PN)("isBidRequestValid : ",g.vc.getConfig(),e);var t=e.adUnitCode,n="VALIDATION FAILED : missing {param} : siteId, placementId and publisherId are REQUIRED";if(!e.params.hasOwnProperty("placementId"))return(0,a.H)(n.replace("{param}","placementId"),t),!1;if(!this.isValidPlacementId(e.params.placementId))return(0,a.H)("VALIDATION FAILED : placementId must be exactly 10 numeric characters",t),!1;if(!e.params.hasOwnProperty("publisherId"))return(0,a.H)(n.replace("{param}","publisherId"),t),!1;if(!e.params.publisherId.toString().match(/^[a-zA-Z0-9\-]{12}$/))return(0,a.H)("VALIDATION FAILED : publisherId must be exactly 12 alphanumeric characters including hyphens",t),!1;if(!e.params.hasOwnProperty("siteId"))return(0,a.H)(n.replace("{param}","siteId"),t),!1;if(!e.params.siteId.toString().match(/^[0-9]{10}$/))return(0,a.H)("VALIDATION FAILED : siteId must be exactly 10 numeric characters",t),!1;if(e.params.hasOwnProperty("customParams"))return(0,a.H)("VALIDATION FAILED : customParams should be renamed to customData",t),!1;if(e.params.hasOwnProperty("customData")){if(!Array.isArray(e.params.customData))return(0,a.H)("VALIDATION FAILED : customData is not an Array",t),!1;if(e.params.customData.length<1)return(0,a.H)("VALIDATION FAILED : customData is an array but does not contain any elements",t),!1;if(!e.params.customData[0].hasOwnProperty("targeting"))return(0,a.H)('VALIDATION FAILED : customData[0] does not contain "targeting"',t),!1;if("object"!=(0,bt.Z)(e.params.customData[0].targeting))return(0,a.H)("VALIDATION FAILED : customData[0] targeting is not an object",t),!1}if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(P.pX)){if(!e.mediaTypes[P.pX].hasOwnProperty("context"))return(0,a.H)("No video context key/value in bid. Rejecting bid: ",e),!1;if("instream"!==e.mediaTypes[P.pX].context&&"outstream"!==e.mediaTypes[P.pX].context)return(0,a.H)("video.context is invalid. Only instream/outstream video is supported. Rejecting bid: ",e),!1}return!0},isValidPlacementId:function(e){return e.toString().match(/^[0-9]{10}$/)},buildRequests:function(e,t){var n=this;this.loadWhitelabelData(e[0]),this.propertyBag.buildRequestsStart=(new Date).getTime();var r=this.propertyBag.whitelabel.bidder,i=this.propertyBag.whitelabel.keyPrefix;if((0,a.PN)("buildRequests time: ".concat(this.propertyBag.buildRequestsStart," v ").concat(ns," validBidRequests"),JSON.parse(JSON.stringify(e)),"bidderRequest",JSON.parse(JSON.stringify(t))),this.blockTheRequest())return[];var o={publisherId:"",siteId:""};e.length>0&&(this.cookieSyncBag.userIdObject=Object.assign(this.cookieSyncBag.userIdObject,this.findAllUserIds(e[0])),this.cookieSyncBag.siteId=(0,s.Z)(e[0],"params.siteId"),this.cookieSyncBag.publisherId=(0,s.Z)(e[0],"params.publisherId"),o=e[0].params),(0,a.PN)("cookie sync bag",this.cookieSyncBag);var c=this.getWhitelabelConfigItem("ozone.singleRequest");c=!1!==c,(0,a.PN)("config ".concat(r,".singleRequest : "),c);var l={};(0,a.PN)("going to get ortb2 from bidder request...");var u=(0,s.Z)(t,"ortb2",null);(0,a.PN)("got fpd: ",u),u&&(0,s.Z)(u,"user")&&((0,a.PN)("added FPD user object"),l.user=u.user);var p=this.getGetParametersAsObject(),f=i+"testmode",h=p[f]||null;l.device={w:window.innerWidth,h:window.innerHeight};var m=this.getPlacementIdOverrideFromGetParam(),v=null,y=e.map((function(e){var t={},i=m||n.getPlacementId(e);t.id=e.bidId,t.tagid=i;var o=(0,a.en)((0,ee.nH)().page);t.secure="https"===o.protocol?1:0;var c,l,p=[];if(e.hasOwnProperty("mediaTypes")){if(e.mediaTypes.hasOwnProperty(P.Mk)&&(p=e.mediaTypes[P.Mk].sizes,(0,a.PN)("setting banner size from the mediaTypes.banner element for bidId "+t.id+": ",p)),e.mediaTypes.hasOwnProperty(P.pX)){if((0,a.PN)("openrtb 2.5 compliant video"),"object"==(0,bt.Z)(e.mediaTypes[P.pX])){var g=(0,s.Z)(e,"params.video",{});t.video=n.unpackVideoConfigIntoIABformat(e.mediaTypes[P.pX],g),t.video=n.addVideoDefaults(t.video,e.mediaTypes[P.pX],g)}var y=(c=t.video,(l=ls(c))?l[0]&&"object"===(0,bt.Z)(l[0])&&((0,a.PN)("getWidthAndHeightFromVideoObject found nested array inside playerSize.",l[0]),"number"!=typeof(l=l[0])[0]&&"string"!=typeof l[0])?((0,a.PN)("getWidthAndHeightFromVideoObject found non-number/string type inside the INNER array in playerSize. This is totally wrong - cannot continue.",l[0]),null):2!==l.length?((0,a.PN)("getWidthAndHeightFromVideoObject found playerSize with length of "+l.length+". This is totally wrong - cannot continue."),null):{w:l[0],h:l[1]}:null);(0,a.PN)("setting video object from the mediaTypes.video element: "+t.id+":",t.video,"wh=",y),y&&"object"===(0,bt.Z)(y)?(t.video.w=y.w,t.video.h=y.h,function(e){var t=ls(e);return t?t.length<1?null:t[0]&&"object"===(0,bt.Z)(t[0]):null}(t.video)?((0,a.PN)("setting obj.video.format to be an array of objects"),t.video.ext.format=[y]):((0,a.PN)("setting obj.video.format to be an object"),t.video.ext.format=y)):(0,a.yN)("cannot set w, h & format values for video; the config is not right")}e.mediaTypes.hasOwnProperty(P.B5)&&(t.native=e.mediaTypes[P.B5],(0,a.PN)("setting native object from the mediaTypes.native element: "+t.id+":",t.native)),e.hasOwnProperty("getFloor")?((0,a.PN)("This bidRequest object has property: getFloor"),t.floor=n.getFloorObjectForAuction(e),(0,a.PN)("obj.floor is : ",t.floor)):(0,a.PN)("This bidRequest object DOES NOT have property: getFloor")}else e.hasOwnProperty("sizes")?((0,a.PN)("no mediaTypes detected - will use the sizes array in the config root"),p=e.sizes):(0,a.PN)("no mediaTypes detected, no sizes array in the config root either. Cannot set sizes for banner type");if(p.length>0&&(t.banner={topframe:1,w:p[0][0]||0,h:p[0][1]||0,format:p.map((function(e){return{w:e[0],h:e[1]}}))}),t.placementId=i,d(t,"ext.prebid",{storedrequest:{id:i}}),t.ext[r]={},t.ext[r].adUnitCode=e.adUnitCode,t.ext[r].transactionId=e.transactionId,e.params.hasOwnProperty("customData")&&(t.ext[r].customData=e.params.customData),(0,a.PN)("obj.ext.".concat(r," is "),t.ext[r]),null!=h)if((0,a.PN)("setting isTestMode to ",h),t.ext[r].hasOwnProperty("customData"))for(var b=0;b<t.ext[r].customData.length;b++)t.ext[r].customData[b].targeting[f]=h;else t.ext[r].customData=[{settings:{},targeting:{}}],t.ext[r].customData[0].targeting[f]=h;return u&&(0,s.Z)(u,"site")&&((0,a.PN)("adding fpd.site"),(0,s.Z)(t,"ext."+r+".customData.0.targeting",!1)?t.ext[r].customData[0].targeting=Object.assign(t.ext[r].customData[0].targeting,u.site):d(t,"ext."+r+".customData.0.targeting",u.site)),!v&&(0,s.Z)(e,"schain")&&(v=e.schain),t})),b={};if(b[r]={},b[r][i+"_pb_v"]=ns,b[r][i+"_rw"]=m?1:0,e.length>0){var _=this.cookieSyncBag.userIdObject;_.hasOwnProperty("pubcid")&&(b[r].pubcid=_.pubcid)}b[r].pv=this.getPageId();var w=this.getWhitelabelConfigItem("ozone.oz_omp_floor");(0,a.PN)("".concat(i,"_omp_floor dollar value = "),w),"number"==typeof w?b[r][i+"_omp_floor"]=w:void 0!==w&&(0,a.H)("".concat(i,"_omp_floor is invalid - IF SET then this must be a number, representing dollar value eg. ").concat(i,"_omp_floor: 1.55. You have it set as a ")+(0,bt.Z)(w));var T=this.getWhitelabelConfigItem("ozone.oz_whitelist_adserver_keys"),I=(0,a.kJ)(T)&&T.length>0;b[r][i+"_kvp_rw"]=I?1:0,"ozone"!==r&&((0,a.PN)("setting aliases object"),b.prebid={aliases:{ozone:r}}),p.hasOwnProperty("ozf")&&(b[r].ozf="true"===p.ozf||"1"===p.ozf?1:0),p.hasOwnProperty("ozpf")&&(b[r].ozpf="true"===p.ozpf||"1"===p.ozpf?1:0),p.hasOwnProperty("ozrp")&&p.ozrp.match(/^[0-3]$/)&&(b[r].ozrp=parseInt(p.ozrp)),p.hasOwnProperty("ozip")&&p.ozip.match(/^\d+$/)&&(b[r].ozip=parseInt(p.ozip)),null!=this.propertyBag.endpointOverride&&(b[r].origin=this.propertyBag.endpointOverride);var S=(0,s.Z)(e,"0.userIdAsEids",[]);if(l.site={publisher:{id:o.publisherId},page:(0,ee.nH)().page,id:o.siteId},l.test=g.vc.getConfig("debug")?1:0,t&&t.gdprConsent){(0,a.PN)("ADDING GDPR info");var k=(0,s.Z)(t,"gdprConsent.apiVersion",1);l.regs={ext:{gdpr:t.gdprConsent.gdprApplies?1:0,apiVersion:k}},(0,s.Z)(l,"regs.ext.gdpr")?d(l,"user.ext.consent",t.gdprConsent.consentString):(0,a.PN)("**** Strange CMP info: bidderRequest.gdprConsent exists BUT bidderRequest.gdprConsent.gdprApplies is false. See bidderRequest logged above. ****")}else(0,a.PN)("WILL NOT ADD GDPR info; no bidderRequest.gdprConsent object");if(t&&t.uspConsent?((0,a.PN)("ADDING USP consent info"),d(l,"regs.ext.us_privacy",t.uspConsent)):(0,a.PN)("WILL NOT ADD USP consent info; no bidderRequest.uspConsent."),v&&((0,a.PN)("schain found"),d(l,"source.ext.schain",v)),!0===g.vc.getConfig("coppa")&&d(l,"regs.coppa",1),c){(0,a.PN)("buildRequests starting to generate response for a single request"),l.id=t.auctionId,l.auctionId=t.auctionId,l.imp=y,l.ext=b,d(l,"source.tid",t.auctionId),d(l,"user.ext.eids",S);var C={method:"POST",url:this.getAuctionUrl(),data:JSON.stringify(l),bidderRequest:t};return(0,a.PN)("buildRequests request data for single = ",JSON.parse(JSON.stringify(l))),this.propertyBag.buildRequestsEnd=(new Date).getTime(),(0,a.PN)("buildRequests going to return for single at time ".concat(this.propertyBag.buildRequestsEnd," (took ").concat(this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart,"ms): "),C),C}var E=y.map((function(e){(0,a.PN)("buildRequests starting to generate non-single response, working on imp : ",e);var i=Object.assign({},l);return e.ext[r].pageAuctionId=t.auctionId,i.id=e.ext[r].transactionId,i.auctionId=e.ext[r].transactionId,i.imp=[e],i.ext=b,d(i,"source.tid",e.ext[r].transactionId),d(i,"user.ext.eids",S),(0,a.PN)("buildRequests RequestSingle (for non-single) = ",i),{method:"POST",url:n.getAuctionUrl(),data:JSON.stringify(i),bidderRequest:t}}));return this.propertyBag.buildRequestsEnd=(new Date).getTime(),(0,a.PN)("buildRequests going to return for non-single at time ".concat(this.propertyBag.buildRequestsEnd," (took ").concat(this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart,"ms): "),E),E},getFloorObjectForAuction:function(e){var t={banner:(0,s.Z)(e,"mediaTypes.banner.sizes",null),video:(0,s.Z)(e,"mediaTypes.video.playerSize",null),native:(0,s.Z)(e,"mediaTypes.native.image.sizes",null)};(0,a.PN)("getFloorObjectForAuction mediaTypesSizes : ",t);var n={};return t.banner&&(n.banner=e.getFloor({mediaType:"banner",currency:"USD",size:t.banner})),t.video&&(n.video=e.getFloor({mediaType:"video",currency:"USD",size:t.video})),t.native&&(n.native=e.getFloor({mediaType:"native",currency:"USD",size:t.native})),(0,a.PN)("getFloorObjectForAuction returning : ",JSON.parse(JSON.stringify(n))),n},interpretResponse:function(e,t){var n=this;t&&t.bidderRequest&&t.bidderRequest.bids&&this.loadWhitelabelData(t.bidderRequest.bids[0]);var r=(new Date).getTime(),i=this.propertyBag.whitelabel.bidder,o=this.propertyBag.whitelabel.keyPrefix;if((0,a.PN)("interpretResponse time: ".concat(r," . Time between buildRequests done and interpretResponse start was ").concat(r-this.propertyBag.buildRequestsEnd,"ms")),(0,a.PN)("serverResponse, request",JSON.parse(JSON.stringify(e)),JSON.parse(JSON.stringify(t))),!(e=e.body||{}).hasOwnProperty("seatbid"))return[];if("object"!==(0,bt.Z)(e.seatbid))return[];var d=[],c=this.getWhitelabelConfigItem("ozone.enhancedAdserverTargeting");(0,a.PN)("enhancedAdserverTargeting",c),void 0===c&&(c=!0),(0,a.PN)("enhancedAdserverTargeting",c),e.seatbid=function(e){(0,a.PN)("injectAdIdsIntoAllBidResponses",e);for(var t=0;t<e.length;t++)for(var n=e[t],r=0;r<n.bid.length;r++)n.bid[r].adId="".concat(n.bid[r].impid,"-").concat(t,"-").concat(rs.propertyBag.whitelabel.keyPrefix,"-").concat(r);return e}(e.seatbid),e.seatbid=this.removeSingleBidderMultipleBids(e.seatbid);for(var l=this.getWhitelabelConfigItem("ozone.oz_omp_floor"),u="number"==typeof l,p=this.getWhitelabelConfigItem("ozone.oz_whitelist_adserver_keys"),f=(0,a.kJ)(p)&&p.length>0,h=0;h<e.seatbid.length;h++)for(var g=e.seatbid[h],m=function(r){var m=n.getBidRequestForBidId(g.bid[r].impid,t.bidderRequest.bids);(0,a.PN)("seatbid:".concat(h,", bid:").concat(r," Going to set default w h for seatbid/bidRequest"),g.bid[r],m);var v=os(m),y=v.defaultWidth,b=v.defaultHeight,_=cs(g.bid[r],y,b);_.meta={advertiserDomains:_.adomain||[]};var w=null,T=!1,I=(0,s.Z)(_,"ext.prebid.type");(0,a.PN)("this bid type is : ".concat(I),r);var S={};if(I===P.pX)if(T=!0,n.setBidMediaTypeIfNotExist(_,P.pX),"outstream"===(w=n.getVideoContextForBidId(_.bidId,t.bidderRequest.bids)))(0,a.PN)("going to set thisBid.mediaType = VIDEO & attach a renderer to OUTSTREAM video : ",r),_.renderer=us(_.bidId);else if((0,a.PN)("bid is not an outstream video, will set thisBid.mediaType = VIDEO and thisBid.vastUrl and not attach a renderer: ",r),_.vastUrl="https://".concat((0,s.Z)(_,"ext.prebid.targeting.hb_cache_host","missing_host")).concat((0,s.Z)(_,"ext.prebid.targeting.hb_cache_path","missing_path"),"?id=").concat((0,s.Z)(_,"ext.prebid.targeting.hb_cache_id","missing_id")),S.hb_cache_host=(0,s.Z)(_,"ext.prebid.targeting.hb_cache_host","no-host"),S.hb_cache_path=(0,s.Z)(_,"ext.prebid.targeting.hb_cache_path","no-path"),_.hasOwnProperty("videoCacheKey"))(0,a.PN)("videoCacheKey already exists on the bid object, will not add it");else{var k=(0,s.Z)(_,"ext.prebid.targeting.hb_uuid","no_hb_uuid");(0,a.PN)("Adding videoCacheKey: ".concat(k)),_.videoCacheKey=k}else n.setBidMediaTypeIfNotExist(_,P.Mk);if(c){var C=ss(_.bidId,e.seatbid);(0,a.PN)("Going to iterate allBidsForThisBidId",C),Object.keys(C).forEach((function(e,t,n){(0,a.PN)("adding adserverTargeting for ".concat(e," for bidId ").concat(_.bidId)),S[o+"_"+e]=e,S[o+"_"+e+"_crid"]=String(C[e].crid),S[o+"_"+e+"_adv"]=String(C[e].adomain),S[o+"_"+e+"_adId"]=String(C[e].adId),S[o+"_"+e+"_pb_r"]=ds(C[e].price,C[e].ext.prebid.type),C[e].hasOwnProperty("dealid")&&(S[o+"_"+e+"_dealid"]=String(C[e].dealid)),u&&(S[o+"_"+e+"_omp"]=C[e].price>=l?"1":"0"),T&&(S[o+"_"+e+"_vid"]=w);var r=(0,s.Z)(C[e],"ext.bidder.".concat(i,".floor"),null);null!=r&&(S[o+"_"+e+"_flr"]=r);var d=(0,s.Z)(C[e],"ext.bidder.".concat(i,".ruleId"),null);null!=d&&(S[o+"_"+e+"_rid"]=d),e.match(/^ozappnexus/)&&(S[o+"_"+e+"_sid"]=String(C[e].cid))}))}else f?(0,a.yN)("You have set a whitelist of adserver keys but this will be ignored because ".concat(i,".enhancedAdserverTargeting is set to false. No per-bid keys will be sent to adserver.")):(0,a.PN)("".concat(i,".enhancedAdserverTargeting is set to false, so no per-bid keys will be sent to adserver."));var E=as(_.bidId,e.seatbid),A=E.seat,x=E.bid;S[o+"_auc_id"]=String(t.bidderRequest.auctionId),S[o+"_winner"]=String(A),S[o+"_bid"]="true",S[o+"_cache_id"]=(0,s.Z)(_,"ext.prebid.targeting.hb_cache_id","no-id"),S[o+"_uuid"]=(0,s.Z)(_,"ext.prebid.targeting.hb_uuid","no-id"),c&&(S[o+"_imp_id"]=String(x.impid),S[o+"_pb_v"]=ns,S[o+"_pb"]=x.price,S[o+"_pb_r"]=ds(x.price,I),S[o+"_adId"]=String(x.adId),S[o+"_size"]="".concat(x.width,"x").concat(x.height)),f&&((0,a.PN)("Going to filter out adserver targeting keys not in the whitelist: ",p),Object.keys(S).forEach((function(e){-1===p.indexOf(e)&&delete S[e]}))),_.adserverTargeting=S,d.push(_)},v=0;v<g.bid.length;v++)m(v);var y=(new Date).getTime();return(0,a.PN)("interpretResponse going to return at time ".concat(y," (took ").concat(y-r,"ms) Time from buildRequests Start -> interpretRequests End = ").concat(y-this.propertyBag.buildRequestsStart,"ms")),(0,a.PN)("interpretResponse arrAllBids (serialised): ",JSON.parse(JSON.stringify(d))),d},setBidMediaTypeIfNotExist:function(e,t){e.hasOwnProperty("mediaType")?(0,a.PN)("found value for thisBid.mediaType: ".concat(e.mediaType)):((0,a.PN)("setting thisBid.mediaType = ".concat(t)),e.mediaType=t)},getWhitelabelConfigItem:function(e){if("ozone"===this.propertyBag.whitelabel.bidder)return g.vc.getConfig(e);var t=e.replace("ozone",this.propertyBag.whitelabel.bidder);return t=t.replace("oz_",this.propertyBag.whitelabel.keyPrefix+"_"),g.vc.getConfig(t)},removeSingleBidderMultipleBids:function(e){for(var t=[],n=0;n<e.length;n++){for(var r=e[n],i={seat:r.seat,bid:[]},o=[],s=0;s<r.bid.length;s++){var d=r.bid[s];if(!(0,a.r3)(o,d.impid)){o.push(d.impid);for(var c=s+1;c<r.bid.length;c++)r.bid[c].impid===d.impid&&r.bid[c].price>d.price&&(d=r.bid[c]);i.bid.push(d)}}t.push(i)}return t},getUserSyncs:function(e,t,n,r){if((0,a.PN)("getUserSyncs optionsType",e,"serverResponse",t,"gdprConsent",n,"usPrivacy",r,"cookieSyncBag",this.cookieSyncBag),!t||0===t.length)return[];if(e.iframeEnabled){var i=[];for(var o in g.vc.getConfig("debug")&&i.push("pbjs_debug=true"),i.push("gdpr="+((0,s.Z)(n,"gdprApplies",!1)?"1":"0")),i.push("gdpr_consent="+(0,s.Z)(n,"consentString","")),i.push("usp_consent="+(r||"")),this.cookieSyncBag.userIdObject)i.push(o+"="+this.cookieSyncBag.userIdObject[o]);i.push("publisherId="+this.cookieSyncBag.publisherId),i.push("siteId="+this.cookieSyncBag.siteId),i.push("cb="+Date.now()),i.push("bidder="+this.propertyBag.whitelabel.bidder);var d=i.join("&");return d.length>0&&(d="?"+d),(0,a.PN)("getUserSyncs going to return cookie sync url : "+this.getCookieSyncUrl()+d),[{type:"iframe",url:this.getCookieSyncUrl()+d}]}},getBidRequestForBidId:function(e,t){for(var n=0;n<t.length;n++)if(t[n].bidId===e)return t[n];return null},getVideoContextForBidId:function(e,t){var n=this.getBidRequestForBidId(e,t);return null!=n?(0,s.Z)(n,"mediaTypes.video.context","unknown"):null},findAllUserIds:function(e){var t={},n=["pubcid","tdid","idl_env","criteoId","lotamePanoramaId","fabrickId"];if(e.hasOwnProperty("userId")){for(var r in n){var i=n[r];e.userId.hasOwnProperty(i)&&("string"==typeof e.userId[i]?t[i]=e.userId[i]:"object"==(0,bt.Z)(e.userId[i])?((0,a.H)("WARNING: findAllUserIds had to use first key in user object to get value for bid.userId key: ".concat(i,". Prebid adapter should be updated.")),t[i]=e.userId[i][Object.keys(e.userId[i])[0]]):(0,a.H)("failed to get string key value for userId : ".concat(i)))}var o=(0,s.Z)(e.userId,"lipb.lipbid");o&&(t.lipb={lipbid:o});var d=(0,s.Z)(e.userId,"id5id.uid");d&&(t.id5id=d);var c=(0,s.Z)(e.userId,"parrableId.eid");c&&(t.parrableId=c);var l=(0,s.Z)(e.userId,"sharedid.id");l&&(t.sharedid=l)}if(!t.hasOwnProperty("pubcid")){var u=(0,s.Z)(e,"crumbs.pubcid");u&&(t.pubcid=u)}return t},getPlacementId:function(e){return e.params.placementId.toString()},getPlacementIdOverrideFromGetParam:function(){var e=this.propertyBag.whitelabel.keyPrefix,t=this.getGetParametersAsObject();if(t.hasOwnProperty(e+"storedrequest")){if(this.isValidPlacementId(t[e+"storedrequest"]))return(0,a.PN)("using GET ".concat(e,"storedrequest ")+t[e+"storedrequest"]+" to replace placementId"),t[e+"storedrequest"];(0,a.H)("GET ".concat(e,"storedrequest FAILED VALIDATION - will not use it"))}return null},getGetParametersAsObject:function(){var e=(0,a.en)((0,ee.nH)().page);return(0,a.PN)("getGetParametersAsObject found:",e.search),e.search},blockTheRequest:function(){var e=this.getWhitelabelConfigItem("ozone.oz_request");return"boolean"==typeof e&&!e&&((0,a.yN)("Will not allow auction : ".concat(this.propertyBag.whitelabel.keyPrefix,"_request is set to false")),!0)},getPageId:function(){if(null==this.propertyBag.pageId){for(var e="",t=20;t>0;t--)e+="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())];this.propertyBag.pageId=(new Date).getTime()+"_"+e}return this.propertyBag.pageId},unpackVideoConfigIntoIABformat:function(e,t){var n={ext:{}};return n=this._unpackVideoConfigIntoIABformat(n,e),this._unpackVideoConfigIntoIABformat(n,t)},_unpackVideoConfigIntoIABformat:function(e,t){var n=["mimes","minduration","maxduration","protocols","w","h","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype"],r=function(r){o=!1,n.forEach((function(n){n===r&&(e[r]=t[r],o=!0)})),o||(e.ext[r]=t[r])};for(var i in t){var o;r(i)}return t.hasOwnProperty("ext")&&"object"===(0,bt.Z)(t.ext)&&(t.hasOwnProperty("ext")?e.ext=(0,a.Ee)(e.ext,t.ext):e.ext=t.ext),e},addVideoDefaults:function(e,t,n){return e=this._addVideoDefaults(e,t,!1),this._addVideoDefaults(e,n,!0)},_addVideoDefaults:function(e,t,n){var r=(0,s.Z)(t,"context");"outstream"===r?e.placement=3:"instream"===r&&(e.placement=1);var i=(0,s.Z)(t,"skippable",null);return null==i?n&&!e.hasOwnProperty("skip")&&(e.skip=i?1:0):e.skip=i?1:0,e},getLoggableBidObject:function(e){var t={ad:e.ad,adId:e.adId,adUnitCode:e.adUnitCode,adm:e.adm,adomain:e.adomain,adserverTargeting:e.adserverTargeting,auctionId:e.auctionId,bidId:e.bidId,bidder:e.bidder,bidderCode:e.bidderCode,cpm:e.cpm,creativeId:e.creativeId,crid:e.crid,currency:e.currency,h:e.h,w:e.w,impid:e.impid,mediaType:e.mediaType,params:e.params,price:e.price,transactionId:e.transactionId,ttl:e.ttl};return e.hasOwnProperty("floorData")&&(t.floorData=e.floorData),t}};function is(e){return Array.isArray(e)&&Array.isArray(e[0])?e[0]:e}function os(e){if(!e)return(0,a.PN)("defaultSize received empty bid obj! going to return fixed default size"),{defaultHeight:250,defaultWidth:300};var t=e.sizes,n={};return n.defaultWidth=is(t)[0],n.defaultHeight=is(t)[1],n}function as(e,t){for(var n=null,r=null,i=0;i<t.length;i++)for(var o=t[i].bid,a=t[i].seat,s=0;s<o.length;s++)if(o[s].impid===e&&(null==n||n.price<o[s].price)){n=o[s],r=a;break}return{seat:r,bid:n}}function ss(e,t){for(var n={},r=0;r<t.length;r++)for(var i=t[r].bid,o=t[r].seat,a=0;a<i.length;a++)i[a].impid===e&&(n.hasOwnProperty(o)?n[o].price<i[a].price&&(n[o]=i[a]):n[o]=i[a]);return n}function ds(e,t){var n=g.vc.getConfig("mediaTypePriceGranularity.".concat(t)),r=g.vc.getConfig("customPriceBucket"),i=g.vc.getConfig("priceGranularity"),o=function(e,t,n,r){return"object"===(0,bt.Z)(t)?t:"custom"===n?r:""}(0,n,i,r),s=function(e,t,n){return"string"==typeof t?t:"object"===(0,bt.Z)(t)?"custom":"string"==typeof n?n:"auto"}(0,n,i);(0,a.PN)("getRoundedBid. price:",e,"mediaType:",t,"configkey:",s,"configObject:",o,"mediaTypeGranularity:",n,"strBuckets:",i);var d=(0,Ca.D)(e,o,g.vc.getConfig("currency.granularityMultiplier"));(0,a.PN)("priceStringsObj",d);var c={medium:"med",custom:"custom",high:"high",low:"low",dense:"dense"};if(c.hasOwnProperty(s)){var l=c[s];return(0,a.PN)("getRoundedBid: looking for priceStringsKey:",l),d[l]}return d.auto}function cs(e,t,n){return e.cpm=e.price,e.bidId=e.impid,e.requestId=e.impid,e.width=e.w||t,e.height=e.h||n,e.ad=e.adm,e.netRevenue=!0,e.creativeId=e.crid,e.currency="USD",e.ttl=300,e}function ls(e){(0,a.PN)("getPlayerSizeFromObject received object",e);var t=(0,s.Z)(e,"playerSize");return t||(t=(0,s.Z)(e,"ext.playerSize")),t?"object"!==(0,bt.Z)(t)?((0,a.H)("getPlayerSizeFromObject FAILED: playerSize is not an object/array",e),null):t:((0,a.H)("getPlayerSizeFromObject FAILED: no playerSize in video object or ext",e),null)}function us(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=window.ozoneVideo;(0,a.PN)("newRenderer going to set loaded to ".concat(n?"true":"false"));var r=h.Th.install({url:rs.getRendererUrl(),config:t,loaded:n,adUnitCode:e});try{r.setRender(ps)}catch(e){(0,a.H)("Prebid Error when calling setRender on renderer",r,e)}return(0,a.PN)("returning renderer object"),r}function ps(e){(0,a.PN)("outstreamRender called. Going to push the call to window.ozoneVideo.outstreamRender(bid) bid = (first static, then reference)"),(0,a.PN)(JSON.parse(JSON.stringify(rs.getLoggableBidObject(e)))),e.renderer.push((function(){(0,a.PN)("Going to execute window.ozoneVideo.outstreamRender"),window.ozoneVideo.outstreamRender(e)}))}(0,Xe.dX)(rs),(0,a.PN)("*BidAdapter ".concat(ns," was loaded")),(0,o.z)("ozoneBidAdapter");var fs="permutive",hs=(0,a.qp)("[PermutiveRTD]"),gs="p_standard",ms="permutive",vs="p_standard_aud",ys=(0,J.df)({moduleType:si.XG,moduleName:fs});function bs(e){return(0,a.PO)(e)?{params:e}:{}}var _s={};function ws(e){var t=function(){try{return bs(window.permutive.addons.prebid.getPermutiveRtdConfig())}catch(e){return null}}()||_s;return(0,a.Ee)({waitForIt:!1,params:{maxSegs:500,acBidders:[],overwrites:{}}},t,e)}function Ts(e,t,n){var r=e&&e.adUnits||(0,o.R)().adUnits,i={deepSetValue:d,deepAccess:s.Z,isFn:a.LQ,mergeDeep:a.Ee},c={appnexusAst:"appnexus"};r&&r.forEach((function(e){e.bids.forEach((function(e){var r=e.bidder;void 0!==c[r]&&(r=c[r]);var o=function(e,t){var n=(0,s.Z)(e,"params.acBidders")||[];return(0,f.q9)(n,t)}(t,r),l=function(e,t){var n=(0,s.Z)(e,"params.overwrites.".concat(t));return n&&(0,a.LQ)(n)?n:null}(t,r),u=function(e){var t={ozone:function(e,t,n){return function(e,t){return t&&e.ac&&e.ac.length||e.ssp&&e.ssp.cohorts&&e.ssp.cohorts.length}(t,n)&&d(e,"params.customData.0.targeting.p_standard",function(e,t){var n,r,i,o=t&&null!==(n=e.ac)&&void 0!==n?n:[],a=null!==(r=null==e||null===(i=e.ssp)||void 0===i?void 0:i.cohorts)&&void 0!==r?r:[];return(0,A.Z)(new Set([].concat((0,A.Z)(o),(0,A.Z)(a))))}(t,n)),e}};return t[e]||function(e){return e}}(r);l?l(e,n,o,i,u):u&&u(e,n,o)}))}))}function Is(e){try{e()}catch(e){(0,a.H)(e)}}function Ss(e,t){try{return JSON.parse(ys.getDataFromLocalStorage(e))||t}catch(e){return t}}var ks="_unknown_",Cs={iab:function(e,t){return{name:e.name,ext:{segtax:t.segtax},segment:(e.segment||[]).map((function(e){return{id:(n=e.id,r=t.iabIds,r[n]||ks)};var n,r})).filter((function(e){return e.id!==ks}))}}};function Es(e,t){var n=function(e){var t=Ss("_psegs",[]).map(Number).filter((function(e){return e>=1e6})).map(String),n=Ss("_ppam",[]),r=Ss("_pcrprs",[]),i={ac:[].concat((0,A.Z)(r),(0,A.Z)(n),(0,A.Z)(t)),ix:Ss("_pindexs",[]),rubicon:Ss("_prubicons",[]),appnexus:Ss("_papns",[]),gam:Ss("_pdfps",[]),ssp:Ss("_pssps",{cohorts:[],ssps:[]})};for(var o in i)"ssp"===o?i[o].cohorts&&Array.isArray(i[o].cohorts)&&(i[o].cohorts=i[o].cohorts.slice(0,e)):i[o]=i[o].slice(0,e);return i}((0,s.Z)(t,"params.maxSegs"));Is((function(){Ts(e,t,n)})),Is((function(){var o;!function(e,t,n){var o,c,l,u,p=(0,s.Z)(t,"params.acBidders"),f=(0,s.Z)(t,"params.maxSegs"),h=(0,s.Z)(t,"params.transformations")||[],g=null!==(o=null==n||null===(c=n.ssp)||void 0===c?void 0:c.ssps)&&void 0!==o?o:[],m=null!==(l=null==n||null===(u=n.ssp)||void 0===u?void 0:u.cohorts)&&void 0!==l?l:[];new Set([].concat((0,A.Z)(p),(0,A.Z)(g))).forEach((function(t){var o={ortb2:e[t]||{}},c=[];p.indexOf(t)>-1&&(c=n.ac),g.indexOf(t)>-1&&(c=(0,A.Z)(new Set([].concat((0,A.Z)(c),(0,A.Z)(m)))).slice(0,f));var l=function(e,t,n,o,c,l){var u;hs.logInfo("Current ortb2 config",{bidder:e,config:t});var p=(0,s.Z)(l,e)||[],f={name:"permutive.com",segment:n.map((function(e){return{id:e}}))},h=c.filter((function(e){var t=e.id;return Cs.hasOwnProperty(t)})).map((function(e){var t=e.id,n=e.config;return Cs[t](f,n)})),g={name:ms,segment:p.map((function(e){return{id:e}}))},m=(0,a.Ee)({},t),v=((0,s.Z)(m,"ortb2.user.data")||[]).filter((function(e){return e.name!==f.name&&e.name!==g.name})).concat(f,h,g);hs.logInfo("Updating ortb2.user.data",{bidder:e,user_data:v}),d(m,"ortb2.user.data",v);var y=(0,s.Z)(m,"ortb2.user.keywords"),b=(u={},(0,i.Z)(u,gs,n),(0,i.Z)(u,vs,o),(0,i.Z)(u,ms,p),u),_=Object.entries(b).flatMap((function(e){var t=(0,r.Z)(e,2),n=t[0];return t[1].map((function(e){return"".concat(n,"=").concat(e)}))})),w=[y].concat((0,A.Z)(_)).filter(Boolean).join(",");return hs.logInfo("Updating ortb2.user.keywords",{bidder:e,keywords:w}),d(m,"ortb2.user.keywords",w),n.length>0&&(d(m,"ortb2.user.ext.data.".concat(gs),n),hs.logInfo('Extending ortb2.user.ext.data with "'.concat(gs,'"'),n)),p.length>0&&(d(m,"ortb2.user.ext.data.".concat(ms),p.map(String)),hs.logInfo('Extending ortb2.user.ext.data with "'.concat(ms,'"'),p)),hs.logInfo("Updated ortb2 config",{bidder:e,config:m}),m}(t,o,c,m,h,n);e[t]=l.ortb2}))}(null===(o=e.ortb2Fragments)||void 0===o?void 0:o.bidder,t,n)}))}var As=!1,Ps={name:fs,getBidRequestData:function(e,t,n){var r=function(){hs.logInfo("Request data updated"),t()},i=ws(n);Es(e,i),Is((function(){if(As||!i.waitForIt||void 0===window.permutive||"function"!=typeof window.permutive.ready)return r();window.permutive.ready((function(){hs.logInfo("SDK is realtime, updating cohorts"),As=!0,Es(e,ws(n)),r()}),"realtime"),hs.logInfo("Registered cohort update when SDK is realtime")}))},init:function(e,t){var n;return n=(0,a.dj)(ys.getDataFromLocalStorage("permutive-prebid-rtd")),_s=bs(n),!0}};(0,x.Bx)("realTimeData",Ps),(0,o.z)("permutiveRtdProvider");var xs,Os,Ds=n(9484),Rs={appnexus:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid.adnxs.com/pbs/v1/openrtb2/auction",noP1Consent:"https://prebid.adnxs-simple.com/pbs/v1/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid.adnxs.com/pbs/v1/cookie_sync",noP1Consent:"https://prebid.adnxs-simple.com/pbs/v1/cookie_sync"},timeout:1e3},appnexuspsp:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://ib.adnxs.com/openrtb2/prebid",noP1Consent:"https://ib.adnxs-simple.com/openrtb2/prebid"},timeout:1e3},rubicon:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction",noP1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid-server.rubiconproject.com/cookie_sync",noP1Consent:"https://prebid-server.rubiconproject.com/cookie_sync"},timeout:500},openx:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid.openx.net/openrtb2/auction",noP1Consent:"https://prebid.openx.net/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid.openx.net/cookie_sync",noP1Consent:"https://prebid.openx.net/cookie_sync"},timeout:1e3}},Ms=(xs={},(0,i.Z)(xs,P.Mk,"banner"),(0,i.Z)(xs,P.B5,"native"),(0,i.Z)(xs,P.pX,"video"),xs);function Ns(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.adUnit,o=r.bidderRequests,a=r.index,s=void 0===a?p.K.index:a,c=r.bidderRegistry,l=void 0===c?Y.ZP.bidderRegistry:c,u=t.params,f=l[t.bidder];f&&f.getSpec().transformBidParams&&(i=i||s.getAdUnit(t),o=o||[n.bidderRequest],u=f.getSpec().transformBidParams(u,!0,i,o)),u&&d(e,"ext.prebid.bidder.".concat(t.bidder),u)}var Us,Ls=(Os={},(0,i.Z)(Os,Wn,{extPrebid:{fn:function(e,t){var n;d(e,"ext.prebid",(0,a.Ee)({auctiontimestamp:t.auctionStart,targeting:{includewinners:!0,includebidderkeys:!1}},null===(n=e.ext)||void 0===n?void 0:n.prebid)),g.vc.getConfig("debug")&&(e.ext.prebid.debug=!0)}},extPrebidChannel:{fn:function(e){var t,n;d(e,"ext.prebid.channel",Object.assign({name:"pbjs",version:(0,o.R)().version},null===(t=e.ext)||void 0===t||null===(n=t.prebid)||void 0===n?void 0:n.channel))}},extPrebidAliases:{fn:function(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).am,i=void 0===r?Y.ZP:r;if(i.aliasRegistry[t.bidderCode]){var o=i.bidderRegistry[t.bidderCode];o&&o.getSpec().skipPbsAliasing||d(e,"ext.prebid.aliases.".concat(t.bidderCode),i.aliasRegistry[t.bidderCode])}}}}),(0,i.Z)(Os,Hn,{params:{fn:Ns},adUnitCode:{fn:function(e,t){var n=t.adUnitCode;n&&d(e,"ext.prebid.adunitcode",n)}}}),(0,i.Z)(Os,Zn,{mediaType:{fn:function(e,t,n){var r,i,o=n.mediaType;o||(o=Vi.hasOwnProperty(t.mtype)?Vi[t.mtype]:null===(r=t.ext)||void 0===r||null===(i=r.prebid)||void 0===i?void 0:i.type,Ms.hasOwnProperty(o)||(o=P.Mk)),e.mediaType=o},priority:99},videoCache:{fn:function(e,t){if(e.mediaType===P.pX){var n=(0,s.Z)(t,"ext.prebid.cache.vastXml")||{},r=n.cacheId,i=n.url;if(!r||!i){var o=(0,s.Z)(t,"ext.prebid.targeting")||{},a=o.hb_uuid,d=o.hb_cache_host,c=o.hb_cache_path;a&&d&&c&&(r=a,i="https://".concat(d).concat(c,"?uuid=").concat(a))}r&&i&&Object.assign(e,{videoCacheKey:r,vastUrl:i})}},priority:-10},bidderCode:{fn:function(e,t,n){var r;e.bidderCode=n.seatbid.seat,e.adapterCode=(0,s.Z)(t,"ext.prebid.meta.adaptercode")||(null===(r=n.bidRequest)||void 0===r?void 0:r.bidder)||e.bidderCode}},pbsBidId:{fn:function(e,t){var n=(0,s.Z)(t,"ext.prebid.bidid");(0,a.d8)(n)&&(e.pbsBidId=n)}},adserverTargeting:{fn:function(e,t){var n=(0,s.Z)(t,"ext.prebid.targeting");(0,a.PO)(n)&&(e.adserverTargeting=n)}},extPrebidMeta:{fn:function(e,t){e.meta=(0,a.Ee)({},(0,s.Z)(t,"ext.prebid.meta"),e.meta)}},pbsWurl:{fn:function(e,t){var n=(0,s.Z)(t,"ext.prebid.events.win");(0,a.d8)(n)&&(e.pbsWurl=n)}}}),(0,i.Z)(Os,$n,{serverSideStats:{fn:function(e,t,n){Object.entries({errors:"serverErrors",responsetimemillis:"serverResponseTimeMs"}).forEach((function(e){var i=(0,r.Z)(e,2),o=i[0],a=i[1],d=(0,s.Z)(t,"ext.".concat(o,".").concat(n.bidderRequest.bidderCode));d&&(n.bidderRequest[a]=d,n.bidRequests.forEach((function(e){return e[a]=d})))}))}}}),Os),js=(0,a.HP)((function(){return Wi(Zi(),Ls,Qn(Kn))}));function Bs(e,t,n){if(t===n)return e;var r=e;if("function"==typeof(0,o.R)().convertCurrency)try{r=(0,o.R)().convertCurrency(e,t,n)}catch(e){}return r}function qs(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Fs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fs(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Fs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vs(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ws,Hs,Zs=new Set(["bidderCode","bidderRequestId","uniquePbsTid","bids","timeout"]),$s=Hi({processors:js,context:{netRevenue:!0},imp:function(e,t,n){Object.assign(n,t.pbsData);var r=e(t,n);if((t.bids||[]).forEach((function(e){e.ortb2Imp&&Object.keys(e.ortb2Imp).length>0&&d(r,"ext.prebid.imp.".concat(e.bidder),e.ortb2Imp)})),Object.values(Ms).some((function(e){return r[e]})))return r.secure=n.s2sBidRequest.s2sConfig.secure,r},request:function(e,t,n,r){if(t.length){var i=r.s2sBidRequest,o=r.requestedBidders,s=r.eidPermissions,c=e(t,n,r);return c.tmax=i.s2sConfig.timeout,d(c,"source.tid",n.auctionId),[c.app,c.dooh,c.site].forEach((function(e){var t;!e||null!==(t=e.publisher)&&void 0!==t&&t.id||d(e,"publisher.id",i.s2sConfig.accountId)})),(0,a.kJ)(s)&&s.length>0&&(o&&(0,a.kJ)(o)&&(s=s.map((function(e){return zs(zs({},e),{},{bidders:e.bidders.filter((function(e){return o.includes(e)}))})}))),d(c,"ext.prebid.data.eidpermissions",s)),c}(0,a.H)("Request to Prebid Server rejected due to invalid media type(s) in adUnit.")},bidResponse:function(e,t,n){var r,i,o=n.actualBidRequests.get(n.seatbid.seat);null==o&&(o=n.actualBidRequests.get(null)),o&&Object.assign(n,{bidRequest:o,bidderRequest:n.actualBidderRequests.find((function(e){return e.bidderCode===o.bidder}))});var a=e(t,n);a.requestBidder=null===(r=o)||void 0===r?void 0:r.bidder,null!==(i=a.native)&&void 0!==i&&i.ortb&&(a.adm=a.native.ortb),a.requestTimestamp=n.requestTimestamp;var s=0!==t.price?u.Q_.Q:u.Q_.H;return{bid:Object.assign((0,z.m)(s,{src:u.os.YZ,bidId:o?o.bidId||o.bid_Id:null,transactionId:n.adUnit.transactionId,auctionId:n.bidderRequest.auctionId}),a),adUnit:n.adUnit.code}},overrides:(Us={},(0,i.Z)(Us,Hn,{id:function(e,t,n,r){t.id=r.impId},params:function(e,t,n,r){var i,o=r.s2sBidRequest.s2sConfig.adapterOptions,a=qs(r.actualBidRequests.values());try{for(a.s();!(i=a.n()).done;){var s=i.value;Ns(t,s,r,r),o&&o[s.bidder]&&Object.assign(t.ext.prebid.bidder[s.bidder],o[s.bidder])}}catch(e){a.e(e)}finally{a.f()}},bidfloor:function(e,t,n,r){var i,o,a=qs(r.actualBidRequests.values());try{for(a.s();!(o=a.n()).done;){var s=o.value,d={};if(e(d,s,r),null==d.bidfloorcur||null==d.bidfloor){i=null;break}if(null==i)i=d;else{var c=Bs(d.bidfloor,d.bidfloorcur,i.bidfloorcur);null!=c&&c<i.bidfloor&&(i=d)}}}catch(e){a.e(e)}finally{a.f()}null!=i&&Object.assign(t,i)}}),(0,i.Z)(Us,Wn,{fpd:function(e,t,n,i){var o,s,c;(0,a.Ee)(t,null===(o=i.s2sBidRequest.ortb2Fragments)||void 0===o?void 0:o.global),i.s2sBidRequest.s2sConfig.extPrebid&&"object"===(0,bt.Z)(i.s2sBidRequest.s2sConfig.extPrebid)&&d(t,"ext.prebid",(0,a.Ee)((null===(c=t.ext)||void 0===c?void 0:c.prebid)||{},i.s2sBidRequest.s2sConfig.extPrebid));var l=Object.entries((null===(s=i.s2sBidRequest.ortb2Fragments)||void 0===s?void 0:s.bidder)||{}).map((function(e){var t=(0,r.Z)(e,2);return{bidders:[t[0]],config:{ortb2:t[1]}}}));l.length&&d(t,"ext.prebid.bidderconfig",l)},extPrebidAliases:function(e,t,n,r){r.actualBidderRequests.forEach((function(n){return e(t,n,r)}))},sourceExtSchain:function(e,t,n,r){var i,o=(0,s.Z)(t,"ext.prebid.schains")||[],a=new Set(o.flatMap((function(e){return e.bidders})));o=Object.values(o.concat(r.actualBidderRequests.filter((function(e){return!a.has(e.bidderCode)})).map((function(e){return{bidders:[e.bidderCode],schain:(0,s.Z)(e,"bids.0.schain")}}))).filter((function(e){var t=e.bidders,n=e.schain;return(null==t?void 0:t.length)>0&&n})).reduce((function(e,t){var n=t.bidders,r=t.schain,o=JSON.stringify(r);return e.hasOwnProperty(o)||(e[o]={bidders:new Set,schain:r}),n.forEach((function(t){return e[o].bidders.add(t)})),(null==i||e[o].bidders.size>i.bidders.size)&&(i=e[o]),e}),{})).map((function(e){var t=e.bidders,n=e.schain;return{bidders:Array.from(t),schain:n}})),null!=i&&d(t,"source.ext.schain",i.schain),o.length&&d(t,"ext.prebid.schains",o)}}),(0,i.Z)(Us,$n,{serverSideStats:function(e,t,n,r){r.actualBidderRequests.forEach((function(i){return e(t,n,zs(zs({},r),{},{bidderRequest:i,bidRequests:i.bids}))}))},fledgeAuctionConfigs:function(e,t,n,r){var i=Object.values(r.impContext).flatMap((function(e){return(e.fledgeConfigs||[]).map((function(t){return{adUnitCode:e.adUnit.code,config:t.config}}))}));i.length>0&&(t.fledgeAuctionConfigs=i)}}),Us)}),Gs=g.vc.getConfig,Ks=u.os.YZ,Xs=0,Js={bidders:Object.freeze([]),timeout:1e3,syncTimeout:1e3,maxBids:1,adapter:"prebidServer",allowUnknownBidderCodes:!1,adapterOptions:{},syncUrlModifier:{},ortbNative:{context:1,plcmttype:1,eventtrackers:[{event:1,methods:[1]}]}};function Ys(e,t){if(0!==e.length){var n=e.shift();n.no_cookie?function(e,t,n,r,i){i.syncUrlModifier&&"function"==typeof i.syncUrlModifier[n]&&(t=i.syncUrlModifier[n](e,t,n)),function(e,t,n,r,i){t?"image"===e||"redirect"===e?((0,a.ji)('Invoking image pixel user sync for bidder: "'.concat(n,'"')),(0,a.hq)(t,r,i)):"iframe"===e?((0,a.ji)('Invoking iframe user sync for bidder: "'.concat(n,'"')),(0,a.Vs)(t,r,i)):((0,a.H)('User sync type "'.concat(e,'" not supported for bidder: "').concat(n,'"')),r()):((0,a.H)('No sync url for bidder "'.concat(n,'": ').concat(t)),r())}(e,t,n,r,i.syncTimeout)}(n.usersync.type,n.usersync.url,n.bidder,a.ak.call(Ys,null,e,t),t):Ys(e,t)}}g.vc.setDefaults({s2sConfig:Js}),Gs("s2sConfig",(function(e){return function(e){if(e){var t=Array.isArray(e)?e:[e],n=[];return t.every((function(t,r,i){!function(e){["endpoint","syncEndpoint"].forEach((function(t){if((0,a.d8)(e[t])){var n=e[t];e[t]={p1Consent:n,noP1Consent:n}}!(0,a.PO)(e[t])||e[t].p1Consent&&e[t].noP1Consent||["p1Consent","noP1Consent"].forEach((function(n){e[t][n]||(0,a.yN)("s2sConfig.".concat(t,".").concat(n," not defined.  PBS request will be skipped in some P1 scenarios."))}))}))}(e);var o=function(e){if(e.defaultVendor){var t=e.defaultVendor,n=Object.keys(e);if(!Rs[t])return(0,a.H)("Incorrect or unavailable prebid server default vendor option: "+t),!1;Object.keys(Rs[t]).forEach((function(r){Js[r]!==e[r]&&(0,f.q9)(n,r)||(e[r]=Rs[t][r])}))}return e.enabled="boolean"==typeof e.enabled&&e.enabled}(t);if(!1!==o){var s=function(e){var t=Object.keys(e);if(["accountId","endpoint"].filter((function(e){return!(0,f.q9)(t,e)&&((0,a.H)(e+" missing in server to server config"),!0)})).length>0)return!1}(t);if(!1!==s)return Array.isArray(t.bidders)&&(i[r].bidders=t.bidders.filter((function(e){return-1===n.indexOf(e)&&(n.push(e),!0)}))),!0}return(0,a.yN)("prebidServer: s2s config is disabled"),!1}))?Ws=t:void 0}}(e.s2sConfig)}));var Qs={};function ed(e){var t,n,r=function(e,t){if([e,t].every(a.d8))return Qs["".concat(e).concat(t)]}(e.auctionId,e.adId);(0,a.d8)(r)&&((0,a.ji)('Invoking image pixel for wurl on BID_WIN: "'.concat(r,'"')),(0,a.hq)(r),[t=e.auctionId,n=e.adId].every(a.d8)&&(Qs["".concat(t).concat(n)]=void 0))}function td(e,t){return(0,an.h)(t)?e.p1Consent:e.noP1Consent}function nd(e){var t,n,r;return Array.isArray(e)&&e.length>0&&(t=e[0].gdprConsent,n=e[0].uspConsent,r=e[0].gppConsent),{gdprConsent:t,uspConsent:n,gppConsent:r}}var rd=(0,x.z3)("sync",(function(e,t,n,i){var o=i.onResponse,s=i.onError,d=i.onBid,c=i.onFledge,l=nd(t).gdprConsent,u=(0,a.I8)(e.ad_units),p=u.map((function(e){return e.bids.map((function(e){return e.bidder})).filter(a.tT)})).reduce(a.xH,[]).filter(a.tT),h=e.metrics.measureTime("buildRequests",(function(){return function(e,t,n,i,o){var s=(0,a.AB)(),d=new Set,c=[];n.forEach((function(e){var n=new Map;e.bids.forEach((function(r){null!=r.mediaTypes&&(0,a.yN)("Prebid Server adapter does not (yet) support bidder-specific mediaTypes for the same adUnit. Size mapping configuration will be ignored for adUnit: ".concat(e.code,", bidder: ").concat(r.bidder)),n.set(r.bidder,(0,a.zE)(r.bid_id,t))}));for(var r=e.code,i=1;d.has(r);)i++,r="".concat(e.code,"-").concat(i);d.add(r),c.push(zs(zs(zs({},e),{},{adUnitCode:e.code},(0,a.iG)(n.values().next().value||{},["userId","userIdAsEids","schain"])),{},{pbsData:{impId:r,actualBidRequests:n,adUnit:e}}))}));var l=zs(zs({},Object.fromEntries(Object.entries(t[0]).filter((function(e){var t=(0,r.Z)(e,1)[0];return!Zs.has(t)})))),{},{fledgeEnabled:t.some((function(e){return e.fledgeEnabled}))});return $s.toORTB({bidderRequest:l,bidRequests:c,context:{currency:g.vc.getConfig("currency.adServerCurrency")||"USD",ttl:e.s2sConfig.defaultTtl||60,requestTimestamp:s,s2sBidRequest:e,requestedBidders:i,actualBidderRequests:t,eidPermissions:o,nativeRequest:e.s2sConfig.ortbNative}})}(e,t,u,p,Hs)})),m=h&&JSON.stringify(h);(0,a.PN)("BidRequest: "+m);var v=td(e.s2sConfig.endpoint,l);if(h&&m&&v){var y=e.metrics.startTiming("net");n(v,{success:function(t){var n;y();try{n=JSON.parse(t);var r=e.metrics.measureTime("interpretResponse",(function(){return function(e,t){return $s.fromORTB({response:e,request:t})}(n,h)})),i=r.bids,s=r.fledgeAuctionConfigs;i.forEach(d),s&&s.forEach(c)}catch(e){(0,a.H)(e)}!n||n.status&&(0,f.q9)(n.status,"Error")?((0,a.H)("error parsing response: ",n?n.status:"not valid JSON"),o(!1,p)):o(!0,p,n)},error:function(){y(),s.apply(this,arguments)}},m,{contentType:"text/plain",withCredentials:!0})}else(0,a.H)("PBS request not made.  Check endpoints.")}),"processPBSRequest");function id(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function od(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?id(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):id(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,a.EE)().setEidPermissions=function(e){Hs=e},Y.ZP.registerBidAdapter(new function(){var e=new Ds.Z("prebidServer");return e.callBids=function(e,t,n,r,i){var o=e.metrics=(0,Q.Bf)((0,s.Z)(t,"0.metrics")).newMetrics().renameWith((function(t){return["adapter.s2s.".concat(t),"adapters.s2s.".concat(e.s2sConfig.defaultVendor,".").concat(t)]}));r=o.startTiming("total").stopBefore(r),t.forEach((function(e){return(0,Q.Bf)(e.metrics).join(o,{continuePropagation:!1})}));var d=nd(t),l=d.gdprConsent,p=d.uspConsent,f=d.gppConsent;Array.isArray(Ws)&&(e.s2sConfig&&e.s2sConfig.syncEndpoint&&td(e.s2sConfig.syncEndpoint,l)&&function(e,t,n,r,i){if(Ws.length!==Xs){Xs++;var o={},s=Gs("userSync.filterSettings");if(s){var d=s.all,c=s.iframe||d,l=s.image||d;c&&(o=Object.assign({iframe:c},o)),l&&(o=Object.assign({image:l},o))}var u={uuid:(0,a.DO)(),bidders:e,account:i.accountId,filterSettings:o},p=i.userSyncLimit;(0,a.hj)(p)&&p>0&&(u.limit=p),t&&(u.gdpr=t.gdprApplies?1:0,!1!==t.gdprApplies&&(u.gdpr_consent=t.consentString)),n&&(u.us_privacy=n),r&&(u.gpp_sid=r.applicableSections,u.gpp=r.gppString),"boolean"==typeof i.coopSync&&(u.coopSync=i.coopSync);var f=JSON.stringify(u);(0,mt.h)(td(i.syncEndpoint,t),(function(e){try{Ys((e=JSON.parse(e)).bidder_status,i)}catch(e){(0,a.H)(e)}}),f,{contentType:"text/plain",withCredentials:!0})}}(e.s2sConfig.bidders.map((function(e){return Y.ZP.aliasRegistry[e]||e})).filter((function(e,t,n){return n.indexOf(e)===t})),l,p,f,e.s2sConfig),rd(e,t,i,{onResponse:function(n,i,o){var s,d;n&&t.forEach((function(e){return c.j8(u.FP.BIDDER_DONE,e)})),function(e,t){var n,r;return(null==e||null===(n=e.extPrebid)||void 0===n?void 0:n.returnallbidstatus)&&(null==t||null===(r=t.ext)||void 0===r?void 0:r.seatnonbid)}(e.s2sConfig,o)&&(s=o.ext.seatnonbid,d=t[0].auctionId,c.j8(u.FP.SEAT_NON_BID,{seatnonbid:s,auctionId:d})),r(),function(e,t,n,r){e.forEach((function(e){var i=Y.ZP.getBidAdapter(e);i&&i.registerSyncs&&g.vc.runWithBidder(e,a.ak.call(i.registerSyncs,i,[],t,n,r))}))}(i,l,p,f)},onError:r,onBid:function(t){var r,i,o,s=t.adUnit,d=t.bid,c=d.metrics=e.metrics.fork().renameWith();c.checkpoint("addBidResponse"),null!=d.requestId&&null!=d.requestBidder||e.s2sConfig.allowUnknownBidderCodes?c.measureTime("addBidResponse.validate",(function(){return(0,Xe.JY)(s,d)}))?(n(s,d),d.pbsWurl&&(r=d.auctionId,i=d.adId,o=d.pbsWurl,[r,i].every(a.d8)&&(Qs["".concat(r).concat(i)]=o))):n.reject(s,d,u.Gw.UI):((0,a.yN)("PBS adapter received bid from unknown bidder (".concat(d.bidder,"), but 's2sConfig.allowUnknownBidderCodes' is not set. Ignoring bid.")),n.reject(s,d,u.Gw.Dg))},onFledge:function(e){var t=e.adUnitCode,n=e.config;(0,Xe.BF)(t,n)}}))},c.on(u.FP.BID_WON,ed),Object.assign(this,{callBids:e.callBids,setBidderCode:e.setBidderCode,type:Ks})},"prebidServer"),(0,o.z)("prebidServerBidAdapter");var ad="pubmatic",sd="PubMatic: ",dd="USD",cd=void 0,ld="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),ud="Video.Placement param missing",pd={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},fd={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",ARRAY:"array",OBJECT:"object"},hd={mimes:fd.ARRAY,minduration:fd.NUMBER,maxduration:fd.NUMBER,startdelay:fd.NUMBER,playbackmethod:fd.ARRAY,api:fd.ARRAY,protocols:fd.ARRAY,w:fd.NUMBER,h:fd.NUMBER,battr:fd.ARRAY,linearity:fd.NUMBER,placement:fd.NUMBER,minbitrate:fd.NUMBER,maxbitrate:fd.NUMBER,skip:fd.NUMBER},gd={ICON:1,IMAGE:3},md={1:"PMP",5:"PREF",6:"PMPG"},vd={bootstrapPlayer:function(e){var t={code:e.adUnitCode};if(e.vastXml?t.vastXml=e.vastXml:e.vastUrl&&(t.vastUrl=e.vastUrl),e.vastXml||e.vastUrl){for(var n,r=vd.getRendererId("pubmatic",e.rendererCode),i=document.getElementById(e.adUnitCode),o=0;o<window.bluebillywig.renderers.length;o++)if(window.bluebillywig.renderers[o]._id===r){n=window.bluebillywig.renderers[o];break}n?n.bootstrap(t,i):(0,a.yN)("".concat(sd,": Couldn't find a renderer with ").concat(r))}else(0,a.yN)("".concat(sd,": No vastXml or vastUrl on bid, bailing..."))},newRenderer:function(e,t){var n=ld.replace("$RENDERER",e),r=h.Th.install({url:n,loaded:!1,adUnitCode:t});try{r.setRender(vd.outstreamRender)}catch(e){(0,a.yN)("".concat(sd,": Error tying to setRender on renderer"),e)}return r},outstreamRender:function(e){e.renderer.push((function(){vd.bootstrapPlayer(e)}))},getRendererId:function(e,t){return"".concat(e,"-").concat(t)}},yd=[P.Mk,P.pX,P.B5],bd=0,_d=!1,wd=["pubmatic"],Td=["all"];function Id(e,t){if(!(0,a.d8)(t))return t&&(0,a.yN)(sd+"Ignoring param key: "+e+", expects string-value, found "+(0,bt.Z)(t)),cd;switch(e){case"pmzoneid":return t.split(",").slice(0,50).map((function(e){return e.trim()})).join();case"kadfloor":case"lat":case"lon":return parseFloat(t)||cd;case"yob":return parseInt(t)||cd;default:return t}}function Sd(e,t,n){var r,i="Ignoring param key: "+e+", expects "+n+", found "+(0,bt.Z)(t);switch(n){case fd.BOOLEAN:r=a.jn;break;case fd.NUMBER:r=a.hj;break;case fd.STRING:r=a.d8;break;case fd.ARRAY:r=a.kJ}return r(t)?t:((0,a.yN)(sd+i),cd)}var kd={desc:"desc",desc2:"desc2",body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl",saleprice:"saleprice",displayurl:"displayurl"},Cd=u.oF,Ed=u.zA,Ad=u.FY,Pd=u.s$,xd=Object.values(kd);function Od(e){var t;if(e.ortb){e=e.ortb,t=od(od({ver:"1.2"},e),{},{assets:[]});var n=e.assets,r=function(e){return e.title||e.img||e.data||e.video};if(n.length<1||!n.some((function(e){return r(e)})))return(0,a.yN)("".concat(sd,": Native assets object is empty or contains some invalid object")),_d=!0,t;n.forEach((function(e){var n=e;n.img&&(n.img.type==gd.IMAGE?(n.w=n.w||n.width||(n.sizes?n.sizes[0]:cd),n.h=n.h||n.height||(n.sizes?n.sizes[1]:cd),n.wmin=n.wmin||n.minimumWidth||(n.minsizes?n.minsizes[0]:cd),n.hmin=n.hmin||n.minimumHeight||(n.minsizes?n.minsizes[1]:cd)):n.img.type==gd.ICON&&(n.w=n.w||n.width||(n.sizes?n.sizes[0]:cd),n.h=n.h||n.height||(n.sizes?n.sizes[1]:cd))),n&&void 0!==n.id&&r(n)&&t.assets.push(n)}))}else t=function(e){if(!e&&!(0,a.PO)(e))return(0,a.yN)("".concat(sd,": Native assets object is empty or not an object: ").concat(e)),void(_d=!0);var t={ver:"1.2",assets:[]};for(var n in e)if(!Ed.includes(n))if(Ad.hasOwnProperty(n)||xd.includes(n)){var r=e[n],i=0;r.required&&(0,a.jn)(r.required)&&(i=Number(r.required));var o={id:t.assets.length,required:i};if(n in kd)o.data={type:Pd[kd[n]]},(r.len||r.length)&&(o.data.len=r.len||r.length),r.ext&&(o.data.ext=r.ext);else if("icon"===n||"image"===n){if(o.img={type:"icon"===n?Cd.ICON:Cd.MAIN},r.aspect_ratios)if((0,a.kJ)(r.aspect_ratios))if(r.aspect_ratios.length){var s=r.aspect_ratios[0],d=s.min_width,c=s.min_height;(0,a.U)(d)&&(0,a.U)(c)?(o.img.wmin=d,o.img.hmin=c):(0,a.yN)("".concat(sd,": image.aspect_ratios min_width or min_height are invalid: ").concat(d,", ").concat(c));var l=r.aspect_ratios.filter((function(e){return e.ratio_width&&e.ratio_height})).map((function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)}));l.length>0&&(o.img.ext={aspectratios:l})}else(0,a.yN)("".concat(sd,": image.aspect_ratios was passed, but it's empty: ").concat(r.aspect_ratios));else(0,a.yN)("".concat(sd,": image.aspect_ratios was passed, but it's not a an array: ").concat(r.aspect_ratios));o.img.w=r.w||r.width,o.img.h=r.h||r.height,o.img.wmin=r.wmin||r.minimumWidth||(r.minsizes?r.minsizes[0]:cd),o.img.hmin=r.hmin||r.minimumHeight||(r.minsizes?r.minsizes[1]:cd),r.sizes&&(2===r.sizes.length&&(0,a.U)(r.sizes[0])&&(0,a.U)(r.sizes[1])?((0,a.PN)("".concat(sd,": if asset.sizes exist, by OpenRTB spec we should remove wmin and hmin")),o.img.w=r.sizes[0],o.img.h=r.sizes[1],delete o.img.hmin,delete o.img.wmin):(0,a.yN)("".concat(sd,": image.sizes was passed, but its value is not an array of integers: ").concat(r.sizes))),r.ext&&(o.img.ext=r.ext),r.mimes&&(o.img.mimes=r.mimes)}else"title"===n?(o.title={len:r.len||r.length||140},r.ext&&(o.title.ext=r.ext)):"ext"===n&&(o.ext=r,delete o.required);t.assets.push(o)}else(0,a.yN)("".concat(sd,": Unrecognized native asset code: ").concat(n,". Asset will be ignored."));return t.assets.length<1?((0,a.yN)("".concat(sd,": Could not find any valid asset")),void(_d=!0)):t}(e);return t}function Dd(e){var t,n=e.mediaTypes.banner.sizes,r=[];if(n!==cd&&(0,a.kJ)(n)){if(t={},e.params.width||e.params.height)t.w=e.params.width,t.h=e.params.height;else{if(0===n.length)return t=cd,(0,a.yN)(sd+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t;t.w=parseInt(n[0][0],10),t.h=parseInt(n[0][1],10),n=n.splice(1,n.length-1)}n.length>0&&(r=[],n.forEach((function(e){e.length>1&&r.push({w:e[0],h:e[1]})})),r.length>0&&(t.format=r)),t.pos=0,t.topframe=(0,a.yL)()?0:1}else(0,a.yN)(sd+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t=cd;return t}function Rd(e){var t,n=(0,a.Ee)((0,s.Z)(e.mediaTypes,"video"),e.params.video);if(n!==cd){for(var r in t={},function(e,t){(0,s.Z)(e,"placement")||(0,a.yN)(ud+" for "+t)}(n,e.adUnitCode),hd)n.hasOwnProperty(r)&&(t[r]=Sd(r,n[r],hd[r]));(0,a.kJ)(e.mediaTypes.video.playerSize[0])?(t.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),t.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):(0,a.hj)(e.mediaTypes.video.playerSize[0])&&(t.w=parseInt(e.mediaTypes.video.playerSize[0],10),t.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else t=cd,(0,a.yN)(sd+"Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return t}function Md(e,t){(t=t.filter((function(e){return"string"==typeof e||((0,a.yN)(sd+"acat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,t,n){return n.indexOf(e)===t}))).length>0&&((0,a.yN)(sd+"acat: Selected: ",t),e.ext.acat=t)}function Nd(e){return!0===(0,a.kJ)(e)&&e.length>0}var Ud={code:ad,gvlid:76,supportedMediaTypes:[P.Mk,P.pX,P.B5],isBidRequestValid:function(e){if(e&&e.params){if(!(0,a.d8)(e.params.publisherId))return(0,a.yN)(sd+"Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(P.pX)){var t=(0,s.Z)(e.mediaTypes,"video.mimes"),n=(0,s.Z)(e,"params.video.mimes");if(!1===Nd(t)&&!1===Nd(n))return(0,a.yN)(sd+"Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[P.pX].hasOwnProperty("context"))return(0,a.H)("".concat(sd,": no context specified in bid. Rejecting bid: "),e),!1;if("outstream"===e.mediaTypes[P.pX].context&&!(0,a.d8)(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[P.pX].hasOwnProperty("renderer"))return e.mediaTypes.hasOwnProperty(P.Mk)||e.mediaTypes.hasOwnProperty(P.B5)?(delete e.mediaTypes[P.pX],(0,a.yN)("".concat(sd,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: '),e),!0):((0,a.H)("".concat(sd,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: '),e),!1)}return!0}return!1},buildRequests:function(e,t){var n,r,i,o,c,l;t&&t.refererInfo&&(l=t.refererInfo);var u,p=function(e){return{pageURL:(null==e?void 0:e.page)||window.location.href,refURL:(null==e?void 0:e.ref)||window.document.referrer}}(l),f=function(e){return{id:""+(new Date).getTime(),at:1,cur:[dd],imp:[],site:{page:e.pageURL,ref:e.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{}}}(p),h="",m=[],v=[],y=[];if(e.forEach((function(e){if((u=(0,a.I8)(e)).params.adSlot=u.params.adSlot||"",function(e){var t;e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=(t=e.params.adSlot,(0,a.d8)(t)?t.replace(/^\s+/g,"").replace(/\s+$/g,""):(t&&(0,a.yN)(ad+": adSlot must be a string. Ignoring adSlot"),""));var n=e.params.adSlot,r=n.split(":");if(n=r[0],2==r.length&&(e.params.adUnitIndex=r[1]),r=n.split("@"),e.params.adUnit=r[0],r.length>1){if(2!=(r=r[1].split("x")).length)return void(0,a.yN)(sd+"AdSlot Error: adSlot not in required format");e.params.width=parseInt(r[0],10),e.params.height=parseInt(r[1],10)}else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(P.Mk)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var i=0,o=[];i<e.mediaTypes.banner.sizes.length;i++)2===e.mediaTypes.banner.sizes[i].length&&o.push(e.mediaTypes.banner.sizes[i]);e.mediaTypes.banner.sizes=o,e.mediaTypes.banner.sizes.length>=1&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}(u),u.mediaTypes&&u.mediaTypes.hasOwnProperty("video")||u.params.hasOwnProperty("video"));else if(!(u.hasOwnProperty("mediaTypes")&&u.mediaTypes.hasOwnProperty(P.B5)||0!==u.params.width||0!==u.params.height))return void(0,a.yN)(sd+"Skipping the non-standard adslot: ",u.params.adSlot,JSON.stringify(u));p.pubId=p.pubId||u.params.publisherId,(p=function(e,t){var n,r,i;for(n in t.kadpageurl||(t.kadpageurl=t.pageURL),pd)pd.hasOwnProperty(n)&&(r=e[n])&&(i=pd[n],"object"===(0,bt.Z)(i)&&(r=i.f(r,t)),(0,a.d8)(r)?t[n]=r:(0,a.yN)(sd+"Ignoring param : "+n+" with value : "+pd[n]+", expects string-value, found "+(0,bt.Z)(r)));return t}(u.params,p)).transactionId=u.transactionId,""===h?h=u.params.currency||cd:u.params.hasOwnProperty("currency")&&h!==u.params.currency&&(0,a.yN)(sd+"Currency specifier ignored. Only one currency permitted."),u.params.currency=h,u.params.hasOwnProperty("dctr")&&(0,a.d8)(u.params.dctr)&&m.push(u.params.dctr),u.params.hasOwnProperty("bcat")&&(0,a.kJ)(u.params.bcat)&&(v=v.concat(u.params.bcat)),u.params.hasOwnProperty("acat")&&(0,a.kJ)(u.params.acat)&&(y=y.concat(u.params.acat));var t=function(e){var t,n,r={},i={},o=e.hasOwnProperty("sizes")?e.sizes:[],c="",l=[];if(function(e,t){t.params.deals&&((0,a.kJ)(t.params.deals)?t.params.deals.forEach((function(t){(0,a.d8)(t)&&t.length>3?(e.pmp||(e.pmp={private_auction:0,deals:[]}),e.pmp.deals.push({id:t})):(0,a.yN)(sd+"Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+t)})):(0,a.yN)(sd+"Error: bid.params.deals should be an array of strings."))}(r={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:Id("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:Id("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?Id("currency",e.params.currency):dd},e),function(e,t){var n,r="";if(t.params.dctr)if(r=t.params.dctr,(0,a.d8)(r)&&r.length>0){var i=r.split("|");r="",i.forEach((function(e){r+=e.length>0?e.trim()+"|":""})),n=r.length,"|"===r.substring(n,n-1)&&(r=r.substring(0,n-1)),e.ext.key_val=r.trim()}else(0,a.yN)(sd+"Ignoring param : dctr with value : "+r+", expects string-value, found empty or non-string value")}(r,e),function(e,t){var n=t.rtd&&t.rtd.jwplayer&&t.rtd.jwplayer.targeting||void 0,r="";if(void 0!==n&&""!==n&&n.hasOwnProperty("segments")){var i,o=n.segments.length;r+="jw-id="+n.content.id;for(var a=0;a<o;a++)r+="|jw-"+n.segments[a]+"=1";(i=e.ext)&&void 0===i.key_val?i.key_val=r:i.key_val+="|"+r}}(r,e),e.hasOwnProperty("mediaTypes"))for(c in e.mediaTypes)switch(c){case P.Mk:(t=Dd(e))!==cd&&(r.banner=t);break;case P.B5:i.request=JSON.stringify(Od(e.nativeParams)),_d?((0,a.yN)(sd+"Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."),_d=!1):r.native=i;break;case P.pX:(n=Rd(e))!==cd&&(r.video=n)}else t={pos:0,w:e.params.width,h:e.params.height,topframe:(0,a.yL)()?0:1},(0,a.kJ)(o)&&o.length>1&&((o=o.splice(1,o.length-1)).forEach((function(e){l.push({w:e[0],h:e[1]})})),t.format=l),r.banner=t;return function(e,t){var n=od({},(0,s.Z)(t,"ortb2Imp.ext.data"));Object.keys(n).forEach((function(t){"pbadslot"===t?"string"==typeof n[t]&&n[t]&&d(e,"ext.data.pbadslot",n[t]):"adserver"===t?["name","adslot"].forEach((function(t){var r=(0,s.Z)(n,"adserver.".concat(t));"string"==typeof r&&r&&(d(e,"ext.data.adserver.".concat(t.toLowerCase()),r),"adslot"===t&&d(e,"ext.dfp_ad_unit_code",r))})):d(e,"ext.data.".concat(t),n[t])}))}(r,e),function(e,t){var n=-1;"function"!=typeof t.getFloor||g.vc.getConfig("pubmatic.disableFloors")||[P.Mk,P.pX,P.B5].forEach((function(r){if(e.hasOwnProperty(r)){var i=[];"banner"===r&&(e[r].w&&e[r].h&&i.push([e[r].w,e[r].h]),(0,a.kJ)(e[r].format)&&e[r].format.forEach((function(e){return i.push([e.w,e.h])}))),0===i.length&&i.push("*"),i.forEach((function(i){var o=t.getFloor({currency:e.bidfloorcur,mediaType:r,size:i});if((0,a.PN)(sd,"floor from floor module returned for mediatype:",r," and size:",i," is: currency",o.currency,"floor",o.floor),"object"===(0,bt.Z)(o)&&o.currency===e.bidfloorcur&&!isNaN(parseInt(o.floor))){var s=parseFloat(o.floor);(0,a.PN)(sd,"floor from floor module:",s,"previous floor value",n,"Min:",Math.min(s,n)),n=-1===n?s:Math.min(s,n),(0,a.PN)(sd,"new floor value:",n)}}))}})),e.bidfloor&&((0,a.PN)(sd,"floor from floor module:",n,"impObj.bidfloor",e.bidfloor,"Max:",Math.max(n,e.bidfloor)),n=Math.max(n,e.bidfloor)),e.bidfloor=!isNaN(n)&&n>0?n:cd,(0,a.PN)(sd,"new impObj.bidfloor value:",e.bidfloor)}(r,e),r.hasOwnProperty(P.Mk)||r.hasOwnProperty(P.B5)||r.hasOwnProperty(P.pX)?r:cd}(u);t&&f.imp.push(t)})),0!=f.imp.length){f.site.publisher.id=p.pubId.trim(),bd=p.pubId.trim(),f.ext.wrapper={},f.ext.wrapper.profile=parseInt(p.profId)||cd,f.ext.wrapper.version=parseInt(p.verId)||cd,f.ext.wrapper.wiid=p.wiid||t.auctionId,f.ext.wrapper.wv="prebid_prebid_7.47.0",f.ext.wrapper.transactionId=p.transactionId,f.ext.wrapper.wp="pbjs";var b,_,w=t?O.S.get(t.bidderCode,"allowAlternateBidderCodes"):void 0;if(void 0!==w){if(f.ext.marketplace={},t&&1==w){var T=O.S.get(t.bidderCode,"allowedAlternateBidderCodes");(0,a.kJ)(T)?(T=T.map((function(e){return e.trim().toLowerCase()})).filter((function(e){return!!e})).filter(a.tT),wd=T.includes("*")?Td:[].concat((0,A.Z)(wd),(0,A.Z)(T))):wd=Td}f.ext.marketplace.allowedbidders=wd.filter(a.tT)}f.user.gender=p.gender?p.gender.trim():cd,f.user.geo={},f.user.geo.lat=Id("lat",p.lat),f.user.geo.lon=Id("lon",p.lon),f.user.yob=Id("yob",p.yob),f.device.geo=f.user.geo,f.site.page=p.kadpageurl.trim()||f.site.page.trim(),f.site.domain=(b=f.site.page,(_=document.createElement("a")).href=b,_.hostname),"object"===(0,bt.Z)(g.vc.getConfig("content"))&&(f.site.content=g.vc.getConfig("content")),"object"===(0,bt.Z)(g.vc.getConfig("device"))&&(f.device=Object.assign(f.device,g.vc.getConfig("device"))),f.device.language=f.device.language&&f.device.language.split("-")[0],d(f,"source.tid",p.transactionId),-1!==window.location.href.indexOf("pubmaticTest=true")&&(f.test=1),e[0].schain&&d(f,"source.ext.schain",e[0].schain),t&&t.gdprConsent&&(d(f,"user.ext.consent",t.gdprConsent.consentString),d(f,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&d(f,"regs.ext.us_privacy",t.uspConsent),!0===g.vc.getConfig("coppa")&&d(f,"regs.coppa",1),function(e,t){var n=(0,s.Z)(t,"0.userIdAsEids");(0,a.kJ)(n)&&n.length>0&&d(e,"user.eids",n)}(f,e);var I,S,k,C,E=t&&t.ortb2||{};if(E.site){var x=f.site,D=x.page,R=x.domain,M=x.ref;(0,a.Ee)(f,{site:E.site}),f.site.page=D,f.site.domain=R,f.site.ref=M}if(E.user&&(0,a.Ee)(f,{user:E.user}),E.bcat&&(v=v.concat(E.bcat)),null!==(n=E.device)&&void 0!==n&&n.sua&&(f.device.sua=null===(I=E.device)||void 0===I?void 0:I.sua),null!==(r=E.ext)&&void 0!==r&&null!==(i=r.prebid)&&void 0!==i&&null!==(o=i.bidderparams)&&void 0!==o&&null!==(c=o[t.bidderCode])&&void 0!==c&&c.acat){var N=E.ext.prebid.bidderparams[t.bidderCode].acat;Md(f,N)}else y.length&&Md(f,y);return function(e,t){(t=t.filter((function(e){return"string"==typeof e||((0,a.yN)(sd+"bcat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,t,n){if(e.length>3)return n.indexOf(e)===t;(0,a.yN)(sd+"bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)}))).length>0&&((0,a.yN)(sd+"bcat: Selected: ",t),e.bcat=t)}(f,v),null!=t&&t.timeout?f.tmax=t.timeout:f.tmax=null===(S=window)||void 0===S||null===(k=S.PWT)||void 0===k||null===(C=k.versionDetails)||void 0===C?void 0:C.timeout,f.ext.epoch=(new Date).getTime(),"object"===(0,bt.Z)(g.vc.getConfig("app"))&&(f.app=g.vc.getConfig("app"),f.app.publisher=f.site.publisher,f.app.ext=f.site.ext||cd,"object"!==(0,bt.Z)(f.app.content)&&(f.app.content=f.site.content||cd),delete f.site),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(f),bidderRequest:t}}},interpretResponse:function(e,t){var n=[],r=dd,i=JSON.parse(t.data),o=i.site&&i.site.ref?i.site.ref:"";try{e.body&&e.body.seatbid&&(0,a.kJ)(e.body.seatbid)&&(r=e.body.cur||r,e.body.seatbid.forEach((function(e){e.bid&&(0,a.kJ)(e.bid)&&e.bid.forEach((function(d){var c={requestId:d.impid,cpm:parseFloat((d.price||0).toFixed(2)),width:d.w,height:d.h,creativeId:d.crid||d.id,dealId:d.dealid,currency:r,netRevenue:!0,ttl:300,referrer:o,ad:d.adm,pm_seat:e.seat||null,pm_dspid:d.ext&&d.ext.dspid?d.ext.dspid:null,partnerImpId:d.id||""};i.imp&&i.imp.length>0&&i.imp.forEach((function(e){if(d.impid===e.id)switch(function(e,t){if(e.ext&&null!=e.ext.bidtype)t.mediaType=yd[e.ext.bidtype];else{(0,a.PN)(sd+"bid.ext.bidtype does not exist, checking alternatively for mediaType");var n=e.adm,r="",i=new RegExp(/VAST\s+version/);if(n.indexOf('span class="PubAPIAd"')>=0)t.mediaType=P.Mk;else if(i.test(n))t.mediaType=P.pX;else try{(r=JSON.parse(n.replace(/\\/g,"")))&&r.native&&(t.mediaType=P.B5)}catch(e){(0,a.yN)(sd+"Error: Cannot parse native reponse for ad response: "+n)}}}(d,c),c.mediaType){case P.Mk:break;case P.pX:c.width=d.hasOwnProperty("w")?d.w:e.video.w,c.height=d.hasOwnProperty("h")?d.h:e.video.h,c.vastXml=d.adm,function(e,t){var n,r,i;if(t.bidderRequest&&t.bidderRequest.bids){for(var o=0;o<t.bidderRequest.bids.length;o++)t.bidderRequest.bids[o].bidId===e.requestId&&(n=t.bidderRequest.bids[o].params,r=t.bidderRequest.bids[o].mediaTypes[P.pX].context,i=t.bidderRequest.bids[o].adUnitCode);r&&"outstream"===r&&n&&n.outstreamAU&&i&&(e.rendererCode=n.outstreamAU,e.renderer=vd.newRenderer(e.rendererCode,i))}}(c,t),function(e,t,n){var r,i,o;if(null!=t&&null!==(r=t.ext)&&void 0!==r&&r.prebiddealpriority){var d=(0,a.zE)(e.requestId,[n.bidderRequest]),c=(0,s.Z)(d,"mediaTypes.video");if((null==c?void 0:c.context)==P.Oh){var l=(null==t||null===(i=t.ext)||void 0===i||null===(o=i.video)||void 0===o?void 0:o.duration)||(null==c?void 0:c.maxduration);e.video={context:P.Oh,durationSeconds:l,dealTier:t.ext.prebiddealpriority}}}}(c,d,t);break;case P.B5:!function(e,t){if(e.hasOwnProperty("adm")){var n="";try{n=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return void(0,a.yN)(sd+"Error: Cannot parse native reponse for ad response: "+t.adm)}t.native={ortb:od({},n.native)},t.mediaType=P.B5,t.width||(t.width=0),t.height||(t.height=0)}}(d,c)}})),d.ext&&d.ext.deal_channel&&(c.dealChannel=md[d.ext.deal_channel]||null),function(e,t,n){e.meta={},t.ext&&t.ext.dspid&&(e.meta.networkId=t.ext.dspid,e.meta.demandSource=t.ext.dspid),t.ext&&t.ext.dchain&&(e.meta.dchain=t.ext.dchain);var r=n||t.ext&&t.ext.advid;r&&(e.meta.advertiserId=r,e.meta.agencyId=r,e.meta.buyerId=r),t.adomain&&Nd(t.adomain)&&(e.meta.advertiserDomains=t.adomain,e.meta.clickUrl=t.adomain[0],e.meta.brandId=t.adomain[0]),t.cat&&Nd(t.cat)&&(e.meta.secondaryCatIds=t.cat,e.meta.primaryCatId=t.cat[0])}(c,d,e.seat),e.ext&&e.ext.buyid&&(c.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),d.ext&&d.ext.marketplace&&(c.bidderCode=d.ext.marketplace),n.push(c)}))})))}catch(e){(0,a.H)(e)}return n},getUserSyncs:function(e,t,n,r){var i=""+bd;return n&&(i+="&gdpr="+(n.gdprApplies?1:0),i+="&gdpr_consent="+encodeURIComponent(n.consentString||"")),r&&(i+="&us_privacy="+encodeURIComponent(r)),!0===g.vc.getConfig("coppa")&&(i+="&coppa=1"),e.iframeEnabled?[{type:"iframe",url:"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p="+i}]:[{type:"image",url:"https://image8.pubmatic.com/AdServer/ImgSync?p="+i}]},transformBidParams:function(e,t,n,r){return(0,a.uh)({publisherId:"string",adSlot:"string"},e)}};(0,Xe.dX)(Ud),(0,o.z)("pubmaticBidAdapter");var Ld=n(8048),jd={name:"pubProvidedId",gvlid:Ld.$P,decode:function(e){var t=e?{pubProvidedId:e}:void 0;return(0,a.PN)("PubProvidedId: Decoded value "+JSON.stringify(t)),t},getId:function(e){var t=e&&e.params||{},n=[];return(0,a.kJ)(t.eids)&&(n=n.concat(t.eids)),"function"==typeof t.eidsFunction&&(n=n.concat(t.eidsFunction())),{id:n}}};(0,x.Bx)("userId",jd),(0,o.z)("pubProvidedIdSystem");var Bd="__qca",qd="11",Fd=["1","10"],Vd=["1"],zd=["1"],Wd=Y.rp.getConsentData(),Hd=Y.nX.getConsentData(),Zd="quantcastId",$d=(0,J.df)({moduleType:si.y2,moduleName:Zd});function Gd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:392;if(!window._qevents&&e&&""!=e){var n,r,i=$d.getCookie(Bd),o="0",s=Kd.findRootDomain(),d=new Date,c="";if(!i){var l=d.getTime(),u=new Date(l+864e5*t).toGMTString(),p=Math.round(2147483647*Math.random());i="B0-".concat(p,"-").concat(l),o="1",$d.setCookie(Bd,i,u,"/",s,null)}n="&fpan=".concat(o,"&fpa=").concat(i),r="&gdpr=0",Wd&&"boolean"==typeof Wd.gdprApplies&&Wd.gdprApplies&&(r="gdpr=1&gdpr_consent=".concat(Wd.consentString)),Hd&&"string"==typeof Hd&&(c="&us_privacy=".concat(Hd));var f="https://pixel.quantserve.com/pixel?d="+s+"&client_id="+e+"&a=p-KceJUEvXN48CE"+c+r+n;(0,a.hq)(f)}}var Kd={name:Zd,gvlid:qd,decode:function(e){return e},getId:function(e){var t,n=$d.getCookie(Bd);if(Y.VP.getCoppa()||(t=Hd)&&"string"==typeof t&&4==t.length&&"Y"==t.charAt(1)&&"Y"==t.charAt(2)||!function(e){return!e||"boolean"!=typeof e.gdprApplies||!e.gdprApplies||!!e.vendorData&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fd,n=e.gdprApplies,r=e.purpose,i=e.vendor,o=i&&i.consents&&i.consents[qd],a=i&&i.legitimateInterests&&i.legitimateInterests[qd],s=e.publisher?e.publisher.restrictions:{};return!n||t.map((function(e){var t=!!r.consents&&r.consents[e],n=!!r.legitimateInterests&&r.legitimateInterests[e],i=s&&s[e]?s[e][qd]:null;return!(0===i||(!o||!t||2===i||-1==Vd.indexOf(e)&&1!==i)&&(1===i||!a||!n||-1!=zd.indexOf(e)||-1!=Vd.indexOf(e)&&2!==i))})).reduce((function(e,t){return e&&t}),!0)}(e.vendorData)}(Wd)){var r=new Date(0).toUTCString(),i=Kd.findRootDomain();return(0,a.PN)("QuantcastId: Necessary consent not present for Id, exiting QuantcastId"),void $d.setCookie(Bd,"",r,"/",i,null)}var o=e&&e.params||{},s=e&&e.storage||{},d=o.clientId||"",c=s.expires||392;return"complete"===document.readyState?Gd(d,c):window.addEventListener("load",(function(){Gd(d,c)})),{id:n?{quantcastId:n}:void 0}}};(0,x.Bx)("userId",Kd),(0,o.z)("quantcastIdSystem");var Xd,Jd,Yd,Qd=[],ec=[],tc=[],nc=(Yd=!1,function(){var e;Yd||(Object.entries((e={},(0,i.Z)(e,u.FP.AUCTION_INIT,["onAuctionInitEvent"]),(0,i.Z)(e,u.FP.AUCTION_END,["onAuctionEndEvent",ac]),(0,i.Z)(e,u.FP.BID_RESPONSE,["onBidResponseEvent"]),(0,i.Z)(e,u.FP.BID_REQUESTED,["onBidRequestEvent"]),e)).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],i=(0,r.Z)(t[1],2),o=i[0],s=i[1];c.on(n,(function(e){s&&s(e),ec.forEach((function(t){try{t[o]&&t[o](e,t.config,Jd)}catch(e){(0,a.H)("RTD provider '".concat(t.name,"': error in '").concat(o,"':"),e)}}))}))})),Yd=!0)});function rc(){return{gdpr:Y.rp.getConsentData(),usp:Y.nX.getConsentData(),gpp:Y.TJ.getConsentData(),coppa:!!g.vc.getConfig("coppa")}}function ic(){Jd=rc();var e=[];tc.forEach((function(t){var n=(0,f.sE)(Qd,(function(e){return e.name===t.name}));n&&n.init&&n.init(t,Jd)&&e.push(Object.assign(n,{config:t}))})),ec=e,(0,a.PN)("Real time data module enabled, using submodules: ".concat(ec.map((function(e){return e.name})).join(", ")))}var oc=(0,Q.g3)("rtd",(function(e,t){Jd=rc();var n=[],r=[];ec.forEach((function(e){if("function"==typeof e.getBidRequestData){n.push(e);var t=e.config;t&&t.waitForIt&&r.push(e)}}));var i,o=r.length&&Xd.auctionDelay&&Xd.auctionDelay>0,a=r.length,s=!1;if(!n.length)return c();function d(){s||(this.config&&this.config.waitForIt&&a--,0===a&&setTimeout(c,0))}function c(){s||(s=!0,clearTimeout(i),e.call(this,t))}i=setTimeout(c,o?Xd.auctionDelay:0),n.forEach((function(e){e.getBidRequestData(t,d.bind(e),e.config,Jd)}))}));function ac(e){var t,n=ec.filter((function(e){return"function"==typeof e.getTargetingData}));if(n.length){var r=e.adUnitCodes;if(r){for(var i=[],o=n.length-1;o>=0;o--){var s=n[o].getTargetingData(r,n[o].config,Jd,e);s&&"object"===(0,bt.Z)(s)?i.push(s):(0,a.yN)("invalid getTargetingData response for sub module",n[o].name)}var d=(t=i,Array.isArray(t)&&t.length?t.reduce((function(e,t){for(var n in t)if(t.hasOwnProperty(n))if(e.hasOwnProperty(n)){var r=t[n];for(var i in r)r.hasOwnProperty(i)&&(e[n][i]=r[i])}else e[n]=t[n];return e}),{}):{});return e.adUnits.forEach((function(e){var t=e.code&&d[e.code];t&&((0,a.PN)("RTD set ad unit targeting of",t,"for",e),e[u.k2.xn]=Object.assign(e[u.k2.xn]||{},t))})),e.adUnits}}}function sc(e){ec.forEach((function(e){if("function"==typeof e.onDataDeletionRequest)try{e.onDataDeletionRequest(e.config)}catch(t){(0,a.H)("Error executing ".concat(e.name,".onDataDeletionRequest"),t)}}));for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.apply(this,n)}function dc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dc(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,x.bA)("realTimeData",(function(e){return Qd.push(e),Ld.qh.register(si.XG,e.name,e.gvlid),function(){var t=Qd.indexOf(e);t>=0&&(Qd.splice(t,1),ic())}})),function(e){var t=e.getConfig("realTimeData",(function(e){var n=e.realTimeData;n.dataProviders?(t(),Xd=n,tc=n.dataProviders,nc(),(0,x.v5)("startAuction").before(oc,20),Y.ZP.callDataDeletionRequest.before(sc),ic()):(0,a.H)("missing parameters for real time module")}))}(g.vc),(0,o.z)("rtdModule");var lc={};g.vc.getConfig("rubicon",(function(e){(0,a.Ee)(lc,e.rubicon)}));var uc={1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",261:"480x480",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",524:"1x2",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656",622:"192x160"};(0,a.yi)(uc,(function(e,t){return uc[e]=t}));var pc=Hi({request:function(e,t,n,r){var i,s,c=r.bidRequests,l=e(t,n,r);l.cur=["USD"],l.test=g.vc.getConfig("debug")?1:0,d(l,"ext.prebid.cache",{vastxml:{returnCreative:!0===lc.returnVast}}),d(l,"ext.prebid.bidders",{rubicon:{integration:lc.int_type||"pbjs"}}),d(l,"ext.prebid.targeting.pricegranularity",function(e){return{ranges:{low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:e.getConfig("customPriceBucket")&&e.getConfig("customPriceBucket").buckets}[e.getConfig("priceGranularity")]}}(g.vc));var u=(0,o.R)().installedModules;return!u||u.length&&-1===u.indexOf("rubiconAnalyticsAdapter")||d(l,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),function(e,t){var n,r,i={},o=new Set;t.forEach((function(t){var n,r,s,d,c,l={user:{ext:{data:cc({},t.params.visitor)}},site:{ext:{data:cc({},t.params.inventory)}}},u=e.imp.find((function(e){var t,n,r,i,o;return null===(t=e.ext)||void 0===t||null===(n=t.prebid)||void 0===n||null===(r=n.bidder)||void 0===r||null===(i=r.rubicon)||void 0===i||null===(o=i.video)||void 0===o?void 0:o.language}));u&&(l.site.content={language:null===(n=u.ext)||void 0===n||null===(r=n.prebid)||void 0===r||null===(s=r.bidder)||void 0===s||null===(d=s.rubicon)||void 0===d||null===(c=d.video)||void 0===c?void 0:c.language}),t.params.keywords&&(Array.isArray(t.params.keywords)?t.params.keywords:t.params.keywords.split(",")).forEach((function(e){return o.add(e)})),i=(0,a.Ee)(i,t.ortb2||{},l);var p=g.vc.getConfig("user.id");i.user.id=i.user.id||p})),(0,a.Ee)(e,i),o&&o.size&&d(e,"site.keywords",Array.from(o.values()).join(",")),null==e||null===(n=e.ext)||void 0===n||null===(r=n.prebid)||void 0===r||delete r.storedrequest}(l,c),null==l||null===(i=l.ext)||void 0===i||null===(s=i.prebid)||void 0===s||delete s.storedrequest,!0===lc.disableFloors&&delete l.ext.prebid.floors,c.filter((function(e){return"object"===(0,bt.Z)(e.floorData)})).length>0&&(l.ext.prebid.floors={enabled:!1}),l},imp:function(e,t,n){var r,i,o=yc(t);if(!o.includes(P.Mk)||1!=o.length){var a=e(t,n);return a.id=t.adUnitCode,delete a.banner,g.vc.getConfig("s2sConfig.defaultTtl")&&(a.exp=g.vc.getConfig("s2sConfig.defaultTtl")),"atf"===t.params.position&&(a.video.pos=1),"btf"===t.params.position&&(a.video.pos=3),null===(r=a.ext)||void 0===r||null===(i=r.prebid)||void 0===i||delete i.storedrequest,function(e,t){if("USD"!=t.bidfloorcur&&(delete t.bidfloor,delete t.bidfloorcur),!t.bidfloor){var n=parseFloat((0,s.Z)(e,"params.floor"));isNaN(n)||(t.bidfloor=n,t.bidfloorcur="USD")}}(t,a),a}},bidResponse:function(e,t,n){var r=e(t,n);r.meta.mediaType=(0,s.Z)(t,"ext.prebid.type");var i=n.bidRequest;return r.mediaType===P.pX&&"outstream"===i.mediaTypes.video.context&&(r.renderer=function(e){var t=h.Th.install({id:e.adId,url:lc.rendererUrl||"https://video-outstream.rubiconproject.com/apex-2.2.1.js",config:lc.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{t.setRender(gc)}catch(e){(0,a.yN)("Prebid Error calling setRender on renderer",e)}return t}(r)),r.width=t.w||(0,s.Z)(i,"mediaTypes.video.w")||(0,s.Z)(i,"params.video.playerWidth"),r.height=t.h||(0,s.Z)(i,"mediaTypes.video.h")||(0,s.Z)(i,"params.video.playerHeight"),(0,s.Z)(t,"ext.bidder.rp.advid")&&d(r,"meta.advertiserId",t.ext.bidder.rp.advid),r},context:{netRevenue:!1!==lc.netRevenue,ttl:300},processors:js}),fc={code:"rubicon",gvlid:52,supportedMediaTypes:[P.Mk,P.pX,P.B5],isBidRequestValid:function(e){var t=!0;if("object"!==(0,bt.Z)(e.params))return!1;for(var n=0,r=["accountId","siteId","zoneId"];n<r.length;n++)if(e.params[r[n]]=parseInt(e.params[r[n]]),isNaN(e.params[r[n]]))return(0,a.H)("Rubicon: wrong format of accountId or siteId or zoneId."),!1;var i=yc(e,!0);if(!i.length)return!1;i.includes(P.pX)&&(t=function(e){var t=!0,n=Object.prototype.toString.call([]),r={mimes:n,protocols:n,linearity:Object.prototype.toString.call(0),api:n};return Object.keys(r).forEach((function(n){Object.prototype.toString.call((0,s.Z)(e,"mediaTypes.video."+n))!==r[n]&&(t=!1,(0,a.H)("Rubicon: mediaTypes.video."+n+" is required and must be of type: "+r[n]))})),t}(e));var o=[P.Mk,P.B5].filter((function(e){return i.includes(e)})).length>0;return o?t&&o:t},buildRequests:function(e,t){var n,r=[],i=[];if(n=e.filter((function(e){var t=yc(e)||[],n=t.length,r=e.params||{},i=r.bidonmultiformat,o=r.video;return 1===n&&(t.includes(P.pX)||t.includes(P.B5))||2===n&&!t.includes(P.Mk)||o&&t.includes(P.pX)||i&&(t.includes(P.pX)||t.includes(P.B5))})),n&&n.length){var o=pc.toORTB({bidRequests:n,bidderRequest:t});i.push({method:"POST",url:"https://".concat(lc.videoHost||"prebid-server",".rubiconproject.com/openrtb2/auction"),data:o,bidRequest:n})}var s=e.filter((function(e){var t=yc(e)||[],n=e.params||{},r=n.bidonmultiformat,i=n.video;return t.includes(P.Mk)&&(1===t.length||r||!r&&!i||!r&&i&&!t.includes(P.pX))}));if(!0!==g.vc.getConfig("rubicon.singleRequest"))r=i.concat(s.map((function(e){var n=fc.createSlotParams(e,t);return{method:"GET",url:"https://".concat(lc.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:fc.getOrderedParams(n).reduce((function(e,t){var r=n[t];return(0,a.d8)(r)&&""!==r||(0,a.hj)(r)?"".concat(e).concat(_c(t,r),"&"):e}),"")+"slots=1&rand=".concat(Math.random()),bidRequest:e}})));else{var d=s.reduce((function(e,t){return(e[t.params.siteId]=e[t.params.siteId]||[]).push(t),e}),{});r=i.concat(Object.keys(d).reduce((function(e,n){var r;return(r=d[n],10,r.map((function(e,t){return t%10==0?r.slice(t,t+10):null})).filter((function(e){return e}))).forEach((function(n){var r=fc.combineSlotUrlParams(n.map((function(e){return fc.createSlotParams(e,t)})));e.push({method:"GET",url:"https://".concat(lc.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:fc.getOrderedParams(r).reduce((function(e,t){var n=r[t];return(0,a.d8)(n)&&""!==n||(0,a.hj)(n)?"".concat(e).concat(_c(t,n),"&"):e}),"")+"slots=".concat(n.length,"&rand=").concat(Math.random()),bidRequest:n})})),e}),[]))}return r},getOrderedParams:function(e){var t=/^tg_v/,n=/^tg_i/,r=/^eid_|^tpid_/,i=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","rp_schain"].concat(Object.keys(e).filter((function(e){return r.test(e)}))).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter((function(e){return t.test(e)}))).concat(Object.keys(e).filter((function(e){return n.test(e)}))).concat(["tk_flint","x_source.tid","l_pb_bid_id","p_screen_res","rp_floor","rp_secure","tk_user_key"]);return i.concat(Object.keys(e).filter((function(e){return-1===i.indexOf(e)})))},combineSlotUrlParams:function(e){if(1===e.length)return e[0];var t=e.reduce((function(t,n,r){return Object.keys(n).forEach((function(i){t.hasOwnProperty(i)||(t[i]=new Array(e.length)),t[i].splice(r,1,n[i])})),t}),{}),n=new RegExp("^([^;]*)(;\\1)+$");return Object.keys(t).forEach((function(e){var r=t[e].join(";"),i=r.match(n);t[e]=i?i[1]:r})),t},createSlotParams:function(e,t){e.startTime=(new Date).getTime();var n=e.params,i=mc(e,"banner"),o=n.latLong||[],d=(0,r.Z)(o,2),c=d[0],l=d[1],u={account_id:n.accountId,site_id:n.siteId,zone_id:n.zoneId,size_id:i[0],alt_size_ids:i.slice(1).join(",")||void 0,rp_floor:(n.floor=parseFloat(n.floor))>=.01?n.floor:void 0,rp_secure:"1",tk_flint:"".concat(lc.int_type||"pbjs_lite","_v7.47.0"),"x_source.tid":e.transactionId,"x_imp.ext.tid":e.transactionId,l_pb_bid_id:e.bidId,p_screen_res:[window.screen.width,window.screen.height].join("x"),tk_user_key:n.userId,"p_geo.latitude":isNaN(parseFloat(c))?void 0:parseFloat(c).toFixed(4),"p_geo.longitude":isNaN(parseFloat(l))?void 0:parseFloat(l).toFixed(4),"tg_fl.eid":e.code,rf:hc(e,t)};if("function"==typeof e.getFloor&&!lc.disableFloors){var p;try{p=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){(0,a.H)("Rubicon: getFloor threw an error: ",e)}u.rp_hard_floor="object"!==(0,bt.Z)(p)||"USD"!==p.currency||isNaN(parseInt(p.floor))?void 0:p.floor}var h={1:"atf",3:"btf"}[(0,s.Z)(e,"mediaTypes.banner.pos")]||"";u.p_pos="atf"===n.position||"btf"===n.position?n.position:h;var m=g.vc.getConfig("user.id");return m&&(u.ppuid=m),e.userIdAsEids&&e.userIdAsEids.forEach((function(e){try{if("adserver.org"===e.source?(u.tpid_tdid=e.uids[0].id,u["eid_adserver.org"]=e.uids[0].id):"liveintent.com"===e.source?(u["tpid_liveintent.com"]=e.uids[0].id,u["eid_liveintent.com"]=e.uids[0].id,e.ext&&Array.isArray(e.ext.segments)&&e.ext.segments.length&&(u["tg_v.LIseg"]=e.ext.segments.join(","))):"liveramp.com"===e.source?u.x_liverampidl=e.uids[0].id:"id5-sync.com"===e.source?u["eid_id5-sync.com"]="".concat(e.uids[0].id,"^").concat(e.uids[0].atype,"^").concat(e.uids[0].ext&&e.uids[0].ext.linkType||""):u["eid_".concat(e.source)]="".concat(e.uids[0].id,"^").concat(e.uids[0].atype||""),!u.ppuid){var t=(0,f.sE)(e.uids,(function(e){return e.ext&&"ppuid"===e.ext.stype}));t&&t.id&&(u.ppuid=t.id)}}catch(t){(0,a.yN)("Rubicon: error reading eid:",e,t)}})),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(u.gdpr=Number(t.gdprConsent.gdprApplies)),u.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(u.us_privacy=encodeURIComponent(t.uspConsent)),u.rp_maxbids=t.bidLimit||1,function(e,t,n){var r={user:{ext:{data:cc({},e.params.visitor)}},site:{ext:{data:cc({},e.params.inventory)}}};e.params.keywords&&(r.site.keywords=(0,a.kJ)(e.params.keywords)?e.params.keywords.join(","):e.params.keywords);var i=(0,a.Ee)({},e.ortb2||{},r),o=(0,s.Z)(e.ortb2Imp,"ext")||{},d=(0,s.Z)(e.ortb2Imp,"ext.data")||{},c=(0,s.Z)(e,"ortb2Imp.ext.gpid"),l={user:[4],site:[1,2,5,6]},u={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"},p=function(e,t,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=function(e,t,n){return"data"===t&&Array.isArray(e)?e.filter((function(e){return e.segment&&(0,s.Z)(e,"ext.segtax")&&l[n]&&-1!==l[n].indexOf((0,s.Z)(e,"ext.segtax"))})).map((function(e){var t=e.segment.filter((function(e){return e.id})).reduce((function(e,t){return e.push(t.id),e}),[]);if(t.length>0)return t.toString()})).toString():"object"===(0,bt.Z)(e)&&!Array.isArray(e)||void 0===e?void 0:Array.isArray(e)?e.filter((function(e){if("object"!==(0,bt.Z)(e)&&void 0!==e)return e.toString();(0,a.yN)("Rubicon: Filtered value: ",e,"for key",t,": Expected value to be string, integer, or an array of strings/ints")})).toString():e.toString()}(e,r,t),d=u[r]&&i?"".concat(u[r]):"data"===r?"".concat(u[t],"iab"):"".concat(u[t]).concat(r);n[d]=n[d]?n[d].concat(",",o):o};t===P.Mk?(["site","user"].forEach((function(e){Object.keys(i[e]).forEach((function(t){"site"===e&&"content"===t&&i[e][t].data?p(i[e][t].data,e,"data"):"ext"!==t?p(i[e][t],e,t):i[e][t].data&&Object.keys(i[e].ext.data).forEach((function(t){p(i[e].ext.data[t],e,t,!1)}))}))})),Object.keys(d).forEach((function(e){"adserver"!==e?p(d[e],"site",e):"gam"===d[e].name&&p(d[e].adslot,name,e)})),c&&(n.p_gpid=c),n["tg_i.pbadslot"]&&delete n["tg_i.dfp_ad_unit_code"]):(Object.keys(o).length&&(0,a.Ee)(n.imp[0].ext,o),c&&(n.imp[0].ext.gpid=c),(0,a.Ee)(n,i))}(e,P.Mk,u),!0===g.vc.getConfig("coppa")&&(u.coppa=1),e.schain&&bc(e.schain)&&(u.rp_schain=fc.serializeSupplyChain(e.schain)),u},serializeSupplyChain:function(e){if(!bc(e))return"";var t=e.ver,n=e.complete,r=e.nodes;return"".concat(t,",").concat(n,"!").concat(fc.serializeSupplyChainNodes(r))},serializeSupplyChainNodes:function(e){var t=["asi","sid","hp","rid","name","domain"];return e.map((function(e){return t.map((function(t){return encodeURIComponent(e[t]||"")})).join(",")})).join("!")},interpretResponse:function(e,t){e=e.body;var n=t.data;if(!e||"object"!==(0,bt.Z)(e))return[];if(e.seatbid){var i=(0,s.Z)(e,"ext.errors.rubicon");return Array.isArray(i)&&i.length>0&&(0,a.yN)("Rubicon: Error in video response"),pc.fromORTB({request:n,response:e}).bids}var o,d=e.ads,c=0,l=t.bidRequest;return"object"===(0,bt.Z)(l)&&!Array.isArray(l)&&yc(l).includes(P.pX)&&"object"===(0,bt.Z)(d)&&(d=d[l.adUnitCode]),!Array.isArray(d)||d.length<1?[]:d.reduce((function(t,n,i){if(n.impression_id&&o===n.impression_id?c++:o=n.impression_id,"ok"!==n.status)return t;var s,d,u=Array.isArray(l)?l[i-c]:l;if(u&&"object"===(0,bt.Z)(u)){var p={requestId:u.bidId,currency:"USD",creativeId:n.creative_id||"".concat(n.network||"","-").concat(n.advertiser||""),cpm:n.cpm||0,dealId:n.deal,ttl:300,netRevenue:!1!==lc.netRevenue,rubicon:{advertiserId:n.advertiser,networkId:n.network},meta:{advertiserId:n.advertiser,networkId:n.network,mediaType:P.Mk}};if(n.creative_type&&(p.mediaType=n.creative_type),n.adomain&&(p.meta.advertiserDomains=Array.isArray(n.adomain)?n.adomain:[n.adomain]),n.creative_type===P.pX)p.width=u.params.video.playerWidth,p.height=u.params.video.playerHeight,p.vastUrl=n.creative_depot_url,p.impression_id=n.impression_id,p.videoCacheKey=n.impression_id;else{p.ad=(s=n.script,d=n.impression_id,"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='".concat(d,"'>\n<script type='text/javascript'>").concat(s,"<\/script>\n</div>\n</body>\n</html>"));var f=uc[n.size_id].split("x").map((function(e){return Number(e)})),h=(0,r.Z)(f,2);p.width=h[0],p.height=h[1]}p.rubiconTargeting=(Array.isArray(n.targeting)?n.targeting:[]).reduce((function(e,t){return e[t.key]=t.values[0],e}),{rpfl_elemid:u.adUnitCode}),t.push(p)}else(0,a.H)("Rubicon: bidRequest undefined at index position:".concat(i),l,e);return t}),[]).sort((function(e,t){return(t.cpm||0)-(e.cpm||0)}))},getUserSyncs:function(e,t,n,r){if(!wc&&e.iframeEnabled){var i={};return n&&("boolean"==typeof n.gdprApplies&&(i.gdpr=Number(n.gdprApplies)),"string"==typeof n.consentString&&(i.gdpr_consent=n.consentString)),r&&(i.us_privacy=encodeURIComponent(r)),i=Object.keys(i).length?"?".concat((0,a.Yp)(i)):"",wc=!0,{type:"iframe",url:"https://".concat(lc.syncHost||"eus",".rubiconproject.com/usync.html")+i}}},transformBidParams:function(e,t){return(0,a.uh)({accountId:"number",siteId:"number",zoneId:"number"},e)}};function hc(e,t){var n;return n=e.params.referrer?e.params.referrer:t.refererInfo.page,e.params.secure?n.replace(/^http:/i,"https:"):n}function gc(e){var t,n=document.getElementById(e.adUnitCode);(t=n.querySelector("div[id^='google_ads']"))&&t.style.setProperty("display","none"),function(e){var t=e.querySelector("script[id^='sas_script']"),n=t&&t.nextSibling;n&&"iframe"===n.localName&&n.style.setProperty("display","none")}(n);var r=e.renderer.getConfig();e.renderer.push((function(){window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:n,align:r.align||"center",position:r.position||"append"},closeButton:r.closeButton||!1,label:r.label||void 0,collapse:r.collapse||!0})}))}function mc(e,t){var n=e.params;if(t===P.pX){var r=[];return n.video&&n.video.playerWidth&&n.video.playerHeight?r=[n.video.playerWidth,n.video.playerHeight]:Array.isArray((0,s.Z)(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?r=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&e.sizes.length>0&&Array.isArray(e.sizes[0])&&e.sizes[0].length>1&&(r=e.sizes[0]),r}var i=[];return Array.isArray(n.sizes)?i=n.sizes:void 0!==(0,s.Z)(e,"mediaTypes.banner.sizes")?i=vc(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&e.sizes.length>0?i=vc(e.sizes):(0,a.yN)("Rubicon: no sizes are setup or found"),function(e){var t=[15,2,9];return e.sort((function(e,n){var r=t.indexOf(e),i=t.indexOf(n);return r>-1||i>-1?-1===r?1:-1===i?-1:r-i:e-n}))}(i)}function vc(e){return(0,a.sF)(e).reduce((function(e,t){var n=parseInt(uc[t],10);return n&&e.push(n),e}),[])}function yc(e){var t,n,r,i,o,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=[];if(t=e,n=void 0!==(0,s.Z)(t,"mediaTypes.".concat(P.pX)),r=void 0!==(0,s.Z)(t,"mediaTypes.".concat(P.Mk)),i=void 0!==(0,s.Z)(t,"params.bidonmultiformat"),o="object"!==(0,bt.Z)((0,s.Z)(t,"params.video")),n&&i||(r&&o&&(n=!1),n&&o&&d(t,"params.video",{}),n)){if(-1===["outstream","instream"].indexOf((0,s.Z)(e,"mediaTypes.".concat(P.pX,".context"))))return c&&(0,a.H)("Rubicon: mediaTypes.video.context must be outstream or instream"),l;if(mc(e,P.pX).length<2)return c&&(0,a.H)("Rubicon: could not determine the playerSize of the video"),l;c&&(0,a.ji)("Rubicon: making video request for adUnit",e.adUnitCode),l.push(P.pX)}if(void 0!==(0,s.Z)(e,"mediaTypes.".concat(P.B5))&&l.push(P.B5),void 0!==(0,s.Z)(e,"mediaTypes.".concat(P.Mk))){if(0===mc(e,P.Mk).length)return c&&(0,a.H)("Rubicon: could not determine the sizes for banner request"),l;c&&(0,a.ji)("Rubicon: making banner request for adUnit",e.adUnitCode),l.push(P.Mk)}return l}function bc(e){var t=!1,n=["asi","sid","hp"];return e.nodes?((t=e.nodes.reduce((function(e,t){return e?n.every((function(e){return t.hasOwnProperty(e)})):e}),!0))||(0,a.H)("Rubicon: required schain params missing"),t):t}function _c(e,t){return"rp_schain"===e?"rp_schain=".concat(t):"".concat(e,"=").concat(encodeURIComponent(t))}var wc=!1;(0,Xe.dX)(fc),(0,o.z)("rubiconBidAdapter");var Tc=(0,J.df)({moduleType:si.y2,moduleName:"pubCommonId"}),Ic="cookie",Sc="html5",kc="_pubcid_optout",Cc="PublisherCommonId";function Ec(e,t){if(t===Ic)return Tc.getCookie(e);if(t===Sc&&Tc.hasLocalStorage()){var n=Tc.getDataFromLocalStorage("".concat(e,"_exp"));if(!n)return Tc.getDataFromLocalStorage(e);if(new Date(n).getTime()-Date.now()>0)return Tc.getDataFromLocalStorage(e)}}function Ac(e,t){return function(n,r){t?Pc(t,e,(function(){n(r()||e)}))():n(e)}}function Pc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;if(e){var r=(0,a.en)(e);r.search.id=encodeURIComponent("pubcid:"+t);var i=(0,a.Q2)(r);return function(){(0,a.hq)(i,n)}}}function xc(){return!!(Tc.cookiesAreEnabled()&&Ec(kc,Ic)||Tc.hasLocalStorage()&&Ec(kc,Sc))}var Oc={name:"sharedId",aliasName:"pubCommonId",gvlid:Ld.$P,decode:function(e,t){if(!xc())return(0,a.PN)(" Decoded value PubCommonId "+e),{pubcid:e};(0,a.PN)("PubCommonId decode: Has opted-out")},getId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0;if(xc())(0,a.PN)("PubCommonId: Has opted-out");else{if(!Y.VP.getCoppa()){var n=e.params,r=(n=void 0===n?{}:n).create,i=void 0===r||r,o=n.pixelUrl,s=t;if(!s){try{"object"===(0,bt.Z)(window[Cc])&&(s=window[Cc].getId())}catch(e){}s||(s=i&&(0,a.wn)()?(0,a.DO)():void 0)}return{id:s,callback:Ac(s,o)}}(0,a.PN)("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId")}},extendId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0;if(xc())return(0,a.PN)("PubCommonId: Has opted-out"),{id:void 0};if(Y.VP.getCoppa())(0,a.PN)("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId");else{var n=e.params,r=(n=void 0===n?{}:n).extend,i=void 0!==r&&r,o=n.pixelUrl;if(i)return o?{callback:Pc(o,t)}:{id:t}}},domainOverride:function(e,t){return function(){for(var t,n,r=document.domain.split("."),i="_gd".concat(Date.now(),"_").concat("sharedId"),o=0;o<r.length;o++){var a=r.slice(o).join(".");if(e.setCookie(i,"1",void 0,void 0,a),n=e.getCookie(i),e.setCookie(i,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,a),"1"!==n)return t;t=a}}}(Tc)};function Dc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dc(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,x.Bx)("userId",Oc),(0,o.z)("sharedIdSystem");var Mc="sharethrough",Nc="https://btlr.sharethrough.com/universal/v1?supply_id=".concat("WYu2BXv1"),Uc=function(){return window.location.protocol},Lc={code:Mc,supportedMediaTypes:[P.pX,P.Mk],gvlid:80,isBidRequestValid:function(e){return!!e.params.pkey&&e.bidder===Mc},buildRequests:function(e,t){var n=t.timeout,i=t.ortb2||{},o=Uc().indexOf("http")<0||Uc().indexOf("https")>-1,d={id:(0,a.DO)(),at:1,cur:["USD"],tmax:n,site:Rc({domain:(0,s.Z)(t,"refererInfo.domain",window.location.hostname),page:(0,s.Z)(t,"refererInfo.page",window.location.href),ref:(0,s.Z)(t,"refererInfo.ref")},i.site),device:{ua:navigator.userAgent,language:navigator.language,js:1,dnt:"1"===navigator.doNotTrack?1:0,h:window.screen.height,w:window.screen.width},regs:{coppa:!0===g.vc.getConfig("coppa")?1:0,ext:{}},source:{tid:t.auctionId,ext:{version:"7.47.0",str:"4.3.0",schain:e[0].schain}},bcat:(0,s.Z)(t.ortb2,"bcat")||e[0].params.bcat||[],badv:(0,s.Z)(t.ortb2,"badv")||e[0].params.badv||[],test:0};if(d.user=Bc(i.user,{}),d.user.ext||(d.user.ext={}),d.user.ext.eids=e[0].userIdAsEids||[],t.gdprConsent){var c=!0===t.gdprConsent.gdprApplies;d.regs.ext.gdpr=c?1:0,c&&(d.user.ext.consent=t.gdprConsent.consentString)}return t.uspConsent&&(d.regs.ext.us_privacy=t.uspConsent),e.map((function(e){var t={ext:{}},n=(0,s.Z)(e,"ortb2Imp.ext.tid");n&&(t.ext.tid=n);var i=(0,s.Z)(e,"ortb2Imp.ext.gpid",(0,s.Z)(e,"ortb2Imp.ext.data.pbadslot"));i&&(t.ext.gpid=i);var d,c,l,u,p=(0,s.Z)(e,"mediaTypes.video");if(p){var f=640,h=360;if(p.playerSize&&p.playerSize[0]&&p.playerSize[1]){var g=(0,r.Z)(p.playerSize,2);f=g[0],h=g[1]}t.video={pos:Bc(p.pos,0),topframe:(0,a.yL)()?0:1,skip:Bc(p.skip,0),linearity:Bc(p.linearity,1),minduration:Bc(p.minduration,5),maxduration:Bc(p.maxduration,60),playbackmethod:p.playbackmethod||[2],api:(l=p,u=l.api,u&&Array.isArray(u)&&u.length>0?u:[2]),mimes:p.mimes||["video/mp4"],protocols:(d=p,c=d.protocols,c&&Array.isArray(c)&&c.length>0?c:[2,3,5,6,7,8]),w:f,h,startdelay:Bc(p.startdelay,0),skipmin:Bc(p.skipmin,0),skipafter:Bc(p.skipafter,0),placement:"instream"===p.context?1:+(0,s.Z)(p,"placement",4)},p.delivery&&(t.video.delivery=p.delivery),p.companiontype&&(t.video.companiontype=p.companiontype),p.companionad&&(t.video.companionad=p.companionad)}else t.banner={pos:(0,s.Z)(e,"mediaTypes.banner.pos",0),topframe:(0,a.yL)()?0:1,format:e.sizes.map((function(e){return{w:+e[0],h:+e[1]}}))};return Rc({id:e.bidId,tagid:String(e.params.pkey),secure:o?1:0,bidfloor:jc(e)},t)})).filter((function(e){return!!e})).map((function(e){return{method:"POST",url:Nc,data:Rc(Rc({},d),{},{imp:[e]})}}))},interpretResponse:function(e,t){var n=e.body;return n&&n.seatbid&&0!==n.seatbid.length&&n.seatbid[0].bid&&0!==n.seatbid[0].bid.length?n.seatbid[0].bid.map((function(e){var r={requestId:e.impid,width:+e.w,height:+e.h,cpm:+e.price,creativeId:e.crid,dealId:e.dealid||null,mediaType:t.data.imp[0].video?P.pX:P.Mk,currency:n.cur||"USD",netRevenue:!0,ttl:360,ad:e.adm,nurl:e.nurl,meta:{advertiserDomains:e.adomain||[]}};return r.mediaType===P.pX&&(r.ttl=3600,r.vastXml=e.adm),r})):[]},getUserSyncs:function(e,t){return e.pixelEnabled&&void 0!==(0,s.Z)(t,"0.body.cookieSyncUrls")?t[0].body.cookieSyncUrls.map((function(e){return{type:"image",url:e}})):[]},onTimeout:function(e){},onBidWon:function(e){},onSetTargeting:function(e){}};function jc(e){var t=null;if("function"==typeof e.getFloor){var n=e.getFloor({currency:"USD",mediaType:e.mediaTypes&&e.mediaTypes.video?"video":"banner",size:e.sizes.map((function(e){return{w:e[0],h:e[1]}}))});"object"!==(0,bt.Z)(n)||"USD"!==n.currency||isNaN(parseFloat(n.floor))||(t=parseFloat(n.floor))}return null!==t?t:e.params.floor}function Bc(e,t){return null==e?t:e}(0,Xe.dX)(Lc),(0,o.z)("sharethroughBidAdapter");var qc={code:"smartadserver",gvlid:45,aliases:["smart"],supportedMediaTypes:[P.Mk,P.pX],isBidRequestValid:function(e){return!!(e.params&&e.params.siteId&&e.params.pageId&&e.params.formatId)},serializeSupplyChain:function(e){if(!e||!e.nodes)return null;var t=["asi","sid","hp","rid","name","domain"];return"".concat(e.ver,",").concat(e.complete,"!")+e.nodes.map((function(e){return t.map((function(t){return e[t]?encodeURIComponent(e[t]):""})).join(",")})).join("!")},adaptBannerSizes:function(e){return e.map((function(e){return{w:e[0],h:e[1]}}))},fillPayloadForVideoBidRequest:function(e,t,n){var r=t.playerSize[0];e.isVideo="instream"===t.context,e.mediaType=P.pX,e.videoData={videoProtocol:this.getProtocolForVideoBidRequest(t,n),playerWidth:r[0],playerHeight:r[1],adBreak:this.getStartDelayForVideoBidRequest(t,n)}},getProtocolForVideoBidRequest:function(e,t){return void 0!==t&&t.protocol?t.protocol:void 0!==e&&Array.isArray(e.protocols)?Math.max.apply(Math,e.protocols):null},getStartDelayForVideoBidRequest:function(e,t){if(void 0!==t&&t.startDelay)return t.startDelay;if(void 0!==e){if(0==e.startdelay)return 1;if(-1==e.startdelay)return 2;if(-2==e.startdelay)return 3}return 2},createServerRequest:function(e,t){return{method:"POST",url:(void 0!==t?t:"https://prg.smartadserver.com")+"/prebid/v1",data:JSON.stringify(e)}},buildRequests:function(e,t){var n=g.vc.getConfig("currency.adServerCurrency"),r=(0,s.Z)(t,"ortb2.user.data",g.vc.getAnyConfig("ortb2.user.data")),i=(0,s.Z)(t,"ortb2.site.content.data",g.vc.getAnyConfig("ortb2.site.content.data"));return e.reduce((function(e,o){var d={siteid:o.params.siteId,pageid:o.params.pageId,formatid:o.params.formatId,currencyCode:n,targeting:o.params.target&&""!==o.params.target?o.params.target:void 0,buid:o.params.buId&&""!==o.params.buId?o.params.buId:void 0,appname:o.params.appName&&""!==o.params.appName?o.params.appName:void 0,ckid:o.params.ckId||0,tagId:o.adUnitCode,pageDomain:t&&t.refererInfo&&t.refererInfo.page?t.refererInfo.page:void 0,transactionId:o.transactionId,timeout:g.vc.getConfig("bidderTimeout"),bidId:o.bidId,prebidVersion:"7.47.0",schain:qc.serializeSupplyChain(o.schain),sda:r,sdc:i};t&&(t.gdprConsent&&(d.addtl_consent=t.gdprConsent.addtlConsent,d.gdpr_consent=t.gdprConsent.consentString,d.gdpr=t.gdprConsent.gdprApplies),t.gppConsent&&(d.gpp=t.gppConsent.gppString,d.gpp_sid=t.gppConsent.applicableSections),t.uspConsent&&(d.us_privacy=t.uspConsent)),o&&o.userIdAsEids&&(d.eids=o.userIdAsEids),t&&t.uspConsent&&(d.us_privacy=t.uspConsent);var c=(0,s.Z)(o,"mediaTypes.banner"),l=(0,s.Z)(o,"mediaTypes.video"),u=l&&("instream"===l.context||"outstream"===l.context);if(c||u){var p;if(c){if(p=P.Mk,d.sizes=qc.adaptBannerSizes(c.sizes),u){var f=(0,a.I8)(d);qc.fillPayloadForVideoBidRequest(f,l,o.params.video),f.bidfloor=o.params.bidfloor||qc.getBidFloor(o,n,P.pX),e.push(qc.createServerRequest(f,o.params.domain))}}else p=P.pX,qc.fillPayloadForVideoBidRequest(d,l,o.params.video);d.bidfloor=o.params.bidfloor||qc.getBidFloor(o,n,p),e.push(qc.createServerRequest(d,o.params.domain))}else e.push({});return e}),[])},interpretResponse:function(e,t){var n=[],r=e.body;try{if(r&&!r.isNoAd&&(r.ad||r.adUrl)){var i=JSON.parse(t.data),o={requestId:i.bidId,cpm:r.cpm,width:r.width,height:r.height,creativeId:r.creativeId,dealId:r.dealId,currency:r.currency,netRevenue:r.isNetCpm,ttl:r.ttl,dspPixels:r.dspPixels,meta:{advertiserDomains:r.adomain?r.adomain:[]}};i.mediaType===P.pX?(o.mediaType=P.pX,o.vastUrl=r.adUrl,o.vastXml=r.ad,o.content=r.ad):(o.adUrl=r.adUrl,o.ad=r.ad),n.push(o)}}catch(e){(0,a.H)("Error while parsing smart server response",e)}return n},getBidFloor:function(e,t,n){if(!(0,a.LQ)(e.getFloor))return 0;var r=e.getFloor({currency:t||"USD",mediaType:n,size:"*"});return(0,a.PO)(r)&&!isNaN(r.floor)?r.floor:0},getUserSyncs:function(e,t){var n=[];return e.iframeEnabled&&t.length>0&&null!=t[0].body.cSyncUrl?n.push({type:"iframe",url:t[0].body.cSyncUrl}):e.pixelEnabled&&t.length>0&&void 0!==t[0].body.dspPixels&&t[0].body.dspPixels.forEach((function(e){n.push({type:"image",url:e})})),n}};(0,Xe.dX)(qc),(0,o.z)("smartadserverBidAdapter");var Fc="spotx",Vc={consented_providers:["3","7","11","12","15","20","22","35","43","46","48","55","57","61","62","66","70","80","83","85","86","89","93","108","122","124","125","126","131","134","135","136","143","144","147","149","153","154","159","161","162","165","167","171","178","184","188","192","195","196","202","209","211","218","221","228","229","230","236","239","241","253","255","259","266","271","272","274","286","291","294","303","308","310","311","313","314","316","317","322","323","327","336","338","340","348","350","358","359","363","367","370","371","384","385","389","393","394","397","398","407","414","415","424","429","430","432","436","438","440","442","443","445","448","449","453","459","479","482","486","491","492","494","495","503","505","510","522","523","528","537","540","550","559","560","568","571","574","575","576","584","585","587","588","590","591","592","595","609","621","624","723","725","733","737","776","780","782","787","797","798","802","803","814","817","820","821","827","829","839","853","864","867","874","899","904","922","926","931","932","933","938","955","973","976","979","981","985","987","991","1003","1024","1025","1027","1028","1029","1033","1034","1040","1047","1048","1051","1052","1053","1054","1062","1063","1067","1072","1085","1092","1095","1097","1099","1100","1107","1126","1127","1143","1149","1152","1162","1166","1167","1170","1171","1172","1188","1192","1199","1201","1204","1205","1211","1212","1215","1220","1225","1226","1227","1230","1232","1236","1241","1248","1250","1252","1268","1275","1276","1284","1286","1298","1301","1307","1312","1313","1317","1329","1336","1344","1345","1356","1362","1365","1375","1403","1409","1411","1415","1416","1419","1423","1440","1442","1449","1451","1455","1456","1468","1496","1503","1509","1512","1514","1517","1520","1525","1540","1547","1548","1555","1558","1570","1575","1577","1579","1583","1584","1591","1598","1603","1608","1613","1616","1626","1631","1633","1638","1642","1648","1651","1652","1653","1660","1665","1667","1669","1671","1674","1677","1678","1682","1684","1697","1703","1705","1716","1720","1721","1722","1725","1732","1733","1735","1739","1741","1745","1750","1753","1760","1765","1769","1776","1780","1782","1786","1791","1794","1799","1800","1801","1810","1827","1831","1832","1834","1837","1840","1843","1844","1845","1858","1859","1863","1866","1870","1872","1875","1878","1880","1882","1883","1889","1892","1896","1898","1899","1902","1905","1911","1922","1928","1929","1934","1942","1943","1944","1945","1958","1960","1962","1963","1964","1967","1968","1978","1985","1986","1987","1998","2003","2007","2012","2013","2027","2035","2038","2039","2044","2047","2052","2056","2059","2062","2064","2068","2070","2072","2078","2079","2084","2088","2090","2095","2100","2103","2107","2109","2113","2115","2121","2127","2130","2133","2137","2140","2141","2145","2147","2150","2156","2166","2170","2171","2176","2177","2179","2183","2186","2192","2198","2202","2205","2214","2216","2219","2220","2222","2223","2224","2225","2227","2228","2234","2238","2247","2251","2253","2262","2264","2271","2276","2278","2279","2282","2290","2292","2295","2299","2305","2306","2310","2311","2312","2315","2320","2325","2328","2331","2334","2335","2336","2337","2343","2346","2354","2357","2358","2359","2366","2370","2373","2376","2377","2380","2382","2387","2389","2392","2394","2400","2403","2405","2406","2407","2410","2411","2413","2414","2415","2416","2418","2422","2425","2427","2435","2437","2440","2441","2447","2453","2459","2461","2462","2464","2467","2468","2472","2477","2481","2484","2486","2492","2493","2496","2497","2498","2499","2504","2506","2510","2511","2512","2517","2526","2527","2531","2532","2534","2542","2544","2552","2555","2559","2563","2564","2567","2568","2569","2571","2572","2573","2575","2577","2579","2583","2584","2586","2589","2595","2596","2597","2601","2604","2605","2609","2610","2612","2614","2621","2622","2624","2628","2629","2632","2634","2636","2639","2643","2645","2646","2647","2649","2650","2651","2652","2656","2657","2658","2660","2661","2662","2663","2664","2669","2670","2673","2676","2677","2678","2681","2682","2684","2685","2686","2689","2690","2691","2695","2698","2699","2702","2704","2705","2706","2707","2709","2710","2713","2714","2727","2729","2739","2758","2765","2766","2767","2768","2770","2771","2772","2776","2777","2778","2779","2780","2783","2784","2786","2787","2791","2792","2793","2797","2798","2801","2802","2803","2805","2808","2809","2810","2811","2812","2813","2814","2817","2818","2824","2826","2827","2829","2830","2831","2832","2834","2836","2838","2840","2842","2843","2844","2850","2851","2852","2854","2858","2860","2862","2864","2865","2866","2867","2868","2869","2871"]},zc={code:Fc,gvlid:165,supportedMediaTypes:[P.pX],isBidRequestValid:function(e){if(e&&"object"!==(0,bt.Z)(e.params))return(0,a.H)(Fc+": params is not defined or is incorrect in the bidder settings."),!1;if(!(0,s.Z)(e,"mediaTypes.video"))return(0,a.H)(Fc+": mediaTypes.video is not present in the bidder settings."),!1;var t=(0,s.Z)(e,"mediaTypes.video.playerSize");if(!t||!(0,a.kJ)(t))return(0,a.H)(Fc+": mediaTypes.video.playerSize is not defined in the bidder settings."),!1;if(!(0,a.An)("channel_id",e.params))return(0,a.H)(Fc+": channel_id is not present in bidder params"),!1;if(("outstream"==(0,s.Z)(e,"mediaTypes.video.context")||"outstream"==(0,s.Z)(e,"params.ad_unit"))&&!(0,a.An)("outstream_function",e.params)){if(!(0,a.An)("outstream_options",e.params))return(0,a.H)(Fc+": please define outstream_options parameter or override the default SpotX outstream rendering by defining your own Outstream function using field outstream_function."),!1;if(!(0,a.An)("slot",e.params.outstream_options))return(0,a.H)(Fc+": please define parameter slot in outstream_options object in the configuration."),!1}return!0},buildRequests:function(e,t){var n=t.refererInfo.page||t.refererInfo.topmostLocation,r=!!n.match(/^https:/);return e.map((function(e){var i;i=(0,a.An)("page",e.params)?(0,a.An)("page",e.params):n;var o=(0,a.An)("channel_id",e.params),c=null,l=(0,s.Z)(e,"mediaTypes.video.playerSize"),u=l[0][0],p=l[0][1],f=r||((0,a.An)("secure",e.params)?1:0),h={sdk_name:"Prebid 1+",versionOrtb:"2.3"};if(""!=(0,a.An)("hide_skin",e.params)&&(h.hide_skin=+!!(0,a.An)("hide_skin",e.params)),""!=(0,a.An)("ad_volume",e.params)&&(h.ad_volume=(0,a.An)("ad_volume",e.params)),""!=(0,a.An)("ad_unit",e.params)&&(h.ad_unit=(0,a.An)("ad_unit",e.params)),""!=(0,a.An)("outstream_options",e.params)&&(h.outstream_options=(0,a.An)("outstream_options",e.params)),""!=(0,a.An)("outstream_function",e.params)&&(h.outstream_function=(0,a.An)("outstream_function",e.params)),""!=(0,a.An)("custom",e.params)&&(h.custom=(0,a.An)("custom",e.params)),""!=(0,a.An)("pre_market_bids",e.params)&&(0,a.kJ)((0,a.An)("pre_market_bids",e.params))){var m=(0,a.An)("pre_market_bids",e.params);for(var v in h.pre_market_bids=[],m){var y=m[v],b="";y.vast_url?b='<?xml version="1.0" encoding="utf-8"?><VAST version="2.0"><Ad><Wrapper><VASTAdTagURI>'+y.vast_url+"</VASTAdTagURI></Wrapper></Ad></VAST>":y.vast_string&&(b=y.vast_string),h.pre_market_bids.push({id:y.deal_id,seatbid:[{bid:[{impid:Date.now(),dealid:y.deal_id,price:y.price,adm:b}]}],cur:y.currency,ext:{event_log:[{}]}})}}var _=(0,a.An)("mimes",e.params)||(0,s.Z)(e,"mediaTypes.video.mimes")||["application/javascript","video/mp4","video/webm"],w={id:e.bidId,secure:f,video:{w:u,h:p,ext:h,mimes:_}};if((0,a.LQ)(e.getFloor)){var T=e.getFloor({currency:"USD",mediaType:"video",size:"*"});"USD"===T.currency&&(w.bidfloor=T.floor)}else""!=(0,a.An)("price_floor",e.params)&&(w.bidfloor=(0,a.An)("price_floor",e.params));var I=(0,a.An)("start_delay",e.params)||(0,s.Z)(e,"mediaTypes.video.startdelay");I&&(w.video.startdelay=0+Boolean(I));var S=(0,a.An)("min_duration",e.params)||(0,s.Z)(e,"mediaTypes.video.minduration");S&&(w.video.minduration=S);var k=(0,a.An)("max_duration",e.params)||(0,s.Z)(e,"mediaTypes.video.maxduration");k&&(w.video.maxduration=k);var C=(0,a.An)("placement_type",e.params)||(0,s.Z)(e,"mediaTypes.video.placement");C&&(w.video.ext.placement=C);var E=(0,a.An)("position",e.params)||(0,s.Z)(e,"mediaTypes.video.pos");E&&(w.video.ext.pos=E),e.crumbs&&e.crumbs.pubcid&&(c=e.crumbs.pubcid);var A=navigator.language?"language":"userLanguage",P={id:o,imp:w,site:{id:"",page:i,content:"content"},device:{h:screen.height,w:screen.width,dnt:(0,a.oV)()?1:0,language:navigator[A].split("-")[0],make:navigator.vendor?navigator.vendor:"",ua:navigator.userAgent},ext:{wrap_response:1}};g.vc.getConfig("cache")&&g.vc.getConfig("cache.url")&&!0===g.vc.getConfig("cache.ignoreBidderCacheKey")&&(P.ext.wrap_response=0),(0,a.An)("number_of_ads",e.params)&&(P.ext.number_of_ads=(0,a.An)("number_of_ads",e.params));var x={};return 1==(0,a.An)("spotx_all_google_consent",e.params)&&(x.consented_providers_settings=Vc),t&&t.gdprConsent&&(x.consent=t.gdprConsent.consentString,void 0!==t.gdprConsent.gdprApplies&&d(P,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&d(P,"regs.ext.us_privacy",t.uspConsent),e.userIdAsEids&&(x.eids=e.userIdAsEids,x.eids.forEach((function(e){"uidapi.com"===e.source&&e.uids.forEach((function(e){e.ext=e.ext||{},e.ext.rtiPartner="UID2"}))}))),c&&(x.fpc=c),e&&e.schain&&(P.source={ext:{schain:e.schain}}),(0,a.xb)(x)||(P.user={ext:x}),{method:"POST",url:"https://search.spotxchange.com/openrtb/2.3/dados/"+o+"?src_sys=prebid",data:P,bidRequest:t}}))},interpretResponse:function(e,t){var n=[],r=e.body;return r&&(0,a.kJ)(r.seatbid)&&(0,a.yi)(r.seatbid,(function(e){(0,a.yi)(e.bid,(function(e){var i={};for(var o in t.bidRequest.bids)e.impid==t.bidRequest.bids[o].bidId&&(i=t.bidRequest.bids[o]);(0,a.yi)(i.params.pre_market_bids,(function(t){t.deal_id==e.id&&(e.price=t.price,r.cur=t.currency)}));var d={requestId:i.bidId,currency:r.cur||"USD",cpm:e.price,creativeId:e.crid||"",dealId:e.dealid||"",ttl:360,netRevenue:!0,channel_id:r.id,mediaType:P.pX,width:e.w,height:e.h};g.vc.getConfig("cache")&&g.vc.getConfig("cache.url")&&!0===g.vc.getConfig("cache.ignoreBidderCacheKey")?d.vastXml=e.adm:(d.cache_key=e.ext.cache_key,d.vastUrl="https://search.spotxchange.com/ad/vast.html?key="+e.ext.cache_key,d.videoCacheKey=e.ext.cache_key),d.meta=d.meta||{},e&&e.adomain&&e.adomain.length>0&&(d.meta.advertiserDomains=e.adomain);var c=(0,s.Z)(i,"mediaTypes.video.context"),l=(0,s.Z)(i,"params.ad_unit");if("outstream"==c||"outstream"==l){var u=(0,s.Z)(i,"mediaTypes.video.playerSize"),p=h.Th.install({id:0,renderNow:!0,url:"/",config:{adText:"SpotX Outstream Video Ad via Prebid.js",player_width:u[0][0],player_height:u[0][1],content_page_url:(0,s.Z)(t,"data.site.page"),ad_mute:+!!(0,s.Z)(i,"params.ad_mute"),hide_skin:+!!(0,s.Z)(i,"params.hide_skin"),outstream_options:(0,s.Z)(i,"params.outstream_options"),outstream_function:(0,s.Z)(i,"params.outstream_function")}});try{p.setRender(Wc),p.setEventHandlers({impression:function(){return(0,a.ji)("SpotX outstream video impression event")},loaded:function(){return(0,a.ji)("SpotX outstream video loaded event")},ended:function(){(0,a.ji)("SpotX outstream renderer video event")}})}catch(e){(0,a.yN)("Prebid Error calling setRender or setEventHandlers on renderer",e)}d.renderer=p}n.push(d)}))})),n}};function Wc(e){if(null!=e.renderer.config.outstream_function&&"function"==typeof e.renderer.config.outstream_function){var t=function(e){var t=window.document.createElement("script"),n=Hc(e);return t.type="text/javascript",t.src="https://js.spotx.tv/easi/v1/"+e.channel_id+".js",(0,a.D9)(t,n),t}(e);e.renderer.config.outstream_function(e,t)}else try{var n=(0,a.An)("in_iframe",e.renderer.config.outstream_options),r="https://js.spotx.tv/easi/v1/"+e.channel_id+".js",i=Hc(e);if(n&&"IFRAME"==window.document.getElementById(n).nodeName){var o=window.document.getElementById(n),s=o.contentDocument;!s&&o.contentWindow&&(s=o.contentWindow.document),(0,W.B)(r,Fc,void 0,s,i)}else(0,W.B)(r,Fc,void 0,void 0,i)}catch(e){(0,a.H)("[SPOTX][renderer] Error:"+e.message)}}function Hc(e){var t=(0,a.An)("slot",e.renderer.config.outstream_options);(0,a.ji)("[SPOTX][renderer] Handle SpotX outstream renderer");var n={};n["data-spotx_channel_id"]=""+e.channel_id,n["data-spotx_vast_url"]=""+e.vastUrl,n["data-spotx_content_page_url"]=e.renderer.config.content_page_url,n["data-spotx_ad_unit"]="incontent",(0,a.ji)("[SPOTX][renderer] Default behavior"),(0,a.An)("ad_mute",e.renderer.config.outstream_options)&&(n["data-spotx_ad_mute"]="1"),n["data-spotx_collapse"]="0",n["data-spotx_autoplay"]="1",n["data-spotx_blocked_autoplay_override_mode"]="1",n["data-spotx_video_slot_can_autoplay"]="1",n["data-spotx_content_container_id"]=t;var r=(0,a.An)("playersize_auto_adapt",e.renderer.config.outstream_options);if(r&&(0,a.jn)(r)&&!0===r){var i=e.width&&(0,a.hj)(e.width)&&e.height&&(0,a.hj)(e.height)?e.width/e.height:4/3,o=window.document.getElementById(t).clientWidth,s=e.renderer.config.player_width,d=e.renderer.config.player_height,c=0,l=0;o<s&&(d=(s=o)/i),i<=1?(c=Math.round(d*i),l=d):(c=s,l=Math.round(s/i)),n["data-spotx_content_width"]=""+c,n["data-spotx_content_height"]=""+l}var u=(0,a.An)("custom_override",e.renderer.config.outstream_options);if(u&&(0,a.PO)(u))for(var p in(0,a.ji)("[SPOTX][renderer] Custom behavior."),u)u.hasOwnProperty(p)&&("channel_id"===p||"vast_url"===p||"content_page_url"===p||"ad_unit"===p?(0,a.yN)("[SPOTX][renderer] Custom behavior: following option cannot be overridden: "+p):n["data-spotx_"+p]=u[p]);return n}function Zc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zc(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,Xe.dX)(zc),(0,o.z)("spotxBidAdapter");var Gc="teads",Kc=12,Xc=11,Jc=0,Yc=22,Qc=(0,J.df)({bidderCode:Gc}),el={code:Gc,gvlid:132,supportedMediaTypes:["video","banner"],isBidRequestValid:function(e){var t=!1;if(void 0!==e.params){var n=il((0,a.NA)(e.params,"placementId")),r=il((0,a.NA)(e.params,"pageId"));t=n&&r}return t||(0,a.H)("Teads placementId and pageId parameters are required. Bid aborted."),t},buildRequests:function(e,t){var n,r=e.map(rl),i=$c($c({referrer:tl(t),pageReferrer:document.referrer,networkBandwidth:(n=window.navigator,n&&n.connection&&n.connection.downlink>=0?n.connection.downlink.toString():""),timeToFirstByte:nl(window),data:r,deviceWidth:screen.width,hb_version:"7.47.0"},function(e){var t={unifiedId2:"uid2.id",liveRampId:"idl_env",lotamePanoramaId:"lotamePanoramaId",id5Id:"id5id.uid",criteoId:"criteoId",yahooConnectId:"connectId",quantcastId:"quantcastId",epsilonPublisherLinkId:"publinkId",publisherFirstPartyViewerId:"pubcid",merkleId:"merkleId.id",kinessoId:"kpuid"},n={};for(var r in t){var i=t[r],o=(0,s.Z)(e,"0.userId.".concat(i));o&&(n[r]=o)}return n}(e)),function(e){var t=(0,s.Z)(e,"0.userId.teadsId");if(t)return{firstPartyCookieTeadsId:t};if(Qc.cookiesAreEnabled(null)){var n=Qc.getCookie("_tfpvi",null);if(n)return{firstPartyCookieTeadsId:n}}return{}}(e)),o=e[0];o.schain&&(i.schain=o.schain);var a=t.gdprConsent;if(t&&a){var d="boolean"==typeof a.gdprApplies,c="string"==typeof a.consentString,l=d?function(e,t){var n=Kc;return e?t&&!t.isServiceSpecific&&(n=Xc):n=Jc,n}(a.gdprApplies,a.vendorData):Yc;i.gdpr_iab={consent:c?a.consentString:"",status:l,apiVersion:a.apiVersion}}t&&t.uspConsent&&(i.us_privacy=t.uspConsent);var u=(0,s.Z)(o,"ortb2.device.sua");return u&&(i.userAgentClientHints=u),{method:"POST",url:"https://a.teads.tv/hb/bid-request",data:JSON.stringify(i)}},interpretResponse:function(e,t){var n=[];return(e=e.body).responses&&e.responses.forEach((function(e){var t={cpm:e.cpm,width:e.width,height:e.height,currency:e.currency,netRevenue:!0,ttl:e.ttl,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]},ad:e.ad,requestId:e.bidId,creativeId:e.creativeId,placementId:e.placementId};e.dealId&&(t.dealId=e.dealId),n.push(t)})),n}};function tl(e){var t="";return e&&e.refererInfo&&e.refererInfo.page&&(t=e.refererInfo.page),t}function nl(e){var t=e.performance||e.webkitPerformance||e.msPerformance||e.mozPerformance,n=t&&"function"==typeof t.getEntriesByType&&"[object Function]"===Object.prototype.toString.call(t.getEntriesByType)&&t.getEntriesByType("navigation")[0]&&t.getEntriesByType("navigation")[0].responseStart&&t.getEntriesByType("navigation")[0].requestStart&&t.getEntriesByType("navigation")[0].responseStart>0&&t.getEntriesByType("navigation")[0].requestStart>0&&Math.round(t.getEntriesByType("navigation")[0].responseStart-t.getEntriesByType("navigation")[0].requestStart);if(n)return n.toString();var r=t&&t.timing.responseStart&&t.timing.requestStart&&t.timing.responseStart>0&&t.timing.requestStart>0&&t.timing.responseStart-t.timing.requestStart;return r?r.toString():""}function rl(e){var t={},n=(0,a.NA)(e.params,"placementId"),r=(0,a.NA)(e.params,"pageId"),i=(0,s.Z)(e,"ortb2Imp.ext.gpid");return t.sizes=function(e){return(0,a.sF)(function(e){var t=(0,s.Z)(e,"mediaTypes.video.playerSize"),n=(0,s.Z)(e,"mediaTypes.video.sizes"),r=(0,s.Z)(e,"mediaTypes.banner.sizes");return(0,a.kJ)(r)||(0,a.kJ)(t)||(0,a.kJ)(n)?[r,n,t].reduce((function(e,t){return(0,a.kJ)(t)&&((0,a.kJ)(t[0])?t.forEach((function(t){e.push(t)})):e.push(t)),e}),[]):e.sizes}(e))}(e),t.bidId=(0,a.An)("bidId",e),t.bidderRequestId=(0,a.An)("bidderRequestId",e),t.placementId=parseInt(n,10),t.pageId=parseInt(r,10),t.adUnitCode=(0,a.An)("adUnitCode",e),t.auctionId=(0,a.An)("auctionId",e),t.transactionId=(0,a.An)("transactionId",e),i&&(t.gpid=i),t}function il(e){return parseInt(e)>0}(0,Xe.dX)(el),(0,o.z)("teadsBidAdapter");var ol="tremorhub.com",al="ads.".concat(ol,"/ad/tag"),sl="events.".concat(ol,"/diag"),dl={code:"telaria",gvlid:202,aliases:[{code:"tremor",gvlid:202},{code:"tremorvideo",gvlid:202}],supportedMediaTypes:[P.pX],isBidRequestValid:function(e){return!!(e&&e.params&&e.params.adCode&&e.params.supplyCode)},buildRequests:function(e,t){var n=[];return e.forEach((function(e){var r=function(e,t){var n,r,i=(0,s.Z)(e,"mediaTypes.video.playerSize");i||(0,a.yN)("Although player size isn't required it is highly recommended"),i&&(!(0,a.kJ)(i)||2!==i.length||isNaN(i[0])||isNaN(i[1])?"object"===(0,bt.Z)(i)&&(n=i[0][0],r=i[0][1]):(n=i[0],r=i[1]));var o=(0,s.Z)(e,"params.supplyCode"),d=(0,s.Z)(e,"params.adCode");if(o&&d){var c="https://".concat(o,".").concat(al,"?adCode=").concat(d);n&&(c+="&playerWidth=".concat(n)),r&&(c+="&playerHeight=".concat(r));var l=Object.assign({srcPageUrl:cl()},e.params);return delete l.adCode,c+="".concat(ul(l,e.schain)),c+="&transactionId=".concat(e.transactionId),t&&(t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(c+="&gdpr=".concat(t.gdprConsent.gdprApplies?1:0)),t.gdprConsent.consentString&&(c+="&gdpr_consent=".concat(t.gdprConsent.consentString))),t.refererInfo&&t.refererInfo.page&&(c+="&referrer=".concat(encodeURIComponent(t.refererInfo.page)))),c+"&hb=1&fmt=json"}}(e,t);r&&n.push({method:"GET",url:r,bidId:e.bidId,vastUrl:r.split("&fmt=json")[0]})})),n},interpretResponse:function(e,t){var n,r,i,o=[];try{n=e.body,t.url.split("&").forEach((function(e){var t=e.toLowerCase();t.indexOf("player")>-1&&(t.indexOf("width")>-1?r=e.split("=")[1]:t.indexOf("height")>-1&&(i=e.split("=")[1]))}))}catch(e){(0,a.H)(e),r=0,i=0}if(!n||n.error){var s="in response for ".concat(t.bidderCode," adapter");n&&n.error&&(s+=": ".concat(n.error)),(0,a.H)(s)}else(0,a.xb)(n.seatbid)||n.seatbid[0].bid.forEach((function(e){e&&o.push(function(e,t,n,r){var i={requestId:e.bidId,cpm:t.price,creativeId:t.crid||"-1",vastXml:t.adm,vastUrl:e.vastUrl,mediaType:"video",width:n,height:r,currency:"USD",netRevenue:!0,ttl:300,ad:t.adm,meta:{}};return t.adomain&&t.adomain.length>0&&(i.meta.advertiserDomains=t.adomain),i}(t,e,r,i))}));return o},getUserSyncs:function(e,t){var n=[];return e.pixelEnabled&&t.length&&((0,s.Z)(t,"0.body.ext.telaria.userSync")||[]).forEach((function(e){return n.push({type:"image",url:e})})),n},onTimeout:function(e){var t=pl(e);t&&(0,a.hq)(t)}};function cl(){return encodeURIComponent(document.location.href)}function ll(e){return""!==e&&void 0!==e?encodeURIComponent(e):""}function ul(e,t){var n="";if(!(0,a.xb)(e)){for(var r in e)"schain"!==r&&e.hasOwnProperty(r)&&!(0,a.xb)(e[r])&&(n+="&".concat(r,"=").concat(e[r]));n+=function(e){if((0,a.xb)(e))return"";var t="&schain=".concat(e.ver,",").concat(e.complete);return e.nodes.forEach((function(e){t+="!",t+="".concat(ll(e.asi),","),t+="".concat(ll(e.sid),","),t+="".concat(ll(e.hp),","),t+="".concat(ll(e.rid),","),t+="".concat(ll(e.name),","),t+="".concat(ll(e.domain))})),t}((0,a.xb)(t)?e.schain:t)}return n}var pl=function(e){var t=(0,s.Z)(e,"0.params.0");if(!(0,a.xb)(t)){var n="https://".concat(sl);return t=Object.assign({srcPageUrl:cl()},t),(n+="".concat(ul(t)))+"&hb=1&evt=TO"}};function fl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fl(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,Xe.dX)(dl),(0,o.z)("telariaBidAdapter");var gl="triplelift",ml=!0,vl=null,yl=(0,J.df)({bidderCode:gl}),bl={gvlid:28,code:gl,supportedMediaTypes:[P.Mk,P.pX],isBidRequestValid:function(e){return void 0!==e.params.inventoryCode},buildRequests:function(e,t){var n="https://tlx.3lift.com/header/auction?",r=function(e,t){var n,r,i={},o=e[0].schain,s=function(e){var t={},n={},r={},i=e.ortb2||{},o=function(){var e=yl.getDataFromLocalStorage("opecloud_ctx");if(!e)return null;try{return JSON.parse(e)}catch(e){return(0,a.H)("Triplelift: error parsing JSON: ",e),null}}(),s=Object.assign({},i.site),d=Object.assign({},i.user);if(o){d.data=d.data||[];try{d.data.push({name:"www.1plusx.com",ext:o})}catch(e){(0,a.H)("Triplelift: error adding 1plusX segments: ",e)}}return Sl(n,s),Sl(r,d),(0,a.xb)(n)||(t.context=n),(0,a.xb)(r)||(t.user=r),t}(t);i.imp=e.map((function(e,t){var n,r,i,o,s={id:t,tagid:e.params.inventoryCode,floor:Il(e)};return _l(e)&&(s.video=function(e){var t=hl(hl({},e.params.video),e.mediaTypes.video);try{t.w||(t.w=t.playerSize[0][0]),t.h||(t.h=t.playerSize[0][1])}catch(e){(0,a.yN)("Video size not defined",e)}return"instream"===t.context&&(t.placement=1),"outstream"===t.context&&(t.placement?-1===[3,4,5].indexOf(t.placement)&&((0,a.ji)("video.placement value of ".concat(t.placement," is invalid for outstream context. Setting placement to 3")),t.placement=3):t.placement=3),t.playbackmethod&&Number.isInteger(t.playbackmethod)&&(t.playbackmethod=Array.from(String(t.playbackmethod),Number)),delete t.playerSize,t}(e)),e.mediaTypes.banner&&!wl(e)&&(s.banner={format:(o=e.sizes,o.filter(El).map((function(e){return{w:e[0],h:e[1]}})))}),(0,a.xb)(e.ortb2Imp)||(s.fpd=(n=e.ortb2Imp,r={},Sl(i={},n.ext),(0,a.xb)(i)||(r.context=i),r)),s}));var d=[].concat((0,A.Z)(kl([e[0]],"tdid","adserver.org","TDID")),(0,A.Z)(function(e){return kl(e,"idl_env","liveramp.com","idl")}([e[0]])),(0,A.Z)(function(e){return kl(e,"criteoId","criteo.com","criteoId")}([e[0]])),(0,A.Z)(function(e){return kl(e,"pubcid","pubcid.org","pubcid")}([e[0]])),(0,A.Z)(function(e){var t=["adserver.org","liveramp.com","criteo.com","pubcid.org"],n=[];return e.userIdAsEids&&e.userIdAsEids.forEach((function(e){try{if(-1===t.indexOf(e.source)){var r=e.uids.map((function(t){return{id:t.id,ext:{rtiPartner:e.source}}}));n.push({source:e.source,uids:r})}}catch(t){(0,a.yN)("Triplelift: Error attempting to add ".concat(e," to bid request"),t)}})),n}(e[0])));d.length>0&&(i.user={ext:{eids:d}});var c=function(e,t){var n={};return(0,a.xb)(e)||(n.schain=hl({},e)),(0,a.xb)(t)||(n.fpd=hl({},t)),n}(o,s);return(0,a.xb)(c)||(i.ext=c),null!=t&&null!==(n=t.ortb2)&&void 0!==n&&null!==(r=n.regs)&&void 0!==r&&r.gpp&&(i.regs=Object.assign({},t.ortb2.regs)),i}(e,t);if(n=(0,a.t0)(n,"lib","prebid"),n=(0,a.t0)(n,"v","7.47.0"),t&&t.refererInfo){var i=t.refererInfo.page;n=(0,a.t0)(n,"referrer",i)}return t&&t.timeout&&(n=(0,a.t0)(n,"tmax",t.timeout)),t&&t.gdprConsent&&(void 0!==t.gdprConsent.gdprApplies&&(ml=t.gdprConsent.gdprApplies,n=(0,a.t0)(n,"gdpr",ml.toString())),void 0!==t.gdprConsent.consentString&&(vl=t.gdprConsent.consentString,n=(0,a.t0)(n,"cmp_cs",vl))),t&&t.uspConsent&&(n=(0,a.t0)(n,"us_privacy",t.uspConsent)),!0===g.vc.getConfig("coppa")&&(n=(0,a.t0)(n,"coppa",!0)),n.lastIndexOf("&")===n.length-1&&(n=n.substring(0,n.length-1)),(0,a.ji)("tlCall request built: "+n),{method:"POST",url:n,data:r,bidderRequest:t}},interpretResponse:function(e,t){var n=t.bidderRequest;return(e.body.bids||[]).map((function(e){return function(e,t){var n={},r=t.width||1,i=t.height||1,o=t.deal_id||"",a=t.crid||"",s=e.bids[t.imp_id];return 0!=t.cpm&&t.ad&&(n={requestId:s.bidId,cpm:t.cpm,width:r,height:i,netRevenue:!0,ad:t.ad,creativeId:a,dealId:o,currency:"USD",ttl:300,tl_source:t.tl_source,meta:{}},_l(s)&&"video"===t.media_type&&(n.vastXml=t.ad,n.mediaType="video",n.ttl=3600),t.advertiser_name&&(n.meta.advertiserName=t.advertiser_name),t.adomain&&t.adomain.length&&(n.meta.advertiserDomains=t.adomain),t.tl_source&&"hdx"==t.tl_source&&(_l(s)&&"video"===t.media_type?n.meta.mediaType="video":n.meta.mediaType="banner"),t.tl_source&&"tlx"==t.tl_source&&(n.meta.mediaType="native"),a&&(n.meta.networkId=a.slice(0,a.indexOf("_")))),n}(n,e)}))},getUserSyncs:function(e,t,n,r){var i=function(e){if(e)return e.iframeEnabled?"iframe":e.pixelEnabled?"image":void 0}(e);if(i){var o="https://eb2.3lift.com/sync?";return"image"===i&&(o=(0,a.t0)(o,"px",1),o=(0,a.t0)(o,"src","prebid")),null!==vl&&(o=(0,a.t0)(o,"gdpr",ml),o=(0,a.t0)(o,"cmp_cs",vl)),r&&(o=(0,a.t0)(o,"us_privacy",r)),[{type:i,url:o}]}}};function _l(e){return Tl(e)&&(wl(e)||function(e){return Tl(e)&&"outstream"===e.mediaTypes.video.context.toLowerCase()}(e))}function wl(e){return Tl(e)&&"instream"===e.mediaTypes.video.context.toLowerCase()}function Tl(e){return e.mediaTypes.video&&e.mediaTypes.video.context}function Il(e){var t=null;if("function"==typeof e.getFloor)try{var n=e.getFloor({currency:"USD",mediaType:_l(e)?"video":"banner",size:"*"});"object"!==(0,bt.Z)(n)||"USD"!==n.currency||isNaN(parseFloat(n.floor))||(t=parseFloat(n.floor))}catch(e){(0,a.H)("Triplelift: getFloor threw an error: ",e)}return null!==t?t:e.params.floor}function Sl(e,t){(0,a.xb)(t)||Object.keys(t).forEach((function(n){null!=t[n]&&(e[n]=t[n])}))}function kl(e,t,n,r){return e.map(function(e){return function(t){return t&&t.userId&&t.userId[e]}}(t)).filter(Cl(t)).map(function(e,t){return function(n){return{source:e,uids:[{id:n.id?n.id:n,ext:{rtiPartner:t}}]}}}(n,r))}var Cl=function(e){return function(t,n,r){var i=!!t&&((0,a.d8)(t)?!!t:(0,a.PO)(t)&&!(0,a.kJ)(t)&&!(0,a.xb)(t)&&t.id&&(0,a.d8)(t.id)&&!!t.id);return i||void 0===r[0]||(0,a.yN)("Triplelift: invalid ".concat(e," userId format")),i}};function El(e){return 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}(0,Xe.dX)(bl),(0,o.z)("tripleliftBidAdapter");var Al="unifiedId",Pl={name:Al,gvlid:21,decode:function(e){return e&&"string"==typeof e.TDID?{tdid:e.TDID}:void 0},getId:function(e){var t=e&&e.params||{};if(t&&("string"==typeof t.partner||"string"==typeof t.url)){var n=t.url||"https://match.adsrvr.org/track/rid?ttd_pid=".concat(t.partner,"&fmt=json");return{callback:function(e){var t={success:function(t){var n;if(t)try{n=JSON.parse(t)}catch(e){(0,a.H)(e)}e(n)},error:function(t){(0,a.H)("".concat(Al,": ID fetch encountered an error"),t),e()}};(0,mt.h)(n,t,void 0,{method:"GET",withCredentials:!0})}}}(0,a.H)("User ID - unifiedId submodule requires either partner or url to be defined")}};(0,x.Bx)("userId",Pl),(0,o.z)("unifiedIdSystem");var xl=["bids","bidderRequestId","auctionId","bidderCode"];function Ol(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ol(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ol(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rl={code:"unruly",supportedMediaTypes:[P.pX,P.Mk],gvlid:36,isBidRequestValid:function(e){var t=(0,s.Z)(e,"params.siteId")&&function(e){var t=(0,s.Z)(e,"mediaTypes.video"),n=(0,s.Z)(e,"mediaTypes.banner"),r=!(!t&&!n);return r&&t&&(r=function(e){return!!e.context&&-1!==["outstream","instream"].indexOf(e.context)}(t)),r&&n&&(r=function(e){return e.sizes}(n)),r}(e);return!!t},buildRequests:function(e,t){var n="https://targeting.unrulymedia.com/unruly_prebid";return e[0]&&(n=(0,s.Z)(e[0],"params.endpoint")||n),function(e,t,n){n.bids,n.bidderRequestId,n.auctionId,n.bidderCode;var r=Mr(n,xl),i=n.bids.length-t.length,o={};t.forEach((function(e){var t=e.params.siteId;!function(e){Object.keys(e.mediaTypes).forEach((function(t){var n;n="function"==typeof e.getFloor?e.getFloor({currency:"USD",mediaType:t,size:"*"}).floor||0:e.params.floor||0,e.mediaTypes[t].floor=n}))}(e),function(e){var t=(0,s.Z)(e,"mediaTypes.banner");if(t){var n={},r=[];t.sizes.forEach((function(e){n[e.toString()]||(n[e.toString()]=!0,r.push(e))})),t.sizes=r}}(e),o[t]=o[t]||[],o[t].push(e)}));var a=[];return Object.keys(o).forEach((function(t){var n={bidderRequest:Object.assign({},Dl({bids:o[t],invalidBidsCount:i},r))};a.push(Object.assign({},Dl({data:n},e)))})),a}({url:n,method:"POST",options:{contentType:"application/json"}},e,t)},interpretResponse:function(){var e,t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).body;return n&&n.bids?(e=n.bids,t=[],e.forEach((function(e){var n,r=(0,s.Z)(e,"meta.mediaType");if(r&&"banner"===r.toLowerCase())e.mediaType=P.Mk,n=function(e){if(e.ad)return e;(0,a.H)(new Error("UnrulyBidAdapter: Missing ad config."))}(e);else if(r&&"video"===r.toLowerCase()){var i=(0,s.Z)(e,"meta.videoContext");e.mediaType=P.pX,"instream"===i?n=function(e){if(e.vastUrl||e.vastXml)return e;(0,a.H)(new Error("UnrulyBidAdapter: Missing vastUrl or vastXml config."))}(e):"outstream"===i&&(n=function(e){var t=!!(0,s.Z)(e,"ext.renderer.config"),n=!!(0,s.Z)(e,"ext.renderer.config.siteId");if(t){if(n){var r=(0,s.Z)(e,"ext.renderer");!function(e,t){if(!e.config)throw new Error("UnrulyBidAdapter: Missing renderer config.");if(!e.config.siteId)throw new Error("UnrulyBidAdapter: Missing renderer siteId.");parent.window.unruly=parent.window.unruly||{},parent.window.unruly.native=parent.window.unruly.native||{},parent.window.unruly.native.siteId=parent.window.unruly.native.siteId||e.config.siteId,parent.window.unruly.native.adSlotId=t,parent.window.unruly.native.supplyMode="prebid"}(r,e.requestId),parent.window.unruly.native.prebid=parent.window.unruly.native.prebid||{},parent.window.unruly.native.prebid.uq=parent.window.unruly.native.prebid.uq||[];var i=h.Th.install(Object.assign({},r)),o=Object.assign({},e,{renderer:i,adUnitCode:(0,s.Z)(e,"ext.adUnitCode")});return i.setRender((function(){var e;e=o,parent.window.unruly.native.prebid.uq.push(["render",e])})),e.renderer=e.renderer||i,e}(0,a.H)(new Error("UnrulyBidAdapter: Missing renderer siteId."))}else(0,a.H)(new Error("UnrulyBidAdapter: Missing renderer config."))}(e))}n&&t.push(n)})),t):[]}};(0,Xe.dX)(Rl),(0,o.z)("unrulyBidAdapter");var Ml={growthCodeId:{getValue:function(e){return e.gc_id},source:"growthcode.io",atype:1,getUidExt:function(e){var t=(0,a.ei)(e,["h1","h2","h3"]);if(Object.keys(t).length)return t}},trustpid:{source:"trustpid.com",atype:1,getValue:function(e){return e}},intentIqId:{source:"intentiq.com",atype:1},naveggId:{source:"navegg.com",atype:1},pairId:{source:"google.com",atype:571187},justId:{source:"justtag.com",atype:1},pubcid:{source:"pubcid.org",atype:1},tdid:{source:"adserver.org",atype:1,getUidExt:function(){return{rtiPartner:"TDID"}}},id5id:{getValue:function(e){return e.uid},source:"id5-sync.com",atype:1,getUidExt:function(e){if(e.ext)return e.ext}},ftrackId:{source:"flashtalking.com",atype:1,getValue:function(e){var t="";return e&&e.ext&&e.ext.DeviceID&&(t=e.ext.DeviceID),t},getUidExt:function(e){return e&&e.ext}},parrableId:{source:"parrable.com",atype:1,getValue:function(e){return e.eid?e.eid:e.ccpaOptout?"":null},getUidExt:function(e){var t=(0,a.ei)(e,["ibaOptout","ccpaOptout"]);if(Object.keys(t).length)return t}},idl_env:{source:"liveramp.com",atype:3},lipb:{getValue:function(e){return e.lipbid},source:"liveintent.com",atype:3,getEidExt:function(e){if(Array.isArray(e.segments)&&e.segments.length)return{segments:e.segments}}},bidswitch:{source:"bidswitch.net",atype:3,getValue:function(e){return e.id}},medianet:{source:"media.net",atype:3,getValue:function(e){return e.id}},britepoolid:{source:"britepool.com",atype:3},dmdId:{source:"hcn.health",atype:3},lotamePanoramaId:{source:"crwdcntrl.net",atype:1},criteoId:{source:"criteo.com",atype:1},merkleId:{atype:3,getSource:function(e){var t;return null!=e&&null!==(t=e.ext)&&void 0!==t&&t.ssp?"".concat(e.ext.ssp,".merkleinc.com"):"merkleinc.com"},getValue:function(e){return e.id},getUidExt:function(e){return e.keyID?{keyID:e.keyID}:e.ext?e.ext:void 0}},netId:{source:"netid.de",atype:1},IDP:{source:"zeotap.com",atype:1},hadronId:{source:"audigent.com",atype:1},quantcastId:{source:"quantcast.com",atype:1},idx:{source:"idx.lat",atype:1},connectid:{source:"verizonmedia.com",atype:3},fabrickId:{source:"neustar.biz",atype:1},mwOpenLinkId:{source:"mediawallahscript.com",atype:1},tapadId:{source:"tapad.com",atype:1},novatiq:{getValue:function(e){return void 0===e.snowflake.id?e.snowflake:e.snowflake.id},source:"novatiq.com"},uid2:{source:"uidapi.com",atype:3,getValue:function(e){return e.id}},deepintentId:{source:"deepintent.com",atype:3},admixerId:{source:"admixer.net",atype:3},adtelligentId:{source:"adtelligent.com",atype:3},amxId:{source:"amxdt.net",atype:1},publinkId:{source:"epsilon.com",atype:3},kpuid:{source:"kpuid.com",atype:3},imppid:{source:"ppid.intimatemerger.com",atype:1},imuid:{source:"intimatemerger.com",atype:1},connectId:{source:"yahoo.com",atype:3},qid:{source:"adquery.io",atype:1},dacId:{source:"impact-ad.jp",atype:1},"33acrossId":{source:"33across.com",atype:1,getValue:function(e){return e.envelope}},tncid:{source:"thenewco.it",atype:3},gravitompId:{source:"gravito.net",atype:1},czechAdId:{source:"czechadid.cz",atype:1},oneKeyData:{getValue:function(e){if(e&&Array.isArray(e.identifiers)&&e.identifiers[0])return e.identifiers[0].value},source:"paf",atype:1,getEidExt:function(e){if(e&&e.preferences)return{preferences:e.preferences}},getUidExt:function(e){if(e&&Array.isArray(e.identifiers)&&e.identifiers[0]){var t=e.identifiers[0];return{version:t.version,type:t.type,source:t.source}}}}};function Nl(e,t){var n=Ml[t];if(n&&e){var r={};r.source=(0,a.LQ)(n.getSource)?n.getSource(e):n.source;var i=(0,a.LQ)(n.getValue)?n.getValue(e):e;if((0,a.d8)(i)){var o={id:i,atype:n.atype};if((0,a.LQ)(n.getUidExt)){var s=n.getUidExt(e);s&&(o.ext=s)}if(r.uids=[o],(0,a.LQ)(n.getEidExt)){var d=n.getEidExt(e);d&&(r.ext=d)}return r}}return null}function Ul(e){var t=[],n=function(n){if(e.hasOwnProperty(n))if("pubProvidedId"===n)t=t.concat(e.pubProvidedId);else if(Array.isArray(e[n]))e[n].forEach((function(e,r,i){var o=Nl(e,n);o&&t.push(o)}));else{var r=Nl(e[n],n);r&&t.push(r)}};for(var r in e)n(r);return t}var Ll,jl,Bl,ql,Fl,Vl,zl=(0,x.z3)("sync",(function(){})),Wl="User ID",Hl=J.c$,Zl=J.Dp,$l="_pbjs_userid_consent_data",Gl=30,Kl="_pbjs_id_optout",Xl=(0,J.eA)("userid"),Jl=!1,Yl=[],Ql=[],eu=[],tu=function(){return null==Vl&&(Vl=(0,Q.V6)()),Vl};function nu(e){return tu().fork().renameWith((function(t){return["userId.mod.".concat(t),"userId.mods.".concat(e,".").concat(t)]}))}function ru(e){var t="function"==typeof e.submodule.domainOverride?e.submodule.domainOverride():null,n=e.config.storage.name;return function(e,r,i){Xl.setCookie(n+(e||""),r,i,"Lax",t)}}function iu(e,t){var n=e.config.storage;try{var r=new Date(Date.now()+864e5*n.expires).toUTCString(),i=(0,a.PO)(t)?JSON.stringify(t):t;if(n.type===Hl){var o=ru(e);o(null,i,r),"number"==typeof n.refreshInSeconds&&o("_last",(new Date).toUTCString(),r)}else n.type===Zl&&(Xl.setDataInLocalStorage("".concat(n.name,"_exp"),r),Xl.setDataInLocalStorage(n.name,encodeURIComponent(i)),"number"==typeof n.refreshInSeconds&&Xl.setDataInLocalStorage("".concat(n.name,"_last"),(new Date).toUTCString()))}catch(e){(0,a.H)(e)}}function ou(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=n?"".concat(e.name,"_").concat(n):e.name;try{if(e.type===Hl)t=Xl.getCookie(r);else if(e.type===Zl){var i=Xl.getDataFromLocalStorage("".concat(e.name,"_exp"));""===i?t=Xl.getDataFromLocalStorage(r):i&&new Date(i).getTime()-Date.now()>0&&(t=decodeURIComponent(Xl.getDataFromLocalStorage(r)))}"string"==typeof t&&"{"===t.trim().charAt(0)&&(t=JSON.parse(t))}catch(e){(0,a.H)(e)}return t}function au(e){var t={consentString:"",gdprApplies:!1,apiVersion:0};return e&&(t.consentString=e.consentString,t.gdprApplies=e.gdprApplies,t.apiVersion=e.apiVersion),(0,a._R)(JSON.stringify(t))}function su(e,t){t=tu().fork().startTiming("userId.callbacks.total").stopBefore(t);var n=(0,a.yx)((function(){clearTimeout(undefined),t()}),e.length);e.forEach((function(e){var t=nu(e.submodule.name).startTiming("callback").stopBefore(n);try{var r;e.callback((function(n){n?(e.config.storage&&iu(e,n),e.idObj=e.submodule.decode(n,e.config),wu(e.idObj)):(0,a.PN)("".concat(Wl,": ").concat(e.submodule.name," - request id responded with an empty value")),t()}),ou.bind(null,null===(r=e.config)||void 0===r?void 0:r.storage))}catch(n){(0,a.H)("Error in userID module '".concat(e.submodule.name,"':"),n),t()}e.callback=void 0}))}var du,cu={};function lu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fu()||[],t=ql&&e.find((function(e){return e.source===ql}));if(t&&"string"==typeof(0,s.Z)(t,"uids.0.id")){var n=t.uids[0].id.replace(/[\W_]/g,"");if(n.length>=32&&n.length<=150)return n;(0,a.yN)("User ID - Googletag Publisher Provided ID for ".concat(ql," is not between 32 and 150 characters - ").concat(n))}}var uu=(0,Q.g3)("userId",(function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.delay,s=void 0===i?H.Z.timeout:i,d=r.getIds,c=void 0===d?bu:d;H.Z.race([c().catch((function(){return null})),s(Bl)]).then((function(){(function(e,t){[e].some((function(e){return!Array.isArray(e)||!e.length}))||e.forEach((function(e){e.bids&&(0,a.kJ)(e.bids)&&e.bids.forEach((function(e){var n=function(e,t){return Array.isArray(e)&&e.length&&t?e.filter((function(e){return!e.config.bidders||!(0,a.kJ)(e.config.bidders)||(0,f.q9)(e.config.bidders,t)})).filter((function(e){return(0,a.PO)(e.idObj)&&Object.keys(e.idObj).length})).reduce((function(e,t){return Object.keys(t.idObj).forEach((function(n){e[n]=t.idObj[n]})),e}),{}):{}}(t,e.bidder);Object.keys(n).length&&(e.userId=n,e.userIdAsEids=Ul(n))}))}))})(t.adUnits||(0,o.R)().adUnits,Ll),tu().join((0,Q.Bf)(t.metrics),{propagate:!1,includeGroups:!0}),e.call(n,t)}))}));function pu(){return function(e){return Array.isArray(e)&&e.length?e.filter((function(e){return(0,a.PO)(e.idObj)&&Object.keys(e.idObj).length})).reduce((function(e,t){return Object.keys(t.idObj).forEach((function(n){e[n]=t.idObj[n]})),e}),{}):{}}(Ll)}function fu(){return Ul(pu())}function hu(e){return Ul(function(e,t){if(!Array.isArray(e)||!e.length)return{};var n=e.filter((function(e){var n;return(0,a.PO)(e.idObj)&&Object.keys(e.idObj).length&&(null===(n=Ml[Object.keys(e.idObj)[0]])||void 0===n?void 0:n.source)===t}));return(0,a.xb)(n)?[]:n[0].idObj}(Ll,e))[0]}function gu(e,t,n){return du().then((function(){var r={};if((0,a.LQ)(n)){(0,a.PN)("".concat(Wl," - Getting encrypted signal from custom function : ").concat(n.name," & source : ").concat(e," "));var i=n(e);r[e]=i?mu(i):null}else{var o=hu(e);(0,a.PN)("".concat(Wl," - Getting encrypted signal for eids :").concat(JSON.stringify(o))),(0,a.xb)(o)||(r[o.source]=!0===t?mu(o):o.uids[0].id)}return(0,a.PN)("".concat(Wl," - Fetching encrypted eids: ").concat(r[e])),r[e]}))}function mu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="";return 1===t&&(n="object"===(0,bt.Z)(e)?window.btoa(JSON.stringify(e)):window.btoa(e)),"".concat(t,"||").concat(n)}function vu(){if((0,a.T9)()){window.googletag.encryptedSignalProviders=window.googletag.encryptedSignalProviders||[];var e=g.vc.getConfig("userSync.encryptedSignalSources");if(e){var t=e.registerDelay||0;setTimeout((function(){e.sources&&e.sources.forEach((function(e){var t=e.source,n=e.encrypt,r=e.customFunc;t.forEach((function(e){window.googletag.encryptedSignalProviders.push({id:e,collectorFunction:function(){return gu(e,n,r)}})}))}))}),t)}else(0,a.yN)("".concat(Wl," - ESP : encryptedSignalSources config not defined under userSync Object"))}}function yu(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).submoduleNames,t=arguments.length>1?arguments[1]:void 0;return du({refresh:!0,submoduleNames:e}).then((function(){return t&&(0,a.LQ)(t)&&t(),pu()}))}function bu(){return du().then((function(){return pu()}),(function(e){return e===cu?Promise.resolve().then(bu):((0,a.H)("Error initializing userId",e),H.Z.reject(e))}))}var _u=(0,x.z3)("sync",(function(e,t){return{userIdModules:e,hasValidated:t&&t.hasValidated}}),"validateGdprEnforcement");function wu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pu();if(e&&ql){var t=lu(Ul(e));t&&((0,a.T9)()?window.googletag.pubads().setPublisherProvidedId(t):(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((function(){window.googletag.pubads().setPublisherProvidedId(t)}))))}}function Tu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return tu().fork().measureTime("userId.init.modules",(function(){if(!t.length)return[];var i=function(){var e=[],t=!1;return Xl.localStorageIsEnabled()&&(e.push(Zl),Xl.getDataFromLocalStorage(Kl)&&((0,a.PN)("".concat(Wl," - opt-out localStorage found, storage disabled")),t=!0)),Xl.cookiesAreEnabled()&&(e.push(Hl),Xl.getCookie(Kl)&&((0,a.PN)("".concat(Wl," - opt-out cookie found, storage disabled")),t=!0)),new Set(t?[]:e)}();if(!(t=t.filter((function(e){return!e.config.storage||i.has(e.config.storage.type)}))).length)return(0,a.yN)("".concat(Wl," - no ID module is configured for one of the available storage types:"),Array.from(i)),[];var o=_u(t,n),d=o.userIdModules;if(!o.hasValidated&&!(0,an.h)(n))return(0,a.yN)("".concat(Wl," - gdpr permission not valid for local storage or cookies, exit module")),[];var c=function(){try{return Xl.getCookie($l)}catch(e){(0,a.H)(e)}}();!function(e){try{var t=new Date(Date.now()+864e5*Gl).toUTCString();Xl.setCookie($l,au(e),t,"Lax")}catch(e){(0,a.H)(e)}}(n);var l=d.reduce((function(e,t){return nu(t.submodule.name).measureTime("init",(function(){try{(function(e,t,n,r){if(e.config.storage){var i,o=ou(e.config.storage),s=!1;if("number"==typeof e.config.storage.refreshInSeconds){var d=new Date(ou(e.config.storage,"last"));s=d&&Date.now()-d.getTime()>1e3*e.config.storage.refreshInSeconds}!o||s||r||!function(e,t){return null!=e&&e===au(t)}(n,t)?i=e.submodule.getId(e.config,t,o):"function"==typeof e.submodule.extendId&&(i=e.submodule.extendId(e.config,t,o)),(0,a.PO)(i)&&(i.id&&(iu(e,i.id),o=i.id),"function"==typeof i.callback&&(e.callback=i.callback)),o&&(e.idObj=e.submodule.decode(o,e.config))}else if(e.config.value)e.idObj=e.config.value;else{var c=e.submodule.getId(e.config,t,void 0);(0,a.PO)(c)&&("function"==typeof c.callback&&(e.callback=c.callback),c.id&&(e.idObj=e.submodule.decode(c.id,e.config)))}wu(e.idObj)})(t,n,c,r),e.push(t)}catch(e){(0,a.H)("Error in userID module '".concat(t.submodule.name,"':"),e)}return e}))}),[]);return l.length&&function(e){var t=(0,a.EE)().setEidPermissions;"function"==typeof t&&(0,a.kJ)(e)&&t(function(e){var t=[];return e.filter((function(e){return(0,a.PO)(e.idObj)&&Object.keys(e.idObj).length})).forEach((function(e){Object.keys(e.idObj).forEach((function(n){(0,s.Z)(e,"config.bidders")&&Array.isArray(e.config.bidders)&&(0,s.Z)(Ml,n+".source")&&t.push({source:Ml[n].source,bidders:e.config.bidders})}))})),t}(e))}(l),l.forEach(Iu.bind(null,e)),l}))}function Iu(e,t){for(var n=!1,r=0;r<e.length;r++)if(t.config.name.toLowerCase()===e[r].config.name.toLowerCase()){n=!0,e[r]=t;break}n||e.push(t)}var Su=new Set([Zl,Hl]);function ku(){var e=function(e,t){return Array.isArray(e)?e.reduce((function(e,t){return!t||(0,a.jH)(t.name)||(t.storage&&!(0,a.jH)(t.storage.type)&&!(0,a.jH)(t.storage.name)&&Su.has(t.storage.type)||(0,a.PO)(t.value)?e.push(t):t.storage||t.value||e.push(t)),e}),[]):[]}(Ql);if(e.length){var t=eu.filter((function(e){return!(0,f.sE)(Yl,(function(t){return t.name===e.name}))}));Yl.splice(0,Yl.length),t.map((function(t){var n=(0,f.sE)(e,(function(e){return e.name&&(e.name.toLowerCase()===t.name.toLowerCase()||t.aliasName&&e.name.toLowerCase()===t.aliasName.toLowerCase())}));return n&&t.name!==n.name&&(n.name=t.name),t.findRootDomain=ne,n?{submodule:t,config:n,callback:void 0,idObj:void 0}:null})).filter((function(e){return null!==e})).forEach((function(e){return Yl.push(e)})),!Jl&&Yl.length&&((0,o.R)().requestBids.before(uu,40),Y.ZP.callDataDeletionRequest.before(Cu),zl.after((function(e){return e(lu())})),(0,a.PN)("".concat(Wl," - usersync config updated for ").concat(Yl.length," submodules: "),Yl.map((function(e){return e.submodule.name}))),Jl=!0)}}function Cu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(0,a.PN)("UserID: received data deletion request; deleting all stored IDs..."),Yl.forEach((function(e){if("function"==typeof e.submodule.onDataDeletionRequest)try{var t;(t=e.submodule).onDataDeletionRequest.apply(t,[e.config,e.idObj].concat(n))}catch(t){(0,a.H)("Error calling onDataDeletionRequest for ID submodule ".concat(e.submodule.name),t)}!function(e){var t,n,r,i;switch(null===(t=e.config)||void 0===t||null===(n=t.storage)||void 0===n?void 0:n.type){case Hl:var o=ru(e),s=new Date(Date.now()-864e5).toUTCString();r=function(e){return o(e,"",s)},i=["","_last"];break;case Zl:r=function(t){return Xl.removeDataFromLocalStorage(e.config.storage.name+t)},i=["","_last","_exp"]}r&&i.forEach((function(e){try{r(e)}catch(e){(0,a.H)(e)}}))}(e)})),e.apply(this,n)}function Eu(e){return function(){return Promise.resolve(e.apply(this,arguments))}}function Au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}!function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).delay,n=void 0===t?H.Z.timeout:t;ql=void 0,Yl=[],Ql=[],Jl=!1,Ll=[],du=function(){var e,t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).delay,r=void 0===n?H.Z.timeout:n,i=(0,H.P)(),o=(0,H.P)(),s=!1;function d(n){return t=tu().fork(),null!=e&&e.reject(cu),e=(0,H.P)(),H.Z.race([n,e.promise]).finally(t.startTiming("userId.total"))}var l=Ll,p=Yl;function f(e){return function(){if(l===Ll&&p===Yl)return e.apply(void 0,arguments)}}function h(){return Y.rp.promise.finally(t.startTiming("userId.init.gdpr"))}var g=d(H.Z.all([x.Cd,i.promise]).then(h).then(f((function(e){Tu(l,p,e)}))).then((function(){return o.promise.finally(t.startTiming("userId.callbacks.pending"))})).then(f((function(){var e=l.filter((function(e){return(0,a.LQ)(e.callback)}));if(e.length)return new H.Z((function(t){return su(e,t)}))}))));return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refresh,n=void 0!==t&&t,a=e.submoduleNames,m=void 0===a?null:a,v=e.ready;return void 0!==v&&v&&!s&&(s=!0,i.resolve(),Bl>0?o.resolve():c.on(u.FP.AUCTION_END,(function e(){c.S1(u.FP.AUCTION_END,e),r(jl).then(o.resolve)}))),n&&s&&(g=d(g.catch((function(){return null})).then(h).then(f((function(e){var t=Tu(l,p.filter((function(e){return null==m||m.includes(e.submodule.name)})),e,!0).filter((function(e){return null!=e.callback}));if(t.length)return new H.Z((function(e){return su(t,e)}))}))))),g}}({delay:n}),null!=Fl&&Fl(),eu=[],Fl=e.getConfig("userSync",(function(e){var t=e.userSync;ql=t.ppid,t&&t.userIds&&(Ql=t.userIds,jl=(0,a.hj)(t.syncDelay)?t.syncDelay:500,Bl=(0,a.hj)(t.auctionDelay)?t.auctionDelay:0,ku(),du({ready:!0}))})),(0,o.R)().getUserIds=pu,(0,o.R)().getUserIdsAsEids=fu,(0,o.R)().getEncryptedEidsForSource=Eu(gu),(0,o.R)().registerSignalSources=vu,(0,o.R)().refreshUserIds=Eu(yu),(0,o.R)().getUserIdsAsync=Eu(bu),(0,o.R)().getUserIdsAsEidBySource=hu}(g.vc),(0,x.bA)("userId",(function(e){(0,f.sE)(eu,(function(t){return t.name===e.name}))||(eu.push(e),Ld.qh.register(si.y2,e.name,e.gvlid),ku(),du({refresh:!0,submoduleNames:[e.name]}))})),Yn({type:Wn,name:"userExtEids",fn:function(e,t,n){var r=(0,s.Z)(n,"bidRequests.0.userIdAsEids");r&&d(e,"user.ext.eids",r)}}),(0,o.z)("userId");var Pu="7.47.0",xu=300,Ou="USD",Du=["admixer.net","adserver.org","adtelligent.com","akamai.com","amxdt.net","audigent.com","britepool.com","criteo.com","crwdcntrl.net","deepintent.com","epsilon.com","hcn.health","id5-sync.com","idx.lat","intentiq.com","intimatemerger.com","liveintent.com","liveramp.com","mediawallahscript.com","merkleinc.com","netid.de","neustar.biz","nextroll.com","novatiq.com","parrable.com","pubcid.org","quantcast.com","tapad.com","uidapi.com","verizonmedia.com","yahoo.com","zeotap.com"];function Ru(e){return{w:parseInt(e[0]),h:parseInt(e[1])}}function Mu(e){return(0,a.kJ)(e)&&2===e.length&&!(0,a.kJ)(e[0])?[Ru(e)]:e.map(Ru)}function Nu(e){return(0,a.kJ)((0,s.Z)(e,"userIdAsEids"))?e.userIdAsEids.filter((function(e){return-1!==Du.indexOf(e.source)})):[]}function Uu(e){return(0,s.Z)(e,"params.bidOverride.imp.secure")||"https:"===document.location.protocol?1:0}function Lu(e){var t;return(0,s.Z)(e,"params.pubId")?t=!0:(0,s.Z)(e,"params.dcn")&&(0,s.Z)(e,"params.pos")&&(t=!1),t}function ju(){var e=g.vc.getConfig("yahoossp.mode");return void 0===(e=e?e.toLowerCase():void 0)||e===P.Mk?P.Mk:e===P.pX?P.pX:"all"===e?"*":void 0}function Bu(e){var t=ju(),n={currency:(0,s.Z)(e,"params.bidOverride.cur")||Ou,mediaType:t,size:"*"};return!!(0,a.LQ)(e.getFloor)&&e.getFloor(n)}function qu(e,t,n,r){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Au(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Au(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r);for(var s in n)switch(e){case"string":-1!==t.indexOf(s)&&(0,a.d8)(n[s])&&(o[s]=n[s]);break;case"number":-1!==t.indexOf(s)&&(0,a.hj)(n[s])&&(o[s]=n[s]);break;case"array":-1!==t.indexOf(s)&&(0,a.kJ)(n[s])&&(o[s]=n[s]);break;case"object":-1!==t.indexOf(s)&&(0,a.PO)(n[s])&&(o[s]=n[s]);break;case"objectAllKeys":(0,a.PO)(n)&&(o[s]=n[s])}return o}function Fu(e){var t,n=g.vc.getConfig("yahoossp.ttl");return t=n||(0,s.Z)(e,"params.ttl"),(0,a.hj)(t)&&t>0&&t<3600?t:xu}function Vu(e){return(0,a.d8)(e)&&e.length>0}function zu(e,t){if(e){var n,r,i={id:(0,a.DO)(),cur:[Bu(e).currency||(0,s.Z)(t,"params.bidOverride.cur")||Ou],imp:[],site:{page:(0,s.Z)(e,"refererInfo.page")},device:{dnt:0,ua:navigator.userAgent,ip:(0,s.Z)(t,"params.bidOverride.device.ip")||(0,s.Z)(t,"params.ext.ip")||void 0,w:window.screen.width,h:window.screen.height},regs:{ext:{us_privacy:e.uspConsent?e.uspConsent:"",gdpr:e.gdprConsent&&e.gdprConsent.gdprApplies?1:0}},source:{ext:{hb:1,adapterver:"1.0.2",prebidver:Pu,integration:{name:"prebid.js",ver:Pu}},fd:1},user:{ext:{consent:e.gdprConsent&&e.gdprConsent.gdprApplies?e.gdprConsent.consentString:"",eids:Nu(t)}}};!0===Lu(t)?(i.site.publisher={id:t.params.pubId},((0,s.Z)(t,"params.bidOverride.site.id")||(0,s.Z)(t,"params.siteId"))&&(i.site.id=(0,s.Z)(t,"params.bidOverride.site.id")||t.params.siteId)):i.site.id=t.params.dcn,null!==(n=e.ortb2)&&void 0!==n&&null!==(r=n.regs)&&void 0!==r&&r.gpp&&(i.regs.ext.gpp=e.ortb2.regs.gpp,i.regs.ext.gpp_sid=e.ortb2.regs.gpp_sid),e.ortb2&&(i=function(e,t){var n=t.ortb2,r=(0,s.Z)(n,"site")||void 0,i=(0,s.Z)(r,"content")||void 0,o=(0,s.Z)(r,"content.data")||void 0,d=(0,s.Z)(n,"app.content")||void 0,c=(0,s.Z)(n,"app.content.data")||void 0,l=(0,s.Z)(n,"user")||void 0;if(r&&(0,a.PO)(r)){e.site=qu("string",["name","domain","page","ref","keywords","search"],r,e.site),e.site=qu("array",["cat","sectioncat","pagecat"],r,e.site),e.site=qu("object",["ext"],r,e.site)}if(i&&(0,a.PO)(i)){e.site.content=qu("string",["id","title","series","season","genre","contentrating","language"],i,e.site.content),e.site.content=qu("number",["episode","prodq","context","livestream","len"],i,e.site.content),e.site.content=qu("array",["cat"],i,e.site.content),e.site.content=qu("object",["ext"],i,e.site.content),o&&(0,a.kJ)(o)&&o.every((function(t){var n={};n=qu("string",["id","name"],t,n),n=qu("array",["segment"],t,n),n=qu("object",["ext"],t,n),e.site.content.data=[],e.site.content.data.push(n)}))}if(d&&(0,a.PO)(d)&&c&&(0,a.kJ)(c)&&c.every((function(t){var n={};n=qu("string",["id","name"],t,n),n=qu("array",["segment"],t,n),n=qu("object",["ext"],t,n),e.app={content:{data:[]}},e.app.content.data.push(n)})),l&&(0,a.PO)(l)){e.user=qu("string",["id","buyeruid","gender","keywords","customdata"],l,e.user),e.user=qu("number",["yob"],l,e.user),e.user=qu("array",["data"],l,e.user),e.user.ext=qu("object",["ext"],l,e.user.ext)}return e}(i,t));var o=(0,s.Z)(t,"schain.nodes");return(0,a.kJ)(o)&&o.length>0&&(i.source.ext.schain=t.schain,i.source.ext.schain.nodes[0].rid=i.id),i}}function Wu(e,t){var n=ju();if(t&&e){var r={id:e.bidId,secure:Uu(e),bidfloor:Bu(e).floor||(0,s.Z)(e,"params.bidOverride.imp.bidfloor")};if(!e.mediaTypes.banner||void 0!==n&&n!==P.Mk&&"*"!==n||(r.banner={mimes:e.mediaTypes.banner.mimes||["text/html","text/javascript","application/javascript","image/jpg"],format:Mu(e.sizes)},e.mediaTypes.banner.pos&&(r.banner.pos=e.mediaTypes.banner.pos)),e.mediaTypes.video&&(n===P.pX||"*"===n)){var i=Mu(e.mediaTypes.video.playerSize);r.video={mimes:(0,s.Z)(e,"params.bidOverride.imp.video.mimes")||e.mediaTypes.video.mimes||["video/mp4","application/javascript"],w:(0,s.Z)(e,"params.bidOverride.imp.video.w")||i[0].w,h:(0,s.Z)(e,"params.bidOverride.imp.video.h")||i[0].h,maxbitrate:(0,s.Z)(e,"params.bidOverride.imp.video.maxbitrate")||e.mediaTypes.video.maxbitrate||void 0,maxduration:(0,s.Z)(e,"params.bidOverride.imp.video.maxduration")||e.mediaTypes.video.maxduration||void 0,minduration:(0,s.Z)(e,"params.bidOverride.imp.video.minduration")||e.mediaTypes.video.minduration||void 0,api:(0,s.Z)(e,"params.bidOverride.imp.video.api")||e.mediaTypes.video.api||[2],delivery:(0,s.Z)(e,"params.bidOverride.imp.video.delivery")||e.mediaTypes.video.delivery||void 0,pos:(0,s.Z)(e,"params.bidOverride.imp.video.pos")||e.mediaTypes.video.pos||void 0,playbackmethod:(0,s.Z)(e,"params.bidOverride.imp.video.playbackmethod")||e.mediaTypes.video.playbackmethod||void 0,placement:(0,s.Z)(e,"params.bidOverride.imp.video.placement")||e.mediaTypes.video.placement||void 0,linearity:(0,s.Z)(e,"params.bidOverride.imp.video.linearity")||e.mediaTypes.video.linearity||1,protocols:(0,s.Z)(e,"params.bidOverride.imp.video.protocols")||e.mediaTypes.video.protocols||[2,5],startdelay:(0,s.Z)(e,"params.bidOverride.imp.video.startdelay")||e.mediaTypes.video.startdelay||0,rewarded:(0,s.Z)(e,"params.bidOverride.imp.video.rewarded")||void 0}}if(r.ext={dfp_ad_unit_code:e.adUnitCode},(0,s.Z)(e,"params.kvp")&&(0,a.PO)(e.params.kvp))for(var o in r.ext.kvs={},e.params.kvp)if((0,a.d8)(e.params.kvp[o])||(0,a.hj)(e.params.kvp[o]))r.ext.kvs[o]=e.params.kvp[o];else if((0,a.kJ)(e.params.kvp[o])){var d=e.params.kvp[o];(d.every((function(e){return(0,a.d8)(e)}))||d.every((function(e){return(0,a.hj)(e)})))&&(r.ext.kvs[o]=e.params.kvp[o])}(0,s.Z)(e,"ortb2Imp.ext.data")&&(0,a.PO)(e.ortb2Imp.ext.data)&&(r.ext.data=e.ortb2Imp.ext.data),(0,s.Z)(e,"ortb2Imp.instl")&&(0,a.hj)(e.ortb2Imp.instl)&&1===e.ortb2Imp.instl&&(r.instl=e.ortb2Imp.instl),!1===Lu(e)?(r.tagid=e.params.pos,r.ext.pos=e.params.pos):(0,s.Z)(e,"params.placementId")&&(r.tagid=e.params.placementId),t.imp.push(r)}}function Hu(e){var t=e.payload,n=e.requestOptions,r=e.bidderRequest,i=Lu(r),o=g.vc.getConfig("yahoossp.endpoint")||"https://c2shb.pubgw.yahoo.com/bidRequest";if(!0===i&&(o=g.vc.getConfig("yahoossp.endpoint")||"https://c2shb.pubgw.yahoo.com/admax/bid/partners/PBJS"),!0===(0,s.Z)(r,"params.testing.e2etest"))if((0,a.PN)("yahoossp adapter e2etest mode is active"),n.withCredentials=!1,!0===i)t.site.id="1234567";else{var d=ju();t.site.id="8a969516017a7a396ec539d97f540011",t.imp.forEach((function(e){e.ext.e2eTestMode=!0,d===P.Mk?e.tagid="8a969978017a7aaabab4ab0bc01a0009":d===P.pX?e.tagid="8a96958a017a7a57ac375d50c0c700cc":((0,a.yN)('yahoossp adapter e2etest mode does not support yahoossp.mode="all". \n Please specify either "banner" or "video"'),(0,a.yN)("yahoossp adapter e2etest mode: Please make sure your adUnit matches the yahoossp.mode video or banner"))}))}return{url:o,method:"POST",data:t,options:n,bidderRequest:r}}var Zu={code:"yahoossp",gvlid:25,aliases:[],supportedMediaTypes:[P.Mk,P.pX],isBidRequestValid:function(e){var t=e.params;return!0===(0,s.Z)(t,"testing.e2etest")||!(!(0,a.PO)(t)||!(Vu(t.pubId)||Vu(t.dcn)&&Vu(t.pos)))||((0,a.yN)("yahoossp bidder params missing or incorrect, please pass object with either: dcn & pos OR pubId"),!1)},buildRequests:function(e,t){if(!(0,a.xb)(e)&&!(0,a.xb)(t)){var n={contentType:"application/json",customHeaders:{"x-openrtb-version":"2.5"}};n.withCredentials=(0,an.h)(t.gdprConsent);var r=function(e){var t=ju(),n=[];return t===P.Mk?n=e.filter((function(e){return Object.keys(e.mediaTypes).some((function(e){return e===P.Mk}))})):t===P.pX?n=e.filter((function(e){return Object.keys(e.mediaTypes).some((function(e){return e===P.pX}))})):"*"===t&&(n=e.filter((function(e){return Object.keys(e.mediaTypes).some((function(e){return e===P.Mk||e===P.pX}))}))),n}(e);if(!0===g.vc.getConfig("yahoossp.singleRequestMode")){var i=zu(t,r[0]);return r.forEach((function(e){Wu(e,i)})),Hu({payload:i,requestOptions:n,bidderRequest:t})}return r.map((function(e){var r=zu(t,e);return Wu(e,r),Hu({payload:r,requestOptions:n,bidderRequest:e})}))}(0,a.yN)('yahoossp Adapter: buildRequests called with either empty "validBidRequests" or "bidderRequest"')},interpretResponse:function(e,t){t.data;var n=t.bidderRequest,r=[];return e.body&&Array.isArray(e.body.seatbid)?(e.body.seatbid.forEach((function(e){var t;try{t=e.bid[0]}catch(e){return r}var i=t.ext&&t.ext.encp?t.ext.encp:t.price,o={adId:(0,s.Z)(t,"adId")?t.adId:t.impid||t.crid,adUnitCode:n.adUnitCode,requestId:t.impid,cpm:i,width:t.w,height:t.h,creativeId:t.crid||0,currency:t.cur||Ou,dealId:t.dealid?t.dealid:null,netRevenue:!0,ttl:Fu(n),meta:{advertiserDomains:t.adomain}},d=function(e){var t=e.adm;return-1!==t.indexOf("o2playerSettings")||-1!==t.indexOf("YAHOO.VideoPlatform.VideoPlayer")||-1!==t.indexOf("AdPlacement")?P.Mk:-1!==t.indexOf("VAST")?P.pX:void 0}(t);d===P.Mk?(o.mediaType=P.Mk,o.ad=t.adm,o.meta.mediaType=P.Mk):d===P.pX&&(o.mediaType=P.pX,o.meta.mediaType=P.pX,o.vastXml=t.adm,t.nurl&&(o.vastUrl=t.nurl)),"outstream"!==(0,s.Z)(n,"mediaTypes.video.context")||n.renderer||(o.renderer=function(e,t){var n=h.Th.install({url:"https://s.yimg.com/kp/prebid-outstream-renderer/renderer.js",loaded:!1,adUnitCode:e.adUnitCode});try{n.setRender((function(t){setTimeout((function(){o2PlayerRender(t)}),(0,s.Z)(e,"params.testing.renderer.setTimeout")||700)}))}catch(e){(0,a.yN)("yahoossp renderer error: setRender() failed",e)}return n}(n)||void 0),r.push(o)})),r):r},getUserSyncs:function(e,t,n,r){var i=!(0,a.xb)(t)&&t[0].body;return i&&i.ext&&i.ext.pixels?function(e,t){var n=/\w*(?=\s)/,r=/src=("|')(.*?)\1/,i=[];if(t){var o=t.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi);o&&o.forEach((function(t){var o=t.match(n)[0],a=t.match(r)[2];if(o&&a){var s="img"===o.toLowerCase()?"image":"iframe";if(!e.iframeEnabled&&"iframe"===s||!e.pixelEnabled&&"image"===s)return;i.push({type:s,url:a})}}))}return i}(e,i.ext.pixels):[]}};(0,Xe.dX)(Zu),(0,o.z)("yahoosspBidAdapter"),Ke.processQueue();const $u=Ke},9796:e=>{"use strict";e.exports=DM.molFeClientLogger},4760:()=>{},7044:()=>{},462:()=>{},6029:()=>{},3737:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},2977:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:()=>r})},6172:(e,t,n)=>{"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:()=>r})},3330:(e,t,n)=>{"use strict";function r(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}n.d(t,{Z:()=>r})},266:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(3330);function i(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,(0,r.Z)(e,t,"get"))}},5248:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(3330);function i(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,(0,r.Z)(e,t,"set"),n),n}},1976:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(6908);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,r.Z)(i.key),i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},1909:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(6908);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},1785:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(9755);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],d=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;d=!1}else for(;!(d=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);d=!0);}catch(e){c=!0,i=e}finally{try{if(!d&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},3014:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(2977),i=n(9755);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},6908:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(9267);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===(0,r.Z)(t)?t:String(t)}},9267:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:()=>r})},9755:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2977);function i(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},251:e=>{"use strict";e.exports=JSON.parse('{"k2":{"xn":"adserverTargeting","zF":"standard"},"f":"pbjs_debug","Q_":{"Q":1,"H":2},"FP":{"AUCTION_INIT":"auctionInit","AUCTION_END":"auctionEnd","BID_ADJUSTMENT":"bidAdjustment","BID_TIMEOUT":"bidTimeout","BID_REQUESTED":"bidRequested","BID_RESPONSE":"bidResponse","BID_REJECTED":"bidRejected","NO_BID":"noBid","SEAT_NON_BID":"seatNonBid","BID_WON":"bidWon","BIDDER_DONE":"bidderDone","BIDDER_ERROR":"bidderError","SET_TARGETING":"setTargeting","BEFORE_REQUEST_BIDS":"beforeRequestBids","BEFORE_BIDDER_HTTP":"beforeBidderHttp","REQUEST_BIDS":"requestBids","ADD_AD_UNITS":"addAdUnits","AD_RENDER_FAILED":"adRenderFailed","AD_RENDER_SUCCEEDED":"adRenderSucceeded","TCF2_ENFORCEMENT":"tcf2Enforcement","AUCTION_DEBUG":"auctionDebug","BID_VIEWABLE":"bidViewable","STALE_RENDER":"staleRender","BILLABLE_EVENT":"billableEvent"},"q_":{"PREVENT_WRITING_ON_MAIN_DOCUMENT":"preventWritingOnMainDocument","NO_AD":"noAd","EXCEPTION":"exception","CANNOT_FIND_AD":"cannotFindAd","MISSING_DOC_OR_ADID":"missingDocOrAdid"},"aI":{"bidWon":"adUnitCode"},"Ql":{"yE":"low","M2":"medium","lj":"high","B7":"auto","uN":"dense","qN":"custom"},"TD":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","SOURCE":"hb_source","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_ID":"hb_cache_id","CACHE_HOST":"hb_cache_host","ADOMAIN":"hb_adomain","ACAT":"hb_acat"},"kF":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_HOST":"hb_cache_host"},"FY":{"title":"hb_native_title","body":"hb_native_body","body2":"hb_native_body2","privacyLink":"hb_native_privacy","privacyIcon":"hb_native_privicon","sponsoredBy":"hb_native_brand","image":"hb_native_image","icon":"hb_native_icon","clickUrl":"hb_native_linkurl","displayUrl":"hb_native_displayurl","cta":"hb_native_cta","rating":"hb_native_rating","address":"hb_native_address","downloads":"hb_native_downloads","likes":"hb_native_likes","phone":"hb_native_phone","price":"hb_native_price","salePrice":"hb_native_saleprice","rendererUrl":"hb_renderer_url","adTemplate":"hb_adTemplate"},"os":{"YZ":"s2s"},"UE":{"CK":"targetingSet","fe":"rendered","G9":"bidRejected"},"Gw":{"UI":"Bid has missing or invalid properties","Gp":"Invalid request ID","Dg":"Bidder code is not allowed by allowedAlternateBidderCodes / allowUnknownBidderCodes","Xx":"Unable to convert currency"},"V1":{"body":"desc","body2":"desc2","sponsoredBy":"sponsored","cta":"ctatext","rating":"rating","address":"address","downloads":"downloads","likes":"likes","phone":"phone","price":"price","salePrice":"saleprice","displayUrl":"displayurl"},"s$":{"sponsored":1,"desc":2,"rating":3,"likes":4,"downloads":5,"price":6,"saleprice":7,"phone":8,"address":9,"desc2":10,"displayurl":11,"ctatext":12},"oF":{"ICON":1,"MAIN":3},"zA":["privacyLink","clickUrl","sendTargetingKeys","adTemplate","rendererUrl","type"]}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{addFBRemarketingPixel:()=>bt,addTaboolaPosition:()=>yt,addToArray:()=>pt,appendToInfiniteList:()=>ft,forceRefreshAds:()=>ut,getBannerFallbackPromise:()=>Tt,getRequestedAds:()=>St,getRtaReport:()=>wt,getScriptContainer:()=>st,getSyncVideoTags:()=>Ct,getVideoAdsSetup:()=>rt,getVideoTags:()=>kt,init:()=>gt,initEmergencyRules:()=>it.initEmergencyRules,initSlots:()=>it.initSlots,on:()=>At,openControlPanel:()=>Et,q:()=>vt,reg:()=>ht,removeWatermark:()=>xt,setStickyBannerZoomThresholds:()=>ct,setSupportedSlots:()=>it.setSupportedSlots,startVideoAuction:()=>Ot,stopRefreshingAds:()=>lt,unstick:()=>Pt});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{isClickThrough:()=>zt,onClick:()=>Ft,onDeactivate:()=>Vt,onInteraction:()=>Wt});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{article:()=>yn,brandedVideoPlayer:()=>Cn,gpt:()=>An,sessionDepth:()=>jn,taboola:()=>Fn});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{conversion:()=>Vn.Z});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{abtest:()=>Zn,bidmax:()=>or,bidmaxSendBeacon:()=>ar,bidmaxSendBeaconMigration:()=>sr,cacheIndication:()=>lr,cmp:()=>Tr,connection:()=>oi,customTracking:()=>kr,entryPoint:()=>Dr,externalData:()=>Br,headerbidderWinner:()=>qr,inputDelays:()=>Fr,memory:()=>zr,pageLoadEvent:()=>Wr,rtaIds:()=>Hr,storage:()=>Zr,timing:()=>Yr,viewability:()=>ei});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{adyoulike:()=>Bi,brightroll:()=>qi,collective564:()=>Vi,groupmSkin:()=>zi,inskin:()=>Wi,konduit:()=>mo,mediagridVideo:()=>so,openx:()=>Hi,openxVideo:()=>co,pxyz:()=>Zi,rubiMM:()=>Xi,rubiTTD:()=>Ji,rubiconSkin:()=>Ki,spotx2:()=>fo,teads:()=>Yi,telariaVideo:()=>ho,triplelift:()=>Qi});var a={};__webpack_require__.r(a),__webpack_require__.d(a,{dmplayer:()=>Pa});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{availabilityNotification:()=>za,hackyDelayer:()=>Wa,reprompt:()=>Xa,rtaTracking:()=>Ja});var d={};__webpack_require__.r(d),__webpack_require__.d(d,{indexedDBUsage:()=>rs,targeting:()=>ts,video:()=>ns});var c={};__webpack_require__.r(c),__webpack_require__.d(c,{permutive:()=>d});var l={};__webpack_require__.r(l),__webpack_require__.d(l,{dmplayer:()=>xs});var u={};__webpack_require__.r(u),__webpack_require__.d(u,{leaderTop:()=>Qs,puffAdOthers:()=>td,refreshInfo:()=>id});var p={};__webpack_require__.r(p),__webpack_require__.d(p,{banner:()=>vc,mpus:()=>bc});var f={};__webpack_require__.r(f),__webpack_require__.d(f,{load:()=>Iu});var h={};__webpack_require__.r(h),__webpack_require__.d(h,{adxChannel:()=>Bu,device:()=>Fu,impid:()=>Vu,ixIdentity:()=>Wu,smartclip:()=>Hu,taboola:()=>Zu});var g={};__webpack_require__.r(g),__webpack_require__.d(g,{abe:()=>r,adIntegrator:()=>Nt.default,adsRefresherV2:()=>af,adxChannelPlugin:()=>Bu,analytics:()=>i,arrowKeysScroll:()=>df,bidders:()=>o,billboardAdjustments:()=>lf,chromelessv2:()=>a,cmp:()=>s,cmpAvailabilityNotification:()=>za,cmpRtaTracking:()=>Ja,devicePlugin:()=>Fu,dmp:()=>c,impIDPlugin:()=>Vu,irisTv:()=>gf,messagePluginsFromCreatives:()=>vf,nativo:()=>bf,nonPersonalizedAds:()=>_f,pageVisibility:()=>Tf,paidSessions:()=>Ef,performance:()=>Df,permutive:()=>ts,pixelSync:()=>Rf,players:()=>l,programmaticCampaign:()=>Xf,quantcast:()=>Jf,revenueReporter:()=>Yf,rtaPageEventDispatcher:()=>eh,runtimeMessages:()=>th,skins:()=>ah,slots:()=>u,smartBanner:()=>uh,smartScheduler:()=>lh,sticky:()=>p,tcfv2:()=>f,trackers:()=>h,version:()=>ph,videoEvents:()=>fh});var m=__webpack_require__(8250),v=(__webpack_require__(7298),__webpack_require__(8307),__webpack_require__(5861),__webpack_require__(4634)),y=__webpack_require__(8967),b=__webpack_require__(5975);function _(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function w(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,I(e,t,"get"))}function T(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,I(e,t,"set"),n),n}function I(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function S(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var k=new WeakMap,C=new WeakSet;class E{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){_(e,t),t.add(e)}(this,C),function(e,t,n){_(e,t),t.set(e,{writable:!0,value:!1})}(this,k),this.behaviours=e}add(e){this.behaviours.push(e)}render(){const e=document.createDocumentFragment();for(const t of this.behaviours){const n=t.render();"string"==typeof n?S(this,C,A).call(this,e,n):e.append(n)}return e}onMount(e){this.behaviours.some((e=>"onMount"in e))||(T(this,k,!0),setTimeout(e,0));for(const n of this.behaviours){var t;null===(t=n.onMount)||void 0===t||t.call(n,(()=>{w(this,k)||(T(this,k,!0),e())}))}}onUnmount(e){for(const n of this.behaviours){var t;null===(t=n.onUnmount)||void 0===t||t.call(n,(()=>{w(this,k)&&(T(this,k,!1),e())}))}}}function A(e,t){const n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)e.appendChild(n.firstChild)}function P(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function x(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function D(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),function(e,t){if(void 0===e)throw new TypeError("attempted to get private static field before its declaration")}(n),function(e,t){return t.get?t.get.call(e):t.value}(e,n)}var R=new WeakSet,M=new WeakSet;class N extends HTMLElement{constructor(){super(...arguments),P(this,M),P(this,R),x(this,"broker",b.ZP.broker(this.constructor.name)),x(this,"log",(0,y.x)(this.constructor.name))}static addBehaviourFactory(e){D(this,N,j).push(e)}static getBehaviour(e){const t=new E;for(const n of D(this,N,j)){const r=n(e);r&&t.add(r)}return t}connectedCallback(){var e,t;const{config:n,id:r,log:i,position:o,variant:a}=O(this,R,U).call(this);if(!n)return;const s=N.getBehaviour({component:this,getConfig:v.U2,id:r,log:i,position:o});null===(e=s.onMount)||void 0===e||e.call(s,(()=>{var e,t;null===(e=window.adverts)||void 0===e||null===(t=e.queue)||void 0===t||t.push({scope:"adSlotMount",data:{pos:o,variant:a,id:r}})})),null===(t=s.onUnmount)||void 0===t||t.call(s,(()=>{var e,t;null===(e=window.adverts)||void 0===e||null===(t=e.queue)||void 0===t||t.push({scope:"adSlotUnmount",data:{id:r,position:o}})})),O(this,M,L).call(this,s,r,i)}disconnectedCallback(){var e,t;const{id:n,position:r}=O(this,R,U).call(this);null===(e=window.adverts)||void 0===e||null===(t=e.queue)||void 0===t||t.push({scope:"adSlotUnmount",data:{id:n,position:r}})}}function U(){const e=this.getAttribute("position"),t=this.getAttribute("variant");if(!e)throw new Error('No "position" attribute');const n=this.log.extend(e),r=function(e,t){const n=(0,v.U2)(`slotDescription.${e}`);if(n)return n.id||(t("setting id as position"),n.id=e,(0,v.t8)(`slotDescription.${e}.id`,n.id)),n;t.warn("No config")}(e,n);return{config:r,id:(null==r?void 0:r.id)+(t?`-${t}`:""),log:n,position:e,variant:t}}function L(e,t,n){const r=e.render();r?("string"==typeof r?this.innerHTML=r:this.append(r),this.querySelector(`#${t}`)||this.setAttribute("id",t)):n.warn("No template")}var j={writable:!0,value:[]};function B(e,t,n){q(e,t),t.set(e,n)}function q(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function F(e,t){var n=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,n)}const V="puff_list";var z=new WeakMap,W=new WeakMap,H=new WeakMap,Z=new WeakSet;class $ extends HTMLUListElement{constructor(){super(...arguments),function(e,t){q(e,t),t.add(e)}(this,Z),B(this,z,{writable:!0,value:b.ZP.broker(this.constructor.name)}),B(this,W,{writable:!0,value:(0,y.x)("adPufflistSlot")}),B(this,H,{writable:!0,value:[V]})}connectedCallback(){const e=this.getAttribute("id")||"";(0,v.U2)(`slotDescription.${V}`)&&function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,Z,G).call(this,V)?(F(this,W).call(this,"mounting",V),F(this,z).emit("slot mounted",{pos:V,id:e})):F(this,W).call(this,"unsupported pos",V)}}function G(e){return F(this,H).includes(e)}class K{constructor(e){let{getConfig:t}=e;this.getConfig=t}render(){return`<div id="amzn-assoc-ad-${this.getConfig("pos.underArticle.amazon.id","df745670-1d9e-4f8c-890c-b2e54a92586a")}"></div>`}}var X=__webpack_require__(1026),J=__webpack_require__(1208);function Y(e,t){ee(e,t),t.add(e)}function Q(e,t,n){ee(e,t),t.set(e,n)}function ee(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function te(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function ne(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ie(e,t,"get"))}function re(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ie(e,t,"set"),n),n}function ie(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var oe=new WeakMap,ae=new WeakMap,se=new WeakMap,de=new WeakMap,ce=new WeakMap,le=new WeakMap,ue=new WeakMap,pe=new WeakMap,fe=new WeakMap,he=new WeakMap,ge=new WeakMap,me=new WeakSet,ve=new WeakSet,ye=new WeakSet,be=new WeakSet,_e=new WeakMap,we=new WeakMap;class Te{constructor(e){let{component:t,id:n,position:r,description:i,log:o}=e;Y(this,be),Y(this,ye),Y(this,ve),Y(this,me),Q(this,oe,{writable:!0,value:void 0}),Q(this,ae,{writable:!0,value:void 0}),Q(this,se,{writable:!0,value:void 0}),Q(this,de,{writable:!0,value:void 0}),Q(this,ce,{writable:!0,value:void 0}),Q(this,le,{writable:!0,value:0}),Q(this,ue,{writable:!0,value:0}),Q(this,pe,{writable:!0,value:document.createElement("aside")}),Q(this,fe,{writable:!0,value:document.createElement("div")}),Q(this,he,{writable:!0,value:document.createElement("div")}),Q(this,ge,{writable:!0,value:void 0}),Q(this,_e,{writable:!0,value:(0,J.Ds)((()=>{const e=ne(this,le),t=ne(this,ue);te(this,ye,ke).call(this),e===ne(this,le)&&t===ne(this,ue)||(ne(this,de).call(this,"changing dimensions",{prev:{width:e,height:t},new:{width:ne(this,le),height:ne(this,ue)}}),te(this,be,Ce).call(this))}),500)}),Q(this,we,{writable:!0,value:(e,t)=>{if(e===ne(this,ce))if(ne(this,de).call(this,"position rendered",{size:t.size}),t.size&&Array.isArray(t.size)&&t.size[1]<ne(this,ue)){const e=Math.floor((ne(this,ue)-t.size[1])/2);ne(this,de).call(this,"repositioning",{top:e}),ne(this,fe).style.transform=`translate(0,${e}px)`,ne(this,fe).style.top=`-${e}px`,ne(this,he).style.height=ne(this,ue)-e+"px"}else ne(this,de).call(this,"no need to reposition"),ne(this,fe).style.transform="",ne(this,fe).style.top="",ne(this,he).style.height=""}}),re(this,oe,t),re(this,se,n),re(this,ce,r),re(this,ae,i),re(this,de,o)}render(){var e,t;return te(this,me,Ie).call(this),ne(this,ae).sizeMapping&&window.addEventListener("resize",ne(this,_e)),"center"===ne(this,oe).getAttribute("align")&&(null===(e=window.adverts)||void 0===e||null===(t=e.queue)||void 0===t||t.push({scope:"onAdRendered",data:ne(this,we)})),ne(this,pe)}onMount(e){re(this,ge,e)}}function Ie(){ne(this,pe).classList.add("dmg-ads",`dmg-ads-${ne(this,ce).replace(/_/g,"-")}`,`dmg-ads-justify-${te(this,ve,Se).call(this)}`),ne(this,oe).hasAttribute("no-watermark")&&ne(this,pe).classList.add("dmg-ads-no-watermark"),ne(this,pe).innerHTML=`\n      <span class="dmg-ads-label-container">\n        <span class="dmg-ads-label">Advertisement</span>\n      </span>\n      <div class="dmg-ads-container">\n        <div \n          class="dmg-ads-ad" \n          id="${ne(this,se)}"\n        >\n        </div>\n      </div>\n    `,re(this,fe,ne(this,pe).querySelector(".dmg-ads-ad")),re(this,he,ne(this,pe).querySelector(".dmg-ads-container")),te(this,ye,ke).call(this),te(this,be,Ce).call(this)}function Se(){const e=ne(this,oe).getAttribute("justify");switch(e){case"left":case"right":case"center":return e;default:return"center"}}function ke(){const e=ne(this,ae).sizeMapping?(0,X.T3)(ne(this,ae).sizeMapping,ne(this,ae).sizes||ne(this,ae).size,[document.documentElement.clientWidth,document.documentElement.clientHeight]):ne(this,ae).sizes||ne(this,ae).size,[t,n]=(0,X.fb)(e);re(this,le,t),re(this,ue,n)}function Ce(){var e;ne(this,pe).style.width=`${ne(this,le)}px`,ne(this,pe).style.height=`${ne(this,ue)}px`,ne(this,pe).style.display=ne(this,le)&&ne(this,ue)?"":"none",ne(this,fe).style.maxWidth=`${ne(this,le)}px`,ne(this,fe).style.maxHeight=`${ne(this,ue)}px`,ne(this,le)&&ne(this,ue)&&(null===(e=ne(this,ge))||void 0===e||e.call(this))}class Ee{constructor(e){let{getConfig:t}=e;this.getConfig=t}render(){const{width:e,adSlot:t}=this.getConfig("pos.underArticle.googleAdsense",{adSlot:1219268175,width:636});return`\n      <ins\n        class="adsbygoogle"\n        id="under-article"\n        style="display:inline-block; width:${e}px; height:250px;"\n        data-ad-client="ca-pub-6274168003790870"\n        data-ad-slot="${t}"\n        data-safe="high"\n      >\n      </ins>\n    `}}function Ae(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}const Pe={dailymail:"www.dailymail.co.uk",thisismoney:"www.thisismoney.co.uk"};var xe=new WeakSet,Oe=new WeakMap;class De{constructor(e){let{getConfig:t,log:n}=e;!function(e,t){Ae(e,t),t.add(e)}(this,xe),function(e,t,n){Ae(e,t),t.set(e,n)}(this,Oe,{writable:!0,value:(0,J.ri)((()=>{const e=this.getConfig("productionHostnameMapping",Pe),t=Object.entries(e),{hostname:n}=location,[,r]=t.find((e=>{let[t]=e;return n.includes(t)}))||[n];return this.log("productionHostName:",r),r}))}),this.getConfig=t,this.log=n}render(){var e,t;const{pathname:n,protocol:r}=location,i=(o=this,a=Oe,s=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(o,a),function(e,t){return t.get?t.get.call(e):t.value}(o,s)).call(this);var o,a,s;return`\n      <aside>\n        <div\n          class="OUTBRAIN"\n          data-src="${null!==(e=null===(t=document.head.querySelector('meta[property="og:url"]'))||void 0===t?void 0:t.getAttribute("content"))&&void 0!==e?e:`${r}//${i}${n}`}"\n          data-widget-id="${function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,xe,Re).call(this)?"AR_2":"AR_1"}"\n        >\n        </div>\n      </aside>\n    `}}function Re(){return"PageCriteria"in window&&"object"==typeof window.PageCriteria&&null!==window.PageCriteria&&"linkby"in window.PageCriteria&&!!window.PageCriteria.linkby}class Me{constructor(e){this.position=e}render(){return`\n      <div id="${this.position}-oop"></div>\n    `}}function Ne(e){let{component:t,id:n,position:r,getConfig:i,log:o}=e;const a=new E,s=i(`slotDescription.${r}`);if(!s)return o.warn("no config"),a;o("config",s);for(const e of s.slotTypes)switch(e){case"amazon":a.add(new K({getConfig:i}));break;case"googleAdSense":a.add(new Ee({getConfig:i}));break;case"widgets":a.add(new De({getConfig:i,log:o}));break;case"gpt":a.add(new Te({component:t,id:n,position:r,description:s,log:o}));break;case"oop":a.add(new Me(r))}return a}const Ue=b.ZP.broker("components"),Le=(0,y.x)("components");Ue.on("plugins initialized",(()=>{Le("setting up custom elements"),N.addBehaviourFactory(Ne),customElements.define("ad-slot",N),customElements.define("ad-pufflist-slot",$,{extends:"ul"})}));var je=__webpack_require__(9461),Be=__webpack_require__(6247),qe=__webpack_require__.n(Be),Fe=__webpack_require__(939);const Ve=__webpack_require__(8104),ze=__webpack_require__(3677),We=__webpack_require__(43);var He=__webpack_require__(9946);const Ze=(0,y.x)("players.tags"),$e=b.ZP.broker("players.tags"),Ge=(0,J.v_)(((e,t)=>{let{args:n={},observable:r,broker:i,log:o}=t,a={cust_params:{}};const{pos:s,offset:d}=n,c=o.extend(`${e}-${s}-${d}`);c("startAuction requested",n),i.emit("collect video tags",{...n,getVideoTagsNum:e},((e,t)=>{const n=t&&t.tags?t.tags:t;if(!n)return c("Video targeting ended with:",a),void r(n);a=(0,Fe.Yb)({...a,...n,cust_params:{...a.cust_params,...n.cust_params}}),r(e,a)}))}));let Ke={cust_params:{}};function Xe(){return Ke}$e.on("sync video tags update",(e=>{Ke=qe()({},Ke,e)}));const Je=e=>{let{allTargeting:t,syncVideoTags:n}=e;const r=t.reduce(((e,t)=>{const n=(e=>e&&"tags"in e)(t)?(e=>e.tags||{})(t):(e=>e&&"targeting"in e)(t)?(e=>e.targeting||{})(t):t||{},r=(0,Fe.Yb)(n);return{...e,...r,cust_params:{...e.cust_params,...r.cust_params}}}),{cust_params:{}}),i=qe()({},r.cust_params,n.cust_params),{npa:o,rdp:a,ppid:s}=qe()({},r,n);return{custParams:i,npa:o,rdp:a,ppid:s}},Ye=(0,J.v_)(((e,t)=>{let{videoTagsRequestOpts:n,targetingHandler:r=Je,_broker:i=$e}=t;const{autoplay:o,offset:a,pos:s,videoId:d,videoStarts:c}=n,l=Ze.extend(`${e}-${s}-${a}`);l("startAuction requested",n);const u=s?[{cust_params:{pos:s}}]:[];let p;const f=Date.now(),{resolve:h,promise:g}=(0,He.PQ)();i.emit("collect video tags",{...n,getVideoTagsNum:e},((e,t)=>{t?u.push(t):(l("targeting",u),h())}));const m={adSDK:"IMA",autoplay:o,offset:a,platform:"jwplayer"===s?"chromeless":"dmplayer",play:c,targeting:{pos:[s]},timeSinceStartOfPlayer:Date.now()-f,videoId:d};return{pAuctionEnded:g,buildAdTagUrl:()=>{l("building adTagUrl with targeting:",u);const{custParams:t,npa:i,rdp:o,ppid:a}=r({allTargeting:u,syncVideoTags:Ke,getVideoTagsNum:e,videoTagsRequestOpts:n}),{timeoutPromise:s,...d}=n;return p=(e=>{const{adRequestFramework:t,adEl:n,articleURL:r,autoplay:i,cust_params:o,domain:a,duration:s,embed:d,fbiaEmbed:c,flyaway:l,headerBiddingParams:u,linkBaseURL:p,offset:f,platform:h,muted:g,scor:m,screen:v,source:y,sync:b,syndicationService:_,title:w,videoEl:T,videoId:I,videoStarts:S,isMobile:k,original:C,npa:E,rdp:A,ppid:P}=e,x=We({autoplay:i,fbiaEmbed:c,flyaway:l,syndicationService:_,videoAdServerUrl:e.videoAdServerUrl,isMobile:k,original:C}),{customParams:O}=Ve({adEl:n,articleURL:r,adRequestFramework:t,autoplay:i,cust_params:o,domain:a,duration:s,embed:d,flyaway:l,headerBiddingParams:u,offset:f,platform:h,muted:g,screen:v,source:y,sync:b,title:w,videoAdServerUrl:x,videoEl:T,videoId:I,videoStarts:S});return ze({customParams:O,linkBaseURL:p,npa:E,ppid:P,rdp:A,scor:m,screen:v,videoAdServerUrl:x,videoId:I})})({...d,cust_params:t,npa:i,rdp:o,ppid:a}),l("returning adTagUrl:",p),p},onImpression:e=>{let{adUnit:t,videoOpts:n}=e;const r={...m,...n,adImpression:(o=t.creativeAd,{adPodInfo:{maxDuration:o.getAdPodInfo().getMaxDuration()},adWrapperSystems:o.getWrapperAdSystems(),title:o.getTitle(),adSystem:o.getAdSystem(),contentType:o.getContentType(),adWrapperCreativeIds:o.getWrapperCreativeIds(),adWrapperIds:o.getWrapperAdIds(),mediaUrl:o.getMediaUrl(),skippable:1!==o.getSkipTimeOffset(),height:o.getVastMediaHeight(),width:o.getVastMediaWidth(),adSDK:"IMA"}),playerId:"jwplayer"===s?s:"video",tag:p};var o;l("adImpression received",r),i.emit("video.ad-impression",r)},onFailure:e=>{let{videoOpts:t}=e;const n={...m,...t,tag:p};l("onFailure received",n),i.emit("video.no-ad-shown",n)}}}));var Qe=__webpack_require__(9347);const et=(0,y.x)("videoBidding"),tt=(0,y.x)("videoPlayer"),nt=(e,t,n)=>({videoAdServerUrl:n.replace(/(&iu=[^&]*)/,`$1/${e}`),cust_params:{pos:e},...t}),rt=(e,t)=>{var n,r;et("request for video options");const i=(0,v.U2)("plugins.enabled",[]).includes("adsFree")&&(null===(n=(r=__webpack_require__.g).isAdFreeEntitled)||void 0===n?void 0:n.call(r));et("isAdFreeUser",i);const o=(0,v.U2)("players.editorial.v2",{}),a=(0,v.U2)("plugins.forceFlyawayPlayerConfiguration.styleVariant","letterbox"),s=(0,v.U2)("player.setup.flyoutFromParagraph"),[d]=(0,je.oK)(),c=(0,v.U2)("players.setup.earlyAdFactoryInit",!0),l=-1!==d&&(0,v.U2)("players.setup.userActionTimeout"),u=-1!==d&&(0,v.U2)("players.setup.earlyBidding"),p=new Set((0,v.U2)("plugins.enabled",[])),f=e=>{const t=(0,v.U2)(`players.setup.${e}`);return void 0!==t&&t||Boolean(p.has(e))},h=f("mobileFlyawayPlayer"),{tracking:g={},"ads-setup":m={}}=t.plugins||{},y=m.schedule||!g.sponsored&&m.adsEnabled&&((e,t)=>{if((0,Fe.xb)(e))return[];const n=t.duration/1e3,{preRoll:r,midRollRepeat:i}=e,o=[],a=t.plugins["ads-setup"].videoAdServerUrl;if(r&&o.push(nt("preroll",{offset:0},a)),i){const{each:e,videoDurationExceeds:t}=i;let r=e,s=r+t;for(;s<n;)o.push(nt("midroll",{offset:r,minVideoDuration:s},a)),r+=e,s=r+t}return o.sort(((e,t)=>e.offset-t.offset))})(o,t)||[];et("schedule",y);const b=f("chromelessv2.dmplayer")||f("players.commercial"),_=!b&&f("videoFlyout"),w=!b&&f("videoForceFlyout"),T=i?{adsEnabled:!1,earlyAdFactoryInit:!1,earlyBidding:!1,schedule:[],useIMASDK:!1,userActionTimeout:!1,vpaidEnabled:!1}:{schedule:y,vpaidEnabled:f("vpaid"),useIMASDK:f("imaSDK"),earlyAdFactoryInit:!!c,userActionTimeout:l,earlyBidding:u},I={"ads-setup":{...m,...T,bidmax:!0},flyout:{enabled:_,active:_,forceFlyout:{enabled:w,active:w}},flyawayPlayer:{enabled:h,fromParagraph:s,...h?{adhesiveStyleVariant:a}:{}},debugOn:tt.enabled};return et("new opts:",I),I};var it=__webpack_require__(6644);const ot=(0,y.x)("AdsManager"),at=[],st=()=>__webpack_require__.g.DM.molFeMiniLodash.filter(__webpack_require__.g.document.documentElement.childNodes,(e=>1===e.nodeType))[0]||document.body,dt=b.ZP.broker("AdsManager"),ct=()=>{},lt=e=>{dt.emit("stop refreshing ads",e)},ut=()=>dt.emit("force ads refresh"),pt=e=>{const{id:t}=function(e){const t=document.currentScript||(0,Qe.Z$)(document.querySelectorAll(`*[id^=${e.pos}] script`))||(0,Qe.Z$)(document.scripts);return null==t?void 0:t.parentNode}(e)||{},n={...e,containerId:t};dt.emit("api message","adSlotMount",n)},ft=e=>{dt.emit("infinite-list append",e)},ht=e=>at.push(e),gt=()=>{if(document.getElementById("content"))for(const e of at){const t=document.getElementById(e),n=document.getElementById(e),r=n.getAttribute("style");t.className=n.className,r&&t.setAttribute("style",n.getAttribute("style"))}},mt=dt.until("gpt loaded"),vt=e=>mt.then(e),yt=e=>{dt.emit("add taboola",e.position,e)},bt=()=>{dt.emit("add fb-marketing-pixel")};dt.on("error",(function(){return console.error(...arguments)}));let _t={version:1};dt.on("send with rta page unload",(e=>{ot("will send to rta on page unload:",e),_t={..._t,...e}}));const wt=()=>_t;try{const e=()=>!!Object.keys(je.queryParams).some((e=>e.includes("debug")));"production"!==__webpack_require__.g.adEnvironment||e()||(b.ZP.showUncaughtErrors=!1)}catch(e){console.error(e)}const Tt=e=>Object.keys((0,v.U2)("slots.enabled",{})).includes("mpu_player")?(dt.emit("chromeless player event","bannerFallbackAd",e),dt.until("bannerFallbackAd destroyed")):(ot("fallback banner ad disabled, resolving"),Promise.resolve());let It=[];function St(){return It}function kt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dt;e.pos=e.pos||"video";const{pos:r,offset:i,videoId:o}=e;console.warn("DEPRECATED: consider using startVideoAuction"),ot("getVideoTags",o,r,i,e),Ge({args:e,observable:t,broker:n,log:ot})}dt.on("ads rendered update",(e=>{It=e}));const Ct=Xe;function Et(){dt.emit("open control panel")}function At(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];dt.emit("external subscription",e,...n)}function Pt(e){dt.emit("unstick position",e)}function xt(e){dt.emit("remove watermark",e)}function Ot(e){e.pos=e.pos||"video";const{pos:t,offset:n,videoId:r}=e;return ot("startVideoAuction",r,t,n,e),Ye({videoTagsRequestOpts:e})}var Dt=__webpack_require__(4955),Rt=__webpack_require__(3596),Mt=__webpack_require__(2614),Nt=__webpack_require__(8189),Ut=__webpack_require__(6709);const Lt=__webpack_require__(2756),jt=__webpack_require__(8189),Bt=new Lt("click",(function(e){const t=jt.getElementOrIframeById(e),n=t.classList.contains("slide")?t:(0,Ut.closest)(t,(function(e){return e.classList.contains("slide")}));let r;return document.querySelectorAll?r=n.querySelectorAll(".adLinkLabel a"):(r=n.getElementsByTagName("a"),r=Array.prototype.filter.call(r,(function(e){return(0,Ut.closest)(e,(function(e){return e.classList.contains("adLinkLabel")}))}))),r[0]})),qt=new Lt("adDeactivate",(function(e){return(0,Ut.closest)(jt.getElementOrIframeById(e),(function(e){return"mobileGalleryModal"===e.id}))}));function Ft(){const e=Array.prototype.slice.call(arguments),t=e[1];e[1]=function(){window.open(t,"_blank")},Bt.registerEvent.apply(Bt,e)}function Vt(e,t){qt.registerEvent(e,t)}function zt(e){"string"==typeof e?e=jt.getElementById(e):(0,Ut.isElement)(e)||(e=e[0]);let t=(e=jt.getAdContainer(e)).getElementsByTagName("div");return t=Array.prototype.filter.call(t,(function(e){const t=Bt.getEvent(e.id);return t&&-1!==t.toString().indexOf("window.open")})),t.length>0}function Wt(){Bt.registerEvent.apply(Bt,arguments)}var Ht=__webpack_require__(1364),Zt=__webpack_require__.n(Ht),$t=__webpack_require__(2756),Gt=__webpack_require__.n($t);const Kt={},Xt=e=>{if(e in Kt)return Kt[e];let t=!0,n=(0,v.U2)("headerBidders",{});"string"==typeof n&&(n=JSON.parse(n));const r=n[window.location.hostname];return r&&(r.blacklist&&r.blacklist.includes(e)&&(t=!1),r.whitelist&&!r.whitelist.includes(e)&&(t=!1)),Kt[e]=t,t};function Jt(){return(0,v.U2)("plugins.enabled",[]).filter((e=>Xt(e)))}var Yt=__webpack_require__(319);const Qt=(0,y.x)("plugin-manager");let en,tn,nn,rn={},on=[];const an=e=>{Qt("adding plugins:",e);const t=new Set([...(0,v.U2)("plugins.enabled",[]),...e]);(0,v.t8)("plugins.enabled",[...t])},sn=e=>{Qt("removing plugins:",e);const t=new Set((0,v.U2)("plugins.enabled",[]));e.forEach((e=>{t.delete(e)})),(0,v.t8)("plugins.enabled",[...t])},dn=[],cn=e=>dn.push(e),ln=async(e,t)=>(await Promise.all(dn.map((n=>n(e,t))))).every((e=>e)),un=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{addPlugins:an,broker:en.broker(e),doc:document,getConfig:v.U2,setConfig:v.t8,localStorage,sessionStorage,log:(0,y.x)(e),removePlugins:sn,registerPluginBouncer:cn,checkPluginBouncer:ln,ownName:e,win:window,...t}},pn=e=>"object"==typeof e&&e.default?e.default:e,fn=(e,t,n)=>{if(!Xt(t))return;if(nn.includes(t))return;let r=pn(e[t]);if("function"!=typeof r&&(r=pn(e[t])),nn.push(t),"function"==typeof r)try{r(un(t,n))}catch(e){console.error(`Error initializing plugin "${t}":`,e)}},hn=async(e,t)=>{const n=(0,v.U2)("pluginManager.setupTimeout",5e3),r=async(e,r,i)=>{try{const o={...un(e,t),pluginsAlreadyRun:i};(0,v.t8)("pluginManager.setupTimeout",r.plugiSetupTimeout||n);const a=r.pluginSetup(o),s=(0,v.U2)("pluginManager.setupTimeout",n);return await(0,He.yq)(s,a)}catch(t){console.error(`Error calling pluginSetup on plugin '${e}':`,t)}},i=new Set;let o=null;for(;;){const t=(0,v.U2)("plugins.enabled").filter((e=>!i.has(e))).shift();if(!t)break;if(o===t){Qt.warn("Plugin",t,"just ran and its asking to run again, ignoring it"),i.add(t);continue}o=t;let n="object"==typeof(a=e[t])&&a.default?a.default:a;if(n="object"==typeof n?n.default:n,n&&"function"==typeof n.pluginSetup){if(!await ln(t,n)){Qt("plugin bounced during init",t),i.add(t);continue}Qt("setup plugin",t),"not yet"!==await r(t,n,i)?(Qt("ran:",t),i.add(t)):Qt("plugin",t,"asked to be called again")}else i.add(t)}var a};function gn(e){return Object.fromEntries(Object.entries(e).map((e=>{let[t,{run:n,init:r,initTimeout:i,...o}]=e;const a=n||(()=>{});return a.pluginSetup=r,a.plugiSetupTimeout=i||5e3,Object.entries(o).forEach((e=>{let[t,n]=e;return a[t]=n})),[t,a]})))}function mn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:__webpack_require__.g.document,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.head;return new Promise(((i,o)=>{"async"in t||(t.async=!0);const a=n.createElement("script");a.src=e,Object.entries(t).forEach((e=>{let[t,n]=e;a.setAttribute(t,!0===n?t:!1===n?"":n)})),a.addEventListener("load",i),a.addEventListener("error",o),"function"==typeof r?r(a):r.appendChild(a)}))}(0,Yt.fo)("adzouk",{run:function(e){let{broker:t}=e;const{top:n}=__webpack_require__.g;if(n.location.hostname.includes("combotag.com"))return;const r=encodeURIComponent(location.href),i=n.ct_t_init;t.invoke("load script",`//serve.combotag.com/show_ad?id=994&url=${r}&t=${i}`,null,{},(()=>!0))},vendorIds:{gdpr:!1}}),(0,Yt.fo)("scriptLoader",{run:function(e){let{broker:t,getConfig:n,log:r}=e;const i={};t.register("load script",((e,t,n,o)=>new Promise(((a,s)=>{r("load script:",e,t,n,o);const d=o||(()=>window[t]);t&&d()&&(r("variable already defined:",t),a(d()));const c=t||e;if(i[c]||(r("adding script tag to load",e),mn(e,n).then((()=>{r("script loaded:",e);const t=i[c];r("calling",t.length,"listeners");const n=e=>e();i[c]={push:n},t.forEach(n)}),s),i[c]=[]),t||o)try{(0,He.gb)((()=>d())).then((e=>{r("tracking variable found:",t,o,e),a(e)}))}catch(n){r("error while loading",e,":",n),s(new Error(`Error loading ${e} (trackingVariable: ${t}): ${n}`))}else r("no tracking variable given for",e,"waiting on script load"),i[c].push(a)})))),t.register("import script",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{document:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;return mn(e,t,n,arguments.length>3?arguments[3]:void 0)})),t.register("import script in iframe",(e=>{let{url:t}=e;return new Promise(((e,n)=>{const r=document.createElement("iframe");r.display="none",r.onload=()=>mn(t,{},r.contentWindow.document).then(e,n),document.head.appendChild(r)}))})),t.register("import stylesheet",(e=>{const t=document.createElement("link"),{head:n}=document;t.href=e,t.setAttribute("rel","stylesheet"),n.appendChild(t)}))},isAdsFreeSupported:!0,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0}});const vn=()=>({articlewithvideo:""+__webpack_require__.g.PageCriteria.containsVideo,style:__webpack_require__.g.PageCriteria.articleStyle});async function yn(e){let{broker:t}=e;t.emit("set page level targeting",vn()),t.emit("set page level targeting",new Promise((async e=>{await(0,Ut.untilBodyAvailable)(),e(vn())})))}yn.ccpa={enabledIfDissent:!0},yn.gdpr={enabledIfDissent:!0};var bn=__webpack_require__(2297),_n=__webpack_require__.n(bn),wn=__webpack_require__(4197),Tn=__webpack_require__.n(wn);const In=e=>{let t,n,r="GET",i=3e3,o={};"string"==typeof e?t=e:({method:r="GET",url:t,timeout:i=3e3,headers:o={},data:n}=e);const a=new XMLHttpRequest,s=new Promise(((e,i)=>{a.onreadystatechange=function(){4===this.readyState&&(this.status>199&&this.status<300?e(this.responseText):i(new Error(`Error status ${this.status}: ${this.statusText}`)))},a.open(r,t,!0),Object.entries(o).forEach((e=>{let[t,n]=e;return a.setRequestHeader(t,n)})),n?a.send(n):a.send()}));return i?(0,He.yq)(i,s):s},Sn={purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[95]}};async function kn(){let e,t=`/api/player/${PageCriteria.pageType}/${PageCriteria.channel}`;"article"===PageCriteria.pageType&&(t+=`/article-${PageCriteria.articleId}`),t+="/player-config.json";try{e=await In({url:t,timeout:5e3})}catch(e){console.error(e)}return e}function Cn(e){let{broker:t,checkPluginBouncer:n}=e;const r=(0,v.U2)("pos.bvp_puff_26.editorialVideoURL","//video.dailymail.co.uk/video/mol/test/2017/10/17/8934813711130511437/1024x576_MP4_8934813711130511437.mp4");function i(e,n,r,i,o,a){const s=document.getElementById(e),d=e+"_player",c={id:d,width:640,height:264,dataOpts:n,src:r,click:a,description:o,title:(0,v.U2)("pos.bvp_puff_26.title","SPONSORED")},l=document.createElement("div"),u=i(c);l.innerHTML=u,function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)}(s),s.appendChild(l.firstElementChild),"none"===s.style.display&&(s.style.display="");const p=DM.molFeVideoplayer.init(document.getElementById(d));t.emit("video player inited",e,p)}__webpack_require__.g.addEventListener("message",(async function(e){if(!e.data||"function"!=typeof e.data.indexOf)return;const n=e.data.indexOf("_dm\n");if(0===n){let o;const a=e.data.substring(n+4),s=JSON.parse(a);je.queryParams["bvp-force-editorial"]&&(o=await kn())?(console.log("Forcing editorial instead of campaign in BVP"),i(s.targeting.pos[0],o,r,Tn(),"","")):t.emit("video",s.type,s)}}),!1),t.on("ad rendered",(async(e,t)=>{if(t.isEmpty&&e.startsWith("bvp_")&&(0,v.U2)("pos.bvp_puff_26.editorialFallback")){const t=await kn();t&&i(e,t,r,Tn(),"","")}})),t.on("video","playBrandedVideo",(e=>{const r=e.targeting.pos[0];if(!document.getElementById(r))return void t.emit("log","BVP",`Element #${r} not found`);const o=e.videoObject;let a=[];n("brandedVideoPlayer",Sn)&&(a=[...a,...e.lotome.filter((e=>e.id&&e.id.length)).map((e=>({time:e.time,uri:`//bcp.crwdcntrl.net/5/c=991/b=${e.id}`})))]),e.impTracker&&e.impTracker.length&&a.push({time:9,uri:e.impTracker});const s=`${e.clickPrefix}${o.clickThroughUrl}`,d={title:o.pageTitle,poster:o.stillImageUrl,isMobile:PageCriteria.isMobile,playerId:"default",videoId:o.videoId,preload:"none",referenceId:o.referenceId,linkBaseURL:"",initialVideo:!1,plugins:{"branded-content":{clickThroughUri:s,endStatePoster:o.endStateImageUrl,trackingPixels:a},"ads-setup":{adsEnabled:!1},tracking:{channelShortName:PageCriteria.channel,sponsored:!0,referenceId:o.referenceId,trackingType:"commercialVideoPlayer"}}};i(r,JSON.stringify(d),o.videoUrl,_n(),o.description,s)}))}Cn.ccpa={enabledIfDissent:!0},Cn.gdpr={enabledIfDissent:!0};const En=()=>{const e=document.createTextNode((0,v.U2)("label.text","ADVERTISEMENT")),t=document.createElement("span");t.classList.add("mol-ads-label"),t.appendChild(e);const n=document.createElement("span");return n.classList.add("mol-ads-label-container"),n.appendChild(t),n};function An(e){let{broker:t,log:n,getConfig:r}=e;__webpack_require__(4701);const i=__webpack_require__.g.googletag=__webpack_require__.g.googletag||{};i.cmd=i.cmd||[];const o=new Promise((e=>i.cmd.push((()=>e()))));t.emit("import script","//www.googletagservices.com/tag/js/gpt.js"),t.on("system ready",(async()=>{await o,t.emit("gpt loaded",i)}));const a=new Set,s=e=>{let{slot:t}=e;const n=document.getElementById(t.getSlotElementId());n&&n.classList.contains("noAdLabel")||a.delete(t)&&n&&n.appendChild(En())};o.then((()=>i.pubads().addEventListener("slotRenderEnded",s))),t.register("googletag.pubads.refresh",(async(e,t)=>{await o,e.forEach((e=>{a.add(e),n.enable&&n("refresh",e.molAd.pos,"targeting",e.getTargetingMap())})),i.pubads().refresh(e,t)})).sync=!0,t.register("googletag.display",(async e=>{if(await o,n.enabled)try{const t=i.pubads().getSlots().find((t=>t.getSlotElementId()===e)),r=t&&t.getTargetingMap()||void 0;n("display",e,"targeting",r)}catch(e){n.warn(e)}return i.display(e)})).sync=!0;const d=e=>(Array.isArray(e)?e:[e]).map((e=>String(e)));t.on("set page level targeting",(async e=>{const t=await e;await o,Object.entries(t||{}).map((e=>{let[t,n]=e;return[t,d(n)]})).forEach((e=>{let[t,r]=e;n("page level targeting:",t,"=",r),i.pubads().setTargeting(t,r)}))}))}An.ccpa={enabledIfDissent:!0},An.gdpr={enabledIfDissent:!0},An.disableIfNoAdsServable=!0;const Pn=e=>__webpack_require__.g.sessionStorage.getItem(e),xn=(e,t)=>{__webpack_require__.g.sessionStorage.setItem(e,t),On()},On=()=>{__webpack_require__.g.localStorage.setItem("mol.ads.session.publish",JSON.stringify(sessionStorage)),__webpack_require__.g.localStorage.removeItem("mol.ads.session.publish")},Dn=e=>{for(const t in e)__webpack_require__.g.sessionStorage.setItem(t,e[t])},Rn=e=>{let{key:t,newValue:n}=e;if(n)switch(t){case"mol.ads.session.request":__webpack_require__.g.localStorage.setItem("mol.ads.session.response",JSON.stringify(__webpack_require__.g.sessionStorage)),__webpack_require__.g.localStorage.removeItem("mol.ads.session.response");break;case"mol.ads.session.publish":Dn(JSON.parse(n))}};let Mn;const Nn=()=>(Mn||(__webpack_require__.g.addEventListener("storage",Rn),Mn=new Promise((e=>{const t=n=>{let{key:r,newValue:i}=n;if("mol.ads.session.response"!==r)return;__webpack_require__.g.removeEventListener("storage",t);const o=i?JSON.parse(i):{};e(o)};__webpack_require__.g.addEventListener("storage",t),__webpack_require__.g.localStorage.setItem("mol.ads.session.request","mol.ads.session.request"),__webpack_require__.g.localStorage.removeItem("mol.ads.session.request")})).then(Dn)),Mn),Un=()=>{let e=parseInt(Pn("mol.ads.sessionDepth")||0);return isNaN(e)&&(e=0),e++,xn("mol.ads.sessionDepth",e),e},Ln=async()=>{const e=Nn();return await Promise.race([e,(0,He.Vs)(1)]),{session:await Un()}};async function jn(e){let{broker:t}=e;t.emit("set page level targeting",Ln())}jn.isAdsFreeSupported=!0,jn.ccpa={enabledIfDissent:!0},jn.gdpr={enabledIfDissent:!0};const Bn=()=>!!Pn("mol.ads.taboolaSessionStarted"),qn=async e=>{const t=Promise.race([Nn(),(0,He.Vs)(1)]);await t;const n=Bn()?{referred_by:"taboola"}:{},r=(e=>{let t=parseInt((0,je.ej)("mol.ads.taboolaReferrals"));isNaN(t)&&(t=0);const n=Bn(),{ito:r}=je.queryParams;return("taboola-uk"===r||"taboola-us"===r||"taboola-au"===r||e)&&!n&&(xn("mol.ads.taboolaSessionStarted",!0),(0,je.zP)("mol.ads.taboolaReferrals",++t)),t})(e);return r&&Object.assign(n,{taboola_referrals:r}),n};async function Fn(e,t){let{broker:n}=e;n.emit("set page level targeting",qn(t))}Fn.ccpa={enabledIfDissent:!0},Fn.gdpr={enabledIfDissent:!0},__webpack_require__(5452),__webpack_require__(7209);var Vn=__webpack_require__(438);(0,Yt.fo)("analytics.bidsHunting",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=new Set(n("analytics.bidsHunting.positions",[])),o=new Set(n("analytics.bidsHunting.bidders",[]));t.on("bid",((e,n)=>{!n.cpm||i.size>0&&!i.has(e)||o.size>0&&!o.has(n.bidder)||(r(" adding bid to stack",e,n),t.emit("send event to bidmax",{type:"custom",payload:{...n,event:"bid-hunt",pos:e}}))}))}}),(0,Yt.fo)("analytics.coreMetrics",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){var t,n,r,i,o,a;let{broker:s}=e;const d=null===(t=__webpack_require__.g.performance)||void 0===t||null===(n=t.getEntries())||void 0===n||null===(r=n[0])||void 0===r||null===(i=r.serverTiming)||void 0===i||null===(o=i.find((e=>"cdn-cache"===e.name)))||void 0===o||null===(a=o.description)||void 0===a?void 0:a.toLowerCase();s.register("call for page analytics",(()=>{const{width:e,height:t}=(0,je.ap)();return{ss:{w:e,h:t},pageCache:d}}))}});var zn=__webpack_require__(6364);(0,Yt.fo)("analytics.cwv",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,log:n}=e;function r(){const e=__webpack_require__.g.DM.molFeWebVitals.getStandard(),{CLS:t,FCP:n,FID:r,LCP:i,TTFB:a}=e;return o({cls:1e3*(t||0),fcp:n,fid:r,lcp:i,ttfb:a})}function i(){const e=__webpack_require__.g.DM.molFeWebVitals.getUpdated(),{CLS:t,FCP:n,FID:r,LCP:i,TTFB:a}=e;return o({cls:1e3*(t||0),fcp:n,fid:r,lcp:i,ttfb:a})}function o(e){return Object.fromEntries(Object.entries(e).filter((e=>{let[,t]=e;return null!=t})).map((e=>{let[t,n]=e;return[t,Math.round(n)]})))}__webpack_require__.g.DM&&__webpack_require__.g.DM.molFeWebVitals?(t.register("call for page analytics",(()=>({cwv:r()}))),__webpack_require__.g.DM.molFeWebVitals.getUpdated&&t.register("call for page-unload",(()=>({cwv:i()}))),__webpack_require__.g.DM.later("mol-fe-web-vitals-standard",(()=>{const e=function(){const e=r(),{cls:t,fcp:n,fid:i,lcp:o,ttfb:a}=e;return{...(0,zn._b)("clsP1k",t),...(0,zn._b)("fcpP10s",n),...(0,zn._b)("fidP1s",i),...(0,zn._b)("lcpP10s",o),...(0,zn._b)("ttfbP10s",a)}}();n("mol-fe-web-vitals-standard fired, cwv:",e),t.emit("send event to bidmax",{type:"custom",payload:{event:"cwv",...e}})}))):n.warn("cwv metrics cannot be used because window.DM.molFeWebVitals is unavailable")}}),(0,Yt.fo)("analytics.pageUnload",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){var t;let{broker:n,log:r,setConfig:i}=e;const o={capture:!0,passive:!0},a=__webpack_require__.g.performance&&__webpack_require__.g.performance.timing&&__webpack_require__.g.performance.timing.navigationStart||__webpack_require__.g.adverts.startTime;r("Starting at:",__webpack_require__.g.adverts.startTime-a);const s=localStorage.getItem("mol.ads.previousDwellTime"),d=(null===(t=(0,je.Y0)())||void 0===t?void 0:t.type)||"unknown";setInterval((()=>{localStorage.setItem("mol.ads.previousDwellTime",Date.now()-a)}),1e4);let c=!1,l=0,u=0;const p=new Set,f=new Set;n.on("ad rendered",(e=>{p.add(e),l++})),n.on("bid",((e,t)=>{let{bidder:n}=t;f.add(n),u++}));const h=async()=>{if(c)return;c=!0,r("force sync dispatcher"),n.bus.setDispatcher((e=>e())),n.bus.globalTimeoutOverride=0,r("about to call for page-unload");const e=await n.invokeAll("call for page-unload"),t=Date.now()-a;localStorage.setItem("mol.ads.previousDwellTime",t);const i=e.reduce(((e,t)=>({...e,...t})),{t,pdt:s,autorefresh:!!(0,je.ej)("autorefresh"),pnt:d,chp:window.location.href.includes("comments"),imp:l,bids:u,pr:p.size,ub:f.size});r("got:",i),n.emit("send event to bidmax",{type:"page-unload",payload:i},!0)};window.addEventListener("pagehide",h,o),window.addEventListener("beforeunload",h,o),window.addEventListener("unload",h,o)}}),(0,Yt.fo)("analytics.partners",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;t.once("permutive ready",(()=>a({event:"permutive-load"}))),t.once("new minute media player",(()=>a({event:"mm-load"}))),t.once("admantx loaded",(()=>a({event:"admantx-load"}))),document.addEventListener("spot-im-api-ready",(()=>a({event:"openweb-load"}))),document.addEventListener("spot-im-conversation-loaded",(()=>a({event:"openweb-conv-loaded"}))),document.addEventListener("spot-im-conversation-viewed",(()=>a({event:"openweb-conv-viewed"}))),document.addEventListener("spot-im-current-user-sent-message",(()=>o("powms"))),Wn.forEach((e=>document.addEventListener(e,(()=>o("powui"))))),t.once("taboola render",(()=>a({event:"taboola-first-render"}))),t.once("taboola visible",(()=>a({event:"taboola-first-view"}))),t.on("taboola render",(()=>o("pti"))),t.on("taboola visible",(()=>o("ptv"))),t.on("taboola nocontent",(()=>o("ptnc"))),t.on("taboola failed to load",(()=>o("ptftl"))),t.on("taboola click",(()=>o("ptc"))),t.once("outbrain container render",(()=>a({event:"outbrain-container-render"}))),t.once("outbrain render",(()=>a({event:"outbrain-first-widget-render"}))),t.once("outbrain visible",(()=>a({event:"outbrain-first-view"}))),t.on("outbrain render",(()=>o("poi"))),t.on("outbrain visible",(()=>o("pov"))),t.on("outbrain nocontent",(()=>o("ponc"))),t.on("outbrain failed to load",(()=>o("poftl"))),t.on("outbrain click",(()=>o("poc"))),t.on("outbrain issue",(()=>o("pop")));let r=0;t.on("new perform player",((e,n)=>{0===r&&a({event:"dazn-load"});const i="peformPlayer-"+r++;t.emit("track viewability",i,n),t.once("ad viewable",i,(()=>o("pdv")))}));const i={};function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!Hn[e])throw new Error(`Metric '${e}' not registered in 'knownMetric'. Please do so.`);n("inc counter:",e);const r=i[e]||0;i[e]=r+t}function a(e){n("sending event:",e),t.emit("send event to bidmax",{type:"custom",payload:e})}t.register("call for page-unload",(()=>i))}});const Wn=["spot-im-clicked-delete-message","spot-im-clicked-edit-message","spot-im-clicked-flag","spot-im-clicked-message-context-menu","spot-im-clicked-mute-user","spot-im-share-drop-down","spot-im-share-type","spot-im-hover-like-details","spot-im-show-more-comments-clicked","spot-im-show-more-replies-clicked","spot-im-user-down-vote-click","spot-im-user-up-vote-click","spot-im-login-start","spot-im-post-login","spot-im-notification-drop-down-link","spot-im-user-notifications-click","spot-im-clicked-cog-menu","spot-im-clicked-privacy","spot-im-clicked-settings","spot-im-profile-drop-down","spot-im-sort-by-drop-down","spot-im-sort-by-select","spot-im-clicked-article-link-profile","spot-im-open-user-profile"],Hn={pti:"taboola impression",ptv:"taboola view",ptnc:"taboola no content",ptftl:"taboola failed to load",ptc:"taboola click",poi:"outbrain impression",pov:"outbrain view",ponc:"outbrain no content",poftl:"outbrain failed to load",poc:"outbrain click",pop:"outbrain issue",powui:"openWeb user interaction",powms:"openWeb message sent",pdv:"dazn view"};function Zn(e){let{broker:t}=e;t.register("call for page analytics",(()=>({abtest:__webpack_require__.g.molABTest})))}(0,Yt.fo)("analytics.reportPlugins",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,getConfig:n}=e;const r=new Set(n("bidmax.reportPlugins",[]));r.size>0&&t.register("call for page analytics",(()=>({plugins:n("plugins.enabled").filter((e=>r.has(e)))})))}}),(0,Yt.fo)("analytics.scrollDepth",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t}=e,n=0;function r(){n=Math.max(n,Math.round(window.pageYOffset+window.innerHeight))}document.addEventListener("scroll",(0,J.FU)(r,300),{passive:!0,capture:!1}),t.register("call for page-unload",(()=>(r(),{sd:n})))}}),(0,Yt.fo)("analytics.takeover",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r}=e,i=!1;n("__generated.modifiers.applied",[]).some((e=>e.startsWith("campaigns.rules-linteItem")))?(t.register("call for page analytics",(()=>({takeover:!0}))),t.emit("send event to bidmax",{type:"custom",payload:{event:"takeover"}})):__webpack_require__.g.addEventListener("message",(function e(n){!i&&n.data&&"function"==typeof n.data.indexOf&&0===n.data.indexOf("_dm_ads_takeover")&&(r("Marking page as containing takeover"),t.register("call for page analytics",(()=>({takeover:!0}))),t.emit("send event to bidmax",{type:"custom",payload:{event:"takeover"}}),i=!0,"function"==typeof __webpack_require__.g.removeEventListener&&__webpack_require__.g.removeEventListener("message",e,!1))}),!1)}}),(0,Yt.fo)("analytics.timeSpent",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,log:n,getConfig:r}=e;const i={capture:!0,passive:!0},o=r("bidmax.inactiveTime",1e4),a=__webpack_require__.g.performance&&__webpack_require__.g.performance.timing&&__webpack_require__.g.performance.timing.navigationStart||__webpack_require__.g.adverts.startTime;n("Starting at:",__webpack_require__.g.adverts.startTime-a);let s=0,d=0,c=a,l=a;const u=function(){const e=Date.now(),t=e-l-o;t>0&&(n("Adding inactive time:",t),s+=t,l=e)},p=()=>{const e=Date.now(),t=e-c;d+=t,n("Adding hidden time:",t),c=e},f=[[document,["mousemove","keypress","scroll","mousewheel","touchmove"]],[window,["focus","scroll"]]],h=(0,J.FU)((e=>{const t=Date.now();e&&u(),l=t}),1e3);for(const[e,t]of f)t.forEach((t=>e.addEventListener(t,h,i)));t.register("call for page-unload",(()=>(u(),m()&&p(),{i:s,h:d})));const g=()=>void 0!==document.hidden?"visibilitychange":void 0!==document.msHidden?"msvisibilitychange":void 0!==document.webkitHidden?"webkitvisibilitychanged":"",m=()=>{try{return __webpack_require__.g.top.document.hidden||__webpack_require__.g.top.document.msHidden||__webpack_require__.g.top.document.webkitHidden||!1}catch(e){return!!g()}};let v=m();document.addEventListener(g(),(e=>{m()!==v&&(v=m(),v?c=Date.now():p())}),!1)}}),(0,Yt.fo)("analytics.videoFailures",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){var t,n;let{broker:r,log:i}=e;i("Starting");const o=function(){let{videoId:e,adErrorCode:t,autoplay:n,errorMessage:o,offset:a,trackingType:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const d={videoId:e,adErrorCode:t,autoplay:n,errorMessage:o,offset:a,trackingType:s};i("Error detected:",e,d),r.emit("send event to bidmax",{type:"video-ad-error",payload:d}),i("error:",d)},a=()=>{i("subscribing to 'video.advert-failed' events"),__webpack_require__.g.DM.pageEvents.subscribe("video.advert-failed",(function(e){o(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}))};r.on("video.advert-failed",(function(){o(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})})),(null===(t=__webpack_require__.g)||void 0===t||null===(n=t.DM)||void 0===n?void 0:n.pageEvents)&&a()||(i("waiting for chromeless player to load"),r.on("mol-fe-sync bundle loaded",(()=>{var e,t;i("mol-fe-sync bundle loaded"),null!==(e=__webpack_require__.g)&&void 0!==e&&null!==(t=e.DM)&&void 0!==t&&t.pageEvents&&a()})))}}),Zn.isAdsFreeSupported=!0,Zn.ccpa={enabledIfDissent:!0},Zn.gdpr={enabledIfDissent:!0};var $n=__webpack_require__(8538);let Gn,Kn,Xn,Jn;const Yn=["advertiserId","campaignId","creativeId","isEmpty","lineItemId","serviceName"],Qn=["adDurationSecs","adSystem","adTitle","advertiserId","autoplay","contentType","creativeId","isEmpty","lineItemId","mediaUrl","offset","platform","play","skippable","targeting","timeAtRender","timeSinceStartOfPlayer","videoHeight","videoWidth","winner","winningCPM"],er=()=>Date.now()-__webpack_require__.g.adverts.startTime,tr=e=>{if(e.slot&&e.slot.molAd&&void 0!==e.slot.molAd.state)return e.slot.molAd.state};function nr(e){if(Array.isArray(e.size)&&2===e.size.length){const{size:[t,n]}=e;return`${t}x${n}`}}const rr=()=>{const e={};let t;const n={};let r=0;const i=async function(r){let{auction:i,pos:o,adImpressionData:a,offset:s}=r,d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!d)return delete e[o][s],n[o]&&delete n[o][s],delete i.pendingImpressions,delete i.lastPosTime,void(t=void 0);const c=i.slots[o];if(c.impression=a,void 0!==s?(i.pendingImpressions.delete(o+s),c.bids=n[o][s]?[...n[o][s]]:[],delete e[o][s],delete n[o][s]):(i.pendingImpressions.delete(o),c.bids=n[o],delete e[o],delete n[o]),!(i.pendingImpressions.size>0)&&(delete i.pendingImpressions,delete i.lastPosTime,t=void 0,d)){const e={...await ir(),auction:i};Gn.emit("send to bidmax",e)}},o=e=>({auctionTime:e,startTime:er(),auctionId:r++,slots:{},pendingImpressions:new Set}),a=(t,n,r)=>{n.lastPosTime=er(),n.pendingImpressions.add(t+(void 0!==r?r:"")),n.slots[t]={},void 0!==r?(n.offset=r,e[t]||(e[t]={}),e[t][r]=n):e[t]=n},s=(e,n)=>((!t||t.lastPosTime<er()-2e3)&&(t=o(e)),a(n,t),t.slots[n].auctionStart=er(),t);Gn.on("get tags",(t=>{let{slot:{pos:n},timeout:r}=t;e[n]?Jn(`Auction is pending for ${n}`):s(r,n)})),Gn.on("bidding ended",(t=>{Jn("bidding ended",t);const n=e[t];n.slots?n.slots[t].biddingEnded=er():Object.keys(n).forEach((e=>{n[e].slots[t].biddingEnded=er()}))})),Gn.on("get video tags",(t=>{let{platform:r="dmplayer",offset:i=0,slot:{pos:s},timeout:d}=t;e[s]&&e[s][i]&&(e[s][i].pendingImpressions.delete(s+i),delete e[s][i],delete n[s][i]),a(s,o(d),i),n[s]||(n[s]={}),n[s][i]=[]})),Gn.on("bid",((t,r)=>{let i,{platform:s,offset:d,bidder:c,cpm:l,cached:u,requestSizes:p}=r;if(Jn("on bid",t),s="jwplayer"===t&&"dmplayer"===s?"chromeless":s,void 0!==d?(n[t]||(n[t]={}),i=n[t][d]=n[t][d]||[]):i=n[t]=n[t]||[],!i)return void Jn.warn("Got a bid after auction finished:",{pos:t,bidder:c,cpm:l,platform:s,offset:d,cached:u});void 0===d||e[t][d]||a(t,o(5e3),d);const f={bidder:c,cpm:Math.round(l),time:er(),platform:s,offset:d,cached:u,requestSizes:p};i.push(f)})),Gn.on("ad requested",(t=>{const n=e[t];n&&(n.slots[t].adRequestTime=er())})),Gn.on("ad loaded",(t=>{const n=e[t];n&&(n.slots[t].adLoadedTime=er())})),Gn.on("headerbidder winner",((t,n)=>{const r=e[t];r&&(r.slots[t].winner=n)}));const d=__webpack_require__.g.DM&&__webpack_require__.g.DM.molFeTracking&&__webpack_require__.g.DM.molFeTracking.pageEvents,c=(t,r)=>{var s;const d=r.playerId||(r.targeting&&r.targeting.pos?r.targeting.pos[0]:"video");let c=r.platform||(null==r||null===(s=r.adImpression)||void 0===s?void 0:s.platform);c="jwplayer"===d&&"dmplayer"===c?"chromeless":c;const l="preroll"===r.offset?0:"midroll"===r.offset?20:r.offset,u=r.tag&&(0,$n.Gi)(r.tag)||{cust_params:{}},p=Object.fromEntries(Object.entries(u.cust_params).filter((e=>{let[t,n]=e;return!t.startsWith("gdpr")&&!t.startsWith("hb_")&&(null==n?void 0:n.length)<=20}))),f=r.adImpression;let h;let g,m;var v,y,b,_,w;f&&!(0,Fe.xb)(f)&&(n[d]=n[d]||{},n[d][l]=n[d][l]||[],Gn.emit("video ad viewable",{pos:d,bids:n[d][l],videoId:r.videoId}),g=(e=>{let t="undetermined";return!e.adWrapperIds||!e.adWrapperIds[0]||e&&e.adWrapperSystems&&"DCM"===e.adWrapperSystems[0]?t="Other":e.traffickingParameters&&e.traffickingParameters.vu?t="tia":e.traffickingParameters&&e.traffickingParameters.channel_id&&(t="spotx"),t})(f),m={}[g]||0,h={adDurationSecs:null==f||null===(v=f.adPodInfo)||void 0===v?void 0:v.maxDuration,adSystem:null==f?void 0:f.adWrapperSystems,adTitle:f.title,advertiserId:f.adSystem,autoplay:r.autoplay,contentType:f.contentType,creativeId:null==f||null===(y=f.adWrapperCreativeIds)||void 0===y?void 0:y[null==f||null===(b=f.adWrapperSystems)||void 0===b?void 0:b.indexOf("GDFP")],isEmpty:!1,lineItemId:null==f||null===(_=f.adWrapperIds)||void 0===_?void 0:_[null==f||null===(w=f.adWrapperSystems)||void 0===w?void 0:w.indexOf("GDFP")],mediaUrl:f.mediaUrl,play:r.play,skippable:f.skippable,targeting:{...p,...f.targeting||{pos:[d]}},timeSinceStartOfPlayer:r.timeSinceStartOfPlayer,videoHeight:f.vastMediaHeight,videoWidth:f.vastMediaWidth,winner:g,winningCPM:m},c&&(h.platform=c),void 0!==l&&(h.offset=l)),void 0===l||e[d]&&e[d][l]||a(d,o(5e3),l);const T={...e[d][l]};let I;delete e[d][l],T?(T.platform=c,T.offset=l,h&&!(0,Fe.xb)(h)?(I=(0,Fe.ei)(h,Qn),I.timeAtRender=er(),i({auction:T,pos:d,adImpressionData:I,offset:l})):i({auction:T,pos:d,offset:l},!1)):Jn(`Current auction not found for ${d}${l}`)};d&&(Gn.on("dom ready",(()=>{d.subscribe("video.ad-impression",c),d.subscribe("video.no-ad-shown",c)})),Gn.on("video.ad-impression",(e=>c(0,e))),Gn.on("video.no-ad-shown",(e=>c(0,e)))),Gn.on("ad rendered",((t,n)=>{if(t.endsWith("-oop"))return;const r=(e=>({...(0,Fe.ei)(e,Yn),...e.isEmpty?{}:{creativeId:e.creativeId||e.sourceAgnosticCreativeId,lineItemId:e.lineItemId||e.sourceAgnosticLineItemId,advertiserId:e.advertiser,campaignId:e.campaignId,companyId:e.companyIds},targeting:e.slot?{...e.slot.getTargetingMap()}:{},timeAtRender:er(),slotState:tr(e),size:nr(e)}))(n),o=e[t]||s(0,t);Jn("ad rendered, processImpression",t,o),i({auction:o,pos:t,adImpressionData:r})}))},ir=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const t=(await Gn.invokeAll({message:["call for page analytics"],timeout:e})).reduce(((e,t)=>({...e,...t})),{});return{...Kn,...t}};function or(e){let{broker:t,getConfig:n,log:r}=e;Jn=r,Gn=t,Xn=n,Kn={timestamp:__webpack_require__.g.adverts.startTime,referrer:document.referrer,url:window.location.href},__webpack_require__.g.performance&&__webpack_require__.g.performance.timing&&__webpack_require__.g.performance.timing.navigationStart&&(Kn.adsStart=__webpack_require__.g.adverts.startTime-__webpack_require__.g.performance.timing.navigationStart),Gn.register("get page level analytics",(()=>ir())),function(){const e=Xn("bidmax.debounceTime",1e3),t=Xn("bidmax.pageTimeout",1e3);let n=[];const r=(0,J.Ds)((async function(){let e={...await ir(t)};if(n.length){if(Jn.enabled){const e=n.find((e=>"page-unload"===e.type))?JSON.stringify(n):n;Jn("dispatching",n.length,"events:",e)}e=1===n.length?{...e,...n[0]}:{...e,type:"events",payload:n},Gn.emit("send to bidmax",e),n=[]}}),e);Gn.on("send event to bidmax",(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.push({...e,timeAtSend:er()}),t||!e.type?r.callNow():r()}))}(),Gn.on("send to bidmax",(e=>{try{const t={...e,event_type:"bidmax",type_version:2,timeAtSend:er(),version:je.queryParams.bidmax||"6.13.0"},n={"Content-type":"text/plain"};Gn.emit("dispatch to bidmax",{headers:n,body:t})}catch(e){console.warn(e)}}));const i=window.mol_ads_famab;Gn.on("plugins enabled",(async()=>Gn.emit("send event to bidmax",{type:"page",famab:i}))),rr()}function ar(e){let{broker:t,getConfig:n,log:r}=e,i=navigator.sendBeacon&&n("bidmax.dispatcher.useBeacon",!0);const o=n("bidmax.dispatcher.useCurrentUrl",!1)?window.location.href:n("bidmax.dispatcher.url","//crta.dailymail.co.uk"),a=(0,je.oK)()[0];a<13&&a>0&&(r("force disabling beacon for iOS < 13"),i=!1),t.on("dispatch to bidmax",(e=>{let{body:t,headers:n}=e;if(t){if(i)try{t={...t,reqType:"beacon"};const e=new Blob([JSON.stringify(t)],{...n,type:"text/plain"});if(navigator.sendBeacon(o,e))return}catch(e){console.error(e)}try{t={...t,reqType:"xhr"};const e=new XMLHttpRequest;e.open("POST",o,!0),Object.entries(n).forEach((t=>{let[n,r]=t;return e.setRequestHeader(n,r)})),e.send(JSON.stringify(t))}catch(e){console.error(e)}}else console.warn("Ignoring BidMax message with no body")}))}function sr(e){let{broker:t,getConfig:n}=e;const r=n("bidmax.migrationChance",0);if(Math.random()>=r)return;const i=navigator.sendBeacon&&n("bidmax.dispatcher.useBeacon",!0);let o=n("bidmax.dispatcher.useCurrentUrl",!1)?window.location.href:n("bidmax.dispatcher.url","//crta.dailymail.co.uk");o.endsWith("/")||(o+="/"),o+="migration",t.on("dispatch to bidmax",(e=>{let{body:t,headers:n}=e;if(t){if(i)try{t={...t,reqType:"beacon"};const e=new Blob([JSON.stringify(t)],{...n,type:"text/plain"});if(navigator.sendBeacon(o,e))return}catch(e){console.error(e)}try{t={...t,reqType:"xhr"};const e=new XMLHttpRequest;e.open("POST",o,!0),Object.entries(n).forEach((t=>{let[n,r]=t;return e.setRequestHeader(n,r)})),e.send(JSON.stringify(t))}catch(e){console.error(e)}}else console.warn("Ignoring BidMax message with no body")}))}or.isAdsFreeSupported=!0,or.ccpa={enabledIfDissent:!0},or.gdpr={enabledIfDissent:!0},ar.isAdsFreeSupported=!0,ar.ccpa={enabledIfDissent:!0},ar.gdpr={enabledIfDissent:!0},sr.isAdsFreeSupported=!0,sr.ccpa={enabledIfDissent:!0},sr.gdpr={enabledIfDissent:!0};const dr=e=>{let[t,n]=e;return n>Date.now()-2628e6},cr=(e,t)=>{let[n,r]=t;return{...e,[n]:r}};function lr(e){let{broker:t}=e;const n="mol.ads.knownBundles",r=JSON.parse(localStorage.getItem(n)||"{}"),i=Object.entries(r).filter(dr).reduce(cr,{}),o=!!i["6.13.0"];i["6.13.0"]=Date.now(),localStorage.setItem(n,JSON.stringify(i)),t.register("call for page analytics",(()=>({abcache:o})))}lr.isAdsFreeSupported=!0,lr.ccpa={enabledIfDissent:!0},lr.gdpr={enabledIfDissent:!0};const ur="mol.ads.cmp.consent",pr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(((n,r)=>{yr()(e,t,((i,o)=>{o?n(i):r(new Error(`Failed to call __cmp(${e}, ${t})`))}))}))},fr=(0,J.ri)((()=>pr("hasConsentedToAll"))),hr=(0,J.ri)((()=>pr("hasChoiceBeenMade"))),gr=()=>mr()&&(0,v.U2)("ccpa.scriptBaseUrl")&&(0,v.U2)("plugins.enabled").includes("cmp")&&(0,v.U2)("cmp.enable.userAgents",[".*"]).some((e=>navigator.userAgent.match(new RegExp(e)))),mr=()=>"US"===PageCriteria.geo,vr=()=>"CA"===__webpack_require__.g.PageCriteria.region||"VA"===__webpack_require__.g.PageCriteria.region,yr=()=>__webpack_require__.g.__uspapi,br=()=>"yes"===localStorage.getItem("mol.ads.cmp.consent"),_r=()=>null!==localStorage.getItem("mol.ads.cmp.consent"),wr=()=>(0,v.U2)("plugins.enabled").includes("cmp")&&"US"!==PageCriteria.geo;function Tr(e){var t;let{broker:n,getConfig:r,log:i,pageCriteria:o}=e;const a="ccpa"===r("cmp.model"),s=(null===(t=r("ccpa.scriptBase"))||void 0===t?void 0:t.split("/").pop())||void 0,d={cmpVersion:r("ccpa.version",s),cmpEnforced:mr()&&vr(),cmpRegion:o.region};__webpack_require__.g[r("cmp.apiHandler")]("getUSPData",null,((e,t)=>{t&&(i("encoded data:",e),(e=>{let{uspString:t}=e;d.uspString=t})(e))})),n.register("call for page analytics",(()=>(d.consent=localStorage.getItem("mol.ads.cmp.consent"),d.cmp=a?"ccpa":void 0,i("sending",d),d)))}Tr.isAdsFreeSupported=!0,Tr.ccpa={enabledIfDissent:!0};const Ir="__bidmax\n",Sr=(0,y.x)("custom-tracking");async function kr(e){let{broker:t,getConfig:n}=e;const r=n("bidmax.customTracking.max",1024);Sr("MAX:",r),window.addEventListener("message",(async e=>{let{data:n}=e;if("string"!=typeof n||!n.startsWith(Ir))return;const i=n.substring(Ir.length);Sr("message received size:",i.length),i.length>r&&Sr("message too long, max",r);try{const e=JSON.parse(i);Sr("message:",e),t.emit("send event to bidmax",{type:"custom",payload:e})}catch(e){Sr("Error parsing:",i),console.error(e)}}))}kr.isAdsFreeSupported=!0,kr.ccpa={enabledIfDissent:!0},kr.gdpr={enabledIfDissent:!0};const Cr="mol.ads.entryPoint.sessionId",Er="mol.ads.entryPoint.data",Ar=function(){return{id:(0,zn.kb)(),lastVisit:Date.now()}},Pr=(0,y.x)("entry-point"),xr=async()=>{if(__webpack_require__.g.RTA&&__webpack_require__.g.RTA.ids&&__webpack_require__.g.RTA.ids.then){const{visit:e}=await __webpack_require__.g.RTA.ids;if("string"==typeof e){const t=e.split(".");return Pr("Using RTA visit id"),t[0]}}},Or=async e=>{Pr("Using own session");let t=JSON.parse(localStorage.getItem(Cr)||"{}");return t.id?t.lastVisit<Date.now()-60*e*1e3&&(Pr("Session found in storage but it is too old:",new Date(t.lastVisit).toISOString(),"and max session is",e,"mins"),t=Ar()):(Pr("No session found in storage, creating a new one"),t=Ar()),t.lastVisit=Date.now(),localStorage.setItem(Cr,JSON.stringify(t)),t.id};async function Dr(e){let{broker:t,getConfig:n}=e;const r=n("bidmax.entryPoint.sessionDurationInMins",28),i=(async()=>{let e=JSON.parse(localStorage.getItem(Er)||"{}");const t=await(async()=>await xr()||Or(r))();if(Pr("Id",t),e.sessionId!==t){Pr("Entry Point new or too old. Creating another.");const n=__webpack_require__.g.PageCriteria;e={sessionId:t,ep:{pt:n.pageType,c:n.channel,s:n.subchannel,r:document.referrer}},localStorage.setItem(Er,JSON.stringify(e))}return Pr("Entry Point:",e.ep),{ep:e.ep}})();t.register("call for page analytics",(()=>i))}Dr.isAdsFreeSupported=!0,Dr.ccpa={enabledIfDissent:!0},Dr.gdpr={enabledIfDissent:!0};const Rr=async()=>{const e=(0,He.gb)((()=>__webpack_require__.g.pagemeta)),t=await e;return{bundle:t.bundleVersion,sync:t.syncBundleVersion,async:t.asyncBundleVersion,video:t.videoBundleVersion}},Mr=e=>{let{broker:t}=e;return new Promise((e=>{t.once("gpt initialized",(t=>{e({gpt:t.getVersion()})}))}))},Nr=e=>{let{broker:t}=e;return new Promise((e=>{t.once("prebid loaded",(t=>{e({prebid:t.version})}))}))},Ur=async()=>{const e=(0,He.gb)((()=>__webpack_require__.g.google&&__webpack_require__.g.google.ima&&__webpack_require__.g.google.ima.VERSION));return{ima:await e}},Lr=async()=>(0,He.gb)((()=>{if(!__webpack_require__.g.permutive||!__webpack_require__.g.permutive.config||!__webpack_require__.g.permutive.config.apiVersion)return!1;const{apiVersion:e,sdkType:t}=__webpack_require__.g.permutive.config;return{permutiveApi:e,permutiveSdkType:t}})),jr=e=>{const{broker:t,getConfig:n,log:r}=e,i={},o={pageMeta:Rr,gpt:Mr,prebid:Nr,ima:Ur,permutive:Lr},a=n("analytics.external.bundleVersions",[]);r("finding versions for",a),a.forEach((t=>{const n=o[t]&&o[t](e);n?n.then((e=>{r(`assigning ${t} version`,e),Object.assign(i,e)}),(()=>r("error waiting for",t))):r.error(`unable to find handler for ${t} version`)})),t.register("call for page analytics",(()=>({externals:{versions:i}})))};jr.isAdsFreeSupported=!0,jr.ccpa={enabledIfDissent:!0},jr.gdpr={enabledIfDissent:!0};const Br=jr;async function qr(e){let{broker:t}=e;const n={};await t.until("prebid loaded");const r=__webpack_require__.g.pbjs.renderAd;__webpack_require__.g.pbjs.renderAd=function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];const[,a]=i,{pos:s,bidder:d}=n[a];t.emit("headerbidder winner",s,d),r.apply(__webpack_require__.g.pbjs,i)},__webpack_require__.g.pbjs.onEvent("bidResponse",(e=>{n[e.adserverTargeting.hb_adid]={pos:e.adUnitCode,bidder:e.bidderCode}}))}function Fr(e){let{broker:t,getConfig:n}=e;const r={},i=n("bidmax.inputDelay.monitorMax",!1),o=e=>{const t=n=>{const o=(n.timeStamp>=1e12?(new Date).getTime():performance.now())-n.timeStamp|0;if(o){i||e.removeEventListener(n.type,t,a);const s="f"+n.type[0],d="m"+n.type[0];r[s]?i&&r[d]<o&&(r[d]=o):(r[s]=o,i&&(r[d]=o))}};return t},a={capture:!0,passive:!0};window.addEventListener("scroll",o(window),a),document.addEventListener("mousemove",o(document),a),document.addEventListener("click",o(document),a),t.register("call for page analytics",(()=>({latency:r})))}qr.ccpa={enabledIfDissent:!0},qr.gdpr={enabledIfDissent:!0},Fr.isAdsFreeSupported=!0,Fr.ccpa={enabledIfDissent:!0},Fr.gdpr={enabledIfDissent:!0};const Vr=["jsHeapSizeLimit","totalJSHeapSize","usedJSHeapSize"];function zr(e){let{broker:t}=e;__webpack_require__.g.performance&&__webpack_require__.g.performance.memory&&t.register("call for page analytics",(()=>Promise.resolve({memory:Vr.reduce(((e,t)=>(e[t]=__webpack_require__.g.performance.memory[t],e)),{})})))}function Wr(e){let{broker:t}=e;t.on("page load",(()=>t.emit("send event to bidmax",{type:"page-load"})))}function Hr(e){let{broker:t}=e;t.register("call for page analytics",(async()=>{if(!__webpack_require__.g.RTA||!__webpack_require__.g.RTA.ids||!__webpack_require__.g.RTA.ids.then)return{};try{const{user:e,visit:t}=await(0,He.yq)(3e3,__webpack_require__.g.RTA.ids,new Error),n={rta:{user:e}};if("string"==typeof t){const e=t.split(".");5===e.length&&(n.rta.visit=e[0])}return n}catch(e){return console.error("RTA.ids not available"),{}}}))}function Zr(e){let{broker:t}=e;t.register("call for page analytics",(()=>Promise.resolve({localStorage:{total:Object.keys(localStorage).map((e=>localStorage.getItem(e))).reduce(((e,t)=>e+t.length),0),top10:Object.keys(localStorage).map((e=>[e,localStorage.getItem(e).length])).sort(((e,t)=>t[1]-e[1])).slice(0,10)}})))}zr.isAdsFreeSupported=!0,zr.ccpa={enabledIfDissent:!0},zr.gdpr={enabledIfDissent:!0},Wr.isAdsFreeSupported=!0,Wr.ccpa={enabledIfDissent:!0},Wr.gdpr={enabledIfDissent:!0},Hr.isAdsFreeSupported=!0,Hr.ccpa={enabledIfDissent:!0},Hr.gdpr={enabledIfDissent:!0},Zr.isAdsFreeSupported=!0,Zr.ccpa={enabledIfDissent:!0},Zr.gdpr={enabledIfDissent:!0};const $r=(0,y.x)("timing"),Gr=["navigationStart","responseEnd","domInteractive","domContentLoadedEventStart","domComplete","fetchStart"],Kr={"first-paint":"paint","first-contentful-paint":"firstContentfulPaint"},Xr=()=>{if(performance.getEntriesByType){const e=performance.getEntriesByType("paint").filter((e=>Kr[e.name])).map((e=>[Kr[e.name],Math.round(e.startTime)]));return Object.fromEntries(e)}},Jr=()=>{if(!__webpack_require__.g.performance||!__webpack_require__.g.performance.timing||!__webpack_require__.g.performance.timing.navigationStart)return{};const e=[...Gr.map((e=>[e,__webpack_require__.g.performance.timing[e]])).filter((e=>0!==e[1])),["adsBundleStart",adverts.startTime]].sort(((e,t)=>e[1]-t[1])),t=e[0],n=e.map((e=>[e[0],e[1]-t[1]])).reduce(((e,t)=>{let[n,r]=t;return{...e,[n]:r}}),{});return n[t[0]]=t[1],n};function Yr(e){let{broker:t}=e;const n=t.until("page network data").then((e=>{let[t]=e;return t.network}));t.on("page load",(async()=>{$r("page load happened, sending timing data to bidmax");const e=await(0,He.yq)(1e3,n).catch((()=>({}))),r={...Jr(),...Xr(),...e};$r("sending:",r),t.emit("send event to bidmax",{type:"page-load",payload:r})}))}Yr.isAdsFreeSupported=!0,Yr.ccpa={enabledIfDissent:!0},Yr.gdpr={enabledIfDissent:!0};class Qr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"__ads_viewability";this.startTimestamp=e,this.key=t;const n=JSON.parse(__webpack_require__.g.localStorage.getItem(t)||"{}"),r=Object.keys(n.pending||{}).reduce(((e,t)=>({...e,[t]:{misses:((n.ready[t]||{}).misses||0)+1}})),{});this.state={ready:Object.keys(n.ready||{}).reduce(((e,t)=>({...e,[t]:{...n.ready[t],...e[t]}})),r),pending:{}}}save(){__webpack_require__.g.localStorage.setItem(this.key,JSON.stringify(this.state))}adRendered(e){if(this.state.pending[e]){const t=this.state.ready[e]||(this.state.ready[e]={});t.misses=(t.misses||0)+1}this.state.pending[e]=1,this.save()}adViewed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();delete this.state.pending[e];const n=this.state.ready[e]||(this.state.ready[e]={});(n.views||(n.views=[])).push(t-this.startTimestamp),this.save()}snapshot(){const e=this.state.ready;return this.state.ready={},this.save(),e}}function ei(e){let{broker:t,getConfig:n}=e;if(!__webpack_require__.g.localStorage)return;const r=n("viewability.waitBeforeForcing",3e3),i=new Qr(Date.now());let o;const a=function(){o&&(clearTimeout(o),o=void 0)},s=()=>{a(),o=setTimeout(d,r)},d=()=>{t.emit("send event to bidmax",{type:"ping"}),o=void 0},c=new Set;let l;t.on("ad rendered",(e=>i.adRendered(e))),t.on("ad viewable",(e=>{i.adViewed(e,Date.now()),"billboard"!==e&&!e.startsWith("sky_")||c.has(e)||(c.add(e),s())})),t.once("ad viewable",(e=>{l=!0,s()})),t.intercept("send to bidmax",((e,t)=>{let[n,r]=e;a();const o=i.snapshot();if((0,Fe.xb)(o))return t();t(n,{...r,viewability:o,first:l}),l=void 0}))}ei.ccpa={enabledIfDissent:!0},ei.gdpr={enabledIfDissent:!0};var ti=__webpack_require__(9288),ni=__webpack_require__.n(ti);const ri=(0,y.x)("connection-type"),ii=async e=>{let{broker:t}=e;const n=ni()(navigator,"connection.type");ri("fetching edgedata from akamai");const r=await((e,t,n)=>{const r=new Headers;Object.keys(t).forEach((e=>{r.append(e,t[e])}));const i={method:"get",headers:r};return window.fetch("https://www.dailymail.co.uk/geo/edgedata.html",i)})(0,{pragma:"no-cache","cache-control":"no-cache"}).then((e=>e.text())).then((e=>e)),i={};r.match(/>(.*?)</g).forEach((e=>{const[t,n]=e.replace(/>|<|\s+/g,"").split(":");i[t]=n}));const o={connection:n,akamaiConnectionType:i.network_type,akamaiThroughput:i.throughput,akamaiNetwork:i.network};ri(o),t.emit("page network data",{network:o})};ii.isAdsFreeSupported=!0,ii.ccpa={enabledIfDissent:!0},ii.gdpr={enabledIfDissent:!0};const oi=ii;(0,Yt.fo)("bidders.33across",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[58]},run(e){let{broker:t,getConfig:n}=e;const r=n("plugins.bidders.33across.display",{adUnits:{}}),i=n("slotDescriptions.initial",{}),o=(0,Qe.DZ)((e=>{let[t,n]=e;return!!(n.sizes||i[t]&&i[t].size)}),(e=>{let[t,n]=e;return{code:t,siteId:n.siteId,sizes:n.sizes||i[t]&&i[t].size}}),Object.entries(r.adUnits)).map((e=>{let{code:t,siteId:n,sizes:r}=e;return{code:t,bids:[{bidder:"33across",params:{siteId:n,productId:"siab"}}],mediaTypes:{banner:{sizes:r}}}}));t.register("provide prebid adUnits",(()=>o))}}),(0,Yt.fo)("bidders.adform.v2.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.adform.adxDomain","adx.adform.net"),o=Object.entries(n("plugins.bidders.adform.v2.display.adUnits",{})).map((e=>{let[t,{mid:r,sizes:o}]=e;return{code:t,bids:[{bidder:"adf",params:{adxDomain:i,mid:r}}],mediaTypes:{banner:{sizes:o||n(`slotDescriptions.initial.${t}.size`,[])}}}}));r.extend("adUnitTemplates")(o),t.register("provide prebid adUnits",(()=>o))},vendorIds:{gdpr:[50]}});function ai(e){const{getConfig:t,log:n}=e;if(!t("plugins.enabled",[]).includes("trackers.pubcommon")||!t("amazon.pubcommon.enabled",!1))return n("PubCommonId is disabled"),{addPubcommonId:e=>e};(function(e){let{broker:t,getConfig:n}=e;window.pubcid_options={type:"cookie",create:!1};const r=n("amazon.pubcommon.pubcidScript","//www.dailymail.co.uk/static/mol-adverts/demo/mol-21682/dist/pubcid.min.js");return t.invoke("import script",r)})(e).catch(n.error);const r=(0,He.gb)((()=>(0,je.ej)("_pubcid")),300,t("amazon.pubcommon.loadTimeout",3e3)).then((e=>({"pubcid.org":e}))).catch((()=>({})));return{async addPubcommonId(e){const t=await r;return e.map((e=>({...e,slotParams:{...e.slotParams||{},...t}})))}}}const si={},di={},ci={sticky_banner_gallery_top:"sticky_banner_gallery_top",sticky_banner_gallery_bottom:"sticky_banner_gallery_bottom",jw_video_desktop:"jwplayer",jw_video_tablet:"jwplayer",jw_video_mobile:"jwplayer",ctp_video_desktop:"video",ctp_video_tablet:"video",ctp_video_mobile:"video",ap_video_desktop:"video",ap_video_tablet:"video",ap_video_mobile:"video"},li=e=>"sizes"in e,ui=e=>{const{width:t,height:n}=(0,je.ap)();if(li(e)){const r=e.sizeMapping?(0,X.T3)(e.sizeMapping,e.sizes,[t,n]):e.sizes,{slotID:i,slotName:o}=e;return o?{slotID:i,slotName:o,sizes:r,slotParams:{}}:{slotID:i,sizes:r,slotParams:{}}}{const{mediaType:t,slotID:n,platform:r,offset:i,slotParams:o}=e;return{slotID:n,mediaType:t,platform:r,offset:i,slotParams:o}}};async function pi(e,t){const{log:n,getConfig:r,broker:i,pApstagInitialised:o,addPubcommonId:a}=e,s=r("amazon.priceLookup","/abe/a9/price"),d=r("tia.timeout",.9*r("auction.maxTime",2e3)),c=r("tia.bidKeys",["amznbid","amznbid_sp"]);n("requesting bids for:",t.map((e=>{let{slotID:t}=e;return t})).join(", "));const l={};let u=t.map((e=>ui(e))).filter((e=>e));function p(e){for(const t of c)if(e[t])return In({url:`${s}/${e[t]}`});return 0}u.forEach((e=>{let{slotID:t}=e;(si[t]||(si[t]=[])).push(new Promise((async e=>{l[t]=e})))})),u=await a(u),o.then((()=>{__webpack_require__.g.apstag.fetchBids({slots:u,timeout:d},(async e=>{var t;n("bids response for:",e.map((e=>e.slotID)),e);const{noBids:r,realBids:o}=e.reduce(((e,t)=>{let{noBids:n,realBids:r}=e;return function(e,t){var n;if(null!=t&&null!==(n=t.targeting)&&void 0!==n&&n.amzndeals)return!0;for(const n of e){const e=t[n]&&!("1"===t[n]||"2"===t[n]),r=t.targeting&&t.targeting[n]&&!("1"===t.targeting[n]||"2"===t.targeting[n]);if(e||r)return!0}return!1}(c,t)?r.push(t):n.push(t),{realBids:r,noBids:n}}),{noBids:[],realBids:[]}),a=null!=o&&null!==(t=o[0])&&void 0!==t&&t.targeting?o.map((e=>{const{targeting:t,...n}=e;return{...n,...t}})):o;(null==a?void 0:a[0])&&n("bids targeting unwrapped:",a);const s=(await Promise.all(a.map(p))).map(Number.parseFloat);await function(e,t){const{broker:n,log:r}=e;t.map((async e=>{try{const{cpm:t,bid:i}=e;if(t>=0){const o=li(e)?{...(0,Fe.ei)(e,["slotID","slotParams"]),sizes:e.sizes,requestSizes:e.sizes.map((e=>{let[t,n]=e;return`${t}x${n}`}))}:{...(0,Fe.ei)(e,["slotID","slotParams","mediaType","offset","platform"]),sizes:[],requestSizes:[]},a=ci[i.slotID]||i.slotID,s=!!i.amzndeals,d={bidder:"tia",cpm:Math.floor(100*t),amazonDeal:s,...o},c="slotName"in e&&i.slotID||a;r("broadcast bid received",a,d,c),n.emit("bid",c,d)}else r.warn(`Invalid lookup value ${t} for code ${i.amznbid}`)}catch(t){r.error("error broadcasting slot:",e,t)}}))}({broker:i,log:n},a.map(((e,t)=>({...u.find((t=>{let{slotID:n}=t;return n===e.slotID})),cpm:s[t],bid:e})))),a.forEach(((e,t)=>{const r={cpm:s[t],bid:e};return n(`bid for ${e.slotID}:`,r),(0,l[e.slotID])(r)})),r.forEach((e=>(n(`no bid for ${e.slotID}`),(0,l[e.slotID])({}))))}))}))}async function fi(e,t){let{pos:n,id:r}=t;const{log:i}=e;let o=si[r]&&si[r].shift();if(!o){if(i(`No available bid for '${r}', requesting new one`),pi(e,[di[r]||di[n]]),!si[r])return i("no bid promise for id",r),Promise.resolve({});o=si[r].shift()}return i(`Taking bid for '${r}':`,o),o||Promise.resolve({})}function hi(e){let{pos:t,dfpPos:n,isTemplate:r,id:i,size:o}=e;const a=di[t]={...di[t],slotID:i,sizes:o};li(a)&&r&&(a.slotName=n)}async function gi(e,t){const{broker:n,log:r}=e;try{var i,o;const e=(0,Fe.Ev)(await(0,He.yq)(1e3,n.invoke("get IrisTV tags",t),`Failed to get IrisTV tags for videoId ${t} in 1000ms`),{irisid:"iris_id",iriscat:"categories"});return e.iriscat=null===(i=(o=e.iriscat).join)||void 0===i?void 0:i.call(o,","),e}catch(e){return r.error(e),{}}}function mi(e){var t,n;if(!e||!e.bid)return{};const r=null==e||null===(t=e.bid)||void 0===t||null===(n=t.helpers)||void 0===n?void 0:n.qsParams();return r?r.replace(/^&/,"").split("&").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=r,e}),{}):{}}(0,Yt.fo)("bidders.amazon",{disableIfNoAdsServable:!0,run:function(e){!async function(e){const{broker:t,getConfig:n,log:r}=e,i=n("slots.enabled",{}),o=n("plugins.enabled").includes("irisTv"),a=n("slotDescriptions.initial",{}),s=Object.entries(i).filter((e=>{let[t,n]=e;return"immediate"===n.type})).map((e=>{let[t,n]=e;return t})),d=(0,Fe.ei)(a,s.filter((e=>a[e]&&a[e].earlyBidding))),c=function(e){let{broker:t,getConfig:n,log:r,win:i}=e;const o=n("amazon.deal",!0);let a;return mr()&&(r("In CCPA"),a=pr("getUSPData")),t.invoke("load script","//c.amazon-adsystem.com/aax2/apstag.js","apstag").then((async e=>{if(!e)return void r.warn("Could not load apstag");const t={pubID:"3065",adServer:"googletag",videoAdServer:"DFP",deals:o,params:{}};i.PageCriteria&&(t.params.si_section=i.adAreaId||i.PageCriteria.channel,t.params.subchannel=i.PageCriteria.subchannel);try{a&&(t.params.us_privacy=(await(0,He.yq)(n("amazon.millisWaitForUspData",1500),a)).uspString,r(t))}catch(e){r.warn("Error while calling getUSPData, us_privacy will be omitted",e)}e.init(t)}))}(e),l={...e,pApstagInitialised:c};[{pos:"jwplayer",configItem:"amazonPreroll.jwplayer"},{pos:"video.ap",configItem:"amazonPreroll.auto-play"},{pos:"video.ctp",configItem:"amazonPreroll"}].forEach((e=>{let{pos:t,configItem:r}=e;const{slotId:i}=n(r);i&&(di[t]={slotID:i,mediaType:"video",platform:"dmplayer",offset:0,slotParams:{}})})),Object.values(d).forEach((e=>{r("creating slot for",e.id,e.pos),hi(e)})),t.register("get tags",(async e=>{let{slot:t}=e;const n=t.dfpPos||t.pos,i=t.id;di[n]?r("no slot created",t):(r("creating slot for",t.id,t.pos,t),hi(t)),ci[i]=n;try{const e=await fi(l,{id:i,pos:n}),t=mi(e);return r(`display params for ${n}`,t),(0,Fe.xb)(t)?{}:{type:"bid",pos:n,cpm:e.cpm&&Math.round(100*e.cpm)/100,bidderCode:"tia",tags:t}}catch(e){r.error(e)}})),t.on("prepare to refresh ads",(e=>{r("prepare to refresh ads",e);const t=e.map((e=>di[e]));r("preparing to refresh:",t),pi(l,t)})),t.register("get video tags",(async t=>{let{slot:{pos:n},autoplay:i,platform:a="dmplayer",offset:s=0,videoId:d,auctionId:c}=t;const u="jwplayer"===n?n:i?"video.ap":"video.ctp",p={...di[u],platform:a,offset:s,slotParams:d&&o?await gi(e,d):{}};r(`get video tags, auctionId: ${c}, offset: ${s}, slotId: ${p.slotID}`),pi(l,[p]);const f=await fi(l,{pos:u,id:p.slotID});r(`bid response auctionId: ${c}, offset: ${s}, slotId: ${p.slotID}`,f);const h=mi(f);return r(`video params, auctionId: ${c}, offset: ${s}, slotId: ${p.slotID}`,h),(0,Fe.xb)(h)?{}:{type:"bid",pos:u,offset:s,auctionId:c,cpm:f.cpm&&Math.round(100*f.cpm)/100,bidderCode:"tia",tags:{cust_params:h}}})),function(e,t){const{log:n}=e,r=t.map((e=>[e,di[e]])).filter((e=>{let[t,n]=e;return n})).filter((e=>{let[t,n]=e;return!si[n.slotID]}));r.length?(n("early bidding for",r.map((e=>{let[t,n]=e;return`pos: ${t}, id: ${n.slotID}`}))),r.forEach((e=>{let[t,n]=e;ci[n.slotID]=t})),pi(e,r.map((e=>{let[t,n]=e;return n})))):n("no early bidding")}(l,Object.keys(d))}({...e,...ai({...e,log:e.log.extend("pubcommon")})})},vendorIds:{gdpr:[793]},purposeIds:{gdpr:[1]}});const vi=(je.queryParams.debugBidder||"").split(",").map((e=>e.trim()))||[];function yi(e){return e.match(/(\d+x\d+,?\s*)+$/g)[0].trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}const bi=(e,t)=>{const{width:n}=(0,je.ap)(),{adUnits:r={},wideSkiesAdUnits:i}=e(t,{adUnits:{}});let o=r;return n>=1580&&i&&(o={...r,...i}),o};function _i(e,t,n){const r=[],i=(t,i)=>r.push({code:t,bids:[{bidder:e,params:n(i,t)}],mediaTypes:{banner:{sizes:yi(i)}}});return Object.keys(t).forEach((e=>{const n=t[e];Array.isArray(n)?n.forEach((t=>i(e,t))):i(e,n)})),r}function wi(e,t,n){const r=[],i=(t,i)=>r.push({code:t,bids:[{bidder:e,params:n(i.split(" ").filter((e=>e)),t)}],mediaTypes:{banner:{sizes:yi(i)}}});return Object.keys(t).forEach((e=>{const n=t[e];Array.isArray(n)?n.forEach((t=>i(e,t.trim()))):i(e,n)})),r}function Ti(e){if(function(e){const t=t=>{throw new Error(`providePrebidDisplayConfig error for '${e.bidder}': ${t}`)};("object"!=typeof e||Array.isArray(e))&&t("`config` must be an object."),["broker","getConfig","configKeys","bidder"].forEach((n=>{e[n]||t(`'config' must contain mandatory key '${n}'.`)}));const n={adapterName:n=>{"string"!=typeof n&&t("`adapterName` must be a string."),e.aliasedName||t("with `adapterName`, `aliasedName` is mandatory.")},aliasedName:n=>{"string"!=typeof n&&t("`aliasedName` must be a string."),e.adapterName||t("with `aliasedName`, `adapterName` is mandatory.")},broker:e=>{e instanceof b.Jj||t("`broker` must be an instance of the class `Broker`.")},getConfig:e=>{"function"!=typeof e&&t("`getConfig` error: must be a function.")},configKeys:e=>{("string"!=typeof e&&!Array.isArray(e)||Array.isArray(e)&&e.find((e=>"string"!=typeof e)))&&t("`configKeys` must be a string or an array of strings.")},configKey:e=>{"string"!=typeof e&&t("`configKey` must be a string.")},bidder:e=>{"string"!=typeof e&&t("`bidder` must be a string.")},chance:e=>{isNaN(e)&&t("`chance` must be a number.")},getBidsParams:e=>{"function"!=typeof e&&t("`getBidParams` must be a function.")},bidderSettings:e=>{const n="`bidderSettings` must be an Object or an array of Objects { key : <String>, val: <Function> }.";"object"==typeof e||Array.isArray(e)||t(n);const r=e=>{const r=["key","val"];Object.entries(e).forEach((e=>{let[i,o]=e;r.find((e=>e===i))||t(n),"key"===i&&"string"!=typeof o&&t(n),"val"===i&&"function"!=typeof o&&t(n)}))};"object"!=typeof e||Array.isArray(e)||r(e),Array.isArray(e)&&e.forEach((e=>r(e)))}};Object.entries(e).forEach((e=>{let[t,r]=e;n[t]&&n[t](r)}))}(e),e.chance&&e.chance<=Math.random())return;const{broker:t,getConfig:n,configKeys:r,bidder:i,paramsPerSize:o,getBidsParams:a}=e,s=o?Ii:wi;let d=null;const c={};if(Array.isArray(r)){if(d=[],d=r.map((e=>(c[e]=bi(n,e),d.concat(s(i,c[e],a))))),!d.length)return!1}else{if(c[r]=bi(n,r),(0,Fe.xb)(c[r]))return!1;d=s(i,c[r],a)}return function(e,t,n,r){const{bidder:i}=t;vi.find((e=>"*"===e||e===i))&&(console.log(`--------------\x3e ${i} configs <--------------`),[...t.configKeys||t.configKey].forEach((t=>{console.log(`-> ${t}:`,e(t))})),console.log(`--------------\x3e ${i} adUnits <--------------`),Object.entries(n).forEach((e=>{let[t,n]=e;console.log(`-> ${t}:`,n)})),console.log(`--------------\x3e ${i} prebid config <--------------`),console.log("->",r))}(n,e,c,d),t.register("provide prebid adUnits",(()=>d)),function(e){let{adapterName:t,aliasedName:n,broker:r}=e;t&&n&&r.register("provide bidder alias",(()=>({adapterName:t,aliasedName:n})))}(e),function(e){let{broker:t,bidderSettings:n,bidder:r,adapterName:i,aliasedName:o}=e;if(n){const e=i&&o||r;t.register("prebid reduce bidderSettings",(t=>(t[e]=t[e]||{},t[e].adserverTargeting=t[e].adserverTargeting||[],Array.isArray(n)?t[e].adserverTargeting.concat(n):t[e].adserverTargeting.push(n),t)))}}(e),function(e){let{bidder:t,asyncUpdate:n,broker:r}=e;n&&r.emit("prebid config async update",{[t]:n})}(e),!0}function Ii(e,t,n){const r=[],i=(t,i)=>{const o=yi(i);r.push({code:t,bids:o.map((r=>({bidder:e,params:n(i.split(" ").filter((e=>e)),r,t)}))),mediaTypes:{banner:{sizes:o}}})};return Object.keys(t).forEach((e=>{const n=t[e];Array.isArray(n)?n.forEach((t=>i(e,t))):i(e,n)})),r}(0,Yt.fo)("bidders.appnexusOutstream",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[32]},run(e){let{broker:t,getConfig:n,queryParams:r}=e;const i=r["mol.ads.appNexus.debug"],o=r.testmode,a={area:[__webpack_require__.g.adAreaId],...o?{testmode:o.split(",")}:void 0},{adUnits:s}=n("plugins.bidders.appnexus.outstream",{adUnits:[]});(0,Fe.xb)(s)||t.register("provide prebid adUnits",(()=>function(e,t,n,r){const o=[],s=(t,n)=>{return o.push({code:t,bids:[{bidder:"appnexus",params:(r=n.split(" ").filter((e=>e)),s=t,{placementId:r[0],keywords:{...i?{pos:s}:void 0,...a}})}],mediaTypes:{video:{...e("plugins.slots.outstream.default.mediaTypes.video",{}),playerSize:yi(n)[0]}}});var r,s};return Object.keys(n).forEach((e=>{const t=n[e];Array.isArray(t)?t.forEach((t=>s(e,t.trim()))):s(e,t)})),o}(n,0,s)))}});const Si={admantx:e=>({"ias-bsp":e.map(String)}),airgrid:e=>({perid:e.slice(0,100).map(String)})};function ki(e){return e.reduce(((e,t)=>{let[n,r]=t;const i=Si[n];return i?{...e,...i(r)}:e}),{})}(0,Yt.fo)("bidders.appnexus",{disableIfNoAdsServable:!0,run:function(e){let{broker:t,getConfig:n,log:r}=e,{adUnits:i,wideSkiesAdUnits:o}=n("plugins.bidders.appnexus.display",{adUnits:[]});const a=n("plugins.appnexus.dependenciesTimeout",2e3),s=n("plugins.bidders.appnexus.dmps",["airgrid","admantx"]);(0,Fe.xb)(i)||t.register("provide prebid adUnits",(async()=>{r("providing prebid adUnits");const e=ki((s.length?await Promise.all(s.map((async e=>{const n=(await t.invokeAll({message:["dmp",e],timeout:a}))[0];return n&&[e,n]}))):[]).filter((e=>e)));r("dmpData",e);const n={area:[__webpack_require__.g.adAreaId],...e};Ei&&o&&(i={...i,...o});const d=Object.entries(i).map((e=>{let[t,r]=e;return(Array.isArray(r)?r:[r]).map((e=>Pi(n,t,e)))})).flat();return r("adUnits",d),d}))},vendorIds:{gdpr:[32]},purposeIds:{gdpr:[1]}});const{width:Ci}=(0,je.ap)(),Ei=Ci>1580,Ai=e=>e.replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e))))),Pi=(e,t,n)=>({code:t,bids:[{bidder:"appnexus",params:{keywords:e,placementId:n.split(" ")[0].trim()}}],mediaTypes:{banner:{sizes:Ai(n)}}});(0,Yt.fo)("bidders.appnexusSkin",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:async function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.appnexus.minWidth",1224),o=n("plugins.appnexus.skin",xi),a=n("plugins.appnexus.skin",2e3);if(r("config:",{minWidth:i,adUnits:o}),__webpack_require__.g.innerWidth<i)return void r("bailing, viewport width too small:",__webpack_require__.g.innerWidth);const s=o.map((e=>{let{bids:t}=e;return t.map((e=>{let{params:{placementId:t}}=e;return t}))})).flat();r("known skins:",s);const d=new Set(s),c=t.invokeAll({message:["dmp","admantx"],timeout:a});t.register("provide prebid adUnits",(async()=>{const e=(await c)[0],t=e?ki([["admantx",e]]):{};t.area=__webpack_require__.g.adAreaId;const n=o.map((e=>{const n=e.bids.map((e=>(e.params.keywords=t,e)));return{...e,bids:n}}));return n}));const l={};t.on("prebid loaded",(e=>{e.onEvent("bidRequested",(e=>{let{bidderCode:t,bids:n}=e;"appnexus"===t&&n.forEach((e=>{let{bidId:t,params:{placementId:n}}=e;l[t]=n}))}))})),t.register("prebid reduce bidderSettings",(e=>(e.appnexus||(e.appnexus={}),e.appnexus.adserverTargeting||(e.appnexus.adserverTargeting=[]),e.appnexus.adserverTargeting.push({key:"hb_skin",val:e=>{const t=l[e.requestId];return d.has(t)}}),e)))},vendorIds:{gdpr:[32]}});const xi=[{code:"billboard",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"appnexus",params:{placementId:19451012}}]}];(0,Yt.fo)("bidders.groupm.v2.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=Math.random(),o=n("plugins.bidders.groupm.v3.chance",.1);if(r(`groupm chance: ${i}, 'request? ${i<o}`),o<=i)return void r("chance condition not met, bailing");const a=Object.entries(n("plugins.bidders.groupm.v3.adUnits",{})).map((e=>{let[t,{placementId:r,sizes:i}]=e;return{code:t,bids:[{bidder:"groupm",params:{placementId:r.toString()}}],mediaTypes:{banner:{sizes:i||n(`slotDescriptions.initial.${t}.size`,[])}}}}));r.extend("adUnitTemplates")(a),t.register("provide bidder alias",(()=>({adapterName:"appnexus",aliasedName:"groupm"}))),t.register("provide prebid adUnits",(()=>a)),t.register("prebid reduce bidderSettings",(e=>(e.groupm||(e.groupm={}),e.groupm.adserverTargeting||(e.groupm.adserverTargeting=[]),e.groupm.adserverTargeting.push({key:"hb_deal_groupm"}),e)))},vendorIds:{gdpr:[98]}}),(0,Yt.fo)("bidders.collectiveImprove",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const{adUnits:r}=n("plugins.bidders.collectiveImprove.display",{adUnits:{}});if((0,Fe.xb)(r))return;const i=_i("collectiveImprove",r,(e=>({placementId:e.split(" ")[0]})));t.register("provide prebid adUnits",(()=>i)),t.register("provide bidder alias",(()=>({adapterName:"improvedigital",aliasedName:"collectiveImprove"}))),t.register("prebid reduce bidderSettings",(e=>(e.collectiveImprove=e.collectiveImprove||{},e.collectiveImprove.adserverTargeting=e.collectiveImprove.adserverTargeting||[],e.collectiveImprove.adserverTargeting.push({key:"hb_skin",val:e=>!0}),e)))},vendorIds:{gdpr:[253]}}),(0,Yt.fo)("bidders.improveDisplay",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[253]},run(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.improveDisplay",[]).map((e=>{var t;return{code:e.code,mediaTypes:{banner:{sizes:e.sizes||(null===(t=(0,Dt.get)(e.code))||void 0===t?void 0:t.size)}},bids:[{bidder:"improvedigital",params:{placementId:e.placementId}}]}}));r.extend("adUnits")(i),t.register("provide prebid adUnits",(()=>i))}}),(0,Yt.fo)("bidders.improveSkins",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[253]},run(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.improveSkins",[]).map((e=>{var t;return{code:e.code,mediaTypes:{banner:{sizes:e.sizes||(null===(t=(0,Dt.get)(e.code))||void 0===t?void 0:t.size)}},bids:[{bidder:"improvedigital",params:{placementId:e.placementId}}]}}));r.extend("adUnits")(i),t.register("provide prebid adUnits",(()=>i)),t.register("prebid reduce bidderSettings",(e=>{var t;return{...e,improvedigital:{...e.improvedigital||{},adserverTargeting:[...(null===(t=e.improvedigital)||void 0===t?void 0:t.adserverTargeting)||[],{key:"hb_skin",val:()=>!0}]}}}))}}),(0,Yt.fo)("bidders.ix.v2.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=Object.entries(n("plugins.bidders.ix.v2.display.adUnits",{})).map((e=>{let[t,{siteId:r,sizes:i}]=e;return{code:t,bids:[{bidder:"ix",params:{siteId:r}}],mediaTypes:{banner:{sizes:i||n(`slotDescriptions.initial.${t}.size`,[])}}}}));r.extend("adUnitTemplates")(i),t.register("provide prebid adUnits",(()=>i))},vendorIds:{gdpr:[10]}}),(0,Yt.fo)("bidders.justPremium",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const{adUnits:r}=n("plugins.bidders.justpremium.display",{adUnits:{}});if((0,Fe.xb)(r))return;const i=_i("justpremium",r,(e=>({zone:e.split(" ")[0]})));t.register("provide prebid adUnits",(()=>i)),t.register("prebid reduce bidderSettings",(e=>(e.justpremium=e.justpremium||{},e.justpremium.adserverTargeting=e.justpremium.adserverTargeting||[],e.justpremium.adserverTargeting.push({key:"hb_skin",val:e=>!0}),e)))},vendorIds:{gdpr:[62]}}),(0,Yt.fo)("bidders.kargo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const{adUnits:r}=n("plugins.bidders.kargo.display",{adUnits:[]}),i=e=>({code:e,bids:[{bidder:"kargo",params:{placementId:r[e].split(" ")[0].trim()}}],mediaTypes:{banner:{sizes:r[e].replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(t.invoke("load script","https://storage.cloud.kargo.com/ad/network/klick/klick-dailymail.js",null,{},(()=>!0)),!(0,Fe.xb)(r)){const e=Object.keys(r).map(i);t.register("provide prebid adUnits",(()=>e))}},vendorIds:{gdpr:[972]}}),(0,Yt.fo)("bidders.mediagrid.v2.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=Object.entries(n("plugins.bidders.mediagrid.v2.display.adUnits",{})).map((e=>{let[t,{sizes:r,uid:i}]=e;return{code:t,bids:[{bidder:"grid",params:{uid:i}}],mediaTypes:{banner:{sizes:r||n(`slotDescriptions.initial.${t}.size`,[])}}}}));r.extend("adUnitTemplates")(i),t.register("provide prebid adUnits",(()=>i))},vendorIds:{gdpr:[686]}});const Oi=e=>Array.isArray(e)&&2===e.length;class Di{constructor(e){this.adsDescriptions=e;const{width:t,height:n}=(0,je.ap)();this.browserWidth=t,this.browserHeight=n}getSizes(e){const t=this.adsDescriptions[e];if(t)return t.sizeMapping?(0,X.T3)(t.sizeMapping,t.size,[this.browserWidth,this.browserHeight]):t.size.filter(Oi)}}const Ri=MobileUtils.isMobile()?{sticky_banner:1420432285}:{billboard:1420432282,sky_right_top:1420432283,sky_left_top:1420432284};(0,Yt.fo)("bidders.ozone",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[524]},run(e){let{broker:t,getConfig:n,pageCriteria:r={},log:i}=e;const o=new Di(n("slotDescriptions.initial",{})),a=n("plugins.bidders.ozone.publisherId","OZONEDMGT002"),s=n("plugins.bidders.ozone.siteId","4204204250"),d=Object.entries(n("plugins.bidders.ozone.display.adUnits",Ri)).map((e=>{let[t,r]=e;return{code:t,mediaTypes:{banner:{sizes:n(`slotDescription.${t}.size`,o.getSizes(t))}},bids:[{bidder:"ozone",params:{placementId:r,publisherId:a,siteId:s}}]}}));t.register("provide prebid adUnits",(()=>(i.info("adUnits",d),d))),t.register("provide prebid bidder config",(()=>[["ozone"],{ortb2:{site:{page:"article"===r.pageType?"art":"hp"}}}]))}}),(0,Yt.fo)("bidders.pubmatic",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[76]},run(e){let{broker:t,getConfig:n,log:r,win:i}=e;const{width:o}=(0,je.ap)(),a=o>1580;let{adUnits:s,wideSkiesAdUnits:d,publisherId:c}=n("plugins.bidders.pubmatic.display.v2",{adUnits:{},wideSkiesAdUnits:[]});if(a&&d&&(s={...s,...d}),r.extend("ad units")(s),(0,Fe.xb)(s))return;const l=n("plugins.bidders.pubmatic.display.v2.dependenciesTimeout",2e3),u=t.invokeAll({message:["dmp","admantx"],timeout:l});t.register("provide prebid adUnits",(async()=>{const e=(await u)[0];r("ias-bsp",e);const t=[["area",i.adAreaId],["ias-bsp",e]].reduce(((e,t)=>{let[n,r]=t;const i=Array.isArray(r)&&r.length||r?`${n}=${r}`:"";return i?e.length?`${e}|${i}`:`${i}`:e}),""),n=_i("pubmatic",s,(e=>({publisherId:`${c}`,adSlot:e.split(" ")[0],dctr:t})));return r("adUnits",n),n})),t.register("prebid reduce bidderSettings",(e=>{const t=n("plugins.bidders.pubmatic.display.netMultiplier",.93);return e.pubmatic||(e.pubmatic={}),e.pubmatic.bidCpmAdjustment=(e,n)=>e*t,e}))}}),(0,Yt.fo)("bidders.rhythmOne",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;r.warn("DEPRECATED: use unruly plugin");const i=n("plugins.bidders.rhythmOne.adUnits",{}),o=new Di(n("slotDescriptions.initial",{})),a=Object.entries(i).map((e=>{let[t,{placementId:n,sizes:i}]=e;const a=i||o.getSizes(t);if(a)return{code:t,sizes:a,mediaTypes:{banner:{sizes:a}},bids:[{bidder:"rhythmone",params:{placementId:n}}]};r(`no adDescription for pos: ${t}`)})).filter((e=>e));t.register("provide prebid adUnits",(()=>a))},vendorIds:{gdpr:[36]}}),(0,Yt.fo)("bidders.rubiMM2",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{getConfig:t,broker:n,log:r}=e;const{width:i}=(0,je.ap)(),o=i>1580;let{accountId:a,siteId:s,adUnits:d,wideSkiesAdUnits:c}=t("plugins.bidders.rubiMM2.display",{adUnits:{},wideSkiesAdUnits:[]});if(r("adUnits",d),(0,Fe.xb)(d))return;o&&c&&(d={...d,...c});const l=_i("rubi_mm2",d,(e=>{const t={area:[__webpack_require__.g.adAreaId]};return{zoneId:e.split(" ")[0],inventory:t,siteId:s.toString(),accountId:a.toString()}}));r("transformed",l),n.register("provide prebid adUnits",(()=>l)),n.register("provide bidder alias",(()=>({adapterName:"rubicon",aliasedName:"rubi_mm2"}))),n.emit("prebid config async update",{rubi_mm2:{singleRequest:!0}})},vendorIds:{gdpr:[52]}}),(0,Yt.fo)("bidders.sharethrough.v2.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=Object.entries(n("plugins.bidders.sharethrough.v2.display.adUnits",{}));r("adUnitConfig",i);const o=i.filter((e=>{let[t]=e;return n(`slotDescriptions.initial.${t}`)})).map((e=>{let[t,{pkey:r,sizes:i}]=e;return{code:t,bids:[{bidder:"sharethrough",params:{pkey:r}}],mediaTypes:{banner:{sizes:i||n(`slotDescriptions.initial.${t}.size`,[])}}}}));r.extend("adUnitTemplates")(o),t.register("provide prebid adUnits",(()=>o));const a=o.reduce(((e,t)=>{let{code:n,mediaTypes:{banner:{sizes:r}}}=t;return{...e,[n]:Mi(r).join("x")}}),{});r("largestSizeForPos",a),t.register("prebid reduce bidderSettings",(e=>(e.sharethrough||(e.sharethrough={}),e.sharethrough.adserverTargeting||(e.sharethrough.adserverTargeting=[]),e.sharethrough.adserverTargeting.push({key:"hb_size",val:e=>(null==a?void 0:a[e.adUnitCode])||e.size}),e)))},vendorIds:{gdpr:[80]}});const Mi=e=>e.sort(((e,t)=>{let[n,r]=e,[i,o]=t;return i*o-n*r}))[0];(0,Yt.fo)("bidders.smartAdServer",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.smartAdServer.adUnits",{}),o=new Di(n("slotDescriptions.initial",{})),a=n("plugins.bidders.smartAdServer.siteId",395440),s=n("plugins.bidders.smartAdServer.pageId",1352205),d=Object.entries(i).map((e=>{let[t,{formatId:n,sizes:i}]=e;const d=i||o.getSizes(t);if(d)return{code:t,sizes:d,mediaTypes:{banner:{sizes:d}},bids:[{bidder:"smartadserver",params:{formatId:n,pageId:s,siteId:a}}]};r(`no adDescription for pos: ${t}`)})).filter((e=>e));t.register("provide prebid adUnits",(()=>d))},vendorIds:{gdpr:[45]}}),(0,Yt.fo)("teads-cookieless",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[132]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.teads.tagId","PUB_7442");r("tagId:",i),__webpack_require__.g.teads_analytics=__webpack_require__.g.teads_analytics||{},__webpack_require__.g.teads_analytics.analytics_tag_id=i,__webpack_require__.g.teads_analytics.share=__webpack_require__.g.teads_analytics.share||function(){const e=__webpack_require__.g.teads_analytics.shared_data=__webpack_require__.g.teads_analytics.shared_data||[];r("share current:",e),r("share adding:",arguments),e.push(arguments)},t.emit("import script","//a.teads.tv/analytics/tag.js",{async:!0})}});const{width:Ni}=(0,je.ap)(),Ui=Ni>1580;(0,Yt.fo)("bidders.rubicon",{vendorIds:{gdpr:[52]},purposeIds:{gdpr:[1]},disableIfNoAdsServable:!0,run:async function(e){let{broker:t,getConfig:n,log:r,win:i}=e;const{accountId:o,siteId:a,adUnits:s,wideSkiesAdUnits:d,atf:c}=n("plugins.bidders.rubicon.display.v2",{adUnits:{},wideSkiesAdUnits:{},atf:[]}),l=new Set(c);if((0,Fe.xb)(s))return;const u=Ui&&d?{...s,...d}:s,p=n("plugins.bidders.rubicon.display.v2.dependenciesTimeout",2e3),f=t.invokeAll({message:["dmp","admantx"],timeout:p});t.register("provide prebid adUnits",(async()=>{const e=(await f)[0];r("ias-bsp",e);const t=(i.adAreaId?[["area",JSON.stringify([i.adAreaId])],["ias-bsp",e]]:[["ias-bsp",e]]).reduce(((e,t)=>{let[n,r]=t;return r?{...e,[n]:r}:e}),{}),n=_i("rubicon",u,((e,n)=>{const r={zoneId:e.split(" ")[0],inventory:t,siteId:a.toString(),accountId:o.toString()};return l.has(n)&&(r.position="atf"),r}));return r("adUnits",n),n})),t.emit("prebid config async update",{rubicon:{singleRequest:!0}})}});const{width:Li}=(0,je.ap)(),ji=Li>1580;function Bi(e){let{broker:t,getConfig:n}=e,{adUnits:r,wideSkiesAdUnits:i}=n("plugins.bidders.adyoulike.display",{adUnits:[]});const o=e=>({code:e,bids:[{bidder:"adyoulike",params:{placement:r[e].split(" ")[0].trim()}}],mediaTypes:{banner:{sizes:r[e].replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(ji&&i&&(r={...r,...i}),!(0,Fe.xb)(r)){const e=Object.keys(r).map(o);t.register("provide prebid adUnits",(()=>e))}}function qi(e){let{broker:t,getConfig:n}=e;const r=n("plugins.bidders.verizon.display",{}),i=r.adUnits&&Object.entries(r.adUnits).map((e=>{let[t,n]=e;return((e,t)=>({code:e,bids:[{bidder:"brightroll",params:{publisher:"dailymail"}}],mediaTypes:{banner:{sizes:t}}}))(t,n)}));i&&i.length>0&&t.register("provide prebid adUnits",(()=>i))}Bi.vendorIds={gdpr:[259]},Bi.purposeIds={gdpr:[1]},Bi.disableIfNoAdsServable=!0,qi.vendorIds={gdpr:[25]},qi.purposeIds={gdpr:[1]},qi.disableIfNoAdsServable=!0;const Fi=(e,t)=>({code:e,bids:[{bidder:"collective564",params:{placementId:t.split(" ")[0].trim(),usePaymentRule:!0}}],mediaTypes:{banner:{sizes:t.replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});function Vi(e){let{broker:t,getConfig:n}=e;const r=n("plugins.bidders.collective564.display",{adUnits:{}}).adUnits,i=[];(0,Fe.xb)(r)||(Object.keys(r).map((e=>{i.push(Fi(e,r[e]))})),t.register("provide prebid adUnits",(()=>i)),t.register("provide bidder alias",(()=>({adapterName:"appnexus",aliasedName:"collective564"}))),t.register("prebid reduce bidderSettings",(e=>(e.collective564=e.collective564||{},e.collective564.adserverTargeting=e.collective564.adserverTargeting||[],e.collective564.adserverTargeting.push({key:"hb_skin",val:e=>!0}),e))))}function zi(e){let{broker:t,getConfig:n}=e;if(n("plugins.bidders.groupm.skin.chance",.1)<=Math.random())return;const r=n("plugins.bidders.groupm.skin.adUnits",[]);r.length&&t.register("provide prebid adUnits",(()=>r))}function Wi(e){let{broker:t,getConfig:n}=e;(new __webpack_require__.g.Image).src="https://e.serverbid.com/udb/9969/match?redir=https%3A%2F%2Fmfad.inskinad.com%2Fudb%2F9874%2Fpool%2Fset%2Fi.gif%3FpoolId%3D9969%26poolKey%3D";const r=document.createElement("iframe");r.style.display="none";const i=document.cookie.match("(^|;)\\s*MFADUser\\s*=\\s*([^;]+)"),o=i?i.pop():"",a="https://mfad.inskinad.com/udb/9874/sync/i.gif?partnerId=1"+(o&&"&userKey="+o||"")+"&userId=";var s;let d,c;r.src="https://ssum-sec.casalemedia.com/usermatch?s=184665&cb="+encodeURIComponent(a),s=function(){document.body.appendChild(r)},(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?s():document.addEventListener("DOMContentLoaded",s);try{d=__webpack_require__.g.top.screen.width,c=__webpack_require__.g.top.screen.height}catch(e){}if(!d||!c)return;const{adUnits:l}=n("plugins.bidders.inskin.display",{adUnits:null});if(!l)return;const u=e=>({code:e,bids:[{bidder:"inskin",params:{networkId:l[e].split(" ")[0].trim(),siteId:l[e].replace(/^[^\s]+\s+([^\s]+) .+$/,"$1").trim(),keywords:"",properties:{screenWidth:d,screenHeight:c,target:1244}}}],mediaTypes:{banner:{sizes:l[e].replace(/^[^\s]+\s*[^\s]+\s*(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(!(0,Fe.xb)(l)){const e=Object.keys(l).map(u);t.register("provide prebid adUnits",(()=>e))}}function Hi(e){let{broker:t,getConfig:n}=e;const{adUnits:r,delDomain:i}=n("plugins.bidders.openx.display.v2",{adUnits:[]}),o=e=>({code:e,bids:[{bidder:"openx",params:{unit:r[e].split(" ")[0].trim(),delDomain:i}}],mediaTypes:{banner:{sizes:r[e].replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(i&&!(0,Fe.xb)(r)){const e=Object.keys(r).map(o);t.register("provide prebid adUnits",(()=>e))}}function Zi(e){let{broker:t,getConfig:n}=e;const{adUnits:r}=n("plugins.bidders.pxyz.display",{adUnits:{}}),i=(e,t)=>({code:e,bids:[{bidder:"pxyz",params:{placementId:t.split(" ")[0].trim()}}],mediaTypes:{banner:{sizes:t.replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(!(0,Fe.xb)(r)){const e=[];Object.entries(r).map((t=>{let[n,r]=t;"string"==typeof r?e.push(i(n,r)):r.forEach((t=>{e.push(i(n,t))}))})),t.register("provide prebid adUnits",(()=>e))}}Vi.vendorIds={gdpr:[179]},Vi.purposeIds={gdpr:[1]},Vi.disableIfNoAdsServable=!0,zi.vendorIds={gdpr:[98]},zi.purposeIds={gdpr:[1]},zi.disableIfNoAdsServable=!0,Wi.vendorIds={gdpr:[150]},Wi.purposeIds={gdpr:[1]},Wi.disableIfNoAdsServable=!0,Hi.vendorIds={gdpr:[69]},Hi.purposeIds={gdpr:[1]},Hi.disableIfNoAdsServable=!0,Zi.vendorIds={gdpr:[490]},Zi.purposeIds={gdpr:[1]},Zi.disableIfNoAdsServable=!0;const $i=e=>{for(const t of e)for(const e of t.bids)"rubicon"===e.bidder&&((0,Fe.ns)(["params","inventory"],e).area=[__webpack_require__.g.adAreaId])},Gi=e=>e.adUnits.reduce(((e,t)=>(t.bids&&t.bids.forEach((t=>{t.params&&t.params.zoneId&&e.push(t.params.zoneId)})),e)),[]);function Ki(e){let{broker:t,getConfig:n}=e,r=new Set;const i=n("plugins.rubicon.skin",{});i.adUnits&&i.adUnits.length&&($i(i.adUnits),r=new Set(Gi(i)),t.register("provide prebid adUnits",(()=>i.adUnits)));const o={};t.on("prebid loaded",(e=>{e.onEvent("bidRequested",(e=>{let{bidderCode:t,bids:n}=e;"rubicon"===t&&n.forEach((e=>{let{bidId:t,params:{zoneId:n}}=e;o[t]=n}))}))})),t.register("prebid reduce bidderSettings",(e=>(e.rubicon||(e.rubicon={}),e.rubicon.adserverTargeting||(e.rubicon.adserverTargeting=[]),e.rubicon.adserverTargeting.push({key:"hb_skin",val:e=>{const t=o[e.requestId];return r.has(t)}}),e)))}function Xi(e){let{getConfig:t,broker:n}=e;const{width:r}=(0,je.ap)(),i=r>1580;let{accountId:o,siteId:a,adUnits:s,wideSkiesAdUnits:d}=t("plugins.bidders.rubiMM.display",{adUnits:{},wideSkiesAdUnits:[]});if((0,Fe.xb)(s))return;i&&d&&(s={...s,...d});const c=_i("rubi_mm",s,(e=>{const t={area:[__webpack_require__.g.adAreaId]};return{zoneId:e.split(" ")[0],inventory:t,siteId:a.toString(),accountId:o.toString()}}));n.register("provide prebid adUnits",(()=>c)),n.register("provide bidder alias",(()=>({adapterName:"rubicon",aliasedName:"rubi_mm"}))),n.emit("prebid config async update",{rubi_mm:{singleRequest:!0}})}function Ji(e){let{getConfig:t,broker:n}=e;const{accountId:r,siteId:i}=t("plugins.bidders.rubicon.display.v2",{});Ti({broker:n,getConfig:t,bidder:"rubi_ttd",adapterName:"rubicon",aliasedName:"rubi_ttd",getBidsParams:e=>{let[t]=e;return{zoneId:t,inventory:{area:[__webpack_require__.g.adAreaId]},siteId:`${i}`,accountId:`${r}`}},asyncUpdate:{singleRequest:!0}})}function Yi(e){let{broker:t,getConfig:n}=e;const{adUnits:r}=n("plugins.bidders.teads.display",{adUnits:{}});t.register("provide prebid adUnits",(()=>_i("teads",r,(e=>{const t=e.split(/[ ]+/);return{placementId:t[0],pageId:t[1]}}))))}function Qi(e){let{broker:t,getConfig:n}=e;Ti({broker:t,getConfig:n,configKeys:"plugins.bidders.triplelift.display",bidder:"triplelift",getBidsParams:e=>{let[t]=e;return{inventoryCode:t}}})}Ki.vendorIds={gdpr:[52]},Ki.purposeIds={gdpr:[1]},Ki.disableIfNoAdsServable=!0,Xi.vendorIds={gdpr:[79]},Xi.purposeIds={gdpr:[1]},Xi.disableIfNoAdsServable=!0,Ji.vendorIds={gdpr:[21]},Ji.purposeIds={gdpr:[1]},Ji.disableIfNoAdsServable=!0,Yi.vendorIds={gdpr:[132]},Yi.purposeIds={gdpr:[1]},Yi.disableIfNoAdsServable=!0,Qi.vendorIds={gdpr:[28]},Qi.purposeIds={gdpr:[1]},Qi.disableIfNoAdsServable=!0,(0,Yt.fo)("bidders.adform.video",{disableIfNoAdsServable:!0,run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.adform.adxDomain","adx.adform.net");t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.adform.video.${e}`);if(r.info("code",e),r.info("mid",t),!t)return r.warn(`no mid found for pos ${e}`),{};const o={bids:[{bidder:"adf",params:{adxDomain:i,mid:t}}]};return r.info("providing ad unit",o),o}))},purposeIds:{gdpr:[1]},vendorIds:{gdpr:[50]}}),(0,Yt.fo)("bidders.appnexusVideo",{disableIfNoAdsServable:!0,run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.appnexus.dependenciesTimeout",2e3),o=n("plugins.bidders.appnexus.dmps",["airgrid","admantx"]),a=n("plugins.bidders.appnexus.video",{adUnits:{}});t.register("provide video adUnits",(async(e,n)=>{const s=ki((o.length?await Promise.all(o.map((async e=>{const n=(await t.invokeAll({message:["dmp",e],timeout:i}))[0];return n&&[e,n]}))):[]).filter((e=>e)));r("dmpData",s);const d={area:[__webpack_require__.g.adAreaId],...s},c=eo(a,d,e,n);return r("adUnits",c),c}))},vendorIds:{gdpr:[32]},purposeIds:{gdpr:[1]}});const eo=(e,t,n,r)=>{let i="";if(e.adUnits[n]&&"object"==typeof e.adUnits[n]&&e.adUnits[n][r?"autoplay":"ctp"])i=e.adUnits[n][r?"autoplay":"ctp"];else{if(!e.adUnits[n]||"string"!=typeof e.adUnits[n])return{};i=e.adUnits[n]}const o=i.trim().replace(/ +/," ").split(" ");return{bids:[{bidder:"appnexus",params:{accountId:parseInt(o[0]),placementId:parseInt(o[1]),keywords:t,video:{skipable:!1,playback_methods:r?["auto_play_sound_off"]:["click_to_play"]}}}]}};(0,Yt.fo)("bidders.criteo.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const r=n("plugins.bidders.criteo.video.adUnits",{}),i={skip:1},o=n("plugins.bidders.criteo.video.mediaTypes",{});t.register("provide video adUnits",(async e=>{const t=r[e],a=n(to[e]),s=o[e]||{};if(t)return{code:a.code,mediaTypes:{video:{...a.mediaTypes.video,...i,...s}},bids:[{bidder:"criteo",params:{zoneId:t}}]}}))},vendorIds:{gdpr:[91]}});const to={jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2"};(0,Yt.fo)("bidders.improveVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[253]},run(e){let{broker:t,getConfig:n,log:r}=e;t.register("provide video adUnits",((e,t)=>{var i,o,a;const s="video"===e?t?"autoplay":"ctp":e,d=n(`plugins.bidders.improveVideo.${s}`),[c,l]=(null===(i=n(`plugins.slots.${e}.v2`))||void 0===i||null===(o=i.mediaTypes)||void 0===o||null===(a=o.video)||void 0===a?void 0:a.playerSize)||[];return r({configCode:s,placementId:d,w:c,h:l}),d?{bids:[{bidder:"improvedigital",params:{placementId:d,size:{w:c,h:l}}}]}:{}}))}});const no={jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2"};(0,Yt.fo)("bidders.ixVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[10]},run(e){let{broker:t,getConfig:n,queryParams:r}=e;const i=n("plugins.bidders.ix.video.adUnits",[]),o=n("plugins.bidders.ix.video.default",{}),{mimes:a=["video/mp4","application/javascript"],minduration:s=0}=o;t.register("provide video adUnits",(async(e,t)=>{r.ix_sandbox&&pbjs.setConfig({ix:{sandboxMode:!0}});try{const r=n(`${no[e]}.mediaTypes.video`,{}),{maxduration:o=61,protocols:d=[1,2,3,4,5,6],api:c=[1,2],playerSize:l=[636,358]}=r,u=i[e]&&"object"==typeof i[e]?i[e][t?"autoplay":"ctp"]:i[e],p=(0,X.fb)(l);return{bids:[{bidder:"ix",params:{siteId:u,size:l,video:{startdelay:0,mimes:a,minduration:s,maxduration:o,protocols:d,api:c,playerSize:l,w:p[0],h:p[1]}}}]}}catch(e){console.log("[IX Video] transform error ",e)}}))}});const ro={jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2"};(0,Yt.fo)("bidders.oathVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[25]},run(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.oath.video",{pubId:"MailOnline"});t.register("provide video adUnits",(e=>{var t,o,a;const s=n(ro[e]);if(2===(null==s||null===(t=s.mediaTypes)||void 0===t||null===(o=t.video)||void 0===o||null===(a=o.playerSize)||void 0===a?void 0:a.length)&&s.mediaTypes.video.context){const[e,t]=s.mediaTypes.video.playerSize;return{bids:[{bidder:"oneVideo",params:{pubId:i.pubId,video:{playerWidth:e,playerHeight:t,mimes:["video/mp4","application/javascript"],protocols:[1,2,3,4,5,6],api:[1,2],delivery:[2]}}}]}}r.warn(`Video adUnit misconfigured for pos: ${e}`,s)}))}}),(0,Yt.fo)("bidders.rhythmOne.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;r.warn("DEPRECATED: use unruly plugin"),t.register("provide video adUnits",(async(e,t)=>{const r=n(`plugins.bidders.rhythmOne.video.adUnits.${"jwplayer"===e?e:t?"autoplay":"ctp"}`);if(r)return{bids:[{bidder:"rhythmone",params:{placementId:r}}]}}))},vendorIds:{gdpr:[36]}}),(0,Yt.fo)("bidders.video.rubiMM",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.rubiMM.video.accountId"),o={area:[__webpack_require__.g.adAreaId]};i?(t.register("provide bidder alias",(()=>({adapterName:"rubicon",aliasedName:"rubi_mm"}))),t.register("prebid reduce bidderSettings",(e=>(e.rubi_mm={adserverTargeting:[{key:"hb_vast",val:e=>e.impression_id}]},e))),t.register("provide video adUnits",(function(e,t){const a="video"===e?t?"video.autoplay":"video.ctp":e,s=n(`plugins.bidders.rubiMM.video.adUnits.${a}`);if(!s)return r.warn(`config for ${a} does not exist`),{};const[d,c]=s.split(/\s+/,2);if(!d)return r.warn(`No site id for ${a}`),{};if(!c)return r.warn(`No zone id for ${a}`),{};const l=n(io[e]),u={language:"en",playerWidth:l.mediaTypes.video.playerSize[0],playerHeight:l.mediaTypes.video.playerSize[1],size_id:201},p=[{bidder:"rubi_mm",params:{accountId:i,inventory:o,siteId:Number(d),zoneId:Number(c),video:u}}];return r("providing auction info",p),{bids:p}}))):r.warn("no account id set")},vendorIds:{gdpr:[52]}});const io={jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2"},oo={jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2"};(0,Yt.fo)("bidders.rubiconVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[52]},run(e){let{broker:t,getConfig:n,log:r,win:i}=e;const o=n("plugins.bidders.rubicon.video.dependenciesTimeout",2e3),a=t.invokeAll({message:["dmp","admantx"],timeout:o}),s=new Promise((async e=>{const t=(await a)[0];r("ias-bsp",t),e((i.adAreaId?[["area",[i.adAreaId]],["ias-bsp",t]]:[["ias-bsp",t]]).reduce(((e,t)=>{let[n,r]=t;return r?{...e,[n]:r}:e}),{}))}));t.register("provide video adUnits",(async(e,t)=>{const r=(async(e,t)=>{const r=n("plugins.bidders.rubicon.video",{adUnits:{}}),i=n(oo[e]);let o="";const a=await s;if(r.adUnits[e]&&"object"==typeof r.adUnits[e]&&r.adUnits[e][t?"autoplay":"ctp"])o=r.adUnits[e][t?"autoplay":"ctp"];else{if(!r.adUnits[e]||"string"!=typeof r.adUnits[e])return{};o=r.adUnits[e]}const d=o.trim().replace(/ +/," ").split(" ");return{bids:[{bidder:"rubicon",params:{accountId:r.accountId,siteId:parseInt(d[0]),zoneId:parseInt(d[1]),inventory:a,video:{language:"en",playerWidth:i.mediaTypes.video.playerSize[0],playerHeight:i.mediaTypes.video.playerSize[1],size_id:201}}}]}})(e,t);return r})),t.register("prebid reduce bidderSettings",(e=>(e.rubicon||(e.rubicon={}),e.rubicon.adserverTargeting||(e.rubicon.adserverTargeting=[]),e.rubicon.adserverTargeting.push({key:"hb_vast",val:e=>e.impression_id}),e)))}}),(0,Yt.fo)("bidders.smartAdServer.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const r=n("plugins.bidders.smartAdServer.siteId",395440),i=n("plugins.bidders.smartAdServer.pageId",1352205),o={bids:[{bidder:"smartadserver",params:{formatId:n("plugins.bidders.smartAdServer.video.formatId",93390),pageId:i,siteId:r}}]};t.register("provide video adUnits",(async()=>o))},vendorIds:{gdpr:[45]}}),(0,Yt.fo)("bidders.video.spotx",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.enabled").includes("irisTv");async function o(e){if(!i)return{};try{return(0,Fe.jF)(await(0,He.yq)(1e3,t.invoke("get IrisTV tags",e),"Failed to get IrisTV tags in 500ms"),"context","iris_context")}catch(e){return r.error(e),{}}}t.register("provide video adUnits",(async function(e,t,i,a){const s="jwplayer"===e?"chromeless":"video"===e?t?"autoplay":"ctp":null,d=n(`plugins.bidders.spotx.video.${s}`);if(!d)return r.warn(`no channel id found for pos ${s}${s!==e?` (${e})`:""}`),{};const c=[{bidder:"spotx",params:{ad_unit:"instream",channel_id:d,custom:a?await o(a):{},page:`${location.protocol}//${location.hostname}${location.pathname}`}}];return r.info("providing auction info",c),{bids:c}}))},vendorIds:{gdpr:[165]}}),(0,Yt.fo)("bidders.tripleliftVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[28]},run(e){let{broker:t,getConfig:n}=e;const r=n("plugins.bidders.tripleliftVideo.adUnits",{jwplayer:"dailymail_prebid_commercial_player_ctp_intstream",video:{ctp:"dailymail_prebid_editorial_player_ctp_intstream",autoplay:"dailymail_prebid_editorial_player_ap_intstream"}});t.register("provide video adUnits",((e,t)=>({bids:[{bidder:"triplelift",params:{inventoryCode:r[e]&&"object"==typeof r[e]?r[e][t?"autoplay":"ctp"]:r[e]}}]})))}}),(0,Yt.fo)("bidders.pubmaticVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[76]},run(e){let{broker:t,getConfig:n,log:r,win:i}=e;const o=n("plugins.bidders.pubmatic.video.publisherId"),a=n("plugins.bidders.pubmatic.video.adUnits"),s=n("plugins.bidders.pubmatic.video.irisTv.enabled",!1),d=n("plugins.bidders.pubmatic.video.irisTv.timeout",1e3),c=n("plugins.bidders.pubmatic.video.dependenciesTimeout",2e3),l=n("plugins.bidders.pubmatic.video.outstreamAUs",{jwplayer:"jwplayer"}),u=t.invokeAll({message:["dmp","admantx"],timeout:c}),p=new Promise((async e=>{const t=(await u)[0];r("ias-bsp",t),e([["area",i.adAreaId],["ias-bsp",t]].reduce(((e,t)=>{let[n,r]=t;const i=Array.isArray(r)&&r.length||r?`${n}=${r}`:"";return i?e.length?`${e}|${i}`:`${i}`:e}),""))}));t.register("provide video adUnits",(async(e,n,i,c)=>{const u=((e,t,n,r)=>{if(e){const i=n=>0===n?e[t].preroll:e[t].midroll,o=n=>e[t][n?"autoplay":"ctp"],a=t.includes("jwplayer")?i(r):o(n);return a&&a.trim().replace(/\s+/,"@")}})(a,e,n,i);if(!u)return{};s&&r("requesting irisTV segments for videoId:",c);const f=s&&(0,He.Ye)(d,[t.invokeAll("get IrisTV tags",c)]),h=await f||{},{results:g=[]}=h,m=await p;r("dctr",m);const{context:v,iris_id:y}=g.length&&g[0].length&&!(0,Fe.xb)(g[0][0])&&g[0][0],{params:b,pbjsConfig:_}=null!=v&&v.length?{params:{adSlot:u,dctr:m.length?`${m}|iris_context=${v.join(",")}`:`iris_context=${v.join(",")}`,publisherId:o},pbjsConfig:{content:{id:y}}}:{params:{adSlot:u,dctr:m,publisherId:o},pbjsConfig:{}};return l[e]&&(b.outstreamAU=l[e]),r("bid params",b),{bids:[{bidder:"pubmatic",params:b}],pbjsConfig:_}}))}});const ao={jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2"};function so(e){let{broker:t,getConfig:n,log:r}=e;r.info("enabled"),t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.mediagrid.video.${e}`);if(r.info("code",e),r.info("uid",t),!t)return r.warn(`no uid found for pos ${e}`),{};if(!n(ao[e]))return r.warn(`no template found for pos ${e}`),{};const i={bids:[{bidder:"grid",params:{uid:t}}]};return r.info("providing ad unit",i),i}))}function co(e){let{broker:t,getConfig:n}=e;t.register("provide video adUnits",(async(e,t)=>{const r=((e,t)=>{const r=n("plugins.bidders.openx.video",{adUnits:{}});let i="";const o=r.delDomain;if(r.adUnits[e]&&"object"==typeof r.adUnits[e]&&r.adUnits[e][t?"autoplay":"ctp"])i=r.adUnits[e][t?"autoplay":"ctp"];else{if(void 0===r.adUnits[e])return{};i=r.adUnits[e].toString()}return{bids:[{bidder:"openx",params:{unit:i,delDomain:o,openrtb:{imp:[{video:{mimes:["video/x-ms-wmv","video/mp4"]}}]}}}]}})(e,t);return r}))}so.vendorIds={gdpr:[686]},so.purposeIds={gdpr:[1]},so.disableIfNoAdsServable=!0,co.vendorIds={gdpr:[69]},co.purposeIds={gdpr:[1]},co.disableIfNoAdsServable=!0;const lo=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise((t=>__webpack_require__.g.__tcfapi(e,2,(function(){return t(...arguments)}),...n)))},uo=__webpack_require__.g.adverts.startTime,po=[229,2292,2392,3,1584,2198,1964,1765,1633,11,236,733,15,2044,1040,2090,1268,1232,2664,2710,1671,2366,1152,867,2177,1716,22,1284,1496,2441,2176,624,2493,35,1960,802,827,1577,1514,1642,429,2614,359,2645,43,2681,46,432,1375,2214,931,55,2276,2222,2202,932,1188,1845,1248,57,2629,2511,574,2141,938,2315,2678,2771,2271,66,1678,2532,70,1863,1929,2658,7,2670,1517,2357,2238,1732,2662,1750,2646,1409,1301,80,1608,2406,83,1451,2140,61,991,1192,93,1834,2003,2596,1547,864,2526,1858,571,2387,1987,2109,1063,2699,2064,2647,2663,1843,108,1099,2605,1166,2062,122,1878,124,2786,2370,2453,987,440,2107,2264,131,2310,1703,135,1844,136,1896,1669,1097,1252,2335,2772,595,62,2622,143,144,316,2334,147,2405,2563,153,154,1345,2103,2253,2504,550,829,159,1525,161,559,2320,165,2133,1866,167,2571,2373,2415,2685,171,2669,2262,317,2765,2425,178,2572,2496,311,2012,1225,2559,2305,125,776,184,1276,820,188,2601,797,537,1329,192,817,2147,1899,1880,2575,2682,2084,196,575,492,1548,1204,202,1782,89,2440,209,211,1810,1365,2497,218,1613,1100,2727,955,221,1215,350,2584,1705,1298,1220,2586,1978,230,2472,1720,2779,2564,1745,2072,2506,2166,1201,2095,2219,2767,1832,239,241,1275,2295,149,1677,338,1735,2705,2282,126,253,1575,1162,1172,255,588,2251,2597,48,259,2673,266,1631,1837,2279,2739,271,2224,1760,274,1583,2225,2039,1236,2510,1674,1968,2186,1455,1883,1598,1003,1739,286,2684,2689,609,1423,1230,1403,1799,291,2661,780,839,12,2411,1503,2027,1226,1667,1733,294,1962,2336,1905,1312,1211,2414,2468,1067,723,1095,2038,2568,523,568,1603,1027,1313,308,436,313,2205,725,1052,1416,590,1780,591,576,2376,1250,310,1053,327,303,1898,1651,1362,1653,2555,1922,2462,1449,2610,1344,2306,2604,2517,1570,336,2464,2612,926,1205,1051,2477,2579,2121,1047,2247,2583,348,1942,1882,922,592,1212,2777,2531,358,2325,2290,1682,2437,2552,367,363,2621,1859,2068,2299,2778,1660,2079,1025,1356,2768,2115,2595,371,2609,1892,2686,2467,2359,1171,384,1648,1725,134,2544,385,2783,1024,389,2377,2407,2127,2780,1028,394,162,2447,2657,2628,2145,398,899,2394,1415,782,2435,2569,2459,1928,407,2498,340,1791,415,737,1902,2410,2059,1943,2527,414,2358,1721,2170,2035,1520,1029,1034,1126,2643,1048,2403,430,1127,2649,2216,976,1870,1468,2311,1419,979,1591,438,314,2652,2179,2709,1652,442,2427,2382,1072,2354,445,448,1934,2636,2234,449,2137,2691,1307,2706,2534,1411,453,2100,1753,459,2542,2278,2676,2312,2400,2052,2802,424,2567,2223,1665,2346,86,2192,1149,2714,2656,2088,2650,1638,1579,1684,1911,2078,1794,1944,1840,479,2770,2499,370,393,985,2634,486,1227,1241,2056,1958,2183,933,1107,495,494,1054,2695,2461,2156,2070,1626,1170,2220,503,505,2416,1786,510,1831,2481,2651,2690,853,2343,2113,2227,482,397,2677,2776,1800,981,2512,1512,2492,2171,2150,1889,528,2486,1509,1286,2624,1872,2418,2698,2784,1033,2758,540,1555,1722,2422,821,585,798,1442,323,2331,2337,1456,560];function fo(e){let{broker:t,getConfig:n,log:r}=e,i=n("plugins.bidders.spotx.video.autoplay");const o=n("cmp.apiHandler"),a=["__tcfapi"].includes(o)&&__webpack_require__.g[o],s=a?lo("getTCData"):Promise.resolve();n("plugins.spotx.enableCpsValues",!0)&&(window.__gcp=po);const d=n("plugins.enabled").includes("players.commercial")?".commercial-player-video_ima-ad-container":".video-ads-container",c=t.invoke("load script",`//js.spotx.tv/directsdk/v1/${i}.js`,"SpotX"),l=new Promise((e=>{const n=t.on("ad rendered",(async()=>{const t=document.querySelector(d);t&&(n.cancel(),e(t))}))}));t.register("get video tags",(async function(){let{platform:e,screen:o,offset:a=0,adEl:u,autoplay:p,videoAdServerUrl:f,videoEl:h,slot:g,excludeSpotX:m,auctionId:v}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r("get video tags",m,p),m)return;if(i="jwplayer"!==g.pos?n("plugins.bidders.spotx.video."+(p?"autoplay":"ctp")):n("plugins.bidders.spotx.video.chromeless"),!i)return r("[error] Missing SpotX configuration"),{};__webpack_require__.g.SpotX||await c,u=u||document.querySelector(d),u||(r("awaiting imaVideoElement"),u=await l);const y={};__webpack_require__.g.adAreaId&&(y.area=__webpack_require__.g.adAreaId);const b={hide_skin:!0,autoplay:p,content_width:o.width,content_height:o.height,channel_id:i,custom:y,slot:u,video_slot:h||u.parentNode.getElementsByTagName("video")[0]||u.parentNode.parentNode.getElementsByTagName("video")[0],check_gcp:!0};r("adOSConfig",b);const _=await s;_&&(r("adding user consent data"),b.ados={regs:{gdpr:1},user:{consent:_.tcString}});let w={};const T=new __webpack_require__.g.SpotX.DirectAdOS(b);try{r("getAdServerKVPs"),w=await T.getAdServerKVPs();const n=Date.now()-uo;t.emit("bid",g.pos,{platform:e,offset:a,bidder:"spotx",cpm:100*w.spotx_bid,timeToBid:n})}catch(e){}if((0,Fe.xb)(w))return r("no bid"),{};{const e=Math.round(100*w.spotx_bid)/100;return r(`bid, pos: ${g.pos}, offset: ${a}, cpm: ${e}`),{type:"bid",pos:g.pos,offset:a,auctionId:v,cpm:e,bidderCode:"spotx",tags:{cust_params:w}}}})),setTimeout((async()=>{a&&async function(){const e=new Set(await lo("consentedVendors"));[21,25,40,79,115,165,264].map((t=>e.has(t))).every((e=>e))&&((new __webpack_require__.g.Image).src="//sync.search.spotxchange.com/partner?source=86983")}()}),1e3)}function ho(e){let{broker:t,getConfig:n}=e;const{adUnits:r}=n("plugins.bidders.telariaVideo",{adUnits:{}});t.register("provide video adUnits",(async(e,t)=>{const n=r[e]&&"object"==typeof r[e]?r[e][t?"autoplay":"ctp"]:r[e],[i,o]=(e=>e.trim().replace(/\s+/," ").split(" "))(n);return{bids:[{bidder:"telaria",params:{supplyCode:i,adCode:o}}]}}))}fo.vendorIds={gdpr:[165]},fo.purposeIds={gdpr:[1]},fo.disableIfNoAdsServable=!0,ho.vendorIds={gdpr:[202]},ho.purposeIds={gdpr:[1]},ho.disableIfNoAdsServable=!0;var go=__webpack_require__(9315);async function mo(e){let{broker:t,log:n,getConfig:r}=e;const i=r("konduit.id","5ed6500c9166db0c4e9556ad"),o=new Set(["video","jwplayer"]),a={},s=(e,t)=>`${e}-${t}`,d=(e,t,r)=>(i,o)=>{i?n.warn("konduit erorrs",i):(n("bids processed:",e,[o]),o.forEach((e=>t.push(function(e){const t=e.adserverTargeting;return delete t.konduit_cache_key,delete t.konduit_id,n("konduit key values",t),{cust_params:t}}(e))))),c(r)},c=e=>{n("closing stream for:",e),a[e].push(null),delete a[e]};t.registerStream("get video tags",(e=>{const{slot:r,offset:i=0}=e,o=r.pos,d=s(o,i);if(n("get video tags for:",d),a[d])return void n.error(`Stream already existing for "${d}', bailing`);const c=a[d]=(0,go.KC)();return(0,go.TS)([c,t.openStream("konduit get video tags",e)])})),t.register("prebid video auction started",((e,t,r)=>{const i=s(t,r),o=a[i];a[e]=o,o.bids=[],delete a[i],n("auction started:",{key:i,auctionId:e})})),t.on("prebid video auction ended",((e,t)=>{n("prebid video auction ended",t);const r=a[t];if(!r)return void n("no stream for:",{adUnitCodes:e,auctionId:t});if(1!==e.length)throw c(t),new Error("No support for more than 1 unit per auction");const i=e[0];n("processing bids for:",i,t,r.bids),__webpack_require__.g.pbjs.adServers.konduit.processBids({adUnitCode:i,bids:r.bids,enableSendAllBids:!0,callback:d(i,r,t)})})),await t.until("prebid loaded"),__webpack_require__.g.pbjs.setConfig({konduit:{konduitId:i}}),__webpack_require__.g.pbjs.enableAnalytics({provider:"konduit"}),__webpack_require__.g.pbjs.onEvent("bidResponse",(e=>{o.has(e.adUnitCode)&&(n("bidResponse",e),a[e.auctionId].bids.push(e))}))}mo.vendorIds={gdpr:!1},mo.disableIfNoAdsServable=!0;var vo=function(e,t){return vo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},vo(e,t)};function yo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}vo(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function bo(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function _o(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function wo(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function To(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function Io(e){return this instanceof Io?(this.v=e,this):new Io(e)}Object.create,Object.create;var So=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function ko(e){return"function"==typeof e}var Co,Eo,Ao=(Co=function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}},(Eo=Co((function(e){Error.call(e),e.stack=(new Error).stack}))).prototype=Object.create(Error.prototype),Eo.prototype.constructor=Eo,Eo);function Po(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var xo=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=_o(o),s=a.next();!s.done;s=a.next())s.value.remove(this)}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var d=this.initialTeardown;if(ko(d))try{d()}catch(e){i=e instanceof Ao?e.errors:[e]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var l=_o(c),u=l.next();!u.done;u=l.next()){var p=u.value;try{Do(p)}catch(e){i=null!=i?i:[],e instanceof Ao?i=To(To([],wo(i)),wo(e.errors)):i.push(e)}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(i)throw new Ao(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Do(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Po(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&Po(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();function Oo(e){return e instanceof xo||e&&"closed"in e&&ko(e.remove)&&ko(e.add)&&ko(e.unsubscribe)}function Do(e){ko(e)?e():e.unsubscribe()}xo.EMPTY;var Ro={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Mo={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Mo.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,To([e,t],wo(n))):setTimeout.apply(void 0,To([e,t],wo(n)))},clearTimeout:function(e){var t=Mo.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function No(e){Mo.setTimeout((function(){var t=Ro.onUnhandledError;if(!t)throw e;t(e)}))}function Uo(){}var Lo=jo("C",void 0,void 0);function jo(e,t,n){return{kind:e,value:t,error:n}}var Bo=null,qo=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,Oo(t)&&t.add(n)):n.destination=$o,n}return yo(t,e),t.create=function(e,t,n){return new Wo(e,t,n)},t.prototype.next=function(e){this.isStopped?Zo(function(e){return jo("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?Zo(jo("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?Zo(Lo,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(xo),Fo=Function.prototype.bind;function Vo(e,t){return Fo.call(e,t)}var zo=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Ho(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Ho(e)}else Ho(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Ho(e)}},e}(),Wo=function(e){function t(t,n,r){var i,o,a=e.call(this)||this;return ko(t)||!t?i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:a&&Ro.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},i={next:t.next&&Vo(t.next,o),error:t.error&&Vo(t.error,o),complete:t.complete&&Vo(t.complete,o)}):i=t,a.destination=new zo(i),a}return yo(t,e),t}(qo);function Ho(e){var t;Ro.useDeprecatedSynchronousErrorHandling?(t=e,Ro.useDeprecatedSynchronousErrorHandling&&Bo&&(Bo.errorThrown=!0,Bo.error=t)):No(e)}function Zo(e,t){var n=Ro.onStoppedNotification;n&&Mo.setTimeout((function(){return n(e,t)}))}var $o={closed:!0,next:Uo,error:function(e){throw e},complete:Uo},Go="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ko(e){return e}var Xo=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,o=(r=e)&&r instanceof qo||function(e){return e&&ko(e.next)&&ko(e.error)&&ko(e.complete)}(r)&&Oo(r)?e:new Wo(e,t,n);return function(e){if(Ro.useDeprecatedSynchronousErrorHandling){var t=!Bo;if(t&&(Bo={errorThrown:!1,error:null}),e(),t){var n=Bo,r=n.errorThrown,i=n.error;if(Bo=null,r)throw i}}else e()}((function(){var e=i,t=e.operator,n=e.source;o.add(t?t.call(o,n):n?i._subscribe(o):i._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Jo(t))((function(t,r){var i=new Wo({next:function(t){try{e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Go]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===(n=e).length?Ko:1===n.length?n[0]:function(e){return n.reduce((function(e,t){return t(e)}),e)})(this);var n},e.prototype.toPromise=function(e){var t=this;return new(e=Jo(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function Jo(e){var t;return null!==(t=null!=e?e:Ro.Promise)&&void 0!==t?t:Promise}var Yo="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Qo(e){if(e instanceof Xo)return e;if(null!=e){if(function(e){return ko(e[Go])}(e))return function(e){return new Xo((function(t){var n=e[Go]();if(ko(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}(e);if(So(e))return i=e,new Xo((function(e){for(var t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()}));if(ko(null==(r=e)?void 0:r.then))return n=e,new Xo((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,No)}));if(function(e){return Symbol.asyncIterator&&ko(null==e?void 0:e[Symbol.asyncIterator])}(e))return ea(e);if(function(e){return ko(null==e?void 0:e[Yo])}(e))return t=e,new Xo((function(e){var n,r;try{for(var i=_o(t),o=i.next();!o.done;o=i.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()}));if(function(e){return ko(null==e?void 0:e.getReader)}(e))return ea(function(e){return function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof Io?Promise.resolve(n.value.v).then(d,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function d(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}(this,arguments,(function(){var t,n,r;return bo(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,Io(t.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,Io(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,Io(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e))}var t,n,r,i;throw function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(e)}function ea(e){return new Xo((function(t){(function(e,t){var n,r,i,o,a,s,d,c;return a=this,s=void 0,c=function(){var a,s;return bo(this,(function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=_o(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}(e),d.label=1;case 1:return[4,n.next()];case 2:if((r=d.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=d.sent(),i={error:s},[3,11];case 6:return d.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))},new((d=void 0)||(d=Promise))((function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof d?i:new d((function(e){e(i)}))).then(n,r)}i((c=c.apply(a,s||[])).next())}))})(e,t).catch((function(e){return t.error(e)}))}))}function ta(e){return function(t){if(function(e){return ko(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function na(e,t,n,r,i){return new ra(e,t,n,r,i)}var ra=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t)||this;return s.onFinalize=o,s.shouldUnsubscribe=a,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return yo(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(qo);function ia(e,t){return ta((function(n,r){var i=0;n.subscribe(na(r,(function(n){r.next(e.call(t,n,i++))})))}))}function oa(e,t,n){return void 0===n&&(n=1/0),ko(t)?oa((function(n,r){return ia((function(e,i){return t(n,e,r,i)}))(Qo(e(n,r)))}),n):("number"==typeof t&&(n=t),ta((function(t,r){return function(e,t,n,r,i,o,a,s){var d=[],c=0,l=0,u=!1,p=function(){!u||d.length||c||t.complete()},f=function(e){return c<r?h(e):d.push(e)},h=function(e){c++;var i=!1;Qo(n(e,l++)).subscribe(na(t,(function(e){t.next(e)}),(function(){i=!0}),void 0,(function(){if(i)try{c--;for(var e=function(){var e=d.shift();h(e)};d.length&&c<r;)e();p()}catch(e){t.error(e)}})))};return e.subscribe(na(t,f,(function(){u=!0,p()}))),function(){}}(t,r,e,n)})))}var aa=Array.isArray;var sa=["addListener","removeListener"],da=["addEventListener","removeEventListener"],ca=["on","off"];function la(e,t,n,r){if(ko(n)&&(r=n,n=void 0),r)return la(e,t,n).pipe((i=r,ia((function(e){return function(e,t){return aa(t)?e.apply(void 0,To([],wo(t))):e(t)}(i,e)}))));var i,o=wo(function(e){return ko(e.addEventListener)&&ko(e.removeEventListener)}(e)?da.map((function(r){return function(i){return e[r](t,i,n)}})):function(e){return ko(e.addListener)&&ko(e.removeListener)}(e)?sa.map(ua(e,t)):function(e){return ko(e.on)&&ko(e.off)}(e)?ca.map(ua(e,t)):[],2),a=o[0],s=o[1];if(!a&&So(e))return oa((function(e){return la(e,t,n)}))(Qo(e));if(!a)throw new TypeError("Invalid event target");return new Xo((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return a(t),function(){return s(t)}}))}function ua(e,t){return function(n){return function(r){return e[n](t,r)}}}var pa=function(e){function t(t,n){return e.call(this)||this}return yo(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(xo),fa={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=fa.delegate;return(null==i?void 0:i.setInterval)?i.setInterval.apply(i,To([e,t],wo(n))):setInterval.apply(void 0,To([e,t],wo(n)))},clearInterval:function(e){var t=fa.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},ha=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return yo(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),fa.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&fa.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Po(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(pa),ga={schedule:function(e){var t=requestAnimationFrame,n=cancelAnimationFrame,r=ga.delegate;r&&(t=r.requestAnimationFrame,n=r.cancelAnimationFrame);var i=t((function(t){n=void 0,e(t)}));return new xo((function(){return null==n?void 0:n(i)}))},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ga.delegate;return((null==n?void 0:n.requestAnimationFrame)||requestAnimationFrame).apply(void 0,To([],wo(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ga.delegate;return((null==n?void 0:n.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,To([],wo(e)))},delegate:void 0},ma=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return yo(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t._scheduled||(t._scheduled=ga.requestAnimationFrame((function(){return t.flush(void 0)}))))},t.prototype.recycleAsyncId=function(t,n,r){var i;if(void 0===r&&(r=0),null!=r?r>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);var o=t.actions;null!=n&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==n&&(ga.cancelAnimationFrame(n),t._scheduled=void 0)},t}(ha),va={now:function(){return(va.delegate||Date).now()},delegate:void 0},ya=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=va.now,e}(),ba=function(e){function t(t,n){void 0===n&&(n=ya.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return yo(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(ya),_a=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return yo(t,e),t.prototype.flush=function(e){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var n,r=this.actions;e=e||r.shift();do{if(n=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,n){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw n}},t}(ba))(ma);const wa=(e,t)=>(e.clientX-t.clientX)*(e.clientX-t.clientX)+(e.clientY-t.clientY)*(e.clientY-t.clientY),Ta=e=>e.touches[0],Ia=(e,t,n)=>{e.style.transform=`translate(${t}px, ${n}px)`};class Sa{constructor(e,t,n,r){this.broker=e,this.playerConfig=t,this.playlist=n,this.config={...t},this.log=r,this.containerInitialised=this.containerInitialised.bind(this),this.playerRemove=this.playerRemove.bind(this),this.getPlaylistItem=this.getPlaylistItem.bind(this),this.handleRenderMpuAd=this.handleRenderMpuAd.bind(this),e.on("creative updated plugins",(e=>{e.hasOwnProperty("chromeless.dmplayer")&&!e["chromeless.dmplayer"]&&this.playerRemove()})),e.on("disable chromeless-player",(()=>{console.log("removing chromeless player"),this.playerRemove()}))}handlePlay(e){this.videoPlayerRef.handlePlay(e)}handleAdPlay(e){this.videoPlayerRef.handleAdPlay(e)}handleError(e){}handleRenderMpuAd(e,t){const n=e.bannerFallback.pos;this.log(`rendering ${n}`),e.pauseOnBlur&&this.broker.emit("mpuPlayerDisplayed",!0);const r=async()=>{this.videoPlayerRef.clearMpuAd(t),this.broker.emit("destroy slot",n),i.removeAttribute("data-adverts-ad");const r=await this.broker.invoke("is page visible?");e.pauseOnBlur&&!r&&(this.log("page not visible... waiting"),await this.broker.until("page visible")),this.log("restarting player"),e.pauseOnBlur&&this.broker.emit("mpuPlayerDisplayed",!1),this.broker.emit("bannerFallbackAd destroyed")},i=document.getElementById(n),o=this.broker.register("get tags",(e=>{let{slot:{pos:r}}=e;if(r!==n)return;o.cancel();const{offset:i}=t;return[{offset:i}]})),{pos:a,id:s,parentId:d}=e.bannerFallback;this.broker.emit("slot mounted",{pos:a,id:s,parentId:d}),this.broker.once("ad rendered",n,(i=>{let{isEmpty:o}=i;if(this.log(`${n} rendered`),o)return this.log(`${n} empty`),void r();this.videoPlayerRef.handleMpuAd(t),setTimeout((()=>{this.log(`destroying ${n}`),r()}),e.bannerFallback.displayTimeout)}))}getPlaylistItem(){return this.player.options_}monitorEvents(){const{broker:e,config:t}=this,{bannerFallback:n={},pauseOnBlur:r=!0}=t;e.on("chromeless player event","adPlay",(e=>this.handleAdPlay(e))),e.on("chromeless player event","play",(e=>this.handlePlay(e))),e.on("chromeless player event","error",(e=>this.handleError(e))),t.bannerFallback&&t.bannerFallback.enabled&&e.on("chromeless player event","bannerFallbackAd",(e=>this.handleRenderMpuAd({bannerFallback:n,pauseOnBlur:r},e)))}async createPlayerLayout(){const{width:e,height:t,ui:n}=this.config;this.timer=+new Date,this.monitorEvents(),this.targetBody=document.createElement("div"),this.targetBody.id="chromelessPlayer",this.targetBody.className="jwplayer_body",this.targetBody.style.width=`${e}px`,this.targetBody.style.height=`${t}px`,this.targetBody.style.background=`url(${this.config.ui.backgroundImage})`,document.body.appendChild(this.targetBody);const r={ref:e=>{this.videoPlayerRef=e},broker:this.broker,containerInitialised:this.containerInitialised,targetBody:this.targetBody,onClose:this.playerRemove,config:{width:e,ui:n},getPlaylistItem:this.getPlaylistItem};this.videoPlayerRef=function(e){let{broker:t,containerInitialised:n,getPlaylistItem:r,onClose:i}=e,o=!0;const a=MobileUtils.isMobile()?"touchstart":"click",s=document.createElement("img");s.src="//i.dailymail.co.uk/video/chromeless_closer.png";const d=document.createElement("div");d.id="closeButton",d.appendChild(s),d.addEventListener(a,(function(e){e&&e.preventDefault(),i()}));const c=document.createElement("video");c.setAttribute("defaultMuted","defaultMuted"),c.setAttribute("muted","muted");const l=document.createElement("div");l.id="playerDiv",l.classList.add("vjs-video-container"),l.classList.add("vjs-responsive"),l.style.visibility="hidden",l.appendChild(c);const u=document.createElement("div");u.id="readMoreWrapper",u.addEventListener(a,(function(e){e.preventDefault(),t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"articleUrlClicked"}}),i(),__webpack_require__.g.top.location=r().linkBaseURL+"?ito=chromelessDM_0"})),u.addEventListener("mouseover",(function(){v(r().title)})),u.addEventListener("mouseout",(function(){g()}));const p=document.createElement("div");p.id="mpu_player",p.style.marginTop="0",p.style.left="73px";const f=document.createElement("div");f.classList.add("mpu_player_wrapper"),f.appendChild(p),f.style.display="none",f.addEventListener(a,(function(e){e.preventDefault()}));const h=document.createElement("div");h.id="outerWrapper",h.addEventListener("mouseover",(function(){h.querySelector(".jw-playlist-btn")&&(h.querySelector(".jw-playlist-btn").style.display="none",h.querySelector(".jw-icon-fullscreen").style.display="none")})),h.appendChild(d),h.appendChild(l),h.appendChild(u),h.appendChild(f),n(l,c);const g=(0,J.Ds)((()=>{u.innerText="Read more"}),5e3);return{clearMpuAd:function(){f.style.display="none"},handleAdPlay:function(){o&&m(),u.style.display="none"},handleMpuAd:function(){u.style.display="none",f.style.display="block"},handlePlay:function(){const e=r();o&&m(),v(e.title),u.style.display="inline"},outerWrapper:h,revealPlayer:m};function m(){l.style.visibility="visible",o=!1}function v(e){u.innerText=e,g()}}(r),this.targetBody.appendChild(this.videoPlayerRef.outerWrapper)}playerRemove(){this.videoPlayerRef&&this.videoPlayerRef.outerWrapper.parentNode.removeChild(this.videoPlayerRef.outerWrapper),this.targetBody&&this.targetBody.remove(),this.broker.emit("set slots enabled",["chromeless"],!1),this.broker.emit("chromeless player closed"),this.broker.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"close"}})}initialisePlayer(){this.broker.emit("set slots enabled",["chromeless"],!0),__webpack_require__.g.DM.later("videoplayer-ready",(async()=>{this.player=await(async(e,t,n)=>{const{width:r,height:i,bannerFallback:o={}}=e,a=await n,s={isMobile:MobileUtils.isMobile(),playerId:"default",preload:"none",initialVideo:!0,syndicationService:null,plugins:{tracking:{disableMolTracking:e.disableMolTracking,channelShortName:e.pageCriteraVideoChannel,sponsored:null,referenceId:"",videoId:"",trackingType:"chromeless",recommendationModel:""},"video-advertising-mode":{},"autoplay-next-video":{},"ads-setup":{bidmax:!0,cust_params:{pos:"jw_preroll"},headerBiddingParams:{platform:"dmplayer",pos:"jwplayer"},schedule:e.schedule,adsEnabled:!0,vpaidEnabled:!0,useIMASDK:e.useImaSdk,adsCancelTimeout:15e3,screen:{width:r,height:i},bannerFallback:!!o.enabled},"related-videos":{videos:a,playlistHistory:!1}}};return await __webpack_require__.g.DM.molFeVideoplayer.initializeVideo(t,s)})(this.playerConfig,this.videoEl,this.playlist);const{delayBeforeMakingPlayerVisible:e,nonOptimisedMobileHomePage:t}=this.config;var n,r;setTimeout((()=>{this.targetBody.style.visibility="visible",this.broker.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"open"}})}),e),t&&(n=this.targetBody,r=this.player,new Promise((e=>{const t=la(n,"touchstart"),i=la(document,"touchmove"),o=la(document,"touchend"),a=t.pipe((s=t=>{const a=Ta(t);t.preventDefault(),t.stopPropagation();const s=o.pipe(ia((e=>e.preventDefault()||wa(e.changedTouches[0],a))),(u=ko(d=t=>{t>=4e4?(r.userActive(!0),e()):(Ia(n,0,0),r.userActive(!0))})?{next:d,error:c,complete:l}:d)?ta((function(e,t){var n;null===(n=u.subscribe)||void 0===n||n.call(u);var r=!0;e.subscribe(na(t,(function(e){var n;null===(n=u.next)||void 0===n||n.call(u,e),t.next(e)}),(function(){var e;r=!1,null===(e=u.complete)||void 0===e||e.call(u),t.complete()}),(function(e){var n;r=!1,null===(n=u.error)||void 0===n||n.call(u,e),t.error(e)}),(function(){var e,t;r&&(null===(e=u.unsubscribe)||void 0===e||e.call(u)),null===(t=u.finalize)||void 0===t||t.call(u)})))})):Ko);var d,c,l,u,p;return i.pipe(ia((e=>{return t=Ta(e),n=a,{x:t.clientX-n.clientX,y:t.clientY-n.clientY,distSQ:wa(t,n)};var t,n})),(p=s,ta((function(e,t){Qo(p).subscribe(na(t,(function(){return t.complete()}),Uo)),!t.closed&&e.subscribe(t)}))),function(e,t){return void 0===t&&(t=0),ta((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}(_a))},ta((function(e,t){var n=null,r=!1,i=function(){return r&&!n&&t.complete()};e.subscribe(na(t,(function(e){null==n||n.unsubscribe(),Qo(s(e)).subscribe(n=na(t,(function(e){return t.next(e)}),(function(){n=null,i()})))}),(function(){r=!0,i()})))}))));var s;a.subscribe((e=>{e.distSQ>=1e4?Ia(n,e.x,e.y):Ia(n,0,0)}))}))).then((()=>this.playerRemove())),this.broker.emit("chromeless player ready",this.player),((e,t)=>{t.on("videoAd.start",(t=>{e.emit("chromeless player event","adPlay",t)})),t.on("play",(t=>e.emit("chromeless player event","play",t))),t.on("error",(t=>e.emit("chromeless player event","error",t))),t.on("videoAd.contentPauseRequested",(t=>{e.emit("chromeless player event","adPlay",t)})),t.on("videoAd.contentResumeRequested",(t=>{e.emit("chromeless player event","play",t)})),t.on("request-reset",(t=>e.emit("chromeless player event","playlistItem",t))),t.on("time",(t=>e.emit("chromeless player event","time",t))),t.on("videoAd.error",(t=>e.emit("chromeless player event","adError",t))),t.on("videoAd.impression",(t=>{e.emit("video ad impression",t),e.emit("chromeless player event","adImpression",t)}))})(this.broker,this.player)}))}async containerInitialised(e,t){const{broker:n,config:r}=this;this.videoEl=t;const{width:i,height:o,videoAdServerUrl:a,pageLoadTimeout:s}=r,d=(await this.playlist)[0];n.emit("chromeless videoPlayer container ready",{broker:n,adEl:e,videoEl:t,videoId:d.videoId,config:{width:i,height:o,videoAdServerUrl:a,pageLoadTimeout:s}})}}const ka=MobileUtils.isMobile()&&!MobileUtils.isAndroidTablet()&&!MobileUtils.isIPad(),Ca=(e,t)=>e&&ka&&"desktop"===t.renderPlatform,Ea=e=>{const t=e("players.chromeless.dmplayer.v3.adUnitNameLevel1","dm.chromelessvideo"),n=e("players.chromeless.dmplayer.v3.adUnitNameLevel2","dm_dmros_ros"),r=e("players.chromeless.dmplayer.v3.dfpAccountCode","5765"),i=e("players.chromeless.dmplayer.v3.videoAdServerUrlTemplate",{sz:"[size]",impl:"s",gdfp_req:1,env:"vp",output:"xml_vast4",unviewed_position_start:1,url:`${location.protocol}//${location.hostname}${location.pathname}`,correlator:"[time]"}),o=e("players.chromeless.dmplayer.v3.adRequestBaseUrl","https://pubads.g.doubleclick.net/gampad/ads");return e("players.chromeless.dmplayer.v3.adRoll",[]).map((e=>{let{offset:a,pos:s,cust_params:d,minVideoDuration:c}=e;const l={...i,iu:`/${r}/${t}/${n}/${s}`},u=Object.entries(l).map((e=>{let[t,n]=e;return t+"="+`${n}`.replace(/\//g,"%2F")})).join("&"),p=`${o}?${u}`;return c?{videoAdServerUrl:p,offset:a,minVideoDuration:c,cust_params:d}:{videoAdServerUrl:p,offset:a,cust_params:d}}))},Aa=e=>{let t,{broker:n,getConfig:r,isHomepage:i,log:o,pageMeta:a}=e;const s=((e,t,n)=>{const r=e("plugins.slots.jwplayer.v3",{}),i=e("plugins.slots.jwplayer.v3.useIMASSDK",!0),o=e("players.commercial.pauseOnBlur",!0),a=new Set(["news","tvshowbiz","femail","health","sciencetech","travel","money"]).has(__webpack_require__.g.PageCriteria.channel)?__webpack_require__.g.PageCriteria.channel:"news",s=r.mediaType&&r.mediaType.video&&r.mediaType.video.playerSize||[401,225],d=Object.keys(e("slots.enabled",{})).includes("mpu_player"),c=e("slotDescriptions.initial",{}).mpu_player,{playerSize:l=[445,250],displayTimeout:u=5e3}=(null==c?void 0:c.bannerFallback)||{},[p,f]=d?l:s,h=d?((e,t)=>{const{id:n,parentId:r,pos:i}=e;return{displayTimeout:t,enabled:!0,id:n,parentId:r,pos:i}})(c,u):{};return{width:p,height:f,delayBeforeMakingPlayerVisible:e("players.chromeless.dmplayer.v3.delayBeforeMakingPlayerVisible",4e3),...r,nonOptimisedMobileHomePage:Ca(t,n),trackingData:{videoChannel:a},schedule:Ea(e),disableMolTracking:e("players.chromeless.dmplayer.v3.disableMolTracking",!0),pageCriteraVideoChannel:__webpack_require__.g.PageCriteria.channel,useImaSdk:i,bannerFallback:{enabled:!1,...h},pauseOnBlur:o}})(r,i,a);o("player config",s);const{ui:d,disableMolTracking:c,pageCriteraVideoChannel:l,trackingData:u}=s,p=new Promise((e=>{n.once("ad rendered","billboard",(()=>setTimeout(e,500)))}));n.on("creative updated plugins",(e=>{e.hasOwnProperty("chromeless.dmplayer")&&!e["chromeless.dmplayer"]&&(t=!0)})),n.on("disable chromeless-player",(()=>{t=!0})),n.on("plugins enabled",(async()=>{if(t)return;const e=new Promise((e=>{n.on("chromeless videoPlayer container ready",(t=>{(async e=>{let{broker:t,adEl:n,videoEl:r,videoId:i,config:o}=e;const{width:a,height:s,videoAdServerUrl:d,pageLoadTimeout:c}=o;t.emit("start early video bid",{adEl:n,videoEl:r,offset:0,pos:"jwplayer",articleURL:`${__webpack_require__.g.location.protocol}//${__webpack_require__.g.location.host}${__webpack_require__.g.location.pathname}`,timeout:c,screen:{height:s,width:a},videoAdServerUrl:d,videoId:i,autoplay:!0,excludeSpotX:!1,platform:"dmplayer"})})(t),e()}))}));n.register("get video tags",(e=>{let{pos:t}=e;const n=__webpack_require__.g.PageCriteria.channel;if("jwplayer"===t)return{cust_params:{channel:n}}}));const i=(async e=>{const t=await async function(e){const t=await In({url:e,timeout:18e3});return JSON.parse(t)}(e.ui.playlistUrl).catch((e=>{console.log("No jwplayer playlist available due to ",e.message)}));if(!t)return;const n=t[e.trackingData.videoChannel];return((e,t,n,r)=>e.filter((e=>e.duration<=t.maxVideoDuration)).map((e=>({linkBaseURL:e.articleUrl,isMobile:!1,duration:e.duration,src:e.url,source:e.source,playerId:"default",title:e.headline,preload:"none",initialVideo:!1,thumbnail:e.stillImageUrl,poster:t.backgroundImage,syndicationService:!1,plugins:{tracking:{disableMolTracking:n,channelShortName:r,sponsored:null,referenceId:e.id,videoId:e.externalVideoIdent,trackingType:"chromeless",recommendationModel:""},"ads-setup":{adsEnabled:!0,screen:{width:401,height:225},adsCancelTimeout:15e3},"autoplay-inline":{enabled:!1,alwaysOn:!1}},videoId:e.externalVideoIdent,descr:e.headline,referenceId:e.id,grapeshot:{article:{articleURL:e.articleUrl}}}))))(e.ui.shufflePlaylist?(0,Qe.TV)(n):n,e.ui,e.disableMolTracking,e.pageCriteraVideoChannel)})({ui:d,disableMolTracking:c,pageCriteraVideoChannel:l,trackingData:u}),a=new Sa(n,s,i,o);__webpack_require__.g.DM.later("DOM_READY",(async()=>{await n.invoke("is page visible?")||!s.pauseOnBlur?(o("Page has focus - rendering player"),a.createPlayerLayout()):(o("Waiting for page to focus"),n.once("page visible",(()=>{o("Page has focus - rendering player"),a.createPlayerLayout()})))}));let f=r("players.chromeless.dmplayer.v3.delayBeforeStartPlayer",2e3);if(r("plugins.enabled").includes("chromelessWaitForBillboard")){const e=Date.now();await p;const t=Date.now()-e;f=t>f?0:f-t}setTimeout((async()=>{if(!t)try{await e,a.initialisePlayer()}catch(e){throw console.log("Unable to start chromeless player due to",e.message),e}}),f)}))};Aa.pluginSetup=e=>{let{log:t,getConfig:n,isHomepage:r,pageMeta:i,addPlugins:o,removePlugins:a}=e;const s=n("players.chromeless.dmplayer.v3.domainExclusions",[]),d=n("players.chromeless.dmplayer.v3.articleIdExclusions",[]).map((e=>e.toString())),c=s.length&&(s.includes(__webpack_require__.g.location.hostname)||s.includes(__webpack_require__.g.location.hostname.replace(/www./,"")))||__webpack_require__.g.PageCriteria.articleId&&d.length&&d.includes(__webpack_require__.g.PageCriteria.articleId),l=n("players.chromeless.dmplayer.v3.enableWifiDetection",!1),u=navigator.connection&&"wifi"===navigator.connection.type;c||ka&&!Ca(r,i)||l&&!u||!l&&ka?(t("removing dmplayer"),a(["chromelessv2.dmplayer"])):(t("removing videoFlyout and videoForceFlyout"),a(["videoForceFlyout","videoFlyout"]),o(["players.onlyOneActivePlayer"]))};const Pa=Aa;Aa.ccpa={enabledIfDissent:!0},Aa.gdpr={enabledIfDissent:!0},Aa.disableIfNoAdsServable=!0;var xa=__webpack_require__(4431);const Oa=DM.molFeComponents,Da=e=>{try{if("string"==typeof e)return new URL(e).hostname}catch(e){}},Ra=["dmgmediaprivacy.co.uk","dmgprivacyint.co.uk","localhost","127.0.0.1"],Ma=MobileUtils.isMobile()&&!MobileUtils.isAndroidTablet()&&!MobileUtils.isIPad(),Na={getUSPData:"__cachedUSPData"},Ua=async(e,t,n,r)=>{const[i,o]=await Promise.all([fr(),hr()]);i||n(r),(async(e,t,n)=>{if(!n&&!je.cj&&!t("cmp.isEmbeddedVideo",!1)){await pr("rendered");const t=(e=>{const t=t=>{if(!(e=>{if(void 0!==e.dataset.cmpNoConsent||/(cookie\s+policy|privacy\s+settings)/i.test(e.textContent))return!0;const t=document.querySelectorAll("*[data-cmp-no-consent]");for(const n of t)if((0,Ut.contains)(n,e))return!0;return!1})(t.target)){const r=(0,xa.vE)(t);t.preventDefault(),n(),e.emit("extra cmp ui tracking event","site clicked"),pr("consentToAll").then((()=>{t.target.dispatchEvent(r)})).catch((e=>{console.error(e),t.target.dispatchEvent(r)}))}},n=()=>{document.body.removeEventListener("click",t)};return document.body.addEventListener("click",t),n})(e);await pr("onUpdate"),t()}})(e,t,o)},La=async e=>{const t=yr();return Promise.all(Object.entries(Na).map((e=>{let[n,r]=e;return new Promise((e=>{t.a.push([n,null,(t,i)=>{i&&(localStorage.setItem(r,JSON.stringify(t)),e({[n]:t}))}])}))})))},ja=async e=>{let{broker:t,getConfig:n,log:r,registerPluginBouncer:i}=e;function o(e,t){var n,i;return(null==t||null===(n=t.ccpa)||void 0===n||!n.enabledIfDissent)&&r("bouncing",e),null==t||null===(i=t.ccpa)||void 0===i?void 0:i.enabledIfDissent}Oa.setConfig("molFeHomeChannel/showGDPRControls",{enabled:!je.cj&&vr()}),je.queryParams["mol.ads.cmp.stubConsent"]?localStorage.setItem(ur,"yes"):je.queryParams["mol.ads.cmp.stubDissent"]&&localStorage.setItem(ur,"no");const a=function(e){const t=yr()||((e,t,n)=>{const r=Na[e];let i;r&&(i=localStorage.getItem(r))?n(JSON.parse(i),!0):yr().a.push([e,t,n])});return(e=>{__webpack_require__.g.__uspapi=e})(t),t.a=t.a||[],t}();switch(La(),a("onUpdate",null,(async(e,n)=>{if(r("onUpdate",e),n){vr()&&localStorage.setItem(ur,e?"yes":"no");const n=(await La()).find((e=>e.getUSPData));r("consentData",n);const i=n&&n.getUSPData;if(i){const n={...i,hasConsent:e};r("cmp updated",n),t.emit("cmp updated",n)}}})),vr()&&pr("onDissent").then((async()=>{r("user dissented"),localStorage.setItem(ur,"no"),await La()&&__webpack_require__.g.location.reload()})),(async e=>{var t;let n=e("ccpa.scriptBaseUrl");if(r=(e=>{const t=document.createElement("a");return t.href=e,t})(n).hostname,!Boolean(Ra.find((e=>r.endsWith(e)))))throw new Error(`CMP script base "${n}" is not allowed.`);var r;(je.s$||je.JW)&&(n=n.replace(/^https?:/,""));const i=document.createElement("script"),o=e("cmp.isEmbeddedVideo",!1);if(o){const e=".vjs-flyout-wrapper-fixed .vjs-video-container";await Promise.race([(0,Ut.elementReady)(e,4500),(0,He.Vs)(4e3)]),i.dataset.renderIn=e,i.dataset.renderVideo=!0}else i.dataset.render=!0;null!==(t=__webpack_require__.g.PageCriteria)&&void 0!==t&&t.region&&(i.dataset.region=__webpack_require__.g.PageCriteria.region);const a=e("cmp.renderConfig");a&&(i.dataset.renderConfig=JSON.stringify(a));const s=e("ccpa.version");n=s?`${n}/${s}`:n,i.dataset.gvlUiVersion=e("ccpa.gvlUiVersion",186),i.dataset.cvlUiVersion=e("ccpa.cvlUiVersion",1),i.dataset.nrvUiVersion=e("ccpa.nrvUiVersion",1),i.dataset.vendorListBaseUrl=e("ccpa.nrvUiVersion","//cmp.dmgmediaprivacy.co.uk"),i.dataset.i18nVersion=e("ccpa.i18nVersion",7),i.dataset.backendBaseUrl=e("ccpa.backendBaseUrl","//cmp.dmgmediaprivacy.co.uk"),i.id="mol-ads-cmp",i.src=`${n}/iife/mol-ads-cmp.js`;const d=document.createElement("link"),c=document.head.querySelector('link[rel="stylesheet"]')||document.head.lastChild,l=(()=>{switch(!0){case o:return"video";case Ma:return"mobile";default:return"desktop"}})();d.setAttribute("rel","stylesheet"),d.setAttribute("href",`${n}/css/${l}.css`),document.head.insertBefore(d,c),document.head.appendChild(i)})(n),(async()=>{const[e,t]=await Promise.all([fr(),hr()]);t?localStorage.setItem(ur,e?"yes":"no"):localStorage.removeItem(ur)})(),localStorage.getItem(ur)){case"yes":break;case"no":r("user dissented..."),i(o);break;default:vr()&&await Ua(t,n,i,o)}yr()("onReset",null,(()=>{localStorage.removeItem(ur)}))};ja.isAdsFreeSupported=!0;const Ba=!!localStorage.getItem(Na.getUSPData),qa={ccpa:{enabledIfDissent:!0},init:async function(e){let{broker:t,getConfig:n,log:r,registerPluginBouncer:i}=e;gr()&&(!Ba&&r("provisional insufficient"),await ja({broker:t,getConfig:n,log:r,registerPluginBouncer:i}),r("ccpa loaded"))},run:async function(e){let{broker:t,log:n}=e;if(!yr())return;const r={gdpr:"0",cmp:"ccpa"},i=t.until("gpt initialized"),o=e=>{const n=e.hasConsent,o={...r,us_privacy:e.uspString,consent:n},a=n||!_r()?0:1,s=1===a?{...o,rdp:a}:o;t.emit("set page level targeting",s);const d={cust_params:{...o},rdp:a};t.emit("sync video tags update",d),Va(n,i)};t.on("cmp updated",(async e=>{n("user consentData updated",e),o(e)})),t.on("openCmpBanner",(()=>__webpack_require__.g.__uspapi.a.push(["openSettings"]))),t.register("check vendor consent",(async()=>({isConsented:_r()?br():!vr()||"1YNN"===(await pr("getUSPData")).uspString})));try{const e=await pr("getUSPData"),t=br();n("setting initial user consentData",e,t),o({...e,hasConsent:t})}catch(e){console.error("[mol-ads]: There was a problem fetching consent data")}window.__uspapi&&je.queryParams.privacy&&((0,je.WH)("privacy"),window.__uspapi.a.push(["openSettings"])),__webpack_require__.g.openCcpaUi=()=>{window.__uspapi.a.push(["openSettings"])}},isAdsFreeSupported:!0},Fa=Ba?qa:{...qa,initTimeout:zn.RD};(0,Yt.fo)("cmp",Fa);const Va=async(e,t)=>{if(!e&&_r()){const e=await t,n=e&&e[0];n&&n.pubads().setPrivacySettings({restrictDataProcessing:!0})}};function za(e){let{broker:t}=e;__webpack_require__.g.__promised_cmp=new Promise(((e,n)=>{t.on("plugins enabled",(t=>{if(!__webpack_require__.g.__cmp)return e();__webpack_require__.g.__cmp("hasChoiceBeenMade",null,((t,r)=>{if(!r)return n(new Error("hasChoiceBeenMade failed"));t?__webpack_require__.g.__cmp("hasConsentedToAll",null,((t,r)=>{if(!r)return n(new Error("hasConsentedToAll failed"));e(t)})):__webpack_require__.g.__cmp("onUpdate",null,((t,r)=>{if(!r)return n(new Error("onUpdate failed"));e(t)}))}))}))})),__webpack_require__.g.postMessage("__promised_cmp:available","*")}function Wa(){}za.isAdsFreeSupported=!0,za.ccpa={enabledIfDissent:!0};const Ha="home ushome auhome".split(" "),Za=()=>/(\?|&)ito=taboola/.test(window.location.search),$a=(0,y.x)("Delayer");Wa.pluginSetup=async e=>{let{broker:t,setConfig:n}=e;const r=!_r(),i=je.cj,o=PageCriteria.isMobile,a=navigator.cookieEnabled,s="channel"===PageCriteria.pageType,d=Ha.includes(PageCriteria.channel),c=vr()&&mr();if($a("Initializing:",{newCmpUser:r,ios:i,ccpa:c,mobile:o,cookieEnabled:a,channel:s,home:d}),!(r&&i&&c&&o&&a&&s&&d))return void $a("Not delaying");$a("Possible");const l=(0,je.ej)("mol-home");if($a("Cookie:",l),$a("Taboola:",Za()),l||Za())$a("Not delaying");else{$a("Active"),n("pluginManager.setupTimeout",6e5),$a("Change timeout to 10 minutes");try{await new Promise(((e,t)=>{let n=!1;const r=Date.now(),i=()=>{if(document.querySelector("#homePageCover"))n||$a("homePageCover detected"),n=!0;else{if(n)return $a("homePageCover closed"),e();{const e=Date.now()-r;if(e>5e3)return $a("homePageCover never showed up after",e),t(new Error(`homePageCover never showed up after ${e} ms`))}}setTimeout(i,200)};i()}))}catch(e){t.register("call for page analytics",(()=>({missingHomePageCover:!0})))}}},Wa.isAdsFreeSupported=!0,Wa.ccpa={enabledIfDissent:!0};const Ga="__ads_cmp_reprompt",Ka=(0,y.x)("cmp-reprompt");function Xa(e){let{getConfig:t}=e;if(!wr())return void Ka("Not in GDPR jurisdiction, bailing");const n=t("cmp.reprompt",{version:0,chance:0});Ka("Goal:",n);const r=localStorage.getItem(Ga),i=r&&JSON.parse(r)||{version:0,chance:Math.random()},o=()=>{Ka("Saving config"),localStorage.setItem(Ga,JSON.stringify(i))};Ka("Current:",i),i.version<n.version&&i.chance<n.chance?(Ka("Resetting CMP cookie"),yr()("reset",null,((e,t)=>{t?(Ka("Cookie removed"),i.version=n.version,i.ts=(new Date).toISOString(),o()):Ka("Failed resetting CMP")}))):r||o()}function Ja(e){let{broker:t}=e;if(!gr())return;const n={"overlay accepted":DM.molFeTracking.pageEvents.GDPR_OVERLAY_ACCEPTED,"overlay open settings":DM.molFeTracking.pageEvents.GDPR_OVERLAY_PRIVACY,"overlay displayed":DM.molFeTracking.pageEvents.GDPR_OVERLAY_DISPLAYED,"settings functional tab clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_FUNCTION_TAB_CLICKED,"settings advertising tab clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_ADVERTISING_TAB_CLICKED,"settings functional panel advertising link clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_ADVERTISING_LINK_CLICKED,"settings functional panel policy link clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_POLICY_LINK_CLICKED,"settings advertising panel policy link clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_POLICY_LINK_CLICKED,"settings advertising panel disallow":DM.molFeTracking.pageEvents.GDPR_SETTINGS_DISALLOW_ADVERTISING_PARTNERS,"settings advertising panel disallow confirmed":DM.molFeTracking.pageEvents.GDPR_SETTINGS_CONFIRMATION_DISALLOW,"settings advertising panel disallow declined":DM.molFeTracking.pageEvents.GDPR_SETTINGS_CONFIRMATION_ALLOW,"settings functional panel allow all":DM.molFeTracking.pageEvents.GDPR_SETTINGS_FUNCTION_ALLOW_ALL,"settings advertising panel allow all":DM.molFeTracking.pageEvents.GDPR_SETTINGS_ADVERTISING_ALLOW_ALL,"site clicked":DM.molFeTracking.pageEvents.GDPR_OVERLAY_ACCEPT_BY_CLICK_SITE};__webpack_require__.g.addEventListener("message",(e=>{let{data:t}=e;if(!t||"function"!=typeof t.startsWith)return;if(!t.startsWith("__cmp_ui_tracking\n"))return;const r=t.substring(18),i=n[r];i?DM.molFeTracking.pageEvents.publish(i):console.warn("Unknown CMP UI Tracking event:",r)}),!1),t.on("extra cmp ui tracking event",(e=>DM.molFeTracking.pageEvents.publish(n[e])))}Xa.isAdsFreeSupported=!0,Xa.ccpa={enabledIfDissent:!0},Ja.isAdsFreeSupported=!0,Ja.ccpa={enabledIfDissent:!0},(0,Yt.fo)("permutive.vault",{run:async function(e){let{broker:t,log:n}=e;n("waiting for permutive..."),await t.until("permutive ready"),n("starting");const r=(0,je.ej)("permutive-id");if(!r)return void n("no permutive id found");if(!DM.isLoggedIn||!DM.userId)return void n("not logged in");const i=localStorage.getItem("mol.ads.lkui"),o=DM.userId;if(o!==i){n("userId changed",{lastKnownUserId:i,newUserId:o});const e=await fetch("/registration/p/external-references/v1",{method:"PUT",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({vendor:"permutive",id:r})});202===e.status?(localStorage.setItem("mol.ads.lkui",o),n("updated permutive id:",r)):n.warn("failed sending external reference:",e.status,e.statusText)}else n("userId unchanged",o)},purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[361]}});const Ya=(0,y.x)("permutive"),Qa=(0,J.ri)(((e,t,n)=>(e=>{let{broker:t,getConfig:n,pageMeta:r}=e;return new Promise((async e=>{if(!__webpack_require__.g.permutive){const e=n("plugins.permutive.projectId","5f42864d-a421-4f37-9478-00266f871d68"),i=n("plugins.permutive.webScriptSrc","https://5f42864d-a421-4f37-9478-00266f871d68.edge.permutive.app/{{WORKSPACE_ID}}-web.js"),o=n("plugins.permutive.delayedInitialisation",!1);await(async e=>{let{broker:t,getConfig:n,delayedInitialisation:r,pageMeta:i}=e;Ya("initializing");const o=n("plugins.permutive.projectId","5f42864d-a421-4f37-9478-00266f871d68"),a=n("plugins.permutive.publisherUserId","TheDailyMail"),s=n("plugins.permutive.apiKey","ed45e86d-a09e-4d2b-85c0-fbbd6857373e"),d=n("plugins.permutive.environment","production"),c=n("plugins.permutive.eventsCacheLimitBytes",25e5),l=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];u.q.push({functionName:e,arguments:n})},u=__webpack_require__.g.permutive={config:{apiKey:s,environment:d,projectId:o,eventsCacheLimitBytes:c,delayedInitialisation:r,viewId:__webpack_require__.g.PageCriteria&&__webpack_require__.g.PageCriteria.pageViewId||(0,zn.kb)()},q:[],addon:l("addon"),consent:l("consent"),identify:l("identify"),on:l("on"),once:l("once"),query:l("query"),ready:l("ready"),segment:l("segment"),segments:l("segments"),track:l("track"),trigger:l("trigger"),user:l("user"),init:l("init")};u.ready((()=>t.emit("permutive ready"))),t.on("track in permutive",(async(e,t)=>{Ya("track:",e,t),__webpack_require__.g.permutive.track(e,t)}));const p=n("plugins.permutive.dependenciesTimeout",2e3),f=t.invokeAll({message:["dmp","admantx"],timeout:p}).then((e=>{let[t]=e;return{page:{admants:t}}})),h=__webpack_require__.g.RTA&&__webpack_require__.g.RTA.ids&&__webpack_require__.g.RTA.ids.then((e=>({user:{id:e.user,status:"logged out"}})))||{},g=(0,He.yq)(p,h),m=await Promise.all([f,g]),{contentType:v,topics:y,articleId:b,articleTitle:_,authorsShortNames:w,...T}=i||{},I=qe()({page:{type:v,tags:y,article:{id:b,title:_,authors:w,categories:T.channel?[T.channel.substr(1)]:void 0,publishedAt:T.publishedDate&&T.publishedDate.toISOString()||void 0,modifiedAt:T.updatedDate&&T.updatedDate.toISOString()||void 0}}},...m);if(Ya("web context:",I),I.user){const e={id:I.user.id,tag:a};Ya("identity:",e),__webpack_require__.g.permutive.identify([e])}__webpack_require__.g.permutive.addon("web",I)})({broker:t,getConfig:n,delayedInitialisation:o,pageMeta:r}),await t.invoke("import script",i.replace("{{WORKSPACE_ID}}",e)),o&&__webpack_require__.g.permutive.init()}e()}))})({broker:e,getConfig:t,pageMeta:n}))),es=()=>JSON.parse(__webpack_require__.g.localStorage.getItem("_pdfps")||"[]");async function ts(e){let{broker:t,getConfig:n,pageMeta:r}=e;const i=Qa(t,n,r);if(window.localStorage.getItem("permutive-id")){const e=window.localStorage.getItem("permutive-id");t.emit("external user ids",{permutive:e}),t.emit("sync userId","permutive",e,location.hostname)}else i.then((()=>{const e=window.localStorage.getItem("permutive-id");t.emit("external user ids",{permutive:e}),t.emit("sync userId","permutive",e,location.hostname)}));t.emit("set page level targeting",i.then((()=>{const e=window.localStorage.getItem("permutive-id"),t=__webpack_require__.g.permutive.config.viewId;let n={permutive:es(),pvid:t};return e&&(n={...n,puid:e,ptime:Date.now().toString()}),n})))}async function ns(e){let{broker:t,getConfig:n,pageMeta:r}=e;const i=DM&&DM.pageEvents,o=(0,y.x)("permutive");if(!i)return;const a=Qa(t,n,r),s={},d={};let c=1;await a;const l=e=>{const t=e.videoId,n={...s[t]};e.ratio>0&&(n.progress=e.ratio,o(`Sending VideoProgress Event, id: ${t}`,n),__webpack_require__.g.permutive.track("VideoProgress",n))},u=e=>{const t=e.videoId,n=e.adImpression,r=n.adWrapperSystems&&Object.fromEntries(n.adWrapperSystems.map(((e,t)=>[e,n.adWrapperIds[t]])))||[],i=r.GDFP,a={id:i&&String(i)||void 0,advertiserName:n.advertiserName,creativeId:String(n.creativeId),deal_id:String(n.dealId)};d[t]=a;const c={...s[t],ad:a};o(`Sending VideoAdPlay Event, id: ${t}`,c),__webpack_require__.g.permutive.track("VideoAdPlay",c)},p={[i.VIDEO_DATA_READY]:e=>{const t=e.videoId;s[t]=((e,t)=>{const{title:n,referenceId:r,autoplay:i}=e;return{video:{name:n,id:String(r)},autoStart:i,playId:t}})(e,String(c)),o(`videoDataReady Event, id: ${t}`,s[t]),c++},[i.VIDEO_CONTENT_STARTED]:e=>{let{videoId:t}=e;const n=s[t];o(`Sending VideoPlay Event, id: ${t}`,n),__webpack_require__.g.permutive.track("VideoPlay",n)},[i.VIDEO_PROGRESS]:l,[i.VIDEO_ADVERT_IMPRESSION]:u,[i.VIDEO_ADVERT_COMPLETED]:e=>{let{videoId:t}=e;const n={...s[t],ad:{...d[t]}};o(`Sending VideoAdComplete Event, id: ${t}`,n),__webpack_require__.g.permutive.track("VideoAdComplete",n),delete d[t]},[i.VIDEO_CONTENT_COMPLETED]:e=>{e={...e,ratio:1},l(e),delete s[e.videoId]}};Object.entries(p).forEach((e=>{let[n,r]=e;o("Registering",`video page event ${n}`),t.on(`video page event ${n}`,((e,t)=>{r(t)}))})),t.on("video.ad-impression",u)}function rs(e){let{broker:t,getConfig:n}=e;const r=n("plugins.permutive.projectId","5f42864d-a421-4f37-9478-00266f871d68"),i=n("plugins.permutive.indexedDBVersion",2),o=new Promise((e=>{const t=indexedDB.open(r,i);t.onsuccess=async()=>{const n=t.result,r=await Promise.all(Object.values(n.objectStoreNames).map((e=>{const t=n.transaction(e,"readonly").objectStore(e).getAll();return new Promise((e=>{t.onsuccess=()=>{const n=t.result.reduce(((e,t)=>t.byteLength?e+t.byteLength:t.length?e+t.length:e),0);e(n)}}))})));n.close(),e(r.reduce(((e,t)=>e+t),0))}}));t.register("call for page analytics",(async()=>({indexedDB:{permutive:await o}})))}ts.vendorIds={gdpr:[361]},ts.purposeIds={gdpr:"N/A"},ns.vendorIds={gdpr:[361]},ns.purposeIds={gdpr:"N/A"},rs.ccpa={enabledIfDissent:!0},rs.gdpr={enabledIfDissent:!0},(0,Yt.fo)("dmp.moat",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("dmp.moat.url","https://z.moatads.com/mailonlineprebidheader526476985912/moatheader.js");r("config:",{URL:i});const o=new Promise((e=>{__webpack_require__.g.moatYieldReady=()=>{r.enabled&&__webpack_require__.g.moatPrebidApi.enableLogging(),e(__webpack_require__.g.moatPrebidApi)}}));t.emit("set page level targeting",o.then((e=>{const t=e.getMoatTargetingForPage();return r("page targeting",t),t||{}}))),t.register("get tags",(async e=>{let{slot:t}=e;const n=(await o).getMoatTargetingForSlot(t.pos);return r({[t.pos]:n}),n||{}})),await t.invoke("import script",i)},vendorIds:{gdpr:[772]}});var is=__webpack_require__(8393);function os(e,t,n){return e.has(t)?e.get(t):n}function as(e,t,n){return function(e,t,n){return new Map(e).set(t,n)}(e,t,n(os(e,t)))}function ss(e,t){const n=new Map;for(const[r,i]of e)n.set(r,t(r,i));return n}function ds(e,t){return function(e,t){const n=new Map;for(const[r,i]of e)t(r)&&n.set(r,i);return n}(e,(e=>e!==t))}const cs=()=>{};class ls{constructor(e){this.callbacks=new Map,this.intersectionObserver=new IntersectionObserver(this._onIntersect.bind(this),e)}_onIntersect(e){e.forEach((e=>{(this.callbacks.get(e.target)||cs)(e,e.intersectionRatio>=Math.min(...this.intersectionObserver.thresholds))}))}observe(e,t){return this.callbacks.set(e,t),this.intersectionObserver.observe(e),()=>this.intersectionObserver.unobserve(e)}unobserve(e){this.callbacks.delete(e),this.intersectionObserver.unobserve(e)}}function us(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function ps(e){return e.playerState&&["contentWaiting","contentPlaying","adPlaying","adsWaiting","started"].includes(e.playerState.getStateName())}function fs(e,t){var n;return null===(n=os(e.molFeVideoPlayers,t,{}))||void 0===n?void 0:n.playing}function hs(e){return function(e,t){for(const[n,r]of e)if(t(0,r))return!0;return!1}(e,((e,t)=>{let{playing:n}=t;return!!n}))}function gs(){const{DM:e}=__webpack_require__.g,t=new Map;return e&&e.molFeVideoplayer&&e.molFeVideoplayer.forEachPlayer&&e.molFeVideoplayer.forEachPlayer((function(){const e=ps(this);t.set(this,{inView:us(this.el()),playing:e,shouldResume:e})})),t}function ms(e,t){return t.playing||e.seeking||t.mpuPlayerDisplayed?t:{...t,adInteraction:!1,playing:t.focused,shouldResume:!0,molFeVideoPlayers:ss(t.molFeVideoPlayers,((e,t)=>({...t,playing:!1,shouldResume:!1})))}}function vs(e,t){return!t.playing||e.seeking?t:{...t,playing:!1,shouldResume:!(t.focused&&!t.adInteraction)&&t.shouldResume}}function ys(e){var t,n,r;let{log:i,player:o}=e;null!==(t=o.ads)&&void 0!==t&&null!==(n=t.isInAdMode)&&void 0!==n&&n.call(t)&&null!==(r=o.ima)&&void 0!==r&&r.controller.sdkImpl.isAdPlaying()?(i.extend("ad")(""),o.ima.pauseAd()):(i.extend("player")(""),o.pause())}function bs(e,t){let{playing:n}=e;var r;n?ps(r=t)||r.play():function(e){ps(e)&&e.pause()}(t)}function _s(e){let{broker:t,getConfig:n,log:r,player:i,store:o}=e;const a=new xa.JT;a.add(function(e,t){const n=new xa.JT;return n.addEventListener(window,"blur",(()=>{const n=document.hasFocus();t("Blurred",{"has focus?":n}),n||e.dispatch({type:"blur"})})),n.addEventListener(document,"visibilitychange",(()=>{const{hidden:n}=document;t("Visibility change",{"hidden?":n}),n&&e.dispatch({type:"blur"})})),n.addEventListener(window,"focus",(()=>{setTimeout((()=>{e.dispatch({type:"focus"})}),100)})),()=>n.dispose()}(o,r.extend("window"))),a.add(function(e,t,n){const{DM:r}=__webpack_require__.g;if(!r)return n("no mol-fe video players"),()=>{};const i=new ls({threshold:.5}),o=new xa.JT;return r.later("videoplayer-ready",(()=>{function a(e){n("setupHandlers",e);const r=o.on(e,"play",(()=>{t.dispatch({type:"playMolFeVideoPlayer",molFeVideoPlayer:e})})),i=o.on(e,"pause",(()=>{t.dispatch({type:"pauseMolFeVideoPlayer",molFeVideoPlayer:e})}));e.on("dispose",(()=>{n("DISPOSING",e.id()),r(),i(),o.remove(r),o.remove(i),t.dispatch({type:"disposeMolFeVideoPlayer",molFeVideoPlayer:e})}))}r.molFeVideoplayer.forEachPlayer((function(){a(this),o.add(i.observe(this.el(),((e,n)=>{n?t.dispatch({type:"scrollMolFeVideoPlayerInToView",molFeVideoPlayer:this}):t.dispatch({type:"scrollMolFeVideoPlayerOutOfView",molFeVideoPlayer:this})})))})),n("molFeVideoPlayers Found",Object.keys(t.state.molFeVideoPlayers)),r.molFeVideoplayer.on("videoPlaying",(r=>{t.state.molFeVideoPlayers.has(r.player)||r.player.id()===e.id()||(n("new molFeVideoPlayer detected",r.player.id()),a(r.player),t.dispatch({type:"newMolFeVideoPlayerDetected",molFeVideoPlayer:r.player}))}))})),()=>o.dispose()}(i,o,r)),a.add(function(e,t,n){const r=new xa.JT;return r.on(e,"play",(function(){t.dispatch({type:"loading"})})),r.on(e,"playing",(function(){t.dispatch({type:"loaded"})})),r.on(e,"play/pause toggle",(function(){t.dispatch({type:"togglePlay",seeking:e.seeking()})})),r.on(e,"ads-manager",(e=>function(e,n){let{adsManager:r}=e;const{google:i}=__webpack_require__.g;t.dispatch({type:"startAdMode"}),r.addEventListener(i.ima.AdEvent.Type.CLICK,(()=>{!function(e){t.dispatch({type:"ad click"}),e.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"videoAdClicked"}})}(n)}))}(e,n))),r.on(e,"adstart",(function(){t.dispatch({type:"startAdMode"})})),r.on(e,"adend",i),r.on(e,"adskip",i),r.on(e,"ads-ad-started",(function(){t.dispatch({type:"adHasStarted"})})),()=>r.dispose();function i(){t.dispatch({type:"finishAdMode"})}}(i,o,t)),a.add(o.subscribe(((e,t)=>function(e,t,n,r){for(const[e,t]of r.molFeVideoPlayers)bs(t,e);!function(e,t,n){let{adMode:r,focused:i,playing:o}=n;o?function(e){var t,n;let{log:r,player:i}=e;i.ima&&null!==(t=i.ads)&&void 0!==t&&null!==(n=t.inAdBreak)&&void 0!==n&&n.call(t)?(r.extend("ad")(""),i.ima.resumeAd()):i.paused()&&(r.extend("player")(""),i.play())}({log:t,player:e}):i||o||!r?ys({log:t,player:e}):setTimeout((()=>ys({log:t,player:e})),300)}(e,t,r)}(i,r,0,t))));const{cancel:s}=t.on("display mpu_player",(()=>{o.dispatch({type:"displayMpuPlayer"})}));a.add(s);const{cancel:d}=t.on("destroy mpu_player",(()=>{o.dispatch({type:"destroyMpuPlayer"})}));a.add(d),i.on("dispose",(()=>a.dispose())),n("players.mediator.fullScreenOverlaySignalEnabled",!1)&&(t.on("fullScreenOverlayStarted",(()=>{o.dispatch({type:"fullScreenOverlayStarted"})})),t.on("fullScreenOverlayEnded",(()=>{o.dispatch({type:"fullScreenOverlayEnded"})})))}function ws(e){let{broker:t,getConfig:n,log:r}=e;const i=n("players.commercial.pauseOnBlur",!0);r("flyoutConfig",i);const o=async function(e){let{broker:t,getConfig:n,log:r}=e;const i=t.until("ad rendered","billboard");let o=n("players.chromeless.dmplayer.v3.delayBeforeStartPlayer",2e3);if(n("plugins.enabled").includes("chromelessWaitForBillboard")){const e=Date.now();await i;const t=Date.now()-e;o=t>o?0:o-t}r(`Waiting ${o}ms until I allow you to play`),await(0,He.Vs)(o)}({broker:t,getConfig:n,log:r}),a=function(e){let{log:t,pauseOnBlur:n}=e;return new is.Z(function(e){let{pauseOnBlur:t}=e;return(e,n)=>{let r,i;switch(e.type){case"ad click":return{...n,adInteraction:!0,shouldResume:!0};case"blur":return n.focused?{...n,focused:!1,playing:!t&&n.playing,molFeVideoPlayers:ss(n.molFeVideoPlayers,((e,n)=>({...n,playing:!t&&n.playing})))}:n;case"focus":return n.focused?n:(r=ss(n.molFeVideoPlayers,((e,t)=>({...t,playing:t.inView&&t.shouldResume&&!n.hasFullScreenOverlay}))),{...n,adInteraction:!1,focused:!0,molFeVideoPlayers:r,playing:n.shouldResume&&!hs(r)&&!n.mpuPlayerDisplayed&&!n.hasFullScreenOverlay});case"play":return ms(e,n);case"pause":return vs(e,n);case"togglePlay":return n.playing?vs(e,n):ms(e,n);case"startAdMode":return n.adMode?n:{...n,adMode:!0,loading:!0};case"adHasStarted":return{...n,loading:!1};case"finishAdMode":return n.adMode?{...n,adInteraction:!1,adMode:!1,loading:!1}:n;case"loading":return n.loading?n:{...n,loading:!0};case"loaded":return n.loading?{...n,loading:!1}:n;case"scrollMolFeVideoPlayerInToView":return r=as(n.molFeVideoPlayers,e.molFeVideoPlayer,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,inView:!0,playing:n.focused&&e.shouldResume&&!n.hasFullScreenOverlay}})),{...n,molFeVideoPlayers:r,playing:n.focused&&n.playing&&!hs(r)&&!n.hasFullScreenOverlay,shouldResume:n.focused&&!n.hasFullScreenOverlay?n.playing:n.shouldResume};case"scrollMolFeVideoPlayerOutOfView":return r=as(n.molFeVideoPlayers,e.molFeVideoPlayer,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,inView:!1,playing:!1,shouldResume:n.focused&&!n.hasFullScreenOverlay?e.playing:e.shouldResume}})),{...n,molFeVideoPlayers:r,playing:n.focused&&n.shouldResume&&!hs(r)&&!n.hasFullScreenOverlay};case"playMolFeVideoPlayer":return fs(n,e.molFeVideoPlayer)?n:{...n,playing:!1,shouldResume:n.playing||n.mpuPlayerDisplayed,molFeVideoPlayers:as(n.molFeVideoPlayers,e.molFeVideoPlayer,(function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},playing:!0,shouldResume:!0}}))};case"pauseMolFeVideoPlayer":return fs(n,e.molFeVideoPlayer)?{...n,playing:n.shouldResume,molFeVideoPlayers:as(n.molFeVideoPlayers,e.molFeVideoPlayer,(function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},playing:!1,shouldResume:!1}}))}:n;case"newMolFeVideoPlayerDetected":return i=n.focused&&ps(e.molFeVideoPlayer),r=n.molFeVideoPlayers.set(e.molFeVideoPlayer,{inView:us(e.molFeVideoPlayer.el()),playing:i,shouldResume:i}),{...n,playing:n.focused&&!hs(r),shouldResume:n.focused?n.playing:n.shouldResume,molFeVideoPlayers:r};case"disposeMolFeVideoPlayer":return{...n,molFeVideoPlayers:ds(n.molFeVideoPlayers,e.molFeVideoPlayer),playing:!0,shouldResume:!0};case"displayMpuPlayer":return{...n,mpuPlayerDisplayed:!0,playing:!1};case"destroyMpuPlayer":return{...n,mpuPlayerDisplayed:!1,playing:n.shouldResume&&n.focused&&!hs(n.molFeVideoPlayers)};case"fullScreenOverlayStarted":return n.hasFullScreenOverlay?n:{...n,hasFullScreenOverlay:!0,playing:!1,molFeVideoPlayers:ss(n.molFeVideoPlayers,((e,t)=>({...t,playing:!1})))};case"fullScreenOverlayEnded":return n.hasFullScreenOverlay?(r=ss(n.molFeVideoPlayers,((e,t)=>({...t,playing:t.inView&&t.shouldResume}))),{...n,hasFullScreenOverlay:!1,molFeVideoPlayers:r,playing:n.shouldResume&&!hs(r)&&!n.mpuPlayerDisplayed}):n;case"__INIT__":return{adInteraction:!1,adMode:!1,focused:document.hasFocus(),loading:!1,playing:document.hasFocus(),shouldResume:!0,molFeVideoPlayers:gs(),mpuPlayerDisplayed:!1,hasFullScreenOverlay:!1};default:return n}}}({pauseOnBlur:n}),{adInteraction:!1,adMode:!1,focused:!1,loading:!1,playing:!1,shouldResume:!1,molFeVideoPlayers:new Map,mpuPlayerDisplayed:!1,hasFullScreenOverlay:!1},t)}({log:r.extend("store"),pauseOnBlur:i});return e=>{_s({broker:t,getConfig:n,log:r,player:e,store:a}),r("init store"),o.then((()=>a.init()))}}function Ts(e){let t=0;return(0,Ut.walk)(e,(e=>!e.previousSibling),(e=>{var n;const r=e.previousElementSibling;return null!=r&&null!==(n=r.classList)&&void 0!==n&&n.contains("mol-para-with-font")&&t++,r})),t}(0,Yt.fo)("players.onlyOneActivePlayer",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){const t=ws(e);e.broker.on("chromeless player ready",(n=>{var r;n.el()._player=n,delete n.el().player;const i=null!==(r=e.win.MobileUtils)&&void 0!==r&&r.isMobile()?"touchend":"click";n.on(i,(e=>{e.target.classList.contains("vjs-play-control")&&n.trigger("play/pause toggle")})),t(n)}))}}),(0,Yt.fo)("performPlayer",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[323]},async run(e){let{broker:t,doc:n,getConfig:r,log:i,ownName:o,win:a}=e;const s=r("performplayer",{enabled:!1,related:{enabled:!1}});if(i("config:",s),!s.enabled)return void i("turned off via config, bailing");const d=t.until("dom ready");t.register("placement requests",(async()=>{await d;const e=function(e){const t=[];return n('.perform-player[data-tracking-id][data-related-player="true"]'),n('.perform-player[data-tracking-id]:not([data-related-player="true"])'),t;function n(n){const r=e.querySelector(n);r&&t.push(r)}}(n);return e.map((e=>(i("found player",e.dataset.trackingId),{broker:t,log:i,sourcePlugin:o,targetParagraphIndex:Ts(e),insertMethod:n=>{n.insertAdjacentElement("afterend",e),async function(e){const n=e.dataset.trackingId;let r=n;s.idOverride&&(i("overriding it with configured id:",s.idOverride),r=s.idOverride),await t.invoke("import script",`${s.url}#${r}`,{},a,(t=>e.insertAdjacentElement("afterend",t))),t.emit("new perform player",n,e)}(e).catch(i.error)}})))}))}});var Is=__webpack_require__(3334);(0,Yt.fo)("players.targeting",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("auction.maxTime",2e3),o={},a=go.KC(),s={broker:t,log:r,pageLevelTargetingStream:a,defaultTargetingCollectionTimeout:i};t.on("set page level targeting",(async e=>{const t=await e;t&&qe()(o,t),a.push(t)}));const d=Promise.race([t.until("configure and start prebid"),(0,He.Vs)(Ss)]),c=Promise.race([t.until("prebid ready"),(0,He.Vs)(Ss)]);t.on("collect video tags",(async(e,t)=>{const{getVideoTagsNum:n}=e,i=r.extend(`${n}-${e.pos}-${e.offset}`),a={...s,log:i};await Promise.race([d,c]);const l=Es(a,e),{pos:u,autoplay:p,offset:f,videoId:h}=l;i(`requesting video bid for ${u}, ${p?"autoplay":"ctp"}, offset: ${f}, videoId: ${h}`);const g=As(a,l);Object.keys(o).length&&(i("Dispatching known page level targeting:",o),t(null,{cust_params:{...o}})),l.cust_params&&t(null,{cust_params:l.cust_params}),function(e,t){e.on("data",(e=>{t(null,e)})).on("end",(()=>t(null,null)))}(g,((e,n)=>{t(e,n)}))})),t.on("start early video bid",(async e=>{await d;const t=Es(s,e),{pos:n,offset:i}=t,o=r.extend(`earlybid-${n}-${i}`);o("starting auction");const a=As({...s,log:o},t);ks[e.pos]=a}))}});const Ss=(0,v.U2)("players.targeting.prebidTimeout",1e3),ks={},Cs=(e,t,n)=>{const r=go.c(e,go.UI(t,(e=>({cust_params:e}))));return e.on("end",(()=>n("Bidders finished, disconnecting pageLevelTargetingStream"))),r.on("close",(()=>n("Auction ended, disconnecting pageLevelTargetingStream"))),r};function Es(e,t){return t.pos=t.pos||"video",t.timeout=t.timeout||e.defaultTargetingCollectionTimeout,"jwplayer"===t.pos&&(t.autoplay=!0,t.muted=!0),t.dfpPos=t.pos,t}function As(e,t){const{broker:n,log:r}=e,{pos:i,autoplay:o,offset:a}=t;if(ks[i]){r(`found stream for ${i}, ${o?"autoplay":"ctp"}, offset: ${a}`);const e=ks[i];return delete ks[i],n.emit("cached video bid consumed",i,o?"autoplay":"ctp"),e}return(()=>{const s=(0,Is.Z)();r(`creating bidStream for: ${i}, ${o?"autoplay":"ctp"}, offset: ${a}, auctionId: ${s}`),t.auctionId=s;const d=function(e,t){const{broker:n,pageLevelTargetingStream:r}=e,{pos:i,timeout:o}=t,a={slot:{pos:i},...t};n.emit("start bidding",i);const s=[];return s.push(n.openStream({message:["get video tags",a],timeout:o,controlHandler:e=>{let{type:t,...r}=e;return n.emit("auction event",i,t,r)}})),Cs(go.TS(s),r,e.log)}(e,t),[c,l]=go.Ju();return function(e,t,n,r,i){go.dE(go.hX(n,(e=>"object"==typeof e)),(r=>{r&&console.warn("video bidding ended with error:",r),e.emit("auction event",t,"end"),e.emit("video bidding ended",t,i),n.destroy()})).pipe(r)}(n,i,d,l,s),c})()}const Ps=e=>{!function(e){let{broker:t,getConfig:n,log:r}=e;const i="androidMobile"===__webpack_require__.g.PageCriteria.device||"iphone"===__webpack_require__.g.PageCriteria.device;if(!__webpack_require__.g.PageCriteria.containsVideo&&!__webpack_require__.g.document.querySelector('meta[property="og:video"]'))return;const o=n("plugins.slots.video.v2.pageLoadTimeout",4e3),a=n("plugins.slots.video.v2.videoAdServerUrl_",`http://pubads.g.doubleclick.net/gampad/ads?sz=[size]&iu=%2F5765%2Fdm.video%2Fdm_video_news_apfa&ciu_szs=' +\n    '&impl=s&gdfp_req=1&env=vp&output=xml_vast3&unviewed_position_start=1&url=${encodeURIComponent(`${location.protocol}//${location.hostname}${location.pathname}`)}&correlator=[timestamp]`),[s,d]=n("plugins.slots.video.v2.mediaTypes.video.playerSize",[640,360]),c=()=>{const e=document.createElement("div");e.style.visibility="hidden";const n=document.createElement("video");n.setAttribute("muted","muted"),n.setAttribute("width",s),n.setAttribute("height",s),e.id="playerDiv_x",e.appendChild(n),document.body.appendChild(e);const c={pos:"video",articleURL:__webpack_require__.g.location.protocol+"//"+__webpack_require__.g.location.host+__webpack_require__.g.location.pathname,timeout:o,screen:{width:s,height:d},platform:"dmplayer",offset:0,videoAdServerUrl:a,autoplay:!1,excludeSpotX:!!i};r("start early video bid"),t.emit("start early video bid",c),setTimeout((()=>{document.body.removeChild(e)}),5e3)};t.on("cached video bid consumed","video","ctp",(()=>c())),t.on("plugins enabled",(()=>{__webpack_require__.g.DM.later("DOM_READY").then((()=>{r("trigger early bid"),c()}))}))}(e)},xs=Ps;function Os(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Ds(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ms(e,t,"get"))}function Rs(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ms(e,t,"set"),n),n}function Ms(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}Ps.ccpa={enabledIfDissent:!0},Ps.gdpr={enabledIfDissent:!0},Ps.disableIfNoAdsServable=!0,(0,Yt.fo)("slots.connatix",{disableIfNoAdsServable:!0,init:function(e){let{broker:t,getConfig:n,log:r,removePlugins:i,setConfig:o}=e;r("removing inread_player_top"),i(["slots.InreadPlayerTop"]);const a=n("slots.enabled",{});delete a.inread_player_top,o("slots.enabled",a);const s=n("slotDescription",{});delete s.inread_player_top,o("slotDescription",s);const d=n("slotDescriptions.initial",{});delete d.inread_player_top,o("slotDescriptions.initial",d),t.emit("set slots enabled",["inread_player_top"],!1)},purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,log:n,getConfig:r,pageCriteria:i,doc:o}=e;if("article"!==(null==i?void 0:i.pageType))return void n("Not suitable for PageCriteria.pageType:",null==i?void 0:i.pageType);const a={insertMethod:async e=>{var a;const[s,d]=r("pos.connatix.size",[480,410]),c=r("pos.connatix.playerId","29388c8f-d1e6-4485-be68-d4bdbf2f2b1f"),l=r("pos.connatix.cid","b418cd9a-a117-4f3a-b6bb-09c266cad464"),u=r("pos.connatix.script",`//cd.connatix.com/connatix.playspace.js?cid=${l}`),p=r("pos.connatix.trackingPixel",`//capi.connatix.com/tr/si?token=${c}&cid=${l}`),f=r("pos.connatix.loadIASVerificationPixel",!1),h=(0,zn.kb)(),g=e=>{e?n("Error:",e):(n("Rendered Successfully"),f&&t.emit("loadIASVerificationPixel",{cacheBuster:h,custom:c,document:o,width:s,height:d}))};__webpack_require__.g.cnxps||(__webpack_require__.g.cnxps={},__webpack_require__.g.cnxps.cmd=[],t.invoke("import script in iframe",{url:u}));const m=document.createElement("div");m.id=`ias-${h}`,n("slot id",m.id),m.className="connatix-placeholder";const v=i.isMobile&&!i.isTablet?m:(e=>{n("applying wrapper");const t=document.createElement("div");return t.classList.add("connatix-wrapper"),t.style.width=`${s}px`,t.style.height=`${d}px`,t.appendChild(e),t})(m);null===(a=e.parentElement)||void 0===a||a.insertBefore(v,e),(new Image).src=p,__webpack_require__.g.cnxps.cmd.push((async()=>{n("Library loaded"),t.register("call for page analytics",(()=>({connatix:!0}))),__webpack_require__.g.cnxps({playerId:c}).render(m.id,g)}))},log:n,margin:r("pos.connatix.margin",{top:30,bottom:60}),sourcePlugin:"connatix",targetParagraphIndex:r("pos.connatix.paragraphIndex",5)};t.register("placement requests",(()=>a))},vendorIds:{gdpr:[143]}});var Ns=new WeakMap,Us=new WeakMap,Ls=new WeakMap,js=new WeakMap;class Bs{constructor(e,t){Os(this,Ns,{writable:!0,value:void 0}),Os(this,Us,{writable:!0,value:void 0}),Os(this,Ls,{writable:!0,value:void 0}),Os(this,js,{writable:!0,value:void 0});const{bindTo:n=__webpack_require__.g,eventToListen:r="scroll"}=e||{};Rs(this,Ns,new Set([])),Rs(this,Us,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(0,J.FU)((()=>{if(!e.size)return;const t=window.pageYOffset+(0,Ut.getPageSize)()[3];for(const a of e){const[s,d]=a;n=s.element,r=s.offset,i=t,o=void 0,n&&"none"!==n.style.display&&i>=((null===(o=(0,Ut.getOffset)(n))||void 0===o?void 0:o.top)||0)-r&&(d(),e.delete(a))}var n,r,i,o}),t)}(Ds(this,Ns),t)),Rs(this,Ls,n),Rs(this,js,r),n.addEventListener(r,Ds(this,Us)),this.add=this.add.bind(this),this.dispose=this.dispose.bind(this)}add(e){Ds(this,Ns).add(e)}dispose(){Ds(this,Ls).removeEventListener(Ds(this,js),Ds(this,Us)),Ds(this,Ns).clear()}reset(){Ds(this,Ns).clear()}size(){return Ds(this,Ns).size}}function qs(e,t){return"lazy"===t.type&&function(e,t){let n=null;try{n="$this"===t.trigger?document.getElementById(e.id):document.querySelector(t.trigger)}catch(e){console.error("ads","Invalid css selector in the loading trigger:",t.trigger)}return{id:e.parentId||e.id,element:n||document.getElementById(e.parentId||e.id),offset:t.offset,slot:e}}(e,t)||void 0}function Fs(){return(0,je.ej)("mol-home")}const Vs=(0,J.ri)((function(e,t){return new Promise((n=>{const r=Fs();if(r)t("cookie read from storage",r),n(r);else{const r=e=>{i(),n(e)},{unsubscribe:i}=e.pageEvents.subscribe(e.pageEvents.MOBILE_HOME_PAGE_VIEW,(e=>(n,r)=>{if(!r.swipe&&!r.swipe){const n=Fs();t("user made mobile-home-page choice",n),n&&e(n)}})(r))}}))})),zs="hp-panel",Ws=["news","puff"];function Hs(e,t){const n="puff"===t?"dontmiss":__webpack_require__.g.adAreaId||"home";e.emit("set adSubareaId",n)}function Zs(e){return e.classList.contains(zs)}(0,Yt.fo)("slots.delayMount",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){const{log:t,...n}=e;(e=>{let{isHomepage:t,pageMeta:n}=e;return t&&"mobile"===n.renderPlatform})(e)?function(e){let{broker:t,DM:n,getConfig:r,log:i}=e;const o=new Map,a=r("slots.enabled",{}),s=Vs(n,i),d=function(e,t){return new Promise((n=>{e.once("dom ready",(async()=>{const r=Array.from(document.getElementsByClassName(zs)),i=await t,o=i&&{news:"news",showbiz:"puff"}[i],a=o&&r[Ws.indexOf(o)]||void 0;Hs(e,o),n([r,a])}))}))}(t,s),c="ontouchmove"in document?{bindTo:document.documentElement,eventToListen:"touchmove"}:{bindTo:__webpack_require__.g,eventToListen:"scroll"};i("using scrollEvent",c);const l=new Bs(c);let u;n.pageEvents.subscribe(n.pageEvents.MOBILE_HOME_PAGE_SWIPE,(async(e,n)=>{i(`${e} event received, user on ${n.label} panel`);const[r]=await d,a=r[Ws.indexOf(n.label)];!function(e){let{broker:t,log:n,loadTracking:r,newPanel:i,slots:o}=e;Hs(t,i),n("resetting loadTracking for panel:",i),r.reset();const a=[];o.forEach((e=>{let{slotDefinition:t,resolve:s,panelName:d,loadTrackingSettings:c}=e;if(d===i)if(c&&s){const e=()=>{o.set(t.id,{panelName:d,slotDefinition:t}),n(t.id," loadTrigger reached, resolving"),s()};n("adding loadTracking for",t.id),r.add([c,e])}else s?(n(t.id," resolving"),o.set(t.id,{panelName:d,slotDefinition:t}),s()):a.push([t.pos,t.id])}));const s=a.map((e=>{let[t]=e;return t})),d=a.map((e=>{let[,t]=e;return t}));s.length&&(n("refresh positions",s),t.emit("prepare to refresh ads",s),t.emit("refresh ads",{ids:d,positions:s,reason:"swipe"}))}({broker:t,log:i,loadTracking:l,newPanel:n.label,slots:o}),t.emit("panel updated",a,n.label)})),t.on("panel updated",(e=>{u=e})),d.then((e=>{let[,t]=e;u=t})),t.register("verify slot ready",(e=>function(e){let{currentPanel:t,enabledAds:n,loadTracking:r,log:i,pHomepageCookie:o,pPanelsRendered:a,slotDefinition:s,slots:d}=e;return new Promise((async e=>{await o;const[c,l]=await a;i("verifying slot",s.id);const u=document.getElementById(s.id),p=(0,Ut.closest)(u,Zs),f=Ws[c.indexOf(p)],h=t||l;i("panelName:",s.id,f,h);const g=qs(s,n[s.dfpPos||s.pos]);if(p&&p!==h)i(s.id," not in this panel: delaying"),d.set(s.id,{loadTrackingSettings:g,panelName:f,slotDefinition:s,resolve:e});else if(g){i(s.id," loadTracking",g);const t=()=>{d.set(s.id,{panelName:f,slotDefinition:s}),i(s.id," loadTrigger reached, resolving"),e()};r.add([g,t]),d.set(s.id,{loadTrackingSettings:g,panelName:f,slotDefinition:s,resolve:e})}else i(s.id," no loadTracking, resolving"),d.set(s.id,{panelName:f,slotDefinition:s}),e()}))}({currentPanel:u,enabledAds:a,loadTracking:l,log:i,pHomepageCookie:s,pPanelsRendered:d,slotDefinition:e,slots:o}))),((e,t)=>{let n="unset";t.then((e=>{n=e})),e.register("call for page analytics",(()=>({homepageCookie:n})))})(t,s),t.register("call for page-unload",(()=>{if(!l)return;let e=0;for(const t of o.values())t.resolve&&e++;return{sdm:e}}))}({...n,log:t.extend("mobileHomePage")}):function(e){let{broker:t,getConfig:n,log:r}=e;r("using default delay-mount");const i=n("slots.delayMount.checkInterval",500),o="ontouchmove"in document?{bindTo:document.documentElement,eventToListen:"touchmove"}:{bindTo:__webpack_require__.g,eventToListen:"scroll"};r("using scrollEvent",o);const a=new Bs(o,i),s=n("slots.enabled",{});t.register("verify slot ready",(e=>new Promise((t=>{const n=s[e.dfpPos||e.pos],i=qs(e,n);var o;i?(r(`delay mounting slot id: ${e.id}, pos: ${e.pos}, triggerId: ${null===(o=i.element)||void 0===o?void 0:o.id}, offset: ${i.offset}`),a.add([i,t])):(r("mounting slot",e.id,e.pos),t())})))),t.register("call for page-unload",(()=>a&&{sdm:a.size()}))}({...n,log:t.extend("default")})}});var $s=__webpack_require__(8147),Gs=__webpack_require__.n($s);(0,Yt.fo)("slots.minuteMedia",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[918]},async run(e){let{broker:t,getConfig:n,log:r,pageCriteria:i}=e;if(r("enabled"),"article"!==i.pageType)return void r("Not suitable for PageCriteria.pageType:",i.pageType);__webpack_require__.g.addEventListener("voltaxPlayerLoaded",(e=>{let{detail:n}=e;const r=n.playerName,i=__webpack_require__.g.voltax.getPlayersByName(r);t.emit("new minute media player",i[0])})),__webpack_require__.g.voltax&&__webpack_require__.g.voltax.getAllPlayersOnPage().forEach((e=>t.emit("new minute media player",e)));const o={insertMethod:async function(e){await async function(e){let{getConfig:t,log:n}=e;const r=t("pos.minuteMedia.tcfEventBarrier",!1);var i;r&&__webpack_require__.g.__tcfapi&&(n("waiting for TCF event",r),await(i=r,new Promise((e=>{__webpack_require__.g.__tcfapi("addEventListener",2,(t=>{i===t.eventStatus&&(__webpack_require__.g.__tcfapi("removeEventListener",2,(()=>{}),t.listenerId),e(t))}))}))),n("received TCF event",r))}({getConfig:n,log:r.extend("tcf")});const t=document.createElement("div");t.classList.add("minute-media-container");const i=document.createElement("div");i.classList.add("minute-media"),n("pos.minuteMedia.watermark",!0)&&i.classList.add("watermark"),t.appendChild(i),n("pos.minuteMedia.addLabel")&&i.classList.add("minute-media-label"),e.parentElement.insertBefore(t,e);const o=n("pos.minuteMedia.googleTagManagerId","GTM-PL4PD49"),a=`https://www.googletagmanager.com/gtm.js?id=${o}`,s=`https://www.googletagmanager.com/ns.html?id=${o}`;(0,Ut.createIframe)({content:Gs()({configScript:n("pos.minuteMedia.configScript","https://bucket1.mm-syringe.com/prod/configs/c4e65ff4-b385-d838-b9da-8cc3d8d9dfdb.js"),googleTagManagerScript:a,googleTagManagerIframeScript:s,injectorScript:n("pos.minuteMedia.injectorScript","https://bucket1.mm-syringe.com/prod/injector/injector.1.5.3.js")}),insertMethod:e=>i.appendChild(e),log:r.extend("")})},log:r,margin:n("pos.minuteMedia.margin",{top:30,bottom:60}),sourcePlugin:"minutemedia",targetParagraphIndex:n("pos.minuteMedia.paragraphIndex",4)};t.register("placement requests",(()=>o))}}),(0,Yt.fo)("slots.mpuComments",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r,pageMeta:i,pageCriteria:o}=e;if("mobile"!==i.renderPlatform||"article"!==o.pageType)return void r("mpu_comments not rendered on this page type, bailing");const a=n("slots.enabled",{}),s=Object.keys(a).filter((e=>e.startsWith("mpu_comments")));s.length?(t.on("slots initialized",(()=>{DM.later("bundle",(()=>DM.molFeComments&&DM.molFeComments.events.subscribe("loaded",(()=>{Xs=!0,Ks.clear();const e=function(e,t){const n=()=>{t("running cleanupHandler"),__webpack_require__.g.location.hash.match(/^#comments-\d+$/)||(Xs=!1,__webpack_require__.g.removeEventListener("hashchange",n),t("cleaning up slots"),Ks.forEach((n=>{t("destroying",n),e.emit("destroy slot",n)})))};return n}(t,r);__webpack_require__.g.addEventListener("hashchange",e),Js(t,s,n,r)}))))})),t.on("ad rendered",((e,n)=>{const i=n.slot.getSlotElementId();s.includes(i)&&(Xs?(r("ad rendered, id:",i),Ks.add(i)):(r("ad no longer in comments panel, destroying",i),t.emit("destroy slot",i)))}))):r("no mpu_comments positions enabled, bailing")}});const Ks=new Set;let Xs=!1;const Js=(e,t,n,r)=>{const i=n("slotDescription.mpu_comments.positions",[3,8]),o=document.querySelectorAll("#comments .comment"),a=o.length;t.filter(((e,t)=>i[t]<a)).forEach(((t,n)=>{r(`inserting ad, id: ${t}, in comment position ${i[n]}`),((e,t,n)=>{const r=e[n],i=(e=>{const t=document.createElement("div");t.id=e,t.className=`adHolder mpu molads_${e}`,t.appendChild(En());const n=document.createElement("li");return n.appendChild(t),n})(t);r.parentNode.insertBefore(i,r)})(o,t,i[n]),e.emit("slot mounted",{pos:t,id:t})}))};(0,Yt.fo)("slots.rendered",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t}=e;const n={};t.on("ad rendered",((e,r)=>{if("publisher_ads"===r.serviceName&&!r.isEmpty){const e=r.slot.molAd,t=e.type||"1x1",i=[e.pos,e.parentId,t].join("|");n[i]={pos:e.pos,id:e.parentId,sz:t,cid:r.creativeId,lid:r.lineItemId}}t.emit("ads rendered update",Object.values(n))}))}});const Ys=e=>{let t,n,{broker:r,getConfig:i}=e,{offsetBelowElement:o,triggerElementId:a}=i("plugins.slots.leaderTop",{offsetBelowElement:0,triggerElementId:"billBoard"});o=parseInt(o);const s=()=>{const e=document.getElementById(a);if(!e)return;const r=(0,Ut.getOffset)(e),i=(0,Ut.getElementComputedHeight)(e),s=(0,Ut.getOffset)(document.getElementById("page-container"));if(!t&&document.getElementById("smartBanner")){const e=document.getElementById("smartBanner").getElementsByTagName("a")[0];t=e.addEventListener("click",(n=>{e.removeEventListener("click",t),document.getElementById("leader_top").classList.remove("below-smart-banner")}))}n&&document.getElementById("leader_top").classList.add("styled"),__webpack_require__.g.scrollY<r.top+i-s.top+o?setTimeout((()=>{document.getElementById("leader_top").style.display="none"})):(document.getElementById("smartBanner")&&"block"===__webpack_require__.g.getComputedStyle(document.getElementById("smartBanner")).getPropertyValue("display")?document.getElementById("leader_top").classList.add("below-smart-banner"):document.getElementById("leader_top").classList.remove("below-smart-banner"),setTimeout((()=>{d&&(d(),d=void 0),document.getElementById("leader_top").style.display="block"})))};let d;r.intercept("slot ready for ad",((e,t)=>{let[n,r,i]=e;"leader_top"===r.pos?d=t:t()}));const c=document.createElement("div");r.once("slot defined",(()=>{c.id="leader_top",c.style.display="none",document.body.appendChild(c),r.emit("slot mounted",{pos:"leader_top"}),r.on("ad rendered","leader_top",(()=>{n=!0,s()})),r.on("dom ready",(()=>{s(),[1e3,2e3,3e3].forEach((e=>setTimeout(s,e))),document.addEventListener("scroll",__webpack_require__.g.DM.molFeMiniLodash.debounce(s,200),{passive:!0,capture:!0}),document.addEventListener("touchmove",__webpack_require__.g.DM.molFeMiniLodash.debounce(s,200),{passive:!0,capture:!0})}))}))};Ys.ccpa={enabledIfDissent:!0},Ys.gdpr={enabledIfDissent:!0},Ys.disableIfNoAdsServable=!0;const Qs=Ys,ed="puff_ad_others";function td(e){let{broker:t,getConfig:n}=e;if(n("plugins.slots.puffAdOthers.renderInfiniteList",{enabled:!1}).enabled){const e=n("slotDescriptions.initial")[ed],r=e&&(0,X.fb)(e.size);t.on("infinite-list append",(e=>{const i=r&&n("plugins.slots.puffAdOthers.addWatermark",!0);for(const n of e.getElementsByClassName("puff-ad-other"))i&&nd(n,r[0],r[1]),t.emit("slot mounted",{pos:ed,containerId:n.id})}))}}function nd(e,t,n){e.classList.remove("puff-ad");const r=document.createElement("div");r.classList.add("ad-exp-container"),r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="100%",r.style.clip=`rect(0,${t}px,${n}px,0)`;const i=document.createElement("div");i.classList.add("adHolder"),i.classList.add("puff-ad"),i.classList.add("watermark"),i.style.position="relative",i.style.width=`${t}px`,i.style.height=`${n}px`,i.appendChild(r);const o=e.parentNode;return o.parentNode.replaceChild(i,o),r.appendChild(e),i}td.ccpa={enabledIfDissent:!0},td.gdpr={enabledIfDissent:!0},td.disableIfNoAdsServable=!0;const rd={refreshCount:0};async function id(e){let{broker:t}=e;const n={};t.intercept("slot defined",((e,t)=>{let[r,{pos:i}]=e;n[i]=rd,t()})),t.on("destroy slot",(e=>{delete n[e]})),t.register("get tags",(e=>{let{slot:{pos:t}}=e;return[n[t]]})),t.register("get video tags",(e=>{let{slot:{pos:t}}=e;return{cust_params:{...n[t]||rd,player:t}}})),t.intercept("refresh ads",((e,t)=>{let[r,{positions:i,plugins:o,reason:a}]=e;try{i.forEach((e=>{n[e]={refresh:!0,refreshCount:n[e].refreshCount+1,refreshReason:a}}))}finally{t()}})),await t.until("dom ready");const r=__webpack_require__.g.DM&&__webpack_require__.g.DM.molFeTracking&&__webpack_require__.g.DM.molFeTracking.pageEvents;r&&r.subscribe("video.ad-impression",((e,t)=>{let{tag:r}=t;const i=(0,$n.Gi)(r),{cust_params:{player:o,refreshCount:a=0}}=i;n[o]={refresh:!0,refreshCount:Number(a)+1}})),t.on("video.ad-impression",(e=>{let{playerId:t}=e;const{refresh:r,refreshCount:i}=n[t]||{refresh:!0,refreshCount:0};n[t]={refresh:r,refreshCount:i+1}}))}id.ccpa={enabledIfDissent:!0},id.gdpr={enabledIfDissent:!0},id.disableIfNoAdsServable=!0;const od=2e3;function ad(){return document.querySelector(".billboard-container")}function sd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ad();return null==e?void 0:e.querySelector(".sticky-container")}function dd(){return document.querySelector("#billBoard")}async function cd(e){let t,n,r,i,o,{broker:a,timeAfterScroll:s,timeAfterVisible:d,minimumVisibilityPeriod:c=0,waitMinVisiblity:l=!1}=e;const u=new Promise((e=>{t=a.once("ad rendered","billboard",(()=>{const t={capture:!1,passive:!1};let n=()=>{null!==n&&(window.removeEventListener("scroll",n,t),n=null,setTimeout(e,s))};window.addEventListener("scroll",n,t)}))})),p=new Promise((e=>{n=a.on("slot visibility changed","billboard",(t=>{t.inViewPercentage>=50&&(n.cancel(),setTimeout(e,d))}))})),f=new Promise((e=>{r=a.on("slot visibility changed","billboard",(t=>{t.inViewPercentage>=50&&(r.cancel(),setTimeout(e,c))}))})),h=new Promise((e=>{i=a.once("disable force view when viewed","billboard",(async()=>{l&&await f,e()}))})),g=new Promise((e=>{o=a.once("disable sticky position","billboard",(()=>{e("sticky disabled")}))})),m=await Promise.race([u,p,h,g]);return t.cancel(),n.cancel(),r.cancel(),i.cancel(),o.cancel(),m}function ld(e,t,n){const r=dd();if(r){if(n.affix||(n.sticky?r.classList.add("sticky"):r.classList.remove("sticky")),"infinitly"===n.sticky)!function(e){const{height:t,billboardHeight:n,stickyContainer:r}=ud(document.body)||{};if(t&&n&&r)if(e.affix){const r=t-n,i=e.affix.getOffsets().startStickyOffset+r;e.affix.setOffsets({stopStickyOffset:i,stoppedPosition:r}),e.affix.started||e.affix.start()}else r.style.height=`${t}px`}(n);else if("limited"===n.sticky)!function(e){const{height:t,billboardHeight:n,stickyContainer:r}=ud(function(){const e=document.querySelector(".gamma"),t=document.querySelector(".lead-alpha"),n=t&&t.querySelector(".alpha"),r=n&&n.querySelector(".item"),i=t&&t.querySelector(".beta"),o=t&&t.querySelector(".sport"),a=t&&t.querySelector(".health"),s=t&&t.querySelector(".travel"),d=e=>{var t;return e&&((null===(t=(0,Ut.getOffset)(e))||void 0===t?void 0:t.top)||1/0)<od?e:null};return d(document.querySelector("#fff-hub-banner")||d(document.querySelector(".article-text h2"))||document.querySelector("#sciencetech #content h2")||document.querySelector(".author-container")||document.querySelector("#sciencetech, #arts, #you, #promotions, #tvshowbizheadlines, #food, #gardening, #femailblogs")&&(null==i?void 0:i.querySelector(".item:nth-child(1)"))||(null==e?void 0:e.querySelector(".tim-tools"))||(null==e?void 0:e.querySelector(".sport.item:nth-child(2)"))||(null==e?void 0:e.querySelector(".article-tri-headline h2"))||(null==n?void 0:n.querySelector(".article.article-tri-headline:nth-child(1) h2"))||(null==t?void 0:t.querySelector(".football-team-news .article.article-large h2"))||(null==o?void 0:o.querySelector(".article-large h2"))||(null==a?void 0:a.querySelector(".health-archive h2"))||(null==s?void 0:s.querySelector(".travel-banner h1"))||(null==i?void 0:i.querySelector(".item:nth-child(1) .puff ul li:nth-child(1)"))||(null==i?void 0:i.querySelector(".item:nth-child(1) .fff-hub .fff-search"))||(null==r?void 0:r.querySelector("h3:not(.usability)"))||(null==i?void 0:i.querySelector(".item:nth-child(2):not(.mpu_puff_wrapper)"))||(null==n?void 0:n.querySelector(".item h6"))||(null==i?void 0:i.querySelector(".item:nth-child(1)")))}())||{};if(t&&n&&r)if(e.affix&&t){const r=t-n,i=e.affix.getOffsets().startStickyOffset+r;e.affix.setOffsets({stopStickyOffset:i,stoppedPosition:r}),e.affix.started||e.affix.start()}else r.style.height=`${t}px`}(n);else{var i;null!=n&&null!==(i=n.affix)&&void 0!==i&&i.started&&n.affix.disable();const e=sd();e&&(e.style.height="100%")}if(n.closable?r.classList.add("closable"):r.classList.remove("closable"),"click close button"===t.type){const{DM:t}=__webpack_require__.g;t.pageEvents.publish(t.pageEvents.AD_BILLBOARD_CLOSED),e.emit("send event to bidmax",{type:"custom",payload:{userClosedBillboard:!0,refreshCount:n.refreshCount}})}!function(e){if(e.querySelector(".billboard-close"))return;const t=document.createElement("a"),n=document.createTextNode("Close x");t.href="#",t.classList.add("billboard-close"),t.appendChild(n),t.addEventListener("click",(e=>{e.preventDefault()})),e.appendChild(t)}(r)}}function ud(e){var t;if(!e)return void(null===(t=dd())||void 0===t||t.classList.remove("sticky"));const n=ad(),r=sd(n),i=dd();if(!n||!r||!i)return;const o=(0,Ut.getElementComputedHeight)(n),a=(0,Ut.getElementComputedHeight)(i),s=o+((0,Ut.getElementBottomOffset)(e)-(0,Ut.getElementBottomOffset)(n)),d=(o-a)/2;return{height:d>0?s-d:s,billboardHeight:a,stickyContainer:r}}function pd(e,t){switch(e.type){case"click close button":case"limit sticky height":return!1!==(null==t?void 0:t.closable)||"limited"!==(null==t?void 0:t.sticky)?{...t,closable:!1,sticky:"limited"}:t;case"infinitly stick":return"infinitly"!==(null==t?void 0:t.sticky)||(null==t?void 0:t.closable)!==!!e.closable?{...t,closable:!!e.closable,sticky:"infinitly"}:t;case"__DEINIT__":case"disable stickyness":return t.sticky?{...t,sticky:!1}:t;case"disable refresh":return t.refreshable?{...t,refreshable:!1}:t;case"refresh":return{...t,refreshCount:t.refreshCount+1};default:return t}}function fd(e,t){md(e,t),t.add(e)}function hd(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gd(e,t,n){md(e,t),t.set(e,n)}function md(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vd(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function yd(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,_d(e,t,"get"))}function bd(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,_d(e,t,"set"),n),n}function _d(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const wd="affix-off",Td="affix-on",Id=e=>{const t=window.getComputedStyle(e),n=parseInt(t.getPropertyValue("margin-left")),r=parseInt(t.getPropertyValue("margin-right")),i=parseInt(t.getPropertyValue("margin-top")),o=parseInt(t.getPropertyValue("margin-bottom")),a=parseInt(t.getPropertyValue("padding-left")),s=parseInt(t.getPropertyValue("padding-right")),d=parseInt(t.getPropertyValue("padding-top")),c=parseInt(t.getPropertyValue("padding-bottom")),l=(parseInt(t.getPropertyValue("border-left")),parseInt(t.getPropertyValue("border-right")),parseInt(t.getPropertyValue("border-top")),parseInt(t.getPropertyValue("border-bottom"))),u=e.getBoundingClientRect(),p={left:u.left-n,right:u.right-r-a-s,top:u.top-i,bottom:u.bottom-o-d-c-l,width:0,height:0};return p.width=p.right-p.left,p.height=p.bottom-p.top,p},Sd=()=>{};var kd=new WeakMap,Cd=new WeakMap,Ed=new WeakMap,Ad=new WeakMap,Pd=new WeakMap,xd=new WeakMap,Od=new WeakMap,Dd=new WeakMap,Rd=new WeakMap,Md=new WeakMap,Nd=new WeakMap,Ud=new WeakMap,Ld=new WeakMap,jd=new WeakSet,Bd=new WeakSet,qd=new WeakSet,Fd=new WeakSet,Vd=new WeakSet;class zd{constructor(e){let{element:t,log:n,onAffix:r,onUnfix:i,onStopfix:o,relativeHorizontalElement:a,startStickyOffset:s=0,stopStickyOffset:d=Number.MAX_SAFE_INTEGER,stoppedPosition:c}=e;fd(this,Vd),fd(this,Fd),fd(this,qd),fd(this,Bd),fd(this,jd),gd(this,kd,{writable:!0,value:void 0}),gd(this,Cd,{writable:!0,value:void 0}),gd(this,Ed,{writable:!0,value:void 0}),gd(this,Ad,{writable:!0,value:void 0}),gd(this,Pd,{writable:!0,value:void 0}),gd(this,xd,{writable:!0,value:void 0}),gd(this,Od,{writable:!0,value:void 0}),gd(this,Dd,{writable:!0,value:void 0}),gd(this,Rd,{writable:!0,value:void 0}),gd(this,Md,{writable:!0,value:void 0}),hd(this,"started",void 0),gd(this,Nd,{writable:!0,value:void 0}),gd(this,Ud,{writable:!0,value:void 0}),gd(this,Ld,{writable:!0,value:void 0}),hd(this,"disable",void 0),bd(this,kd,t),bd(this,Dd,n),bd(this,Cd,r||Sd),bd(this,Ed,i||Sd),bd(this,Ad,o||Sd),bd(this,xd,a||t),bd(this,Pd,Id(yd(this,xd)).left),bd(this,Od,"stopFix");const l=window.getComputedStyle(yd(this,kd),null);bd(this,Md,l.getPropertyValue("position")),bd(this,Rd,l.getPropertyValue("top")),bd(this,Nd,s),bd(this,Ud,d),bd(this,Ld,c||yd(this,Ud)),this.start=this.start.bind(this),this.setOffsets=this.setOffsets.bind(this),this.getOffsets=this.getOffsets.bind(this),this.started=!1,this.disable=Sd}start(){if(this.started)return;const e=vd(this,Fd,$d).bind(this),t=(0,J.FU)((()=>setTimeout(e)),200),n=vd(this,Vd,Gd).bind(this),r=(0,J.FU)(n,200);return this.disable=()=>{yd(this,Dd).call(this,"cancelling sticky",yd(this,kd)),bd(this,Od,"cancelled"),this.started=!1,vd(this,qd,Zd).call(this),document.removeEventListener("scroll",t),window.removeEventListener("resize",r)},this.disable.bind(this),document.addEventListener("scroll",t),window.addEventListener("resize",r),this.started=!0,this.disable}setOffsets(e){let{startStickyOffset:t,stopStickyOffset:n,stoppedPosition:r}=e;bd(this,Nd,t||yd(this,Nd)),bd(this,Ud,n||yd(this,Ud)),bd(this,Ld,r||yd(this,Ld)||yd(this,Ud)),vd(this,Fd,$d).call(this)}getOffsets(){return{startStickyOffset:yd(this,Nd),stopStickyOffset:yd(this,Ud),stoppedPosition:yd(this,Ld)}}}function Wd(){yd(this,kd).style.display="none",yd(this,kd).classList.remove(wd),yd(this,kd).classList.add(Td),yd(this,kd).style.left=yd(this,Pd)+"px",yd(this,kd).style.position="fixed",yd(this,kd).style.top="0",bd(this,Od,"affix"),yd(this,Cd).call(this),setTimeout((()=>{yd(this,kd).style.display="block"}))}function Hd(e){yd(this,kd).style.display="none",yd(this,kd).classList.remove(Td),yd(this,kd).classList.add(wd),yd(this,kd).style.left="auto",yd(this,kd).style.position="absolute",yd(this,kd).style.top=`${e}px`,yd(this,Ad).call(this),bd(this,Od,"stopFix"),setTimeout((()=>{yd(this,kd).style.display="block"}))}function Zd(){yd(this,kd).style.display="none",yd(this,kd).classList.remove(Td),yd(this,kd).classList.remove(wd),yd(this,kd).style.left="auto",yd(this,kd).style.position=yd(this,Md),yd(this,kd).style.top=yd(this,Rd),bd(this,Od,"unfix"),yd(this,Ed).call(this),setTimeout((()=>{yd(this,kd).style.display="block"}))}function $d(){if("cancelled"===yd(this,Od))return;const e=__webpack_require__.g.pageYOffset;yd(this,Ud)<e?"stopFix"!==yd(this,Od)&&(yd(this,Dd).call(this,"stop stickiness"),vd(this,Bd,Hd).call(this,yd(this,Ld))):yd(this,Nd)<e?"affix"!==yd(this,Od)&&(yd(this,Dd).call(this,"enabling stickiness"),vd(this,jd,Wd).call(this)):"unfix"!==yd(this,Od)&&(yd(this,Dd).call(this,"reseting element"),vd(this,qd,Zd).call(this))}function Gd(){const e=Id(yd(this,xd)).left;yd(this,Dd).call(this,"checkHorizontalPlacement triggered",yd(this,kd).id,e),bd(this,Pd,e),"fixed"===yd(this,kd).style.position&&(yd(this,Dd).call(this,"checkHorizontalPlacement",e),yd(this,kd).style.left=e+"px")}const Kd="billboard";(0,Yt.fo)("sticky.billboard",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},init(e){let{log:t,getConfig:n,setConfig:r}=e;const i=n("sticky.billboard.secondary",{}),o=i.minPageHeight||900,a=(0,je.ap)().height>=o,s=i.enabled&&a,d=n("sticky.billboard.forceView",!1);if(!s||!d)return r("sticky.billboard.secondary.enabled",!1),void t(`bailing; secondaryEnabled: ${i.enabled}, minHeightForSecondaryMet: ${a}, forceViewEnabled: ${d}`);const c=n("adsRefresh",{slots:[],activeViewSlots:[]}),l=c.slots||[],u=l.filter((e=>e!==Kd)),p=c.activeViewSlots||[],f=p.filter((e=>{let{pos:t}=e;return t!==Kd}));r("adsRefresh",{...c,slots:u,activeViewSlots:f});const h=l.find((e=>e===Kd)),g=p.find((e=>{let{pos:t}=e;return t===Kd}));h?r("sticky.billboard.secondary",{...i,activeView:!1,refreshInterval:c.interval}):g&&r("sticky.billboard.secondary",{...i,activeView:!0,refreshInterval:g.interval}),t("Updated refresh config",n("adsRefresh")),t("stickyBillboard config",n("sticky.billboard"))},async run(e){var t,n,r;let{broker:i,getConfig:o,log:a}=e;const s=await i.until("ad rendered","billboard"),d=null==s||null===(t=s[0])||void 0===t||null===(n=t.slot)||void 0===n||null===(r=n.molAd)||void 0===r?void 0:r.parentId;a("billboard rendered, id:",d);const c=document.getElementById(d);if(!c)return;const l=je.s$?{log:a.extend("store"),element:c,startStickyOffset:(0,je.r7)(c).top}:{log:a.extend("store")};c.classList.remove("sticky");const u=function(e){let{log:t,element:n,startStickyOffset:r}=e;const i={closable:!1,refreshable:!0,refreshCount:0,sticky:!1},o=n&&r?{...i,affix:new zd({element:n,relativeHorizontalElement:n.parentElement||void 0,onAffix:()=>n.setAttribute("stuck","stuck"),onUnfix:()=>n.removeAttribute("stuck"),log:t,startStickyOffset:r})}:i;return new is.Z(pd,o,t)}(l);u.subscribe(((e,t)=>ld(i,e,t))),u.init(),async function(e){var t;let{broker:n,getConfig:r,store:i}=e;n.once("unstick position","billboard",(()=>{i.deinit()})),n.on("disable force view when viewed","billboard",(()=>{i.dispatch({type:"limit sticky height"})})),n.on("disable sticky position","billboard",(()=>{i.dispatch({type:"disable stickyness"})})),n.on("stop refreshing ads",(()=>{i.dispatch({type:"disable refresh"})})),n.on("ad rendered","billboard",(()=>{i.dispatch({type:"refresh"})})),null===(t=dd())||void 0===t||t.addEventListener("click",(e=>{e.target instanceof HTMLElement&&e.target.classList.contains("billboard-close")&&i.dispatch({type:"click close button"})})),"sticky disabled"!==await async function(e){let{broker:t,getConfig:n,store:r}=e;const{forceView:i,timeAfterScroll:o=5e3,timeAfterVisible:a=3e3,minimumVisibilityPeriod:s=3e3}=n("sticky.billboard",{});if(!i)return;r.dispatch({type:"infinitly stick"});const d=await cd({broker:t,timeAfterScroll:o,timeAfterVisible:a,minimumVisibilityPeriod:s,waitMinVisiblity:!0});return"sticky disabled"!==d&&r.dispatch({type:"limit sticky height"}),d}({broker:n,getConfig:r,store:i})&&"sticky disabled"!==await async function(e){let{broker:t,getConfig:n,store:r}=e;const{enabled:i,initialRefresh:o=5e3,refreshInterval:a,displayDuration:s=3e3,activeView:d=!0}=n("sticky.billboard.secondary",{});if(!i)return;const c=new Promise((async e=>{await t.until("disable sticky position","billboard"),e("sticky disabled")}));if("sticky disabled"===await Promise.race([(0,He.Vs)(o),c]))return"sticky disabled";if(!r.state.refreshable)return;if(a&&t.emit("setup ad refresh",{pos:"billboard",id:"billBoard",interval:a,activeViewSlot:d}),t.emit("prepare to refresh ads",["billboard"]),t.emit("refresh ads",{ids:["billBoard"],reason:"secondary",positions:["billboard"]}),"sticky disabled"===await Promise.race([t.until("ad rendered","billboard"),c]))return"sticky disabled";r.dispatch({type:"infinitly stick",closable:!0});const l=await cd({broker:t,timeAfterScroll:s,timeAfterVisible:s});return"sticky disabled"!==l&&r.dispatch({type:"limit sticky height"}),l}({broker:n,getConfig:r,store:i})&&i.dispatch({type:"limit sticky height"})}({broker:i,getConfig:o,store:u})}}),(0,Yt.fo)("sticky.gallery",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.sticky.gallery.ads",["sticky_banner_gallery_top","sticky_banner_gallery_bottom"]),o=n("slots.enabled",{}),a=Object.keys(o),s=i.filter((e=>a.includes(e)));if(!s.length)return void r("no gallery ads enabled... bailing");const d=n("slotDescriptions.initial",{}),c=(0,Fe.ei)(d,s);r("enabledAds",c);const l={};let u=null,p=null,f=null,h=null,g=null,m=null;const v={sticky_banner_gallery_top:e=>{p.style.top=`${e.height}px`},sticky_banner_gallery_bottom:e=>{f.style.bottom=`${e.height}px`,g.style.bottom=`${e.height+h.height}px`}},y=e=>{const t={width:["left","right"],height:["top","bottom"]},n="width"===e?0:1,r=Object.keys(c).filter((n=>n.includes(t[e][0])||n.includes(t[e][1])));if(r.length)return r.map((e=>{if(c[e].size.length)return 1===c[e].size.length?c[e].size[0][n]:c[e].size.reduce(((e,t)=>t[n]>e[n]?t[n]:e[n]))})).reduce(((e,t)=>t>e?t:e))},b=()=>{r("Gallery openned"),(()=>{const e=y("width"),t=y("height"),{innerWidth:n,innerHeight:r}=window,i=e?n-2*(e+Yd):n,o=t?r-2*t:r;Array.from(document.querySelectorAll("#mobileGallerySwipeWrap > div > div:first-child")).filter((e=>e.firstElementChild)).map((e=>e.firstElementChild)).forEach((e=>{const t=Jd(e);let n=Math.min(o/t.height,i/t.width);e.classList.contains(".vjs-video-container")&&o<i&&(n*=.78),e.style.transform=`scale(${n})`}))})(),Object.entries(c).forEach((e=>{let[n,i]=e;const o=(0,Fe.ei)(i,["pos","id"]);r("creating gallery ad",o),l[n]={container:Xd({broker:t,rootElement:u,ad:o})},v[n]&&v[n](Jd(l[n].container)),MobileUtils.isMobile()&&(n.includes("top")&&(l[n].addEl=p),n.includes("bottom")&&(l[n].addEl=f))})),m=t.on("ad rendered",(e=>{const t=l[e]&&l[e].container.querySelector(".placeholder");t&&t.remove()}))},_=()=>{m.cancel(),MobileUtils.isMobile()&&MobileUtils.isLandscape()&&(p.style.top="0",f.style.bottom="0",g.style.bottom=`${h.height}px`),Object.entries(l).forEach((e=>{let[n,r]=e;r.container.remove(),t.emit("destroy slot",n)}))};MobileUtils.isMobile()&&window.addEventListener("orientationchange",(()=>{setTimeout((()=>{MobileUtils.isLandscape()?_():b()}),200)})),t.on("dom ready",(()=>{const e=document.getElementById("mobileGalleryModal");e&&(DM.pageEvents.subscribe("gallery.opened",b),DM.pageEvents.subscribe("gallery.closed",_),u=document.getElementById("mobileGallerySlider"),p=e.querySelector(".top-bar"),f=e.querySelector(".navigation-bar"),h=Jd(f),g=e.querySelector(".caption-bar"))}))},disableIfNoAdsServable:!0});const Xd=e=>{let{broker:t,rootElement:n=document.body,ad:r,className:i,cssText:o}=e;const a=document.createElement("div");a.id=r.pos;const s=document.createElement("div");return s.className="placeholder",a.appendChild(s),i&&(a.className=i),o&&(a.style.cssText=o),n.appendChild(a),t.emit("slot mounted",r),a},Jd=e=>{const t=getComputedStyle(e,"");return{width:(parseFloat(t.width)||0)+(parseFloat(t.borderLeftWidth)||0)+(parseFloat(t.borderRightWidth)||0),height:(parseFloat(t.height)||0)+(parseFloat(t.borderTopWidth)||0)+(parseFloat(t.borderBottomWidth)||0)}},Yd=20;function Qd(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function ec(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,nc(e,t,"get"))}function tc(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,nc(e,t,"set"),n),n}function nc(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}(0,Yt.fo)("sticky.mpuLeft",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:async function(e){let{broker:t,log:n,getConfig:r}=e;n("init");const i=r("slots.enabled",{});if(!Object.keys(i).includes("mpu_left"))return void n("mpu_left isn't enabled, bailing");const o=r("slotDescriptions.initial",{}),a=o.mpu_left;if(!a||(0,Fe.xb)(a))return void n("insufficient config to render mpu_left... bailing",a);const s=new Promise((e=>{t.on("slot defined",(t=>{let{pos:n}=t;n.includes("sky_left_top")&&e()}))}));n("waiting for let sky container"),await s;const d=document.getElementById(o.sky_left_top.id);if(!d)return void n.error("no sky left element, bailing");const c=document.createElement("div");c.id=a.id,(0,Ut.insertAfter)(c,d);const l={...a};t.emit("slot mounted",l),n("slot created",l,c),document.documentElement.classList.add("mpu_left_on"),await t.until("ad rendered","mpu_left"),n("slot rendered")}}),(0,Yt.fo)("sticky.psuedoClasses",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},async run(){await(0,Ut.loaded)();const e=new cc(lc),t=document.querySelectorAll(".sticky");for(const n of t)e.observe(n);const n=new MutationObserver((t=>function(e,t){for(const r of t){const t=r.target;t instanceof HTMLElement&&((n=t)instanceof Element&&n.classList.contains("sticky")?e.observe(t):e.unobserve(t))}var n}(e,t)));n.observe(document.body,{attributeFilter:["class"],attributes:!0,subtree:!0})}});var rc=new WeakMap,ic=new WeakMap,oc=new WeakMap,ac=new WeakMap,sc=new WeakMap,dc=new WeakMap;class cc{constructor(e){Qd(this,rc,{writable:!0,value:[]}),Qd(this,ic,{writable:!0,value:[]}),Qd(this,oc,{writable:!0,value:void 0}),Qd(this,ac,{writable:!0,value:e=>!ec(this,ic).includes(e)&&(0,Ut.getOffset)(e).top<=window.scrollY}),Qd(this,sc,{writable:!0,value:e=>(0,Ut.getOffset)(e).top>window.scrollY}),Qd(this,dc,{writable:!0,value:()=>{const e=ec(this,rc).filter(ec(this,ac)),t=ec(this,ic).filter(ec(this,sc));ec(this,ic).push(...e),tc(this,ic,ec(this,ic).filter((e=>!t.includes(e)))),(e.length||t.length)&&ec(this,oc).call(this,{in:e,out:t})}}),tc(this,oc,e),window.addEventListener("scroll",(0,J.FU)(ec(this,dc),300),{passive:!0})}observe(e){ec(this,rc).includes(e)||ec(this,rc).push(e)}unobserve(e){tc(this,rc,(0,Qe.cl)(e,ec(this,rc)))}}function lc(e){for(const t of e.in)t.setAttribute("stuck","stuck");for(const t of e.out)t.removeAttribute("stuck")}const uc=(e,t)=>{const n=e+"on",r=e+"off",i=document.documentElement;i.classList.remove(n),i.classList.remove(r),i.classList.add(t?n:r)};(0,Yt.fo)("sticky.skies",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:async function(e){let{broker:t,getConfig:n,log:r}=e;if(window.getComputedStyle){try{pc(t)}catch(e){r("Missing configuration for leaderboard")}fc(n("stickyAds",[]),t,r),await async function(){var e;await(0,Ut.loaded)();const t=document.querySelector(".puff li:nth-child(20)"),n=t?null===(e=(0,Ut.getOffset)(t))||void 0===e?void 0:e.top:5e3,r=Array.from(document.querySelectorAll("\n    #sky-left-container .sticky-container:first-child,\n    #sky-right-container .sticky-container:first-child\n  "));for(const e of r){var i,o,a,s;null!=e&&null!==(i=e.parentNode)&&void 0!==i&&null!==(o=(a=i).querySelectorAll)&&void 0!==o&&null!==(s=o.call(a,".sticky-container"))&&void 0!==s&&s.length&&(e.style.height=`${n}px`)}}()}}});const pc=e=>{const t="molads_leader_top_";if(uc(t,!1),(0,it.isAdEnabled)({pos:"leader_top"})){const n=e.on("ad rendered","leader_top",(e=>{"leader_top"===(e.slot?e.slot.molAd:{}).parentId&&(n.cancel(),uc(t,!e.isEmpty))}))}},fc=(e,t,n)=>{e.forEach((e=>{/mpu_puff_\d{2,}/.test(e)&&((e,t,n)=>{if((0,it.isAdEnabled)({pos:e})){n("init sliding mpu",e);const r=t.on("ad rendered",e,(t=>{if(!t.isEmpty&&(!(i=t)||i.isEmpty||!i.size||2!==i.size.length||300!==i.size[0]||600!==i.size[1])){r.cancel();const t=document.getElementById(e);if(t){const e=(0,Ut.closest)(t,(e=>e.classList.contains("mpu_puff_wrapper")));e&&(e.classList.add("sliding_mpu"),((e,t,n)=>{n(e.id);const r=((e,t)=>{var n;const r=window.getComputedStyle(t,null),i=null===(n=(0,Ut.getOffset)(t))||void 0===n?void 0:n.top,o=parseInt(r.getPropertyValue("height")),a=i+o,s=window.getComputedStyle(e,null),d=parseInt(s.getPropertyValue("height"));if(!e.dataset.originalPadding){const t=(0,Ut.getOffset)(e).top-i;t<0&&console.warn("negative padding"),e.dataset.originalPadding=Math.max(t,0).toString()}return{elementTop:i+parseInt(e.dataset.originalPadding),parentBottom:a,parentHeight:o,elementHeight:d,parentTop:i,marginBottom:parseInt(r.getPropertyValue("margin-bottom"))}})(e,t),i=r.elementTop,o=r.parentBottom-r.elementHeight;new zd({element:e,startStickyOffset:i,stopStickyOffset:o,log:n.extend(e.id),relativeHorizontalElement:t,onAffix:()=>{e.style.bottom="",e.style.left=t.getBoundingClientRect().left+"px"},onStopfix:()=>{e.style.top="",e.style.bottom="0"}}).start()})(t,e,n))}}var i}))}})(e,t,n)}))};var hc=__webpack_require__(7126);const gc=()=>document.body.classList.contains("mol-desktop"),mc=window.innerWidth/window.screen.width;function vc(e){let{broker:t,DM:n,doc:r,getConfig:i,log:o}=e;if(!window.getComputedStyle)return;o("starting");const a=i("plugins.enabled").includes("chromelessv2.dmplayer"),{news:s,puff:d}=i("slotDescription.sticky_banner.panel.unit",{}),c=e=>{const n=i("slotDescriptions.initial").sticky_banner;o("dispatching slotDescription update",n);const r="puff"===e||"showbiz"===e?d:s;t.emit("update description","sticky_banner",{...n,adUnit:(0,hc.Z)(r)})};Vs(n,o).then((e=>{c(e)}));const l=t.intercept("slot defined",((e,n)=>{let[s,d]=e;const{id:c,pos:u}=d,p=r.getElementById(c);if("sticky_banner"!==u||!a||(MobileUtils.isMobile()||(0,je.bP)())&&(0,je.ej)("smart-banner")){if("sticky_banner"===u)try{o("replace sticky_banner element"),function(e){let{broker:t,getConfig:n,log:r,ad:i}=e;const o=document.getElementById(i.id),a=n("pos.stickyBanner.hiddenUntilImpression",!0),s=n("pos.stickyBanner.underlayPadding.top",15),d=n("pos.stickyBanner.underlayPadding.bottom",15),c=n("pos.stickyBanner.underlayPadding.closeButton",!1);r("config:",{paddingTop:s,paddingBottom:d,hiddenUntilImpression:a});const l=document.createElement("div");l.id="stickyBannerUnderlay",a&&(l.style.display="none"),document.body.appendChild(l);const u=En();l.appendChild(u);const p=document.createElement("div");if(p.classList.add("adHolder"),p.classList.add("sticky_banner_overrides"),p.classList.add("noAdLabel"),p.id="stickyBanner",p.style.marginTop="0",l.style.padding=`${s}px 0 ${d}px 0`,l.appendChild(p),gc()&&(0,Ut.appendStyle)(`#stickyBannerUnderlay #stickyBanner {\n      transform: scale(${mc});\n    }`),c){const e=document.createElement("button");e.classList.add("closeButton"),l.appendChild(e),e.addEventListener("click",(()=>{l.style.display="none"}))}t.on("ad rendered","sticky_banner",(e=>{let{isEmpty:t,size:n}=e;if(r("sticky banner rendered:",{isEmpty:t}),t)l.style.display="none";else{const e=n[1];if(l.style.display="flex",gc()){r("ad height:",e);const t=e*mc-e,n=`${Math.round(s*mc+t/2)}px 0 ${Math.round(d*mc+t/2)}px 0`;l.style.padding=n,r("scalled padding:",n)}}})),o.parentNode.replaceChild(l,o)}({broker:t,getConfig:i,log:o,ad:d,container:p}),l()}catch(e){console.error(e)}n(s,d)}}));t.on("panel updated",((e,n)=>{o("panel updated",n,e),t.emit("destroy slot","sticky_banner"),c(n),t.emit("slot mounted",{pos:"sticky_banner",id:"stickyBanner"})}))}vc.ccpa={enabledIfDissent:!0},vc.gdpr={enabledIfDissent:!0},vc.disableIfNoAdsServable=!0;const yc=e=>{let{broker:t,getPuffListStart:n,getOffElement:r,pos:i,id:o=i}=e;const a=t.on("ad rendered",i,(e=>{if(!e.isEmpty){a.cancel();const e=document.getElementById(o);if(!e)return;((e,t,n)=>{const r=e.parentNode,i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.parentNode;const n=getComputedStyle(t,null),r=(0,Ut.getOffset)(t).top,i=parseInt(n.getPropertyValue("height")),o=r+i,a=getComputedStyle(e,null),s=parseInt(a.getPropertyValue("height"));if(!e.dataset.originalPadding){const t=(0,Ut.getOffset)(e).top-r;t<0&&console.warn("negative padding"),e.dataset.originalPadding=Math.max(t,0)}return{elementTop:r+parseInt(e.dataset.originalPadding),parentBottom:o,parentHeight:i,elementHeight:s,parentTop:r,marginBottom:parseInt(n.getPropertyValue("margin-bottom")),marginTop:parseInt(a.getPropertyValue("margin-top"))}}(e,r),o=i.elementTop,a=(()=>{const r=t&&t()||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.parentNode;return(0,Ut.walk)(t,(e=>e.classList.contains("mpu_puff_wrapper")&&e.querySelector("iframe")),(e=>e.nextElementSibling))}(e,n);return r?((e,t)=>{const n=e.previousElementSibling,r=getComputedStyle(n,null);return(0,Ut.getOffset)(n).top+parseInt(r.getPropertyValue("height"))-t})(r,i.elementHeight):1/0})(),s=a===1/0?a:(()=>{const e=(0,Ut.getRelativeContainer)(r);return e?a-(0,Ut.getOffset)(e).top:a})();r.style.height=i.parentHeight+"px",r.style.marginTop=i.marginTop+"px",new zd({element:e,log:()=>{},relativeHorizontalElement:r,startStickyOffset:o,stopStickyOffset:a,stoppedPosition:s}).start()})(e,r,n(e))}}))};function bc(e){let{broker:t,getConfig:n,log:r}=e;if(!window.getComputedStyle)return;const i=n("stickyAds",[]);i.includes("mpu_puff_5")&&yc({broker:t,pos:"mpu_puff_5",getPuffListStart:e=>(0,Ut.getParent)(e,".item")}),i.includes("mpu_top")&&yc({broker:t,pos:"mpu_top",getPuffListStart:e=>{const t=(0,Ut.getParent)(e,".item"),n=(0,Ut.walk)(t,(e=>e.querySelector(".puff")),(e=>e.nextElementSibling));return n?n.querySelector(".puff li"):t}})}bc.ccpa={enabledIfDissent:!0},bc.gdpr={enabledIfDissent:!0},bc.disableIfNoAdsServable=!0;var _c=__webpack_require__(908);let wc=()=>()=>{},Tc=(e,t)=>"function"==typeof t?t():t;if(performance.mark&&performance.measure){let e=0;wc=t=>{const n="benchmark-"+e++;return performance.mark(`${n}-begin`),()=>{performance.mark(`${n}-end`),performance.measure(t,`${n}-begin`,`${n}-end`)}},Tc=(e,t)=>{const n=wc(e);try{return"function"==typeof t.then?(t.then(n),t):t()}finally{n()}}}var Ic=__webpack_require__(5175).Buffer;function Sc(e,t,n){return parseInt(e.substr(t,n),2)}function kc(e){const t=Sc(e);return String.fromCharCode(t+65).toLowerCase()}function Cc(e,t,n){const r=e.substr(t,n);return kc(r.slice(0,n/2))+kc(r.slice(n/2))}function Ec(e){let t=e;for(;t.length%4!=0;)t+="=";t=t.replace(/-/g,"+").replace(/_/g,"/");const n=Ic.from(t,"base64");let r="";for(let e=0;e<n.length;e+=1){const t=n[e].toString(2);r+=(i=t,o=8-t.length,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n="";for(let r=0;r<e;r+=1)n+=t;return n}(Math.max(0,o))+i)}var i,o;return function(e){const{decodedObject:t}=function(e){let{input:t,fields:n,startPosition:r=0}=e,i=r;const o=n.reduce(((e,n)=>{const{name:r,numBits:o}=n,{fieldValue:a,newPosition:s}=function(e){let{input:t,output:n,startPosition:r,field:i}=e;const{type:o,numBits:a,decoder:s,validator:d}=i;if("function"==typeof d&&!d(n))return{newPosition:r};if("function"==typeof s)return s(t,n,r);const c="function"==typeof a?a(n):a;switch(o){case"int":return{fieldValue:Sc(t,r,c)};case"date":return{fieldValue:(l=t,u=r,p=c,new Date(100*Sc(l,u,p)))};case"bits":return{fieldValue:t.substr(r,c)};case"language":return{fieldValue:Cc(t,r,c)};default:throw new Error(`ConsentString - Unknown field type ${o} for decoding`)}var l,u,p}({input:t,output:e,startPosition:i,field:n});return void 0!==a&&(e[r]=a),void 0!==s?i=s:"number"==typeof o&&(i+=o),e}),{});return{decodedObject:o,newPosition:i}}({input:e,fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16}]});return t}(r)}function Ac(e,t){Oc(e,t),t.add(e)}function Pc(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xc(e,t,n){Oc(e,t),t.set(e,n)}function Oc(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Dc(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Rc(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Nc(e,t,"get"))}function Mc(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Nc(e,t,"set"),n),n}function Nc(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Uc=new WeakMap,Lc=new WeakMap,jc=new WeakMap,Bc=new WeakMap,qc=new WeakMap,Fc=new WeakSet,Vc=new WeakSet,zc=new WeakSet,Wc=new WeakSet;class Hc{constructor(e){Ac(this,Wc),Ac(this,zc),Ac(this,Vc),Ac(this,Fc),xc(this,Uc,{writable:!0,value:void 0}),xc(this,Lc,{writable:!0,value:void 0}),xc(this,jc,{writable:!0,value:void 0}),Pc(this,"brokerId",void 0),xc(this,Bc,{writable:!0,value:void 0}),Pc(this,"context",void 0),Pc(this,"tcfv2Version",void 0),Pc(this,"tcfv2UiVersion",void 0),xc(this,qc,{writable:!0,value:void 0});const{getConfig:t,log:n,broker:r,showUi:i,uiLevel:o="Level1",renderPlatform:a,repromptVersion:s,nextRepromptVersion:d,tracking:c,tcString:l,addtlConsent:u,nrvString:p,nrvVersion:f,geo:h,useGeoDeviceVariantGVL:g,cmpModel:m}=e;this.context=e,Mc(this,Lc,n),Mc(this,Uc,r),this.tcfv2Version=t("tcfv2.version",""),this.tcfv2UiVersion=t("tcfv2.uiVersion",""),this.brokerId=Math.random().toString(36).substring(2),Mc(this,qc,"@mol-ads/mol-adverts");const v=t("tcfv2.uiScriptBase","//www.dailymail.co.uk/static/mol-fe/static/mol-fe-cmp"),y=`${t("tcfv2.gvlUiVersion","51")}`,b=t("tcfv2.cvlUiVersion","1"),_=t("tcfv2.backendUrl","//cmp.dmgprivacyint.co.uk/gdpr/consent/persist"),w=t("tcfv2.uiFile","index.js"),T=t("tcfv2.brand",{}),I=`${v}/${this.tcfv2UiVersion}/${w}`,S=t("tcfv2.storeUserPreference",!1),k=t("tcfv2.scriptBase","//cmp.dmgmediaprivacy.co.uk/cmp"),C=t("tcfv2.nrvUiVersion","1"),E=e.cvlVersion||t("tcfv2.cvlUiVersion","1");Mc(this,jc,`${k}/${this.tcfv2Version}/index.js`);const A=l&&Ec(l)||void 0,P=(null==A?void 0:A.vendorListVersion)||`${t("tcfv2.gvlUiVersion","51")}`;this.consentStringLastUpdated=(null==A?void 0:A.lastUpdated)&&new Date(A.lastUpdated),Mc(this,Bc,{brand:T,brokerId:this.brokerId,gvlEnvironment:"web",repromptVersion:s,nextRepromptVersion:d,gvlVersion:P,gvlUiVersion:y,cvlVersion:E,cvlUiVersion:b,showUi:i,uiLevel:o,uiScriptUrl:I,controllerScriptBase:`${k}/${this.tcfv2Version}`,tcString:l,addtlConsent:u,storeUserPreference:S,backendUrl:_,renderPlatform:a,platform:"web",nrvString:p,nrvVersion:f,nrvUiVersion:C,useGeoDeviceVariantGVL:g,molGvlVersion:e.molGvlVersion,geo:h,cmpModel:m}),__webpack_require__.g.addEventListener("message",(async e=>{const t=e.data;"@mol-ads/mol-ads-cmp"===t.ns&&t.id===this.brokerId&&"is_ready"===t.action&&t.sender!==Rc(this,qc)&&Rc(this,Uc).emit("TCFV2 controller ready"),"@mol-ads/mol-ads-cmp"===t.ns&&t.id===this.brokerId&&"level_changed"===t.action&&t.sender!==Rc(this,qc)&&this.tracking.track({type:"custom",payload:{changed:!0,event:"ui-open",level:t.payload.currentLevel,module:"tcfv2"}})})),this.openUi=this.openUi.bind(this),this.tracking=c,Rc(this,Uc).on("plugins enabled",(()=>{Dc(this,zc,Gc).call(this,"ads-initialised")}))}loadController(){Rc(this,Lc).call(this,"loading controller..");const e=Rc(this,Bc).showUi?Dc(this,Wc,Kc).call(this):void 0;return Rc(this,Bc).uuid=e,Promise.all([Tc("wait for external deps",Dc(this,Fc,Zc).call(this))]).then((async()=>{Rc(this,Lc).call(this,"loading controller from:",Rc(this,jc)),await Tc("tcfv2 controller load",Dc(this,Vc,$c).call(this,Rc(this,jc),Rc(this,Bc))),Rc(this,Lc).call(this,"controller loaded")}))}openUi(e){let{reason:t,uiLevel:n}=e;const r=Dc(this,Wc,Kc).call(this);Rc(this,Lc).call(this,`opening tcfv2 banner, level: ${n}, reason: ${t}`),this.tracking.track({type:"custom",payload:{event:"ui-open",level:n,module:"tcfv2",reason:t}}),Dc(this,zc,Gc).call(this,"open",{uiLevel:n,uuid:r})}consentToAll(){Rc(this,Lc).call(this,"consenting to all"),Dc(this,zc,Gc).call(this,"consentToAll",{uuid:Dc(this,Wc,Kc).call(this)})}dissentToAll(){Dc(this,zc,Gc).call(this,"dissentToAll",{uuid:Dc(this,Wc,Kc).call(this)})}}function Zc(){const{getConfig:e}=this.context;return new Promise((t=>{var n;"mol"===e("site")?(Rc(this,Lc).call(this,"awaiting for molFeReact_LOADED"),null===(n=__webpack_require__.g)||void 0===n||n.DM.later(["molFeReact_LOADED"],(()=>{Rc(this,Lc).call(this,"molFeReact_LOADED ready"),t()}))):t()}))}function $c(e,t){return new Promise(((n,r)=>{const i=document.createElement("script");i.src=e,i.id="mol-ads-tcfv2-script",i.dataset.opts=JSON.stringify(t),i.onload=()=>n(),i.onerror=()=>r(new Error(`Error loading ${e}`)),document.head.appendChild(i)}))}function Gc(e,t){const n={ns:"@mol-ads/mol-ads-cmp",id:this.brokerId,sender:Rc(this,qc)},r=t?{...n,action:e,payload:t}:{...n,action:e};window.postMessage(r,"*")}function Kc(){const{storage:e}=this.context;let t=e.getUuid();return t||(t=(0,Is.Z)(),e.setUuid(t)),t}function Xc(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Jc(e,t,"get"))}function Jc(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Yc=new WeakMap;class Qc{constructor(e){let{getConfig:t,localStorage:n=__webpack_require__.g.localStorage}=e;var r,i;(function(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)})(this,Yc,{writable:!0,value:void 0}),i=n,function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(r=this,Jc(r,Yc,"set"),i);const o=t("tcfv2.storagePrefix","mol.ads");this.CONSENT_KEY=`${o}.cmp.tcf.client`,this.USER_CONSENT_DEGREE_KEY=`${o}.cmp.userConsentDegree`,this.GVL_VERSION_KEY=`${o}.cmp.tcf.gvlVersion`,this.UUID_KEY=`${o}.tcfv2.uuid`,this.TCFV1_CONSENT_FLAG_KEY=`${o}.cmp.consent`,this.TCFV1_CONSENT_STRING_KEY="euconsent",this.TCDATA_KEY=`${o}.cmp.tcf.cache`,this.TCFV2_REPROMPT=`${o}.cmp.tcfv2.reprompt`,this.TCFV2_LAST_REPROMPTED=`${o}.cmp.tcfv2.lastReprompted`,this.GVL_GEO_MIGRATION_STATUS_KEY="mol.ads.cmp.tcfv2.gvlGeoMigrationStatus"}getConsent(){return Xc(this,Yc).getItem(this.CONSENT_KEY)}setConsent(e){Xc(this,Yc).setItem(this.CONSENT_KEY,e)}getConsentDegree(){return JSON.parse(Xc(this,Yc).getItem(this.TCDATA_KEY)||"{}").getConsentDegree}setConsentDegree(e){Xc(this,Yc).setItem(this.USER_CONSENT_DEGREE_KEY,e)}setLastReprompted(e){Xc(this,Yc).setItem(this.TCFV2_LAST_REPROMPTED,JSON.stringify(e))}getVendorListVersion(){return Xc(this,Yc).getItem(this.GVL_VERSION_KEY)}setVendorListVersion(e){Xc(this,Yc).setItem(this.GVL_VERSION_KEY,e)}setRepromptVersion(e){Xc(this,Yc).setItem(this.TCFV2_REPROMPT,JSON.stringify(e))}getUuid(){return Xc(this,Yc).getItem(this.UUID_KEY)}setUuid(e){Xc(this,Yc).setItem(this.UUID_KEY,e)}getTcfv1ConsentFlag(){return Xc(this,Yc).getItem(this.TCFV1_CONSENT_FLAG_KEY)}getTcfv1ConsentString(){return Xc(this,Yc).getItem(this.TCFV1_CONSENT_STRING_KEY)}getTCData(){const e=JSON.parse(Xc(this,Yc).getItem(this.TCDATA_KEY)||"{}");return e&&e.getTCData||{}}getRepromptVersion(){let e;try{const t=Xc(this,Yc).getItem(this.TCFV2_REPROMPT);t&&(e=JSON.parse(t))}catch(e){console.error("unabled to parse repromptVersion")}return e||{version:0,chance:Math.random()}}getLastReprompted(){return JSON.parse(Xc(this,Yc).getItem(this.TCFV2_LAST_REPROMPTED)||"{}")}getGVLGeoMigrationStatus(){return JSON.parse(Xc(this,Yc).getItem(this.GVL_GEO_MIGRATION_STATUS_KEY)||"{}")}setGVLGeoMigrationStatus(e){Xc(this,Yc).setItem(this.GVL_GEO_MIGRATION_STATUS_KEY,JSON.stringify(e))}removeGVLGeoMigrationStatus(){Xc(this,Yc).removeItem(this.GVL_GEO_MIGRATION_STATUS_KEY)}cleanup(){["mol.ads.cmp.customVendors"].forEach((e=>{Xc(this,Yc).removeItem(e)}))}clearTcfV2(){[this.CONSENT_KEY,this.USER_CONSENT_DEGREE_KEY,this.GVL_VERSION_KEY,this.TCFV2_REPROMPT,this.UUID_KEY,this.TCFV2_LAST_REPROMPTED].forEach((e=>Xc(this,Yc).removeItem(e)))}}class el{constructor(e){this.context=e}async setup(){const{validTCDataP:e,registerPluginBouncer:t,log:n}=this.context,r=await e,i=new Set(await lo("consentedVendors")),o=r.addtlConsent&&new Set(r.addtlConsent.substring(2).split(".").filter((e=>e)).map((e=>parseInt(e))));o&&n("using addtlConsent for bouncing"),this.context={...this.context,tcData:r,vendorConsents:i,addtlConsent:o},t(((e,t)=>{var r;const i=n.extend(e);i("running bouncer");const o=(null==t||null===(r=t.gdpr)||void 0===r?void 0:r.enabledIfDissent)||this.checkVendorIds(e,t)&&this.checkPurposeIds(e,t)&&this.checkGoogleAdditionalConsentVendorIds(e,t)&&this.checkLegIntPurposeIds(e,t);return i(`passed checks: ${o}`),o}))}checkVendorIds(e,t){const{log:n,vendorConsents:r}=this.context;if(!t.vendorIds||void 0===t.vendorIds.gdpr)return n("no vendorIds or gdpr defined"),!1;if(!1===t.vendorIds.gdpr)return n("plugin",e,"bounced because it is not supported where GDPR applies"),!1;if("N/A"===t.vendorIds.gdpr)return n("restrictions not applicable"),!0;if(!Array.isArray(t.vendorIds.gdpr))return n.warn("gdpr vendorIds must be an array, but got:",t.vendorIds.gdpr),!1;const i=t.vendorIds.gdpr.filter((e=>!r.has(e)));return!i.length||(n("plugin",e,"bounced because user have not consented to vendors:",i),!1)}checkPurposeIds(e,t){const{log:n,tcData:r}=this.context;if(!t.purposeIds||void 0===t.purposeIds.gdpr)return n("no purposesIds or gdpr defined"),!1;if("N/A"===t.purposeIds.gdpr)return n("restrictions not applicable"),!0;if(!Array.isArray(t.purposeIds.gdpr))return n.warn("gdpr purposeIds must be an array, but got:",t.purposeIds.gdpr),!1;const i=t.purposeIds.gdpr.filter((e=>!r.purpose.consents[e]));return!i.length||(n("plugin",e,"bounced because user have not consented to purposes:",i),!1)}checkLegIntPurposeIds(e,t){const{log:n,tcData:r}=this.context;if(!t.legIntPurposeIds||void 0===t.legIntPurposeIds.gdpr)return!0;if(!Array.isArray(t.legIntPurposeIds.gdpr))return n.warn("gdprPurposeIds must be an array, but got:",t.purposeIds.gdpr),!1;const i=t.legIntPurposeIds.gdpr.filter((e=>!r.purpose.legitimateInterests[e]));return!i.length||(n("plugin",e,"bounced because user have not consented to legitimate interests:",i),!1)}checkGoogleAdditionalConsentVendorIds(e,t){if(!t.vendorIds||void 0===t.vendorIds.google)return!0;const{addtlConsent:n,log:r}=this.context,i=t.vendorIds.google.filter((e=>!n.has(e)));return!i.length||(r("plugin",e,"bounced because user have not consented to google's additional consent:",i),!1)}}const tl={yes:"true",no:"false",partial:"custom"};var nl=__webpack_require__(8949);function rl(e,t){ol(e,t),t.add(e)}function il(e,t,n){ol(e,t),t.set(e,n)}function ol(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function al(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,cl(e,t,"get"))}function sl(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function dl(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,cl(e,t,"set"),n),n}function cl(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ll=new WeakMap,ul=new WeakMap,pl=new WeakMap,fl=new WeakMap,hl=new WeakMap,gl=new WeakSet,ml=new WeakSet;class vl{constructor(e){let{account:t,broker:n,log:r,storage:i}=e;rl(this,ml),rl(this,gl),il(this,ll,{writable:!0,value:void 0}),il(this,ul,{writable:!0,value:void 0}),il(this,pl,{writable:!0,value:void 0}),il(this,fl,{writable:!0,value:void 0}),il(this,hl,{writable:!0,value:void 0}),dl(this,ll,t),dl(this,pl,r),dl(this,ul,n),dl(this,fl,i),dl(this,hl,sl(this,gl,yl)),this.init=this.init.bind(this)}init(){al(this,ul).once("system ready",(()=>{dl(this,hl,sl(this,ml,bl))}))}track(e){al(this,hl).call(this,e)}}function yl(e){const t={account:al(this,ll),...e};al(this,pl).call(this,"sending to bidmax using barebones",t),(0,nl.H)(t)}function bl(e){const t={...e,payload:{validConsent:al(this,fl).getConsentDegree()||void 0,...e.payload}};al(this,pl).call(this,"sending event to bidmax",t),al(this,ul).emit("send event to bidmax",t)}function _l(e,t,n){wl(e,t),t.set(e,n)}function wl(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Tl(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Il(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,kl(e,t,"get"))}function Sl(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,kl(e,t,"set"),n),n}function kl(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Cl=new WeakMap,El=new WeakMap,Al=new WeakMap,Pl=new WeakMap,xl=new WeakMap,Ol=new WeakMap,Dl=new WeakMap,Rl=new WeakMap,Ml=new WeakMap,Nl=new WeakMap,Ul=new WeakMap,Ll=new WeakMap,jl=new WeakMap,Bl=new WeakSet;class ql{constructor(e){let{log:t,openUi:n,pageUnload:r,storage:i,tracking:o,userRepromptUpdate:a,debugRepromptData:s,openBarrier:d,stubConsent:c,stubDissent:l,controllerHandler:u,gvlGeoMigration:p}=e;!function(e,t){wl(e,t),t.add(e)}(this,Bl),_l(this,Cl,{writable:!0,value:void 0}),_l(this,El,{writable:!0,value:void 0}),_l(this,Al,{writable:!0,value:void 0}),_l(this,Pl,{writable:!0,value:void 0}),_l(this,xl,{writable:!0,value:void 0}),_l(this,Ol,{writable:!0,value:void 0}),_l(this,Dl,{writable:!0,value:void 0}),_l(this,Rl,{writable:!0,value:void 0}),_l(this,Ml,{writable:!0,value:void 0}),_l(this,Nl,{writable:!0,value:void 0}),_l(this,Ul,{writable:!0,value:void 0}),_l(this,Ll,{writable:!0,value:void 0}),_l(this,jl,{writable:!0,value:void 0}),Sl(this,El,r),Sl(this,Cl,o),Sl(this,Al,t),Sl(this,xl,n),Sl(this,Ol,i),Sl(this,Pl,{bannerOpenedReason:"unknown",refreshOnClose:!1}),Sl(this,Dl,a),Sl(this,Rl,s),Sl(this,Ml,d),Il(this,Al).call(this,"userRepromptUpdate",a),Sl(this,Nl,c),Sl(this,Ul,l),Sl(this,Ll,u),Sl(this,jl,p)}async handleAction(e,t){const{openRequest:n,tcData:r}=t;switch(e){case"uiOpened":Il(this,Cl).track({type:"custom",payload:{event:"ui-opened",module:"tcfv2",reason:Il(this,Pl).bannerOpenedReason}}),(e=>!!e.tcString.length)(r)&&(Il(this,Al).call(this,"ui displayed for existing user"),Il(this,Pl).refreshOnClose=!0),Il(this,El).updatePageUnloadData("tcfv2",{status:`${e}`}),Il(this,Nl)?(Il(this,Ll).consentToAll(),Il(this,Cl).track({type:"custom",payload:{event:"stubConsent",module:"tcfv2"}})):Il(this,Ul)&&(Il(this,Ll).dissentToAll(),Il(this,Cl).track({type:"custom",payload:{event:"stubDissent",module:"tcfv2"}}));break;case"newUser":Il(this,Al).call(this,"opening UI for new user:",r.eventStatus),Il(this,Pl).bannerOpenedReason="newUser",Il(this,xl).call(this,{uiLevel:"Level1",reason:Il(this,Pl).bannerOpenedReason}),Il(this,El).updatePageUnloadData("tcfv2",{status:`${e}`});break;case"tcStringExpired":Il(this,Al).call(this,"opening UI as tcString expired"),Il(this,Pl).bannerOpenedReason="tcStringExpired",Il(this,xl).call(this,{uiLevel:"Level1",reason:Il(this,Pl).bannerOpenedReason}),Il(this,El).updatePageUnloadData("tcfv2",{status:`${e}`});break;case"repromptUser":Il(this,Al).call(this,"opening UI due to reprompt"),Il(this,Pl).bannerOpenedReason="reprompt",Il(this,xl).call(this,{uiLevel:"Level1",reason:Il(this,Pl).bannerOpenedReason}),Il(this,El).updatePageUnloadData("tcfv2",{status:`${e}`});break;case"loaded":Il(this,Al).call(this,"tcf loaded"),Il(this,Cl).track({type:"custom",payload:{event:"loaded",module:"tcfv2"}}),await Tl(this,Bl,Fl).call(this,r),Il(this,jl).tcDataLoaded(r),Il(this,El).updatePageUnloadData("tcfv2",{status:"loaded"}),Il(this,Ml).call(this);break;case"uiClosed":if(Il(this,Al).call(this,"uiClosed"),await Tl(this,Bl,Fl).call(this,r),Il(this,jl).uiClosed(r),"reprompt"===Il(this,Pl).bannerOpenedReason){const e=Il(this,Ol).getTCData().repromptVersion,t=Il(this,Ol).getLastReprompted();(null==t?void 0:t.version)===r.repromptVersion&&(Il(this,Cl).track({type:"custom",payload:{daysSinceReprompt:Math.floor((Date.now()-t.date)/864e5),event:"reprompt-error",lastRepromptVersion:t.version,jounery:Il(this,El).getPageUnloadData("tcfv2"),module:"tcfv2",onClosedStoredTCDataVersion:e,tcDataRepromptVersion:r.repromptVersion,...Il(this,Rl)}}),Il(this,El).updatePageUnloadData("tcfv2",{status:"error"})),Il(this,Ol).setLastReprompted({date:Date.now(),version:r.repromptVersion})}Il(this,Cl).track({type:"custom",payload:{event:"ui-closed",module:"tcfv2",reason:Il(this,Pl).bannerOpenedReason}}),Il(this,El).updatePageUnloadData("tcfv2",{status:`${e}`}),Il(this,Pl).bannerOpenedReason="unknown",Il(this,Ml).call(this);break;case"cached":Il(this,Al).call(this,"cached tcData, ignoring");break;case"openRequest":Il(this,Pl).bannerOpenedReason=n.reason,Il(this,El).updatePageUnloadData("tcfv2",{status:`${e}-${n.reason}`});break;default:await Tl(this,Bl,Fl).call(this,r)}}}async function Fl(e){const t=(null==e?void 0:e.repromptVersion)||0;Il(this,Ol).setRepromptVersion({...Il(this,Dl),version:t}),await __webpack_require__.g.adverts.updateCache(e,Il(this,Al)),Il(this,Al).call(this,"storage update complete")}function Vl(e,t,n){zl(e,t),t.set(e,n)}function zl(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Wl(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Zl(e,t,"get"))}function Hl(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Zl(e,t,"set"),n),n}function Zl(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const $l={capture:!0,passive:!0},Gl=["pagehide","beforeunload","unload"];var Kl=new WeakMap,Xl=new WeakMap,Jl=new WeakMap,Yl=new WeakMap,Ql=new WeakMap,eu=new WeakSet;class tu{constructor(e){let{broker:t,log:n,tracking:r}=e;!function(e,t){zl(e,t),t.add(e)}(this,eu),Vl(this,Kl,{writable:!0,value:void 0}),Vl(this,Xl,{writable:!0,value:void 0}),Vl(this,Jl,{writable:!0,value:void 0}),Vl(this,Yl,{writable:!0,value:void 0}),Vl(this,Ql,{writable:!0,value:void 0}),Hl(this,Kl,t),Hl(this,Xl,n),Hl(this,Jl,{}),Hl(this,Yl,r),Hl(this,Ql,!1),this.init=this.init.bind(this)}init(){const e=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,eu,nu).bind(this);Gl.forEach((t=>{window.addEventListener(t,e,$l)})),Wl(this,Kl).once("system ready",(()=>{Wl(this,Kl).register("call for page-unload",(()=>Wl(this,Jl))),Gl.forEach((t=>{window.removeEventListener(t,e,$l)}))}))}updatePageUnloadData(e,t){Wl(this,Jl)[e]=(Wl(this,Jl)[e]?`${Wl(this,Jl)[e]},${t.status}`:t.status).substring(0,200),Wl(this,Xl).call(this,"payload",Wl(this,Jl))}getPageUnloadData(e){return Wl(this,Jl)[e]||""}}function nu(){Wl(this,Ql)||(Hl(this,Ql,!0),Wl(this,Xl).call(this,"onUnload called",Wl(this,Jl)),Wl(this,Yl).track({type:"page-unload",payload:{...Wl(this,Jl)}}))}const ru={iab:async e=>(await lo("consentedVendors")).includes(e),google:async e=>{var t;return null===(t=(await lo("getCustomVendorsConsents"))[e])||void 0===t?void 0:t.consent},nrv:async e=>{var t;return null===(t=(await lo("getNonRegisteredVendorsConsents"))[e])||void 0===t?void 0:t.consent}},iu=async e=>{const{vendorRegistry:t,vendorId:n}=e,r=ru[t];if(r){const e="string"==typeof n?parseInt(n):n;return isNaN(e)?{errorMsg:"invalid vendorId"}:await r(e)?{isConsented:!0}:{isConsented:!1}}return{errorMsg:"vendorRegistry not recognised, valid values are 'iab'|'google'|'nrv'"}};function ou(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function au(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,du(e,t,"get"))}function su(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,du(e,t,"set"),n),n}function du(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var cu=new WeakMap,lu=new WeakMap,uu=new WeakMap,pu=new WeakMap,fu=new WeakMap,hu=new WeakMap,gu=new WeakMap,mu=new WeakMap;class vu{constructor(e){let{getConfig:t,molGvlVersion:n,tcString:r,storage:i,log:o}=e;ou(this,cu,{writable:!0,value:void 0}),ou(this,lu,{writable:!0,value:void 0}),ou(this,uu,{writable:!0,value:!1}),ou(this,pu,{writable:!0,value:!1}),ou(this,fu,{writable:!0,value:void 0}),ou(this,hu,{writable:!0,value:void 0}),ou(this,gu,{writable:!0,value:void 0}),ou(this,mu,{writable:!0,value:e=>3===(null==e?void 0:e.split(".").length)}),su(this,hu,r),su(this,fu,i),su(this,gu,o);const{useGeoDeviceVariantGVL:a,onlyMigrateExistingUsers:s,rollbackGeoVariant:d}=t("tcfv2.gvlMigration",{useGeoDeviceVariantGVL:!1,rollbackGeoVariant:!1,onlyMigrateExistingUsers:!0}),{newUser:c}=au(this,fu).getGVLGeoMigrationStatus();if(su(this,lu,!(3!==(null==n?void 0:n.split(".").length))),su(this,cu,!(d||!(au(this,lu)||a&&r&&!c||a&&!s))),au(this,lu)&&d){const{hasBeenReprompted:e}=au(this,fu).getGVLGeoMigrationStatus();!1===e?su(this,uu,!0):su(this,pu,!(!e&&!c))}au(this,gu).call(this,`initialised, userMigratedToGvlVariant: ${au(this,lu)}, useGeoDeviceVariantGVL: ${au(this,cu)}, shouldRollbackUserTcString: ${au(this,uu)}, shouldReprompt: ${au(this,pu)}`)}get userMigratedToGvlVariant(){return au(this,lu)}get useGeoDeviceVariantGVL(){return au(this,cu)}get shouldRollbackUserTcString(){return au(this,uu)}get shouldReprompt(){return au(this,pu)}getRollbackUserTcString(){if(au(this,uu)){const{tcString:e}=au(this,fu).getGVLGeoMigrationStatus();return au(this,gu).call(this,"returning rollback tcString",e),e}}tcDataLoaded(e){const t=au(this,mu).call(this,e.molGvlVersion),{tcString:n}=au(this,fu).getGVLGeoMigrationStatus();if(au(this,cu)&&!au(this,lu)&&t){const e={hasBeenReprompted:!1,migrated:t,tcString:au(this,hu)};au(this,gu).call(this,"tcDataLoaded, updating GVLGeoMigrationStatus in storage",e),au(this,fu).setGVLGeoMigrationStatus(e)}else au(this,uu)&&!t&&n===e.tcString&&(au(this,gu).call(this,"tcDataLoaded, user rolled back, removing GVLGeoMigrationStatus in storage"),au(this,fu).removeGVLGeoMigrationStatus())}uiClosed(e){const{tcString:t}=au(this,fu).getGVLGeoMigrationStatus(),n=au(this,mu).call(this,e.molGvlVersion);au(this,hu)?au(this,cu)&&au(this,lu)&&t?(au(this,gu).call(this,"uiClosed, setting hasBeenReprompted=true in GVLGeoMigrationStatus storage"),au(this,fu).setGVLGeoMigrationStatus({tcString:t,hasBeenReprompted:!0,migrated:n})):au(this,pu)&&!au(this,mu).call(this,null==e?void 0:e.molGvlVersion)&&(au(this,gu).call(this,"uiClosed, user rolled back, removing GVLGeoMigrationStatus in storage"),au(this,fu).removeGVLGeoMigrationStatus()):(au(this,gu).call(this,"marking user as newUser"),au(this,fu).setGVLGeoMigrationStatus({newUser:!0,migrated:n}))}}(0,Yt.fo)("tcfv2",{gdpr:{enabledIfDissent:!0},init:Tu,initTimeout:zn.RD});const yu=function(e){e.once("dom ready",(()=>{document.querySelectorAll("a[href^='javascript:window.__cmp.a.push([\\'openSettings\\']']").forEach((e=>{e.href="javascript:window.openUi({ uiLevel: 'Level2', reason: 'userRequest' })"}))}))},bu=e=>{const t=new Date;return t.setMonth(t.getMonth()-e),t},_u=function(e,t){__webpack_require__.g.openUi=n=>{const{reason:r="unknown",uiLevel:i="Level1"}="string"==typeof n?{uiLevel:n,reason:"unknown"}:n||{};e.handleAction("openRequest",{openRequest:{reason:r}}),t.openUi({reason:r,uiLevel:i})}},wu=e=>{const{done:t}=e.keys().next();return!t};async function Tu(e){const{broker:t,device:n,getConfig:r,isTCFV2Jurisdiction:i,log:o,pageCriteria:a,setConfig:s,queryParams:d}=e,c=o.extend("main");if(!await i(r))return void c("tcfv2 is not supported for this geo, bailing");const l=new Qc(e);l.cleanup();const u=r("site","mol"),p=new vl({account:u,broker:t,log:o.extend("tracking"),storage:l});p.init();const f=l.getTCData(),h=d.addtl_consent||f.addtlConsent,g=f.acmVersion;let m=d.gdpr_consent||f.tcString;const v=f.nrvString,y=f.nrvVersion;let b=f.molGvlVersion;const _=new vu({getConfig:r,storage:l,molGvlVersion:b,tcString:m,log:o.extend("gvlGeoMigration")});if(o("shouldRollbackUserTcString",_.shouldRollbackUserTcString),_.shouldRollbackUserTcString&&(m=_.getRollbackUserTcString(),b=Ec(m).vendorListVersion.toString()),d.gdpr_consent||d.addtl_consent){const e=new URLSearchParams(__webpack_require__.g.location.search);["gdpr_consent","addtl_consent"].forEach((t=>e.delete(t)));const t=wu(e)?`?${e}${__webpack_require__.g.location.hash}`:`${__webpack_require__.g.location.pathname}${__webpack_require__.g.location.hash}`;history.replaceState(null,"remove query params to ensure bid requests don't exceed size",t)}(d.gdpr_consent&&d.gdpr_consent!==f.tcString||d.addtl_consent&&d.addtl_consent!==f.addtlConsent)&&(c("new consent string provided, clearing cache"),(0,_c.LK)(),l.clearTcfV2());const{shouldRepromptUser:w,debugRepromptData:T,userRepromptUpdate:I,repromptVersion:S}=function(e){let{getConfig:t,storage:n,queryParams:r,logPlugin:i}=e;const o=t("tcfv2.reprompt",{version:0,chance:0}),a=n.getRepromptVersion();let s=n.getTCData().repromptVersion;const{rollbackGeoVariant:d}=t("tcfv2.gvlMigration",{rollbackGeoVariant:!1});if(d){const{hasBeenReprompted:e,newUser:t,migrated:r}=n.getGVLGeoMigrationStatus();s=!e&&(!t||t&&!r)&&s<6?o.version:s}const c=s||a.version||0,l=!r.gdpr_consent&&c<o.version&&a.chance<o.chance;i(`reprompt - should: ${l}, config chance: ${o.chance}, user chance: ${a.chance}, config version: ${o.version}, user version: ${c}`);const u={version:o.version,chance:a.chance};return{shouldRepromptUser:l,debugRepromptData:{storedTCDataVersion:s,storedRepromptVersion:a.version,chosenRepromptVersion:c,repromptConfigVersion:o.version,shouldRepromptUser:l,userRepromptUpdateVersion:u.version,isConsentStringProvided:!!r.gdpr_consent},userRepromptUpdate:u,repromptVersion:c}}({getConfig:r,storage:l,queryParams:d,logPlugin:c});_.shouldReprompt&&w&&(o("clearing molGvlVersion"),b=void 0);const k=d["mol.ads.cmp.stubConsent"],C=d["mol.ads.cmp.stubDissent"];o("stubConsent",k),o("stubDissent",C);const E=d.privacy;E&&t.once("TCFV2 controller ready",(()=>{c('removing "privacy" from url'),(0,je.WH)("privacy")}));const A=r("cmp.model","tcfv2"),P={...e,log:o.extend("controller"),renderPlatform:n||r("tcfv2.renderPlatform",""),storage:l,showUi:E,uiLevel:E&&"Level2",repromptVersion:S,nextRepromptVersion:I.version,tracking:p,tcString:m,addtlConsent:h,nrvString:v,nrvVersion:y,cvlVersion:g,molGvlVersion:b,geo:(null==a?void 0:a.geo.toLowerCase())||"",useGeoDeviceVariantGVL:_.useGeoDeviceVariantGVL,cmpModel:A},x=new Hc(P),{openUi:O,consentStringLastUpdated:D}=x;o("consentStringLastUpdated",D),(0,_c.oP)(),yu(t);const R=new tu({broker:t,log:o.extend("pageUnload"),tracking:p});R.init();const M=r("tcfv2.consentMaxAgeMonths",12),N=bu(M),U=r("tcfv2.allowBanner",!0),{resolve:L,promise:j}=(0,He.PQ)(),B=new ql({broker:t,log:o.extend("eventsHandler"),openUi:U?O:()=>{},pageUnload:R,storage:l,tracking:p,userRepromptUpdate:I,debugRepromptData:T,openBarrier:U?L:()=>{},stubConsent:k,stubDissent:C,controllerHandler:x,gvlGeoMigration:_});var q;_u(B,x),q={consentStringValidFrom:N,userRepromptUpdate:I,shouldReprompt:w,stateHandler:B,stubConsent:k,stubDissent:C},__webpack_require__.g.__tcfapi("addEventListener",2,(async e=>{const t=e.repromptVersion||0,n=((e,t)=>{let{shouldReprompt:n,userRepromptUpdate:r,dmgMediaRepromptVersion:i,consentStringValidFrom:o}=t;return(e=>e.cached)(e)?"cached":(e=>"cmpuishown"===e.eventStatus)(e)?"uiOpened":(e=>"tcloaded"===e.eventStatus&&!e.tcString.length)(e)?"newUser":((e,t)=>Ec(e.tcString).lastUpdated<(t||0))(e,o)?"tcStringExpired":((e,t,n,r)=>"tcloaded"===e.eventStatus&&e.tcString.length&&t&&r<n.version)(e,n,r,i)?"repromptUser":(e=>"useractioncomplete"===e.eventStatus)(e)?"uiClosed":"loaded"})(e,{...q,dmgMediaRepromptVersion:t});q.stateHandler.handleAction(n,{tcData:e})})),x.loadController(),(!(0,_c.hd)()||w||(D||0)<N)&&(c("waiting for barrier to unblock"),await j);const F=lo("getValidTCData"),V=lo("getConsentDegree");V.then((e=>{c("consent: ",e),s("cmp.consent",e)})),await new el({validTCDataP:F,log:o.extend("bouncer"),registerPluginBouncer:e.registerPluginBouncer}).setup(),async function(e){let{controllerHandler:{tcfv2Version:t,tcfv2UiVersion:n},log:r,pValidConsentDegree:i,broker:o,validTCDataP:a,molGvlVersion:s,cmpModel:d}=e;const c=new Promise((async e=>{const[o,c]=await Promise.all([a,i]);r("consentDegree",c);const l=Ec(o.tcString);r("decoded:",l);const u=l.vendorListVersion,p={cmp:d,cmpVersion:`${t.length?t:"DEV"} ${n.length?n:"DEV"}`,consent:c,gdpr:{iabv:String(u)},cmpId:l.cmpId,molGvlVersion:s};r("bidmax targeting:",p),e(p)}));o.register("call for page analytics",(()=>c))}({controllerHandler:x,log:o.extend("bidmaxTracking"),pValidConsentDegree:V,broker:t,validTCDataP:F,molGvlVersion:b,cmpModel:A}),(async e=>{const{broker:t,log:n}=e,r=(async e=>{let{validTCDataP:t,pValidConsentDegree:n,log:r,broker:i,getConfig:o,cmpModel:a}=e;const s=o("tcfv2.par",{vendorIds:{gdpr:[755]},purposeIds:{gdpr:[1,3,4]}}),d=await t,c=await n;r("consentDegree",c);const l=Ec(d.tcString).vendorListVersion,u={consent:tl[c],gdpr:d.gdprApplies?"1":"0",gdpr_consent:d.tcString,cmp:a,iabv:l},p=await ln("tcfv2.personalisedAds",s);u.google_consent=p;const f=p?0:1,h=p?u:{...u,npa:f};return r("dfp targeting:",h),h})(e);t.emit("set page level targeting",r),((e,t)=>{let{broker:n,getConfig:r,log:i}=e;r("tcfv2.setGptPersonalisedAdsState",!0)&&n.once("gpt initialized",(async e=>{(await t).google_consent?i("google personalised ads enabled"):(i("setting non-personalised ads"),e.pubads().setRequestNonPersonalizedAds(1))}))})(e,r);const i=await r,o=i.google_consent?0:1,a={cust_params:{...i},npa:o};n("video tags",a),t.emit("sync video tags update",a),n("done with gpt")})({broker:t,log:o.extend("gpt"),getConfig:r,validTCDataP:F,pValidConsentDegree:V,cmpModel:A});const z=await F;t.emit("TCData",z),t.on("openCmpBanner",(()=>{B.handleAction("openRequest",{openRequest:{reason:"userRequest"}}),x.openUi({uiLevel:"Level2",reason:"userRequest"})})),t.register("check vendor consent",iu),c("resume loading ads bundle...")}Tu.isAdsFreeSupported=!0;const Iu=Tu;(0,Yt.fo)("botsPlugin",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},init:function(e){let{getConfig:t,setConfig:n}=e;const r=function(e){return e("bots",[]).some((e=>{let{ip:t,ua:n}=e;const r=PageCriteria.clientIP===t;return n?r&&navigator.userAgent===n:r}))}(t)||/(?:[bB]ot|BOT|GrapeshotCrawler)s?\b/.test(navigator.userAgent);n("bots.isBotDetected",r)},run:function(e){let{broker:t,getConfig:n}=e;t.emit("set page level targeting",{bot:n("bots.isBotDetected")})}}),(0,Yt.fo)("browserResolutionPlugin",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r}=e;if(n("bots.isBotDetected"))return;const i=()=>{const{width:e,height:n}=(0,je.ap)();r("setting browserResolution page-level targeting",e,n),t.emit("set page level targeting",{sw:e,sh:n}),t.emit("sync video tags update",{cust_params:{sw:e,sh:n}})};window.addEventListener("resize",(0,J.Ds)(i,300)),i()}}),(0,Yt.fo)("pageArea",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t}=e;const n=()=>{t.emit("set page level targeting",{area:__webpack_require__.g.adAreaId,subarea:__webpack_require__.g.adSubareaId})};t.on("set adSubareaId",(e=>{__webpack_require__.g.adSubareaId=e,n()})),n()}}),(0,Yt.fo)("visits",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:async function(e){let{broker:t,getConfig:n,log:r}=e;const i=await async function(e,t){let[n,r,i]=await Promise.all([Cu(e)?Eu(t):{},Au(e,t),Pu(t)]);t("cmpData",n),t("rtaData",r),t("visits",i);const{visitId:o}=r,a=localStorage.getItem(ku);return o&&a!==o&&(t("visitId changed:",{lastKnownVisitId:a,visitId:o}),localStorage.setItem(ku,o),i++,t("bumping visit count",i),localStorage.setItem(Su,""+i)),{...n,...r,visits:i}}(n,r),{visits:o}=i;r("targeting",i),t.emit("set page level targeting",{visits:o}),t.register("call for page analytics",(()=>i))}});const Su="mol.ads.visits.counterInt",ku="mol.ads.visits.lastKnownVisitId",Cu=e=>e("plugins.enabled").includes("tcfv2")&&e("tcfv2.enabled")||e("plugins.enabled").includes("cmp");async function Eu(e){const t=Ec(await new Promise((e=>{__webpack_require__.g.__tcfapi?__webpack_require__.g.__tcfapi("getTCData",2,(t=>{let{tcString:n}=t;e(n)})):__webpack_require__.g.__cmp&&__webpack_require__.g.__cmp("getConsentData",null,(t=>{let{consentData:n}=t;e(n)}))}))).created,n=Math.floor((Date.now()-t.getTime())/1e3/60/60/24);return e("days since cmp created:",n),{cmpCreated:t,cmpDays:n}}async function Au(e,t){if(__webpack_require__.g.RTA&&__webpack_require__.g.RTA.ids&&__webpack_require__.g.RTA.ids.then){const n=e("visits.rtaDataTimeout",5e3),{results:r}=await(0,He.Ye)(n,[__webpack_require__.g.RTA.ids]);if(r.length){const{created:e,visitId:n}=r[0],i=Math.floor((Date.now()-e)/1e3/60/60/24);return t("days since RTA created:",i),{rtaCreated:e,rtaDays:i,visitId:n}}}return{}}async function Pu(e){const t=parseInt(localStorage.getItem(Su));return isNaN(t)?(async()=>{e("no local storage found, trying to fetch visits count from cookie"),await Promise.race([Nn(),(0,He.Vs)(200)]);const t=function(){const e=Pn("mol.ads.sessionStarted")||!1;let t=parseInt((0,je.ej)("mol.ads.visits"));return isNaN(t)&&(t=0),e||(xn("mol.ads.sessionStarted",!0),(0,je.zP)("mol.ads.visits",t)),t}();return e("cookie visits:",t),localStorage.setItem(Su,""+t),t})():t}(0,Yt.fo)("trackers.quantcast.userSync",{purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,log:n}=e;t.register("provide prebid config",(()=>({userSyncConfig:{userIds:[{name:"quantcastId"}]}})))},vendorIds:{gdpr:[11]}});const xu=(0,y.x)("AdsRefresher");class Ou{constructor(){let{broker:e,inactiveTime:t=1e4,events:n=[[document,["mousemove","keypress","scroll","mousewheel","touchmove"]],[window,["focus","scroll"]]],log:r=xu}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.priv={broker:e,events:n,inactiveTime:t,handleUserActivity:(0,J.FU)(Du.bind(this),t-10),lastActive:new Date,log:r}}get active(){const e=this.priv;return new Date-e.lastActive<e.inactiveTime}start(){const e=this.priv;Nu.call(this,((t,n)=>{t.addEventListener(n,e.handleUserActivity)})),Mu.call(this)}stop(){const e=this.priv;Nu.call(this,((t,n)=>{t.removeEventListener(n,e.handleUserActivity)})),e.timer=clearTimeout(e.timer)}whenActive(){return new Promise((e=>{this.active?e():this.priv.broker.once("user active",e)}))}}function Du(){const e=this.priv,t=!this.active;e.lastActive=new Date,t&&(this.priv.log("user became active"),e.broker.emit("user active"))}function Ru(){const{broker:e}=this.priv;this.active?(this.priv.log.debug("user is still active"),Mu.call(this)):(this.priv.log("user became inactive"),e.emit("user inactive"),e.once("user active",Mu.bind(this)))}function Mu(){this.priv.timer=setTimeout(Ru.bind(this),this.priv.inactiveTime)}function Nu(e){for(const[t,n]of this.priv.events)if(t)for(const r of n)e(t,r)}(0,Yt.fo)("trackers.viewability",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},disableIfNoAdsServable:!0,run(e){let{broker:t,log:n,getConfig:r}=e;const i=new ls({threshold:[0,.5,1]}),o="mol"===r("viewability.activityMonitor","mol")?new Ou({broker:t}):(()=>{let e,t;if(void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),!e)throw new Error("Can't create activity monitor");const n={capture:!0,passive:!0};let r,i,o=0;const a=function(){i=new Promise((e=>{r=e}))};a();const s=()=>{if(document[e]){if(r)return;a()}else{if(!r)return;o=Date.now();const e=r;r=void 0;try{e()}catch(e){console.warn(e)}}};return s(),document.addEventListener(t,s,n),window.addEventListener("pagehide",s,n),window.addEventListener("pageshow",s,n),{whenActive:()=>i,start:()=>{},stop:()=>{},get active(){return Date.now()-o}}})(),a=new Map;t.on("track viewability",((e,r)=>{(async(e,r)=>{let s;a.set(e,r);let d=0;i.observe(r,(async r=>{const i=r.intersectionRatio;if(d=r.intersectionRatio,await o.whenActive(),r.isIntersecting){if(!s&&r.intersectionRatio>=.5){let r=!0;const o=()=>{r&&i<1&&d<1?(r=!1,a()):(s=void 0,n("ad viewable",e),t.emit("ad viewable",e))},a=()=>{s=setTimeout(o,500)};a()}}else s&&(clearTimeout(s),s=void 0)}))})(e,r)})),t.on("untrack viewability",(e=>(e=>{const t=a.get(e);t&&(i.unobserve(t),a.delete(e))})(e))),t.once("dom ready",(()=>{o.start()}))}}),(0,Yt.fo)("trackers.admantx",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,getConfig:n,log:r}=e;r("starting");const{request:i,endPoint:o}=n("trackers.admantx",Uu),{href:a}=window.location;i.body=a.substring(0,a.indexOf("?"))||a;const s=JSON.stringify(i),d=`${o}?request=${s}`,c={"Content-Type":"text/plain","Content-Length":s.length,Connection:"keep-alive"},l=new Promise(((e,t)=>{fetch(d,{method:"GET",headers:c}).then((async n=>{const r=await n.json(),{info:o}=r;if("OK"!==o)t(new Error(`Admantx fetch error: ${o}.`));else{const t=(i.filter.includes("default")?Lu:i.filter).map((e=>r[e])).filter((e=>e)).reduce(((e,t)=>[...e,...t.map((e=>e.name))]),[]);e(t)}})).catch(t)})).catch((e=>r(e)));t.register("dmp","admantx",(async()=>await l)),t.emit("set page level targeting",l.then((e=>({"ias-bsp":e}))));const u=await l||[];r("targeting:",u),t.emit("admantx loaded"),t.register("call for page analytics",(()=>({admantx:u}))),t.emit("send with rta page unload",{brandSafety:u.includes("ias_safe")?"safe":"unsafe"})},vendorIds:{gdpr:[278]}});const Uu={endPoint:"https://euasync01.admantx.com/admantx/service",request:{key:"d4d1cdf427f06ebc6ee7e0a3ffbcaecdfbfe517eca18a41d9126f88bdb16e7f0",type:"url",method:"descriptor",mode:"async",decorator:"json",filter:["admants"]}},Lu=["categories","feelings","entities","admants"],ju=function(){const e=function(){const e=[];for(let t=1;t<=20;t++)e.push(t);return e}();return{getTags:function(){const t=function(){if(e.length){const t=(0,zn.MX)(0,e.length-1);return e.splice(t,1)}}();if(t)return{adx_channel:t}}}};function Bu(e){let{broker:t}=e;const n=ju();t.register("get tags",(()=>{const e=n.getTags();return e&&[e]})),t.register("get video tags",(e=>{const{pos:t}=e,r=n.getTags();if("jwplayer"===t&&r)return{cust_params:r}}))}Bu.ccpa={enabledIfDissent:!0},Bu.gdpr={enabledIfDissent:!0},Bu.disableIfNoAdsServable=!0;const qu=()=>{const e=[window.screen.width,window.screen.height],t=t=>t[0]===e[0]&&t[1]===e[1];__webpack_require__.g.DM.molFeMobileutils.isLandscape()&&e.reverse();const n={iphone:{iphone6:()=>t([375,667]),iphone6p:()=>t([414,736]),iphone5:()=>t([320,568])},other:{ipad:__webpack_require__.g.DM.molFeMobileutils.isIPad,other:()=>!__webpack_require__.g.DM.molFeMobileutils.isMobile()&&!(0,je.bP)(),windows10:je.bP}},r={touch:()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0};function i(){const e=n[PageCriteria.device]||{};return Object.keys(e).find((t=>e[t]()))||PageCriteria.device}return{getTags:()=>[{device:i(),device_features:Object.keys(r).filter((e=>r[e]()))}]}};function Fu(e){let{broker:t,log:n}=e;const r=qu(),[i]=r.getTags();n(i),t.emit("set page level targeting",i)}function Vu(e){let{broker:t,getConfig:n}=e;n("bots.isBotDetected")||t.emit("set page level targeting",{random:[window.PageCriteria.pageViewId],impid:[(0,zn.kb)()]})}function zu(e){let{broker:t,getConfig:n}=e;const r=n("plugins.ixIdentify.scriptUrl","//js-sec.indexww.com/ht/p/184669-186298276891027.js"),i=t.invoke("load script",r,"headertag");t.register("prebid prerequisites",(()=>i))}Fu.ccpa={enabledIfDissent:!0},Fu.gdpr={enabledIfDissent:!0},Fu.disableIfNoAdsServable=!0,Vu.ccpa={enabledIfDissent:!0},Vu.gdpr={enabledIfDissent:!0},Vu.disableIfNoAdsServable=!0,zu.pluginSetup=e=>{let{getConfig:t,setConfig:n}=e;const r=t("plugins.enabled"),i=r.findIndex((e=>"prebid"===e));if(~i){const e=i-1;n("plugins.enabled",[...new Set([...r.slice(0,e),"trackers.ixIdentity",...r.slice(e)])])}};const Wu=zu;async function Hu(e){let{getConfig:t}=e;const n=t("plugins.smartclip.url","https://sync.sxp.smartclip.net/sync?type=red&dsp=10");In({url:n})}function Zu(e){let{broker:t}=e;__webpack_require__.g._tfa=__webpack_require__.g._tfa||[],__webpack_require__.g._tfa.push({notify:"event",name:"page_view",id:1125455}),document.getElementById("tb_tfa_script")||t.invoke("import script","//cdn.taboola.com/libtrc/unip/1125455/tfa.js",{id:"tb_tfa_script"})}zu.vendorIds={gdpr:[10]},zu.purposeIds={gdpr:"N/A"},Hu.vendorIds={gdpr:[115]},Hu.purposeIds={gdpr:"N/A"},Zu.vendorIds={gdpr:[42]},Zu.purposeIds={gdpr:[1]};const $u=[{size:[300,600],url:"https://scripts.dailymail.co.uk/static/mol-fe/static/mol-fe-xpmodule-news-search/1.13.0/mpuCarousel.html?forceIto=Mol-Carousel&startTab=entertainment"},{size:[970,250],image:"https://www.dailymail.co.uk/static/mol-adverts/creatives/newzit-static-billboard.jpeg"},{size:[160,600],image:"https://www.dailymail.co.uk/static/mol-adverts/creatives/newzit-static-skyscrapper.png"}],Gu={vendorIds:{gdpr:[755]},purposeIds:{gdpr:[1,3,4]},legIntPurposeIds:{gdpr:[3,4]}};(0,Yt.fo)("adserver",{init:async function(e){let{broker:t,log:n,addPlugins:r,removePlugins:i,getConfig:o,setConfig:a,pluginsAlreadyRun:s,ownName:d,checkPluginBouncer:c}=e;const l=o("bidmax.dispatcher.url","//crta.dailymail.co.uk");function u(){Qu&&(Qu(),Qu=null),i([d]),n("bailing")}if(!s.has("tcfv2")){if(Yu++>10||Qu)return void u();n("tcfv2 hasnt ran yet");const e=o("plugins.enabled");e.splice(e.indexOf(d),1);const r=["tcfv2","mvt"].filter((e=>!s.has(e))).find((t=>e.includes(t)));let i;return r?(n("re-queing just after",r),i=e.indexOf(r)):(n("cant find tcfv2 or any way to dynamically enable it, holding off gpt.js loading"),Qu=function(e,t){const n=[];let r=e.intercept("import script","//www.googletagservices.com/tag/js/gpt.js",((e,i)=>{r&&(n.push(i),t("holding off gpt loading"))}));return()=>{r(),r=null,n.length&&(t("resume loading real gpt"),n.forEach((e=>e())))}}(t,n),n("re-queuing as last plugin"),i=e.length-1),e.splice(i+1,0,d),a("plugins.enabled",e),"not yet"}if(n("starting"),await c("adserver",Gu))return n("google enabled"),void u();n("user seems to have dissented to google, running own adserver"),Qu||t.intercept("import script","//www.googletagservices.com/tag/js/gpt.js",(()=>{n("intercepting real gpt loading")}));const p=o("adserver.ads",$u);r(["analytics.headerbidderWinner"]);const f=__webpack_require__.g.googletag=__webpack_require__.g.googletag||{};f.cmd=f.cmd||[];const h={},g={setTargeting:(e,t)=>(void 0!==t&&(h[e]=[t]),g),addEventListener:(e,n)=>(t.on("gpt event",e,n),g),setCentering:e=>g,enableAsyncRendering:()=>g,getTargetingKeys:()=>Object.keys(h),getTargeting:e=>h[e]||[],setRequestNonPersonalizedAds:()=>{},setPrivacySettings:()=>{},getSlots:()=>Object.values(m)};f.pubads=()=>g;const m={};f.enableServices=()=>{n("enableServices")},f.getVersion=()=>"proprietary",f.display=e=>{const r=m[e];if(r.displayed)return void n.warn("slot",e,"already displayed, ignoring multiple calls");r.displayed=!0,n("display:",e,r.sizes);const i=e,[o]=r.getTargeting("hb_pb");if(o>0&&"oopGptSlot"!==r.slotType){n("prebid bid",o,"rendering ad:",e);const{document:a,size:s,adElement:d}=Ku(i),[c]=r.getTargeting("hb_adid");r.adElement=d,__webpack_require__.g.pbjs.renderAd(a,c);const l=!1;t.emit("gpt event","slotRenderEnded",{size:s,slot:r,isEmpty:l})}else{const e=document.getElementById(i),o=p.filter((e=>{let{size:t}=e;return r.sizes.find((e=>{let[n,r]=e;return t[0]===n&&t[1]===r}))}));if(o.length){const i=o[Math.floor(o.length*Math.random())];n("found house ad for size:",i.size),async function(e,t,n,r,i,o){const a=document.createElement("div"),{size:s,id:d,click:c}=e,[l,u]=s;if(e.url){const t=document.createElement("iframe");t.width=l,t.height=u,t.scrolling="no",t.marginHeight=0,t.marginWidth=0,t.frameBorder=0,t.src=e.url,a.appendChild(t)}else if(e.image){const t=document.createElement("img");t.width=l,t.height=u,t.src=e.image;const n=document.createElement("a");c&&(n.href=await async function(e,t,n,r){Ju||(Ju=new Promise((async t=>{const n=await e.invokeAll({message:["call for page analytics"],timeout:2e3}),r={timestamp:__webpack_require__.g.adverts.startTime,referrer:document.referrer,localStorage:void 0,memory:void 0,indexedDB:void 0,viewability:void 0,...n.reduce(((e,t)=>({...e,...t})),{}),event_type:"bidmax",type_version:2,version:je.queryParams.bidmax||"6.13.0"};t(r)})));const i={timeAtSend:Date.now()-__webpack_require__.g.adverts.startTime,...await Ju,type:"custom",payload:{module:"adserver",event:"click",id:n}};return`${t}/_/e?r=${encodeURIComponent(r)}&e=${btoa(JSON.stringify(i))}`}(i,o,d,c)),n.appendChild(t),a.appendChild(n)}else{if(!e.html)return void t.warn("unsupported creative:",e);a.innerHTML=e.html}n.appendChild(a),r.adElement=a;const p={size:s,slot:r,isEmpty:!1,creativeId:d,serviceName:"proprietary"};i.emit("gpt event","slotRenderEnded",p)}(i,n,e,r,t,l)}else"oopGptSlot"===r.slotType?n("no header bidder or house ad found for out of page slot"):r.getCollapseEmptyDiv()?(n("no header bidder or house ad found, collapsing:",e),e.style.height="0px",e.style.display="none"):n("no header bidder or house ad found, but NOT collapsing it"),t.emit("gpt event","slotRenderEnded",{slot:r,isEmpty:!0})}},g.refresh=(e,t)=>{n("refresh:",e,t)},f.defineSlot=(e,t,r)=>{n("defineSlot:",r);const i=Xu(n,e,r,t);return m[r]=i,i},f.defineOutOfPageSlot=(e,t)=>{n("defineOutOfPageSlot:",t);const r={...Xu(n,e,t,[]),slotType:"oopGptSlot"};return m[t]=r,r},f.destroySlots=e=>{n("destroySlots:",e),e.forEach((t=>{const n=t.adElement;n&&n.parentNode.removeChild(n),delete e[t]}))}},run:function(e){let{log:t}=e;const n=googletag.cmd,r=e=>{try{e()}catch(e){t.warn("Error running function queued up in googletag.cmd:",e)}};googletag.cmd.push=r,n.forEach(r)}});const Ku=e=>{const t=document.getElementById(e),[n]=t.getClientRects(),r=n?Math.ceil(n.width):0,i=n?Math.ceil(n.height):0,o=document.createElement("div");o.style.border="0pt none",o.style.margin="0 auto",o.style.padding="0",o.style.minHeight="1px",t.appendChild(o);const a=document.createElement("iframe");return n&&(a.width=r+"",a.height=i+""),a.scrolling="no",a.marginWidth="0",a.marginHeight="0",a.style.marginTop="0px",a.style.marginLeft="0px",a.style.border="0pt none",o.appendChild(a),{document:a.contentDocument,size:[r,i],adElement:o}},Xu=(e,t,n,r)=>{const i={};let o=!1;const a={getAdUnitPath:()=>t,getSlotElementId:()=>n,getTargetingMap:()=>i,setTargeting:function(e,t){return void 0!==t&&(i[e]=[t]),a},getTargeting:e=>i[e]||[],addService:()=>a,setCollapseEmptyDiv:e=>(o=e,a),getCollapseEmptyDiv:()=>o,sizes:r,getTargetingKeys:()=>Object.keys(i),targeting:i};return a};let Ju,Yu=0,Qu=null;(0,Yt.fo)("adsFree",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,isAdsFreeUser:n,log:r,registerPluginBouncer:i,setConfig:o,getConfig:a}=e;if(!a("plugins.adsFree.enabled",!1))return;r("Starting..");const s=n();s&&(i(((e,t)=>{r(`checking ${e}`,Object.keys(t));const n=t.isAdsFreeSupported;return!n&&r("bouncing",e),n})),o("slots.enabled",{}),document.documentElement.classList.add("molads_ads_free")),t.register("call for page analytics",(()=>({adsFreeUser:s})))},isAdsFreeSupported:!0}),(0,Yt.fo)("blockthrough",{init:async function(e){let{getConfig:t,setConfig:n,removePlugins:r,broker:i,log:o,ownName:a}=e;n("bidmax.reportPlugins",[...t("bidmax.reportPlugins",[]),a]);const s=t("plugins.enabled").filter((e=>e.startsWith("abe.")));o("removing plugins:",s),r(s),o("loading blockthrough script"),i.invoke("import script","//btloader.com/tag?o=5761266544017408&upapi=true").then((()=>{o("blockthrough script loaded")})),i.on("ad delayed",(e=>{let{id:t}=e;return window.postMessage("mol-ads/events/ad-delayed:"+t,"*")})),i.on("resuming delayed ad",(e=>{let{id:t}=e;return window.postMessage("mol-ads/events/ad-resumed:"+t,"*")}))},purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[815]}}),(0,Yt.fo)("conditionalLoad",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,getConfig:n,log:r}=e;r("starting"),t.register("call for page-unload",(()=>({sdoc:ep.length})));const i=n("plugins.slots.loadConditions.constants",{});t.on("ad rendered",((e,t)=>{let{size:n,slot:r,isEmpty:i}=t,o=r.molAd.pos;"oopGptSlot"===r.molAd.slotType&&(o+="-oop"),tp.renderedAds[o]={size:n,isEmpty:i},rp()})),t.intercept("slot defined",((e,t)=>{let[n,{pos:o}]=e;const a=(0,Dt.get)(o);if(tp.definedPositions.push(o),a&&void 0!==a.loadCondition){const e="string"==typeof a.loadCondition?i[a.loadCondition]:a.loadCondition;r("delaying slot",o,"due to condition:",e),ip(new np(e,{pos:o}),t)}else t();rp()})),t.intercept("request slot",((e,t)=>{let[n,{pos:o,slotType:a}]=e;const s=(0,Dt.get)(o);if("oopGptSlot"===a&&void 0!==s.oopLoadCondition){const e="string"==typeof s.oopLoadCondition?i[s.oopLoadCondition]:s.oopLoadCondition;r("delaying oop slot",o,"due to condition:",e),ip(new np(e,{pos:o}),t)}else t();rp()}))},disableIfNoAdsServable:!0});let ep=[];const tp={renderedAds:{},definedPositions:[]};class np{constructor(e,t){this.context=t,this.rootDescriptor=e,this.do=this.do.bind(this),this.not=this.not.bind(this)}do(e){if("object"==typeof e){const t=Object.keys(e)[0];if("function"==typeof this[t])return this[t](e[t]);throw new Error("error calling fnName "+t)}return e}not(e){return!this.do(e)}and(e){return!e.find(this.not)}or(e){return!!e.find(this.do)}isAdSmallerThan(e){let{pos:t,size:n}=e;return((e,t)=>{let[n,r]=e,[i,o]=t;return n<i&&r<o})(tp.renderedAds[t].size,n)}isMasterRendered(){return!!tp.renderedAds[this.context.pos]}isPosDefined(e){return!!~tp.definedPositions.indexOf(e)}isPosEmpty(e){return tp.renderedAds[e].isEmpty||!tp.renderedAds[e].size}isPosRendered(e){return tp.renderedAds.hasOwnProperty(e)}isViewPortWidthLargerThan(e){return(0,je.ap)().width>e}isViewPortHeightLargerThan(e){return(0,je.ap)().height>e}isIE(){return je.JW}run(){return this.do(this.rootDescriptor)}}const rp=(0,J.yS)((()=>{ep=ep.filter((e=>{let{condition:t,done:n}=e;try{return!t.run()||(n(),!1)}catch(e){return console.error("conditional-load: ",e),!1}}))}));function ip(e,t){ep.push({condition:e,done:t})}(0,Yt.fo)("domain",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){let{broker:t}=e;const n=(e=>{const t=e.match(/(www[0-9]*?\.)?(.[^/:]+)/i);return(null==t?void 0:t[2])&&"string"==typeof t[2]&&t[2].length>0&&t[2]})(__webpack_require__.g.location.hostname),r=n&&n.replace(/\./g,"_");t.emit("set page level targeting",{location:r}),t.register("provide domain",(()=>n))}});const op=(0,J.ri)((e=>{let{getConfig:t,broker:n,pageCriteria:r,inlineModuleIdsString:i=""}=e;return new Promise((e=>{const o=n.until("dom ready");if("femail"===(null==r?void 0:r.channel)&&"femailfashionhub"===(null==r?void 0:r.subchannel))e(!0);else{const n=t("plugins.fff.inlineModuleIds",["62328562","62328544","62032338","62451577","62451566","62451576","62451540","62257892"]);i.split(/\s+/).some((e=>n.includes(e)))?e(!0):o.then((()=>{e(!!document.getElementById("fff-inline")||!!document.querySelector(".fff-m-inline"))}))}}))}));function ap(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sp(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function dp(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,lp(e,t,"get"))}function cp(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,lp(e,t,"set"),n),n}function lp(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}(0,Yt.fo)("fff",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},disableIfNoAdsServable:!0,run:e=>{let{broker:t,getConfig:n,log:r,pageCriteria:i}=e;op({getConfig:n,broker:t,pageCriteria:i,inlineModuleIdsString:__webpack_require__.g.inlineModules}).then((e=>{e?(r("fff found in page"),t.emit("set page level targeting",{fff:!0})):r("fff not found in page")}))}}),(0,Yt.fo)("imageGallery",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run(e){let{broker:t}=e;t.on("image gallery open",(()=>{t.emit("pause refreshing ads")})),t.on("image gallery close",(()=>{t.emit("resume refreshing ads")}))}}),(0,Yt.fo)("taboola.Outstream",{purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,getConfig:n,log:r}=e;const i="taboola-mid-article-thumbnails",o=n("taboola.outStream.paragraphIndex",4),a={insertMethod:e=>{!function(e,t){const n=document.createElement("div");n.id=e,n.classList.add("watermark"),t.parentElement.insertBefore(n,t)}(i,e),n("plugins.enabled").includes("taboola.slots")?t.emit("slot mounted",{pos:"taboola_outstream"}):t.emit("add taboola",i,{id:i,position:"outStream"})},log:r,margin:n("taboola.outStream.margin",{top:30,bottom:60}),sourcePlugin:"taboolaOutstream",targetParagraphIndex:o};r("requesting placement",o),t.register("placement requests",(()=>a))},vendorIds:{gdpr:[42]}});var up=new WeakMap,pp=new WeakMap,fp=new WeakMap,hp=new WeakMap,gp=new WeakMap,mp=new WeakMap,vp=new WeakMap;class yp{constructor(e){let{broker:t,log:n,rta:r}=e;sp(this,up,{writable:!0,value:void 0}),sp(this,pp,{writable:!0,value:!1}),sp(this,fp,{writable:!0,value:void 0}),sp(this,hp,{writable:!0,value:void 0}),sp(this,gp,{writable:!0,value:[]}),ap(this,"sentEventTypes",{}),ap(this,"fireRTAEvent",(e=>{dp(this,fp).call(this,"firing RTA event",e),dp(this,hp).tedEvent("page_event",{action:"set",name:"taboola",value:e})})),ap(this,"fireRTAIncrementEvent",(e=>{dp(this,fp).call(this,"firing RTA increment event:",e),dp(this,hp).tedEvent("page_event",{action:"increment",name:e})})),sp(this,mp,{writable:!0,value:e=>{const t=dp(this,gp).find((t=>{let[,n]=t;return e.detail.mode===n.mode&&e.detail.placement===n.placement})),n=dp(this,gp).find((t=>{let[,n]=t;return e.detail.mode.includes(n.mode)&&e.detail.placement.startsWith(n.placement)}));return(null==t?void 0:t[0])||(null==n?void 0:n[0])}}),sp(this,vp,{writable:!0,value:(e,t)=>{const n=!this.sentEventTypes[e];this.sentEventTypes[e]=!0,dp(this,fp).call(this,e," event for",t),dp(this,up).emit("send event to bidmax",{type:"custom",payload:{module:"taboola",widget:t,type:e,first:n}})}}),ap(this,"fireRenderEvent",(e=>{dp(this,fp).call(this,"render event, mode:",e.detail.mode,", placement:",e.detail.placement);const t=dp(this,mp).call(this,e);if(!dp(this,pp)&&e.detail.mode.includes("thumbnails-feed")&&(cp(this,pp,!0),this.fireRTAEvent({status:"widgetRendered",placement:"thumbnails-feed"})),t)dp(this,vp).call(this,"render",t),dp(this,up).emit("taboola render"),this.fireRTAIncrementEvent("taboolaRender");else{const{itemCount:t,baseMode:n}=(null==e?void 0:e.detail)||{};0===t&&(dp(this,vp).call(this,"containerRender",n||"(none)"),this.fireRTAIncrementEvent("containerRender"),dp(this,up).emit("taboola container render"))}})),ap(this,"fireVisibleEvent",(e=>{dp(this,fp).call(this,"visible event, mode:",e.detail.mode,", placement:",e.detail.placement);const t=dp(this,mp).call(this,e);t&&(dp(this,vp).call(this,"visible",t),dp(this,up).emit("taboola visible"),this.fireRTAIncrementEvent("taboolaView"))})),ap(this,"fireClickEvent",(e=>{dp(this,fp).call(this,"click event:",e);const t=dp(this,mp).call(this,e);t&&(dp(this,vp).call(this,"click",t),this.fireRTAIncrementEvent("taboolaClick"),this.fireEvent("taboola click"))})),ap(this,"fireEvent",(e=>{dp(this,fp).call(this,e," event"),dp(this,up).emit(e)})),ap(this,"addWidget",((e,t)=>{dp(this,gp).push([e,t])})),cp(this,up,t),cp(this,fp,n),cp(this,hp,r)}}(0,Yt.fo)("taboolaAds",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,log:n}=e;if(bp=n,bp("taboola running"),!(0,v.U2)("taboola",{enabled:!0}).enabled)return void bp("taboola disabled, bailing");const r=new yp({broker:t,log:bp.extend("tracking"),rta:__webpack_require__.g.RTA});t.on("add taboola","pufflist",(e=>{const n=(0,v.U2)("taboola."+e.position,{enabled:!1});n.enabled&&(r.addWidget(e.position,{mode:n.mode,placement:n.placement}),kp(t,e,n,r))})),t.on("add taboola",((e,n)=>{"pufflist"!==e&&(bp("adding taboola",e,n),Ep(t,n,r))})),(0,v.U2)("taboola.infiniteScroll",{enabled:!1}).enabled&&Cp(t,r)},vendorIds:{gdpr:[42]}});let bp,_p=0;const wp={taboola:null},Tp=e=>{var t;null===(t=__webpack_require__.g.RTA)||void 0===t||t.tedEvent("page_event",{action:"set",name:"taboola",value:e})},Ip=(e,t,n,r)=>{const i=((e,t)=>{var n,r;if(wp.taboola)return wp.taboola;const i=(0,v.U2)("taboola.scriptDir","dailymail-row"),o=(0,v.U2)("taboola.pageType","article"),a="//cdn.taboola.com/libtrc/"+i+"/loader.js";window._taboola=window._taboola||[],wp.taboola=window._taboola;const s=wp.taboola;s.push({[o]:"auto"}),s.push({listenTo:"render",handler:t.fireRenderEvent}),s.push({listenTo:"visible",handler:t.fireVisibleEvent}),s.push({listenTo:"nocontent",handler:()=>t.fireEvent("taboola nocontent")}),s.push({listenTo:"click",handler:()=>t.fireEvent("taboola click")});const d=document.createElement("script"),c=document.querySelector("script");return Tp({status:"scriptLoading"}),d.addEventListener("load",(()=>Tp({status:"scriptLoaded"}))),d.async=!0,d.src=a,d.onerror=()=>e.emit("taboola failed to load"),c.parentNode.insertBefore(d,c),null===(n=window.performance)||void 0===n||null===(r=n.mark)||void 0===r||r.call(n,"tbl_ic"),s})(e,r);i.push({container:t,mode:n.mode,placement:n.placement,targetType:n.targetType}),i.push({flush:!0})},Sp=(e,t,n,r)=>{const{containerStr:i,platform:o}=n,a=i+t,s=((e,t)=>"mobile"===t?`<li id="${e}"></li>`:`<div id="${e}" style="min-height: 280px;"></div>`)(a,o);return e.insertAdjacentHTML(r,s),a},kp=(e,t,n,r)=>{let{start:i,every:o}=n;const a=document.getElementById(t.id);for(const t of a.querySelectorAll("li")){if(t.classList.contains("mpu_puff_wrapper"))continue;if(i--,0!==i)continue;i=o;const a=++_p,s=Sp(t,a,n,"afterend"),d={...n,placement:`${n.placement} ${_p}`,container:s};Ip(e,s,d,r)}},Cp=(e,t)=>{const n=(0,v.U2)("taboola.infiniteScroll",{enabled:!1});if(!n.enabled)return;let{start:r,every:i,platform:o}=n,a=!1;e.on("infinite-list append",(async s=>{if(i)for(const d of s.querySelectorAll((e=>"mobile"===e?"li":"div.article")(o)))if(0===r){const o=++_p,s=Sp(d,o,n,"beforebegin"),c=Object.assign({},n,{placement:n.placement+" "+o,container:s});Ip(e,s,c,t),a||(a=!0,t.addWidget("infiniteScroll",{mode:n.mode,placement:n.placement})),r=i-1}else r--}))},Ep=(e,t,n)=>{const{position:r,id:i}=t,o=(0,v.U2)("taboola."+r,{enabled:!1});o.enabled?(["thumbnail","thumbnailChannel"].includes(r)?(n.addWidget(r,{mode:"thumbnails-feed",placement:o.placement}),Tp({status:"widgetCall",placement:"thumbnails-feed"})):n.addWidget(r,{mode:o.mode,placement:o.placement}),Ip(e,i,o,n)):bp.warn("taboola widget",r,"is disabled, ignoring load request.")};(0,Yt.fo)("page.homepageRenderPlatform",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,isHomepage:n,log:r,pageMeta:i}=e;if(!n)return void r("not homepage, bailing");const o="mobile"===i.renderPlatform;t.register("call for page analytics",(()=>({homepage:!0,renderPlatform:i.renderPlatform}))),r("setting page-level targeting",{mobile:o}),t.emit("set page level targeting",{mobile:o})}});const Ap="mol-ads-control-panel",Pp={abv:"mol-ads-control-panel-abv",cluster:"mol-ads-control-panel-cluster"},xp="mol-ads-control-panel-config";function Op(e){let{broker:t,getConfig:n,doc:r,log:i,win:o}=e;const a=n("controlPanel.scriptURL");a?o.DM.later("molFeReact_LOADED",(async()=>{const{React:e,ReactDOM:s}=o.DM.molFeReact;try{const[i,o]=await Promise.all([t.invoke("load script",a,"MOLAdsControlPanel"),t.invoke("get all plugins")]),d=document.getElementById(Ap)||function(e){const t=document.createElement("div");return t.id=Ap,e.body.appendChild(t),t}(r);s.unmountComponentAtNode(d),s.render(e.createElement(i,{abvCookieName:Pp.abv,allPlugins:Object.keys(o),clusterCookieName:Pp.cluster,configStorageKey:xp,enabledPlugins:n("plugins.enabled",[]),onClose:()=>s.unmountComponentAtNode(d)}),d)}catch(e){Object.values(Pp).forEach(je.kT),localStorage.removeItem(xp),i.error("\n        MOL Ads Control Panel has been requested to load, but cannot. \n        I have deleted the control panel cookies that will affect the behaviour of this site.\n      "),i.error(e)}})):i.error("No configured script url")}(0,Yt.fo)("controlPanel",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run(e){(Object.values(Pp).some(je.ej)||je.queryParams.acp||je.queryParams.adsControlPanel||localStorage.getItem(xp))&&Op(e),e.broker.on("open control panel",(()=>Op(e)))}}),(0,Yt.fo)("performanceMonitor",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,getConfig:n}=e;const r=n("performance.sampleSize",100);n("performance.pageLoad.offsets",[0,5,15]).forEach((e=>setTimeout(function(e){return async()=>{let n=await t.invoke("is page visible?");const i=t.on("page hidden",(()=>{n=!1})),o=await async function(e){return new Promise((t=>{const n=(new Date).getTime();!function e(r){if(0===r){const e=(new Date).getTime()-n;t(e)}else setTimeout((()=>e(r-1)),0)}(e)}))}(r);i.cancel();const a=o/r,s={offset:e,sampleSize:r,visible:n,...(0,zn._b)("delayP1s",a),...(0,zn._b)("delayP100ms",a)};t.emit("send event to bidmax",{type:"custom",payload:{module:"perf-monitor",event:"measure",...s}})}}(e),1e3*e)))}}),(0,Yt.fo)("adNami",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,getConfig:n}=e;const r=n("plugins.adnami.scriptTimeout",500),i={adNami:"off"},o=(0,He.Ye)(r,[new Promise((e=>{window.adsmtag=window.adsmtag||{},window.adsmtag.cmd=window.adsmtag.cmd||[],window.adsmtag.cmd.push((()=>{i.adNami="on",e()}))}))]);t.invoke("import script","https://macro.adnami.io/macro/spec/adsm.macro.4111597d-dc70-4fd8-b25e-7d24d8423e73.js"),t.intercept("slot ready for ad",(async(e,t)=>{let[n,r,a]=e;await o,a.push(i),t(n,r,a)}))},vendorIds:{gdpr:[612]}}),(0,Yt.fo)("fbRemarketingPixel",{purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,log:n,getConfig:r,win:i}=e;const o=r("plugins.fbRemarketingPixel.waitForRequest",!0);if(n("starting"),o&&(n("waiting for request from html"),await t.until("add fb-marketing-pixel")),n("got request to add tracking"),i.fbq)return void n.warn("fbq already defined, bailing");const a=i.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)};i._fbq||(i._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],t.invoke("import script","https://connect.facebook.net/en_US/fbevents.js").then((()=>n("pixel loaded"))),a("init","1401367413466420"),a("track","PageView")},vendorIds:{google:[89],gdpr:"N/A"}}),(0,Yt.fo)("bidCount",{ccpa:{enabledIfDissent:!0},purposeIds:{gdpr:[1]},run:function(e){let{broker:t,log:n}=e;const r={},i=e=>(0,Qe.jj)(e.map((e=>{let{bidderCode:t}=e;return t})));t.register("get tags based on tags",(e=>{const t=e.flat().filter((e=>e&&"bid"===e.type));if(t.length){const e=i(t),{pos:r}=t[0];n(`${r} - unique bidders`,e);const o=e.length;return n(`${r} - bidCount`,o),{bidCount:o}}return n("no bids found"),{bidCount:0}})),t.intercept("collect video tags",((e,t)=>{let[o,a,s]=e;const d=(e,t)=>{if(t&&"bid"===t.type){const{pos:e,offset:o,auctionId:a}=t;r[a]=r[a]||[],r[a].push(t);const s=i(r[a]),d=s.length;n(`${e} - bid received for auctionId: ${a}, offset: ${o}, uniqueBidders: ${s}, bidCount: ${d}`),t.tags.cust_params.bidCount=d}s(e,t)};d(null,{cust_params:{bidCount:0}}),t(o,a,d)})),t.on("bidding ended",((e,t)=>{r[t]&&(n("video auction ended, removing auctionId",t),delete r[t])}))},vendorIds:{gdpr:"N/A"}}),(0,Yt.fo)("maxbid",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,log:n}=e;const r={},i=e=>!isNaN(parseFloat(e))&&isFinite(e),o=e=>[...e].sort(((e,t)=>t.cpm-e.cpm)),a=e=>{const{bidderCode:t,cpm:n,cachedBid:r}=e;if(r){const{bidderCode:e,cpm:t}=r;return{bidderCode:e,cpm:parseFloat(t)}}return{bidderCode:t,cpm:parseFloat(n)}};t.register("get tags based on tags",(e=>{const t=e.flat().filter((e=>"bid"===(null==e?void 0:e.type)&&i(null==e?void 0:e.cpm)));if(!t.length)return;const{pos:r}=t[0],s=t.map(a);n(`${r} - bids:`,s);const d=o(s);n(`${r} - sorted:`,d);const{bidderCode:c,cpm:l}=d[0];return n(`${r} - highest bidder`,c,l),{maxbid:l,maxbidpk:Dp.findIndex((e=>{let[t,n]=e;return t<=l&&l<=n}))+1,maxbid_bidder:c}})),t.intercept("collect video tags",((e,t)=>{let[s,d,c]=e;t(s,d,((e,t)=>{if(t&&"bid"===t.type&&t.cpm&&i(t.cpm)){r[t.auctionId]=r[t.auctionId]||[];const e=a(t),{auctionId:i,offset:s}=t;n(`bid received, auctionId: ${i}, offset: ${s}, bid:`,e),r[t.auctionId].push(e);const d=o(r[t.auctionId]);n(`sorted bids, auctionId: ${i}, offset: ${s}`,d);const{cpm:c,bidderCode:l}=d[0];n(`hightest bid, auctionId: auctionId: ${i}, offset: ${s}`,l,c);const u={...t.tags.cust_params,maxbid:c,maxbidpk:Dp.findIndex((e=>{let[t,n]=e;return t<=c&&c<=n}))+1,maxbid_bidder:l};t.tags.cust_params=u}c(e,t)}))})),t.on("bidding ended",((e,t)=>{r[t]&&(n("video auction ended, removing auctionId",t),delete r[t])}))},vendorIds:{gdpr:"N/A"}});const Dp=[[.01,.5],[.51,1],[1.01,1.5],[1.51,2],[2.01,2.5],[2.51,3],[3.01,3.5],[3.51,4],[4.01,4.5],[4.51,5],[5.01,6],[6.01,7],[7.01,8],[8.01,9],[9.01,10],[10.01,12],[12.01,14],[14.01,16],[16.01,18],[18.01,20]];(0,Yt.fo)("bidsReceived",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t}=e;t.register("get tags based on tags",(e=>e.flat().filter((e=>e&&"bid"===e.type)).length?{nobids:!1}:{nobids:!0}))},vendorIds:{gdpr:"N/A"}}),(0,Yt.fo)("prebid.sharedId",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1,3,4]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=`${n("plugins.sharedid.pixelUrl.endpoint","https://www.dailymail.co.uk/cvx/client/sync/fpc")}?fpc_domain=${n("plugins.sharedid.pixelUrl.fpcDomain","dailymail.co.uk")}`,o=n("plugins.sharedid.extend",!1),a=!o&&n("plugins.sharedid.refreshInSeconds",!1),s=Mp(a);t.register("provide prebid config",(()=>({userSyncConfig:{userIds:[{name:"pubCommonId",params:{extend:o,syncTime:60,pixelUrl:i},storage:s}],syncDelay:n("plugins.prebid.syncDelay",3e3)}}))),t.register("get shared id",(()=>{try{return(0,He.gb)((()=>(0,je.ej)("sharedid")),300,1500)}catch(e){return}}))},vendorIds:{gdpr:"N/A"}});const Rp={name:"_pubcid",type:"cookie",expires:28},Mp=e=>"number"==typeof e?{...Rp,refreshInSeconds:e}:Rp;(0,Yt.fo)("message-trace",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,log:n}=e;const r=Object.entries(je.queryParams).filter((e=>{let[t]=e;return t.startsWith(Np)}));if(!r.length)return void n("no message filter, bailing");n("filters:",Object.fromEntries(r)),t.bus.logCall=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{id:""},r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(i(r,e,n)){const[i,...d]=r,c=[["Message",jp],[e.id,a(2)],[t,a(1)],[i,a(0)],[o?s?"resuming":"intercepted by":"->",a(o?s?4:3:1)],[n.id,a(2)]],{text:l,styles:u}=c.reduce(((e,t)=>{let[n,r]=t;return e.text.length&&(e.text+="%c ",e.styles.push(Bp)),e.text+=`%c${n}`,e.styles.push(r),e}),{text:"",styles:[]});let p=d;try{p=(0,Fe.$Z)(d)}catch(e){}console.log(l,...u,p)}};let i=()=>!1;r.forEach((e=>{let[t,n]=e;const[r,...i]=t.split(".").slice(3),o=new RegExp(`^${n.replace(/\*/g,".*")}$`,"i");switch(r){case"path":d(i.join("."),n);break;case"slot":d("",n),d("pos",n),d("slot.pos",n);break;case"fulltext":a=new RegExp(n,"igm"),s((e=>a.test(JSON.stringify(e,qp))));break;case"broker":c(o,o);break;case"sender":c(o);break;case"receiver":c(void 0,o)}var a}));const o=Up.split(" ").map((e=>(0,Qe.$R)(["background-color","color"],e.split("/")).map((e=>e.join(": "))).join("; "))),a=e=>Lp+o[e];function s(e){const t=i;i=(r,i,o)=>{let a;try{a=e(r,i,o)}catch(e){n.warn("Error while filtering message:",e)}return a||t(r,i,o)}}function d(e,t){s((n=>n.find((n=>{const r=e?ni()(n,e):n;return r&&(void 0===t||new RegExp(`^${t.replace(/\*/g,".*")}$`).test(r))}))))}function c(e,t){s(((n,r,i)=>e&&e.test(r.id)||t&&t.test(i.id)))}}});const Np="ads.debug.messageTrace",Up="#FFEFD3/black #FFFEE4/black #D0ECEA/black #FBC3BC/black #C8FFBE/black",Lp="display: inline-block; padding: 1px 4px; border-radius: 3px;",jp=Lp+"color: #fff; background: hsl(214deg 100% 55%); ",Bp="color: black; background: none;";function qp(e,t){if(!(0,Fe.T$)(t))return t}var Fp=__webpack_require__(8081);const Vp=(0,y.x)("mvt");var zp=__webpack_require__(9383);let Wp="";(0,Yt.fo)("mvt",{isAdsFreeSupported:!0,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init(e){let{getConfig:t,setConfig:n,log:r,ownName:i}=e;r("Initialising MVT plugin");const{selectedScenarios:o,scenarios:a,tests:s}=(0,zp.s)(r,t("mvt.tests",[]));((e,t,n,r)=>{let i=e("plugins.enabled",[]),o=[],a=[];n.forEach((e=>{Array.isArray(e.plugins)?(Vp(`From scenario "${e.name}", adding plugins:`,e.plugins),o=[...o,...e.plugins]):"object"==typeof e.plugins&&(Array.isArray(e.plugins.add)&&(Vp(`From scenario "${e.name}", adding plugins:`,e.plugins.add),o=[...o,...e.plugins.add]),Array.isArray(e.plugins.remove)&&(Vp(`From scenario "${e.name}", removing plugins:`,e.plugins.remove),a=[...a,...e.plugins.remove]))}));const s=i.indexOf(r)+1;i.splice(s,0,...o);const d=new Set(a);i=i.filter((e=>!d.has(e))),t("plugins.enabled",[...new Set(i)])})(t,n,a,i),(0,Fp.m)(t,n,a),(0,v._D)(),Wp=s.map((e=>[e.name,o[e.name]])).filter((e=>{let[,t]=e;return t})).map((e=>e.join("="))).join(",")},run(e){let{broker:t}=e;const n=()=>{try{return(__webpack_require__.g.molMVTest||"").split(",").map((e=>e.trim()))}catch(e){return[]}},r=()=>[...Wp.split(","),...n()].filter((e=>e)).join(",");t.register("call for page analytics",(()=>({mvt:r()}))),t.emit("send with rta page unload",{mvt:r().split("=").join("_")}),t.emit("set page level targeting",{mvt:r().split("=").join("_").split(",")})}});const Hp={mediaTrust:"//scripts.webcontentassessor.com/scripts/bc585bfefc95184247617f742a451b7f4f99b8d4f250b51c2fabb00dee8e855d",ticio:"//d2tuygj4en2za2.cloudfront.net/script.js",confiant:"//confiant-integrations.global.ssl.fastly.net/pkity_Tu7korz-AKdcG26RZexkw/gpt_and_prebid/config.js"};function Zp(){const e=new Date;return{watershed:String(e.getHours()>=21||e.getHours()+e.getMinutes()/60<5.5)}}(0,Yt.fo)("scanner",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},async init(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.scanner.sync",!1),o=n("plugins.scanner.setupTimeout",2e3),a=n("plugins.scanner.provider"),s=n("plugins.scanner.scriptUrl",Hp)[a];if(r("config:",{provider:a,sync:i,timeout:o}),!s)return void r.warn("unknown provider:",a);const d=mn(s,{async:!i}),c={scanner:{provider:a}};t.register("call for page analytics",(()=>c)),d.then((()=>{r("provider script loaded"),c.scanner.enabled=!0})),await(0,He.yq)(o,d).catch((()=>{r.warn("provider script did not load fast enough, continue loading ads bundle..."),c.scanner.timeout=!0}))}}),(0,Yt.fo)("watershed",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run(e){let{broker:t}=e;t.emit("set page level targeting",Zp()),t.register("get prebid tags",Zp)}});const $p=Symbol("private properties"),Gp=1e3;class Kp{constructor(e){let{broker:t,pos:n}=e;const r=this[$p]={};r.broker=t,r.pos=n,r.inView=!1}get inView(){return this[$p].inView}start(){const e=this[$p];e.slotVisibilityChangedSub=e.broker.on("slot visibility changed",e.pos,Yp.bind(this)),e.adViewableSub=e.broker.on("ad viewable",e.pos,Xp.bind(this))}stop(){const e=this[$p];e.slotVisibilityChangedSub.cancel(),e.adViewableSub.cancel(),ef.call(this)}}function Xp(){if(this.inView)return;const e=this[$p];e.inView=!0,e.broker.emit("ad active view",e.pos)}function Jp(){if(!this.inView)return;const e=this[$p];e.inView=!1,ef.call(this),e.broker.emit("ad out of view",this[$p].pos)}function Yp(e){let{inViewPercentage:t}=e;t<50?Jp.call(this):this[$p].timer||Qp.call(this)}function Qp(){this[$p].timer=setTimeout(Xp.bind(this),Gp)}function ef(){const e=this[$p];e.timer=clearTimeout(e.timer)}class tf{constructor(e){let{interval:t=3e4,broker:n,positions:r,ids:i,activeViewTracker:o,userInactivityMonitor:a=new Ou({broker:n})}=e;const s={};this.interval=t,s.broker=n,s.positions=r,s.ids=i,s.userInactivityMonitor=a,s.activeSub=s.broker.on("user active",nf.bind(this)),o&&(s.activeViewTracker=o,s.activeViewSub=s.broker.on("ad active view",s.positions[0],nf.bind(this)),s.activeViewTracker.start()),this.stopped=!1,this.priv=s,this.refresh=rf.bind(this),n.on("force ads refresh",(async()=>{this.refresh(),await n.until("ad rendered"),xu("Ads force-refreshed")})),n.on("ad rendered",(e=>{s.positions.includes(e)&&s.timer&&this.start()}))}start(){const e=this.priv;e.timer=clearTimeout(e.timer),e.stopped=!1,e.remaining=e.remaining||this.interval,e.timer=setTimeout(this.refresh,e.remaining)}stop(){const e=this.priv;e.activeSub.cancel(),e.activeViewTracker&&(e.activeViewSub.cancel(),e.activeViewTracker.stop()),e.timer=clearTimeout(e.timer),e.remaining=0,this.stopped=!0}}function nf(){0===this.priv.remaining&&rf.call(this)}function rf(){const e=this.priv;if(xu("Refresh: ",{positions:e.positions.join(" "),ids:e.ids.join(" "),active:e.userInactivityMonitor.active,inView:e.activeViewTracker?e.activeViewTracker.inView:"N/A"}),!e.userInactivityMonitor.active||e.activeViewTracker&&!e.activeViewTracker.inView)return e.timer=clearTimeout(e.timer),void(e.remaining=0);xu("Refreshing",{positions:e.positions.join(" "),ids:e.ids.join(" ")}),e.broker.emit("prepare to refresh ads",e.positions),e.broker.emit("refresh ads",{ids:e.ids,reason:"periodic",positions:e.positions}),this.start()}const of=e=>{let{broker:t,pos:n,type:r,adRefresher:i,slotViewedPromise:o}=e;return"activeView"===r?t.once("ad viewable",n,a).cancel:(o.then(a),()=>{});function a(){i.stopped?xu(`adRefresher for ${n} already stopped, and won't be started`):(i.start(),xu(`Refreshing position ${n}`))}};function af(e){let{broker:t,getConfig:n,log:r}=e;const i=n("adsRefresh.cancelOn1x1Billboard",!0),{intervalRefreshSlots:o,activeViewRefreshSlots:a}=function(e){const t=e("adsRefresh.interval",6e4);return{intervalRefreshSlots:e("adsRefresh.slots",[]).reduce(((e,n)=>({...e,[n]:{pos:n,interval:t,type:"interval"}})),{}),activeViewRefreshSlots:e("adsRefresh.activeViewSlots",[]).reduce(((e,t)=>{let{pos:n,interval:r}=t;return{...e,[n]:{pos:n,interval:r,type:"activeView"}}}),{})}}(n);if((0,Fe.xb)(o)&&(0,Fe.xb)(a))return void r("no slot refresh config provided, bailing");const s=new Promise((e=>t.once("ad viewable",(t=>{r(`Position "${t}" viewed, refreshes will start immediately`),e()})))),d=n("adsRefresh.inactiveTime",1e4),c=new Ou({broker:t,inactiveTime:d});c.start();const l={broker:t,userInactivityMonitor:c,log:r,slotViewedPromise:s},u={...o,...a};i&&(r("will cancel refreshing ads upon 1x1 billboard"),t.on("ad rendered","billboard",(e=>{!e.isEmpty&&e.size&&e.size.every((e=>1===e))&&(r("1x1 billbaord received, cancel refreshing"),t.emit("stop refreshing ads"))}))),t.on("slot defined",(e=>{let{pos:t,id:n}=e;if(u[t]){r("slot defined, found refresher",u[t]),u[t].id=n;const e=function(e){let{broker:t,userInactivityMonitor:n,pos:r,id:i,interval:o,type:a}=e;xu(`Start refreshing: ${r}, id: ${i}, with ${a} refresh of ${o}ms`);const s="activeView"===a&&new Kp({broker:t,pos:r});return new tf({broker:t,interval:o,positions:[r],ids:[i],userInactivityMonitor:n,activeViewTracker:s})}({...l,...u[t]});u[t].adRefresher=e,u[t].cancel=of({...l,...u[t]})}})),t.on("pause refreshing ads",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(u);const t=r.extend("pause");for(const n of e)u[n]?u[n].adRefresher?u[n].adRefresher.stopped?t.warn(`"${n}" position has already stopped refreshing.`):(u[n].adRefresher.stop(),t.info(`"${n}" position refresh is paused`)):t.warn(`"${n}" position has not been setup to refresh yet.`):t.warn(`"${n}" position is not configured to refresh and is therefore probably not refreshing.`)})),t.on("resume refreshing ads",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(u);const t=r.extend("resume");for(const n of e)u[n]?u[n].adRefresher?u[n].adRefresher.stopped?(u[n].adRefresher.start(),t.info(`"${n}" position refresh is resumed`)):t.warn(`"${n}" position isn't paused.`):t.warn(`"${n}" position has not been setup to refresh yet.`):t.warn(`"${n}" position is not configured to refresh.`)})),t.on("stop refreshing ads",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r("Received request to stop ads refreshing altogether",e);const{positions:n=[],activeView:i=!0}=e,a=i?u:o;(n.length?(0,X.e$)(a,n):Object.keys(a)).forEach((e=>{const{id:t,type:n}=u[e];r(`stopping ${n} refresh for ${e}, id: ${t}`),u[e].adRefresher&&u[e].adRefresher.stop(),u[e].cancel&&u[e].cancel(),delete u[e]})),(0,Fe.xb)(u)&&(t.emit("send event to bidmax",{type:"custom",payload:{module:"refreshManager",event:"fullStop"}}),c.stop())}))}af.ccpa={enabledIfDissent:!0},af.gdpr={enabledIfDissent:!0},af.disableIfNoAdsServable=!1;const sf=()=>{};sf.pluginSetup=e=>{let{broker:t,getConfig:n,log:r}=e;if(!n("arrowKeysScroll.userAgents",[".*"]).some((e=>navigator.userAgent.match(new RegExp(e)))))return;(0,Fe.ns)(["DM"],__webpack_require__.g).arrowKeysScrollEnabled=!0;const i=n("arrowKeysScroll.stride",40);if(document.addEventListener("keydown",(e=>{if(e.altKey||e.ctrlKey||e.metaKey||e.target!==document.body)return;let t;switch(e.keyCode){case 38:t=-i;break;case 40:t=i}t&&(event.preventDefault(),event.stopPropagation(),window.scrollBy(0,t))})),"scrollRestoration"in history){history.scrollRestoration="manual";const e=history.state;e&&"arrow-keys-scroll"===e.name&&(r("state stored:",e),t.once("dom loaded",(()=>{0===window.pageYOffset?(r("restoring scroll offset to:",e.pageYOffset),window.scrollTo(window.pageXOffset,e.pageYOffset)):r("page scrolled to",window.pageYOffset,", ignoring scroll restore")})));const n=()=>{const e={name:"arrow-keys-scroll",version:1,pageYOffset:window.pageYOffset};history.replaceState(e,document.title)};window.addEventListener("scroll",DM.molFeMiniLodash.debounce(n,200),{passive:!0,capture:!0})}},sf.isAdsFreeSupported=!0,sf.ccpa={enabledIfDissent:!0},sf.gdpr={enabledIfDissent:!0};const df=sf,cf=e=>{const t=document.querySelector(`#${e.slot.getSlotElementId()} iframe`);return t&&"90"===t.getAttribute("height")};function lf(e){let{broker:t}=e;t.on("slot defined",(e=>{if("billboard"!==e.pos)return;t.intercept("ad rendered","billboard",((e,t)=>{let[,r,i]=e;try{n(r,i)}finally{t()}}));const n=(t,n)=>{if(n.isEmpty)return;if(!document.getElementById(e.parentId).parentNode)return;const r=document.getElementsByClassName("molads_billboard_on")[0];r&&(cf(n)?r.classList.add("molads_ldr_billboard_on"):r.classList.remove("molads_ldr_billboard_on"))}}))}lf.ccpa={enabledIfDissent:!0},lf.gdpr={enabledIfDissent:!0},lf.disableIfNoAdsServable=!0;var uf=__webpack_require__(8909),pf=__webpack_require__.n(uf);const ff="https://ovp.iris.tv/libs/context/iris-context.min.js",hf="W491AUI45FTTFWD";function gf(e){let t,{broker:n,log:r}=e;const i=new Promise((e=>{window.addEventListener("IrisContextAPI",(()=>{r("Loaded"),t=window.IrisContextAPI({client_token:hf}),e(t)}))})),o=pf()((async e=>{if(!e)return{};await i;const n=await t.getVideoInfo(e);return r(`Info for video ${e}`,n),(0,Fe.ei)(n,["context","categories","iris_id"])}));n.invoke("import script",ff),n.register("get IrisTV tags",o),n.register("get video tags",(async e=>{let{videoId:n}=e;if(!t)return void r("Video auction started but IrisTV still not available");if(!n)return void r("IrisTV loaded but no videoId provided");r("Auction for video:",n);const i=(0,Fe.ei)(await o(n),["context","categories"]);return r("cust_params:",i),{cust_params:i}}))}gf.vendorIds={gdpr:"N/A"},gf.purposeIds={gdpr:[1]},gf.disableIfNoAdsServable=!0;const mf=e=>{let{broker:t,getConfig:n}=e,r=[];t.on("plugins enabled",(e=>{r.lengh&&t.emit("creative updated plugins",r)})),t.register("get plugins set by creative",(async()=>r)),__webpack_require__.g.addEventListener("message",(async e=>{let{data:n}=e;"object"==typeof n&&"managePlugins"===n.callId&&(r=n.plugins||[],__webpack_require__.g.postMessage("managePluginsReceived","*"),t.emit("creative updated plugins",r),je.queryParams.hasOwnProperty("setPlugin")&&console.log(`message from creative ${JSON.stringify(r)}`))}))};mf.ccpa={enabledIfDissent:!0},mf.gdpr={enabledIfDissent:!0};const vf=mf,yf=e=>{let{broker:t}=e;const n=(0,v.U2)("plugins.nativo.scriptSrc","//s.ntv.io/serve/load.js");t.invoke("import script",n)},bf=yf;function _f(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.nonPersonalizedAds.sendNPA",!0),o=n("plugins.nonPersonalizedAds.sendIllegalAttempts",!0),a={npa:!1,npaIllegalAttempts:[]};let s=e=>{t.once("gpt loaded",(()=>{googletag.pubads().setRequestNonPersonalizedAds(e)}))};t.once("gpt loaded",(()=>{const e=googletag.pubads();s=e.setRequestNonPersonalizedAds.bind(e),e.setRequestNonPersonalizedAds=e=>{const t=new Error(`Illegal attempt to call setRequestNonPersonalizedAds(${JSON.stringify(e)})`);a.npaIllegalAttempts.push(t.stack),r.warn(t)}})),t.register("call for page analytics",(()=>{const e={};return i&&(e.npa=a.npa),o&&(e.npaIllegalAttempts=[...a.npaIllegalAttempts]),a.npaIllegalAttempts=[],e})),t.on("set non personalized ads",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;a.npa=!!e,s(e)}))}yf.vendorIds={gdpr:[263]},yf.purposeIds={gdpr:"N/A"},_f.ccpa={enabledIfDissent:!0},_f.gdpr={enabledIfDissent:!0};const wf=(0,y.x)("page-visibility");function Tf(e){let{broker:t}=e;t.register("is page visible?",(()=>new Promise(((e,t)=>e((()=>{const e=document.hasFocus();return wf("isPageVisible",e),e})()))))),__webpack_require__.g.top.addEventListener("blur",(()=>{setTimeout((()=>{wf("Blur event - page hidden"),t.emit("page hidden")}))})),__webpack_require__.g.top.addEventListener("focus",(()=>{setTimeout((()=>{wf("Focus event - page visible"),t.emit("page visible")}))}))}Tf.isAdsFreeSupported=!0,Tf.ccpa={enabledIfDissent:!0},Tf.gdpr={enabledIfDissent:!0};const If="mol.ads.paidSession",Sf=()=>JSON.parse(localStorage.getItem(If))||{},kf=e=>localStorage.setItem(If,JSON.stringify(e)),Cf=()=>localStorage.removeItem(If);function Ef(e){let{broker:t,getConfig:n}=e;const r=Sf();let i="none",o="none";const a=1e3*n("plugins.paidSessions.maxIntervalInSeconds",900);r&&r.lastUpdate&&r.lastUpdate>=Date.now()-a?(r.lastUpdate=Date.now(),kf(r),o=r.utm_source,i=r.session_page_ID):je.queryParams.utm_source?(o=je.queryParams.utm_source,i=PageCriteria.articleId,kf({lastUpdate:Date.now(),utm_source:o,session_page_ID:i})):Cf();const s={session_page_ID:i,utm_source:o};t.emit("set page level targeting",s),t.register("call for page analytics",(()=>s))}Ef.ccpa={enabledIfDissent:!0},Ef.gdpr={enabledIfDissent:!0},Ef.disableIfNoAdsServable=!0;var Af=__webpack_require__(9458),Pf=__webpack_require__.n(Af);const xf="38384040373937396665",Of="211242";function Df(e){let{broker:t,getConfig:n}=e;const r=n("remoteDebugHooks",!0);localStorage.removeItem("mol.ads.debug.label");const i={auctions:[],auctionByPos:{},started:{},queue:[],bids:{},kv:{},gkv:{}},o=function(e){return i.auctionByPos[e]||i.auctionByPos[e.substr(0,e.lastIndexOf("-"))]},a=(e,t)=>{if(!o(e))return;const n=o(e);n.slots[e]||(n.slots[e]={}),n.slots[e][t]||(n.slots[e][t]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:__webpack_require__.g.adverts.startTime;return parseFloat(((Date.now()-e)/1e3).toFixed(1))}())},s=e=>Array.isArray(e)?1===e.length?s(e[0]):e.join(", "):"boolean"==typeof e||isNaN(e)?e:parseFloat(e),d=e=>Object.keys(e).reduce(((t,n)=>(Object.keys(e[n]).forEach((r=>{t[r]=t[r]||{},t[r][n]=e[n][r]})),t)),{}),c=function(e){console.group("Auction Performance"),console.table(d(Object.fromEntries(Object.entries(e.streamAuctions).map((e=>{let[t,{endpoints:n}]=e;return[t,Object.fromEntries(Object.entries(n).map((e=>{let[t,n]=e;return[t,n>1e3?"ready":n]})))]}))))),console.groupEnd()},l=function(e){return(!i.currentAuction||i.currentAuction.lastPosTime<Date.now()-5e3)&&(i.currentAuction={id:i.auctions.length,slots:{},ads:{},kv:{},bids:{},streamAuctions:{}},i.auctions.push(i.currentAuction)),i.currentAuction.lastPosTime=Date.now(),i.currentAuction.streamAuctions[e]||(i.currentAuction.streamAuctions[e]={start:0,endpoints:{}}),i.auctionByPos[e]=i.currentAuction};t.on("get tags",(e=>{let{slot:{pos:t}}=e;l(t).streamAuctions[t].start=Date.now()})),t.on("get video tags",(e=>{let{slot:{pos:t}}=e;l(t)})),t.on("ad rendered",((e,t)=>{a(e,"ad rendered");let n=e,r=0;const i=o(e);for(;i.ads[n];)r++,n=`${e} ${r}`;const s=i.ads[n]={};s.creativeId=t.creativeId||t.sourceAgnosticCreativeId,s.lineItem=t.lineItemId||t.sourceAgnosticLineItemId,s.adUnit=t.slot.molAd.adUnit,t.sourceAgnosticLineItemId&&t.creativeId!==t.sourceAgnosticCreativeId&&(s["reservation or backfil"]=!0)})),t.on("headerbidder winner",((e,t)=>{const n=o(e);n&&n.ads[e]&&(n.ads[e]["headerbidder winner"]=t)})),t.on("ad viewable",((e,t)=>{a(e,"ad viewable")})),t.on("ad loaded",((e,t)=>{a(t,"ad loaded")})),t.on("slot defined",(e=>{e.slotTypes.includes("gpt")&&!e.slotTypes.includes("gptOOP")&&(l(e.pos),a(e.pos,"slot defined"))})),t.on("start bidding",(e=>{l(e),a(e,"start bidding"),i.started[e]=Date.now()})),t.on("ready to request",(e=>a(e,"ready to request"))),t.on("ad requested",(e=>a(e,"ad requested"))),t.on("bidding ended",(e=>a(e,"bidding ended"))),t.on("bids requested",(e=>{let{positions:t}=e;t.forEach((e=>{l(e),a(e,"prebid called")}))})),t.on("bid",((e,t)=>{let{bidder:n,cpm:r}=t;const i=r,o=l(e),a=o.bids[e]=o.bids[e]||{},s=i/100;(!a[n]||a[n]<s)&&(a[n]=s)})),t.on("set key value",((e,t,n)=>{const r=l(e);(r.kv[e]=r.kv[e]||{})[s(t)]=s(n)}));const u=e=>l(e).streamAuctions[e],p=(e,t)=>{e.endpoints[t]=Math.round((Date.now()-e.start)/10)/100};function f(){const e=document.createElement("div");e.innerHTML=Pf()();const t=e.firstChild;document.body.appendChild(t),setTimeout((()=>{window.debugRemoteLabel.focus(),window.debugRemoteLabel.addEventListener("keyPress",(e=>{"Enter"===e.key&&window.enterDebugRemoteButton.click()})),window.enterDebugRemoteButton.addEventListener("click",(()=>{localStorage.setItem("dmg.ads.debug.label",window.debugRemoteLabel.value),location.reload()}))}))}t.on("auction event",((e,t,n)=>{const r=u(e);if(!r.ended)if("interested endpoint"===t){0===r.start&&(r.start=Date.now(),Object.keys(r.endpoints).forEach((e=>{const t=r.endpoints[e];Number.isFinite(t)&&(r.endpoints[e]=Math.round((1e3*t-r.start)/10)/100)})));const e=(n.endpoints||[]).filter((e=>void 0===r.endpoints[e])),t=Object.fromEntries(e.map((e=>[e,"pending"])));r.endpoints={...r.endpoints,...t}}else"stream done"===t?p(r,n.endpoint):"end"===t&&(r.ended=!0,Object.entries(r.endpoints).forEach((e=>{let[t,n]=e;"string"==typeof n&&(r.endpoints[t]="missing")})))})),t.on("plugin done",((e,t)=>{const n=u(e);n.ended||p(n,t)})),__webpack_require__.g.openAdsControlPanel=()=>{const e=n("controlPanel.url");e&&t.emit("load script",e,null,{},(()=>!0))},r&&setTimeout((()=>(function(){let e="";document.addEventListener("keydown",(t=>{const{keyCode:n}=t;e+=""+n,e===xf&&(t.preventDefault(),f()),xf.indexOf(e)&&(e=""+n)}))}(),void t.once("ad rendered","sticky_banner",(()=>{const e=__webpack_require__.g.stickyBannerUnderlay;e&&function(e){var t;const n=[],r=null!==(t=__webpack_require__.g.MobileUtils)&&void 0!==t&&t.isMobile()?"touchstart":"mousedown";e.addEventListener(r,(e=>{if(e.stopPropagation(),e.preventDefault(),n.push(e.timeStamp),7===n.length){const e=[...n];for(let t=e.length-1;t>0;t--)e[t]=e[t]-e[t-1];n.shift(),e.shift();const t=(e[1]+e[2])/2;e.map((e=>Math.round(e/t))).join("")===Of&&f()}}),{capture:!0,passive:!1})}(e)}))))),__webpack_require__.g.adverts.performance={state:i,print:()=>{i.auctions.forEach((e=>{console.group(`Auction ${e.id}`),console.group("Slots performance"),console.table(e.slots),console.table(e.ads),console.groupEnd(),console.group("Key+values"),console.table(d(e.kv)),console.groupEnd(),console.group("Bids"),console.table(e.bids),console.groupEnd(),c(e),console.groupEnd()})),console.group("Page level Key+values"),console.table(i.gkv),console.groupEnd()},printAuctionPerformance:()=>{i.auctions.forEach((e=>{console.group(`Auction ${e.id}`),c(e),console.groupEnd()}))}}}async function Rf(){const e=(0,v.U2)("plugins.pixelSync.byCMPVendor",{}),t=Object.keys(e),n=await Mf(t);for(const r of t)n(r,e[r])}Df.ccpa={enabledIfDissent:!0},Df.gdpr={enabledIfDissent:!0};const Mf=async e=>{const{vendorConsents:t}=await pr("getVendorConsents",e);return(e,n)=>t[e]&&Nf(n)},Nf=e=>{(new Image).src=e};Rf.vendorIds={gdpr:!1};var Uf=__webpack_require__(2695),Lf=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},jf=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},Bf=function(e){this.version=e,this.type="node",this.name="node",this.os=Uf.platform},qf=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},Ff=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},Vf=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},zf=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Wf=3,Hf=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Zf=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function $f(e){var t=function(e){return""!==e&&Hf.reduce((function(t,n){var r=n[0],i=n[1];if(t)return t;var o=i.exec(e);return!!o&&[r,o]}),!1)}(e);if(!t)return null;var n=t[0],r=t[1];if("searchbot"===n)return new Ff;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<Wf&&(i=Lf(Lf([],i,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(Wf-i.length),!0)):i=[];var o=i.join("."),a=function(e){for(var t=0,n=Zf.length;t<n;t++){var r=Zf[t],i=r[0];if(r[1].exec(e))return i}return null}(e),s=zf.exec(e);return s&&s[1]?new qf(n,o,a,s[1]):new jf(n,o,a)}const Gf=je.queryParams["mol.ads.programmatic.debug"],Kf=(e,t)=>({chrome:e("prog.campaign.percentage.chrome",.7),crios:e("prog.campaign.percentage.crios",.7)}[t]);function Xf(e){let{broker:t,getConfig:n}=e;const r=a?$f(a):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new Vf:"undefined"!=typeof navigator?$f(navigator.userAgent):void 0!==Uf&&Uf.version?new Bf(Uf.version.slice(1)):null,i=Math.random(),o=r&&r.name&&Kf(n,r.name)||0;var a;Gf&&console.log(`[PROG CAMPAIGN] browser: ${r&&r.name}, chance: ${o}, rand: ${i}`),o>i&&t.emit("set page level targeting",{prog:!0})}async function Jf(e){let{broker:t,getConfig:n}=e;__webpack_require__.g.window._qevents=__webpack_require__.g.window._qevents||[],__webpack_require__.g.window._qevents.push({qacct:"p-yVg_z7_Zx4fHs"}),t.invoke("import script","https://secure.quantserve.com/quant.js")}function Yf(e){let{broker:t,log:n}=e;const r={},i={},o={total:0,auction:{},video:{}};function a(e,t,a){let s;return!i[a]&&r[a]&&(n("[",a,"] ad viewable, but bidding in progress - assuming the auction ended",r[a]),i[a]=r[a],delete r[a]),i[a]?(s=i[a].cpm,o.total+=s,o[e][t]=(o[e][t]||0)+s,n("[",a,"] ad viewable",i[a],"summary.total",o.total),delete i[a]):n("[",a,"] ad viewable - no winner"),s}window.adverts.getRevenueSummary=()=>o,t.on("bids requested",(e=>{e.positions.forEach((e=>{n("[",e,"] start auction"),delete r[e]}))})),t.on("bid",((e,t)=>{let{bidder:i,cpm:o}=t;(!r[e]||r[e].cpm<o)&&(r[e]={bidder:i,cpm:o}),n("[",e,"]",i,"offers to pay",o)})),t.on("bidding ended",(e=>{r[e]?(i[e]=r[e],delete r[e],n("[",e,"] bidding ended",i[e])):n("[",e,"] bidding ended - no bids")})),t.on("video ad viewable",(e=>{let{pos:t,videoId:n}=e;return a("video",n||"unknown",t)})),t.on("ad viewable",(e=>a("auction",e,e)))}Xf.ccpa={enabledIfDissent:!0},Xf.gdpr={enabledIfDissent:!0},Xf.disableIfNoAdsServable=!0,Jf.vendorIds={gdpr:[11]},Jf.purposeIds={gdpr:"N/A"},Yf.ccpa={enabledIfDissent:!0},Yf.gdpr={enabledIfDissent:!0},Yf.disableIfNoAdsServable=!0;const Qf=(0,y.x)("rta");function eh(e){let{broker:t}=e;t.on("send to rta",(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"store";if(__webpack_require__.g.RTA&&"function"==typeof __webpack_require__.g.RTA.tedEvent){const r={action:n,name:e,value:t};Qf("Sending:",r),__webpack_require__.g.RTA.tedEvent("page_event",r)}}))}function th(e){let{broker:t}=e;(0,Ut.loaded)().then((()=>t.emit("dom loaded"))),DM.later("DOM_READY",(()=>t.emit("dom ready"))),window.addEventListener("load",(()=>t.emit("page load")))}eh.isAdsFreeSupported=!0,eh.ccpa={enabledIfDissent:!0},eh.gdpr={enabledIfDissent:!0},th.isAdsFreeSupported=!0,th.ccpa={enabledIfDissent:!0},th.gdpr={enabledIfDissent:!0};const nh=(e,t)=>{let{isEmpty:n,slot:r}=t;if(!n)switch(e){case"billboard-oop":return ih();case"billboard":return rh(document.getElementById(r.getSlotElementId()))}},rh=e=>{if(!e)return;const t=e.querySelector(".mol-ads-label-container");t&&e.parentNode.appendChild(t)},ih=()=>{const e=document.createElement("div"),t=document.createElement("div"),n=document.createTextNode((0,v.U2)("label.text","ADVERTISEMENT"));t.classList.add("mol-ads-skin-label"),t.appendChild(n),e.classList.add("mol-ads-skin-label-container"),e.appendChild(t),document.body.appendChild(e)},oh=e=>{let{imageURL:t,clickURL:n}=e;const{body:r}=document;document.documentElement.classList.add("mol-ads-skin-enabled");const i=document.createElement("a");i.className="mol-ads-skin-click-target",i.href=n;const o=document.createElement("div");o.className="mol-ads-skin-pad",r.insertBefore(i,r.firstChild),r.insertBefore(o,i),(0,Ut.appendStyle)(`\nbody { background-image: url(${t}); }\n`),adverts.stopRefreshingAds(),ih()};function ah(e){let{broker:t}=e;t.on("add skin to page",oh),t.on("add skin label to page",ih),t.on("ad rendered",nh)}ah.ccpa={enabledIfDissent:!0},ah.gdpr={enabledIfDissent:!0},ah.disableIfNoAdsServable=!0;const sh=function(){let{delay:e=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return n=>{t.push(n),setTimeout((()=>t.shift()()),e)}},dh={sync:()=>e=>e(),async:sh,serial:()=>{const e=[];let t;const n=()=>{t=e.length&&setTimeout(r,0)},r=()=>{e.shift()(),n()},i=r=>{e.push(r),t||n()};return i.pause=()=>{t&&(clearTimeout(t),t=!1)},i.resume=()=>{t||n()},i.queue=e,i},idle:()=>__webpack_require__.g.requestIdleCallback?e=>__webpack_require__.g.requestIdleCallback(e):sh(),nextFrame:()=>__webpack_require__.g.requestAnimationFrame?e=>__webpack_require__.g.requestAnimationFrame(e):sh(),fps:__webpack_require__.g.requestAnimationFrame?function(){let e,{fps:t=20,count:n=1,internalExecuter:r="serial",...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=parseInt(t),n=parseInt(n);let o=0,a=[];const s=dh[r](i);let d=0;function c(e){s((()=>{e()}))}return requestAnimationFrame((function r(i){requestAnimationFrame(r),e?(d=1e3/(i-e),d>=t?(o++,o===n&&function(){const e=a;a={push:c},e.forEach(c),!e.length&&s.resume&&s.resume()}()):(o>=n&&(s.pause&&s.pause(),a=[]),o=0),e=i):e=i})),e=>{a.push(e)}}:sh};function ch(e){let{broker:t,getConfig:n}=e;const{type:r,...i}=n("scheduler.executer",{type:"async"}),o=(0,dh[r])(i);t.register("call for page analytics",(()=>({executer:r}))),t.bus.setDispatcher(o),i.debug&&console.log("Message dispatcher strategy:",r,i)}ch.isAdsFreeSupported=!0,ch.ccpa={enabledIfDissent:!0},ch.gdpr={enabledIfDissent:!0};const lh=ch;async function uh(e){let{broker:t,getConfig:n}=e;const r=/^https?:\/\/t\.co(\/.*)?$/.test(document.referrer),i="newzit.app"===je.queryParams.source,o=n("molFeSmartBanner");t.once("dom ready",(async()=>{!MobileUtils.isMobile()&&!(0,je.bP)()||(0,je.ej)("smart-banner")||r||i||DM.molFeComponents.setConfig("molFeSmartBanner",o)}))}function ph(e){let{broker:t}=e;t.emit("set page level targeting",{abv:"6.13.0"})}function fh(e){let{broker:t,log:n}=e;n("video-events starting");const r=DM&&DM.pageEvents,i=[r.VIDEO_ADVERT_ABORTED,r.VIDEO_ADVERT_COMPLETED,r.VIDEO_ADVERT_FAILED,r.VIDEO_ADVERT_IMPRESSION,r.VIDEO_ADVERT_NOT_SHOWN,r.VIDEO_ADVERT_STARTED,r.VIDEO_CONTENT_ABORTED,r.VIDEO_CONTENT_COMPLETED,r.VIDEO_CONTENT_STARTED,r.VIDEO_DATA_READY,r.VIDEO_PLAYER_READY,r.VIDEO_PROGRESS,r.VIDEO_STREAM_FAILED,r.VIDEO_STREAM_STARTED];r&&i.forEach((e=>{r.subscribe(e,((r,i)=>{n("firing:",e),t.emit(`video page event ${e}`,e,i)}))}))}uh.isAdsFreeSupported=!0,uh.ccpa={enabledIfDissent:!0},uh.gdpr={enabledIfDissent:!0},ph.isAdsFreeSupported=!0,ph.ccpa={enabledIfDissent:!0},ph.gdpr={enabledIfDissent:!0},fh.ccpa={enabledIfDissent:!0},fh.gdpr={enabledIfDissent:!0},fh.disableIfNoAdsServable=!0;const hh="channel"===__webpack_require__.g.PageCriteria.pageType&&(0,v.U2)("page.homepages",["home","ushome","auhome","mailonsunday"]).includes(__webpack_require__.g.PageCriteria.channel)&&__webpack_require__.g.PageCriteria.subchannel===__webpack_require__.g.PageCriteria.channel,gh={adPageType:__webpack_require__.g.adPageType,DM:__webpack_require__.g.DM,isAdsFreeUser:()=>__webpack_require__.g.isAdFreeEntitled&&__webpack_require__.g.isAdFreeEntitled(),isHomepage:hh,isTCFV2Jurisdiction:async e=>e("tcfv2.enabled",!1),pageCriteria:{...__webpack_require__.g.PageCriteria},pageMeta:{...__webpack_require__.g.DM.getPageMetadata()},queryParams:je.queryParams};function mh(e,t){return Object.keys(t("slots.enabled",{})).includes(e)}(0,Yt.fo)("api",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){let{broker:t,getConfig:n,log:r}=e;!function(e){let{broker:t}=e;t.on("api message","openCmpBanner",(()=>{t.emit("openCmpBanner")}))}({broker:t}),t.on("api message","adSlotMount",(e=>{let{variant:r,position:i,pos:o,id:a,slotId:s,containerId:d}=e;const c=i||o,l=a||s;if(mh(c,n)){const e={pos:c,id:l,parentId:s,variant:r,containerId:d};t.emit("slot mounted",e)}})),t.on("api message","adSlotUnmount",(e=>{let{position:n}=e;r("adSlotUnmount",n),t.emit("destroy slot",n)})),t.on("api message","adSlotUpdate",(e=>{let{position:i,slotId:o}=e;mh(i,n)&&(r("adSlotUpdate",{position:i,slotId:o}),t.emit("prepare to refresh ads",[i]),t.emit("refresh ads",{positions:[i],ids:[o],reason:"api message"}))})),t.on("api message","onAdRendered",(e=>{t.on("ad rendered",e)})),t.on("api message","onAdRequest",(e=>{t.on("dfp slot requested",e)})),t.on("api message","imageGalleryOpen",(()=>{r("imageGalleryOpen"),t.emit("image gallery open")})),t.on("api message","imageGalleryClose",(()=>{r("imageGalleryClose"),t.emit("image gallery close")})),t.on("api message","adBlockerDetection",(e=>{r("adBlockerDetection",e),t.emit("ad block detection result",e)})),t.on("api message","adBlockerDetectionStatus",(e=>{t.emit("adblock detection status",e)})),t.on("api message","takeover",(e=>{let{type:n,config:i}=e;r("takeover requested",n),t.emit("takeover",n,i)})),t.on("api message","loadIASVerificationPixel",(e=>{t.emit("loadIASVerificationPixel",e)})),t.on("api message","fullScreenOverlayStarted",(e=>{let{owner:n}=e;r("fullScreenOverlayStarted",n),t.emit("fullScreenOverlayStarted",n)})),t.on("api message","fullScreenOverlayEnded",(e=>{let{owner:n}=e;r("fullScreenOverlayEnded",n),t.emit("fullScreenOverlayEnded",n)}));const i={};t.on("api message","startActiveViewTrack",(e=>{let{handle:n,element:o,callback:a}=e;r("start tracking viewability for:",n,o),i[n]=t.on("ad viewable",n,(function(){try{r("element viewable:",n),a(...arguments)}catch(e){r.warn("error in callback for viewability tracker",n,e)}})),t.emit("track viewability",n,o)})),t.on("api message","stopActiveViewTrack",(e=>{let{handle:n}=e;t.emit("untrack viewability",n);const o=i[n];o&&(delete i[n],o.cancel()),r("stopped tracking viewability for:",n)})),t.on("api message","checkVendor",(async e=>{const{vendorRegistry:n,vendorId:i,onConsent:o,onDissent:a,onError:s}=e;r("checkVendor",n,i);let d=!1;const c=(await t.invokeAll({message:["check vendor consent",e],catch:e=>{d=!0,s(e)}}))[0];if(!d){const{isConsented:e,errorMsg:t}=c||{};t?s(new Error(t)):e||void 0===c?o():a()}}))}});const vh=e=>{let{broker:t}=e;const n=(0,v.U2)("plugins.audienceProject.scriptSrc","https://sak.userreport.com/mol/launcher.js");t.invoke("import script",n,{id:"userreport-launcher-script"})};vh.vendorIds={gdpr:[394]},vh.purposeIds={gdpr:"N/A"},(0,Yt.fo)("dmp.airgrid",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.dmp.airgrid.accountId","pqIdXN"),o=n("plugins.dmp.airgrid.publisherId","kip2fp"),a=n("plugins.dmp.airgrid.apiKey","p7z1Zng10vQa6gGEAUva"),s=__webpack_require__.g.edktInitializor=__webpack_require__.g.edktInitializor||{};s.accountId=i,s.publisherId=o,s.apiKey=a,s.invoked||(s.invoked=!0,s.load=function(e){const n=`https://cdn.edkt.io/${e||"sdk"}/edgekit.min.js`;t.emit("import script",n)},s.load(s.accountId)),t.register("dmp","airgrid",(()=>{try{return JSON.parse(localStorage.getItem("edkt_matched_audience_ids")||[])}catch{return[]}}))},vendorIds:{gdpr:[782]}});const yh=e=>t=>t.startsWith(e),bh=e=>t=>t.includes(e),_h=[["Social|Instagram",(0,Fe.ar)({referringUrl:bh("instagram.com")})],["Other Websites|MSN",(0,Fe.ar)({referringUrl:bh("msn.com")})],["Social|Reddit",(0,Fe.ar)({referringUrl:bh("reddit")})],["Other Websites|Upday",(0,Fe.ar)({referringUrl:bh("axelspringer")})],["Other Websites|Break.ma",(0,Fe.ar)({referringUrl:bh("break.ma")})],["Other Websites|Flipboard",(0,Fe.ar)({referringUrl:bh("flipboard")})],["Other Websites|NewsNow",(0,Fe.ar)({referringUrl:bh("newsnow")})],["Social|Pinterest",(0,Fe.ar)({referringUrl:bh("pinterest")})],["Search|DuckDuckGO",(0,Fe.ar)({referringUrl:bh("duckduckgo")})],["Search|Yahoo",(0,Fe.ar)({referringUrl:bh("yahoo")})],["Other Websites|Drudgereport",(0,Fe.ar)({referringUrl:bh("drudgereport")})],["Other Websites|Newzit",(0,Fe.ar)({referringUrl:bh("newzit")})],["Social|Twitter",(0,Fe.ar)({referringUrl:yh("https://t.co")})],["Search|Bing",(0,Fe.ar)({referringUrl:bh("bing")})],["Search|Google App",(0,Fe.ar)({referringUrl:bh("com.google")})],["Search|Google News",(0,Fe.ar)({referringUrl:bh("news.google.com")})],["Search|Google Websearch",(0,Fe.ar)({referringUrl:bh("google")})],["Social|Facebook",(0,Fe.ar)({referringUrl:bh("facebook")})],["Push Channels|Push Notifications",(0,Fe.ar)({itoExternalSession:yh("push-no")})],["Push Channels|Windows Widget",(0,Fe.ar)({itoExternalSession:yh("windows-widget")})],["Direct|Direct",(0,Fe.ar)({referringDomain:e=>"undefined"===e||"www.dailymail.co.uk"===e,itoExternalSession:("undefined",e=>"undefined"===e)})]];function wh(e){const[t]=_h.find((t=>{let[n,r]=t;return r(e)}))||["Other Websites|Other Websites"];return t}(0,Yt.fo)("gpt-targeting.ga.referrer",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,DM:n,getConfig:r,log:i}=e;const o=r("plugins.gptTargeting.ga.referrer.directHostNames",["dailymail.co.uk","a.dailymail.co.uk","b.dailymail.co.uk","c.dailymail.co.uk","dailymailint.co.uk","thisismoney.co.uk","thisismoneyint.co.uk"]),{hitReferral:a,sessionReferral:s}=r("plugins.gptTargeting.ga.referrer.trackCategories",{});n.molFeComponents.getConfig("molFeGAProps").then((e=>{var n,r,d;i("gaProps",e);const{itoExternalSession:c,referrer:l,referringDomain:u,referringUrl:p}=e,f=wh({itoExternalSession:c,referringDomain:u,referringUrl:p}),h=Da(l);i("referrer hostname",h);const g=o.includes(null==h||null===(n=h.replace)||void 0===n?void 0:n.call(h,/^www\d?\./,""))||!l?"Direct|Direct":wh({itoExternalSession:c,referringDomain:h,referringUrl:l});if(i("ga targeting, session_referral:",f,"hit_referral:",g),null!=a&&null!==(r=a.includes)&&void 0!==r&&r.call(a,g)||null!=s&&null!==(d=s.includes)&&void 0!==d&&d.call(s,f)){const e={ga_ito:c,ga_rd:u,ga_ru:Da(p),ga_r:Da(l)};t.emit("send event to bidmax",{type:"custom",payload:{module:"ga",...e}}),i("tracking, hit_referral:",g,"session_referral:",f,"payload:",e)}t.emit("set page level targeting",{hit_referral:g,session_referral:f})}))},vendorIds:{gdpr:"N/A"}}),(0,Yt.fo)("houseAdsOnly",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r,pageCriteria:i}=e;if(!i.firstArticleHasAdsDisabled)return void r("firstArticleHasAdsDisabled not enabled, bailing");const[o,a]=n("plugins.houseAdsOnly.keyvlaue",["code","red"]),s=n("plugins.houseAdsOnly.positions",[]);s.length?t.register("get tags",(e=>{let{slot:t}=e;const{pos:n}=t;if(s.includes(n))return r(`set ${n} targeting: ${o}=${a}`),{[o]:a}})):r("no positions configured, bailing")}}),(0,Yt.fo)("integral",{purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,getConfig:n}=e;__webpack_require__.g.__iasPET=__webpack_require__.g.__iasPET||{},__webpack_require__.g.__iasPET.queue=__webpack_require__.g.__iasPET.queue||[],__webpack_require__.g.__iasPET.pubId=n("plugin.integral.pubId",922472),__webpack_require__.g.__iasPET.timeout=n("auction.maxTime",2e3);const r=n("dfp.networkCode");let i;t.invoke("load script","//cdn.adsafeprotected.com/iasPET.1.js","__iasPET",(()=>__webpack_require__.g.__iasPET.VERSION)),t.on("configure and start prebid",(e=>{e.includes("gpt")&&vt((async()=>{await Ih(),__webpack_require__.g.__iasPET.setTargetingForGPT()}))})),t.register("get video tags",(async()=>{i||(i=new Promise((async e=>{const n=await Ih([{adSlotId:"video",adUnitPath:`/${r}/${(0,hc.Z)("video")}`,size:[[636,358]]}]),i={fr:n.fr.toString()};for(const[e,t]of Object.entries(n.brandSafety||{}))i[e]=t;for(const[e,t]of Object.entries(n.slots.video||{}))"id"!==e&&(i[e]=t);t.emit("set page level targeting",i)}))),await i}))},vendorIds:{gdpr:[278]}});const Th=e=>({adSlotId:e.getSlotElementId(),adUnitPath:e.getAdUnitPath(),size:e.getSizes().map((e=>e.getWidth&&e.getHeight?[e.getWidth(),e.getHeight()]:[1,1]))}),Ih=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:__webpack_require__.g.googletag.pubads().getSlots().map(Th),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:__webpack_require__.g.__iasPET.timeout;return new Promise(((n,r)=>{__webpack_require__.g.__iasPET.queue.push({adSlots:e,dataHandler:e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n={};try{n=JSON.parse(e)}catch(e){console.warn("[mol-ads][integral]",e)}if(n.code>299||n.code<200)return console.error("[mol-ads][integral]",n.message),void t(n);t(null,n)}(e,((e,t)=>e?r(e):n(t))),timeout:t})}))},Sh={top:30,bottom:30};async function kh(e){let{broker:t,log:n,targetParagraphIndex:r,margin:i=Sh,paragraphLoadingTimeout:o=3e3}=e;n("target paragraph index:",r);let a,s=r;__webpack_require__.g.PageCriteria.isMobile&&!__webpack_require__.g.PageCriteria.isTablet?(n("is a mobile"),a="#mobile-content > div > article"):(n("is not a mobile"),a='[itemprop="articleBody"]');const d=`${a} > :not(.mol-para-with-font), ${a} > mol-permabox > :not(.mol-para-with-font)`;n("non-paragraph selector:",d);const c=e=>new Promise((n=>{const r=()=>{document.querySelector(`${a} > .mol-para-with-font:nth-of-type(${e})`)&&(i.cancel(),clearInterval(o),n())},i=t.on("slot defined",r),o=setInterval(r,250);r()})),l=e=>{let{top:t,left:n,right:r}=e;return{top:t-i.top,bottom:t+i.bottom,left:n,right:r}};for(;;){n("awaiting",o,"millis for paragraph",s,"to be available"),await(0,He.yq)(o,c(s));const e=(u=s,[...document.querySelectorAll(`${a} > .mol-para-with-font:nth-of-type(n+${u})`)].map((e=>({paragraph:e,rect:e.getBoundingClientRect()}))));n(e.length,"paragraphs loaded so far");const t=[...document.querySelectorAll(d)].map((e=>e.getBoundingClientRect()));let r;n("there are",t.length,"non-paragraph elements in this article");const i=e.find(((e,i)=>{let{rect:o}=e;r=s+i;const a=l(o),d=(c=a,t.find((e=>{return t=c,!((n=e).left>t.right||n.right<t.left||n.top>t.bottom||n.bottom<t.top);var t,n})));var c;return d?n("paragraph",s+i,"failed, ",a,"intersects with",d):n("paragraph",s+i,"seems suitable"),!d}));if(i)return[r,i.paragraph];s+=e.length,n("getting next batch of paragraph starting from",s)}var u}(0,Yt.fo)("page.placement",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:async function(e){let{broker:t,log:n}=e;const r=(await t.invokeAll("placement requests")).flat();if(!r.length)return void n("No placement requests");const i=(0,Qe.M7)(r,"targetParagraphIndex");let o=i[0].targetParagraphIndex;n("sortedPlacementRequests",i);const a=i.map((e=>{let{sourcePlugin:t}=e;return t}));try{for(const e of i){const{targetParagraphIndex:n,insertMethod:r,log:i,margin:s}=e,d=Math.max(o,n),c={broker:t,log:i.extend("placement"),targetParagraphIndex:d,margin:s,insertMethod:r},l=await kh(c);if(!l)break;const[u,p]=l;r(p),a.shift(),o=u}}catch(e){n(`unable to find placements for: ${a.join(", ")}`)}}});var Ch=__webpack_require__(1667),Eh=__webpack_require__.n(Ch),Ah=__webpack_require__(1709),Ph=__webpack_require__.n(Ah);function xh(){return xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xh.apply(this,arguments)}var Oh=__webpack_require__(5827),Dh=__webpack_require__.n(Oh);function Rh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mh(e,t){return Mh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mh(e,t)}function Nh(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Mh(e,t)}var Uh=__webpack_require__(5891),Lh=__webpack_require__.n(Uh),jh=__webpack_require__(1731),Bh=__webpack_require__.n(jh),qh=__webpack_require__(448),Fh=__webpack_require__.n(qh);function Vh(e,t,n){return Vh=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Mh(i,n.prototype),i},Vh.apply(null,arguments)}var zh=__webpack_require__(4316),Wh=__webpack_require__.n(zh);const Hh=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=Eh().location&&Eh().location.href||"");var n="function"==typeof Eh().URL,r=/^\/\//.test(e),i=!Eh().location&&!/\/\//i.test(e);if(n?e=new(Eh().URL)(e,Eh().location||"http://example.com"):/\/\//i.test(e)||(e=Wh().buildAbsoluteURL(Eh().location&&Eh().location.href||"",e)),n){var o=new URL(t,e);return i?o.href.slice(18):r?o.href.slice(o.protocol.length):o.href}return Wh().buildAbsoluteURL(e,t)};var Zh=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),o=t.length,a=0;a<o;++a)t[a].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),$h=__webpack_require__(5175).Buffer;function Gh(e){for(var t,n=(t=e,Eh().atob?Eh().atob(t):$h.from(t,"base64").toString("binary")),r=new Uint8Array(n.length),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var Kh,Xh,Jh,Yh=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return Nh(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(Zh),Qh=String.fromCharCode(9),eg=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),n},tg=function(e){for(var t,n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),r={},i=n.length;i--;)""!==n[i]&&((t=/([^=]*)=(.*)/.exec(n[i]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),r[t[0]]=t[1]);return r},ng=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}Nh(t,e);var n=t.prototype;return n.push=function(e){var t,n,r=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((function(t,n){var r=n(e);return r===e?t:t.concat([r])}),[e]).forEach((function(e){for(var i=0;i<r.customParsers.length;i++)if(r.customParsers[i].call(r,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))r.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void r.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void r.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(e))return n=xh(eg(t[1]),{type:"tag",tagType:"byterange"}),void r.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var o=tg(t[1]);o.URI&&(n.uri=o.URI),o.BYTERANGE&&(n.byterange=eg(o.BYTERANGE))}r.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=tg(t[1]),n.attributes.RESOLUTION){var a=n.attributes.RESOLUTION.split("x"),s={};a[0]&&(s.width=parseInt(a[0],10)),a[1]&&(s.height=parseInt(a[1],10)),n.attributes.RESOLUTION=s}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}r.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=tg(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))r.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))r.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=tg(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void r.trigger("data",n);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=tg(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void r.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);if((t=/^#EXT-X-SKIP:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"skip"}).attributes=tg(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(Qh)),void r.trigger("data",n);if((t=/^#EXT-X-PART:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"part"}).attributes=tg(t[1]),["DURATION"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["INDEPENDENT","GAP"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=eg(n.attributes.BYTERANGE)),void r.trigger("data",n);if((t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"server-control"}).attributes=tg(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),void r.trigger("data",n);if((t=/^#EXT-X-PART-INF:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"part-inf"}).attributes=tg(t[1]),["PART-TARGET"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),void r.trigger("data",n);if((t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"preload-hint"}).attributes=tg(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(e){if(n.attributes.hasOwnProperty(e)){n.attributes[e]=parseInt(n.attributes[e],10);var t="BYTERANGE-LENGTH"===e?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[t]=n.attributes[e],delete n.attributes[e]}})),void r.trigger("data",n);if((t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"rendition-report"}).attributes=tg(t[1]),["LAST-MSN","LAST-PART"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseInt(n.attributes[e],10))})),void r.trigger("data",n);r.trigger("data",{type:"tag",data:e.slice(4)})}}}else r.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))},n.addParser=function(e){var t=this,n=e.expression,r=e.customType,i=e.dataParser,o=e.segment;"function"!=typeof i&&(i=function(e){return e}),this.customParsers.push((function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:i(e),customType:r,segment:o}),!0}))},n.addTagMapper=function(e){var t=e.expression,n=e.map;this.tagMappers.push((function(e){return t.test(e)?n(e):e}))},t}(Zh),rg=function(e){var t={};return Object.keys(e).forEach((function(n){var r;t[(r=n,r.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()})))]=e[n]})),t},ig=function(e){var t=e.serverControl,n=e.targetDuration,r=e.partTargetDuration;if(t){var i="#EXT-X-SERVER-CONTROL",o="holdBack",a="partHoldBack",s=n&&3*n,d=r&&2*r;n&&!t.hasOwnProperty(o)&&(t[o]=s,this.trigger("info",{message:i+" defaulting HOLD-BACK to targetDuration * 3 ("+s+")."})),s&&t[o]<s&&(this.trigger("warn",{message:i+" clamping HOLD-BACK ("+t[o]+") to targetDuration * 3 ("+s+")"}),t[o]=s),r&&!t.hasOwnProperty(a)&&(t[a]=3*r,this.trigger("info",{message:i+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[a]+")."})),r&&t[a]<d&&(this.trigger("warn",{message:i+" clamping PART-HOLD-BACK ("+t[a]+") to partTargetDuration * 2 ("+d+")."}),t[a]=d)}},og=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new Yh,t.parseStream=new ng,t.lineStream.pipe(t.parseStream);var n,r,i=Rh(t),o=[],a={},s=!1,d=function(){},c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},l=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var u=0,p=0;return t.on("end",(function(){a.uri||!a.parts&&!a.preloadHints||(!a.map&&n&&(a.map=n),!a.key&&r&&(a.key=r),a.timeline||"number"!=typeof l||(a.timeline=l),t.manifest.preloadSegment=a)})),t.parseStream.on("data",(function(e){var t,f;({tag:function(){({version:function(){e.version&&(this.manifest.version=e.version)},"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(a.byterange=t,t.length=e.length,"offset"in e||(e.offset=u)),"offset"in e&&(a.byterange=t,t.offset=e.offset),u=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(a.duration=e.duration),0===e.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("com.apple.streamingkeydelivery"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:e.attributes});if("com.microsoft.playready"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:e.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:Gh(e.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(r.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,l=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){n={},e.uri&&(n.uri=e.uri),e.byterange&&(n.byterange=e.byterange),r&&(n.key=r)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||c,e.attributes?(a.attributes||(a.attributes={}),xh(a.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||c,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var n=this.manifest.mediaGroups[e.attributes.TYPE];n[e.attributes["GROUP-ID"]]=n[e.attributes["GROUP-ID"]]||{},t=n[e.attributes["GROUP-ID"]],(f={default:/yes/i.test(e.attributes.DEFAULT)}).default?f.autoselect=!0:f.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(f.language=e.attributes.LANGUAGE),e.attributes.URI&&(f.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(f.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(f.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(f.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=f}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){l+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),a.dateTimeString=e.dateTimeString,a.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):(this.manifest.targetDuration=e.duration,ig.call(this,this.manifest))},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){a.cueOut=e.data},"cue-out-cont":function(){a.cueOutCont=e.data},"cue-in":function(){a.cueIn=e.data},skip:function(){this.manifest.skip=rg(e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",e.attributes,["SKIPPED-SEGMENTS"])},part:function(){var t=this;s=!0;var n=this.manifest.segments.length,r=rg(e.attributes);a.parts=a.parts||[],a.parts.push(r),r.byterange&&(r.byterange.hasOwnProperty("offset")||(r.byterange.offset=p),p=r.byterange.offset+r.byterange.length);var i=a.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+i+" for segment #"+n,e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(e,n){e.hasOwnProperty("lastPart")||t.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+n+" lacks required attribute(s): LAST-PART"})}))},"server-control":function(){var t=this.manifest.serverControl=rg(e.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),ig.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var t=this.manifest.segments.length,n=rg(e.attributes),r=n.type&&"PART"===n.type;a.preloadHints=a.preloadHints||[],a.preloadHints.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=r?p:0,r&&(p=n.byterange.offset+n.byterange.length)));var i=a.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+i+" for segment #"+t,e.attributes,["TYPE","URI"]),n.type)for(var o=0;o<a.preloadHints.length-1;o++){var s=a.preloadHints[o];s.type&&s.type===n.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+i+" for segment #"+t+" has the same TYPE "+n.type+" as preload hint #"+o})}},"rendition-report":function(){var t=rg(e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);var n=this.manifest.renditionReports.length-1,r=["LAST-MSN","URI"];s&&r.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+n,e.attributes,r)},"part-inf":function(){this.manifest.partInf=rg(e.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",e.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),ig.call(this,this.manifest)}}[e.tagType]||d).call(i)},uri:function(){a.uri=e.uri,o.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),r&&(a.key=r),a.timeline=l,n&&(a.map=n),p=0,a={}},comment:function(){},custom:function(){e.segment?(a.custom=a.custom||{},a.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(i)})),t}Nh(t,e);var n=t.prototype;return n.warnOnMissingAttributes_=function(e,t,n){var r=[];n.forEach((function(e){t.hasOwnProperty(e)||r.push(e)})),r.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+r.join(", ")})},n.push=function(e){this.lineStream.push(e)},n.end=function(){this.lineStream.push("\n"),this.trigger("end")},n.addParser=function(e){this.parseStream.addParser(e)},n.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(Zh),ag={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},sg=["video","audio","text"],dg=["Video","Audio","Text"],cg=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})):e},lg=function(e){void 0===e&&(e="");var t=e.split(","),n=[];return t.forEach((function(e){var t;e=e.trim(),sg.forEach((function(r){var i=ag[r].exec(e.toLowerCase());if(i&&!(i.length<=1)){t=r;var o=e.substring(0,i[1].length),a=e.replace(o,"");n.push({type:o,details:a,mediaType:r})}})),t||n.push({type:e,details:"",mediaType:"unknown"})})),n},ug=function(e){return void 0===e&&(e=""),ag.audio.test(e.trim().toLowerCase())},pg=function(e){if(e&&"string"==typeof e){var t,n=e.toLowerCase().split(",").map((function(e){return cg(e.trim())})),r="video";1===n.length&&ug(n[0])?r="audio":1===n.length&&(void 0===(t=n[0])&&(t=""),ag.text.test(t.trim().toLowerCase()))&&(r="application");var i="mp4";return n.every((function(e){return ag.mp4.test(e)}))?i="mp4":n.every((function(e){return ag.webm.test(e)}))?i="webm":n.every((function(e){return ag.ogg.test(e)}))&&(i="ogg"),r+"/"+i+';codecs="'+e+'"'}},fg=function(e){return void 0===e&&(e=""),Eh().MediaSource&&Eh().MediaSource.isTypeSupported&&Eh().MediaSource.isTypeSupported(pg(e))||!1},hg=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every((function(e){e=e.trim();for(var t=0;t<dg.length;t++)if(ag["muxer"+dg[t]].test(e))return!0;return!1}))},gg="mp4a.40.2",mg=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,vg=/^application\/dash\+xml/i,yg=function(e){return mg.test(e)?"hls":vg.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},bg=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},_g=function(e){return e instanceof Uint8Array?e:(Array.isArray(e)||function(e){return bg(e)}(e)||e instanceof ArrayBuffer||(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},wg=Eh().BigInt||Number,Tg=[wg("0x1"),wg("0x100"),wg("0x10000"),wg("0x1000000"),wg("0x100000000"),wg("0x10000000000"),wg("0x1000000000000"),wg("0x100000000000000"),wg("0x10000000000000000")],Ig=(Kh=new Uint16Array([65484]),255===(Xh=new Uint8Array(Kh.buffer,Kh.byteOffset,Kh.byteLength))[0]||Xh[0],function(e,t){var n=void 0===t?{}:t,r=n.signed,i=void 0!==r&&r,o=n.le,a=void 0!==o&&o;e=_g(e);var s=a?"reduce":"reduceRight",d=(e[s]?e[s]:Array.prototype[s]).call(e,(function(t,n,r){var i=a?r:Math.abs(r+1-e.length);return t+wg(n)*Tg[i]}),wg(0));if(i){var c=Tg[e.length]/wg(2)-wg(1);(d=wg(d))>c&&(d-=c,d-=c,d-=wg(2))}return Number(d)}),Sg=function(e,t){if("string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},kg=function(e,t,n){var r=void 0===n?{}:n,i=r.offset,o=void 0===i?0:i,a=r.mask,s=void 0===a?[]:a;e=_g(e);var d=(t=_g(t)).every?t.every:Array.prototype.every;return t.length&&e.length-o>=t.length&&d.call(t,(function(t,n){return t===(s[n]?s[n]&e[o+n]:e[o+n])}))},Cg=__webpack_require__(9684),Eg=function(e){return!!e&&"object"==typeof e},Ag=function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce((function(t,n){return"object"!=typeof n||Object.keys(n).forEach((function(r){Array.isArray(t[r])&&Array.isArray(n[r])?t[r]=t[r].concat(n[r]):Eg(t[r])&&Eg(n[r])?t[r]=e(t[r],n[r]):t[r]=n[r]})),t}),{})},Pg=function(e){return Object.keys(e).map((function(t){return e[t]}))},xg=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])},Og=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},Dg=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},Rg=function(e){var t=e.baseUrl,n=void 0===t?"":t,r=e.source,i=void 0===r?"":r,o=e.range,a=void 0===o?"":o,s=e.indexRange,d=void 0===s?"":s,c={uri:i,resolvedUri:Hh(n||"",i)};if(a||d){var l,u=(a||d).split("-"),p=Eh().BigInt?Eh().BigInt(u[0]):parseInt(u[0],10),f=Eh().BigInt?Eh().BigInt(u[1]):parseInt(u[1],10);p<Number.MAX_SAFE_INTEGER&&"bigint"==typeof p&&(p=Number(p)),f<Number.MAX_SAFE_INTEGER&&"bigint"==typeof f&&(f=Number(f)),"bigint"==typeof(l="bigint"==typeof f||"bigint"==typeof p?Eh().BigInt(f)-Eh().BigInt(p)+Eh().BigInt(1):f-p+1)&&l<Number.MAX_SAFE_INTEGER&&(l=Number(l)),c.byterange={length:l,offset:p}}return c},Mg=function(e){return e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e},Ng={static:function(e){var t=e.duration,n=e.timescale,r=void 0===n?1:n,i=e.sourceDuration,o=e.periodDuration,a=Mg(e.endNumber),s=t/r;return"number"==typeof a?{start:0,end:a}:"number"==typeof o?{start:0,end:o/s}:{start:0,end:i/s}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,r=e.availabilityStartTime,i=e.timescale,o=void 0===i?1:i,a=e.duration,s=e.periodStart,d=void 0===s?0:s,c=e.minimumUpdatePeriod,l=void 0===c?0:c,u=e.timeShiftBufferDepth,p=void 0===u?1/0:u,f=Mg(e.endNumber),h=(t+n)/1e3,g=r+d,m=h+l-g,v=Math.ceil(m*o/a),y=Math.floor((h-g-p)*o/a),b=Math.floor((h-g)*o/a);return{start:Math.max(0,y),end:"number"==typeof f?f:Math.min(v,b)}}},Ug=function(e){var t=e.type,n=e.duration,r=e.timescale,i=void 0===r?1:r,o=e.periodDuration,a=e.sourceDuration,s=Ng[t](e),d=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n}(s.start,s.end).map(function(e){return function(t){var n=e.duration,r=e.timescale,i=void 0===r?1:r,o=e.periodStart,a=e.startNumber;return{number:(void 0===a?1:a)+t,duration:n/i,timeline:o,time:t*n}}}(e));if("static"===t){var c=d.length-1,l="number"==typeof o?o:a;d[c].duration=l-n/i*c}return d},Lg=function(e){var t=e.baseUrl,n=e.initialization,r=void 0===n?{}:n,i=e.sourceDuration,o=e.indexRange,a=void 0===o?"":o,s=e.periodStart,d=e.presentationTime,c=e.number,l=void 0===c?0:c,u=e.duration;if(!t)throw new Error("NO_BASE_URL");var p=Rg({baseUrl:t,source:r.sourceURL,range:r.range}),f=Rg({baseUrl:t,source:t,indexRange:a});if(f.map=p,u){var h=Ug(e);h.length&&(f.duration=h[0].duration,f.timeline=h[0].timeline)}else i&&(f.duration=i,f.timeline=s);return f.presentationTime=d||s,f.number=l,[f]},jg=function(e,t,n){var r,i=e.sidx.map?e.sidx.map:null,o=e.sidx.duration,a=e.timeline||0,s=e.sidx.byterange,d=s.offset+s.length,c=t.timescale,l=t.references.filter((function(e){return 1!==e.referenceType})),u=[],p=e.endList?"static":"dynamic",f=e.sidx.timeline,h=f,g=e.mediaSequence||0;r="bigint"==typeof t.firstOffset?Eh().BigInt(d)+t.firstOffset:d+t.firstOffset;for(var m=0;m<l.length;m++){var v,y=t.references[m],b=y.referencedSize,_=y.subsegmentDuration;v="bigint"==typeof r?r+Eh().BigInt(b)-Eh().BigInt(1):r+b-1;var w=Lg({baseUrl:n,timescale:c,timeline:a,periodStart:f,presentationTime:h,number:g,duration:_,sourceDuration:o,indexRange:r+"-"+v,type:p})[0];i&&(w.map=i),u.push(w),r+="bigint"==typeof r?Eh().BigInt(b):b,h+=_/c,g++}return e.segments=u,e},Bg=["AUDIO","SUBTITLES"],qg=function(e){return(t=e,n=function(e){return e.timeline},Pg(t.reduce((function(e,t){return t.forEach((function(t){e[n(t)]=t})),e}),{}))).sort((function(e,t){return e.timeline>t.timeline?1:-1}));var t,n},Fg=function(e){var t,n,r=[];return t=e,n=function(e,t,n,i){r=r.concat(e.playlists||[])},Bg.forEach((function(e){for(var r in t.mediaGroups[e])for(var i in t.mediaGroups[e][r]){var o=t.mediaGroups[e][r][i];n(o)}})),r},Vg=function(e){var t=e.playlist,n=e.mediaSequence;t.mediaSequence=n,t.segments.forEach((function(e,n){e.number=t.mediaSequence+n}))},zg=function(e){return e&&e.uri+"-"+(n="bigint"==typeof(t=e.byterange).offset||"bigint"==typeof t.length?Eh().BigInt(t.offset)+Eh().BigInt(t.length)-Eh().BigInt(1):t.offset+t.length-1,t.offset+"-"+n);var t,n},Wg=function(e){return Pg(e.reduce((function(e,t){var n,r=t.attributes.id+(t.attributes.lang||"");e[r]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),(n=e[r].segments).push.apply(n,t.segments)),t.attributes.contentProtection&&(e[r].attributes.contentProtection=t.attributes.contentProtection)):(e[r]=t,e[r].attributes.timelineStarts=[]);return e[r].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e}),{})).map((function(e){var t;return e.discontinuityStarts=(t=e.segments||[],"discontinuity",t.reduce((function(e,t,n){return t.discontinuity&&e.push(n),e}),[])),e}))},Hg=function(e,t){var n=zg(e.sidx),r=n&&t[n]&&t[n].sidx;return r&&jg(e,r,e.sidx.resolvedUri),e},Zg=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e)e[n]=Hg(e[n],t);return e},$g=function(e){var t,n=e.attributes,r=e.segments,i=e.sidx,o=e.discontinuityStarts,a={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuityStarts:o,timelineStarts:n.timelineStarts,segments:r};return n.frameRate&&(a.attributes["FRAME-RATE"]=n.frameRate),n.contentProtection&&(a.contentProtection=n.contentProtection),i&&(a.sidx=i),a},Gg=function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType},Kg=function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType},Xg=function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType},Jg=function(e){return e?Object.keys(e).reduce((function(t,n){var r=e[n];return t.concat(r.playlists)}),[]):[]},Yg=function(e){var t,n=e.dashPlaylists,r=e.locations,i=e.sidxMapping,o=void 0===i?{}:i,a=e.previousManifest;if(!n.length)return{};var s=n[0].attributes,d=s.sourceDuration,c=s.type,l=s.suggestedPresentationDelay,u=s.minimumUpdatePeriod,p=Wg(n.filter(Gg)).map($g),f=Wg(n.filter(Kg)),h=Wg(n.filter(Xg)),g=n.map((function(e){return e.attributes.captionServices})).filter(Boolean),m={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:d,playlists:Zg(p,o)};u>=0&&(m.minimumUpdatePeriod=1e3*u),r&&(m.locations=r),"dynamic"===c&&(m.suggestedPresentationDelay=l);var v,y,b,_,w,T,I,S=0===m.playlists.length,k=f.length?function(e,t,n){var r;void 0===t&&(t={}),void 0===n&&(n=!1);var i=e.reduce((function(e,i){var o=i.attributes.role&&i.attributes.role.value||"",a=i.attributes.lang||"",s=i.attributes.label||"main";if(a&&!i.attributes.label){var d=o?" ("+o+")":"";s=""+i.attributes.lang+d}e[s]||(e[s]={language:a,autoselect:!0,default:"main"===o,playlists:[],uri:""});var c=Hg(function(e,t){var n,r=e.attributes,i=e.segments,o=e.sidx,a=e.mediaSequence,s=e.discontinuitySequence,d=e.discontinuityStarts,c={attributes:(n={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===r.type,timeline:r.periodStart,resolvedUri:"",targetDuration:r.duration,discontinuitySequence:s,discontinuityStarts:d,timelineStarts:r.timelineStarts,mediaSequence:a,segments:i};return r.contentProtection&&(c.contentProtection=r.contentProtection),o&&(c.sidx=o),t&&(c.attributes.AUDIO="audio",c.attributes.SUBTITLES="subs"),c}(i,n),t);return e[s].playlists.push(c),void 0===r&&"main"===o&&((r=i).default=!0),e}),{});return r||(i[Object.keys(i)[0]].default=!0),i}(f,o,S):null,C=h.length?function(e,t){return void 0===t&&(t={}),e.reduce((function(e,n){var r=n.attributes.lang||"text";return e[r]||(e[r]={language:r,default:!1,autoselect:!1,playlists:[],uri:""}),e[r].playlists.push(Hg(function(e){var t,n=e.attributes,r=e.segments,i=e.mediaSequence,o=e.discontinuityStarts,a=e.discontinuitySequence;void 0===r&&(r=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var s=((t={NAME:n.id,BANDWIDTH:n.bandwidth})["PROGRAM-ID"]=1,t);return n.codecs&&(s.CODECS=n.codecs),{attributes:s,uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:o,discontinuitySequence:a,mediaSequence:i,segments:r}}(n),t)),e}),{})}(h,o):null,E=p.concat(Jg(k),Jg(C)),A=E.map((function(e){return e.timelineStarts}));return m.timelineStarts=qg(A),v=E,y=m.timelineStarts,v.forEach((function(e){e.mediaSequence=0,e.discontinuitySequence=Dg(y,(function(t){return t.timeline===e.timeline})),e.segments&&e.segments.forEach((function(e,t){e.number=t}))})),k&&(m.mediaGroups.AUDIO.audio=k),C&&(m.mediaGroups.SUBTITLES.subs=C),g.length&&(m.mediaGroups["CLOSED-CAPTIONS"].cc=g.reduce((function(e,t){return t?(t.forEach((function(t){var n=t.channel,r=t.language;e[r]={autoselect:!1,default:!1,instreamId:n,language:r},t.hasOwnProperty("aspectRatio")&&(e[r].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[r].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[r]["3D"]=t["3D"])})),e):e}),{})),a?(_=(b={oldManifest:a,newManifest:m}).oldManifest,w=b.newManifest,T=_.playlists.concat(Fg(_)),I=w.playlists.concat(Fg(w)),w.timelineStarts=qg([_.timelineStarts,w.timelineStarts]),function(e){var t=e.oldPlaylists,n=e.timelineStarts;e.newPlaylists.forEach((function(e){e.discontinuitySequence=Dg(n,(function(t){return t.timeline===e.timeline}));var r=function(e,t){for(var n=0;n<e.length;n++)if(e[n].attributes.NAME===t)return e[n];return null}(t,e.attributes.NAME);if(r&&!e.sidx){var i=e.segments[0],o=Dg(r.segments,(function(e){return Math.abs(e.presentationTime-i.presentationTime)<.016666666666666666}));if(-1===o)return Vg({playlist:e,mediaSequence:r.mediaSequence+r.segments.length}),e.segments[0].discontinuity=!0,e.discontinuityStarts.unshift(0),void((!r.segments.length&&e.timeline>r.timeline||r.segments.length&&e.timeline>r.segments[r.segments.length-1].timeline)&&e.discontinuitySequence--);r.segments[o].discontinuity&&!i.discontinuity&&(i.discontinuity=!0,e.discontinuityStarts.unshift(0),e.discontinuitySequence--),Vg({playlist:e,mediaSequence:r.segments[o].number})}}))}({oldPlaylists:T,newPlaylists:I,timelineStarts:w.timelineStarts}),w):m},Qg=function(e,t,n){var r=e.NOW,i=e.clientOffset,o=e.availabilityStartTime,a=e.timescale,s=void 0===a?1:a,d=e.periodStart,c=void 0===d?0:d,l=e.minimumUpdatePeriod,u=(r+i)/1e3+(void 0===l?0:l)-(o+c);return Math.ceil((u*s-t)/n)},em=function(e,t){for(var n=e.type,r=e.minimumUpdatePeriod,i=void 0===r?0:r,o=e.media,a=void 0===o?"":o,s=e.sourceDuration,d=e.timescale,c=void 0===d?1:d,l=e.startNumber,u=void 0===l?1:l,p=e.periodStart,f=[],h=-1,g=0;g<t.length;g++){var m=t[g],v=m.d,y=m.r||0,b=m.t||0;h<0&&(h=b),b&&b>h&&(h=b);var _=void 0;if(y<0){var w=g+1;_=w===t.length?"dynamic"===n&&i>0&&a.indexOf("$Number$")>0?Qg(e,h,v):(s*c-h)/v:(t[w].t-h)/v}else _=y+1;for(var T=u+f.length+_,I=u+f.length;I<T;)f.push({number:I,duration:v/c,time:h,timeline:p}),h+=v,I++}return f},tm=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,nm=function(e,t){return e.replace(tm,function(e){return function(t,n,r,i){if("$$"===t)return"$";if(void 0===e[n])return t;var o=""+e[n];return"RepresentationID"===n?o:(i=r?parseInt(i,10):1,o.length>=i?o:""+new Array(i-o.length+1).join("0")+o)}}(t))},rm=function(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},r=e.initialization,i=void 0===r?{sourceURL:"",range:""}:r,o=Rg({baseUrl:e.baseUrl,source:nm(i.sourceURL,n),range:i.range}),a=function(e,t){return e.duration||t?e.duration?Ug(e):em(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]}(e,t);return a.map((function(t){n.Number=t.number,n.Time=t.time;var r=nm(e.media||"",n),i=e.timescale||1,a=e.presentationTimeOffset||0,s=e.periodStart+(t.time-a)/i;return{uri:r,timeline:t.timeline,duration:t.duration,resolvedUri:Hh(e.baseUrl||"",r),map:o,number:t.number,presentationTime:s}}))},im=function(e,t){var n=e.duration,r=e.segmentUrls,i=void 0===r?[]:r,o=e.periodStart;if(!n&&!t||n&&t)throw new Error("SEGMENT_TIME_UNSPECIFIED");var a,s=i.map((function(t){return function(e,t){var n=e.baseUrl,r=e.initialization,i=void 0===r?{}:r,o=Rg({baseUrl:n,source:i.sourceURL,range:i.range}),a=Rg({baseUrl:n,source:t.media,range:t.mediaRange});return a.map=o,a}(e,t)}));return n&&(a=Ug(e)),t&&(a=em(e,t)),a.map((function(t,n){if(s[n]){var r=s[n],i=e.timescale||1,a=e.presentationTimeOffset||0;return r.timeline=t.timeline,r.duration=t.duration,r.number=t.number,r.presentationTime=o+(t.time-a)/i,r}})).filter((function(e){return e}))},om=function(e){var t,n,r=e.attributes,i=e.segmentInfo;i.template?(n=rm,t=Ag(r,i.template)):i.base?(n=Lg,t=Ag(r,i.base)):i.list&&(n=im,t=Ag(r,i.list));var o={attributes:r};if(!n)return o;var a=n(t,i.segmentTimeline);if(t.duration){var s=t,d=s.duration,c=s.timescale,l=void 0===c?1:c;t.duration=d/l}else a.length?t.duration=a.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):t.duration=0;return o.attributes=t,o.segments=a,i.base&&t.indexRange&&(o.sidx=a[0],o.segments=[]),o},am=function(e,t){return Og(e.childNodes).filter((function(e){return e.tagName===t}))},sm=function(e){return e.textContent.trim()},dm=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var n=t.slice(1),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],d=n[5];return 31536e3*parseFloat(r||0)+2592e3*parseFloat(i||0)+86400*parseFloat(o||0)+3600*parseFloat(a||0)+60*parseFloat(s||0)+parseFloat(d||0)},cm={mediaPresentationDuration:function(e){return dm(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return dm(e)},suggestedPresentationDelay:function(e){return dm(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return dm(e)},start:function(e){return dm(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},frameRate:function(e){return function(e){return parseFloat(e.split("/").reduce((function(e,t){return e/t})))}(e)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?dm(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},lm=function(e){return e&&e.attributes?Og(e.attributes).reduce((function(e,t){var n=cm[t.name]||cm.DEFAULT;return e[t.name]=n(t.value),e}),{}):{}},um={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},pm=function(e,t){return t.length?xg(e.map((function(e){return t.map((function(t){return Hh(e,sm(t))}))}))):e},fm=function(e){var t=am(e,"SegmentTemplate")[0],n=am(e,"SegmentList")[0],r=n&&am(n,"SegmentURL").map((function(e){return Ag({tag:"SegmentURL"},lm(e))})),i=am(e,"SegmentBase")[0],o=n||t,a=o&&am(o,"SegmentTimeline")[0],s=n||i||t,d=s&&am(s,"Initialization")[0],c=t&&lm(t);c&&d?c.initialization=d&&lm(d):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var l={template:c,segmentTimeline:a&&am(a,"S").map((function(e){return lm(e)})),list:n&&Ag(lm(n),{segmentUrls:r,initialization:lm(d)}),base:i&&Ag(lm(i),{initialization:lm(d)})};return Object.keys(l).forEach((function(e){l[e]||delete l[e]})),l},hm=function(e,t){return function(n,r){var i=pm(t,am(n.node,"BaseURL")),o=Ag(e,{periodStart:n.attributes.start});"number"==typeof n.attributes.duration&&(o.periodDuration=n.attributes.duration);var a=am(n.node,"AdaptationSet"),s=fm(n.node);return xg(a.map(function(e,t,n){return function(r){var i,o=lm(r),a=pm(t,am(r,"BaseURL")),s=am(r,"Role")[0],d={role:lm(s)},c=Ag(e,o,d),l=am(r,"Accessibility")[0],u="urn:scte:dash:cc:cea-608:2015"===(i=lm(l)).schemeIdUri?("string"!=typeof i.value?[]:i.value.split(";")).map((function(e){var t,n;if(n=e,/^CC\d=/.test(e)){var r=e.split("=");t=r[0],n=r[1]}else/^CC\d$/.test(e)&&(t=e);return{channel:t,language:n}})):"urn:scte:dash:cc:cea-708:2015"===i.schemeIdUri?("string"!=typeof i.value?[]:i.value.split(";")).map((function(e){var t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){var n=e.split("="),r=n[0],i=n[1],o=void 0===i?"":i;t.channel=r,t.language=e,o.split(",").forEach((function(e){var n=e.split(":"),r=n[0],i=n[1];"lang"===r?t.language=i:"er"===r?t.easyReader=Number(i):"war"===r?t.aspectRatio=Number(i):"3D"===r&&(t["3D"]=Number(i))}))}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t})):void 0;u&&(c=Ag(c,{captionServices:u}));var p=am(r,"Label")[0];if(p&&p.childNodes.length){var f=p.childNodes[0].nodeValue.trim();c=Ag(c,{label:f})}var h=am(r,"ContentProtection").reduce((function(e,t){var n=lm(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());var r=um[n.schemeIdUri];if(r){e[r]={attributes:n};var i=am(t,"cenc:pssh")[0];if(i){var o=sm(i);e[r].pssh=o&&Gh(o)}}return e}),{});Object.keys(h).length&&(c=Ag(c,{contentProtection:h}));var g=fm(r),m=am(r,"Representation"),v=Ag(n,g);return xg(m.map(function(e,t,n){return function(r){var i=am(r,"BaseURL"),o=pm(t,i),a=Ag(e,lm(r)),s=fm(r);return o.map((function(e){return{segmentInfo:Ag(n,s),attributes:Ag(a,{baseUrl:e})}}))}}(c,a,v)))}}(o,i,s)))}},gm=function(e){if(""===e)throw new Error("DASH_EMPTY_MANIFEST");var t,n,r=new Cg.DOMParser;try{n=(t=r.parseFromString(e,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(e){}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return n},mm=__webpack_require__(4441),vm=__webpack_require__.n(mm),ym=_g([73,68,51]),bm=function e(t,n){return void 0===n&&(n=0),(t=_g(t)).length-n<10||!kg(t,ym,{offset:n})?n:(n+=function(e,t){void 0===t&&(t=0);var n=(e=_g(e))[t+5],r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&n)>>4?r+20:r+10}(t,n),e(t,n))},_m=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"==typeof e?Sg(e):e}),wm=function(e){e=_g(e);for(var t=[],n=0;e.length>n;){var r=e[n],i=0,o=0,a=e[++o];for(o++;128&a;)i=(127&a)<<7,a=e[o],o++;i+=127&a;for(var s=0;s<Jh.length;s++){var d=Jh[s],c=d.id,l=d.parser;if(r===c){t.push(l(e.subarray(o,o+i)));break}}n+=i+o}return t};Jh=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var n=e[t.size];t.url=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,_g(e));try{return decodeURIComponent(escape(t))}catch(e){}return t}(e.subarray(t.size+1,t.size+1+n)),t.size+=n}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=wm(e.subarray(t.size))||[],t}},{id:4,parser:function(e){return{tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:wm(e.subarray(13))}}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var Tm=function e(t,n,r){void 0===r&&(r=!1),n=function(e){return Array.isArray(e)?e.map((function(e){return _m(e)})):[_m(e)]}(n),t=_g(t);var i=[];if(!n.length)return i;for(var o=0;o<t.length;){var a=(t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3])>>>0,s=t.subarray(o+4,o+8);if(0===a)break;var d=o+a;if(d>t.length){if(r)break;d=t.length}var c=t.subarray(o+8,d);kg(s,n[0])&&(1===n.length?i.push(c):i.push.apply(i,e(c,n.slice(1),r))),o=d}return i},Im={EBML:_g([26,69,223,163]),DocType:_g([66,130]),Segment:_g([24,83,128,103]),SegmentInfo:_g([21,73,169,102]),Tracks:_g([22,84,174,107]),Track:_g([174]),TrackNumber:_g([215]),DefaultDuration:_g([35,227,131]),TrackEntry:_g([174]),TrackType:_g([131]),FlagDefault:_g([136]),CodecID:_g([134]),CodecPrivate:_g([99,162]),VideoTrack:_g([224]),AudioTrack:_g([225]),Cluster:_g([31,67,182,117]),Timestamp:_g([231]),TimestampScale:_g([42,215,177]),BlockGroup:_g([160]),BlockDuration:_g([155]),Block:_g([161]),SimpleBlock:_g([163])},Sm=[128,64,32,16,8,4,2,1],km=function(e,t,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1);var i=function(e){for(var t=1,n=0;n<Sm.length&&!(e&Sm[n]);n++)t++;return t}(e[t]),o=e.subarray(t,t+i);return n&&((o=Array.prototype.slice.call(e,t,t+i))[0]^=Sm[i-1]),{length:i,value:Ig(o,{signed:r}),bytes:o}},Cm=function e(t){return"string"==typeof t?t.match(/.{1,2}/g).map((function(t){return e(t)})):"number"==typeof t?function(e,t){var n=(void 0===t?{}:t).le,r=void 0!==n&&n;("bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e)&&(e=0);for(var i,o=(i=e=wg(e),Math.ceil(function(e){return e.toString(2).length}(i)/8)),a=new Uint8Array(new ArrayBuffer(o)),s=0;s<o;s++){var d=r?s:Math.abs(s+1-a.length);a[d]=Number(e/Tg[s]&wg(255)),e<0&&(a[d]=Math.abs(~a[d]),a[d]-=0===s?1:2)}return a}(t):t},Em=function e(t,n,r){if(r>=n.length)return n.length;var i=km(n,r,!1);if(kg(t.bytes,i.bytes))return r;var o=km(n,r+i.length);return e(t,n,r+o.length+o.value+i.length)},Am=function e(t,n){n=function(e){return Array.isArray(e)?e.map((function(e){return Cm(e)})):[Cm(e)]}(n),t=_g(t);var r=[];if(!n.length)return r;for(var i=0;i<t.length;){var o=km(t,i,!1),a=km(t,i+o.length),s=i+o.length+a.length;127===a.value&&(a.value=Em(o,t,s),a.value!==t.length&&(a.value-=s));var d=s+a.value>t.length?t.length:s+a.value,c=t.subarray(s,d);kg(n[0],o.bytes)&&(1===n.length?r.push(c):r=r.concat(e(c,n.slice(1)))),i+=o.length+a.length+c.length}return r},Pm=_g([0,0,0,1]),xm=_g([0,0,1]),Om=_g([0,0,3]),Dm=function(e){for(var t=[],n=1;n<e.length-2;)kg(e.subarray(n,n+3),Om)&&(t.push(n+2),n++),n++;if(0===t.length)return e;var r=e.length-t.length,i=new Uint8Array(r),o=0;for(n=0;n<r;o++,n++)o===t[0]&&(o++,t.shift()),i[n]=e[o];return i},Rm=function(e,t,n,r){void 0===r&&(r=1/0),e=_g(e),n=[].concat(n);for(var i,o=0,a=0;o<e.length&&(a<r||i);){var s=void 0;if(kg(e.subarray(o),Pm)?s=4:kg(e.subarray(o),xm)&&(s=3),s){if(a++,i)return Dm(e.subarray(i,o));var d=void 0;"h264"===t?d=31&e[o+s]:"h265"===t&&(d=e[o+s]>>1&63),-1!==n.indexOf(d)&&(i=o+s),o+=s+("h264"===t?1:2)}else o++}return e.subarray(0,0)},Mm={webm:_g([119,101,98,109]),matroska:_g([109,97,116,114,111,115,107,97]),flac:_g([102,76,97,67]),ogg:_g([79,103,103,83]),ac3:_g([11,119]),riff:_g([82,73,70,70]),avi:_g([65,86,73]),wav:_g([87,65,86,69]),"3gp":_g([102,116,121,112,51,103]),mp4:_g([102,116,121,112]),fmp4:_g([115,116,121,112]),mov:_g([102,116,121,112,113,116]),moov:_g([109,111,111,118]),moof:_g([109,111,111,102])},Nm={aac:function(e){var t=bm(e);return kg(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=bm(e);return kg(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Am(e,[Im.EBML,Im.DocType])[0];return kg(t,Mm.webm)},mkv:function(e){var t=Am(e,[Im.EBML,Im.DocType])[0];return kg(t,Mm.matroska)},mp4:function(e){return!Nm["3gp"](e)&&!Nm.mov(e)&&(!(!kg(e,Mm.mp4,{offset:4})&&!kg(e,Mm.fmp4,{offset:4}))||!(!kg(e,Mm.moof,{offset:4})&&!kg(e,Mm.moov,{offset:4}))||void 0)},mov:function(e){return kg(e,Mm.mov,{offset:4})},"3gp":function(e){return kg(e,Mm["3gp"],{offset:4})},ac3:function(e){var t=bm(e);return kg(e,Mm.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=bm(e);return kg(e,Mm.flac,{offset:t})},ogg:function(e){return kg(e,Mm.ogg)},avi:function(e){return kg(e,Mm.riff)&&kg(e,Mm.avi,{offset:8})},wav:function(e){return kg(e,Mm.riff)&&kg(e,Mm.wav,{offset:8})},h264:function(e){return function(e,t,n){return Rm(e,"h264",7,3)}(e).length},h265:function(e){return function(e,t,n){return Rm(e,"h265",[32,33],3)}(e).length}},Um=Object.keys(Nm).filter((function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e})).concat(["ts","h264","h265"]);Um.forEach((function(e){var t=Nm[e];Nm[e]=function(e){return t(_g(e))}}));for(var Lm,jm=Nm,Bm=function(e){e=_g(e);for(var t=0;t<Um.length;t++){var n=Um[t];if(jm[n](e))return n}return""},qm=__webpack_require__(9750),Fm="7.21.0",Vm={},zm=function(e,t){return Vm[e]=Vm[e]||[],t&&(Vm[e]=Vm[e].concat(t)),Vm[e]},Wm=function(e,t){var n=zm(e).indexOf(t);return!(n<=-1||(Vm[e]=Vm[e].slice(),Vm[e].splice(n,1),0))},Hm={prefixed:!0},Zm=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],$m=Zm[0],Gm=0;Gm<Zm.length;Gm++)if(Zm[Gm][1]in Ph()){Lm=Zm[Gm];break}if(Lm){for(var Km=0;Km<Lm.length;Km++)Hm[$m[Km]]=Lm[Km];Hm.prefixed=Lm[0]!==$m[0]}var Xm=[],Jm=function e(t){var n,r="info",i=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n("log",r,t)};return n=function(e,t){return function(n,r,i){var o=t.levels[r],a=new RegExp("^("+o+")$");if("log"!==n&&i.unshift(n.toUpperCase()+":"),i.unshift(e+":"),Xm){Xm.push([].concat(i));var s=Xm.length-1e3;Xm.splice(0,s>0?s:0)}if(Eh().console){var d=Eh().console[n];d||"debug"!==n||(d=Eh().console.info||Eh().console.log),d&&o&&a.test(n)&&d[Array.isArray(i)?"apply":"call"](Eh().console,i)}}}(t,i),i.createLogger=function(n){return e(t+": "+n)},i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},i.level=function(e){if("string"==typeof e){if(!i.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');r=e}return r},(i.history=function(){return Xm?[].concat(Xm):[]}).filter=function(e){return(Xm||[]).filter((function(t){return new RegExp(".*"+e+".*").test(t[0])}))},i.history.clear=function(){Xm&&(Xm.length=0)},i.history.disable=function(){null!==Xm&&(Xm.length=0,Xm=null)},i.history.enable=function(){null===Xm&&(Xm=[])},i.error=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n("error",r,t)},i.warn=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n("warn",r,t)},i.debug=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n("debug",r,t)},i}("VIDEOJS"),Ym=Jm.createLogger,Qm=Object.prototype.toString,ev=function(e){return rv(e)?Object.keys(e):[]};function tv(e,t){ev(e).forEach((function(n){return t(e[n],n)}))}function nv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign?xh.apply(void 0,[e].concat(n)):(n.forEach((function(t){t&&tv(t,(function(t,n){e[n]=t}))})),e)}function rv(e){return!!e&&"object"==typeof e}function iv(e){return rv(e)&&"[object Object]"===Qm.call(e)&&e.constructor===Object}function ov(e,t){if(!e||!t)return"";if("function"==typeof Eh().getComputedStyle){var n;try{n=Eh().getComputedStyle(e)}catch(e){return""}return n?n.getPropertyValue(t)||n[t]:""}return""}var av,sv,dv,cv=Eh().navigator&&Eh().navigator.userAgent||"",lv=/AppleWebKit\/([\d.]+)/i.exec(cv),uv=lv?parseFloat(lv.pop()):null,pv=/iPod/i.test(cv),fv=(av=cv.match(/OS (\d+)_/i))&&av[1]?av[1]:null,hv=/Android/i.test(cv),gv=function(){var e=cv.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),mv=hv&&gv<5&&uv<537,vv=/Firefox/i.test(cv),yv=/Edg/i.test(cv),bv=!yv&&(/Chrome/i.test(cv)||/CriOS/i.test(cv)),_v=function(){var e=cv.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),wv=(sv=/MSIE\s(\d+)\.\d/.exec(cv),!(dv=sv&&parseFloat(sv[1]))&&/Trident\/7.0/i.test(cv)&&/rv:11.0/.test(cv)&&(dv=11),dv),Tv=/Safari/i.test(cv)&&!bv&&!hv&&!yv,Iv=/Windows/i.test(cv),Sv=Boolean(Dv()&&("ontouchstart"in Eh()||Eh().navigator.maxTouchPoints||Eh().DocumentTouch&&Eh().document instanceof Eh().DocumentTouch)),kv=/iPad/i.test(cv)||Tv&&Sv&&!/iPhone/i.test(cv),Cv=/iPhone/i.test(cv)&&!kv,Ev=Cv||kv||pv,Av=(Tv||Ev)&&!bv,Pv=Object.freeze({__proto__:null,IS_IPOD:pv,IOS_VERSION:fv,IS_ANDROID:hv,ANDROID_VERSION:gv,IS_NATIVE_ANDROID:mv,IS_FIREFOX:vv,IS_EDGE:yv,IS_CHROME:bv,CHROME_VERSION:_v,IE_VERSION:wv,IS_SAFARI:Tv,IS_WINDOWS:Iv,TOUCH_ENABLED:Sv,IS_IPAD:kv,IS_IPHONE:Cv,IS_IOS:Ev,IS_ANY_SAFARI:Av});function xv(e){return"string"==typeof e&&Boolean(e.trim())}function Ov(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Dv(){return Ph()===Eh().document}function Rv(e){return rv(e)&&1===e.nodeType}function Mv(){try{return Eh().parent!==Eh().self}catch(e){return!0}}function Nv(e){return function(t,n){if(!xv(t))return Ph()[e](null);xv(n)&&(n=Ph().querySelector(n));var r=Rv(n)?n:Ph();return r[e]&&r[e](t)}}function Uv(e,t,n,r){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={});var i=Ph().createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){var n=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(Jm.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+n+"."),i.setAttribute(e,n)):"textContent"===e?Lv(i,n):i[e]===n&&"tabIndex"!==e||(i[e]=n)})),Object.getOwnPropertyNames(n).forEach((function(e){i.setAttribute(e,n[e])})),r&&ny(i,r),i}function Lv(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function jv(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function Bv(e,t){return Ov(t),e.classList?e.classList.contains(t):(n=t,new RegExp("(^|\\s)"+n+"($|\\s)")).test(e.className);var n}function qv(e,t){return e.classList?e.classList.add(t):Bv(e,t)||(e.className=(e.className+" "+t).trim()),e}function Fv(e,t){return e?(e.classList?e.classList.remove(t):(Ov(t),e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")),e):(Jm.warn("removeClass was called with an element that doesn't exist"),null)}function Vv(e,t,n){var r=Bv(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!r),n!==r)return n?qv(e,t):Fv(e,t),e}function zv(e,t){Object.getOwnPropertyNames(t).forEach((function(n){var r=t[n];null==r||!1===r?e.removeAttribute(n):e.setAttribute(n,!0===r?"":r)}))}function Wv(e){var t={};if(e&&e.attributes&&e.attributes.length>0)for(var n=e.attributes,r=n.length-1;r>=0;r--){var i=n[r].name,o=n[r].value;"boolean"!=typeof e[i]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+i+",")||(o=null!==o),t[i]=o}return t}function Hv(e,t){return e.getAttribute(t)}function Zv(e,t,n){e.setAttribute(t,n)}function $v(e,t){e.removeAttribute(t)}function Gv(){Ph().body.focus(),Ph().onselectstart=function(){return!1}}function Kv(){Ph().onselectstart=function(){return!0}}function Xv(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((function(e){void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat(ov(e,"height"))),n.width||(n.width=parseFloat(ov(e,"width"))),n}}function Jv(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,n=e.offsetHeight,r=0,i=0;e.offsetParent&&e!==Ph()[Hm.fullscreenElement];)r+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{left:r,top:i,width:t,height:n}}function Yv(e,t){var n={x:0,y:0};if(Ev)for(var r=e;r&&"html"!==r.nodeName.toLowerCase();){var i=ov(r,"transform");if(/^matrix/.test(i)){var o=i.slice(7,-1).split(/,\s/).map(Number);n.x+=o[4],n.y+=o[5]}else if(/^matrix3d/.test(i)){var a=i.slice(9,-1).split(/,\s/).map(Number);n.x+=a[12],n.y+=a[13]}r=r.parentNode}var s={},d=Jv(t.target),c=Jv(e),l=c.width,u=c.height,p=t.offsetY-(c.top-d.top),f=t.offsetX-(c.left-d.left);return t.changedTouches&&(f=t.changedTouches[0].pageX-c.left,p=t.changedTouches[0].pageY+c.top,Ev&&(f-=n.x,p-=n.y)),s.y=1-Math.max(0,Math.min(1,p/u)),s.x=Math.max(0,Math.min(1,f/l)),s}function Qv(e){return rv(e)&&3===e.nodeType}function ey(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function ty(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((function(e){return"function"==typeof e&&(e=e()),Rv(e)||Qv(e)?e:"string"==typeof e&&/\S/.test(e)?Ph().createTextNode(e):void 0})).filter((function(e){return e}))}function ny(e,t){return ty(t).forEach((function(t){return e.appendChild(t)})),e}function ry(e,t){return ny(ey(e),t)}function iy(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}var oy,ay=Nv("querySelector"),sy=Nv("querySelectorAll"),dy=Object.freeze({__proto__:null,isReal:Dv,isEl:Rv,isInFrame:Mv,createEl:Uv,textContent:Lv,prependTo:jv,hasClass:Bv,addClass:qv,removeClass:Fv,toggleClass:Vv,setAttributes:zv,getAttributes:Wv,getAttribute:Hv,setAttribute:Zv,removeAttribute:$v,blockTextSelection:Gv,unblockTextSelection:Kv,getBoundingClientRect:Xv,findPosition:Jv,getPointerPosition:Yv,isTextNode:Qv,emptyEl:ey,normalizeContent:ty,appendContent:ny,insertContent:ry,isSingleLeftClick:iy,$:ay,$$:sy}),cy=!1,ly=function(){if(!1!==oy.options.autoSetup){var e=Array.prototype.slice.call(Ph().getElementsByTagName("video")),t=Array.prototype.slice.call(Ph().getElementsByTagName("audio")),n=Array.prototype.slice.call(Ph().getElementsByTagName("video-js")),r=e.concat(t,n);if(r&&r.length>0)for(var i=0,o=r.length;i<o;i++){var a=r[i];if(!a||!a.getAttribute){uy(1);break}void 0===a.player&&null!==a.getAttribute("data-setup")&&oy(a)}else cy||uy(1)}};function uy(e,t){Dv()&&(t&&(oy=t),Eh().setTimeout(ly,e))}function py(){cy=!0,Eh().removeEventListener("load",py)}Dv()&&("complete"===Ph().readyState?py():Eh().addEventListener("load",py));var fy,hy=function(e){var t=Ph().createElement("style");return t.className=e,t},gy=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},my=3;function vy(){return my++}Eh().WeakMap||(fy=function(){function e(){this.vdata="vdata"+Math.floor(Eh().performance&&Eh().performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var n=e[this.vdata]||vy();return e[this.vdata]||(e[this.vdata]=n),this.data[n]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];Jm("We have no data for this element",e)},t.has=function(e){return e[this.vdata]in this.data},t.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var yy,by=Eh().WeakMap?new WeakMap:new fy;function _y(e,t){if(by.has(e)){var n=by.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&by.delete(e)}}function wy(e,t,n,r){n.forEach((function(n){e(t,n,r)}))}function Ty(e){if(e.fixed_)return e;function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){var r=e||Eh().event;for(var i in e={},r)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&"path"!==i&&("returnValue"===i&&r.preventDefault||(e[i]=r[i]));if(e.target||(e.target=e.srcElement||Ph()),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,r.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,r.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){var o=Ph().documentElement,a=Ph().body;e.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}var Iy=function(){if("boolean"!=typeof yy){yy=!1;try{var e=Object.defineProperty({},"passive",{get:function(){yy=!0}});Eh().addEventListener("test",null,e),Eh().removeEventListener("test",null,e)}catch(e){}}return yy},Sy=["touchstart","touchmove"];function ky(e,t,n){if(Array.isArray(t))return wy(ky,e,t,n);by.has(e)||by.set(e,{});var r=by.get(e);if(r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),n.guid||(n.guid=vy()),r.handlers[t].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,n){if(!r.disabled){t=Ty(t);var i=r.handlers[t.type];if(i)for(var o=i.slice(0),a=0,s=o.length;a<s&&!t.isImmediatePropagationStopped();a++)try{o[a].call(e,t,n)}catch(e){Jm.error(e)}}}),1===r.handlers[t].length)if(e.addEventListener){var i=!1;Iy()&&Sy.indexOf(t)>-1&&(i={passive:!0}),e.addEventListener(t,r.dispatcher,i)}else e.attachEvent&&e.attachEvent("on"+t,r.dispatcher)}function Cy(e,t,n){if(by.has(e)){var r=by.get(e);if(r.handlers){if(Array.isArray(t))return wy(Cy,e,t,n);var i=function(e,t){r.handlers[t]=[],_y(e,t)};if(void 0!==t){var o=r.handlers[t];if(o)if(n){if(n.guid)for(var a=0;a<o.length;a++)o[a].guid===n.guid&&o.splice(a--,1);_y(e,t)}else i(e,t)}else for(var s in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},s)&&i(e,s)}}}function Ey(e,t,n){var r=by.has(e)?by.get(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=Ty(t),r.dispatcher&&r.dispatcher.call(e,t,n),i&&!t.isPropagationStopped()&&!0===t.bubbles)Ey.call(null,i,t,n);else if(!i&&!t.defaultPrevented&&t.target&&t.target[t.type]){by.has(t.target)||by.set(t.target,{});var o=by.get(t.target);t.target[t.type]&&(o.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),o.disabled=!1)}return!t.defaultPrevented}function Ay(e,t,n){if(Array.isArray(t))return wy(Ay,e,t,n);var r=function r(){Cy(e,t,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||vy(),ky(e,t,r)}function Py(e,t,n){var r=function r(){Cy(e,t,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||vy(),ky(e,t,r)}var xy,Oy=Object.freeze({__proto__:null,fixEvent:Ty,on:ky,off:Cy,trigger:Ey,one:Ay,any:Py}),Dy=30,Ry=function(e,t,n){t.guid||(t.guid=vy());var r=t.bind(e);return r.guid=n?n+"_"+t.guid:t.guid,r},My=function(e,t){var n=Eh().performance.now();return function(){var r=Eh().performance.now();r-n>=t&&(e.apply(void 0,arguments),n=r)}},Ny=function(){};Ny.prototype.allowedEvents_={},Ny.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},ky(this,e,t),this.addEventListener=n},Ny.prototype.addEventListener=Ny.prototype.on,Ny.prototype.off=function(e,t){Cy(this,e,t)},Ny.prototype.removeEventListener=Ny.prototype.off,Ny.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},Ay(this,e,t),this.addEventListener=n},Ny.prototype.any=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},Py(this,e,t),this.addEventListener=n},Ny.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=Ty(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Ey(this,e)},Ny.prototype.dispatchEvent=Ny.prototype.trigger,Ny.prototype.queueTrigger=function(e){var t=this;xy||(xy=new Map);var n=e.type||e,r=xy.get(this);r||(r=new Map,xy.set(this,r));var i=r.get(n);r.delete(n),Eh().clearTimeout(i);var o=Eh().setTimeout((function(){0===r.size&&(r=null,xy.delete(t)),t.trigger(e)}),0);r.set(n,o)};var Uy=function(e){return"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},Ly=function(e){return e instanceof Ny||!!e.eventBusEl_&&["on","one","off","trigger"].every((function(t){return"function"==typeof e[t]}))},jy=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},By=function(e,t,n){if(!e||!e.nodeName&&!Ly(e))throw new Error("Invalid target for "+Uy(t)+"#"+n+"; must be a DOM node or evented object.")},qy=function(e,t,n){if(!jy(e))throw new Error("Invalid event type for "+Uy(t)+"#"+n+"; must be a non-empty string or array.")},Fy=function(e,t,n){if("function"!=typeof e)throw new Error("Invalid listener for "+Uy(t)+"#"+n+"; must be a function.")},Vy=function(e,t,n){var r,i,o,a=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return a?(r=e.eventBusEl_,t.length>=3&&t.shift(),i=t[0],o=t[1]):(r=t[0],i=t[1],o=t[2]),By(r,e,n),qy(i,e,n),Fy(o,e,n),{isTargetingSelf:a,target:r,type:i,listener:o=Ry(e,o)}},zy=function(e,t,n,r){By(e,e,t),e.nodeName?Oy[t](e,n,r):e[t](n,r)},Wy={on:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Vy(this,n,"on"),o=i.isTargetingSelf,a=i.target,s=i.type,d=i.listener;if(zy(a,"on",s,d),!o){var c=function(){return e.off(a,s,d)};c.guid=d.guid;var l=function(){return e.off("dispose",c)};l.guid=d.guid,zy(this,"on","dispose",c),zy(a,"on","dispose",l)}},one:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Vy(this,n,"one"),o=i.isTargetingSelf,a=i.target,s=i.type,d=i.listener;if(o)zy(a,"one",s,d);else{var c=function t(){e.off(a,s,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];d.apply(null,r)};c.guid=d.guid,zy(a,"one",s,c)}},any:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Vy(this,n,"any"),o=i.isTargetingSelf,a=i.target,s=i.type,d=i.listener;if(o)zy(a,"any",s,d);else{var c=function t(){e.off(a,s,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];d.apply(null,r)};c.guid=d.guid,zy(a,"any",s,c)}},off:function(e,t,n){if(!e||jy(e))Cy(this.eventBusEl_,e,t);else{var r=e,i=t;By(r,this,"off"),qy(i,this,"off"),Fy(n,this,"off"),n=Ry(this,n),this.off("dispose",n),r.nodeName?(Cy(r,i,n),Cy(r,"dispose",n)):Ly(r)&&(r.off(i,n),r.off("dispose",n))}},trigger:function(e,t){By(this.eventBusEl_,this,"trigger");var n=e&&"string"!=typeof e?e.type:e;if(!jy(n)){var r="Invalid event type for "+Uy(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!e)throw new Error(r);(this.log||Jm).error(r)}return Ey(this.eventBusEl_,e,t)}};function Hy(e,t){void 0===t&&(t={});var n=t.eventBusKey;if(n){if(!e[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');e.eventBusEl_=e[n]}else e.eventBusEl_=Uv("span",{className:"vjs-event-bus"});return nv(e,Wy),e.eventedCallbacks&&e.eventedCallbacks.forEach((function(e){e()})),e.on("dispose",(function(){e.off(),[e,e.el_,e.eventBusEl_].forEach((function(e){e&&by.has(e)&&by.delete(e)})),Eh().setTimeout((function(){e.eventBusEl_=null}),0)})),e}var Zy={state:{},setState:function(e){var t,n=this;return"function"==typeof e&&(e=e()),tv(e,(function(e,r){n.state[r]!==e&&((t=t||{})[r]={from:n.state[r],to:e}),n.state[r]=e})),t&&Ly(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function $y(e,t){return nv(e,Zy),e.state=nv({},e.state,t),"function"==typeof e.handleStateChanged&&Ly(e)&&e.on("statechanged",e.handleStateChanged),e}var Gy=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toLowerCase()}))},Ky=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))};function Xy(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){t&&tv(t,(function(t,n){iv(t)?(iv(e[n])||(e[n]={}),e[n]=Xy(e[n],t)):e[n]=t}))})),e}var Jy=function(){function e(){this.map_={}}var t=e.prototype;return t.has=function(e){return e in this.map_},t.delete=function(e){var t=this.has(e);return delete this.map_[e],t},t.set=function(e,t){return this.map_[e]=t,this},t.forEach=function(e,t){for(var n in this.map_)e.call(t,this.map_[n],n,this)},e}(),Yy=Eh().Map?Eh().Map:Jy,Qy=function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var n in this.set_)e.call(t,n,n,this)},e}(),eb=Eh().Set?Eh().Set:Qy,tb=function(){function e(e,t,n){var r=this;if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Xy({},this.options_),t=this.options_=Xy(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var i=e&&e.id&&e.id()||"no_player";this.id_=i+"_component_"+vy()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach((function(e){return r.addClass(e)})),!1!==t.evented&&(Hy(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),$y(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new eb,this.setIntervalIds_=new eb,this.rafIds_=new eb,this.namedRafs_=new Yy,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(e){if(void 0===e&&(e={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(e){return e?(this.options_=Xy(this.options_,e),this.options_):this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,n){return Uv(e,t,n)},t.localize=function(e,t,n){void 0===n&&(n=e);var r=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),o=i&&i[r],a=r&&r.split("-")[0],s=i&&i[a],d=n;return o&&o[e]?d=o[e]:s&&s[e]&&(d=s[e]),t&&(d=d.replace(/\{(\d+)\}/g,(function(e,n){var r=t[n-1],i=r;return void 0===r&&(i=e),i}))),d},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return this.childNameIndex_[e]},t.getDescendant=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=t.reduce((function(e,t){return e.concat(t)}),[]);for(var r=this,i=0;i<t.length;i++)if(!(r=r.getChild(t[i]))||!r.getChild)return;return r},t.addChild=function(t,n,r){var i,o;if(void 0===n&&(n={}),void 0===r&&(r=this.children_.length),"string"==typeof t){o=Ky(t);var a=n.componentClass||o;n.name=o;var s=e.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");if("function"!=typeof s)return null;i=new s(this.player_||this,n)}else i=t;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(r,0,i),i.parentComponent_=this,"function"==typeof i.id&&(this.childIndex_[i.id()]=i),(o=o||i.name&&Ky(i.name()))&&(this.childNameIndex_[o]=i,this.childNameIndex_[Gy(o)]=i),"function"==typeof i.el&&i.el()){var d=null;this.children_[r+1]&&(this.children_[r+1].el_?d=this.children_[r+1].el_:Rv(this.children_[r+1])&&(d=this.children_[r+1])),this.contentEl().insertBefore(i.el(),d)}return i},t.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Ky(e.name())]=null,this.childNameIndex_[Gy(e.name())]=null;var r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},t.initChildren=function(){var t=this,n=this.options_.children;if(n){var r,i=this.options_,o=e.getComponent("Tech");(r=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter((function(e){return!r.some((function(t){return"string"==typeof t?e===t:e===t.name}))}))).map((function(e){var r,i;return"string"==typeof e?i=n[r=e]||t.options_[r]||{}:(r=e.name,i=e),{name:r,opts:i}})).filter((function(t){var n=e.getComponent(t.opts.componentClass||Ky(t.name));return n&&!o.isTech(n)})).forEach((function(e){var n=e.name,r=e.opts;if(void 0!==i[n]&&(r=i[n]),!1!==r){!0===r&&(r={}),r.playerOptions=t.options_.playerOptions;var o=t.addChild(n,r);o&&(t[n]=o)}}))}},t.buildCSSClass=function(){return""},t.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)},t.$=function(e,t){return ay(e,t||this.contentEl())},t.$$=function(e,t){return sy(e,t||this.contentEl())},t.hasClass=function(e){return Bv(this.el_,e)},t.addClass=function(e){qv(this.el_,e)},t.removeClass=function(e){Fv(this.el_,e)},t.toggleClass=function(e,t){Vv(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return Hv(this.el_,e)},t.setAttribute=function(e,t){Zv(this.el_,e,t)},t.removeAttribute=function(e){$v(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var r=this.el_.style[e],i=r.indexOf("px");return-1!==i?parseInt(r.slice(0,i),10):parseInt(this.el_["offset"+Ky(e)],10)},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=ov(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var n="offset"+Ky(e);t=this.el_[n]}return t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&(Dh().isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){var e,t=0,n=null;this.on("touchstart",(function(r){1===r.touches.length&&(n={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},t=Eh().performance.now(),e=!0)})),this.on("touchmove",(function(t){if(t.touches.length>1)e=!1;else if(n){var r=t.touches[0].pageX-n.pageX,i=t.touches[0].pageY-n.pageY;Math.sqrt(r*r+i*i)>10&&(e=!1)}}));var r=function(){e=!1};this.on("touchleave",r),this.on("touchcancel",r),this.on("touchend",(function(r){n=null,!0===e&&Eh().performance.now()-t<200&&(r.preventDefault(),this.trigger("tap"))}))},t.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=Ry(this.player(),this.player().reportUserActivity);this.on("touchstart",(function(){t(),this.clearInterval(e),e=this.setInterval(t,250)}));var n=function(n){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",n),this.on("touchcancel",n)}},t.setTimeout=function(e,t){var n,r=this;return e=Ry(this,e),this.clearTimersOnDispose_(),n=Eh().setTimeout((function(){r.setTimeoutIds_.has(n)&&r.setTimeoutIds_.delete(n),e()}),t),this.setTimeoutIds_.add(n),n},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),Eh().clearTimeout(e)),e},t.setInterval=function(e,t){e=Ry(this,e),this.clearTimersOnDispose_();var n=Eh().setInterval(e,t);return this.setIntervalIds_.add(n),n},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),Eh().clearInterval(e)),e},t.requestAnimationFrame=function(e){var t,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=Ry(this,e),t=Eh().requestAnimationFrame((function(){n.rafIds_.has(t)&&n.rafIds_.delete(t),e()})),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},t.requestNamedAnimationFrame=function(e,t){var n=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=Ry(this,t);var r=this.requestAnimationFrame((function(){t(),n.namedRafs_.has(e)&&n.namedRafs_.delete(e)}));return this.namedRafs_.set(e,r),e}},t.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))},t.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),Eh().cancelAnimationFrame(e)),e):this.clearTimeout(e)},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(t){var n=t[0],r=t[1];e[n].forEach((function(t,n){return e[r](n)}))})),e.clearingTimersOnDispose_=!1})))},e.registerComponent=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var r=e.getComponent("Tech"),i=r&&r.isTech(n),o=e===n||e.prototype.isPrototypeOf(n.prototype);if(i||!o)throw new Error('Illegal component, "'+t+'"; '+(i?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");t=Ky(t),e.components_||(e.components_={});var a=e.getComponent("Player");if("Player"===t&&a&&a.players){var s=a.players,d=Object.keys(s);if(s&&d.length>0&&d.map((function(e){return s[e]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=n,e.components_[Gy(t)]=n,n},e.getComponent=function(t){if(t&&e.components_)return e.components_[t]},e}();function nb(e,t,n,r){return function(e,t,n){if("number"!=typeof t||t<0||t>n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}(e,r,n.length-1),n[r][t]}function rb(e){var t;return t=void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:nb.bind(null,"start",0,e),end:nb.bind(null,"end",1,e)},Eh().Symbol&&Eh().Symbol.iterator&&(t[Eh().Symbol.iterator]=function(){return(e||[]).values()}),t}function ib(e,t){return Array.isArray(e)?rb(e):void 0===e||void 0===t?rb():rb([[e,t]])}function ob(e,t){var n,r,i=0;if(!t)return 0;e&&e.length||(e=ib(0,0));for(var o=0;o<e.length;o++)n=e.start(o),(r=e.end(o))>t&&(r=t),i+=r-n;return i/t}function ab(e){if(e instanceof ab)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:rv(e)&&("number"==typeof e.code&&(this.code=e.code),nv(this,e)),this.message||(this.message=ab.defaultMessages[this.code]||"")}tb.prototype.supportsRaf_="function"==typeof Eh().requestAnimationFrame&&"function"==typeof Eh().cancelAnimationFrame,tb.registerComponent("Component",tb),ab.prototype.code=0,ab.prototype.message="",ab.prototype.status=null,ab.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],ab.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var sb=0;sb<ab.errorTypes.length;sb++)ab[ab.errorTypes[sb]]=sb,ab.prototype[ab.errorTypes[sb]]=sb;function db(e){return null!=e&&"function"==typeof e.then}function cb(e){db(e)&&e.then(null,(function(e){}))}var lb=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(t,n,r){return e[n]&&(t[n]=e[n]),t}),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})},ub="vjs-modal-dialog",pb=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleKeyDown_=function(e){return r.handleKeyDown(e)},r.close_=function(e){return r.close(e)},r.opened_=r.hasBeenOpened_=r.hasBeenFilled_=!1,r.closeable(!r.options_.uncloseable),r.content(r.options_.content),r.contentEl_=Uv("div",{className:ub+"-content"},{role:"document"}),r.descEl_=Uv("p",{className:ub+"-description vjs-control-text",id:r.el().getAttribute("aria-describedby")}),Lv(r.descEl_,r.description()),r.el_.appendChild(r.descEl_),r.el_.appendChild(r.contentEl_),r}Nh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return ub+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},n.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},n.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},n.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},n.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var r=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(n,"close",this.close_)}!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,r=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),ry(t,e),this.trigger("modalfill"),r?n.insertBefore(t,r):n.appendChild(t);var i=this.getChild("closeButton");i&&n.appendChild(i.el_)},n.empty=function(){this.trigger("beforemodalempty"),ey(this.contentEl()),this.trigger("modalempty")},n.content=function(e){return void 0!==e&&(this.content_=e),this.content_},n.conditionalFocus_=function(){var e=Ph().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},n.handleKeyDown=function(e){if(e.stopPropagation(),Dh().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(Dh().isEventKey(e,"Tab")){for(var t,n=this.focusableEls_(),r=this.el_.querySelector(":focus"),i=0;i<n.length;i++)if(r===n[i]){t=i;break}Ph().activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}},n.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(function(e){return(e instanceof Eh().HTMLAnchorElement||e instanceof Eh().HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof Eh().HTMLInputElement||e instanceof Eh().HTMLSelectElement||e instanceof Eh().HTMLTextAreaElement||e instanceof Eh().HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof Eh().HTMLIFrameElement||e instanceof Eh().HTMLObjectElement||e instanceof Eh().HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")}))},t}(tb);pb.prototype.options_={pauseOnOpen:!0,temporary:!0},tb.registerComponent("ModalDialog",pb);var fb=function(e){function t(t){var n;void 0===t&&(t=[]),(n=e.call(this)||this).tracks_=[],Object.defineProperty(Rh(n),"length",{get:function(){return this.tracks_.length}});for(var r=0;r<t.length;r++)n.addTrack(t[r]);return n}Nh(t,e);var n=t.prototype;return n.addTrack=function(e){var t=this,n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.tracks_[n]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},Ly(e)&&e.addEventListener("labelchange",e.labelchange_)},n.removeTrack=function(e){for(var t,n=0,r=this.length;n<r;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},n.getTrackById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},t}(Ny);for(var hb in fb.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},fb.prototype.allowedEvents_)fb.prototype["on"+hb]=null;var gb=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)},mb=function(e){function t(t){var n;void 0===t&&(t=[]);for(var r=t.length-1;r>=0;r--)if(t[r].enabled){gb(t,t[r]);break}return(n=e.call(this,t)||this).changing_=!1,n}Nh(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.enabled&&gb(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){n.changing_||(n.changing_=!0,gb(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(fb),vb=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)},yb=function(e){function t(t){var n;void 0===t&&(t=[]);for(var r=t.length-1;r>=0;r--)if(t[r].selected){vb(t,t[r]);break}return(n=e.call(this,t)||this).changing_=!1,Object.defineProperty(Rh(n),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),n}Nh(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.selected&&vb(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){n.changing_||(n.changing_=!0,vb(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(fb),bb=function(e){function t(){return e.apply(this,arguments)||this}Nh(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(fb),_b=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),wb=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,n=0,r=e.length;this.cues_=e,this.length_=e.length;var i=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<r)for(n=t;n<r;n++)i.call(this,n)},t.getCueById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},e}(),Tb={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Ib={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Sb={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},kb={disabled:"disabled",hidden:"hidden",showing:"showing"},Cb=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this)||this;var r={id:t.id||"vjs_track_"+vy(),kind:t.kind||"",language:t.language||""},i=t.label||"",o=function(e){Object.defineProperty(Rh(n),e,{get:function(){return r[e]},set:function(){}})};for(var a in r)o(a);return Object.defineProperty(Rh(n),"label",{get:function(){return i},set:function(e){e!==i&&(i=e,this.trigger("labelchange"))}}),n}return Nh(t,e),t}(Ny),Eb=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=Ph().createElement("a");n.href=e;for(var r={},i=0;i<t.length;i++)r[t[i]]=n[t[i]];return"http:"===r.protocol&&(r.host=r.host.replace(/:80$/,"")),"https:"===r.protocol&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=Eh().location.protocol),r.host||(r.host=Eh().location.host),r},Ab=function(e){if(!e.match(/^https?:\/\//)){var t=Ph().createElement("a");t.href=e,e=t.href}return e},Pb=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},xb=function(e,t){void 0===t&&(t=Eh().location);var n=Eb(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host},Ob=Object.freeze({__proto__:null,parseUrl:Eb,getAbsoluteURL:Ab,getFileExtension:Pb,isCrossOrigin:xb}),Db=function(e,t){var n=new(Eh().WebVTT.Parser)(Eh(),Eh().vttjs,Eh().WebVTT.StringDecoder()),r=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),r.length>0&&(Eh().console&&Eh().console.groupCollapsed&&Eh().console.groupCollapsed("Text Track parsing errors for "+t.src),r.forEach((function(e){return Jm.error(e)})),Eh().console&&Eh().console.groupEnd&&Eh().console.groupEnd()),n.flush()},Rb=function(e,t){var n={uri:e},r=xb(e);r&&(n.cors=r);var i="use-credentials"===t.tech_.crossOrigin();i&&(n.withCredentials=i),Bh()(n,Ry(this,(function(e,n,r){if(e)return Jm.error(e,n);t.loaded_=!0,"function"!=typeof Eh().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],(function(e){if("vttjserror"!==e.type)return Db(r,t);Jm.error("vttjs failed to load, stopping trying to process "+t.src)})):Db(r,t)})))},Mb=function(e){function t(t){var n;if(void 0===t&&(t={}),!t.tech)throw new Error("A tech was not provided.");var r=Xy(t,{kind:Sb[t.kind]||"subtitles",language:t.language||t.srclang||""}),i=kb[r.mode]||"disabled",o=r.default;"metadata"!==r.kind&&"chapters"!==r.kind||(i="hidden"),(n=e.call(this,r)||this).tech_=r.tech,n.cues_=[],n.activeCues_=[],n.preload_=!1!==n.tech_.preloadTextTracks;var a=new wb(n.cues_),s=new wb(n.activeCues_),d=!1;return n.timeupdateHandler=Ry(Rh(n),(function(e){void 0===e&&(e={}),this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,d&&(this.trigger("cuechange"),d=!1),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))})),n.tech_.one("dispose",(function(){n.stopTracking()})),"disabled"!==i&&n.startTracking(),Object.defineProperties(Rh(n),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return i},set:function(e){kb[e]&&i!==e&&(i=e,this.preload_||"disabled"===i||0!==this.cues.length||Rb(this.src,this),this.stopTracking(),"disabled"!==i&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?a:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return s;for(var e=this.tech_.currentTime(),t=[],n=0,r=this.cues.length;n<r;n++){var i=this.cues[n];(i.startTime<=e&&i.endTime>=e||i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e)&&t.push(i)}if(d=!1,t.length!==this.activeCues_.length)d=!0;else for(var o=0;o<t.length;o++)-1===this.activeCues_.indexOf(t[o])&&(d=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set:function(){}}}),r.src?(n.src=r.src,n.preload_||(n.loaded_=!0),(n.preload_||"subtitles"!==r.kind&&"captions"!==r.kind)&&Rb(n.src,Rh(n))):n.loaded_=!0,n}Nh(t,e);var n=t.prototype;return n.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},n.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},n.addCue=function(e){var t=e;if(Eh().vttjs&&!(e instanceof Eh().vttjs.VTTCue)){for(var n in t=new(Eh().vttjs.VTTCue)(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var r=this.tech_.textTracks(),i=0;i<r.length;i++)r[i]!==this&&r[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},n.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(Cb);Mb.prototype.allowedEvents_={cuechange:"cuechange"};var Nb=function(e){function t(t){var n;void 0===t&&(t={});var r=Xy(t,{kind:Ib[t.kind]||""});n=e.call(this,r)||this;var i=!1;return Object.defineProperty(Rh(n),"enabled",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("enabledchange"))}}),r.enabled&&(n.enabled=r.enabled),n.loaded_=!0,n}return Nh(t,e),t}(Cb),Ub=function(e){function t(t){var n;void 0===t&&(t={});var r=Xy(t,{kind:Tb[t.kind]||""});n=e.call(this,r)||this;var i=!1;return Object.defineProperty(Rh(n),"selected",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("selectedchange"))}}),r.selected&&(n.selected=r.selected),n}return Nh(t,e),t}(Cb),Lb=function(e){function t(t){var n,r;void 0===t&&(t={}),n=e.call(this)||this;var i=new Mb(t);return n.kind=i.kind,n.src=i.src,n.srclang=i.language,n.label=i.label,n.default=i.default,Object.defineProperties(Rh(n),{readyState:{get:function(){return r}},track:{get:function(){return i}}}),r=0,i.addEventListener("loadeddata",(function(){r=2,n.trigger({type:"load",target:Rh(n)})})),n}return Nh(t,e),t}(Ny);Lb.prototype.allowedEvents_={load:"load"},Lb.NONE=0,Lb.LOADING=1,Lb.LOADED=2,Lb.ERROR=3;var jb={audio:{ListClass:mb,TrackClass:Nb,capitalName:"Audio"},video:{ListClass:yb,TrackClass:Ub,capitalName:"Video"},text:{ListClass:bb,TrackClass:Mb,capitalName:"Text"}};Object.keys(jb).forEach((function(e){jb[e].getterName=e+"Tracks",jb[e].privateName=e+"Tracks_"}));var Bb={remoteText:{ListClass:bb,TrackClass:Mb,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:_b,TrackClass:Lb,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},qb=xh({},jb,Bb);Bb.names=Object.keys(Bb),jb.names=Object.keys(jb),qb.names=[].concat(Bb.names).concat(jb.names);var Fb=function(e){function t(t,n){var r;return void 0===t&&(t={}),void 0===n&&(n=function(){}),t.reportTouchActivity=!1,(r=e.call(this,null,t,n)||this).onDurationChange_=function(e){return r.onDurationChange(e)},r.trackProgress_=function(e){return r.trackProgress(e)},r.trackCurrentTime_=function(e){return r.trackCurrentTime(e)},r.stopTrackingCurrentTime_=function(e){return r.stopTrackingCurrentTime(e)},r.disposeSourceHandler_=function(e){return r.disposeSourceHandler(e)},r.queuedHanders_=new Set,r.hasStarted_=!1,r.on("playing",(function(){this.hasStarted_=!0})),r.on("loadstart",(function(){this.hasStarted_=!1})),qb.names.forEach((function(e){var n=qb[e];t&&t[n.getterName]&&(r[n.privateName]=t[n.getterName])})),r.featuresProgressEvents||r.manualProgressOn(),r.featuresTimeupdateEvents||r.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(e){!1===t["native"+e+"Tracks"]&&(r["featuresNative"+e+"Tracks"]=!1)})),!1===t.nativeCaptions||!1===t.nativeTextTracks?r.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(r.featuresNativeTextTracks=!0),r.featuresNativeTextTracks||r.emulateTextTracks(),r.preloadTextTracks=!1!==t.preloadTextTracks,r.autoRemoteTextTracks_=new qb.text.ListClass,r.initTrackListeners(),t.nativeControlsForTouch||r.emitTapEvents(),r.constructor&&(r.name_=r.constructor.name||"Unknown Tech"),r}Nh(t,e);var n=t.prototype;return n.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",(function(){return t.setTimeout((function(){return t.triggerSourceset(e)}),1)})),this.trigger({src:e,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},n.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Ry(this,(function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)},n.onDurationChange=function(e){this.duration_=this.duration()},n.buffered=function(){return ib(0,0)},n.bufferedPercent=function(){return ob(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks(jb.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},n.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach((function(e){for(var n=t[e+"Tracks"]()||[],r=n.length;r--;){var i=n[r];"text"===e&&t.removeRemoteTextTrack(i),n.removeTrack(i)}}))},n.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},n.reset=function(){},n.crossOrigin=function(){},n.setCrossOrigin=function(){},n.error=function(e){return void 0!==e&&(this.error_=new ab(e),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?ib(0,0):ib()},n.play=function(){},n.setScrubbing=function(){},n.scrubbing=function(){},n.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var e=this;jb.names.forEach((function(t){var n=jb[t],r=function(){e.trigger(t+"trackchange")},i=e[n.getterName]();i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),e.on("dispose",(function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r)}))}))},n.addWebVttScript_=function(){var e=this;if(!Eh().WebVTT)if(Ph().body.contains(this.el())){if(!this.options_["vtt.js"]&&iv(Fh())&&Object.keys(Fh()).length>0)return void this.trigger("vttjsloaded");var t=Ph().createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",(function(){t.onload=null,t.onerror=null})),Eh().WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},n.emulateTextTracks=function(){var e=this,t=this.textTracks(),n=this.remoteTextTracks(),r=function(e){return t.addTrack(e.track)},i=function(e){return t.removeTrack(e.track)};n.on("addtrack",r),n.on("removetrack",i),this.addWebVttScript_();var o=function(){return e.trigger("texttrackchange")},a=function(){o();for(var e=0;e<t.length;e++){var n=t[e];n.removeEventListener("cuechange",o),"showing"===n.mode&&n.addEventListener("cuechange",o)}};a(),t.addEventListener("change",a),t.addEventListener("addtrack",a),t.addEventListener("removetrack",a),this.on("dispose",(function(){n.off("addtrack",r),n.off("removetrack",i),t.removeEventListener("change",a),t.removeEventListener("addtrack",a),t.removeEventListener("removetrack",a);for(var e=0;e<t.length;e++)t[e].removeEventListener("cuechange",o)}))},n.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,r,i){void 0===i&&(i={});var o=e.textTracks();i.kind=t,n&&(i.label=n),r&&(i.language=r),i.tech=e;var a=new qb.text.TrackClass(i);return o.addTrack(a),a}(this,e,t,n)},n.createRemoteTextTrack=function(e){var t=Xy(e,{tech:this});return new Bb.remoteTextEl.TrackClass(t)},n.addRemoteTextTrack=function(e,t){var n=this;void 0===e&&(e={});var r=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(Jm.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),!0!==t&&this.ready((function(){return n.autoRemoteTextTracks_.addTrack(r.track)})),r},n.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},n.getVideoPlaybackQuality=function(){return{}},n.requestPictureInPicture=function(){var e=this.options_.Promise||Eh().Promise;if(e)return e.reject()},n.disablePictureInPicture=function(){return!0},n.setDisablePictureInPicture=function(){},n.requestVideoFrameCallback=function(e){var t=this,n=vy();return!this.isReady_||this.paused()?(this.queuedHanders_.add(n),this.one("playing",(function(){t.queuedHanders_.has(n)&&(t.queuedHanders_.delete(n),e())}))):this.requestNamedAnimationFrame(n,e),n},n.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(){},n.overrideNativeVideoTracks=function(){},n.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,n){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Ky(e),t.techs_[e]=n,t.techs_[Gy(e)]=n,"Tech"!==e&&t.defaultTechOrder_.push(e),n},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=Ky(e),Eh()&&Eh().videojs&&Eh().videojs[e]?(Jm.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),Eh().videojs[e]):void 0)},t}(tb);qb.names.forEach((function(e){var t=qb[e];Fb.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),Fb.prototype.featuresVolumeControl=!0,Fb.prototype.featuresMuteControl=!0,Fb.prototype.featuresFullscreenResize=!1,Fb.prototype.featuresPlaybackRate=!1,Fb.prototype.featuresProgressEvents=!1,Fb.prototype.featuresSourceset=!1,Fb.prototype.featuresTimeupdateEvents=!1,Fb.prototype.featuresNativeTextTracks=!1,Fb.prototype.featuresVideoFrameCallback=!1,Fb.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var r=e.sourceHandlers;r||(r=e.sourceHandlers=[]),void 0===n&&(n=r.length),r.splice(n,0,t)},e.canPlayType=function(t){for(var n,r=e.sourceHandlers||[],i=0;i<r.length;i++)if(n=r[i].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,n){for(var r=e.sourceHandlers||[],i=0;i<r.length;i++)if(r[i].canHandleSource(t,n))return r[i];return null},e.canPlaySource=function(t,n){var r=e.selectSourceHandler(t,n);return r?r.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach((function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:Jm.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},tb.registerComponent("Tech",Fb),Fb.registerTech("Tech",Fb),Fb.defaultTechOrder_=[];var Vb={},zb={},Wb={};function Hb(e,t,n){e.setTimeout((function(){return Jb(t,Vb[t.type],n,e)}),1)}function Zb(e,t,n,r){void 0===r&&(r=null);var i="call"+Ky(n),o=e.reduce(Xb(i),r),a=o===Wb,s=a?null:t[n](o);return function(e,t,n,r){for(var i=e.length-1;i>=0;i--){var o=e[i];o[t]&&o[t](r,n)}}(e,n,s,a),s}var $b={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Gb={setCurrentTime:1,setMuted:1,setVolume:1},Kb={play:1,pause:1};function Xb(e){return function(t,n){return t===Wb?Wb:n[e]?n[e](t):t}}function Jb(e,t,n,r,i,o){void 0===e&&(e={}),void 0===t&&(t=[]),void 0===i&&(i=[]),void 0===o&&(o=!1);var a=t,s=a[0],d=a.slice(1);if("string"==typeof s)Jb(e,Vb[s],n,r,i,o);else if(s){var c=function(e,t){var n=zb[e.id()],r=null;if(null==n)return r=t(e),zb[e.id()]=[[t,r]],r;for(var i=0;i<n.length;i++){var o=n[i],a=o[0],s=o[1];a===t&&(r=s)}return null===r&&(r=t(e),n.push([t,r])),r}(r,s);if(!c.setSource)return i.push(c),Jb(e,d,n,r,i,o);c.setSource(nv({},e),(function(t,a){if(t)return Jb(e,d,n,r,i,o);i.push(c),Jb(a,e.type===a.type?d:Vb[a.type],n,r,i,o)}))}else d.length?Jb(e,d,n,r,i,o):o?n(e,i):Jb(e,Vb["*"],n,r,i,!0)}var Yb={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Qb=function(e){void 0===e&&(e="");var t=Pb(e);return Yb[t.toLowerCase()]||""},e_=function e(t){if(Array.isArray(t)){var n=[];t.forEach((function(t){t=e(t),Array.isArray(t)?n=n.concat(t):rv(t)&&n.push(t)})),t=n}else t="string"==typeof t&&t.trim()?[t_({src:t})]:rv(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[t_(t)]:[];return t};function t_(e){if(!e.type){var t=Qb(e.src);t&&(e.type=t)}return e}var n_=function(e){function t(t,n,r){var i,o=Xy({createEl:!1},n);if(i=e.call(this,t,o,r)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)t.src(n.playerOptions.sources);else for(var a=0,s=n.playerOptions.techOrder;a<s.length;a++){var d=Ky(s[a]),c=Fb.getTech(d);if(d||(c=tb.getComponent(d)),c&&c.isSupported()){t.loadTech_(d);break}}return i}return Nh(t,e),t}(tb);tb.registerComponent("MediaLoader",n_);var r_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).options_.controlText&&r.controlText(r.options_.controlText),r.handleMouseOver_=function(e){return r.handleMouseOver(e)},r.handleMouseOut_=function(e){return r.handleMouseOut(e)},r.handleClick_=function(e){return r.handleClick(e)},r.handleKeyDown_=function(e){return r.handleKeyDown(e)},r.emitTapEvents(),r.enable(),r}Nh(t,e);var n=t.prototype;return n.createEl=function(e,t,n){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={}),t=nv({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&Jm.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),n=nv({role:"button"},n),this.tabIndex_=t.tabIndex;var r=Uv(e,t,n);return r.appendChild(Uv("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r},n.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},n.createControlTextEl=function(e){return this.controlTextEl_=Uv("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},n.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,Lv(this.controlTextEl_,n),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",n)},n.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},n.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},n.handleLanguagechange=function(){this.controlText(this.controlText_)},n.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},n.handleKeyDown=function(t){Dh().isEventKey(t,"Space")||Dh().isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(tb);tb.registerComponent("ClickableComponent",r_);var i_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update(),r.update_=function(e){return r.update(e)},t.on("posterchange",r.update_),r}Nh(t,e);var n=t.prototype;return n.dispose=function(){this.player().off("posterchange",this.update_),e.prototype.dispose.call(this)},n.createEl=function(){return Uv("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},n.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},n.handleClick=function(e){if(this.player_.controls()){var t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(wv||yv)&&t||this.player_.tech(!0).focus(),this.player_.paused()?cb(this.player_.play()):this.player_.pause()}},t}(r_);tb.registerComponent("PosterImage",i_);var o_="#222",a_={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function s_(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function d_(e,t,n){try{e.style[t]=n}catch(e){return}}var c_=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var o=function(e){return i.updateDisplay(e)};return t.on("loadstart",(function(e){return i.toggleDisplay(e)})),t.on("texttrackchange",o),t.on("loadedmetadata",(function(e){return i.preselectTrack(e)})),t.ready(Ry(Rh(i),(function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",o),t.on("playerresize",o),Eh().addEventListener("orientationchange",o),t.on("dispose",(function(){return Eh().removeEventListener("orientationchange",o)}));for(var e=this.options_.playerOptions.tracks||[],n=0;n<e.length;n++)this.player_.addRemoteTextTrack(e[n],!0);this.preselectTrack()}}))),i}Nh(t,e);var n=t.prototype;return n.preselectTrack=function(){for(var e,t,n,r={captions:1,subtitles:1},i=this.player_.textTracks(),o=this.player_.cache_.selectedLanguage,a=0;a<i.length;a++){var s=i[a];o&&o.enabled&&o.language&&o.language===s.language&&s.kind in r?s.kind===o.kind?n=s:n||(n=s):o&&!o.enabled?(n=null,e=null,t=null):s.default&&("descriptions"!==s.kind||e?s.kind in r&&!t&&(t=s):e=s)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"==typeof Eh().WebVTT&&Eh().WebVTT.processCues(Eh(),[],this.el_)},n.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],r=0;r<e.length;++r){var i=e[r];"showing"===i.mode&&n.push(i)}this.updateForTrack(n)}else{for(var o=null,a=null,s=e.length;s--;){var d=e[s];"showing"===d.mode&&("descriptions"===d.kind?o=d:a=d)}a?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(a)):o&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(o))}},n.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),n=e.activeCues,r=n.length;r--;){var i=n[r];if(i){var o=i.displayState;if(t.color&&(o.firstChild.style.color=t.color),t.textOpacity&&d_(o.firstChild,"color",s_(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(o.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&d_(o.firstChild,"backgroundColor",s_(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?d_(o,"backgroundColor",s_(t.windowColor,t.windowOpacity)):o.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?o.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+o_:"raised"===t.edgeStyle?o.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+o_:"depressed"===t.edgeStyle?o.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+o_:"uniform"===t.edgeStyle&&(o.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+o_)),t.fontPercent&&1!==t.fontPercent){var a=Eh().parseFloat(o.style.fontSize);o.style.fontSize=a*t.fontPercent+"px",o.style.height="auto",o.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=a_[t.fontFamily])}}},n.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof Eh().WebVTT&&!e.every((function(e){return!e.activeCues}))){for(var t=[],n=0;n<e.length;++n)for(var r=e[n],i=0;i<r.activeCues.length;++i)t.push(r.activeCues[i]);Eh().WebVTT.processCues(Eh(),t,this.el_);for(var o=0;o<e.length;++o){for(var a=e[o],s=0;s<a.activeCues.length;++s){var d=a.activeCues[s].displayState;qv(d,"vjs-text-track-cue"),qv(d,"vjs-text-track-cue-"+(a.language?a.language:o)),a.language&&Zv(d,"lang",a.language)}this.player_.textTrackSettings&&this.updateDisplayState(a)}}},t}(tb);tb.registerComponent("TextTrackDisplay",c_);var l_=function(e){function t(){return e.apply(this,arguments)||this}return Nh(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),n=this.localize(t?"Audio Player":"Video Player"),r=Uv("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),i=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(r),i},t}(tb);tb.registerComponent("LoadingSpinner",l_);var u_=function(e){function t(){return e.apply(this,arguments)||this}Nh(t,e);var n=t.prototype;return n.createEl=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});var r=Uv("button",t=nv({className:this.buildCSSClass()},t),n=nv({type:"button"},n));return r.appendChild(Uv("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r},n.addChild=function(e,t){void 0===t&&(t={});var n=this.constructor.name;return Jm.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),tb.prototype.addChild.call(this,e,t)},n.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(t){Dh().isEventKey(t,"Space")||Dh().isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(r_);tb.registerComponent("Button",u_);var p_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).mouseused_=!1,r.on("mousedown",(function(e){return r.handleMouseDown(e)})),r}Nh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return cb(t),void(!this.player_.tech(!0)||(wv||yv)&&n||this.player_.tech(!0).focus())}var r=this.player_.getChild("controlBar"),i=r&&r.getChild("playToggle");if(i){var o=function(){return i.focus()};db(t)?t.then(o,(function(){})):this.setTimeout(o,1)}else this.player_.tech(!0).focus()},n.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},n.handleMouseDown=function(e){this.mouseused_=!0},t}(u_);p_.prototype.controlText_="Play Video",tb.registerComponent("BigPlayButton",p_);var f_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).controlText(n&&n.controlText||r.localize("Close")),r}Nh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},n.handleKeyDown=function(t){Dh().isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(u_);tb.registerComponent("CloseButton",f_);var h_=function(e){function t(t,n){var r;return void 0===n&&(n={}),r=e.call(this,t,n)||this,n.replay=void 0===n.replay||n.replay,r.on(t,"play",(function(e){return r.handlePlay(e)})),r.on(t,"pause",(function(e){return r.handlePause(e)})),n.replay&&r.on(t,"ended",(function(e){return r.handleEnded(e)})),r}Nh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.player_.paused()?cb(this.player_.play()):this.player_.pause()},n.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},n.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(e){var t=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(function(e){return t.handleSeeked(e)}))},t}(u_);h_.prototype.controlText_="Play",tb.registerComponent("PlayToggle",h_);var g_=function(e,t){e=e<0?0:e;var n=Math.floor(e%60),r=Math.floor(e/60%60),i=Math.floor(e/3600),o=Math.floor(t/60%60),a=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(i=r=n="-"),(i=i>0||a>0?i+":":"")+(r=((i||o>=10)&&r<10?"0"+r:r)+":")+(n<10?"0"+n:n)},m_=g_;function v_(e,t){return void 0===t&&(t=e),m_(e,t)}var y_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,["timeupdate","ended"],(function(e){return r.updateContent(e)})),r.updateTextNode_(),r}Nh(t,e);var n=t.prototype;return n.createEl=function(){var t=this.buildCSSClass(),n=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control"}),r=Uv("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+""},{role:"presentation"});return n.appendChild(r),this.contentEl_=Uv("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),n.appendChild(this.contentEl_),n},n.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},n.updateTextNode_=function(e){var t=this;void 0===e&&(e=0),e=v_(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(function(){if(t.contentEl_){var e=t.textNode_;e&&t.contentEl_.firstChild!==e&&(e=null,Jm.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),t.textNode_=Ph().createTextNode(t.formattedTime_),t.textNode_&&(e?t.contentEl_.replaceChild(t.textNode_,e):t.contentEl_.appendChild(t.textNode_))}})))},n.updateContent=function(e){},t}(tb);y_.prototype.labelText_="Time",y_.prototype.controlText_="Time",tb.registerComponent("TimeDisplay",y_);var b_=function(e){function t(){return e.apply(this,arguments)||this}Nh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(e){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},t}(y_);b_.prototype.labelText_="Current Time",b_.prototype.controlText_="Current Time",tb.registerComponent("CurrentTimeDisplay",b_);var __=function(e){function t(t,n){var r,i=function(e){return r.updateContent(e)};return(r=e.call(this,t,n)||this).on(t,"durationchange",i),r.on(t,"loadstart",i),r.on(t,"loadedmetadata",i),r}Nh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},t}(y_);__.prototype.labelText_="Duration",__.prototype.controlText_="Duration",tb.registerComponent("DurationDisplay",__);var w_=function(e){function t(){return e.apply(this,arguments)||this}return Nh(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=e.prototype.createEl.call(this,"div"),r=e.prototype.createEl.call(this,"span",{textContent:"/"});return n.appendChild(r),t.appendChild(n),t},t}(tb);tb.registerComponent("TimeDivider",w_);var T_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,"durationchange",(function(e){return r.updateContent(e)})),r}Nh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.createEl=function(){var t=e.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&t.insertBefore(Uv("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},n.updateContent=function(e){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},t}(y_);T_.prototype.labelText_="Remaining Time",T_.prototype.controlText_="Remaining Time",tb.registerComponent("RemainingTimeDisplay",T_);var I_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).updateShowing(),r.on(r.player(),"durationchange",(function(e){return r.updateShowing(e)})),r}Nh(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Uv("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Uv("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+""})),this.contentEl_.appendChild(Ph().createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t},n.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},n.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(tb);tb.registerComponent("LiveDisplay",I_);var S_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).updateLiveEdgeStatus(),r.player_.liveTracker&&(r.updateLiveEdgeStatusHandler_=function(e){return r.updateLiveEdgeStatus(e)},r.on(r.player_.liveTracker,"liveedgechange",r.updateLiveEdgeStatusHandler_)),r}Nh(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=Uv("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},n.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,e.prototype.dispose.call(this)},t}(u_);S_.prototype.controlText_="Seek to live, currently playing live",tb.registerComponent("SeekToLive",S_);var k_=function(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))},C_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleMouseDown_=function(e){return r.handleMouseDown(e)},r.handleMouseUp_=function(e){return r.handleMouseUp(e)},r.handleKeyDown_=function(e){return r.handleKeyDown(e)},r.handleClick_=function(e){return r.handleClick(e)},r.handleMouseMove_=function(e){return r.handleMouseMove(e)},r.update_=function(e){return r.update(e)},r.bar=r.getChild(r.options_.barName),r.vertical(!!r.options_.vertical),r.enable(),r}Nh(t,e);var n=t.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(t,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),n.className=n.className+" vjs-slider",n=nv({tabIndex:0},n),r=nv({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),e.prototype.createEl.call(this,t,n,r)},n.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||bv||e.preventDefault(),Gv(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)},n.handleMouseMove=function(e){},n.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;Kv(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},n.update=function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",(function(){var n=e.vertical()?"height":"width";e.bar.el().style[n]=(100*t).toFixed(2)+"%"}))),t}},n.getProgress=function(){return Number(k_(this.getPercent(),0,1).toFixed(4))},n.calculateDistance=function(e){var t=Yv(this.el_,e);return this.vertical()?t.y:t.x},n.handleKeyDown=function(t){Dh().isEventKey(t,"Left")||Dh().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):Dh().isEventKey(t,"Right")||Dh().isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){e.stopPropagation(),e.preventDefault()},n.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(tb);tb.registerComponent("Slider",C_);var E_=function(e,t){return k_(e/t*100,0,100).toFixed(2)+"%"},A_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).partEls_=[],r.on(t,"progress",(function(e){return r.update(e)})),r}Nh(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),n=Uv("span",{className:"vjs-control-text"}),r=Uv("span",{textContent:this.localize("Loaded")}),i=Ph().createTextNode(": ");return this.percentageEl_=Uv("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(n),n.appendChild(r),n.appendChild(i),n.appendChild(this.percentageEl_),t},n.dispose=function(){this.partEls_=null,this.percentageEl_=null,e.prototype.dispose.call(this)},n.update=function(e){var t=this;this.requestNamedAnimationFrame("LoadProgressBar#update",(function(){var e=t.player_.liveTracker,n=t.player_.buffered(),r=e&&e.isLive()?e.seekableEnd():t.player_.duration(),i=t.player_.bufferedEnd(),o=t.partEls_,a=E_(i,r);t.percent_!==a&&(t.el_.style.width=a,Lv(t.percentageEl_,a),t.percent_=a);for(var s=0;s<n.length;s++){var d=n.start(s),c=n.end(s),l=o[s];l||(l=t.el_.appendChild(Uv()),o[s]=l),l.dataset.start===d&&l.dataset.end===c||(l.dataset.start=d,l.dataset.end=c,l.style.left=E_(d,i),l.style.width=E_(c-d,i))}for(var u=o.length;u>n.length;u--)t.el_.removeChild(o[u-1]);o.length=n.length}))},t}(tb);tb.registerComponent("LoadProgressBar",A_);var P_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=My(Ry(Rh(r),r.update),Dy),r}Nh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n){var r=Jv(this.el_),i=Xv(this.player_.el()),o=e.width*t;if(i&&r){var a=e.left-i.left+o,s=e.width-o+(i.right-e.right),d=r.width/2;a<d?d+=d-a:s<d&&(d=s),d<0?d=0:d>r.width&&(d=r.width),d=Math.round(d),this.el_.style.right="-"+d+"px",this.write(n)}},n.write=function(e){Lv(this.el_,e)},n.updateTime=function(e,t,n,r){var i=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",(function(){var o,a=i.player_.duration();if(i.player_.liveTracker&&i.player_.liveTracker.isLive()){var s=i.player_.liveTracker.liveWindow(),d=s-t*s;o=(d<1?"":"-")+v_(d,s)}else o=v_(n,a);i.update(e,t,o),r&&r()}))},t}(tb);tb.registerComponent("TimeTooltip",P_);var x_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=My(Ry(Rh(r),r.update),Dy),r}Nh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(e,t){var n=this.getChild("timeTooltip");if(n){var r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,r)}},t}(tb);x_.prototype.options_={children:[]},Ev||hv||x_.prototype.options_.children.push("timeTooltip"),tb.registerComponent("PlayProgressBar",x_);var O_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=My(Ry(Rh(r),r.update),Dy),r}Nh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t){var n=this,r=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,r,(function(){n.el_.style.left=e.width*t+"px"}))},t}(tb);O_.prototype.options_={children:["timeTooltip"]},tb.registerComponent("MouseTimeDisplay",O_);var D_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).setEventHandlers_(),r}Nh(t,e);var n=t.prototype;return n.setEventHandlers_=function(){var e=this;this.update_=Ry(this,this.update),this.update=My(this.update_,Dy),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(t){return e.enableInterval_(t)},this.disableIntervalHandler_=function(t){return e.disableInterval_(t)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ph()&&"visibilityState"in Ph()&&this.on(Ph(),"visibilitychange",this.toggleVisibility_)},n.toggleVisibility_=function(e){"hidden"===Ph().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},n.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Dy))},n.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update=function(t){var n=this;if("hidden"!==Ph().visibilityState){var r=e.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",(function(){var e=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),t=n.player_.liveTracker,i=n.player_.duration();t&&t.isLive()&&(i=n.player_.liveTracker.liveCurrentTime()),n.percent_!==r&&(n.el_.setAttribute("aria-valuenow",(100*r).toFixed(2)),n.percent_=r),n.currentTime_===e&&n.duration_===i||(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[v_(e,i),v_(i,i)],"{1} of {2}")),n.currentTime_=e,n.duration_=i),n.bar&&n.bar.update(Xv(n.el()),n.getProgress())})),r}},n.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.getPercent=function(){var e,t=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(e=(t-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},n.handleMouseDown=function(t){iy(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},n.handleMouseMove=function(e,t){if(void 0===t&&(t=!1),iy(e)){var n;t||this.player_.scrubbing()||this.player_.scrubbing(!0);var r=this.calculateDistance(e),i=this.player_.liveTracker;if(i&&i.isLive()){if(r>=.99)return void i.seekToLiveEdge();var o=i.seekableStart(),a=i.liveCurrentTime();if((n=o+r*i.liveWindow())>=a&&(n=a),n<=o&&(n=o+.1),n===1/0)return}else(n=r*this.player_.duration())===this.player_.duration()&&(n-=.1);this.userSeek_(n)}},n.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},n.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},n.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?cb(this.player_.play()):this.update_()},n.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},n.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},n.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyDown=function(t){var n=this.player_.liveTracker;if(Dh().isEventKey(t,"Space")||Dh().isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(Dh().isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(Dh().isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Dh()(t))){t.preventDefault(),t.stopPropagation();var r=10*(Dh().codes[Dh()(t)]-Dh().codes[0])/100;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*r):this.userSeek_(this.player_.duration()*r)}else Dh().isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):Dh().isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,t)},n.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ph()&&"visibilityState"in Ph()&&this.off(Ph(),"visibilitychange",this.toggleVisibility_),e.prototype.dispose.call(this)},t}(C_);D_.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Ev||hv||D_.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),tb.registerComponent("SeekBar",D_);var R_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleMouseMove=My(Ry(Rh(r),r.handleMouseMove),Dy),r.throttledHandleMouseSeek=My(Ry(Rh(r),r.handleMouseSeek),Dy),r.handleMouseUpHandler_=function(e){return r.handleMouseUp(e)},r.handleMouseDownHandler_=function(e){return r.handleMouseDown(e)},r.enable(),r}Nh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var n=t.getChild("playProgressBar"),r=t.getChild("mouseTimeDisplay");if(n||r){var i=t.el(),o=Jv(i),a=Yv(i,e).x;a=k_(a,0,1),r&&r.update(o,a),n&&n.update(o,t.getProgress())}}},n.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},n.enabled=function(){return this.enabled_},n.disable=function(){if(this.children().forEach((function(e){return e.disable&&e.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&cb(this.player_.play())}},n.enable=function(){this.children().forEach((function(e){return e.enable&&e.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},n.handleMouseDown=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},t}(tb);R_.prototype.options_={children:["seekBar"]},tb.registerComponent("ProgressControl",R_);var M_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,["enterpictureinpicture","leavepictureinpicture"],(function(e){return r.handlePictureInPictureChange(e)})),r.on(t,["disablepictureinpicturechanged","loadedmetadata"],(function(e){return r.handlePictureInPictureEnabledChange(e)})),r.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(function(){"audio"===t.currentType().substring(0,5)||t.audioPosterMode()||t.audioOnlyMode()?(t.isInPictureInPicture()&&t.exitPictureInPicture(),r.hide()):r.show()})),r.disable(),r}Nh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},n.handlePictureInPictureEnabledChange=function(){Ph().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},n.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},n.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(u_);M_.prototype.controlText_="Picture-in-Picture",tb.registerComponent("PictureInPictureToggle",M_);var N_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,"fullscreenchange",(function(e){return r.handleFullscreenChange(e)})),!1===Ph()[t.fsApi_.fullscreenEnabled]&&r.disable(),r}Nh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(u_);N_.prototype.controlText_="Fullscreen",tb.registerComponent("FullscreenToggle",N_);var U_=function(e){function t(){return e.apply(this,arguments)||this}return Nh(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return t.appendChild(e.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),t},t}(tb);tb.registerComponent("VolumeLevel",U_);var L_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=My(Ry(Rh(r),r.update),Dy),r}Nh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n,r){if(!n){var i=Xv(this.el_),o=Xv(this.player_.el()),a=e.width*t;if(!o||!i)return;var s=e.left-o.left+a,d=e.width-a+(o.right-e.right),c=i.width/2;s<c?c+=c-s:d<c&&(c=d),c<0?c=0:c>i.width&&(c=i.width),this.el_.style.right="-"+c+"px"}this.write(r+"%")},n.write=function(e){Lv(this.el_,e)},n.updateVolume=function(e,t,n,r,i){var o=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(function(){o.update(e,t,n,r.toFixed(0)),i&&i()}))},t}(tb);tb.registerComponent("VolumeLevelTooltip",L_);var j_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=My(Ry(Rh(r),r.update),Dy),r}Nh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t,n){var r=this,i=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,i,(function(){n?r.el_.style.bottom=e.height*t+"px":r.el_.style.left=e.width*t+"px"}))},t}(tb);j_.prototype.options_={children:["volumeLevelTooltip"]},tb.registerComponent("MouseVolumeLevelDisplay",j_);var B_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on("slideractive",(function(e){return r.updateLastVolume_(e)})),r.on(t,"volumechange",(function(e){return r.updateARIAAttributes(e)})),t.ready((function(){return r.updateARIAAttributes()})),r}Nh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(t){iy(t)&&e.prototype.handleMouseDown.call(this,t)},n.handleMouseMove=function(e){var t=this.getChild("mouseVolumeLevelDisplay");if(t){var n=this.el(),r=Xv(n),i=this.vertical(),o=Yv(n,e);o=i?o.y:o.x,o=k_(o,0,1),t.update(r,o,i)}iy(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",(function(){0===e.player_.volume()&&e.player_.lastVolume_(t)}))},t}(C_);B_.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Ev||hv||B_.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),B_.prototype.playerEvent="volumechange",tb.registerComponent("VolumeBar",B_);var q_=function(e){function t(t,n){var r;return void 0===n&&(n={}),n.vertical=n.vertical||!1,(void 0===n.volumeBar||iv(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(Rh(r=e.call(this,t,n)||this),t),r.throttledHandleMouseMove=My(Ry(Rh(r),r.handleMouseMove),Dy),r.handleMouseUpHandler_=function(e){return r.handleMouseUp(e)},r.on("mousedown",(function(e){return r.handleMouseDown(e)})),r.on("touchstart",(function(e){return r.handleMouseDown(e)})),r.on("mousemove",(function(e){return r.handleMouseMove(e)})),r.on(r.volumeBar,["focus","slideractive"],(function(){r.volumeBar.addClass("vjs-slider-active"),r.addClass("vjs-slider-active"),r.trigger("slideractive")})),r.on(r.volumeBar,["blur","sliderinactive"],(function(){r.volumeBar.removeClass("vjs-slider-active"),r.removeClass("vjs-slider-active"),r.trigger("sliderinactive")})),r}Nh(t,e);var n=t.prototype;return n.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},n.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(tb);q_.prototype.options_={children:["volumeBar"]},tb.registerComponent("VolumeControl",q_);var F_=function(e){function t(t,n){var r;return function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(Rh(r=e.call(this,t,n)||this),t),r.on(t,["loadstart","volumechange"],(function(e){return r.update(e)})),r}Nh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){var r=n<.1?.1:n;this.player_.volume(r),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},n.update=function(e){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var e=this.player_.volume(),t=3;Ev&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)Fv(this.el_,"vjs-vol-"+n);qv(this.el_,"vjs-vol-"+t)},n.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(u_);F_.prototype.controlText_="Mute",tb.registerComponent("MuteToggle",F_);var V_=function(e){function t(t,n){var r;return void 0===n&&(n={}),void 0!==n.inline?n.inline=n.inline:n.inline=!0,(void 0===n.volumeControl||iv(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),(r=e.call(this,t,n)||this).handleKeyPressHandler_=function(e){return r.handleKeyPress(e)},r.on(t,["loadstart"],(function(e){return r.volumePanelState_(e)})),r.on(r.muteToggle,"keyup",(function(e){return r.handleKeyPress(e)})),r.on(r.volumeControl,"keyup",(function(e){return r.handleVolumeControlKeyUp(e)})),r.on("keydown",(function(e){return r.handleKeyPress(e)})),r.on("mouseover",(function(e){return r.handleMouseOver(e)})),r.on("mouseout",(function(e){return r.handleMouseOut(e)})),r.on(r.volumeControl,["slideractive"],r.sliderActive_),r.on(r.volumeControl,["sliderinactive"],r.sliderInactive_),r}Nh(t,e);var n=t.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},n.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},n.handleVolumeControlKeyUp=function(e){Dh().isEventKey(e,"Esc")&&this.muteToggle.focus()},n.handleMouseOver=function(e){this.addClass("vjs-hover"),ky(Ph(),"keyup",this.handleKeyPressHandler_)},n.handleMouseOut=function(e){this.removeClass("vjs-hover"),Cy(Ph(),"keyup",this.handleKeyPressHandler_)},n.handleKeyPress=function(e){Dh().isEventKey(e,"Esc")&&this.handleMouseOut()},t}(tb);V_.prototype.options_={children:["muteToggle","volumeControl"]},tb.registerComponent("VolumePanel",V_);var z_=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,n&&(r.menuButton_=n.menuButton),r.focusedChild_=-1,r.on("keydown",(function(e){return r.handleKeyDown(e)})),r.boundHandleBlur_=function(e){return r.handleBlur(e)},r.boundHandleTapClick_=function(e){return r.handleTapClick(e)},r}Nh(t,e);var n=t.prototype;return n.addEventListenerForItem=function(e){e instanceof tb&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},n.removeEventListenerForItem=function(e){e instanceof tb&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},n.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},n.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},n.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=Uv(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),ky(n,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),n},n.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},n.handleBlur=function(e){var t=e.relatedTarget||Ph().activeElement;if(!this.children().some((function(e){return e.el()===t}))){var n=this.menuButton_;n&&n.buttonPressed_&&t!==n.el().firstChild&&n.unpressButton()}},n.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var n=t.filter((function(t){return t.el()===e.target}))[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}},n.handleKeyDown=function(e){Dh().isEventKey(e,"Left")||Dh().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Dh().isEventKey(e,"Right")||Dh().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},n.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},n.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},n.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(tb);tb.registerComponent("Menu",z_);var W_=function(e){function t(t,n){var r;void 0===n&&(n={}),(r=e.call(this,t,n)||this).menuButton_=new u_(t,n),r.menuButton_.controlText(r.controlText_),r.menuButton_.el_.setAttribute("aria-haspopup","true");var i=u_.prototype.buildCSSClass();r.menuButton_.el_.className=r.buildCSSClass()+" "+i,r.menuButton_.removeClass("vjs-control"),r.addChild(r.menuButton_),r.update(),r.enabled_=!0;var o=function(e){return r.handleClick(e)};return r.handleMenuKeyUp_=function(e){return r.handleMenuKeyUp(e)},r.on(r.menuButton_,"tap",o),r.on(r.menuButton_,"click",o),r.on(r.menuButton_,"keydown",(function(e){return r.handleKeyDown(e)})),r.on(r.menuButton_,"mouseenter",(function(){r.addClass("vjs-hover"),r.menu.show(),ky(Ph(),"keyup",r.handleMenuKeyUp_)})),r.on("mouseleave",(function(e){return r.handleMouseLeave(e)})),r.on("keydown",(function(e){return r.handleSubmenuKeyDown(e)})),r}Nh(t,e);var n=t.prototype;return n.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},n.createMenu=function(){var e=new z_(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=Uv("li",{className:"vjs-menu-title",textContent:Ky(this.options_.title),tabIndex:-1}),n=new tb(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(var r=0;r<this.items.length;r++)e.addItem(this.items[r]);return e},n.createItems=function(){},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},n.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+u_.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},n.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},n.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},n.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},n.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},n.handleMouseLeave=function(e){this.removeClass("vjs-hover"),Cy(Ph(),"keyup",this.handleMenuKeyUp_)},n.focus=function(){this.menuButton_.focus()},n.blur=function(){this.menuButton_.blur()},n.handleKeyDown=function(e){Dh().isEventKey(e,"Esc")||Dh().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),Dh().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(Dh().isEventKey(e,"Up")||Dh().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},n.handleMenuKeyUp=function(e){(Dh().isEventKey(e,"Esc")||Dh().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},n.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},n.handleSubmenuKeyDown=function(e){(Dh().isEventKey(e,"Esc")||Dh().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Dh().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},n.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Ev&&Mv())return;this.menu.focus()}},n.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},n.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},n.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(tb);tb.registerComponent("MenuButton",W_);var H_=function(e){function t(t,n){var r,i=n.tracks;if((r=e.call(this,t,n)||this).items.length<=1&&r.hide(),!i)return Rh(r);var o=Ry(Rh(r),r.update);return i.addEventListener("removetrack",o),i.addEventListener("addtrack",o),i.addEventListener("labelchange",o),r.player_.on("ready",o),r.player_.on("dispose",(function(){i.removeEventListener("removetrack",o),i.removeEventListener("addtrack",o),i.removeEventListener("labelchange",o)})),r}return Nh(t,e),t}(W_);tb.registerComponent("TrackButton",H_);var Z_=["Tab","Esc","Up","Down","Right","Left"],$_=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).selectable=n.selectable,r.isSelected_=n.selected||!1,r.multiSelectable=n.multiSelectable,r.selected(r.isSelected_),r.selectable?r.multiSelectable?r.el_.setAttribute("role","menuitemcheckbox"):r.el_.setAttribute("role","menuitemradio"):r.el_.setAttribute("role","menuitem"),r}Nh(t,e);var n=t.prototype;return n.createEl=function(t,n,r){this.nonIconControl=!0;var i=e.prototype.createEl.call(this,"li",nv({className:"vjs-menu-item",tabIndex:-1},n),r);return i.replaceChild(Uv("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),i.querySelector(".vjs-icon-placeholder")),i},n.handleKeyDown=function(t){Z_.some((function(e){return Dh().isEventKey(t,e)}))||e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){this.selected(!0)},n.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(r_);tb.registerComponent("MenuItem",$_);var G_=function(e){function t(t,n){var r,i=n.track,o=t.textTracks();n.label=i.label||i.language||"Unknown",n.selected="showing"===i.mode,(r=e.call(this,t,n)||this).track=i,r.kinds=(n.kinds||[n.kind||r.track.kind]).filter(Boolean);var a,s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleTracksChange.apply(Rh(r),t)},d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleSelectedLanguageChange.apply(Rh(r),t)};return t.on(["loadstart","texttrackchange"],s),o.addEventListener("change",s),o.addEventListener("selectedlanguagechange",d),r.on("dispose",(function(){t.off(["loadstart","texttrackchange"],s),o.removeEventListener("change",s),o.removeEventListener("selectedlanguagechange",d)})),void 0===o.onchange&&r.on(["tap","click"],(function(){if("object"!=typeof Eh().Event)try{a=new(Eh().Event)("change")}catch(e){}a||(a=Ph().createEvent("Event")).initEvent("change",!0,!0),o.dispatchEvent(a)})),r.handleTracksChange(),r}Nh(t,e);var n=t.prototype;return n.handleClick=function(t){var n=this.track,r=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),r)for(var i=0;i<r.length;i++){var o=r[i];-1!==this.kinds.indexOf(o.kind)&&(o===n?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled"))}},n.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},n.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},n.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}($_);tb.registerComponent("TextTrackMenuItem",G_);var K_=function(e){function t(t,n){return n.track={player:t,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,e.call(this,t,n)||this}Nh(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,r=0,i=t.length;r<i;r++){var o=t[r];if(this.options_.kinds.indexOf(o.kind)>-1&&"showing"===o.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},n.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,r=0,i=t.length;r<i;r++){var o=t[r];if(["captions","descriptions","subtitles"].indexOf(o.kind)>-1&&"showing"===o.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(G_);tb.registerComponent("OffTextTrackMenuItem",K_);var X_=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.textTracks(),e.call(this,t,n)||this}return Nh(t,e),t.prototype.createItems=function(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t=G_),this.label_&&(n=this.label_+" off"),e.push(new K_(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var i=0;i<r.length;i++){var o=r[i];if(this.kinds_.indexOf(o.kind)>-1){var a=new t(this.player_,{track:o,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});a.addClass("vjs-"+o.kind+"-menu-item"),e.push(a)}}return e},t}(H_);tb.registerComponent("TextTrackButton",X_);var J_=function(e){function t(t,n){var r,i=n.track,o=n.cue,a=t.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=o.text,n.selected=o.startTime<=a&&a<o.endTime,(r=e.call(this,t,n)||this).track=i,r.cue=o,r}return Nh(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},t}($_);tb.registerComponent("ChaptersTrackMenuItem",J_);var Y_=function(e){function t(t,n,r){var i;return(i=e.call(this,t,n,r)||this).selectCurrentItem_=function(){i.items.forEach((function(e){e.selected(i.track_.activeCues[0]===e.cue)}))},i}Nh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},n.update=function(t){if(!t||!t.track||"chapters"===t.track.kind){var n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),e.prototype.update.call(this)):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&e.prototype.update.call(this)}},n.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},n.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var n=e[t];if(n.kind===this.kind_)return n}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ky(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},n.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,r=t.length;n<r;n++){var i=t[n],o=new J_(this.player_,{track:this.track_,cue:i});e.push(o)}return e},t}(X_);Y_.prototype.kind_="chapters",Y_.prototype.controlText_="Chapters",tb.registerComponent("ChaptersButton",Y_);var Q_=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var o=t.textTracks(),a=Ry(Rh(i),i.handleTracksChange);return o.addEventListener("change",a),i.on("dispose",(function(){o.removeEventListener("change",a)})),i}Nh(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,r=0,i=t.length;r<i;r++){var o=t[r];if(o.kind!==this.kind_&&"showing"===o.mode){n=!0;break}}n?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(X_);Q_.prototype.kind_="descriptions",Q_.prototype.controlText_="Descriptions",tb.registerComponent("DescriptionsButton",Q_);var ew=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}Nh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(X_);ew.prototype.kind_="subtitles",ew.prototype.controlText_="Subtitles",tb.registerComponent("SubtitlesButton",ew);var tw=function(e){function t(t,n){var r;return n.track={player:t,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(r=e.call(this,t,n)||this).addClass("vjs-texttrack-settings"),r.controlText(", opens "+n.kind+" settings dialog"),r}return Nh(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(G_);tb.registerComponent("CaptionSettingsMenuItem",tw);var nw=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}Nh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new tw(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(X_);nw.prototype.kind_="captions",nw.prototype.controlText_="Captions",tb.registerComponent("CaptionsButton",nw);var rw=function(e){function t(){return e.apply(this,arguments)||this}return Nh(t,e),t.prototype.createEl=function(t,n,r){var i=e.prototype.createEl.call(this,t,n,r),o=i.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(o.appendChild(Uv("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),o.appendChild(Uv("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),i},t}(G_);tb.registerComponent("SubsCapsMenuItem",rw);var iw=function(e){function t(t,n){var r;return void 0===n&&(n={}),(r=e.call(this,t,n)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(r.player_.language_)>-1&&(r.label_="captions"),r.menuButton_.controlText(Ky(r.label_)),r}Nh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new tw(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t,rw)},t}(X_);iw.prototype.kinds_=["captions","subtitles"],iw.prototype.controlText_="Subtitles",tb.registerComponent("SubsCapsButton",iw);var ow=function(e){function t(t,n){var r,i=n.track,o=t.audioTracks();n.label=i.label||i.language||"Unknown",n.selected=i.enabled,(r=e.call(this,t,n)||this).track=i,r.addClass("vjs-"+i.kind+"-menu-item");var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleTracksChange.apply(Rh(r),t)};return o.addEventListener("change",a),r.on("dispose",(function(){o.removeEventListener("change",a)})),r}Nh(t,e);var n=t.prototype;return n.createEl=function(t,n,r){var i=e.prototype.createEl.call(this,t,n,r),o=i.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(o.appendChild(Uv("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),o.appendChild(Uv("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),i},n.handleClick=function(t){if(e.prototype.handleClick.call(this,t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var n=this.player_.audioTracks(),r=0;r<n.length;r++){var i=n[r];i!==this.track&&(i.enabled=i===this.track)}},n.handleTracksChange=function(e){this.selected(this.track.enabled)},t}($_);tb.registerComponent("AudioTrackMenuItem",ow);var aw=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.audioTracks(),e.call(this,t,n)||this}Nh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var r=t[n];e.push(new ow(this.player_,{track:r,selectable:!0,multiSelectable:!1}))}return e},t}(H_);aw.prototype.controlText_="Audio Track",tb.registerComponent("AudioTrackButton",aw);var sw=function(e){function t(t,n){var r,i=n.rate,o=parseFloat(i,10);return n.label=i,n.selected=o===t.playbackRate(),n.selectable=!0,n.multiSelectable=!1,(r=e.call(this,t,n)||this).label=i,r.rate=o,r.on(t,"ratechange",(function(e){return r.update(e)})),r}Nh(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}($_);sw.prototype.contentElType="button",tb.registerComponent("PlaybackRateMenuItem",sw);var dw=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).menuButton_.el_.setAttribute("aria-describedby",r.labelElId_),r.updateVisibility(),r.updateLabel(),r.on(t,"loadstart",(function(e){return r.updateVisibility(e)})),r.on(t,"ratechange",(function(e){return r.updateLabel(e)})),r.on(t,"playbackrateschange",(function(e){return r.handlePlaybackRateschange(e)})),r}Nh(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Uv("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t},n.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){for(var e=this.playbackRates(),t=[],n=e.length-1;n>=0;n--)t.push(new sw(this.player(),{rate:e[n]+"x"}));return t},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(e){var t=this.player().playbackRate(),n=this.playbackRates(),r=(n.indexOf(t)+1)%n.length;this.player().playbackRate(n[r])},n.handlePlaybackRateschange=function(e){this.update()},n.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},n.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},t}(W_);dw.prototype.controlText_="Playback Rate",tb.registerComponent("PlaybackRateMenuButton",dw);var cw=function(e){function t(){return e.apply(this,arguments)||this}Nh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(t,n,r){return void 0===t&&(t="div"),void 0===n&&(n={}),void 0===r&&(r={}),n.className||(n.className=this.buildCSSClass()),e.prototype.createEl.call(this,t,n,r)},t}(tb);tb.registerComponent("Spacer",cw);var lw=function(e){function t(){return e.apply(this,arguments)||this}Nh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:""})},t}(cw);tb.registerComponent("CustomControlSpacer",lw);var uw=function(e){function t(){return e.apply(this,arguments)||this}return Nh(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(tb);uw.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in Ph()&&uw.prototype.options_.children.splice(uw.prototype.options_.children.length-1,0,"pictureInPictureToggle"),tb.registerComponent("ControlBar",uw);var pw=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,"error",(function(e){return r.open(e)})),r}Nh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},n.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(pb);pw.prototype.options_=xh({},pb.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),tb.registerComponent("ErrorDisplay",pw);var fw="vjs-text-track-settings",hw=["#000","Black"],gw=["#00F","Blue"],mw=["#0FF","Cyan"],vw=["#0F0","Green"],yw=["#F0F","Magenta"],bw=["#F00","Red"],_w=["#FFF","White"],ww=["#FF0","Yellow"],Tw=["1","Opaque"],Iw=["0.5","Semi-Transparent"],Sw=["0","Transparent"],kw={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[hw,_w,bw,vw,gw,ww,yw,mw]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Tw,Iw,Sw]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[_w,hw,bw,vw,gw,ww,yw,mw]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Tw,Iw]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Sw,Iw,Tw]}};function Cw(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}kw.windowColor.options=kw.backgroundColor.options;var Ew=function(e){function t(t,n){var r;return n.temporary=!1,(r=e.call(this,t,n)||this).updateDisplay=r.updateDisplay.bind(Rh(r)),r.fill(),r.hasBeenOpened_=r.hasBeenFilled_=!0,r.endDialog=Uv("p",{className:"vjs-control-text",textContent:r.localize("End of dialog window.")}),r.el().appendChild(r.endDialog),r.setDefaults(),void 0===n.persistTextTrackSettings&&(r.options_.persistTextTrackSettings=r.options_.playerOptions.persistTextTrackSettings),r.on(r.$(".vjs-done-button"),"click",(function(){r.saveSettings(),r.close()})),r.on(r.$(".vjs-default-button"),"click",(function(){r.setDefaults(),r.updateDisplay()})),tv(kw,(function(e){r.on(r.$(e.selector),"change",r.updateDisplay)})),r.options_.persistTextTrackSettings&&r.restoreSettings(),r}Nh(t,e);var n=t.prototype;return n.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},n.createElSelect_=function(e,t,n){var r=this;void 0===t&&(t=""),void 0===n&&(n="label");var i=kw[e],o=i.id.replace("%s",this.id_),a=[t,o].join(" ").trim();return["<"+n+' id="'+o+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(i.label),"</"+n+">",'<select aria-labelledby="'+a+'">'].concat(i.options.map((function(e){var t=o+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+a+" "+t+'">',r.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")},n.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return Uv("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return Uv("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var e=this.localize("restore all settings to the default values");return Uv("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var e,t,n,r=this;return t=function(e,t,n){var i,o,a=(i=r.$(t.selector),o=t.parser,Cw(i.options[i.options.selectedIndex].value,o));return void 0!==a&&(e[n]=a),e},void 0===(n={})&&(n=0),ev(e=kw).reduce((function(n,r){return t(n,e[r],r)}),n)},n.setValues=function(e){var t=this;tv(kw,(function(n,r){!function(e,t,n){if(t)for(var r=0;r<e.options.length;r++)if(Cw(e.options[r].value,n)===t){e.selectedIndex=r;break}}(t.$(n.selector),e[r],n.parser)}))},n.setDefaults=function(){var e=this;tv(kw,(function(t){var n=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=n}))},n.restoreSettings=function(){var e;try{e=JSON.parse(Eh().localStorage.getItem(fw))}catch(e){Jm.warn(e)}e&&this.setValues(e)},n.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?Eh().localStorage.setItem(fw,JSON.stringify(e)):Eh().localStorage.removeItem(fw)}catch(e){Jm.warn(e)}}},n.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()},t}(pb);tb.registerComponent("TextTrackSettings",Ew);var Aw=function(e){function t(t,n){var r,i=n.ResizeObserver||Eh().ResizeObserver;null===n.ResizeObserver&&(i=!1);var o=Xy({createEl:!i,reportTouchActivity:!1},n);return(r=e.call(this,t,o)||this).ResizeObserver=n.ResizeObserver||Eh().ResizeObserver,r.loadListener_=null,r.resizeObserver_=null,r.debouncedHandler_=function(e,t,n,r){var i;void 0===r&&(r=Eh());var o=function(){var t=this,n=arguments,o=function(){i=null,o=null,e.apply(t,n)};r.clearTimeout(i),i=r.setTimeout(o,100)};return o.cancel=function(){r.clearTimeout(i),i=null},o}((function(){r.resizeHandler()}),0,0,Rh(r)),i?(r.resizeObserver_=new r.ResizeObserver(r.debouncedHandler_),r.resizeObserver_.observe(t.el())):(r.loadListener_=function(){if(r.el_&&r.el_.contentWindow){var e=r.debouncedHandler_,t=r.unloadListener_=function(){Cy(this,"resize",e),Cy(this,"unload",t),t=null};ky(r.el_.contentWindow,"unload",t),ky(r.el_.contentWindow,"resize",e)}},r.one("load",r.loadListener_)),r}Nh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},n.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},n.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,e.prototype.dispose.call(this)},t}(tb);tb.registerComponent("ResizeManager",Aw);var Pw={trackingThreshold:20,liveTolerance:15},xw=function(e){function t(t,n){var r,i=Xy(Pw,n,{createEl:!1});return(r=e.call(this,t,i)||this).handleVisibilityChange_=function(e){return r.handleVisibilityChange(e)},r.trackLiveHandler_=function(){return r.trackLive_()},r.handlePlay_=function(e){return r.handlePlay(e)},r.handleFirstTimeupdate_=function(e){return r.handleFirstTimeupdate(e)},r.handleSeeked_=function(e){return r.handleSeeked(e)},r.seekToLiveEdge_=function(e){return r.seekToLiveEdge(e)},r.reset_(),r.on(r.player_,"durationchange",(function(e){return r.handleDurationchange(e)})),r.on(r.player_,"canplay",(function(){return r.toggleTracking()})),wv&&"hidden"in Ph()&&"visibilityState"in Ph()&&r.on(Ph(),"visibilitychange",r.handleVisibilityChange_),r}Nh(t,e);var n=t.prototype;return n.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Ph().hidden?this.stopTracking():this.startTracking())},n.trackLive_=function(){var e=this.player_.seekable();if(e&&e.length){var t=Number(Eh().performance.now().toFixed(4)),n=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+n;var r=this.liveCurrentTime(),i=this.player_.currentTime(),o=this.player_.paused()||this.seekedBehindLive_||Math.abs(r-i)>this.options_.liveTolerance;this.timeupdateSeen_&&r!==1/0||(o=!1),o!==this.behindLiveEdge_&&(this.behindLiveEdge_=o,this.trigger("liveedgechange"))}},n.handleDurationchange=function(){this.toggleTracking()},n.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},n.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Dy),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},n.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},n.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()},n.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},n.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},n.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},n.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},n.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0},n.seekableStart=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0},n.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},n.isLive=function(){return this.isTracking()},n.atLiveEdge=function(){return!this.behindLiveEdge()},n.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},n.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},n.behindLiveEdge=function(){return this.behindLiveEdge_},n.isTracking=function(){return"number"==typeof this.trackingInterval_},n.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},n.dispose=function(){this.off(Ph(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),e.prototype.dispose.call(this)},t}(tb);tb.registerComponent("LiveTracker",xw);var Ow,Dw=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),r=[],i="";if(!n.length)return!1;for(var o=0;o<n.length;o++){var a=n[o].src;a&&-1===r.indexOf(a)&&r.push(a)}return!!r.length&&(1===r.length&&(i=r[0]),e.triggerSourceset(i),!0)},Rw=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=Ph().createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=Ph().createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",Eh().Element.prototype.appendChild.call(this,n),this.innerHTML}}),Mw=function(e,t){for(var n={},r=0;r<e.length&&!((n=Object.getOwnPropertyDescriptor(e[r],t))&&n.set&&n.get);r++);return n.enumerable=!0,n.configurable=!0,n},Nw=function(e){var t=e.el();if(!t.resetSourceWatch_){var n={},r=function(e){return Mw([e.el(),Eh().HTMLMediaElement.prototype,Eh().Element.prototype,Rw],"innerHTML")}(e),i=function(n){return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=n.apply(t,i);return Dw(e),a}};["append","appendChild","insertAdjacentHTML"].forEach((function(e){t[e]&&(n[e]=t[e],t[e]=i(n[e]))})),Object.defineProperty(t,"innerHTML",Xy(r,{set:i(r.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(n).forEach((function(e){t[e]=n[e]})),Object.defineProperty(t,"innerHTML",r)},e.one("sourceset",t.resetSourceWatch_)}},Uw=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Ab(Eh().Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return Eh().Element.prototype.setAttribute.call(this,"src",e),e}}),Lw=function(e,t,n,r){void 0===r&&(r=!0);var i=function(n){return Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0})},o={configurable:!0,enumerable:!0,get:function(){var e=n();return i(e),e}};return r&&(o.set=i),Object.defineProperty(e,t,o)},jw=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i=t.source,o=!1;if(r.featuresVideoFrameCallback=r.featuresVideoFrameCallback&&"VIDEO"===r.el_.tagName,i&&(r.el_.currentSrc!==i.src||t.tag&&3===t.tag.initNetworkState_)?r.setSource(i):r.handleLateInit_(r.el_),t.enableSourceset&&r.setupSourcesetHandling_(),r.isScrubbing_=!1,r.el_.hasChildNodes()){for(var a=r.el_.childNodes,s=a.length,d=[];s--;){var c=a[s];"track"===c.nodeName.toLowerCase()&&(r.featuresNativeTextTracks?(r.remoteTextTrackEls().addTrackElement_(c),r.remoteTextTracks().addTrack(c.track),r.textTracks().addTrack(c.track),o||r.el_.hasAttribute("crossorigin")||!xb(c.src)||(o=!0)):d.push(c))}for(var l=0;l<d.length;l++)r.el_.removeChild(d[l])}return r.proxyNativeTracks_(),r.featuresNativeTextTracks&&o&&Jm.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),r.restoreMetadataTracksInIOSNativePlayer_(),(Sv||Cv||mv)&&!0===t.nativeControlsForTouch&&r.setControls(!0),r.proxyWebkitFullscreen_(),r.triggerReady(),r}Nh(t,e);var n=t.prototype;return n.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},n.setupSourcesetHandling_=function(){!function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var n=function(e){return Mw([e.el(),Eh().HTMLMediaElement.prototype,Uw],"src")}(e),r=t.setAttribute,i=t.load;Object.defineProperty(t,"src",Xy(n,{set:function(r){var i=n.set.call(t,r);return e.triggerSourceset(t.src),i}})),t.setAttribute=function(n,i){var o=r.call(t,n,i);return/src/i.test(n)&&e.triggerSourceset(t.src),o},t.load=function(){var n=i.call(t);return Dw(e)||(e.triggerSourceset(""),Nw(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):Dw(e)||Nw(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=i,t.setAttribute=r,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}}}}(this)},n.restoreMetadataTracksInIOSNativePlayer_=function(){var e,t=this.textTracks(),n=function(){e=[];for(var n=0;n<t.length;n++){var r=t[n];"metadata"===r.kind&&e.push({track:r,storedMode:r.mode})}};n(),t.addEventListener("change",n),this.on("dispose",(function(){return t.removeEventListener("change",n)}));var r=function n(){for(var r=0;r<e.length;r++){var i=e[r];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}t.removeEventListener("change",n)};this.on("webkitbeginfullscreen",(function(){t.removeEventListener("change",n),t.removeEventListener("change",r),t.addEventListener("change",r)})),this.on("webkitendfullscreen",(function(){t.removeEventListener("change",n),t.addEventListener("change",n),t.removeEventListener("change",r)}))},n.overrideNative_=function(e,t){var n=this;if(t===this["featuresNative"+e+"Tracks"]){var r=e.toLowerCase();this[r+"TracksListeners_"]&&Object.keys(this[r+"TracksListeners_"]).forEach((function(e){n.el()[r+"Tracks"].removeEventListener(e,n[r+"TracksListeners_"][e])})),this["featuresNative"+e+"Tracks"]=!t,this[r+"TracksListeners_"]=null,this.proxyNativeTracksForType_(r)}},n.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},n.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},n.proxyNativeTracksForType_=function(e){var t=this,n=jb[e],r=this.el()[n.getterName],i=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&r&&r.addEventListener){var o={change:function(n){var r={type:"change",target:i,currentTarget:i,srcElement:i};i.trigger(r),"text"===e&&t[Bb.remoteText.getterName]().trigger(r)},addtrack:function(e){i.addTrack(e.track)},removetrack:function(e){i.removeTrack(e.track)}},a=function(){for(var e=[],t=0;t<i.length;t++){for(var n=!1,o=0;o<r.length;o++)if(r[o]===i[t]){n=!0;break}n||e.push(i[t])}for(;e.length;)i.removeTrack(e.shift())};this[n.getterName+"Listeners_"]=o,Object.keys(o).forEach((function(e){var n=o[e];r.addEventListener(e,n),t.on("dispose",(function(t){return r.removeEventListener(e,n)}))})),this.on("loadstart",a),this.on("dispose",(function(e){return t.off("loadstart",a)}))}},n.proxyNativeTracks_=function(){var e=this;jb.names.forEach((function(t){e.proxyNativeTracksForType_(t)}))},n.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),t.disposeMediaElement(e),e=n}else{e=Ph().createElement("video");var r=Xy({},this.options_.tag&&Wv(this.options_.tag));Sv&&!0===this.options_.nativeControlsForTouch||delete r.controls,zv(e,nv(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&Zv(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var i=["loop","muted","playsinline","autoplay"],o=0;o<i.length;o++){var a=i[o],s=this.options_[a];void 0!==s&&(s?Zv(e,a,a):$v(e,a),e[a]=s)}return e},n.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var r=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",r),void this.ready((function(){this.off("loadstart",n),this.off("loadedmetadata",r),t||this.trigger("loadstart")}))}var i=["loadstart"];i.push("loadedmetadata"),e.readyState>=2&&i.push("loadeddata"),e.readyState>=3&&i.push("canplay"),e.readyState>=4&&i.push("canplaythrough"),this.ready((function(){i.forEach((function(e){this.trigger(e)}),this)}))}},n.setScrubbing=function(e){this.isScrubbing_=e},n.scrubbing=function(){return this.isScrubbing_},n.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&Av?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){Jm(e,"Video is not ready. (Video.js)")}},n.duration=function(){var e=this;return this.el_.duration===1/0&&hv&&bv&&0===this.el_.currentTime?(this.on("timeupdate",(function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))})),NaN):this.el_.duration||NaN},n.width=function(){return this.el_.offsetWidth},n.height=function(){return this.el_.offsetHeight},n.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",(function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)}))}},n.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=Eh().navigator&&Eh().navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},n.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)cb(this.el_.play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}),0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},n.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},n.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},n.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):e.prototype.requestVideoFrameCallback.call(this,t)},n.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):e.prototype.cancelVideoFrameCallback.call(this,t)},n.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},n.reset=function(){t.resetMediaElement(this.el_)},n.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},n.setControls=function(e){this.el_.controls=!!e},n.addTextTrack=function(t,n,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,r):e.prototype.addTextTrack.call(this,t,n,r)},n.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var n=Ph().createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n},n.addRemoteTextTrack=function(t,n){var r=e.prototype.addRemoteTextTrack.call(this,t,n);return this.featuresNativeTextTracks&&this.el().appendChild(r),r},n.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),r=n.length;r--;)t!==n[r]&&t!==n[r].track||this.el().removeChild(n[r])},n.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),Eh().performance&&"function"==typeof Eh().performance.now?e.creationTime=Eh().performance.now():Eh().performance&&Eh().performance.timing&&"number"==typeof Eh().performance.timing.navigationStart&&(e.creationTime=Eh().Date.now()-Eh().performance.timing.navigationStart),e},t}(Fb);Lw(jw,"TEST_VID",(function(){if(Dv()){var e=Ph().createElement("video"),t=Ph().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}})),jw.isSupported=function(){try{jw.TEST_VID.volume=.5}catch(e){return!1}return!(!jw.TEST_VID||!jw.TEST_VID.canPlayType)},jw.canPlayType=function(e){return jw.TEST_VID.canPlayType(e)},jw.canPlaySource=function(e,t){return jw.canPlayType(e.type)},jw.canControlVolume=function(){try{var e=jw.TEST_VID.volume;jw.TEST_VID.volume=e/2+.1;var t=e!==jw.TEST_VID.volume;return t&&Ev?(Eh().setTimeout((function(){jw&&jw.prototype&&(jw.prototype.featuresVolumeControl=e!==jw.TEST_VID.volume)})),!1):t}catch(e){return!1}},jw.canMuteVolume=function(){try{var e=jw.TEST_VID.muted;return jw.TEST_VID.muted=!e,jw.TEST_VID.muted?Zv(jw.TEST_VID,"muted","muted"):$v(jw.TEST_VID,"muted"),e!==jw.TEST_VID.muted}catch(e){return!1}},jw.canControlPlaybackRate=function(){if(hv&&bv&&_v<58)return!1;try{var e=jw.TEST_VID.playbackRate;return jw.TEST_VID.playbackRate=e/2+.1,e!==jw.TEST_VID.playbackRate}catch(e){return!1}},jw.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(Ph().createElement("video"),"src",{get:e,set:e}),Object.defineProperty(Ph().createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(Ph().createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(Ph().createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},jw.supportsNativeTextTracks=function(){return Av||Ev&&bv},jw.supportsNativeVideoTracks=function(){return!(!jw.TEST_VID||!jw.TEST_VID.videoTracks)},jw.supportsNativeAudioTracks=function(){return!(!jw.TEST_VID||!jw.TEST_VID.audioTracks)},jw.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(e){var t=e[0],n=e[1];Lw(jw.prototype,t,(function(){return jw[n]()}),!0)})),jw.prototype.featuresVolumeControl=jw.canControlVolume(),jw.prototype.movingMediaElementInDOM=!Ev,jw.prototype.featuresFullscreenResize=!0,jw.prototype.featuresProgressEvents=!0,jw.prototype.featuresTimeupdateEvents=!0,jw.prototype.featuresVideoFrameCallback=!(!jw.TEST_VID||!jw.TEST_VID.requestVideoFrameCallback),jw.patchCanPlayType=function(){gv>=4&&!vv&&!bv&&(Ow=jw.TEST_VID&&jw.TEST_VID.constructor.prototype.canPlayType,jw.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":Ow.call(this,e)})},jw.unpatchCanPlayType=function(){var e=jw.TEST_VID.constructor.prototype.canPlayType;return Ow&&(jw.TEST_VID.constructor.prototype.canPlayType=Ow),e},jw.patchCanPlayType(),jw.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},jw.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){jw.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){jw.prototype["set"+Ky(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){jw.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(e){jw.prototype["set"+Ky(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){jw.prototype[e]=function(){return this.el_[e]()}})),Fb.withSourceHandlers(jw),jw.nativeSourceHandler={},jw.nativeSourceHandler.canPlayType=function(e){try{return jw.TEST_VID.canPlayType(e)}catch(e){return""}},jw.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return jw.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=Pb(e.src);return jw.nativeSourceHandler.canPlayType("video/"+n)}return""},jw.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},jw.nativeSourceHandler.dispose=function(){},jw.registerSourceHandler(jw.nativeSourceHandler),Fb.registerTech("Html5",jw);var Bw=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],qw={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Fw=["tiny","xsmall","small","medium","large","xlarge","huge"],Vw={};Fw.forEach((function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Vw[e]="vjs-layout-"+t}));var zw={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Ww=function(e){function t(n,r,i){var o;if(n.id=n.id||r.id||"vjs_video_"+vy(),(r=nv(t.getTagSettings(n),r)).initChildren=!1,r.createEl=!1,r.evented=!1,r.reportTouchActivity=!1,!r.language)if("function"==typeof n.closest){var a=n.closest("[lang]");a&&a.getAttribute&&(r.language=a.getAttribute("lang"))}else for(var s=n;s&&1===s.nodeType;){if(Wv(s).hasOwnProperty("lang")){r.language=s.getAttribute("lang");break}s=s.parentNode}if((o=e.call(this,null,r,i)||this).boundDocumentFullscreenChange_=function(e){return o.documentFullscreenChange_(e)},o.boundFullWindowOnEscKey_=function(e){return o.fullWindowOnEscKey(e)},o.boundUpdateStyleEl_=function(e){return o.updateStyleEl_(e)},o.boundApplyInitTime_=function(e){return o.applyInitTime_(e)},o.boundUpdateCurrentBreakpoint_=function(e){return o.updateCurrentBreakpoint_(e)},o.boundHandleTechClick_=function(e){return o.handleTechClick_(e)},o.boundHandleTechDoubleClick_=function(e){return o.handleTechDoubleClick_(e)},o.boundHandleTechTouchStart_=function(e){return o.handleTechTouchStart_(e)},o.boundHandleTechTouchMove_=function(e){return o.handleTechTouchMove_(e)},o.boundHandleTechTouchEnd_=function(e){return o.handleTechTouchEnd_(e)},o.boundHandleTechTap_=function(e){return o.handleTechTap_(e)},o.isFullscreen_=!1,o.log=Ym(o.id_),o.fsApi_=Hm,o.isPosterFromTech_=!1,o.queuedCallbacks_=[],o.isReady_=!1,o.hasStarted_=!1,o.userActive_=!1,o.debugEnabled_=!1,o.audioOnlyMode_=!1,o.audioPosterMode_=!1,o.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!o.options_||!o.options_.techOrder||!o.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(o.tag=n,o.tagAttributes=n&&Wv(n),o.language(o.options_.language),r.languages){var d={};Object.getOwnPropertyNames(r.languages).forEach((function(e){d[e.toLowerCase()]=r.languages[e]})),o.languages_=d}else o.languages_=t.prototype.options_.languages;o.resetCache_(),o.poster_=r.poster||"",o.controls_=!!r.controls,n.controls=!1,n.removeAttribute("controls"),o.changingSrc_=!1,o.playCallbacks_=[],o.playTerminatedQueue_=[],n.hasAttribute("autoplay")?o.autoplay(!0):o.autoplay(o.options_.autoplay),r.plugins&&Object.keys(r.plugins).forEach((function(e){if("function"!=typeof o[e])throw new Error('plugin "'+e+'" does not exist')})),o.scrubbing_=!1,o.el_=o.createEl(),Hy(Rh(o),{eventBusKey:"el_"}),o.fsApi_.requestFullscreen&&(ky(Ph(),o.fsApi_.fullscreenchange,o.boundDocumentFullscreenChange_),o.on(o.fsApi_.fullscreenchange,o.boundDocumentFullscreenChange_)),o.fluid_&&o.on(["playerreset","resize"],o.boundUpdateStyleEl_);var c=Xy(o.options_);r.plugins&&Object.keys(r.plugins).forEach((function(e){o[e](r.plugins[e])})),r.debug&&o.debug(!0),o.options_.playerOptions=c,o.middleware_=[],o.playbackRates(r.playbackRates),o.initChildren(),o.isAudio("audio"===n.nodeName.toLowerCase()),o.controls()?o.addClass("vjs-controls-enabled"):o.addClass("vjs-controls-disabled"),o.el_.setAttribute("role","region"),o.isAudio()?o.el_.setAttribute("aria-label",o.localize("Audio Player")):o.el_.setAttribute("aria-label",o.localize("Video Player")),o.isAudio()&&o.addClass("vjs-audio"),o.flexNotSupported_()&&o.addClass("vjs-no-flex"),Sv&&o.addClass("vjs-touch-enabled"),Ev||o.addClass("vjs-workinghover"),t.players[o.id_]=Rh(o);var l=Fm.split(".")[0];return o.addClass("vjs-v"+l),o.userActive(!0),o.reportUserActivity(),o.one("play",(function(e){return o.listenForUserActivity_(e)})),o.on("stageclick",(function(e){return o.handleStageClick_(e)})),o.on("keydown",(function(e){return o.handleKeyDown(e)})),o.on("languagechange",(function(e){return o.handleLanguagechange(e)})),o.breakpoints(o.options_.breakpoints),o.responsive(o.options_.responsive),o.on("ready",(function(){o.audioPosterMode(o.options_.audioPosterMode),o.audioOnlyMode(o.options_.audioOnlyMode)})),o}Nh(t,e);var n=t.prototype;return n.dispose=function(){var n=this;this.trigger("dispose"),this.off("dispose"),Cy(Ph(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Cy(Ph(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),zb[this.id()]=null,qb.names.forEach((function(e){var t=qb[e],r=n[t.getterName]();r&&r.off&&r.off()})),e.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},n.createEl=function(){var t,n=this.tag,r=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),i="video-js"===this.tag.tagName.toLowerCase();r?t=this.el_=n.parentNode:i||(t=this.el_=e.prototype.createEl.call(this,"div"));var o=Wv(n);if(i){for(t=this.el_=n,n=this.tag=Ph().createElement("video");t.children.length;)n.appendChild(t.firstChild);Bv(t,"video-js")||qv(t,"video-js"),t.appendChild(n),r=this.playerElIngest_=t,Object.keys(t).forEach((function(e){try{n[e]=t[e]}catch(e){}}))}if(n.setAttribute("tabindex","-1"),o.tabindex="-1",(wv||bv&&Iv)&&(n.setAttribute("role","application"),o.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in o&&delete o.width,"height"in o&&delete o.height,Object.getOwnPropertyNames(o).forEach((function(e){i&&"class"===e||t.setAttribute(e,o[e]),i&&n.setAttribute(e,o[e])})),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=t.player=this,this.addClass("vjs-paused"),!0!==Eh().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=hy("vjs-styles-dimensions");var a=ay(".vjs-styles-defaults"),s=ay("head");s.insertBefore(this.styleEl_,a?a.nextSibling:s.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var d=n.getElementsByTagName("a"),c=0;c<d.length;c++){var l=d.item(c);qv(l,"vjs-hidden"),l.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!r&&n.parentNode.insertBefore(t,n),jv(n,t),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t},n.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):Jm.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},n.width=function(e){return this.dimension("width",e)},n.height=function(e){return this.dimension("height",e)},n.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();var r=parseFloat(t);isNaN(r)?Jm.error('Improper value "'+t+'" supplied for for '+e):(this[n]=r,this.updateStyleEl_())},n.fluid=function(e){var t,n,r=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,Ly(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),n=function(){r.on(["playerreset","resize"],r.boundUpdateStyleEl_)},Ly(t=this)?n():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(n))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},n.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},n.updateStyleEl_=function(){if(!0!==Eh().VIDEOJS_NO_DYNAMIC_STYLE){var e,t,n,r=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),i=r[1]/r[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/i:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*i,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),gy(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*i+"%;\n      }\n    ")}else{var o="number"==typeof this.width_?this.width_:this.options_.width,a="number"==typeof this.height_?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(o>=0&&(s.width=o),a>=0&&(s.height=a))}},n.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var r=Ky(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==r&&this.tag&&(Fb.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;var o=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(o=!1);var a={source:t,autoplay:o,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+i+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};qb.names.forEach((function(e){var t=qb[e];a[t.getterName]=n[t.privateName]})),nv(a,this.options_[r]),nv(a,this.options_[i]),nv(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);var s,d,c=Fb.getTech(e);if(!c)throw new Error("No Tech named '"+r+"' exists! '"+r+"' should be registered using videojs.registerTech()'");this.tech_=new c(a),this.tech_.ready(Ry(this,this.handleTechReady_),!0),s=this.textTracksJson_||[],d=this.tech_,s.forEach((function(e){var t=d.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((function(e){return t.addCue(e)}))})),d.textTracks(),Bw.forEach((function(e){n.on(n.tech_,e,(function(t){return n["handleTech"+Ky(e)+"_"](t)}))})),Object.keys(qw).forEach((function(e){n.on(n.tech_,e,(function(t){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+qw[e]+"_"].bind(n),event:t}):n["handleTech"+qw[e]+"_"](t)}))})),this.on(this.tech_,"loadstart",(function(e){return n.handleTechLoadStart_(e)})),this.on(this.tech_,"sourceset",(function(e){return n.handleTechSourceset_(e)})),this.on(this.tech_,"waiting",(function(e){return n.handleTechWaiting_(e)})),this.on(this.tech_,"ended",(function(e){return n.handleTechEnded_(e)})),this.on(this.tech_,"seeking",(function(e){return n.handleTechSeeking_(e)})),this.on(this.tech_,"play",(function(e){return n.handleTechPlay_(e)})),this.on(this.tech_,"firstplay",(function(e){return n.handleTechFirstPlay_(e)})),this.on(this.tech_,"pause",(function(e){return n.handleTechPause_(e)})),this.on(this.tech_,"durationchange",(function(e){return n.handleTechDurationChange_(e)})),this.on(this.tech_,"fullscreenchange",(function(e,t){return n.handleTechFullscreenChange_(e,t)})),this.on(this.tech_,"fullscreenerror",(function(e,t){return n.handleTechFullscreenError_(e,t)})),this.on(this.tech_,"enterpictureinpicture",(function(e){return n.handleTechEnterPictureInPicture_(e)})),this.on(this.tech_,"leavepictureinpicture",(function(e){return n.handleTechLeavePictureInPicture_(e)})),this.on(this.tech_,"error",(function(e){return n.handleTechError_(e)})),this.on(this.tech_,"posterchange",(function(e){return n.handleTechPosterChange_(e)})),this.on(this.tech_,"textdata",(function(e){return n.handleTechTextData_(e)})),this.on(this.tech_,"ratechange",(function(e){return n.handleTechRateChange_(e)})),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===r&&this.tag||jv(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.unloadTech_=function(){var e,t,n,r=this;qb.names.forEach((function(e){var t=qb[e];r[t.privateName]=r[t.getterName]()})),this.textTracksJson_=(e=this.tech_,t=e.$$("track"),n=Array.prototype.map.call(t,(function(e){return e.track})),Array.prototype.map.call(t,(function(e){var t=lb(e.track);return e.src&&(t.src=e.src),t})).concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===n.indexOf(e)})).map(lb))),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.tech=function(e){return void 0===e&&Jm.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},n.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},n.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},n.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},n.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var n,r=function(){var e=t.muted();t.muted(!0);var n=function(){t.muted(e)};t.playTerminatedQueue_.push(n);var r=t.play();if(db(r))return r.catch((function(e){throw n(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(e||""))}))};if("any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():r():db(n=this.play())&&(n=n.catch(r)),db(n))return n.then((function(){t.trigger({type:"autoplay-success",autoplay:e})})).catch((function(){t.trigger({type:"autoplay-failure",autoplay:e})}))}},n.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter((function(e){return e.src===t}));if(n.length)return n[0].type;for(var r=e.$$("source"),i=0;i<r.length;i++){var o=r[i];if(o.type&&o.src&&o.src===t)return o.type}return Qb(t)}(this,t)),this.cache_.source=Xy({},e,{src:t,type:n});for(var r=this.cache_.sources.filter((function(e){return e.src&&e.src===t})),i=[],o=this.$$("source"),a=[],s=0;s<o.length;s++){var d=Wv(o[s]);i.push(d),d.src&&d.src===t&&a.push(d.src)}a.length&&!r.length?this.cache_.sources=i:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},n.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var n=function(e){return t.updateSourceCaches_(e)},r=this.currentSource().src,i=e.src;r&&!/^blob:/.test(r)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==r)&&(n=function(){}),n(i),e.src||this.tech_.any(["sourceset","loadstart"],(function(e){if("sourceset"!==e.type){var n=t.techGet("currentSrc");t.lastSource_.tech=n,t.updateSourceCaches_(n)}}))}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},n.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},n.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",(function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))}))},n.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},n.handleTechFirstPlay_=function(){this.options_.starttime&&(Jm.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},n.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.handleTechClick_=function(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?cb(this.play()):this.pause()))},n.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(t){return t.contains(e.target)}))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},n.handleTechTap_=function(){this.userActive(!this.userActive())},n.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},n.handleStageClick_=function(){this.reportUserActivity()},n.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.documentFullscreenChange_=function(e){var t=e.target.player;if(!t||t===this){var n=this.el(),r=Ph()[this.fsApi_.fullscreenElement]===n;!r&&n.matches?r=n.matches(":"+this.fsApi_.fullscreen):!r&&n.msMatchesSelector&&(r=n.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(r)}},n.handleTechFullscreenChange_=function(e,t){var n=this;t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(function(){n.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(t.isFullscreen))},n.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},n.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},n.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},n.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},n.handleTechError_=function(){var e=this.tech_.error();this.error(e)},n.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},n.getCache=function(){return this.cache_},n.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},n.techCall_=function(e,t){this.ready((function(){if(e in Gb)return function(e,t,n,r){return t[n](e.reduce(Xb(n),r))}(this.middleware_,this.tech_,e,t);if(e in Kb)return Zb(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw Jm(e),e}}),!0)},n.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in $b)return function(e,t,n){return e.reduceRight(Xb(n),t[n]())}(this.middleware_,this.tech_,e);if(e in Kb)return Zb(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw Jm("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw Jm("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw Jm(t),t}}},n.play=function(){var e=this,t=this.options_.Promise||Eh().Promise;return t?new t((function(t){e.play_(t)})):this.play_()},n.play_=function(e){var t=this;void 0===e&&(e=cb),this.playCallbacks_.push(e);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(n||!Av&&!Ev||this.load());var r=this.techGet_("play");null===r?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(r)},n.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))},n.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))},n.pause=function(){this.techCall_("pause")},n.paused=function(){return!1!==this.techGet_("paused")},n.played=function(){return this.techGet_("played")||ib(0,0)},n.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},n.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},n.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},n.remainingTime=function(){return this.duration()-this.currentTime()},n.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=ib(0,0)),e},n.bufferedPercent=function(){return ob(this.buffered(),this.duration())},n.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return n>t&&(n=t),n},n.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},n.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},n.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},n.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},n.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.isFullscreen=function(e){if(void 0!==e){var t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},n.requestFullscreen=function(e){var t=this.options_.Promise||Eh().Promise;if(t){var n=this;return new t((function(t,r){function i(){n.off("fullscreenerror",a),n.off("fullscreenchange",o)}function o(){i(),t()}function a(e,t){i(),r(t)}n.one("fullscreenchange",o),n.one("fullscreenerror",a);var s=n.requestFullscreenHelper_(e);s&&(s.then(i,i),s.then(t,r))}))}return this.requestFullscreenHelper_()},n.requestFullscreenHelper_=function(e){var t,n=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){var r=this.el_[this.fsApi_.requestFullscreen](t);return r&&r.then((function(){return n.isFullscreen(!0)}),(function(){return n.isFullscreen(!1)})),r}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},n.exitFullscreen=function(){var e=this.options_.Promise||Eh().Promise;if(e){var t=this;return new e((function(e,n){function r(){t.off("fullscreenerror",o),t.off("fullscreenchange",i)}function i(){r(),e()}function o(e,t){r(),n(t)}t.one("fullscreenchange",i),t.one("fullscreenerror",o);var a=t.exitFullscreenHelper_();a&&(a.then(r,r),a.then(e,n))}))}return this.exitFullscreenHelper_()},n.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=Ph()[this.fsApi_.exitFullscreen]();return t&&cb(t.then((function(){return e.isFullscreen(!1)}))),t}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},n.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Ph().documentElement.style.overflow,ky(Ph(),"keydown",this.boundFullWindowOnEscKey_),Ph().documentElement.style.overflow="hidden",qv(Ph().body,"vjs-full-window"),this.trigger("enterFullWindow")},n.fullWindowOnEscKey=function(e){Dh().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},n.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Cy(Ph(),"keydown",this.boundFullWindowOnEscKey_),Ph().documentElement.style.overflow=this.docOrigOverflow,Fv(Ph().body,"vjs-full-window"),this.trigger("exitFullWindow")},n.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},n.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},n.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Ph()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},n.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Ph())return Ph().exitPictureInPicture()},n.handleKeyDown=function(e){var t,n,r=this.options_.userActions;r&&r.hotkeys&&(t=this.el_.ownerDocument.activeElement,n=t.tagName.toLowerCase(),t.isContentEditable||("input"===n?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type):-1!==["textarea"].indexOf(n))||("function"==typeof r.hotkeys?r.hotkeys.call(this,e):this.handleHotkeys(e)))},n.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},n=t.fullscreenKey,r=void 0===n?function(e){return Dh().isEventKey(e,"f")}:n,i=t.muteKey,o=void 0===i?function(e){return Dh().isEventKey(e,"m")}:i,a=t.playPauseKey,s=void 0===a?function(e){return Dh().isEventKey(e,"k")||Dh().isEventKey(e,"Space")}:a;if(r.call(this,e)){e.preventDefault(),e.stopPropagation();var d=tb.getComponent("FullscreenToggle");!1!==Ph()[this.fsApi_.fullscreenEnabled]&&d.prototype.handleClick.call(this,e)}else o.call(this,e)?(e.preventDefault(),e.stopPropagation(),tb.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),tb.getComponent("PlayToggle").prototype.handleClick.call(this,e))},n.canPlayType=function(e){for(var t,n=0,r=this.options_.techOrder;n<r.length;n++){var i=r[n],o=Fb.getTech(i);if(o||(o=tb.getComponent(i)),o){if(o.isSupported()&&(t=o.canPlayType(e)))return t}else Jm.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},n.selectSource=function(e){var t,n,r=this,i=this.options_.techOrder.map((function(e){return[e,Fb.getTech(e)]})).filter((function(e){var t=e[0],n=e[1];return n?n.isSupported():(Jm.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),o=function(e,t,n){var r;return e.some((function(e){return t.some((function(t){if(r=n(e,t))return!0}))})),r},a=function(e,t){var n=e[0];if(e[1].canPlaySource(t,r.options_[n.toLowerCase()]))return{source:t,tech:n}};return t=this.options_.sourceOrder?o(e,i,(n=a,function(e,t){return n(t,e)})):o(i,e,a),t||!1},n.handleSrc_=function(e,t){var n=this;if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var r=e_(e);if(r.length){if(this.changingSrc_=!0,t||(this.cache_.sources=r),this.updateSourceCaches_(r[0]),Hb(this,r[0],(function(e,i){var o,a;if(n.middleware_=i,t||(n.cache_.sources=r),n.updateSourceCaches_(e),n.src_(e))return r.length>1?n.handleSrc_(r.slice(1)):(n.changingSrc_=!1,n.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0),void n.triggerReady());o=i,a=n.tech_,o.forEach((function(e){return e.setTech&&e.setTech(a)}))})),this.options_.retryOnError&&r.length>1){var i=function(){n.error(null),n.handleSrc_(r.slice(1),!0)},o=function(){n.off("error",i)};this.one("error",i),this.one("playing",o),this.resetRetryOnError_=function(){n.off("error",i),n.off("playing",o)}}}else this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0)},n.src=function(e){return this.handleSrc_(e,!1)},n.src_=function(e){var t,n,r=this,i=this.selectSource([e]);return!i||(t=i.tech,n=this.techName_,Ky(t)!==Ky(n)?(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready((function(){r.changingSrc_=!1})),!1):(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1))},n.load=function(){this.techCall_("load")},n.reset=function(){var e=this,t=this.options_.Promise||Eh().Promise;this.paused()||!t?this.doReset_():cb(this.play().then((function(){return e.doReset_()})))},n.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Ly(this)&&this.trigger("playerreset")},n.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},n.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar||{},t=e.durationDisplay,n=e.remainingTimeDisplay;t&&t.updateContent(),n&&n.updateContent()},n.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},n.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},n.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},n.currentSource=function(){return this.cache_.source||{}},n.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},n.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},n.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},n.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},n.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},n.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.error=function(e){var t=this;if(void 0===e)return this.error_||null;if(zm("beforeerror").forEach((function(n){var r=n(t,e);rv(r)&&!Array.isArray(r)||"string"==typeof r||"number"==typeof r||null===r?e=r:t.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&e&&4===e.code){var n=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),void this.one("loadstart",(function(){this.off(["click","touchstart"],n)}))}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new ab(e),this.addClass("vjs-error"),Jm.error("(CODE:"+this.error_.code+" "+ab.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),zm("error").forEach((function(e){return e(t,t.error_)}))},n.reportUserActivity=function(e){this.userActivity_=!0},n.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},n.listenForUserActivity_=function(){var e,t,n,r=Ry(this,this.reportUserActivity),i=function(t){r(),this.clearInterval(e)};this.on("mousedown",(function(){r(),this.clearInterval(e),e=this.setInterval(r,250)})),this.on("mousemove",(function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,r())})),this.on("mouseup",i),this.on("mouseleave",i);var o,a=this.getChild("controlBar");!a||Ev||hv||(a.on("mouseenter",(function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),a.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",r),this.on("keyup",r),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(o);var e=this.options_.inactivityTimeout;e<=0||(o=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}}),250)},n.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},n.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},n.enableAudioOnlyUI_=function(){var e=this;this.addClass("vjs-audio-only-mode");var t=this.children(),n=this.getChild("ControlBar"),r=n&&n.currentHeight();t.forEach((function(t){t!==n&&t.el_&&!t.hasClass("vjs-hidden")&&(t.hide(),e.audioOnlyCache_.hiddenChildren.push(t))})),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(r),this.trigger("audioonlymodechange")},n.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach((function(e){return e.show()})),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},n.audioOnlyMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var n=this.options_.Promise||Eh().Promise;if(n){if(e){var r=[];return this.isInPictureInPicture()&&r.push(this.exitPictureInPicture()),this.isFullscreen()&&r.push(this.exitFullscreen()),this.audioPosterMode()&&r.push(this.audioPosterMode(!1)),n.all(r).then((function(){return t.enableAudioOnlyUI_()}))}return n.resolve().then((function(){return t.disableAudioOnlyUI_()}))}e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},n.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.audioPosterMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var n=this.options_.Promise||Eh().Promise;return n?e?this.audioOnlyMode()?this.audioOnlyMode(!1).then((function(){t.enablePosterModeUI_()})):n.resolve().then((function(){t.enablePosterModeUI_()})):n.resolve().then((function(){t.disablePosterModeUI_()})):e?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},n.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},n.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},n.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)},n.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Ly(this)&&this.trigger("languagechange"))},n.languages=function(){return Xy(t.prototype.options_.languages,this.languages_)},n.toJSON=function(){var e=Xy(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var r=t[n];(r=Xy(r)).player=void 0,e.tracks[n]=r}return e},n.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var r=new pb(this,t);return this.addChild(r),r.on("dispose",(function(){n.removeChild(r)})),r.open(),r},n.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<Fw.length;n++){var r=Fw[n];if(t<=this.breakpoints_[r]){if(e===r)return;e&&this.removeClass(Vw[e]),this.addClass(Vw[r]),this.breakpoint_=r;break}}},n.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},n.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=nv({},zw,e),this.updateCurrentBreakpoint_()),nv(this.breakpoints_)},n.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},n.currentBreakpoint=function(){return this.breakpoint_},n.currentBreakpointClass=function(){return Vw[this.breakpoint_]||""},n.loadMedia=function(e,t){var n=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=Xy(e);var r=this.cache_.media,i=r.artwork,o=r.poster,a=r.src,s=r.textTracks;!i&&o&&(this.cache_.media.artwork=[{src:o,type:Qb(o)}]),a&&this.src(a),o&&this.poster(o),Array.isArray(s)&&s.forEach((function(e){return n.addRemoteTextTrack(e,!1)})),this.ready(t)}},n.getMedia=function(){if(!this.cache_.media){var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}}))};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:Qb(t.poster)}]),t}return Xy(this.cache_.media)},t.getTagSettings=function(e){var t={sources:[],tracks:[]},n=Wv(e),r=n["data-setup"];if(Bv(e,"vjs-fill")&&(n.fill=!0),Bv(e,"vjs-fluid")&&(n.fluid=!0),null!==r){var i=Lh()(r||"{}"),o=i[0],a=i[1];o&&Jm.error(o),nv(n,a)}if(nv(t,n),e.hasChildNodes())for(var s=e.childNodes,d=0,c=s.length;d<c;d++){var l=s[d],u=l.nodeName.toLowerCase();"source"===u?t.sources.push(Wv(l)):"track"===u&&t.tracks.push(Wv(l))}return t},n.flexNotSupported_=function(){var e=Ph().createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},n.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},n.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every((function(e){return"number"==typeof e}))&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},t}(tb);qb.names.forEach((function(e){var t=qb[e];Ww.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),Ww.prototype.crossorigin=Ww.prototype.crossOrigin,Ww.players={};var Hw=Eh().navigator;Ww.prototype.options_={techOrder:Fb.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Hw&&(Hw.languages&&Hw.languages[0]||Hw.userLanguage||Hw.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){Ww.prototype[e]=function(){return this.techGet_(e)}})),Bw.forEach((function(e){Ww.prototype["handleTech"+Ky(e)+"_"]=function(){return this.trigger(e)}})),tb.registerComponent("Player",Ww);var Zw="plugin",$w="activePlugins_",Gw={},Kw=function(e){return Gw.hasOwnProperty(e)},Xw=function(e){return Kw(e)?Gw[e]:void 0},Jw=function(e,t){e[$w]=e[$w]||{},e[$w][t]=!0},Yw=function(e,t,n){var r=(n?"before":"")+"pluginsetup";e.trigger(r,t),e.trigger(r+":"+t.name,t)},Qw=function(e,t){return t.prototype.name=e,function(){Yw(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=Vh(t,[this].concat(r));return this[e]=function(){return o},Yw(this,o.getEventHash()),o}},eT=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),Hy(this),delete this.trigger,$y(this,this.constructor.defaultState),Jw(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),Ey(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[$w][e]=!1,this.player=this.state=null,t[e]=Qw(e,Gw[e])},e.isBasic=function(t){var n="string"==typeof t?Xw(t):t;return"function"==typeof n&&!e.prototype.isPrototypeOf(n.prototype)},e.registerPlugin=function(t,n){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(Kw(t))Jm.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Ww.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof n+".");return Gw[t]=n,t!==Zw&&(e.isBasic(n)?Ww.prototype[t]=function(e,t){var n=function(){Yw(this,{name:e,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return Jw(this,e),Yw(this,{name:e,plugin:t,instance:n}),n};return Object.keys(t).forEach((function(e){n[e]=t[e]})),n}(t,n):Ww.prototype[t]=Qw(t,n)),n},e.deregisterPlugin=function(e){if(e===Zw)throw new Error("Cannot de-register base plugin.");Kw(e)&&(delete Gw[e],delete Ww.prototype[e])},e.getPlugins=function(e){var t;return void 0===e&&(e=Object.keys(Gw)),e.forEach((function(e){var n=Xw(e);n&&((t=t||{})[e]=n)})),t},e.getPluginVersion=function(e){var t=Xw(e);return t&&t.VERSION||""},e}();eT.getPlugin=Xw,eT.BASE_PLUGIN_NAME=Zw,eT.registerPlugin(Zw,eT),Ww.prototype.usingPlugin=function(e){return!!this[$w]&&!0===this[$w][e]},Ww.prototype.hasPlugin=function(e){return!!Kw(e)};var tT=function(e){return 0===e.indexOf("#")?e.slice(1):e};function nT(e,t,n){var r=nT.getPlayer(e);if(r)return t&&Jm.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&r.ready(n),r;var i="string"==typeof e?ay("#"+tT(e)):e;if(!Rv(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");i.ownerDocument.defaultView&&i.ownerDocument.body.contains(i)||Jm.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(i.parentNode&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),zm("beforesetup").forEach((function(e){var n=e(i,Xy(t));rv(n)&&!Array.isArray(n)?t=Xy(t,n):Jm.error("please return an object in beforesetup hooks")}));var o=tb.getComponent("Player");return r=new o(i,t,n),zm("setup").forEach((function(e){return e(r)})),r}if(nT.hooks_=Vm,nT.hooks=zm,nT.hook=function(e,t){zm(e,t)},nT.hookOnce=function(e,t){zm(e,[].concat(t).map((function(t){return function n(){return Wm(e,n),t.apply(void 0,arguments)}})))},nT.removeHook=Wm,!0!==Eh().VIDEOJS_NO_DYNAMIC_STYLE&&Dv()){var rT=ay(".vjs-styles-defaults");if(!rT){rT=hy("vjs-styles-defaults");var iT=ay("head");iT&&iT.insertBefore(rT,iT.firstChild),gy(rT,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}uy(1,nT),nT.VERSION=Fm,nT.options=Ww.prototype.options_,nT.getPlayers=function(){return Ww.players},nT.getPlayer=function(e){var t,n=Ww.players;if("string"==typeof e){var r=tT(e),i=n[r];if(i)return i;t=ay("#"+r)}else t=e;if(Rv(t)){var o=t,a=o.player,s=o.playerId;if(a||n[s])return a||n[s]}},nT.getAllPlayers=function(){return Object.keys(Ww.players).map((function(e){return Ww.players[e]})).filter(Boolean)},nT.players=Ww.players,nT.getComponent=tb.getComponent,nT.registerComponent=function(e,t){Fb.isTech(t)&&Jm.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),tb.registerComponent.call(tb,e,t)},nT.getTech=Fb.getTech,nT.registerTech=Fb.registerTech,nT.use=function(e,t){Vb[e]=Vb[e]||[],Vb[e].push(t)},Object.defineProperty(nT,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(nT.middleware,"TERMINATOR",{value:Wb,writeable:!1,enumerable:!0}),nT.browser=Pv,nT.TOUCH_ENABLED=Sv,nT.extend=function(e,t){void 0===t&&(t={});var n=function(){e.apply(this,arguments)},r={};for(var i in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),r=t):"function"==typeof t&&(n=t),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mh(e,t)}(n,e),e&&(n.super_=e),r)r.hasOwnProperty(i)&&(n.prototype[i]=r[i]);return n},nT.mergeOptions=Xy,nT.bind=Ry,nT.registerPlugin=eT.registerPlugin,nT.deregisterPlugin=eT.deregisterPlugin,nT.plugin=function(e,t){return Jm.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),eT.registerPlugin(e,t)},nT.getPlugins=eT.getPlugins,nT.getPlugin=eT.getPlugin,nT.getPluginVersion=eT.getPluginVersion,nT.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),nT.options.languages=Xy(nT.options.languages,((n={})[e]=t,n)),nT.options.languages[e]},nT.log=Jm,nT.createLogger=Ym,nT.createTimeRange=nT.createTimeRanges=ib,nT.formatTime=v_,nT.setFormatTime=function(e){m_=e},nT.resetFormatTime=function(){m_=g_},nT.parseUrl=Eb,nT.isCrossOrigin=xb,nT.EventTarget=Ny,nT.on=ky,nT.one=Ay,nT.off=Cy,nT.trigger=Ey,nT.xhr=Bh(),nT.TextTrack=Mb,nT.AudioTrack=Nb,nT.VideoTrack=Ub,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){nT[e]=function(){return Jm.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),dy[e].apply(null,arguments)}})),nT.computedStyle=ov,nT.dom=dy,nT.url=Ob,nT.defineLazyProperty=Lw,nT.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var oT=Hh,aT=function(e,t,n){return e&&n&&n.responseURL&&t!==n.responseURL?n.responseURL:t},sT=function(e){return nT.log.debug?nT.log.debug.bind(nT,"VHS:",e+" >"):function(){}},dT=1/30,cT=.1,lT=function(e,t){var n,r=[];if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&r.push([e.start(n),e.end(n)]);return nT.createTimeRanges(r)},uT=function(e,t){return lT(e,(function(e,n){return e-cT<=t&&n+cT>=t}))},pT=function(e,t){return lT(e,(function(e){return e-dT>=t}))},fT=function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},hT=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},gT=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},mT=function(e,t){var n=0;if(!e||!e.length)return n;for(var r=0;r<e.length;r++){var i=e.start(r),o=e.end(r);t>o||(n+=t>i&&t<=o?o-t:o-i)}return n},vT=nT.createTimeRange,yT=function(e,t){if(!t.preload)return t.duration;var n=0;return(t.parts||[]).forEach((function(e){n+=e.duration})),(t.preloadHints||[]).forEach((function(t){"PART"===t.type&&(n+=e.partTargetDuration)})),n},bT=function(e){return(e.segments||[]).reduce((function(e,t,n){return t.parts?t.parts.forEach((function(r,i){e.push({duration:r.duration,segmentIndex:n,partIndex:i,part:r,segment:t})})):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e}),[])},_T=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},wT=function(e){var t=e.preloadSegment;if(t){var n=t.parts,r=(t.preloadHints||[]).reduce((function(e,t){return e+("PART"===t.type?1:0)}),0);return r+(n&&n.length?n.length:0)}},TT=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var n=_T(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},IT=function(e,t,n){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var r=function(e,t){var n=0,r=t-e.mediaSequence,i=e.segments[r];if(i){if(void 0!==i.start)return{result:i.start,precise:!0};if(void 0!==i.end)return{result:i.end-i.duration,precise:!0}}for(;r--;){if(void 0!==(i=e.segments[r]).end)return{result:n+i.end,precise:!0};if(n+=yT(e,i),void 0!==i.start)return{result:n+i.start,precise:!0}}return{result:n,precise:!1}}(e,t);if(r.precise)return r.result;var i=function(e,t){for(var n,r=0,i=t-e.mediaSequence;i<e.segments.length;i++){if(void 0!==(n=e.segments[i]).start)return{result:n.start-r,precise:!0};if(r+=yT(e,n),void 0!==n.end)return{result:n.end-r,precise:!0}}return{result:-1,precise:!1}}(e,t);return i.precise?i.result:r.result+n},ST=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return Eh()[1/0]}return IT(e,t,n)},kT=function(e){var t=e.defaultDuration,n=e.durationList,r=e.startIndex,i=e.endIndex,o=0;if(r>i){var a=[i,r];r=a[0],i=a[1]}if(r<0){for(var s=r;s<Math.min(0,i);s++)o+=t;r=0}for(var d=r;d<i;d++)o+=n[d].duration;return o},CT=function(e,t,n,r){if(!e||!e.segments)return null;if(e.endList)return ST(e);if(null===t)return null;t=t||0;var i=IT(e,e.mediaSequence+e.segments.length,t);return n&&(i-=r="number"==typeof r?r:TT(null,e)),Math.max(0,i)},ET=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},AT=function(e){return e.excludeUntil&&e.excludeUntil===1/0},PT=function(e){var t=ET(e);return!e.disabled&&!t},xT=function(e,t){return t.attributes&&t.attributes[e]},OT=function(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!PT(e)&&(e.attributes.BANDWIDTH||0)<n})).length},DT=function(e,t){return!(!e&&!t||!e&&t||e&&!t||e!==t&&(!e.id||!t.id||e.id!==t.id)&&(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)&&(!e.uri||!t.uri||e.uri!==t.uri))},RT=function(e,t){var n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},r=!1;for(var i in n){for(var o in n[i])if(r=t(n[i][o]))break;if(r)break}return!!r},MT=function(e){if(!e||!e.playlists||!e.playlists.length)return RT(e,(function(e){return e.playlists&&e.playlists.length||e.uri}));for(var t=function(t){var n=e.playlists[t],r=n.attributes&&n.attributes.CODECS;return r&&r.split(",").every((function(e){return ug(e)}))||RT(e,(function(e){return DT(n,e)}))?"continue":{v:!1}},n=0;n<e.playlists.length;n++){var r=t(n);if("continue"!==r&&"object"==typeof r)return r.v}return!0},NT={liveEdgeDelay:TT,duration:ST,seekable:function(e,t,n){var r=t||0,i=CT(e,t,!0,n);return null===i?vT():vT(r,i)},getMediaInfoForTime:function(e){for(var t=e.playlist,n=e.currentTime,r=e.startingSegmentIndex,i=e.startingPartIndex,o=e.startTime,a=e.experimentalExactManifestTimings,s=n-o,d=bT(t),c=0,l=0;l<d.length;l++){var u=d[l];if(r===u.segmentIndex&&("number"!=typeof i||"number"!=typeof u.partIndex||i===u.partIndex)){c=l;break}}if(s<0){if(c>0)for(var p=c-1;p>=0;p--){var f=d[p];if(s+=f.duration,a){if(s<0)continue}else if(s+dT<=0)continue;return{partIndex:f.partIndex,segmentIndex:f.segmentIndex,startTime:o-kT({defaultDuration:t.targetDuration,durationList:d,startIndex:c,endIndex:p})}}return{partIndex:d[0]&&d[0].partIndex||null,segmentIndex:d[0]&&d[0].segmentIndex||0,startTime:n}}if(c<0){for(var h=c;h<0;h++)if((s-=t.targetDuration)<0)return{partIndex:d[0]&&d[0].partIndex||null,segmentIndex:d[0]&&d[0].segmentIndex||0,startTime:n};c=0}for(var g=c;g<d.length;g++){var m=d[g];if(s-=m.duration,a){if(s>0)continue}else if(s-dT>=0)continue;return{partIndex:m.partIndex,segmentIndex:m.segmentIndex,startTime:o+kT({defaultDuration:t.targetDuration,durationList:d,startIndex:c,endIndex:g})}}return{segmentIndex:d[d.length-1].segmentIndex,partIndex:d[d.length-1].partIndex,startTime:n}},isEnabled:PT,isDisabled:function(e){return e.disabled},isBlacklisted:ET,isIncompatible:AT,playlistEnd:CT,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:xT,estimateSegmentRequestTime:function(e,t,n,r){return void 0===r&&(r=0),xT("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*r)/t:NaN},isLowestEnabledRendition:OT,isAudioOnly:MT,playlistMatch:DT,segmentDurationWithParts:yT},UT=nT.log,LT=function(e,t){return e+"-"+t},jT=function(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach((function(n){if(e.mediaGroups[n])for(var r in e.mediaGroups[n])for(var i in e.mediaGroups[n][r]){var o=e.mediaGroups[n][r][i];t(o,n,r,i)}}))},BT=function(e){var t=e.playlist,n=e.uri,r=e.id;t.id=r,t.playlistErrors_=0,n&&(t.uri=n),t.attributes=t.attributes||{}},qT=function(e,t){e.uri=t;for(var n=0;n<e.playlists.length;n++)if(!e.playlists[n].uri){var r="placeholder-uri-"+n;e.playlists[n].uri=r}var i=MT(e);jT(e,(function(t,n,r,o){var a="placeholder-uri-"+n+"-"+r+"-"+o;if(!t.playlists||!t.playlists.length){if(i&&"AUDIO"===n&&!t.uri)for(var s=0;s<e.playlists.length;s++){var d=e.playlists[s];if(d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===r)return}t.playlists=[xh({},t)]}t.playlists.forEach((function(t,n){var r=LT(n,a);t.uri?t.resolvedUri=t.resolvedUri||oT(e.uri,t.uri):(t.uri=0===n?a:r,t.resolvedUri=t.uri),t.id=t.id||r,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];BT({playlist:n,id:LT(t,n.uri)}),n.resolvedUri=oT(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||UT.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),function(e){jT(e,(function(t){t.uri&&(t.resolvedUri=oT(e.uri,t.uri))}))}(e)},FT=nT.mergeOptions,VT=nT.EventTarget,zT=function(e,t){if(!e)return t;var n=FT(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(var r=0;r<t.parts.length;r++)e.parts&&e.parts[r]&&(n.parts[r]=FT(e.parts[r],t.parts[r]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},WT=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=oT(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=oT(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=oT(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=oT(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach((function(e){e.resolvedUri||(e.resolvedUri=oT(t,e.uri))})),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach((function(e){e.resolvedUri||(e.resolvedUri=oT(t,e.uri))}))},HT=function(e){var t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(var r=0;r<n.preloadHints.length;r++)if("MAP"===n.preloadHints[r].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},ZT=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},$T=function(e,t,n){void 0===n&&(n=ZT);var r=FT(e,{}),i=r.playlists[t.id];if(!i)return null;if(n(i,t))return null;t.segments=HT(t);var o=FT(i,t);if(o.preloadSegment&&!t.preloadSegment&&delete o.preloadSegment,i.segments){if(t.skip){t.segments=t.segments||[];for(var a=0;a<t.skip.skippedSegments;a++)t.segments.unshift({skipped:!0})}o.segments=function(e,t,n){var r=e.slice(),i=t.slice();n=n||0;for(var o,a=[],s=0;s<i.length;s++){var d=r[s+n],c=i[s];d?(o=d.map||o,a.push(zT(d,c))):(o&&!c.map&&(c.map=o),a.push(c))}return a}(i.segments,t.segments,t.mediaSequence-i.mediaSequence)}o.segments.forEach((function(e){WT(e,o.resolvedUri)}));for(var s=0;s<r.playlists.length;s++)r.playlists[s].id===t.id&&(r.playlists[s]=o);return r.playlists[t.id]=o,r.playlists[t.uri]=o,jT(e,(function(e,n,r,i){if(e.playlists)for(var a=0;a<e.playlists.length;a++)t.id===e.playlists[a].id&&(e.playlists[a]=o)})),r},GT=function(e,t){var n=e.segments||[],r=n[n.length-1],i=r&&r.parts&&r.parts[r.parts.length-1],o=i&&i.duration||r&&r.duration;return t&&o?1e3*o:500*(e.partTargetDuration||e.targetDuration||10)},KT=function(e){function t(t,n,r){var i;if(void 0===r&&(r={}),i=e.call(this)||this,!t)throw new Error("A non-empty playlist URL or object is required");i.logger_=sT("PlaylistLoader");var o=r,a=o.withCredentials,s=void 0!==a&&a,d=o.handleManifestRedirects,c=void 0!==d&&d;i.src=t,i.vhs_=n,i.withCredentials=s,i.handleManifestRedirects=c;var l=n.options_;return i.customTagParsers=l&&l.customTagParsers||[],i.customTagMappers=l&&l.customTagMappers||[],i.experimentalLLHLS=l&&l.experimentalLLHLS||!1,nT.browser.IE_VERSION&&(i.experimentalLLHLS=!1),i.state="HAVE_NOTHING",i.handleMediaupdatetimeout_=i.handleMediaupdatetimeout_.bind(Rh(i)),i.on("mediaupdatetimeout",i.handleMediaupdatetimeout_),i}Nh(t,e);var n=t.prototype;return n.handleMediaupdatetimeout_=function(){var e=this;if("HAVE_METADATA"===this.state){var t=this.media(),n=oT(this.master.uri,t.uri);this.experimentalLLHLS&&(n=function(e,t){if(t.endList||!t.serverControl)return e;var n={};if(t.serverControl.canBlockReload){var r=t.preloadSegment,i=t.mediaSequence+t.segments.length;if(r){var o=r.parts||[],a=wT(t)-1;a>-1&&a!==o.length-1&&(n._HLS_part=a),(a>-1||o.length)&&i--}n._HLS_msn=i}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var s=new(Eh().URL)(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(e){n.hasOwnProperty(e)&&s.searchParams.set(e,n[e])})),e=s.toString()}return e}(n,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials},(function(t,n){if(e.request)return t?e.playlistRequestError(e.request,e.media(),"HAVE_METADATA"):void e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}))}},n.playlistRequestError=function(e,t,n){var r=t.uri,i=t.id;this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[i],status:e.status,message:"HLS playlist request error at URL: "+r+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},n.parseManifest_=function(e){var t=this,n=e.url;return function(e){var t=e.onwarn,n=e.oninfo,r=e.manifestString,i=e.customTagParsers,o=void 0===i?[]:i,a=e.customTagMappers,s=void 0===a?[]:a,d=e.experimentalLLHLS,c=new og;t&&c.on("warn",t),n&&c.on("info",n),o.forEach((function(e){return c.addParser(e)})),s.forEach((function(e){return c.addTagMapper(e)})),c.push(r),c.end();var l=c.manifest;if(d||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(e){l.hasOwnProperty(e)&&delete l[e]})),l.segments&&l.segments.forEach((function(e){["parts","preloadHints"].forEach((function(t){e.hasOwnProperty(t)&&delete e[t]}))}))),!l.targetDuration){var u=10;l.segments&&l.segments.length&&(u=l.segments.reduce((function(e,t){return Math.max(e,t.duration)}),0)),t&&t("manifest has no targetDuration defaulting to "+u),l.targetDuration=u}var p=_T(l);if(p.length&&!l.partTargetDuration){var f=p.reduce((function(e,t){return Math.max(e,t.duration)}),0);t&&(t("manifest has no partTargetDuration defaulting to "+f),UT.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),l.partTargetDuration=f}return l}({onwarn:function(e){var r=e.message;return t.logger_("m3u8-parser warn for "+n+": "+r)},oninfo:function(e){var r=e.message;return t.logger_("m3u8-parser info for "+n+": "+r)},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},n.haveMetadata=function(e){var t=e.playlistString,n=e.playlistObject,r=e.url,i=e.id;this.request=null,this.state="HAVE_METADATA";var o=n||this.parseManifest_({url:r,manifestString:t});o.lastRequest=Date.now(),BT({playlist:o,uri:r,id:i});var a=$T(this.master,o);this.targetDuration=o.partTargetDuration||o.targetDuration,this.pendingMedia_=null,a?(this.master=a,this.media_=this.master.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(GT(this.media(),!!a)),this.trigger("loadedplaylist")},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),Eh().clearTimeout(this.mediaUpdateTimeout),Eh().clearTimeout(this.finalRenditionTimeout),this.off()},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e,t){var n=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(Eh().clearTimeout(this.finalRenditionTimeout),t){var r=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=Eh().setTimeout(this.media.bind(this,e,!1),r)}else{var i=this.state,o=!this.media_||e.id!==this.media_.id,a=this.master.playlists[e.id];if(a&&a.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(o&&(this.trigger("mediachanging"),"HAVE_MASTER"===i?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(GT(e,!0)),o){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(function(t,r){if(n.request){if(e.lastRequest=Date.now(),e.resolvedUri=aT(n.handleManifestRedirects,e.resolvedUri,r),t)return n.playlistRequestError(n.request,e,i);n.haveMetadata({playlistString:r.responseText,url:e.uri,id:e.id}),"HAVE_MASTER"===i?n.trigger("loadedmetadata"):n.trigger("mediachange")}}))}}},n.pause=function(){this.mediaUpdateTimeout&&(Eh().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},n.load=function(e){var t=this;this.mediaUpdateTimeout&&(Eh().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var n=this.media();if(e){var r=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=Eh().setTimeout((function(){t.mediaUpdateTimeout=null,t.load()}),r)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},n.updateMediaUpdateTimeout_=function(e){var t=this;this.mediaUpdateTimeout&&(Eh().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=Eh().setTimeout((function(){t.mediaUpdateTimeout=null,t.trigger("mediaupdatetimeout"),t.updateMediaUpdateTimeout_(e)}),e))},n.start=function(){var e=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=Eh().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((function(){e.setupInitialPlaylist(e.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=aT(e.handleManifestRedirects,e.src,n);var r=e.parseManifest_({manifestString:n.responseText,url:e.src});e.setupInitialPlaylist(r)}}))},n.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},n.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,qT(this.master,this.srcUri()),e.playlists.forEach((function(e){e.segments=HT(e),e.segments.forEach((function(t){WT(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t=this.srcUri()||Eh().location.href;this.master=function(e,t){var n=LT(0,t),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Eh().location.href,resolvedUri:Eh().location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return r.playlists[n]=r.playlists[0],r.playlists[t]=r.playlists[0],r}(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(VT),XT=nT.xhr,JT=nT.mergeOptions,YT=function(e,t,n,r){var i="arraybuffer"===e.responseType?e.response:e.responseText;!t&&i&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=i.byteLength||i.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(i||e.responseText)))),r(t,e)},QT=function(){var e=function e(t,n){t=JT({timeout:45e3},t);var r=e.beforeRequest||nT.Vhs.xhr.beforeRequest;if(r&&"function"==typeof r){var i=r(t);i&&(t=i)}var o=(!0===nT.Vhs.xhr.original?XT:nT.Vhs.xhr)(t,(function(e,t){return YT(o,e,t,n)})),a=o.abort;return o.abort=function(){return o.aborted=!0,a.apply(o,arguments)},o.uri=t.uri,o.requestTime=Date.now(),o};return e.original=!0,e},eI=function(e){var t,n={};return e.byterange&&(n.Range="bytes="+(t=e.byterange).offset+"-"+("bigint"==typeof t.offset||"bigint"==typeof t.length?Eh().BigInt(t.offset)+Eh().BigInt(t.length)-Eh().BigInt(1):t.offset+t.length-1)),n},tI=function(e,t){return e.start(t)+"-"+e.end(t)},nI=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},rI=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},iI=function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];bg(r)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r})),t},oI=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},aI=function(e){return e.resolvedUri},sI=function(e){for(var t=Array.prototype.slice.call(e),n=16,r="",i=0;i<t.length/n;i++)r+=t.slice(i*n,i*n+n).map(nI).join("")+" "+t.slice(i*n,i*n+n).map(rI).join("")+"\n";return r},dI=Object.freeze({__proto__:null,createTransferableMessage:iI,initSegmentId:oI,segmentKeyId:aI,hexDump:sI,tagDump:function(e){var t=e.bytes;return sI(t)},textRanges:function(e){var t,n="";for(t=0;t<e.length;t++)n+=tI(e,t)+" ";return n}}),cI=function e(t){var n=t.programTime,r=t.playlist,i=t.retryCount,o=void 0===i?2:i,a=t.seekTo,s=t.pauseAfterSeek,d=void 0===s||s,c=t.tech,l=t.callback;if(!l)throw new Error("seekToProgramTime: callback must be provided");if(void 0===n||!r||!a)return l({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!r.endList&&!c.hasStarted_)return l({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(r))return l({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri});var u=function(e,t){var n;try{n=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var r=t.segments[0];if(n<r.dateTimeObject)return null;for(var i=0;i<t.segments.length-1&&(r=t.segments[i],!(n<t.segments[i+1].dateTimeObject));i++);var o,a=t.segments[t.segments.length-1],s=a.dateTimeObject,d=a.videoTimingInfo?(o=a.videoTimingInfo).transmuxedPresentationEnd-o.transmuxedPresentationStart-o.transmuxerPrependedSeconds:a.duration+.25*a.duration;return n>new Date(s.getTime()+1e3*d)?null:(n>s&&(r=a),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:NT.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})}(n,r);if(!u)return l({message:n+" was not found in the stream"});var p=u.segment,f=function(e,t){var n,r;try{n=new Date(e),r=new Date(t)}catch(e){}var i=n.getTime();return(r.getTime()-i)/1e3}(p.dateTimeObject,n);if("estimate"===u.type)return 0===o?l({message:n+" is not buffered yet. Try again"}):(a(u.estimatedStart+f),void c.one("seeked",(function(){e({programTime:n,playlist:r,retryCount:o-1,seekTo:a,pauseAfterSeek:d,tech:c,callback:l})})));var h=p.start+f;c.one("seeked",(function(){return l(null,c.currentTime())})),d&&c.pause(),a(h)},lI=function(e,t){if(4===e.readyState)return t()},uI=nT.EventTarget,pI=nT.mergeOptions,fI=function(e,t){if(!ZT(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var n=0;n<e.segments.length;n++){var r=e.segments[n],i=t.segments[n];if(r.uri!==i.uri)return!1;if(r.byterange||i.byterange){var o=r.byterange,a=i.byterange;if(o&&!a||!o&&a)return!1;if(o.offset!==a.offset||o.length!==a.length)return!1}}return!0},hI=function(e,t){return(Boolean(!e.map&&!t.map)||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},gI=function(e,t){var n={};for(var r in e){var i=e[r].sidx;if(i){var o=zg(i);if(!t[o])break;var a=t[o].sidxInfo;hI(a,i)&&(n[o]=t[o])}}return n},mI=function(e){function t(t,n,r,i){var o;void 0===r&&(r={}),(o=e.call(this)||this).masterPlaylistLoader_=i||Rh(o),i||(o.isMaster_=!0);var a=r,s=a.withCredentials,d=void 0!==s&&s,c=a.handleManifestRedirects,l=void 0!==c&&c;if(o.vhs_=n,o.withCredentials=d,o.handleManifestRedirects=l,!t)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",(function(){o.refreshXml_()})),o.on("mediaupdatetimeout",(function(){o.refreshMedia_(o.media().id)})),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=sT("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=t,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=t,o}Nh(t,e);var n=t.prototype;return n.requestErrored_=function(e,t,n){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,n&&(this.state=n),this.trigger("error"),!0):void 0)},n.addSidxSegments_=function(e,t,n){var r=this,i=e.sidx&&zg(e.sidx);if(e.sidx&&i&&!this.masterPlaylistLoader_.sidxMapping_[i]){var o=aT(this.handleManifestRedirects,e.sidx.resolvedUri),a=function(o,a){if(!r.requestErrored_(o,a,t)){var s,d=r.masterPlaylistLoader_.sidxMapping_;try{s=vm()(_g(a.response).subarray(8))}catch(e){return void r.requestErrored_(e,a,t)}return d[i]={sidxInfo:e.sidx,sidx:s},jg(e,s,e.sidx.resolvedUri),n(!0)}};this.request=function(e,t,n){var r,i=[],o=!1,a=function(e,t,r,i){return t.abort(),o=!0,n(e,t,r,i)},s=function(e,t){if(!o){if(e)return a(e,t,"",i);var n=t.responseText.substring(i&&i.byteLength||0,t.responseText.length);if(i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter((function(e){return e&&(e.byteLength||e.length)&&"string"!=typeof e})),t.length<=1)return _g(t[0]);var r=t.reduce((function(e,t,n){return e+(t.byteLength||t.length)}),0),i=new Uint8Array(r),o=0;return t.forEach((function(e){e=_g(e),i.set(e,o),o+=e.byteLength})),i}(i,Sg(n,!0)),r=r||bm(i),i.length<10||r&&i.length<r+2)return lI(t,(function(){return a(e,t,"",i)}));var s=Bm(i);return"ts"===s&&i.length<188||!s&&i.length<376?lI(t,(function(){return a(e,t,"",i)})):a(null,t,s,i)}},d={uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function(t){return t.total,t.loaded,YT(e,null,{statusCode:e.status},s)}))}},c=t(d,(function(e,t){return YT(c,e,t,s)}));return c}(o,this.vhs_.xhr,(function(t,n,i,s){if(t)return a(t,n);if(!i||"mp4"!==i)return a({status:n.status,message:"Unsupported "+(i||"unknown")+" container type for sidx segment at URL: "+o,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},n);var d=e.sidx.byterange,c=d.offset,l=d.length;if(s.length>=l+c)return a(t,{response:s.subarray(c,c+l),status:n.status,uri:n.uri});r.request=r.vhs_.xhr({uri:o,responseType:"arraybuffer",headers:eI({byterange:e.sidx.byterange})},a)}))}else this.mediaRequest_=Eh().setTimeout((function(){return n(!1)}),0)},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Eh().clearTimeout(this.minimumUpdatePeriodTimeout_),Eh().clearTimeout(this.mediaRequest_),Eh().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},n.hasPendingRequest=function(){return this.request||this.mediaRequest_},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof e){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var r=!this.media_||e.id!==this.media_.id;if(r&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));r&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,(function(r){t.haveMetadata({startingState:n,playlist:e})})))},n.haveMetadata=function(e){var t=e.startingState,n=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,this.mediaRequest_=null,this.refreshMedia_(n.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},n.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Eh().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(Eh().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},n.load=function(e){var t=this;Eh().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var n=this.media();if(e){var r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Eh().setTimeout((function(){return t.load()}),r)}else this.started?n&&!n.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},n.start=function(){var e=this;this.started=!0,this.isMaster_?this.requestMaster_((function(t,n){e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[0])})):this.mediaRequest_=Eh().setTimeout((function(){return e.haveMaster_()}),0)},n.requestMaster_=function(e){var t=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(function(n,r){if(!t.requestErrored_(n,r)){var i=r.responseText!==t.masterPlaylistLoader_.masterXml_;return t.masterPlaylistLoader_.masterXml_=r.responseText,r.responseHeaders&&r.responseHeaders.date?t.masterLoaded_=Date.parse(r.responseHeaders.date):t.masterLoaded_=Date.now(),t.masterPlaylistLoader_.srcUrl=aT(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,r),i?(t.handleMaster_(),void t.syncClientServerClock_((function(){return e(r,i)}))):e(r,i)}"HAVE_NOTHING"===t.state&&(t.started=!1)}))},n.syncClientServerClock_=function(e){var t,n=this,r=(t=this.masterPlaylistLoader_.masterXml_,function(e){var t=am(e,"UTCTiming")[0];if(!t)return null;var n=lm(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return n}(gm(t)));return null===r?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===r.method?(this.masterPlaylistLoader_.clientOffset_=r.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:oT(this.masterPlaylistLoader_.srcUrl,r.value),method:r.method,withCredentials:this.withCredentials},(function(t,i){if(n.request){if(t)return n.masterPlaylistLoader_.clientOffset_=n.masterLoaded_-Date.now(),e();var o;o="HEAD"===r.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):n.masterLoaded_:Date.parse(i.responseText),n.masterPlaylistLoader_.clientOffset_=o-Date.now(),e()}})))},n.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},n.handleMaster_=function(){this.mediaRequest_=null;var e,t,n,r=this.masterPlaylistLoader_.master,i=(n=function(e,t){void 0===t&&(t={});var n=function(e,t){void 0===t&&(t={});var n=t,r=n.manifestUri,i=void 0===r?"":r,o=n.NOW,a=void 0===o?Date.now():o,s=n.clientOffset,d=void 0===s?0:s,c=am(e,"Period");if(!c.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var l=am(e,"Location"),u=lm(e),p=pm([i],am(e,"BaseURL"));u.type=u.type||"static",u.sourceDuration=u.mediaPresentationDuration||0,u.NOW=a,u.clientOffset=d,l.length&&(u.locations=l.map(sm));var f=[];return c.forEach((function(e,t){var n=lm(e),r=f[t-1];n.start=function(e){var t=e.attributes,n=e.priorPeriodAttributes,r=e.mpdType;return"number"==typeof t.start?t.start:n&&"number"==typeof n.start&&"number"==typeof n.duration?n.start+n.duration:n||"static"!==r?null:0}({attributes:n,priorPeriodAttributes:r?r.attributes:null,mpdType:u.type}),f.push({node:e,attributes:n})})),{locations:u.locations,representationInfo:xg(f.map(hm(u,p)))}}(gm(e),t),r=n.representationInfo.map(om);return Yg({dashPlaylists:r,locations:n.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest})}((e={masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:r}).masterXml,{manifestUri:t=e.srcUrl,clientOffset:e.clientOffset,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest}),qT(n,t),n);r&&(i=function(e,t,n){for(var r=!0,i=pI(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),o=0;o<t.playlists.length;o++){var a=t.playlists[o];if(a.sidx){var s=zg(a.sidx);n&&n[s]&&n[s].sidx&&jg(a,n[s].sidx,a.sidx.resolvedUri)}var d=$T(i,a,fI);d&&(i=d,r=!1)}return jT(t,(function(e,t,n,o){if(e.playlists&&e.playlists.length){var a=e.playlists[0].id,s=$T(i,e.playlists[0],fI);s&&((i=s).mediaGroups[t][n][o].playlists[0]=i.playlists[a],r=!1)}})),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(r=!1),r?null:i}(r,i,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=i||r;var o=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return o&&o!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=o),(!r||i&&i.minimumUpdatePeriod!==r.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(i)},n.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(Eh().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var t=e.master&&e.master.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_("found invalid minimumUpdatePeriod of "+t+", not setting a timeout"):this.createMUPTimeout_(t)},n.createMUPTimeout_=function(e){var t=this.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=Eh().setTimeout((function(){t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)}),e)},n.refreshXml_=function(){var e=this;this.requestMaster_((function(t,n){var r,i,o;n&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=(r=e.masterPlaylistLoader_.master,i=e.masterPlaylistLoader_.sidxMapping_,o=gI(r.playlists,i),jT(r,(function(e,t,n,r){if(e.playlists&&e.playlists.length){var a=e.playlists;o=pI(o,gI(a,i))}})),o),e.addSidxSegments_(e.media(),e.state,(function(t){e.refreshMedia_(e.media().id)})))}))},n.refreshMedia_=function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var n=this.masterPlaylistLoader_.master.playlists,r=!this.media_||this.media_!==n[e];r?this.media_=n[e]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function e(){t.media().endList||(t.mediaUpdateTimeout=Eh().setTimeout((function(){t.trigger("mediaupdatetimeout"),e()}),GT(t.media(),Boolean(r))))}(),this.trigger("loadedplaylist")},t}(uI),vI={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},yI=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},bI=function(e){return function(){var t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(n){var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}}(e),n=yI(new Worker(t));n.objURL=t;var r=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),r.call(this)},n}},_I=function(e){return"var browserWorkerPolyFill = "+yI.toString()+";\nbrowserWorkerPolyFill(self);\n"+e},wI=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},TI=_I(wI((function(){var e=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var r;return!!e[t]&&(r=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(r,1),r>-1)},this.trigger=function(t){var n,r,i,o;if(n=e[t])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(o=[],r=arguments.length,r=1;r<arguments.length;++r)o.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,o)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,n,r,i,o,a,s,d,c,l,u,p,f,h,g,m,v,y,b,_,w,T,I,S,k,C,E,A,P,x,O,D,R,M,N,U,L,j,B,q,F=e,V=Math.pow(2,32),z={getUint64:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(t=n.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:n.getUint32(0)*V+n.getUint32(4)},MAX_UINT32:V},W=z.MAX_UINT32;!function(){var e;if(T={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in T)T.hasOwnProperty(e)&&(T[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);I=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),k=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),S=new Uint8Array([0,0,0,1]),C=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),E=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),A={video:C,audio:E},O=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),x=new Uint8Array([0,0,0,0,0,0,0,0]),D=new Uint8Array([0,0,0,0,0,0,0,0]),R=D,M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N=D,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,n,r=[],i=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);for(t=r.length;t--;)i+=r[t].byteLength;for(n=new Uint8Array(i+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,i=8;t<r.length;t++)n.set(r[t],i),i+=r[t].byteLength;return n},n=function(){return t(T.dinf,t(T.dref,O))},r=function(e){return t(T.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},g=function(e){return t(T.hdlr,A[e])},h=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(n[12]=e.samplerate>>>24&255,n[13]=e.samplerate>>>16&255,n[14]=e.samplerate>>>8&255,n[15]=255&e.samplerate),t(T.mdhd,n)},f=function(e){return t(T.mdia,h(e),g(e.type),a(e))},o=function(e){return t(T.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},a=function(e){return t(T.minf,"video"===e.type?t(T.vmhd,P):t(T.smhd,x),n(),v(e))},s=function(e,n){for(var r=[],i=n.length;i--;)r[i]=b(n[i]);return t.apply(null,[T.moof,o(e)].concat(r))},d=function(e){for(var n=e.length,r=[];n--;)r[n]=u(e[n]);return t.apply(null,[T.moov,l(4294967295)].concat(r).concat(c(e)))},c=function(e){for(var n=e.length,r=[];n--;)r[n]=_(e[n]);return t.apply(null,[T.mvex].concat(r))},l=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(T.mvhd,n)},m=function(e){var n,r,i=e.samples||[],o=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,o[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t(T.sdtp,o)},v=function(e){return t(T.stbl,y(e),t(T.stts,N),t(T.stsc,R),t(T.stsz,M),t(T.stco,D))},y=function(e){return t(T.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?U(e):L(e))},U=function(e){var n,r,i=e.sps||[],o=e.pps||[],a=[],s=[];for(n=0;n<i.length;n++)a.push((65280&i[n].byteLength)>>>8),a.push(255&i[n].byteLength),a=a.concat(Array.prototype.slice.call(i[n]));for(n=0;n<o.length;n++)s.push((65280&o[n].byteLength)>>>8),s.push(255&o[n].byteLength),s=s.concat(Array.prototype.slice.call(o[n]));if(r=[T.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(T.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length],a,[o.length],s))),t(T.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var d=e.sarRatio[0],c=e.sarRatio[1];r.push(t(T.pasp,new Uint8Array([(4278190080&d)>>24,(16711680&d)>>16,(65280&d)>>8,255&d,(4278190080&c)>>24,(16711680&c)>>16,(65280&c)>>8,255&c])))}return t.apply(null,r)},L=function(e){return t(T.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),r(e))},p=function(e){var n=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(T.tkhd,n)},b=function(e){var n,r,i,o,a,s;return n=t(T.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(e.baseMediaDecodeTime/W),s=Math.floor(e.baseMediaDecodeTime%W),r=t(T.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),"audio"===e.type?(i=w(e,92),t(T.traf,n,r,i)):(o=m(e),i=w(e,o.length+92),t(T.traf,n,r,i,o))},u=function(e){return e.duration=e.duration||4294967295,t(T.trak,p(e),f(e))},_=function(e){var n=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(n[n.length-1]=0),t(T.trex,n)},q=function(e,t){var n=0,r=0,i=0,o=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(o=8)),[0,0,n|r|i|o,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},B=function(e,n){var r,i,o,a,s,d;for(n+=20+16*(a=e.samples||[]).length,o=q(a,n),(i=new Uint8Array(o.length+16*a.length)).set(o),r=o.length,d=0;d<a.length;d++)s=a[d],i[r++]=(4278190080&s.duration)>>>24,i[r++]=(16711680&s.duration)>>>16,i[r++]=(65280&s.duration)>>>8,i[r++]=255&s.duration,i[r++]=(4278190080&s.size)>>>24,i[r++]=(16711680&s.size)>>>16,i[r++]=(65280&s.size)>>>8,i[r++]=255&s.size,i[r++]=s.flags.isLeading<<2|s.flags.dependsOn,i[r++]=s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,i[r++]=61440&s.flags.degradationPriority,i[r++]=15&s.flags.degradationPriority,i[r++]=(4278190080&s.compositionTimeOffset)>>>24,i[r++]=(16711680&s.compositionTimeOffset)>>>16,i[r++]=(65280&s.compositionTimeOffset)>>>8,i[r++]=255&s.compositionTimeOffset;return t(T.trun,i)},j=function(e,n){var r,i,o,a,s,d;for(n+=20+8*(a=e.samples||[]).length,o=q(a,n),(r=new Uint8Array(o.length+8*a.length)).set(o),i=o.length,d=0;d<a.length;d++)s=a[d],r[i++]=(4278190080&s.duration)>>>24,r[i++]=(16711680&s.duration)>>>16,r[i++]=(65280&s.duration)>>>8,r[i++]=255&s.duration,r[i++]=(4278190080&s.size)>>>24,r[i++]=(16711680&s.size)>>>16,r[i++]=(65280&s.size)>>>8,r[i++]=255&s.size;return t(T.trun,r)},w=function(e,t){return"audio"===e.type?j(e,t):B(e,t)},i=function(){return t(T.ftyp,I,S,I,k)};var H,Z,$,G,K,X,J,Y,Q=function(e){return t(T.mdat,e)},ee=s,te=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},ne=[33,16,5,32,164,27],re=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ie=function(e){for(var t=[];e--;)t.push(0);return t},oe=9e4;X=function(e,t){return Z(K(e,t))},J=function(e,t){return $(G(e),t)},Y=function(e,t,n){return G(n?e:e-t)};var ae=oe,se=Z=function(e){return e*oe},de=($=function(e,t){return e*t},G=function(e){return e/oe}),ce=(K=function(e,t){return e/t},X),le=J,ue=Y,pe=function(e,t,n,r){var i,o,a,s,d,c=0,l=0,u=0;if(t.length&&(i=ce(e.baseMediaDecodeTime,e.samplerate),o=Math.ceil(ae/(e.samplerate/1024)),n&&r&&(c=i-Math.max(n,r),u=(l=Math.floor(c/o))*o),!(l<1||u>45e3))){for((a=function(){if(!H){var e={96e3:[ne,[227,64],ie(154),[56]],88200:[ne,[231],ie(170),[56]],64e3:[ne,[248,192],ie(240),[56]],48e3:[ne,[255,192],ie(268),[55,148,128],ie(54),[112]],44100:[ne,[255,192],ie(268),[55,163,128],ie(84),[112]],32e3:[ne,[255,192],ie(268),[55,234],ie(226),[112]],24e3:[ne,[255,192],ie(268),[55,255,128],ie(268),[111,112],ie(126),[224]],16e3:[ne,[255,192],ie(268),[55,255,128],ie(268),[111,255],ie(269),[223,108],ie(195),[1,192]],12e3:[re,ie(268),[3,127,248],ie(268),[6,255,240],ie(268),[13,255,224],ie(268),[27,253,128],ie(259),[56]],11025:[re,ie(268),[3,127,248],ie(268),[6,255,240],ie(268),[13,255,224],ie(268),[27,255,192],ie(268),[55,175,128],ie(108),[112]],8e3:[re,ie(268),[3,121,16],ie(47),[7]]};t=e,H=Object.keys(t).reduce((function(e,n){return e[n]=new Uint8Array(t[n].reduce((function(e,t){return e.concat(t)}),[])),e}),{})}var t;return H}()[e.samplerate])||(a=t[0].data),s=0;s<l;s++)d=t[0],t.splice(0,0,{data:a,dts:d.dts-o,pts:d.pts-o});return e.baseMediaDecodeTime-=Math.floor(le(u,e.samplerate)),u}},fe=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},he=function(e,t){var n,r=e.minSegmentDts;return t||(r-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=r,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/9e4,n=Math.floor(n)),n},ge=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},me=function e(t){t=t||{},e.prototype.init.call(this),this.parse708captions_="boolean"!=typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Ce(0,0),new Ce(0,1),new Ce(1,0),new Ce(1,1)],this.parse708captions_&&(this.cc708Stream_=new we({captionServices:t.captionServices})),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(me.prototype=new F).push=function(e){var t,n,r;if("sei_rbsp"===e.nalUnitType&&(t=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},r=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)r+=255,t++;for(r+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!n.payload&&4===r){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=r,n.payloadSize=i,n.payload=e.subarray(t,t+i);break}n.payload=void 0}t+=i,r=0,i=0}return n}(e.escapedRBSP)).payload&&4===t.payloadType&&(n=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)}(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));r=function(e,t){var n,r,i,o,a=[];if(!(64&t[0]))return a;for(r=31&t[0],n=0;n<r;n++)o={type:3&t[2+(i=3*n)],pts:e},4&t[i+2]&&(o.ccData=t[i+3]<<8|t[i+4],a.push(o));return a}(e.pts,n),this.captionPackets_=this.captionPackets_.concat(r),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},me.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},me.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},me.prototype.flush=function(){return this.flushStream("flush")},me.prototype.partialFlush=function(){return this.flushStream("partialFlush")},me.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},me.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},me.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},me.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},me.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},me.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var ve={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},ye=function(e){return 32<=e&&e<=127||160<=e&&e<=255},be=function(e){this.windowNum=e,this.reset()};be.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},be.prototype.getText=function(){return this.rows.join("\n")},be.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},be.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},be.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},be.prototype.addText=function(e){this.rows[this.rowIdx]+=e},be.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var _e=function(e,t,n){this.serviceNum=e,this.text="",this.currentWindow=new be(-1),this.windows=[],this.stream=n,"string"==typeof t&&this.createTextDecoder(t)};_e.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new be(n),"function"==typeof t&&(this.windows[n].beforeRowOverflow=t)},_e.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},_e.prototype.createTextDecoder=function(e){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var we=function e(t){t=t||{},e.prototype.init.call(this);var n,r=this,i=t.captionServices||{},o={};Object.keys(i).forEach((function(e){n=i[e],/^SERVICE/.test(e)&&(o[e]=n.encoding)})),this.serviceEncodings=o,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(r.new708Packet(),r.add708Bytes(e)):(null===r.current708Packet&&r.new708Packet(),r.add708Bytes(e))}};we.prototype=new F,we.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},we.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,r=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(r)},we.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,n=null,r=null,i=0,o=t[i++];for(e.seq=o>>6,e.sizeCode=63&o;i<t.length;i++)r=31&(o=t[i++]),7==(n=o>>5)&&r>0&&(n=o=t[i++]),this.pushServiceBlock(n,i,r),r>0&&(i+=r-1)},we.prototype.pushServiceBlock=function(e,t,n){var r,i=t,o=this.current708Packet.data,a=this.services[e];for(a||(a=this.initService(e,i));i<t+n&&i<o.length;i++)r=o[i],ye(r)?i=this.handleText(i,a):24===r?i=this.multiByteCharacter(i,a):16===r?i=this.extendedCommands(i,a):128<=r&&r<=135?i=this.setCurrentWindow(i,a):152<=r&&r<=159?i=this.defineWindow(i,a):136===r?i=this.clearWindows(i,a):140===r?i=this.deleteWindows(i,a):137===r?i=this.displayWindows(i,a):138===r?i=this.hideWindows(i,a):139===r?i=this.toggleWindows(i,a):151===r?i=this.setWindowAttributes(i,a):144===r?i=this.setPenAttributes(i,a):145===r?i=this.setPenColor(i,a):146===r?i=this.setPenLocation(i,a):143===r?a=this.reset(i,a):8===r?a.currentWindow.backspace():12===r?a.currentWindow.clearText():13===r?a.currentWindow.pendingNewLine=!0:14===r?a.currentWindow.clearText():141===r&&i++},we.prototype.extendedCommands=function(e,t){var n=this.current708Packet.data[++e];return ye(n)&&(e=this.handleText(e,t,{isExtended:!0})),e},we.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},we.prototype.initService=function(e,t){var n,r,i=this;return(n="SERVICE"+e)in this.serviceEncodings&&(r=this.serviceEncodings[n]),this.services[e]=new _e(e,r,i),this.services[e].init(this.getPts(t),(function(t){i.flushDisplayed(t,i.services[e])})),this.services[e]},we.prototype.handleText=function(e,t,n){var r,i,o,a,s=n&&n.isExtended,d=n&&n.isMultiByte,c=this.current708Packet.data,l=s?4096:0,u=c[e],p=c[e+1],f=t.currentWindow;return t.textDecoder_&&!s?(d?(i=[u,p],e++):i=[u],r=t.textDecoder_.decode(new Uint8Array(i))):(a=ve[o=l|u]||o,r=4096&o&&o===a?"":String.fromCharCode(a)),f.pendingNewLine&&!f.isEmpty()&&f.newLine(this.getPts(e)),f.pendingNewLine=!1,f.addText(r),e},we.prototype.multiByteCharacter=function(e,t){var n=this.current708Packet.data,r=n[e+1],i=n[e+2];return ye(r)&&ye(i)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},we.prototype.setCurrentWindow=function(e,t){var n=7&this.current708Packet.data[e];return t.setCurrentWindow(n),e},we.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,r=n[e],i=7&r;t.setCurrentWindow(i);var o=t.currentWindow;return r=n[++e],o.visible=(32&r)>>5,o.rowLock=(16&r)>>4,o.columnLock=(8&r)>>3,o.priority=7&r,r=n[++e],o.relativePositioning=(128&r)>>7,o.anchorVertical=127&r,r=n[++e],o.anchorHorizontal=r,r=n[++e],o.anchorPoint=(240&r)>>4,o.rowCount=15&r,r=n[++e],o.columnCount=63&r,r=n[++e],o.windowStyle=(56&r)>>3,o.penStyle=7&r,o.virtualRowCount=o.rowCount+1,e},we.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.winAttr;return r=n[++e],i.fillOpacity=(192&r)>>6,i.fillRed=(48&r)>>4,i.fillGreen=(12&r)>>2,i.fillBlue=3&r,r=n[++e],i.borderType=(192&r)>>6,i.borderRed=(48&r)>>4,i.borderGreen=(12&r)>>2,i.borderBlue=3&r,r=n[++e],i.borderType+=(128&r)>>5,i.wordWrap=(64&r)>>6,i.printDirection=(48&r)>>4,i.scrollDirection=(12&r)>>2,i.justify=3&r,r=n[++e],i.effectSpeed=(240&r)>>4,i.effectDirection=(12&r)>>2,i.displayEffect=3&r,e},we.prototype.flushDisplayed=function(e,t){for(var n=[],r=0;r<8;r++)t.windows[r].visible&&!t.windows[r].isEmpty()&&n.push(t.windows[r].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},we.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},we.prototype.displayWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible=1);return e},we.prototype.hideWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible=0);return e},we.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible^=1);return e},we.prototype.clearWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&t.windows[i].clearText();return e},we.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&t.windows[i].reset();return e},we.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penAttr;return r=n[++e],i.textTag=(240&r)>>4,i.offset=(12&r)>>2,i.penSize=3&r,r=n[++e],i.italics=(128&r)>>7,i.underline=(64&r)>>6,i.edgeType=(56&r)>>3,i.fontStyle=7&r,e},we.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penColor;return r=n[++e],i.fgOpacity=(192&r)>>6,i.fgRed=(48&r)>>4,i.fgGreen=(12&r)>>2,i.fgBlue=3&r,r=n[++e],i.bgOpacity=(192&r)>>6,i.bgRed=(48&r)>>4,i.bgGreen=(12&r)>>2,i.bgBlue=3&r,r=n[++e],i.edgeRed=(48&r)>>4,i.edgeGreen=(12&r)>>2,i.edgeBlue=3&r,e},we.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,r=n[++e],i.row=15&r,r=n[++e],i.column=63&r,e},we.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var Te={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ie=function(e){return null===e?"":(e=Te[e]||e,String.fromCharCode(e))},Se=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ke=function(){for(var e=[],t=15;t--;)e.push("");return e},Ce=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,r,i,o;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),r=t>>>8,i=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=ke();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ke();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=ke()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(r,i))o=Ie((r=(3&r)<<8)|i),this[this.mode_](e.pts,o),this.column_++;else if(this.isExtCharacter(r,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),o=Ie((r=(3&r)<<8)|i),this[this.mode_](e.pts,o),this.column_++;else if(this.isMidRowCode(r,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(r,i))this.column_+=3&i;else if(this.isPAC(r,i)){var a=Se.indexOf(7968&t);"rollUp"===this.mode_&&(a-this.rollUpRows_+1<0&&(a=this.rollUpRows_-1),this.setRollUp(e.pts,a)),a!==this.row_&&(this.clearFormatting(e.pts),this.row_=a),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(r)&&(0===i&&(i=null),o=Ie(r),o+=Ie(i),this[this.mode_](e.pts,o),this.column_+=o.length)}else this.lastControlCode_=null}};Ce.prototype=new F,Ce.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e,t){try{return e.trim()}catch(e){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Ce.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ke(),this.nonDisplayed_=ke(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ce.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ce.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Ce.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Ce.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Ce.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Ce.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Ce.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Ce.prototype.isNormalChar=function(e){return e>=32&&e<=127},Ce.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=ke(),this.displayed_=ke()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Ce.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},Ce.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},Ce.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},Ce.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},Ce.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Ce.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var Ee={CaptionStream:me,Cea608Stream:Ce,Cea708Stream:we},Ae={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Pe="shared",xe=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},Oe=function e(t){var n,r;e.prototype.init.call(this),this.type_=t||Pe,this.push=function(e){this.type_!==Pe&&e.type!==this.type_||(void 0===r&&(r=e.dts),e.dts=xe(e.dts,r),e.pts=xe(e.pts,r),n=e.dts,this.trigger("data",e))},this.flush=function(){r=n,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){r=void 0,n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Oe.prototype=new F;var De,Re=Oe,Me=xe,Ne=function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i},Ue=function(e,t,n){return decodeURIComponent(Ne(e,t,n))},Le=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},je={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Ue(e.data,1,t),e.value=Ue(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Ue(e.data,1,t),e.url=Ue(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,n;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(n=e.data,unescape(Ne(n,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};De=function(e){var t,n={descriptor:e&&e.descriptor},r=0,i=[],o=0;if(De.prototype.init.call(this),this.dispatchType=Ae.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,a,s,d;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(o=0,i.length=0),0===i.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(i.push(e),o+=e.data.byteLength,1===i.length&&(r=Le(e.data.subarray(6,10)),r+=10),!(o<r)){for(t={data:new Uint8Array(r),frames:[],pts:i[0].pts,dts:i[0].dts},d=0;d<r;)t.data.set(i[0].data.subarray(0,r-d),d),d+=i[0].data.byteLength,o-=i[0].data.byteLength,i.shift();n=10,64&t.data[5]&&(n+=4,n+=Le(t.data.subarray(10,14)),r-=Le(t.data.subarray(16,20)));do{if((a=Le(t.data.subarray(n+4,n+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((s={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+a+10)}).key=s.id,je[s.id]&&(je[s.id](s),"com.apple.streaming.transportStreamTimestamp"===s.owner)){var c=s.data,l=(1&c[3])<<30|c[4]<<22|c[5]<<14|c[6]<<6|c[7]>>>2;l*=4,l+=3&c[7],s.timeStamp=l,void 0===t.pts&&void 0===t.dts&&(t.pts=s.timeStamp,t.dts=s.timeStamp),this.trigger("timestamp",s)}t.frames.push(s),n+=10,n+=a}while(n<r);this.trigger("data",t)}}},De.prototype=new F;var Be,qe,Fe,Ve=De,ze=Re,We=188;(Be=function(){var e=new Uint8Array(We),t=0;Be.prototype.init.call(this),this.push=function(n){var r,i=0,o=We;for(t?((r=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),r.set(n,t),t=0):r=n;o<r.byteLength;)71!==r[i]||71!==r[o]?(i++,o++):(this.trigger("data",r.subarray(i,o)),i+=We,o+=We);i<r.byteLength&&(e.set(r.subarray(i),0),t=r.byteLength-i)},this.flush=function(){t===We&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new F,qe=function(){var e,t,n,r;qe.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,r){var i=0;r.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===r.type?t(e.subarray(i),r):n(e.subarray(i),r)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],r.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=r.pmtPid},n=function(e,t){var n,i;if(1&e[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<n;){var o=e[i],a=(31&e[i+1])<<8|e[i+2];o===Ae.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=a:o===Ae.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=a:o===Ae.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][a]=o),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=r.programMapTable}},this.push=function(t){var n={},r=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(r+=t[r]+1),0===n.pid)n.type="pat",e(t.subarray(r),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(r),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,r,n]):this.processPes_(t,r,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=Ae.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=Ae.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},qe.prototype=new F,qe.STREAM_TYPES={h264:27,adts:15},Fe=function(){var e,t=this,n=!1,r={data:[],size:0},i={data:[],size:0},o={data:[],size:0},a=function(e,n,r){var i,o,a=new Uint8Array(e.size),s={type:n},d=0,c=0;if(e.data.length&&!(e.size<9)){for(s.trackId=e.data[0].pid,d=0;d<e.data.length;d++)o=e.data[d],a.set(o.data,c),c+=o.data.byteLength;var l,u,p,f;u=s,f=(l=a)[0]<<16|l[1]<<8|l[2],u.data=new Uint8Array,1===f&&(u.packetLength=6+(l[4]<<8|l[5]),u.dataAlignmentIndicator=0!=(4&l[6]),192&(p=l[7])&&(u.pts=(14&l[9])<<27|(255&l[10])<<20|(254&l[11])<<12|(255&l[12])<<5|(254&l[13])>>>3,u.pts*=4,u.pts+=(6&l[13])>>>1,u.dts=u.pts,64&p&&(u.dts=(14&l[14])<<27|(255&l[15])<<20|(254&l[16])<<12|(255&l[17])<<5|(254&l[18])>>>3,u.dts*=4,u.dts+=(6&l[18])>>>1)),u.data=l.subarray(9+l[8])),i="video"===n||s.packetLength<=e.size,(r||i)&&(e.size=0,e.data.length=0),i&&t.trigger("data",s)}};Fe.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var e,t;switch(s.streamType){case Ae.H264_STREAM_TYPE:e=r,t="video";break;case Ae.ADTS_STREAM_TYPE:e=i,t="audio";break;case Ae.METADATA_STREAM_TYPE:e=o,t="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&a(e,t,!0),e.data.push(s),e.size+=s.data.byteLength},pmt:function(){var r={type:"metadata",tracks:[]};null!==(e=s.programMapTable).video&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),n=!0,t.trigger("data",r)}})[s.type]()},this.reset=function(){r.size=0,r.data.length=0,i.size=0,i.data.length=0,this.trigger("reset")},this.flushStreams_=function(){a(r,"video"),a(i,"audio"),a(o,"timed-metadata")},this.flush=function(){if(!n&&e){var r={type:"metadata",tracks:[]};null!==e.video&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",r)}n=!1,this.flushStreams_(),this.trigger("done")}},Fe.prototype=new F;var He={PAT_PID:0,MP2T_PACKET_LENGTH:We,TransportPacketStream:Be,TransportParseStream:qe,ElementaryStream:Fe,TimestampRolloverStream:ze,CaptionStream:Ee.CaptionStream,Cea608Stream:Ee.Cea608Stream,Cea708Stream:Ee.Cea708Stream,MetadataStream:Ve};for(var Ze in Ae)Ae.hasOwnProperty(Ze)&&(He[Ze]=Ae[Ze]);var $e,Ge=He,Ke=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];$e=function(e){var t,n=0;$e.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:"adts skiping bytes "+e+" to "+t+" in frame "+n+" outside syncword"})},this.push=function(r){var i,o,a,s,d,c=0;if(e||(n=0),"audio"===r.type){var l;for(t&&t.length?(a=t,(t=new Uint8Array(a.byteLength+r.data.byteLength)).set(a),t.set(r.data,a.byteLength)):t=r.data;c+7<t.length;)if(255===t[c]&&240==(246&t[c+1])){if("number"==typeof l&&(this.skipWarn_(l,c),l=null),o=2*(1&~t[c+1]),i=(3&t[c+3])<<11|t[c+4]<<3|(224&t[c+5])>>5,d=9e4*(s=1024*(1+(3&t[c+6])))/Ke[(60&t[c+2])>>>2],t.byteLength-c<i)break;this.trigger("data",{pts:r.pts+n*d,dts:r.dts+n*d,sampleCount:s,audioobjecttype:1+(t[c+2]>>>6&3),channelcount:(1&t[c+2])<<2|(192&t[c+3])>>>6,samplerate:Ke[(60&t[c+2])>>>2],samplingfrequencyindex:(60&t[c+2])>>>2,samplesize:16,data:t.subarray(c+7+o,c+i)}),n++,c+=i}else"number"!=typeof l&&(l=c),c++;"number"==typeof l&&(this.skipWarn_(l,c),l=null),t=t.subarray(c)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}},$e.prototype=new F;var Xe,Je=$e;Xe=function(e){var t=e.byteLength,n=0,r=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+r},this.loadWord=function(){var i=e.byteLength-t,o=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error("no bytes available");o.set(e.subarray(i,i+a)),n=new DataView(o.buffer).getUint32(0),r=8*a,t-=a},this.skipBits=function(e){var i;r>e?(n<<=e,r-=e):(e-=r,e-=8*(i=Math.floor(e/8)),t-=i,this.loadWord(),n<<=e,r-=e)},this.readBits=function(e){var i=Math.min(r,e),o=n>>>32-i;return(r-=i)>0?n<<=i:t>0&&this.loadWord(),(i=e-i)>0?o<<i|this.readBits(i):o},this.skipLeadingZeros=function(){var e;for(e=0;e<r;++e)if(0!=(n&2147483648>>>e))return n<<=e,r-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Ye,Qe,et,tt=Xe;Qe=function(){var e,t,n=0;Qe.prototype.init.call(this),this.push=function(r){var i;t?((i=new Uint8Array(t.byteLength+r.data.byteLength)).set(t),i.set(r.data,t.byteLength),t=i):t=r.data;for(var o=t.byteLength;n<o-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<o;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<o);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Qe.prototype=new F,et={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Ye=function(){var e,t,n,r,i,o,a,s=new Qe;Ye.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,r=e.dts,s.push(e))},s.on("data",(function(a){var s={trackId:t,pts:n,dts:r,data:a,nalUnitTypeCode:31&a[0]};switch(s.nalUnitTypeCode){case 5:s.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:s.nalUnitType="sei_rbsp",s.escapedRBSP=i(a.subarray(1));break;case 7:s.nalUnitType="seq_parameter_set_rbsp",s.escapedRBSP=i(a.subarray(1)),s.config=o(s.escapedRBSP);break;case 8:s.nalUnitType="pic_parameter_set_rbsp";break;case 9:s.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",s)})),s.on("done",(function(){e.trigger("done")})),s.on("partialdone",(function(){e.trigger("partialdone")})),s.on("reset",(function(){e.trigger("reset")})),s.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){s.flush()},this.partialFlush=function(){s.partialFlush()},this.reset=function(){s.reset()},this.endTimeline=function(){s.endTimeline()},a=function(e,t){var n,r=8,i=8;for(n=0;n<e;n++)0!==i&&(i=(r+t.readExpGolomb()+256)%256),r=0===i?r:i},i=function(e){for(var t,n,r=e.byteLength,i=[],o=1;o<r-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===i[0]&&(a++,i.shift()),n[o]=e[a];return n},o=function(e){var t,n,r,i,o,s,d,c,l,u,p,f,h=0,g=0,m=0,v=0,y=[1,1];if(n=(t=new tt(e)).readUnsignedByte(),i=t.readUnsignedByte(),r=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),et[n]&&(3===(o=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(p=3!==o?8:12,f=0;f<p;f++)t.readBoolean()&&a(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(s=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),d=t.readUnsignedExpGolomb(),f=0;f<d;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),c=t.readUnsignedExpGolomb(),l=t.readUnsignedExpGolomb(),0===(u=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(h=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}y&&(y[0],y[1])}return{profileIdc:n,levelIdc:r,profileCompatibility:i,width:16*(c+1)-2*h-2*g,height:(2-u)*(l+1)*16-2*m-2*v,sarRatio:y}}},Ye.prototype=new F;var nt,rt={H264Stream:Ye,NalByteStream:Qe},it=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ot=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return n=n>=0?n:0,(16&e[t+5])>>4?n+20:n+10},at=function e(t,n){return t.length-n<10||t[n]!=="I".charCodeAt(0)||t[n+1]!=="D".charCodeAt(0)||t[n+2]!=="3".charCodeAt(0)?n:e(t,n+=ot(t,n))},st=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},dt={isLikelyAacData:function(e){var t=at(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:ot,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return it[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,r;t=10,64&e[5]&&(t+=4,t+=st(e.subarray(10,14)));do{if((n=st(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){r=e.subarray(t+10,t+n+10);for(var i=0;i<r.byteLength;i++)if(0===r[i]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i}(r,0,i))){var o=r.subarray(i+1),a=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;return(a*=4)+(3&o[7])}break}}t+=10,t+=n}while(t<e.byteLength);return null}};(nt=function(){var e=new Uint8Array,t=0;nt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var r,i,o,a,s=0,d=0;for(e.length?(a=e.length,(e=new Uint8Array(n.byteLength+a)).set(e.subarray(0,a)),e.set(n,a)):e=n;e.length-d>=3;)if(e[d]!=="I".charCodeAt(0)||e[d+1]!=="D".charCodeAt(0)||e[d+2]!=="3".charCodeAt(0))if(255!=(255&e[d])||240!=(240&e[d+1]))d++;else{if(e.length-d<7)break;if(d+(s=dt.parseAdtsSize(e,d))>e.length)break;o={type:"audio",data:e.subarray(d,d+s),pts:t,dts:t},this.trigger("data",o),d+=s}else{if(e.length-d<10)break;if(d+(s=dt.parseId3TagSize(e,d))>e.length)break;i={type:"timed-metadata",data:e.subarray(d,d+s)},this.trigger("data",i),d+=s}r=e.length-d,e=r>0?e.subarray(d):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new F;var ct,lt,ut,pt,ft=nt,ht=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],gt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],mt=rt.H264Stream,vt=dt.isLikelyAacData,yt=function(e,t){t.stream=e,this.trigger("log",t)},bt=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];"headOfPipeline"!==i&&t[i].on&&t[i].on("log",yt.bind(e,i))}},_t=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},wt=function(e,t,n,r,i,o){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(r-t),pts:e+(i-n)},prependedContentDuration:o,baseMediaDecodeTime:e}};lt=function(e,t){var n,r=[],i=0,o=0,a=1/0;n=(t=t||{}).firstSequenceNumber||0,lt.prototype.init.call(this),this.push=function(t){ge(e,t),e&&ht.forEach((function(n){e[n]=t[n]})),r.push(t)},this.setEarliestDts=function(e){i=e},this.setVideoBaseMediaDecodeTime=function(e){a=e},this.setAudioAppendStart=function(e){o=e},this.flush=function(){var s,d,c,l,u,p,f;0!==r.length?(s=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))}(r,e,i),e.baseMediaDecodeTime=he(e,t.keepOriginalTimestamps),f=pe(e,s,o,a),e.samples=function(e){var t,n,r=[];for(t=0;t<e.length;t++)n=e[t],r.push({size:n.data.byteLength,duration:1024});return r}(s),c=Q(function(e){var t,n,r=0,i=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],i.set(n.data,r),r+=n.data.byteLength;return i}(s)),r=[],d=ee(n,[e]),l=new Uint8Array(d.byteLength+c.byteLength),n++,l.set(d),l.set(c,d.byteLength),fe(e),u=Math.ceil(9216e4/e.samplerate),s.length&&(p=s.length*u,this.trigger("segmentTimingInfo",wt(ce(e.baseMediaDecodeTime,e.samplerate),s[0].dts,s[0].pts,s[0].dts+p,s[0].pts+p,f||0)),this.trigger("timingInfo",{start:s[0].pts,end:s[0].pts+p})),this.trigger("data",{track:e,boxes:l}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){fe(e),r=[],this.trigger("reset")}},lt.prototype=new F,ct=function(e,t){var n,r,i,o=[],a=[];n=(t=t||{}).firstSequenceNumber||0,ct.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){ge(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.config,e.sps=[t.data],gt.forEach((function(t){e[t]=r[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.data,e.pps=[t.data]),o.push(t)},this.flush=function(){for(var r,i,s,d,c,l,u,p,f=0;o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();if(0===o.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(r=function(e){var t,n,r=[],i=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,r.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r)),(r=[n]).byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return i.length&&(!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r),i}(o),(s=function(e){var t,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),(r=[n]).nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i}(r))[0][0].keyFrame||((i=this.getGopForFusion_(o[0],e))?(f=i.duration,s.unshift(i),s.byteLength+=i.byteLength,s.nalCount+=i.nalCount,s.pts=i.pts,s.dts=i.dts,s.duration+=i.duration):s=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e}(s)),a.length){var h;if(!(h=t.alignGopsAtEnd?this.alignGopsAtEnd_(s):this.alignGopsAtStart_(s)))return this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");fe(e),s=h}ge(e,s),e.samples=function(e,t){var n,r,i,o,a,s=t||0,d=[];for(n=0;n<e.length;n++)for(o=e[n],r=0;r<o.length;r++)a=o[r],s+=(i=te(a,s)).size,d.push(i);return d}(s),c=Q(function(e){var t,n,r,i,o,a,s=0,d=e.byteLength,c=e.nalCount,l=new Uint8Array(d+4*c),u=new DataView(l.buffer);for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(o=i[n],r=0;r<o.length;r++)a=o[r],u.setUint32(s,a.data.byteLength),s+=4,l.set(a.data,s),s+=a.data.byteLength;return l}(s)),e.baseMediaDecodeTime=he(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",s.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),u=s[0],p=s[s.length-1],this.trigger("segmentTimingInfo",wt(e.baseMediaDecodeTime,u.dts,u.pts,p.dts+p.duration,p.pts+p.duration,f)),this.trigger("timingInfo",{start:s[0].pts,end:s[s.length-1].pts+s[s.length-1].duration}),this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),d=ee(n,[e]),l=new Uint8Array(d.byteLength+c.byteLength),n++,l.set(d),l.set(c,d.byteLength),this.trigger("data",{track:e,boxes:l}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),o=[],this.gopCache_.length=0,a.length=0,this.trigger("reset")},this.resetStream_=function(){fe(e),r=void 0,i=void 0},this.getGopForFusion_=function(t){var n,r,i,o,a,s=1/0;for(a=0;a<this.gopCache_.length;a++)i=(o=this.gopCache_[a]).gop,e.pps&&_t(e.pps[0],o.pps[0])&&e.sps&&_t(e.sps[0],o.sps[0])&&(i.dts<e.timelineStartInfo.dts||(n=t.dts-i.dts-i.duration)>=-1e4&&n<=45e3&&(!r||s>n)&&(r=o,s=n));return r?r.gop:null},this.alignGopsAtStart_=function(e){var t,n,r,i,o,s,d,c;for(o=e.byteLength,s=e.nalCount,d=e.duration,t=n=0;t<a.length&&n<e.length&&(r=a[t],i=e[n],r.pts!==i.pts);)i.pts>r.pts?t++:(n++,o-=i.byteLength,s-=i.nalCount,d-=i.duration);return 0===n?e:n===e.length?null:((c=e.slice(n)).byteLength=o,c.duration=d,c.nalCount=s,c.pts=c[0].pts,c.dts=c[0].dts,c)},this.alignGopsAtEnd_=function(e){var t,n,r,i,o,s,d;for(t=a.length-1,n=e.length-1,o=null,s=!1;t>=0&&n>=0;){if(r=a[t],i=e[n],r.pts===i.pts){s=!0;break}r.pts>i.pts?t--:(t===a.length-1&&(o=n),n--)}if(!s&&null===o)return null;if(0===(d=s?n:o))return e;var c=e.slice(d),l=c.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return c.byteLength=l.byteLength,c.duration=l.duration,c.nalCount=l.nalCount,c.pts=c[0].pts,c.dts=c[0].dts,c},this.alignGopsWith=function(e){a=e}},ct.prototype=new F,pt=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,pt.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},pt.prototype=new F,pt.prototype.flush=function(e){var t,n,r,o,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},c=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(c=this.videoTrack.timelineStartInfo.pts,gt.forEach((function(e){s.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(c=this.audioTrack.timelineStartInfo.pts,ht.forEach((function(e){s.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,r=function(e){var t,n=i(),r=d(e);return(t=new Uint8Array(n.byteLength+r.byteLength)).set(n),t.set(r,n.byteLength),t}(this.pendingTracks),s.initSegment=new Uint8Array(r.byteLength),s.initSegment.set(r),s.data=new Uint8Array(this.pendingBytes),o=0;o<this.pendingBoxes.length;o++)s.data.set(this.pendingBoxes[o],a),a+=this.pendingBoxes[o].byteLength;for(o=0;o<this.pendingCaptions.length;o++)(t=this.pendingCaptions[o]).startTime=ue(t.startPts,c,this.keepOriginalTimestamps),t.endTime=ue(t.endPts,c,this.keepOriginalTimestamps),s.captionStreams[t.stream]=!0,s.captions.push(t);for(o=0;o<this.pendingMetadata.length;o++)(n=this.pendingMetadata[o]).cueTime=ue(n.pts,c,this.keepOriginalTimestamps),s.metadata.push(n);for(s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),o=0;o<s.captions.length;o++)t=s.captions[o],this.trigger("caption",t);for(o=0;o<s.metadata.length;o++)n=s.metadata[o],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},pt.prototype.setRemux=function(e){this.remuxTracks=e},ut=function(e){var t,n,r=this,i=!0;ut.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="aac",i.metadataStream=new Ge.MetadataStream,i.aacStream=new ft,i.audioTimestampRolloverStream=new Ge.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new Ge.TimestampRolloverStream("timed-metadata"),i.adtsStream=new Je,i.coalesceStream=new pt(e,i.metadataStream),i.headOfPipeline=i.aacStream,i.aacStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.aacStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.metadataStream.on("timestamp",(function(e){i.aacStream.setTimestamp(e.timeStamp)})),i.aacStream.on("data",(function(o){"timed-metadata"!==o.type&&"audio"!==o.type||i.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:r.baseMediaDecodeTime},codec:"adts",type:"audio"},i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new lt(n,e),i.audioSegmentStream.on("log",r.getLogTrigger_("audioSegmentStream")),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done")),bt(this,i)},this.setupTsPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="ts",i.metadataStream=new Ge.MetadataStream,i.packetStream=new Ge.TransportPacketStream,i.parseStream=new Ge.TransportParseStream,i.elementaryStream=new Ge.ElementaryStream,i.timestampRolloverStream=new Ge.TimestampRolloverStream,i.adtsStream=new Je,i.h264Stream=new mt,i.captionStream=new Ge.CaptionStream(e),i.coalesceStream=new pt(e,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream).pipe(i.timestampRolloverStream),i.timestampRolloverStream.pipe(i.h264Stream),i.timestampRolloverStream.pipe(i.adtsStream),i.timestampRolloverStream.pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",(function(o){var a;if("metadata"===o.type){for(a=o.tracks.length;a--;)t||"video"!==o.tracks[a].type?n||"audio"!==o.tracks[a].type||((n=o.tracks[a]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime):(t=o.tracks[a]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime;t&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new ct(t,e),i.videoSegmentStream.on("log",r.getLogTrigger_("videoSegmentStream")),i.videoSegmentStream.on("timelineStartInfo",(function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,i.audioSegmentStream.setEarliestDts(t.dts-r.baseMediaDecodeTime))})),i.videoSegmentStream.on("processedGopsInfo",r.trigger.bind(r,"gopInfo")),i.videoSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"videoSegmentTimingInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),i.videoSegmentStream.on("timingInfo",r.trigger.bind(r,"videoTimingInfo")),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),n&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new lt(n,e),i.audioSegmentStream.on("log",r.getLogTrigger_("audioSegmentStream")),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.audioSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"audioSegmentTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("id3Frame",(function(e){e.dispatchType=i.metadataStream.dispatchType,r.trigger("id3Frame",e)})),i.coalesceStream.on("caption",this.trigger.bind(this,"caption")),i.coalesceStream.on("done",this.trigger.bind(this,"done")),bt(this,i)},this.setBaseMediaDecodeTime=function(r){var i=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=r),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,fe(n),i.audioTimestampRolloverStream&&i.audioTimestampRolloverStream.discontinuity()),t&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,fe(t),i.captionStream.reset()),i.timestampRolloverStream&&i.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){if(i){var t=vt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},ut.prototype=new F;var Tt,It,St,kt={Transmuxer:ut,VideoSegmentStream:ct,AudioSegmentStream:lt,AUDIO_PROPERTIES:ht,VIDEO_PROPERTIES:gt,generateSegmentTimingInfo:wt},Ct=function(e){return e>>>0},Et=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])},At=Ct,Pt=function e(t,n){var r,i,o,a,s,d=[];if(!n.length)return null;for(r=0;r<t.byteLength;)i=At(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]),o=Et(t.subarray(r+4,r+8)),a=i>1?r+i:t.byteLength,o===n[0]&&(1===n.length?d.push(t.subarray(r+8,a)):(s=e(t.subarray(r+8,a),n.slice(1))).length&&(d=d.concat(s))),r=a;return d},xt=Ct,Ot=z.getUint64,Dt=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Rt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{},Mt="undefined"!=typeof window?window:void 0!==Rt?Rt:"undefined"!=typeof self?self:{},Nt=function(e){for(var t,n,r=e.byteLength,i=[],o=1;o<r-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===i[0]&&(a++,i.shift()),n[o]=e[a];return n},Ut=Ee.CaptionStream,Lt=function(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(n<i.size)return i;n-=i.size}return null},jt=function(e,t){var n=Pt(e,["moof","traf"]),r=Pt(e,["mdat"]),i={},o=[];return r.forEach((function(e,t){var r=n[t];o.push({mdat:e,traf:r})})),o.forEach((function(e){var n,r,o=e.mdat,a=e.traf,s=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],o=2&r.flags[2],a=8&r.flags[2],s=16&r.flags[2],d=32&r.flags[2],c=65536&r.flags[0],l=131072&r.flags[0];return t=8,i&&(t+=4,r.baseDataOffset=n.getUint32(12),t+=4),o&&(r.sampleDescriptionIndex=n.getUint32(t),t+=4),a&&(r.defaultSampleDuration=n.getUint32(t),t+=4),s&&(r.defaultSampleSize=n.getUint32(t),t+=4),d&&(r.defaultSampleFlags=n.getUint32(t)),c&&(r.durationIsEmpty=!0),!i&&l&&(r.baseDataOffsetIsMoof=!0),r}(Pt(a,["tfhd"])[0]),d=s.trackId,c=Pt(a,["tfdt"]),l=c.length>0?function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return 1===t.version?t.baseMediaDecodeTime=Ot(e.subarray(4)):t.baseMediaDecodeTime=xt(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t}(c[0]).baseMediaDecodeTime:0,u=Pt(a,["trun"]);t===d&&u.length>0&&(n=function(e,t,n){var r=t,i=n.defaultSampleDuration||0,o=n.defaultSampleSize||0,a=n.trackId,s=[];return e.forEach((function(e){var t=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&n.flags[2],o=4&n.flags[2],a=1&n.flags[1],s=2&n.flags[1],d=4&n.flags[1],c=8&n.flags[1],l=r.getUint32(4),u=8;for(i&&(n.dataOffset=r.getInt32(u),u+=4),o&&l&&(t={flags:Dt(e.subarray(u,u+4))},u+=4,a&&(t.duration=r.getUint32(u),u+=4),s&&(t.size=r.getUint32(u),u+=4),c&&(1===n.version?t.compositionTimeOffset=r.getInt32(u):t.compositionTimeOffset=r.getUint32(u),u+=4),n.samples.push(t),l--);l--;)t={},a&&(t.duration=r.getUint32(u),u+=4),s&&(t.size=r.getUint32(u),u+=4),d&&(t.flags=Dt(e.subarray(u,u+4)),u+=4),c&&(1===n.version?t.compositionTimeOffset=r.getInt32(u):t.compositionTimeOffset=r.getUint32(u),u+=4),n.samples.push(t);return n}(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=o),e.trackId=a,e.dts=r,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"==typeof r?(e.pts=r+Mt.BigInt(e.compositionTimeOffset),r+=Mt.BigInt(e.duration)):(e.pts=r+e.compositionTimeOffset,r+=e.duration)})),s=s.concat(t)})),s}(u,l,s),r=function(e,t,n){var r,i,o,a,s=new DataView(e.buffer,e.byteOffset,e.byteLength),d={logs:[],seiNals:[]};for(i=0;i+4<e.length;i+=o)if(o=s.getUint32(i),i+=4,!(o<=0))switch(31&e[i]){case 6:var c=e.subarray(i+1,i+1+o),l=Lt(i,t);if(r={nalUnitType:"sei_rbsp",size:o,data:c,escapedRBSP:Nt(c),trackId:n},l)r.pts=l.pts,r.dts=l.dts,a=l;else{if(!a){d.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+i+" for trackId "+n+". See mux.js#223."});break}r.pts=a.pts,r.dts=a.dts}d.seiNals.push(r)}return d}(o,n,d),i[d]||(i[d]={seiNals:[],logs:[]}),i[d].seiNals=i[d].seiNals.concat(r.seiNals),i[d].logs=i[d].logs.concat(r.logs))})),i},Bt=function(){var e,t,n,r,i,o,a=!1;this.isInitialized=function(){return a},this.init=function(t){e=new Ut,a=!0,o=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/r,e.endTime=e.endPts/r,i.captions.push(e),i.captionStreams[e.stream]=!0})),e.on("log",(function(e){i.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||n===e[0]&&r===t[n])},this.parse=function(e,o,a){var s;if(!this.isInitialized())return null;if(!o||!a)return null;if(this.isNewInit(o,a))n=o[0],r=a[n];else if(null===n||!r)return t.push(e),null;for(;t.length>0;){var d=t.shift();this.parse(d,o,a)}return s=function(e,t,n){if(null===t)return null;var r=jt(e,t)[t]||{};return{seiNals:r.seiNals,logs:r.logs,timescale:n}}(e,n,r),s&&s.logs&&(i.logs=i.logs.concat(s.logs)),null!==s&&s.seiNals?(this.pushNals(s.seiNals),this.flushStream(),i):i.logs.length?{logs:i.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;o?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){i.captions=[],i.captionStreams={},i.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,r=null,i?this.clearParsedCaptions():i={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},qt=Ct,Ft=function(e){return("00"+e.toString(16)).slice(-2)},Vt=z.getUint64;Tt=function(e,t){var n=Pt(t,["moof","traf"]).reduce((function(t,n){var r,i,o=Pt(n,["tfhd"])[0],a=qt(o[4]<<24|o[5]<<16|o[6]<<8|o[7]),s=e[a]||9e4,d=Pt(n,["tfdt"])[0],c=new DataView(d.buffer,d.byteOffset,d.byteLength);return"bigint"==typeof(r=1===d[0]?Vt(d.subarray(4,12)):c.getUint32(4))?i=r/Mt.BigInt(s):"number"!=typeof r||isNaN(r)||(i=r/s),i<Number.MAX_SAFE_INTEGER&&(i=Number(i)),i<t&&(t=i),t}),1/0);return"bigint"==typeof n||isFinite(n)?n:0},St=function(e){var t=0===e[0]?12:20;return qt(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},It=function(e){var t=Pt(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,r,i={},o=Pt(e,["tkhd"])[0];o&&(r=(t=new DataView(o.buffer,o.byteOffset,o.byteLength)).getUint8(0),i.id=0===r?t.getUint32(12):t.getUint32(20));var a=Pt(e,["mdia","hdlr"])[0];if(a){var s=Et(a.subarray(8,12));i.type="vide"===s?"video":"soun"===s?"audio":s}var d=Pt(e,["mdia","minf","stbl","stsd"])[0];if(d){var c=d.subarray(8);i.codec=Et(c.subarray(4,8));var l,u=Pt(c,[i.codec])[0];u&&(/^[asm]vc[1-9]$/i.test(i.codec)?(l=u.subarray(78),"avcC"===Et(l.subarray(4,8))&&l.length>11?(i.codec+=".",i.codec+=Ft(l[9]),i.codec+=Ft(l[10]),i.codec+=Ft(l[11])):i.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(i.codec)?(l=u.subarray(28),"esds"===Et(l.subarray(4,8))&&l.length>20&&0!==l[19]?(i.codec+="."+Ft(l[19]),i.codec+="."+Ft(l[20]>>>2&63).replace(/^0/,"")):i.codec="mp4a.40.2"):i.codec=i.codec.toLowerCase())}var p=Pt(e,["mdia","mdhd"])[0];p&&(i.timescale=St(p)),n.push(i)})),n};var zt=Tt,Wt=It,Ht=function(e){var t=31&e[1];return(t<<=8)|e[2]},Zt=function(e){return!!(64&e[1])},$t=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},Gt=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Kt={parseType:function(e,t){var n=Ht(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=Zt(e),n=4+$t(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=Zt(e),r=4+$t(e);if(n&&(r+=e[r]+1),1&e[r+5]){var i;i=3+((15&e[r+1])<<8|e[r+2])-4;for(var o=12+((15&e[r+10])<<8|e[r+11]);o<i;){var a=r+o;t[(31&e[a+1])<<8|e[a+2]]=e[a],o+=5+((15&e[a+3])<<8|e[a+4])}return t}},parsePayloadUnitStartIndicator:Zt,parsePesType:function(e,t){switch(t[Ht(e)]){case Ae.H264_STREAM_TYPE:return"video";case Ae.ADTS_STREAM_TYPE:return"audio";case Ae.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Zt(e))return null;var t=4+$t(e);if(t>=e.byteLength)return null;var n,r=null;return 192&(n=e[t+7])&&((r={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,r.pts*=4,r.pts+=(6&e[t+13])>>>1,r.dts=r.pts,64&n&&(r.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,r.dts*=4,r.dts+=(6&e[t+18])>>>1)),r},videoPacketContainsKeyFrame:function(e){for(var t=4+$t(e),n=e.subarray(t),r=0,i=0,o=!1;i<n.byteLength-3;i++)if(1===n[i+2]){r=i+5;break}for(;r<n.byteLength;)switch(n[r]){case 0:if(0!==n[r-1]){r+=2;break}if(0!==n[r-2]){r++;break}i+3!==r-2&&"slice_layer_without_partitioning_rbsp_idr"===Gt(31&n[i+3])&&(o=!0);do{r++}while(1!==n[r]&&r<n.length);i=r-2,r+=3;break;case 1:if(0!==n[r-1]||0!==n[r-2]){r+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Gt(31&n[i+3])&&(o=!0),i=r-2,r+=3;break;default:r+=3}return n=n.subarray(i),r-=i,i=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Gt(31&n[i+3])&&(o=!0),o}},Xt=Me,Jt={};Jt.ts=Kt,Jt.aac=dt;var Yt=ae,Qt=188,en=71,tn=function(e,t,n){for(var r,i,o,a,s=0,d=Qt,c=!1;d<=e.byteLength;)if(e[s]!==en||e[d]!==en&&d!==e.byteLength)s++,d++;else{if(r=e.subarray(s,d),"pes"===Jt.ts.parseType(r,t.pid)&&(i=Jt.ts.parsePesType(r,t.table),o=Jt.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&o&&(a=Jt.ts.parsePesTime(r))&&(a.type="audio",n.audio.push(a),c=!0)),c)break;s+=Qt,d+=Qt}for(s=(d=e.byteLength)-Qt,c=!1;s>=0;)if(e[s]!==en||e[d]!==en&&d!==e.byteLength)s--,d--;else{if(r=e.subarray(s,d),"pes"===Jt.ts.parseType(r,t.pid)&&(i=Jt.ts.parsePesType(r,t.table),o=Jt.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&o&&(a=Jt.ts.parsePesTime(r))&&(a.type="audio",n.audio.push(a),c=!0)),c)break;s-=Qt,d-=Qt}},nn=function(e,t,n){for(var r,i,o,a,s,d,c,l=0,u=Qt,p=!1,f={data:[],size:0};u<e.byteLength;)if(e[l]!==en||e[u]!==en)l++,u++;else{if(r=e.subarray(l,u),"pes"===Jt.ts.parseType(r,t.pid)&&(i=Jt.ts.parsePesType(r,t.table),o=Jt.ts.parsePayloadUnitStartIndicator(r),"video"===i&&(o&&!p&&(a=Jt.ts.parsePesTime(r))&&(a.type="video",n.video.push(a),p=!0),!n.firstKeyFrame))){if(o&&0!==f.size){for(s=new Uint8Array(f.size),d=0;f.data.length;)c=f.data.shift(),s.set(c,d),d+=c.byteLength;if(Jt.ts.videoPacketContainsKeyFrame(s)){var h=Jt.ts.parsePesTime(s);h?(n.firstKeyFrame=h,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}f.size=0}f.data.push(r),f.size+=r.byteLength}if(p&&n.firstKeyFrame)break;l+=Qt,u+=Qt}for(l=(u=e.byteLength)-Qt,p=!1;l>=0;)if(e[l]!==en||e[u]!==en)l--,u--;else{if(r=e.subarray(l,u),"pes"===Jt.ts.parseType(r,t.pid)&&(i=Jt.ts.parsePesType(r,t.table),o=Jt.ts.parsePayloadUnitStartIndicator(r),"video"===i&&o&&(a=Jt.ts.parsePesTime(r))&&(a.type="video",n.video.push(a),p=!0)),p)break;l-=Qt,u-=Qt}},rn=function(e,t){var n;return n=Jt.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,r=0,i=null,o=null,a=0,s=0;e.length-s>=3;){switch(Jt.aac.parseType(e,s)){case"timed-metadata":if(e.length-s<10){n=!0;break}if((a=Jt.aac.parseId3TagSize(e,s))>e.length){n=!0;break}null===o&&(t=e.subarray(s,s+a),o=Jt.aac.parseAacTimestamp(t)),s+=a;break;case"audio":if(e.length-s<7){n=!0;break}if((a=Jt.aac.parseAdtsSize(e,s))>e.length){n=!0;break}null===i&&(t=e.subarray(s,s+a),i=Jt.aac.parseSampleRate(t)),r++,s+=a;break;default:s++}if(n)return null}if(null===i||null===o)return null;var d=Yt/i;return{audio:[{type:"audio",dts:o,pts:o},{type:"audio",dts:o+1024*r*d,pts:o+1024*r*d}]}}(e):function(e){var t={pid:null,table:null},n={};for(var r in function(e,t){for(var n,r=0,i=Qt;i<e.byteLength;)if(e[r]!==en||e[i]!==en)r++,i++;else{switch(n=e.subarray(r,i),Jt.ts.parseType(n,t.pid)){case"pat":t.pid=Jt.ts.parsePat(n);break;case"pmt":var o=Jt.ts.parsePmt(n);t.table=t.table||{},Object.keys(o).forEach((function(e){t.table[e]=o[e]}))}r+=Qt,i+=Qt}}(e,t),t.table)if(t.table.hasOwnProperty(r))switch(t.table[r]){case Ae.H264_STREAM_TYPE:n.video=[],nn(e,t,n),0===n.video.length&&delete n.video;break;case Ae.ADTS_STREAM_TYPE:n.audio=[],tn(e,t,n),0===n.audio.length&&delete n.audio}return n}(e),n&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;(void 0===n||isNaN(n))&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=Xt(e.dts,n),e.pts=Xt(e.pts,n),e.dtsTime=e.dts/Yt,e.ptsTime=e.pts/Yt}))}if(e.video&&e.video.length){var r=t;if((void 0===r||isNaN(r))&&(r=e.video[0].dts),e.video.forEach((function(e){e.dts=Xt(e.dts,r),e.pts=Xt(e.pts,r),e.dtsTime=e.dts/Yt,e.ptsTime=e.pts/Yt})),e.firstKeyFrame){var i=e.firstKeyFrame;i.dts=Xt(i.dts,r),i.pts=Xt(i.pts,r),i.dtsTime=i.dts/Yt,i.ptsTime=i.pts/Yt}}}(n,t),n):null},on=function(){function e(e,t){this.options=t||{},this.self=e,this.init()}var t=e.prototype;return t.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new kt.Transmuxer(this.options),function(e,t){t.on("data",(function(t){var n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};var r=t.data;t.data=r.buffer,e.postMessage({action:"data",segment:t,byteOffset:r.byteOffset,byteLength:r.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){var n={start:{decode:de(t.start.dts),presentation:de(t.start.pts)},end:{decode:de(t.end.dts),presentation:de(t.end.pts)},baseMediaDecodeTime:de(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=de(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})})),t.on("audioSegmentTimingInfo",(function(t){var n={start:{decode:de(t.start.dts),presentation:de(t.start.pts)},end:{decode:de(t.end.dts),presentation:de(t.end.pts)},baseMediaDecodeTime:de(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=de(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:n})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:de(t.start),end:de(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:de(t.start),end:de(t.end)}})})),t.on("log",(function(t){e.postMessage({action:"log",log:t})}))}(this.self,this.transmuxer)},t.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new Bt,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),n=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:n&&n.captions||[],logs:n&&n.logs||[],data:t.buffer},[t.buffer])},t.probeMp4StartTime=function(e){var t=e.timescales,n=e.data,r=zt(t,n);this.self.postMessage({action:"probeMp4StartTime",startTime:r,data:n},[n.buffer])},t.probeMp4Tracks=function(e){var t=e.data,n=Wt(t);this.self.postMessage({action:"probeMp4Tracks",tracks:n,data:t},[t.buffer])},t.probeTs=function(e){var t=e.data,n=e.baseStartTime,r="number"!=typeof n||isNaN(n)?void 0:n*ae,i=rn(t,r),o=null;i&&((o={hasVideo:i.video&&2===i.video.length||!1,hasAudio:i.audio&&2===i.audio.length||!1}).hasVideo&&(o.videoStart=i.video[0].ptsTime),o.hasAudio&&(o.audioStart=i.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:o,data:t},[t.buffer])},t.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},t.push=function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)},t.reset=function(){this.transmuxer.reset()},t.setTimestampOffset=function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(se(t)))},t.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(se(e.appendStart)))},t.setRemux=function(e){this.transmuxer.setRemux(e.remux)},t.flush=function(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},t.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},t.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new on(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new on(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}))),II=bI(TI),SI=function(e){var t=e.transmuxer,n=e.bytes,r=e.audioAppendStart,i=e.gopsToAlignWith,o=e.remux,a=e.onData,s=e.onTrackInfo,d=e.onAudioTimingInfo,c=e.onVideoTimingInfo,l=e.onVideoSegmentTimingInfo,u=e.onAudioSegmentTimingInfo,p=e.onId3,f=e.onCaptions,h=e.onDone,g=e.onEndedTimeline,m=e.onTransmuxerLog,v=e.isEndOfTimeline,y={buffer:[]},b=v;if(t.onmessage=function(n){t.currentTransmux===e&&("data"===n.data.action&&function(e,t,n){var r=e.data.segment,i=r.type,o=r.initSegment,a=r.captions,s=r.captionStreams,d=r.metadata,c=r.videoFrameDtsTime,l=r.videoFramePtsTime;t.buffer.push({captions:a,captionStreams:s,metadata:d});var u=e.data.segment.boxes||{data:e.data.segment.data},p={type:i,data:new Uint8Array(u.data,u.data.byteOffset,u.data.byteLength),initSegment:new Uint8Array(o.data,o.byteOffset,o.byteLength)};void 0!==c&&(p.videoFrameDtsTime=c),void 0!==l&&(p.videoFramePtsTime=l),n(p)}(n,y,a),"trackinfo"===n.data.action&&s(n.data.trackInfo),"gopInfo"===n.data.action&&function(e,t){t.gopInfo=e.data.gopInfo}(n,y),"audioTimingInfo"===n.data.action&&d(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&c(n.data.videoTimingInfo),"videoSegmentTimingInfo"===n.data.action&&l(n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&u(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&p([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&f(n.data.caption),"endedtimeline"===n.data.action&&(b=!1,g()),"log"===n.data.action&&m(n.data.log),"transmuxed"===n.data.type&&(b||(t.onmessage=null,function(e){var t=e.transmuxedData,n=e.callback;t.buffer=[],n(t)}({transmuxedData:y,callback:h}),kI(t))))},r&&t.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(i)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),void 0!==o&&t.postMessage({action:"setRemux",remux:o}),n.byteLength){var _=n instanceof ArrayBuffer?n:n.buffer,w=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:_,byteOffset:w,byteLength:n.byteLength},[_])}v&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},kI=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():SI(e.currentTransmux))},CI=function(e,t){e.postMessage({action:t}),kI(e)},EI=function(e){!function(e,t){if(!t.currentTransmux)return t.currentTransmux=e,void CI(t,e);t.transmuxQueue.push(CI.bind(null,t,e))}("reset",e)},AI=function(e){var t=e.transmuxer,n=e.endAction||e.action,r=e.callback,i=xh({},e,{endAction:null,transmuxer:null,callback:null});if(t.addEventListener("message",(function i(o){o.data.action===n&&(t.removeEventListener("message",i),o.data.data&&(o.data.data=new Uint8Array(o.data.data,e.byteOffset||0,e.byteLength||o.data.data.byteLength),e.data&&(e.data=o.data.data)),r(o.data))})),e.data){var o=e.data instanceof ArrayBuffer;i.byteOffset=o?0:e.data.byteOffset,i.byteLength=e.data.byteLength;var a=[o?e.data:e.data.buffer];t.postMessage(i,a)}else t.postMessage(i)},PI=-101,xI=-102,OI=function(e){e.forEach((function(e){e.abort()}))},DI=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:PI,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:xI,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:2,xhr:t}:null},RI=function(e,t,n){return function(r,i){var o=i.response,a=DI(r,i);if(a)return n(a,e);if(16!==o.byteLength)return n({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:2,xhr:i},e);for(var s=new DataView(o),d=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),c=0;c<t.length;c++)t[c].bytes=d;return n(null,e)}},MI=function(e,t){var n=Bm(e.map.bytes);if("mp4"!==n){var r=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+r,code:2})}AI({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(n){var r=n.tracks,i=n.data;return e.map.bytes=i,r.forEach((function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"==typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))})),t(null)}})},NI=function(e){var t=e.segment,n=e.bytes,r=e.trackInfoFn,i=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,a=e.audioSegmentTimingInfoFn,s=e.id3Fn,d=e.captionsFn,c=e.isEndOfTimeline,l=e.endedTimelineFn,u=e.dataFn,p=e.doneFn,f=e.onTransmuxerLog,h=t.map&&t.map.tracks||{},g=Boolean(h.audio&&h.video),m=i.bind(null,t,"audio","start"),v=i.bind(null,t,"audio","end"),y=i.bind(null,t,"video","start"),b=i.bind(null,t,"video","end");AI({action:"probeTs",transmuxer:t.transmuxer,data:n,baseStartTime:t.baseStartTime,callback:function(e){t.bytes=n=e.data;var i=e.result;i&&(r(t,{hasAudio:i.hasAudio,hasVideo:i.hasVideo,isMuxed:g}),r=null,i.hasAudio&&!g&&m(i.audioStart),i.hasVideo&&y(i.videoStart),m=null,y=null),function(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void SI(e);e.transmuxer.transmuxQueue.push(e)}({bytes:n,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:g,onData:function(e){e.type="combined"===e.type?"video":e.type,u(t,e)},onTrackInfo:function(e){r&&(g&&(e.isMuxed=!0),r(t,e))},onAudioTimingInfo:function(e){m&&void 0!==e.start&&(m(e.start),m=null),v&&void 0!==e.end&&v(e.end)},onVideoTimingInfo:function(e){y&&void 0!==e.start&&(y(e.start),y=null),b&&void 0!==e.end&&b(e.end)},onVideoSegmentTimingInfo:function(e){o(e)},onAudioSegmentTimingInfo:function(e){a(e)},onId3:function(e,n){s(t,e,n)},onCaptions:function(e){d(t,[e])},isEndOfTimeline:c,onEndedTimeline:function(){l()},onTransmuxerLog:f,onDone:function(e){p&&(e.type="combined"===e.type?"video":e.type,p(null,t,e))}})}})},UI=function(e){var t=e.segment,n=e.bytes,r=e.trackInfoFn,i=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,a=e.audioSegmentTimingInfoFn,s=e.id3Fn,d=e.captionsFn,c=e.isEndOfTimeline,l=e.endedTimelineFn,u=e.dataFn,p=e.doneFn,f=e.onTransmuxerLog,h=new Uint8Array(n);if(function(e){return Tm(e,["moof"]).length>0}(h)){t.isFmp4=!0;var g=t.map.tracks,m={isFmp4:!0,hasVideo:!!g.video,hasAudio:!!g.audio};g.audio&&g.audio.codec&&"enca"!==g.audio.codec&&(m.audioCodec=g.audio.codec),g.video&&g.video.codec&&"encv"!==g.video.codec&&(m.videoCodec=g.video.codec),g.video&&g.audio&&(m.isMuxed=!0),r(t,m);var v=function(e){u(t,{data:h,type:m.hasAudio&&!m.isMuxed?"audio":"video"}),e&&e.length&&d(t,e),p(null,t,{})};AI({action:"probeMp4StartTime",timescales:t.map.timescales,data:h,transmuxer:t.transmuxer,callback:function(e){var r=e.data,o=e.startTime;n=r.buffer,t.bytes=h=r,m.hasAudio&&!m.isMuxed&&i(t,"audio","start",o),m.hasVideo&&i(t,"video","start",o),g.video&&r.byteLength&&t.transmuxer?AI({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:h,timescales:t.map.timescales,trackIds:[g.video.id],callback:function(e){n=e.data.buffer,t.bytes=h=e.data,e.logs.forEach((function(e){f(nT.mergeOptions(e,{stream:"mp4CaptionParser"}))})),v(e.captions)}}):v()}})}else if(t.transmuxer){if(void 0===t.container&&(t.container=Bm(h)),"ts"!==t.container&&"aac"!==t.container)return r(t,{hasAudio:!1,hasVideo:!1}),void p(null,t,{});NI({segment:t,bytes:n,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:d,isEndOfTimeline:c,endedTimelineFn:l,dataFn:u,doneFn:p,onTransmuxerLog:f})}else p(null,t,{})},LI=function(e,t){var n,r=e.id,i=e.key,o=e.encryptedBytes,a=e.decryptionWorker;a.addEventListener("message",(function e(n){if(n.data.source===r){a.removeEventListener("message",e);var i=n.data.decrypted;t(new Uint8Array(i.bytes,i.byteOffset,i.byteLength))}})),n=i.bytes.slice?i.bytes.slice():new Uint32Array(Array.prototype.slice.call(i.bytes)),a.postMessage(iI({source:r,encrypted:o,key:n,iv:i.iv}),[o.buffer,n.buffer])},jI=function(e){var t=e.xhr,n=e.xhrOptions,r=e.decryptionWorker,i=e.segment,o=e.abortFn,a=e.progressFn,s=e.trackInfoFn,d=e.timingInfoFn,c=e.videoSegmentTimingInfoFn,l=e.audioSegmentTimingInfoFn,u=e.id3Fn,p=e.captionsFn,f=e.isEndOfTimeline,h=e.endedTimelineFn,g=e.dataFn,m=e.doneFn,v=e.onTransmuxerLog,y=[],b=function(e){var t=e.activeXhrs,n=e.decryptionWorker,r=e.trackInfoFn,i=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,a=e.audioSegmentTimingInfoFn,s=e.id3Fn,d=e.captionsFn,c=e.isEndOfTimeline,l=e.endedTimelineFn,u=e.dataFn,p=e.doneFn,f=e.onTransmuxerLog,h=0,g=!1;return function(e,m){if(!g){if(e)return g=!0,OI(t),p(e,m);if((h+=1)===t.length){var v=function(){if(m.encryptedBytes)return function(e){var t=e.decryptionWorker,n=e.segment,r=e.trackInfoFn,i=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,a=e.audioSegmentTimingInfoFn,s=e.id3Fn,d=e.captionsFn,c=e.isEndOfTimeline,l=e.endedTimelineFn,u=e.dataFn,p=e.doneFn,f=e.onTransmuxerLog;LI({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:t},(function(e){n.bytes=e,UI({segment:n,bytes:n.bytes,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:d,isEndOfTimeline:c,endedTimelineFn:l,dataFn:u,doneFn:p,onTransmuxerLog:f})}))}({decryptionWorker:n,segment:m,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:d,isEndOfTimeline:c,endedTimelineFn:l,dataFn:u,doneFn:p,onTransmuxerLog:f});UI({segment:m,bytes:m.bytes,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:d,isEndOfTimeline:c,endedTimelineFn:l,dataFn:u,doneFn:p,onTransmuxerLog:f})};if(m.endOfAllRequests=Date.now(),m.map&&m.map.encryptedBytes&&!m.map.bytes)return LI({decryptionWorker:n,id:m.requestId+"-init",encryptedBytes:m.map.encryptedBytes,key:m.map.key},(function(e){m.map.bytes=e,MI(m,(function(e){if(e)return OI(t),p(e,m);v()}))}));v()}}}}({activeXhrs:y,decryptionWorker:r,trackInfoFn:s,timingInfoFn:d,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:l,id3Fn:u,captionsFn:p,isEndOfTimeline:f,endedTimelineFn:h,dataFn:g,doneFn:m,onTransmuxerLog:v});if(i.key&&!i.key.bytes){var _=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&_.push(i.map.key);var w=t(nT.mergeOptions(n,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),RI(i,_,b));y.push(w)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){var T=t(nT.mergeOptions(n,{uri:i.map.key.resolvedUri,responseType:"arraybuffer"}),RI(i,[i.map.key],b));y.push(T)}var I=nT.mergeOptions(n,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:eI(i.map)}),S=function(e){var t=e.segment,n=e.finishProcessingFn;return function(e,r){var i=DI(e,r);if(i)return n(i,t);var o=new Uint8Array(r.response);if(t.map.key)return t.map.encryptedBytes=o,n(null,t);t.map.bytes=o,MI(t,(function(e){if(e)return e.xhr=r,e.status=r.status,n(e,t);n(null,t)}))}}({segment:i,finishProcessingFn:b}),k=t(I,S);y.push(k)}var C=nT.mergeOptions(n,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:eI(i)}),E=t(C,function(e){var t=e.segment,n=e.finishProcessingFn,r=e.responseType;return function(e,i){var o=DI(e,i);if(o)return n(o,t);var a="arraybuffer"!==r&&i.responseText?function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}(i.responseText.substring(t.lastReachedChar||0)):i.response;return t.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(i),t.key?t.encryptedBytes=new Uint8Array(a):t.bytes=new Uint8Array(a),n(null,t)}}({segment:i,finishProcessingFn:b,responseType:C.responseType}));E.addEventListener("progress",function(e){var t=e.segment,n=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(e){if(!e.target.aborted)return t.stats=nT.mergeOptions(t.stats,function(e){var t=e.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return n.bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n}(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(e,t)}}({segment:i,progressFn:a,trackInfoFn:s,timingInfoFn:d,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:l,id3Fn:u,captionsFn:p,isEndOfTimeline:f,endedTimelineFn:h,dataFn:g})),y.push(E);var A={};return y.forEach((function(e){e.addEventListener("loadend",function(e){var t=e.loadendState,n=e.abortFn;return function(e){e.target.aborted&&n&&!t.calledAbortFn&&(n(),t.calledAbortFn=!0)}}({loadendState:A,abortFn:o}))})),function(){return OI(y)}},BI=sT("CodecUtils"),qI=function(e,t){var n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},FI=function(e){var t={};return e.forEach((function(e){var n=e.mediaType,r=e.type,i=e.details;t[n]=t[n]||[],t[n].push(cg(""+r+i))})),Object.keys(t).forEach((function(e){if(t[e].length>1)return BI("multiple "+e+" codecs found as attributes: "+t[e].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(t[e]=null);t[e]=t[e][0]})),t},VI=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},zI=function(e,t){var n=t.attributes||{},r=FI(function(e){var t=e.attributes||{};if(t.CODECS)return lg(t.CODECS)}(t)||[]);if(qI(e,t)&&!r.audio&&!function(e,t){if(!qI(e,t))return!0;var n=t.attributes||{},r=e.mediaGroups.AUDIO[n.AUDIO];for(var i in r)if(!r[i].uri&&!r[i].playlists)return!0;return!1}(e,t)){var i=FI(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var r in n){var i=n[r];if(i.default&&i.playlists)return lg(i.playlists[0].attributes.CODECS)}return null}(e,n.AUDIO)||[]);i.audio&&(r.audio=i.audio)}return r},WI=sT("PlaylistSelector"),HI=function(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},ZI=function(e,t){if(!e)return"";var n=Eh().getComputedStyle(e);return n?n[t]:""},$I=function(e,t){var n=e.slice();e.sort((function(e,r){var i=t(e,r);return 0===i?n.indexOf(e)-n.indexOf(r):i}))},GI=function(e,t){var n,r;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||Eh().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),n-(r||Eh().Number.MAX_VALUE)},KI=function(e,t,n,r,i,o){if(e){var a={bandwidth:t,width:n,height:r,limitRenditionByPlayerDimensions:i},s=e.playlists;NT.isAudioOnly(e)&&(s=o.getAudioTrackPlaylists_(),a.audioOnly=!0);var d=s.map((function(e){var t=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes&&e.attributes.BANDWIDTH||Eh().Number.MAX_VALUE,width:t,height:n,playlist:e}}));$I(d,(function(e,t){return e.bandwidth-t.bandwidth}));var c=(d=d.filter((function(e){return!NT.isIncompatible(e.playlist)}))).filter((function(e){return NT.isEnabled(e.playlist)}));c.length||(c=d.filter((function(e){return!NT.isDisabled(e.playlist)})));var l=c.filter((function(e){return e.bandwidth*vI.BANDWIDTH_VARIANCE<t})),u=l[l.length-1],p=l.filter((function(e){return e.bandwidth===u.bandwidth}))[0];if(!1===i){var f=p||c[0]||d[0];if(f&&f.playlist){var h="sortedPlaylistReps";return p&&(h="bandwidthBestRep"),c[0]&&(h="enabledPlaylistReps"),WI("choosing "+HI(f)+" using "+h+" with options",a),f.playlist}return WI("could not choose a playlist with options",a),null}var g=l.filter((function(e){return e.width&&e.height}));$I(g,(function(e,t){return e.width-t.width}));var m=g.filter((function(e){return e.width===n&&e.height===r}));u=m[m.length-1];var v,y,b,_,w=m.filter((function(e){return e.bandwidth===u.bandwidth}))[0];if(w||(y=(v=g.filter((function(e){return e.width>n||e.height>r}))).filter((function(e){return e.width===v[0].width&&e.height===v[0].height})),u=y[y.length-1],b=y.filter((function(e){return e.bandwidth===u.bandwidth}))[0]),o.experimentalLeastPixelDiffSelector){var T=g.map((function(e){return e.pixelDiff=Math.abs(e.width-n)+Math.abs(e.height-r),e}));$I(T,(function(e,t){return e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff})),_=T[0]}var I=_||b||w||p||c[0]||d[0];if(I&&I.playlist){var S="sortedPlaylistReps";return _?S="leastPixelDiffRep":b?S="resolutionPlusOneRep":w?S="resolutionBestRep":p?S="bandwidthBestRep":c[0]&&(S="enabledPlaylistReps"),WI("choosing "+HI(I)+" using "+S+" with options",a),I.playlist}return WI("could not choose a playlist with options",a),null}},XI=function(){var e=this.useDevicePixelRatio&&Eh().devicePixelRatio||1;return KI(this.playlists.master,this.systemBandwidth,parseInt(ZI(this.tech_.el(),"width"),10)*e,parseInt(ZI(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},JI=function(e,t,n){var r,i;if(n&&n.cues)for(r=n.cues.length;r--;)(i=n.cues[r]).startTime>=e&&i.endTime<=t&&n.removeCue(i)},YI=function(e){return"number"==typeof e&&isFinite(e)},QI=1/60,eS=function(e){var t=e.startOfSegment,n=e.duration,r=e.segment,i=e.part,o=e.playlist,a=o.mediaSequence,s=o.id,d=o.segments,c=void 0===d?[]:d,l=e.mediaIndex,u=e.partIndex,p=e.timeline,f=c.length-1,h="mediaIndex/partIndex increment";e.getMediaInfoForTime?h="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(h="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(h+=" with independent "+e.independent);var g="number"==typeof u,m=e.segment.uri?"segment":"pre-segment",v=g?wT({preloadSegment:r})-1:0;return m+" ["+(a+l)+"/"+(a+f)+"]"+(g?" part ["+u+"/"+v+"]":"")+" segment start/end ["+r.start+" => "+r.end+"]"+(g?" part start/end ["+i.start+" => "+i.end+"]":"")+" startOfSegment ["+t+"] duration ["+n+"] timeline ["+p+"] selected by ["+h+"] playlist ["+s+"]"},tS=function(e){return e+"TimingInfo"},nS=function(e){var t=e.timelineChangeController,n=e.currentTimeline,r=e.segmentTimeline,i=e.loaderType,o=e.audioDisabled;if(n===r)return!1;if("audio"===i){var a=t.lastTimelineChange({type:"main"});return!a||a.to!==r}if("main"===i&&o){var s=t.pendingTimelineChange({type:"audio"});return!s||s.to!==r}return!1},rS=function(e){var t=e.segmentDuration,n=e.maxDuration;return!!t&&Math.round(t)>n+dT},iS=function(e){function t(t,n){var r;if(r=e.call(this)||this,!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return r.bandwidth=t.bandwidth,r.throughput={rate:0,count:0},r.roundTrip=NaN,r.resetStats_(),r.mediaIndex=null,r.partIndex=null,r.hasPlayed_=t.hasPlayed,r.currentTime_=t.currentTime,r.seekable_=t.seekable,r.seeking_=t.seeking,r.duration_=t.duration,r.mediaSource_=t.mediaSource,r.vhs_=t.vhs,r.loaderType_=t.loaderType,r.currentMediaInfo_=void 0,r.startingMediaInfo_=void 0,r.segmentMetadataTrack_=t.segmentMetadataTrack,r.goalBufferLength_=t.goalBufferLength,r.sourceType_=t.sourceType,r.sourceUpdater_=t.sourceUpdater,r.inbandTextTracks_=t.inbandTextTracks,r.state_="INIT",r.timelineChangeController_=t.timelineChangeController,r.shouldSaveSegmentTimingInfo_=!0,r.parse708captions_=t.parse708captions,r.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,r.captionServices_=t.captionServices,r.experimentalExactManifestTimings=t.experimentalExactManifestTimings,r.checkBufferTimeout_=null,r.error_=void 0,r.currentTimeline_=-1,r.pendingSegment_=null,r.xhrOptions_=null,r.pendingSegments_=[],r.audioDisabled_=!1,r.isPendingTimestampOffset_=!1,r.gopBuffer_=[],r.timeMapping_=0,r.safeAppend_=nT.browser.IE_VERSION>=11,r.appendInitSegment_={audio:!0,video:!0},r.playlistOfLastInitSegment_={audio:null,video:null},r.callQueue_=[],r.loadQueue_=[],r.metadataQueue_={id3:[],caption:[]},r.waitingOnRemove_=!1,r.quotaExceededErrorRetryTimeout_=null,r.activeInitSegmentId_=null,r.initSegments_={},r.cacheEncryptionKeys_=t.cacheEncryptionKeys,r.keyCache_={},r.decrypter_=t.decrypter,r.syncController_=t.syncController,r.syncPoint_={segmentIndex:0,time:0},r.transmuxer_=r.createTransmuxer_(),r.triggerSyncInfoUpdate_=function(){return r.trigger("syncinfoupdate")},r.syncController_.on("syncinfoupdate",r.triggerSyncInfoUpdate_),r.mediaSource_.addEventListener("sourceopen",(function(){r.isEndOfStream_()||(r.ended_=!1)})),r.fetchAtBuffer_=!1,r.logger_=sT("SegmentLoader["+r.loaderType_+"]"),Object.defineProperty(Rh(r),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),r.sourceUpdater_.on("ready",(function(){r.hasEnoughInfoToAppend_()&&r.processCallQueue_()})),"main"===r.loaderType_&&r.timelineChangeController_.on("pendingtimelinechange",(function(){r.hasEnoughInfoToAppend_()&&r.processCallQueue_()})),"audio"===r.loaderType_&&r.timelineChangeController_.on("timelinechange",(function(){r.hasEnoughInfoToLoad_()&&r.processLoadQueue_(),r.hasEnoughInfoToAppend_()&&r.processCallQueue_()})),r}Nh(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return function(e){var t=new II;t.currentTransmux=null,t.transmuxQueue=[];var n=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)},t.postMessage({action:"init",options:e}),t}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},n.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},n.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Eh().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},n.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},n.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},n.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Eh().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},n.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},n.error=function(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},n.endOfStream=function(){this.ended_=!0,this.transmuxer_&&EI(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},n.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return nT.createTimeRanges();if("main"===this.loaderType_){var t=e.hasAudio,n=e.hasVideo,r=e.isMuxed;if(n&&t&&!this.audioDisabled_&&!r)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=oI(e),r=this.initSegments_[n];return t&&!r&&e.bytes&&(this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),r||e},n.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=aI(e),r=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!r&&e.bytes&&(this.keyCache_[n]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});var i={resolvedUri:(r||e).resolvedUri};return r&&(i.bytes=r.bytes),i},n.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},n.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.playlist=function(e,t){if(void 0===t&&(t={}),e){var n=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var i=null;if(n&&(n.id?i=n.id:n.uri&&(i=n.uri)),this.logger_("playlist update ["+i+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var o=e.mediaSequence-n.mediaSequence;if(this.logger_("live window shift ["+o+"]"),null!==this.mediaIndex)if(this.mediaIndex-=o,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var a=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!a.parts||!a.parts.length||!a.parts[this.partIndex])){var s=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=s}}r&&(r.mediaIndex-=o,r.mediaIndex<0?(r.mediaIndex=null,r.partIndex=null):(r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex]),r.partIndex>=0&&r.segment.parts&&(r.part=r.segment.parts[r.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}},n.pause=function(){this.checkBufferTimeout_&&(Eh().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},n.paused=function(){return null===this.checkBufferTimeout_},n.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},n.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},n.resyncLoader=function(){this.transmuxer_&&EI(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},n.remove=function(e,t,n,r){if(void 0===n&&(n=function(){}),void 0===r&&(r=!1),t===1/0&&(t=this.duration_()),t<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var i=1,o=function(){0==--i&&n()};for(var a in!r&&this.audioDisabled_||(i++,this.sourceUpdater_.removeAudio(e,t,o)),(r||"main"===this.loaderType_)&&(this.gopBuffer_=function(e,t,n,r){for(var i=Math.ceil((t-r)*qm.ONE_SECOND_IN_TS),o=Math.ceil((n-r)*qm.ONE_SECOND_IN_TS),a=e.slice(),s=e.length;s--&&!(e[s].pts<=o););if(-1===s)return a;for(var d=s+1;d--&&!(e[d].pts<=i););return d=Math.max(d,0),a.splice(d,s-d+1),a}(this.gopBuffer_,e,t,this.timeMapping_),i++,this.sourceUpdater_.removeVideo(e,t,o)),this.inbandTextTracks_)JI(e,t,this.inbandTextTracks_[a]);JI(e,t,this.segmentMetadataTrack_),o()}else this.logger_("skipping remove because no source updater or starting media info")},n.monitorBuffer_=function(){this.checkBufferTimeout_&&Eh().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Eh().setTimeout(this.monitorBufferTick_.bind(this),1)},n.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Eh().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Eh().setTimeout(this.monitorBufferTick_.bind(this),500)},n.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},n.isEndOfStream_=function(e,t,n){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),void 0===n&&(n=this.partIndex),!t||!this.mediaSource_)return!1;var r="number"==typeof e&&t.segments[e],i=e+1===t.segments.length,o=!r||!r.parts||n+1===r.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&i&&o},n.chooseNextRequest_=function(){var e=this.buffered_(),t=gT(e)||0,n=mT(e,this.currentTime_()),r=!this.hasPlayed_()&&n>=1,i=n>=this.goalBufferLength_(),o=this.playlist_.segments;if(!o.length||r||i)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var a={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(a.isSyncRequest)a.mediaIndex=function(e,t,n){t=t||[];for(var r=[],i=0,o=0;o<t.length;o++){var a=t[o];if(e===a.timeline&&(r.push(o),(i+=a.duration)>n))return o}return 0===r.length?0:r[r.length-1]}(this.currentTimeline_,o,t);else if(null!==this.mediaIndex){var s=o[this.mediaIndex],d="number"==typeof this.partIndex?this.partIndex:-1;a.startOfSegment=s.end?s.end:t,s.parts&&s.parts[d+1]?(a.mediaIndex=this.mediaIndex,a.partIndex=d+1):a.mediaIndex=this.mediaIndex+1}else{var c=NT.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),l=c.segmentIndex,u=c.startTime,p=c.partIndex;a.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+t:"currentTime "+this.currentTime_(),a.mediaIndex=l,a.startOfSegment=u,a.partIndex=p}var f=o[a.mediaIndex],h=f&&"number"==typeof a.partIndex&&f.parts&&f.parts[a.partIndex];if(!f||"number"==typeof a.partIndex&&!h)return null;if("number"!=typeof a.partIndex&&f.parts&&(a.partIndex=0,h=f.parts[0]),!n&&h&&!h.independent)if(0===a.partIndex){var g=o[a.mediaIndex-1],m=g.parts&&g.parts.length&&g.parts[g.parts.length-1];m&&m.independent&&(a.mediaIndex-=1,a.partIndex=g.parts.length-1,a.independent="previous segment")}else f.parts[a.partIndex-1].independent&&(a.partIndex-=1,a.independent="previous part");var v=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return a.mediaIndex>=o.length-1&&v&&!this.seeking_()?null:this.generateSegmentInfo_(a)},n.generateSegmentInfo_=function(e){var t=e.independent,n=e.playlist,r=e.mediaIndex,i=e.startOfSegment,o=e.isSyncRequest,a=e.partIndex,s=e.forceTimestampOffset,d=e.getMediaInfoForTime,c=n.segments[r],l="number"==typeof a&&c.parts[a],u={requestId:"segment-loader-"+Math.random(),uri:l&&l.resolvedUri||c.resolvedUri,mediaIndex:r,partIndex:l?a:null,isSyncRequest:o,startOfSegment:i,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:l&&l.duration||c.duration,segment:c,part:l,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:d,independent:t},p=void 0!==s?s:this.isPendingTimestampOffset_;u.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:i,buffered:this.buffered_(),overrideCheck:p});var f=gT(this.sourceUpdater_.audioBuffered());return"number"==typeof f&&(u.audioAppendStart=f-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(u.gopsToAlignWith=function(e,t,n){if(null==t||!e.length)return[];var r,i=Math.ceil((t-n+3)*qm.ONE_SECOND_IN_TS);for(r=0;r<e.length&&!(e[r].pts>i);r++);return e.slice(r)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),u},n.timestampOffsetForSegment_=function(e){return n=(t=e).segmentTimeline,r=t.currentTimeline,i=t.startOfSegment,o=t.buffered,t.overrideCheck||n!==r?n<r?i:o.length?o.end(o.length-1):i:null;var t,n,r,i,o},n.earlyAbortWhenNeeded_=function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var t=this.currentTime_(),n=e.bandwidth,r=this.pendingSegment_.duration,i=NT.estimateSegmentRequestTime(r,n,this.playlist_,e.bytesReceived),o=function(e,t,n){return void 0===n&&(n=1),((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(!(i<=o)){var a=function(e){var t=e.currentTime,n=e.bandwidth,r=e.duration,i=e.segmentDuration,o=e.timeUntilRebuffer,a=e.currentTimeline,s=e.syncController,d=e.master.playlists.filter((function(e){return!NT.isIncompatible(e)})),c=d.filter(NT.isEnabled);c.length||(c=d.filter((function(e){return!NT.isDisabled(e)})));var l=c.filter(NT.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var d=s.getSyncPoint(e,r,a,t)?1:2;return{playlist:e,rebufferingImpact:NT.estimateSegmentRequestTime(i,n,e)*d-o}})),u=l.filter((function(e){return e.rebufferingImpact<=0}));return $I(u,(function(e,t){return GI(t.playlist,e.playlist)})),u.length?u[0]:($I(l,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),l[0]||null)}({master:this.vhs_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:o,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(a){var s=i-o-a.rebufferingImpact,d=.5;o<=dT&&(d=1),!a.playlist||a.playlist.uri===this.playlist_.uri||s<d||(this.bandwidth=a.playlist.attributes.BANDWIDTH*vI.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},n.handleAbort_=function(e){this.logger_("Aborting "+eS(e)),this.mediaRequestsAborted+=1},n.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")},n.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var n=Object.keys(e).sort(),r=Object.keys(t).sort();if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(o!==r[i])return!1;if(e[o]!==t[o])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},n.handleTimingInfo_=function(e,t,n,r){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var i=this.pendingSegment_,o=tS(t);i[o]=i[o]||{},i[o][n]=r,this.logger_("timinginfo: "+t+" - "+n+" - "+r),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},n.handleCaptions_=function(e,t){var n=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(0!==t.length)if(this.pendingSegment_.hasAppendedData_){var r=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),i={};t.forEach((function(e){i[e.stream]=i[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=i[e.stream];t.startTime=Math.min(t.startTime,e.startTime+r),t.endTime=Math.max(t.endTime,e.endTime+r),t.captions.push(e)})),Object.keys(i).forEach((function(e){var t=i[e],o=t.startTime,a=t.endTime,s=t.captions,d=n.inbandTextTracks_;n.logger_("adding cues from "+o+" -> "+a+" for "+e),function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var r=n;/^cc708_/.test(n)&&(r="SERVICE"+n.split("_")[1]);var i=t.textTracks().getTrackById(r);if(i)e[n]=i;else{var o=n,a=n,s=!1,d=(t.options_.vhs&&t.options_.vhs.captionServices||{})[r];d&&(o=d.label,a=d.language,s=d.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:r,default:s,label:o,language:a},!1).track}}}(d,n.vhs_.tech_,e),JI(o,a,d[e]),function(e){var t=e.inbandTextTracks,n=e.captionArray,r=e.timestampOffset;if(n){var i=Eh().WebKitDataCue||Eh().VTTCue;n.forEach((function(e){var n=e.stream;t[n].addCue(new i(e.startTime+r,e.endTime+r,e.text))}))}}({captionArray:s,inbandTextTracks:d,timestampOffset:r})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));else this.logger_("SegmentLoader received no captions from a caption event")},n.handleId3_=function(e,t,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(this.pendingSegment_.hasAppendedData_){var r=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(e,t,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(this.inbandTextTracks_,n,this.vhs_.tech_),function(e){var t=e.inbandTextTracks,n=e.metadataArray,r=e.timestampOffset,i=e.videoDuration;if(n){var o=Eh().WebKitDataCue||Eh().VTTCue,a=t.metadataTrack_;if(a&&(n.forEach((function(e){var t=e.cueTime+r;!("number"!=typeof t||Eh().isNaN(t)||t<0)&&t<1/0&&e.frames.forEach((function(e){var n=new o(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return nT.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return nT.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return nT.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(n),a.addCue(n)}))})),a.cues&&a.cues.length)){for(var s=a.cues,d=[],c=0;c<s.length;c++)s[c]&&d.push(s[c]);var l=d.reduce((function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),u=Object.keys(l).sort((function(e,t){return Number(e)-Number(t)}));u.forEach((function(e,t){var n=l[e],r=Number(u[t+1])||i;n.forEach((function(e){e.endTime=r}))}))}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:r,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n))},n.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach((function(e){return e()})),this.metadataQueue_.caption.forEach((function(e){return e()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},n.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach((function(e){return e()}))},n.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach((function(e){return e()}))},n.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&nS({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.getCurrentMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),e&&e.trackInfo||this.currentMediaInfo_},n.getMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},n.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;var n=t.hasAudio,r=t.hasVideo,i=t.isMuxed;return!(r&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!i&&!e.audioTimingInfo||nS({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[tS(t.type)].start;else{var r,i=this.getCurrentMediaInfo_(),o="main"===this.loaderType_&&i&&i.hasVideo;o&&(r=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:o,firstVideoFrameTimeForData:r,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});var a=this.chooseNextRequest_();if(a.mediaIndex!==n.mediaIndex||a.partIndex!==n.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},n.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},n.getInitSegmentAndUpdateState_=function(e){var t=e.type,n=e.initSegment,r=e.map,i=e.playlist;if(r){var o=oI(r);if(this.activeInitSegmentId_===o)return null;n=this.initSegmentForMap(r,!0).bytes,this.activeInitSegmentId_=o}return n&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=i,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,n):null},n.handleQuotaExceededError_=function(e,t){var n=this,r=e.segmentInfo,i=e.type,o=e.bytes,a=this.sourceUpdater_.audioBuffered(),s=this.sourceUpdater_.videoBuffered();a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+hT(a).join(", ")),s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+hT(s).join(", "));var d=a.length?a.start(0):0,c=a.length?a.end(a.length-1):0,l=s.length?s.start(0):0,u=s.length?s.end(s.length-1):0;if(c-d<=1&&u-l<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+o.byteLength+", audio buffer: "+hT(a).join(", ")+", video buffer: "+hT(s).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:r,type:i,bytes:o}));var p=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+p),this.remove(0,p,(function(){n.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=Eh().setTimeout((function(){n.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),n.quotaExceededErrorRetryTimeout_=null,n.processCallQueue_()}),1e3)}),!0)},n.handleAppendError_=function(e,t){var n=e.segmentInfo,r=e.type,i=e.bytes;t&&(22!==t.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",t),this.error(r+" append of "+i.length+"b failed for segment #"+n.mediaIndex+" in playlist "+n.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:n,type:r,bytes:i}))},n.appendToSourceBuffer_=function(e){var t,n,r,i=e.segmentInfo,o=e.type,a=e.initSegment,s=e.data,d=e.bytes;if(!d){var c=[s],l=s.byteLength;a&&(c.unshift(a),l+=a.byteLength),r=0,(t={bytes:l,segments:c}).bytes&&(n=new Uint8Array(t.bytes),t.segments.forEach((function(e){n.set(e,r),r+=e.byteLength}))),d=n}this.sourceUpdater_.appendBuffer({segmentInfo:i,type:o,bytes:d},this.handleAppendError_.bind(this,{segmentInfo:i,type:o,bytes:d}))},n.handleSegmentTimingInfo_=function(e,t,n){if(this.pendingSegment_&&t===this.pendingSegment_.requestId){var r=this.pendingSegment_.segment,i=e+"TimingInfo";r[i]||(r[i]={}),r[i].transmuxerPrependedSeconds=n.prependedContentDuration||0,r[i].transmuxedPresentationStart=n.start.presentation,r[i].transmuxedDecodeStart=n.start.decode,r[i].transmuxedPresentationEnd=n.end.presentation,r[i].transmuxedDecodeEnd=n.end.decode,r[i].baseMediaDecodeTime=n.baseMediaDecodeTime}},n.appendData_=function(e,t){var n=t.type,r=t.data;if(r&&r.byteLength&&("audio"!==n||!this.audioDisabled_)){var i=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:i,data:r})}},n.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((function(){var n=xh({},e,{forceTimestampOffset:!0});xh(e,t.generateSegmentInfo_(n)),t.isPendingTimestampOffset_=!1,t.updateTransmuxerAndRequestSegment_(e)}))},n.updateTransmuxerAndRequestSegment_=function(e){var t=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var n=this.createSimplifiedSegmentObj_(e),r=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),i=null!==this.mediaIndex,o=e.timeline!==this.currentTimeline_&&e.timeline>0,a=r||i&&o;this.logger_("Requesting "+eS(e)),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=jI({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:function(){t.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(n){var r=n.message,i=n.level,o=n.stream;t.logger_(eS(e)+" logged from transmuxer stream "+o+" as a "+i+": "+r)}})},n.trimBackBuffer_=function(e){var t=function(e,t,n){var r=t-vI.BACK_BUFFER_LENGTH;e.length&&(r=Math.max(r,e.start(0)));var i=t-n;return Math.min(i,r)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)},n.createSimplifiedSegmentObj_=function(e){var t=e.segment,n=e.part,r={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},i=e.playlist.segments[e.mediaIndex-1];if(i&&i.timeline===t.timeline&&(i.videoTimingInfo?r.baseStartTime=i.videoTimingInfo.transmuxedDecodeEnd:i.audioTimingInfo&&(r.baseStartTime=i.audioTimingInfo.transmuxedDecodeEnd)),t.key){var o=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);r.key=this.segmentKey(t.key),r.key.iv=o}return t.map&&(r.map=this.initSegmentForMap(t.map)),r},n.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},n.saveBandwidthRelatedStats_=function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<QI?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record "+QI):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)},n.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},n.segmentRequestFinished_=function(e,t,n){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===xI)return;return this.pause(),e.code===PI?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}var r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),r.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var r=t[0].pts,i=0;i<e.length&&!(e[i].pts>=r);i++);return e.slice(0,i).concat(t)}(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(r)}},n.setTimeMapping_=function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)},n.updateMediaSecondsLoaded_=function(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},n.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},n.trueSegmentStart_=function(e){var t=e.currentStart,n=e.playlist,r=e.mediaIndex,i=e.firstVideoFrameTimeForData,o=e.currentVideoTimestampOffset,a=e.useVideoTimingInfo,s=e.videoTimingInfo,d=e.audioTimingInfo;if(void 0!==t)return t;if(!a)return d.start;var c=n.segments[r-1];return 0!==r&&c&&void 0!==c.start&&c.end===i+o?s.start:i},n.waitForAppendsToComplete_=function(e){var t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var n=t.hasAudio,r=t.hasVideo,i=t.isMuxed,o="main"===this.loaderType_&&r,a=!this.audioDisabled_&&n&&!i;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);o&&e.waitingOnAppends++,a&&e.waitingOnAppends++,o&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),a&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},n.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},n.checkForIllegalMediaSwitch=function(e){var t=function(e,t,n){return"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,blacklistDuration:1/0}),this.trigger("error"),!0)},n.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"==typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},n.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var t=e.videoTimingInfo,n=e.audioTimingInfo,r=e.timingInfo;return this.useDtsForTimestampOffset_?t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:n&&"number"==typeof n.transmuxedDecodeStart?n.transmuxedDecodeStart:r.start:r.start},n.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t=this.getMediaInfo_(),n="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end="number"==typeof n.end?n.end:n.start+e.duration)},n.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});var t=function(e,t){if("hls"!==t)return null;var n,r,i=(n={audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo},r=0,["video","audio"].forEach((function(e){var t=n[e+"TimingInfo"];if(t){var i,o=t.start,a=t.end;"bigint"==typeof o||"bigint"==typeof a?i=Eh().BigInt(a)-Eh().BigInt(o):"number"==typeof o&&"number"==typeof a&&(i=a-o),void 0!==i&&i>r&&(r=i)}})),"bigint"==typeof r&&r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r);if(!i)return null;var o=e.playlist.targetDuration,a=rS({segmentDuration:i,maxDuration:2*o}),s=rS({segmentDuration:i,maxDuration:o}),d="Segment with index "+e.mediaIndex+" from playlist "+e.playlist.id+" has a duration of "+i+" when the reported duration is "+e.duration+" and the target duration is "+o+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return a||s?{severity:a?"warn":"info",message:d}:null}(e,this.sourceType_);if(t&&("warn"===t.severity?nT.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)){this.logger_("Appended "+eS(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var n=e.segment,r=e.part,i=n.end&&this.currentTime_()-n.end>3*e.playlist.targetDuration,o=r&&r.end&&this.currentTime_()-r.end>3*e.playlist.partTargetDuration;if(i||o)return this.logger_("bad "+(i?"segment":"part")+" "+eS(e)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+eS(e))},n.recordThroughput_=function(e){if(e.duration<QI)this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record "+QI);else{var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(r-t)/++this.throughput.count}},n.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,r=t.end;if(YI(n)&&YI(r)){JI(n,r,this.segmentMetadataTrack_);var i=Eh().WebKitDataCue||Eh().VTTCue,o={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:r},a=new i(n,r,JSON.stringify(o));a.value=o,this.segmentMetadataTrack_.addCue(a)}}},t}(nT.EventTarget);function oS(){}var aS,sS=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))},dS=["video","audio"],cS=function(e,t){var n=t[e+"Buffer"];return n&&n.updating||t.queuePending[e]},lS=function e(t,n){if(0!==n.queue.length){var r=0,i=n.queue[r];if("mediaSource"!==i.type){if("mediaSource"!==t&&n.ready()&&"closed"!==n.mediaSource.readyState&&!cS(t,n)){if(i.type!==t){if(r=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("mediaSource"===r.type)return null;if(r.type===e)return n}return null}(t,n.queue),null===r)return;i=n.queue[r]}return n.queue.splice(r,1),n.queuePending[t]=i,i.action(t,n),i.doneFn?void 0:(n.queuePending[t]=null,void e(t,n))}}else n.updating()||"closed"===n.mediaSource.readyState||(n.queue.shift(),i.action(n),i.doneFn&&i.doneFn(),e("audio",n),e("video",n))}},uS=function(e,t){var n=t[e+"Buffer"],r=sS(e);n&&(n.removeEventListener("updateend",t["on"+r+"UpdateEnd_"]),n.removeEventListener("error",t["on"+r+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},pS=function(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)},fS=function(e,t,n){return function(r,i){var o=i[r+"Buffer"];if(pS(i.mediaSource,o)){i.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+r+"Buffer");try{o.appendBuffer(e)}catch(e){i.logger_("Error with code "+e.code+" "+(22===e.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+t.mediaIndex+" to "+r+"Buffer"),i.queuePending[r]=null,n(e)}}}},hS=function(e,t){return function(n,r){var i=r[n+"Buffer"];if(pS(r.mediaSource,i)){r.logger_("Removing "+e+" to "+t+" from "+n+"Buffer");try{i.remove(e,t)}catch(i){r.logger_("Remove "+e+" to "+t+" from "+n+"Buffer failed")}}}},gS=function(e){return function(t,n){var r=n[t+"Buffer"];pS(n.mediaSource,r)&&(n.logger_("Setting "+t+"timestampOffset to "+e),r.timestampOffset=e)}},mS=function(e){return function(t,n){e()}},vS=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(e){nT.log.warn("Failed to call media source endOfStream",e)}}}},yS=function(e,t){return function(n){var r=sS(e),i=pg(t);n.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var o=n.mediaSource.addSourceBuffer(i);o.addEventListener("updateend",n["on"+r+"UpdateEnd_"]),o.addEventListener("error",n["on"+r+"Error_"]),n.codecs[e]=t,n[e+"Buffer"]=o}},bS=function(e){return function(t){var n=t[e+"Buffer"];if(uS(e,t),pS(t.mediaSource,n)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(n)}catch(t){nT.log.warn("Failed to removeSourceBuffer "+e+"Buffer",t)}}}},_S=function(e){return function(t,n){var r=n[t+"Buffer"],i=pg(e);pS(n.mediaSource,r)&&n.codecs[t]!==e&&(n.logger_("changing "+t+"Buffer codec from "+n.codecs[t]+" to "+e),r.changeType(i),n.codecs[t]=e)}},wS=function(e){var t=e.type,n=e.sourceUpdater,r=e.action,i=e.doneFn,o=e.name;n.queue.push({type:t,action:r,doneFn:i,name:o}),lS(t,n)},TS=function(e,t){return function(n){if(t.queuePending[e]){var r=t.queuePending[e].doneFn;t.queuePending[e]=null,r&&r(t[e+"Error_"])}lS(e,t)}},IS=function(e){function t(t){var n;return(n=e.call(this)||this).mediaSource=t,n.sourceopenListener_=function(){return lS("mediaSource",Rh(n))},n.mediaSource.addEventListener("sourceopen",n.sourceopenListener_),n.logger_=sT("SourceUpdater"),n.audioTimestampOffset_=0,n.videoTimestampOffset_=0,n.queue=[],n.queuePending={audio:null,video:null},n.delayedAudioAppendQueue_=[],n.videoAppendQueued_=!1,n.codecs={},n.onVideoUpdateEnd_=TS("video",Rh(n)),n.onAudioUpdateEnd_=TS("audio",Rh(n)),n.onVideoError_=function(e){n.videoError_=e},n.onAudioError_=function(e){n.audioError_=e},n.createdSourceBuffers_=!1,n.initializedEme_=!1,n.triggeredReady_=!1,n}Nh(t,e);var n=t.prototype;return n.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},n.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},n.hasInitializedAnyEme=function(){return this.initializedEme_},n.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},n.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},n.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},n.addSourceBuffer=function(e,t){wS({type:"mediaSource",sourceUpdater:this,action:yS(e,t),name:"addSourceBuffer"})},n.abort=function(e){wS({type:e,sourceUpdater:this,action:function(e,t){if("open"===t.mediaSource.readyState){var n=t[e+"Buffer"];if(pS(t.mediaSource,n)){t.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(t){nT.log.warn("Failed to abort on "+e+"Buffer",t)}}}},name:"abort"})},n.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?wS({type:"mediaSource",sourceUpdater:this,action:bS(e),name:"removeSourceBuffer"}):nT.log.error("removeSourceBuffer is not supported!")},n.canRemoveSourceBuffer=function(){return!nT.browser.IE_VERSION&&!nT.browser.IS_FIREFOX&&Eh().MediaSource&&Eh().MediaSource.prototype&&"function"==typeof Eh().MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return Eh().SourceBuffer&&Eh().SourceBuffer.prototype&&"function"==typeof Eh().SourceBuffer.prototype.changeType},n.canChangeType=function(){return this.constructor.canChangeType()},n.changeType=function(e,t){this.canChangeType()?wS({type:e,sourceUpdater:this,action:_S(t),name:"changeType"}):nT.log.error("changeType is not supported!")},n.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((function(n){var r=e[n];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(n,r);t.canChangeType()&&t.changeType(n,r)}))},n.appendBuffer=function(e,t){var n=this,r=e.segmentInfo,i=e.type,o=e.bytes;if(this.processedAppend_=!0,"audio"===i&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+o.length+" until video append");if(wS({type:i,sourceUpdater:this,action:fS(o,r||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===i){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var a=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+a.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,a.forEach((function(e){n.appendBuffer.apply(n,e)}))}},n.audioBuffered=function(){return pS(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:nT.createTimeRange()},n.videoBuffered=function(){return pS(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:nT.createTimeRange()},n.buffered=function(){var e=pS(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=pS(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var n=null,r=null,i=0,o=[],a=[];if(!(e&&e.length&&t&&t.length))return nT.createTimeRange();for(var s=e.length;s--;)o.push({time:e.start(s),type:"start"}),o.push({time:e.end(s),type:"end"});for(s=t.length;s--;)o.push({time:t.start(s),type:"start"}),o.push({time:t.end(s),type:"end"});for(o.sort((function(e,t){return e.time-t.time})),s=0;s<o.length;s++)"start"===o[s].type?2==++i&&(n=o[s].time):"end"===o[s].type&&1==--i&&(r=o[s].time),null!==n&&null!==r&&(a.push([n,r]),n=null,r=null);return nT.createTimeRanges(a)}(this.audioBuffered(),this.videoBuffered())},n.setDuration=function(e,t){var n;void 0===t&&(t=oS),wS({type:"mediaSource",sourceUpdater:this,action:(n=e,function(e){e.logger_("Setting mediaSource duration to "+n);try{e.mediaSource.duration=n}catch(e){nT.log.warn("Failed to set media source duration",e)}}),name:"duration",doneFn:t})},n.endOfStream=function(e,t){void 0===e&&(e=null),void 0===t&&(t=oS),"string"!=typeof e&&(e=void 0),wS({type:"mediaSource",sourceUpdater:this,action:vS(e),name:"endOfStream",doneFn:t})},n.removeAudio=function(e,t,n){void 0===n&&(n=oS),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?wS({type:"audio",sourceUpdater:this,action:hS(e,t),doneFn:n,name:"remove"}):n()},n.removeVideo=function(e,t,n){void 0===n&&(n=oS),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?wS({type:"video",sourceUpdater:this,action:hS(e,t),doneFn:n,name:"remove"}):n()},n.updating=function(){return!(!cS("audio",this)&&!cS("video",this))},n.audioTimestampOffset=function(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(wS({type:"audio",sourceUpdater:this,action:gS(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},n.videoTimestampOffset=function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(wS({type:"video",sourceUpdater:this,action:gS(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},n.audioQueueCallback=function(e){this.audioBuffer&&wS({type:"audio",sourceUpdater:this,action:mS(e),name:"callback"})},n.videoQueueCallback=function(e){this.videoBuffer&&wS({type:"video",sourceUpdater:this,action:mS(e),name:"callback"})},n.dispose=function(){var e=this;this.trigger("dispose"),dS.forEach((function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"]((function(){return uS(t,e)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(nT.EventTarget),SS=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},kS=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),CS=function(e){function t(t,n){var r;return void 0===n&&(n={}),(r=e.call(this,t,n)||this).mediaSource_=null,r.subtitlesTrack_=null,r.loaderType_="subtitle",r.featuresNativeTextTracks_=t.featuresNativeTextTracks,r.shouldSaveSegmentTimingInfo_=!1,r}Nh(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return null},n.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return nT.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return nT.createTimeRanges([[t,n]])},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=oI(e),r=this.initSegments_[n];if(t&&!r&&e.bytes){var i=kS.byteLength+e.bytes.byteLength,o=new Uint8Array(i);o.set(e.bytes),o.set(kS,e.bytes.byteLength),this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:o}}return r||e},n.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.track=function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},n.remove=function(e,t){JI(e,t,this.subtitlesTrack_)},n.fillBuffer_=function(){var e=this,t=this.chooseNextRequest_();if(t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",(function(){e.state="READY",e.paused()||e.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}},n.timestampOffsetForSegment_=function(){return null},n.chooseNextRequest_=function(){return this.skipEmptySegments_(e.prototype.chooseNextRequest_.call(this))},n.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},n.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},n.segmentRequestFinished_=function(e,t,n){var r=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===PI&&this.handleTimeout_(),e.code===xI?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");var o=i.segment;if(o.map&&(o.map.bytes=t.map.bytes),i.bytes=t.bytes,"function"!=typeof Eh().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var a,s=function(){r.subtitlesTrack_.tech_.off("vttjsloaded",a),r.stopForError({message:"Error loading vtt.js"})};return a=function(){r.subtitlesTrack_.tech_.off("vttjserror",s),r.segmentRequestFinished_(e,t,n)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",a),void this.subtitlesTrack_.tech_.one("vttjserror",s)}o.requested=!0;try{this.parseVTTCues_(i)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.cues.length?i.timingInfo={start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:i.timingInfo={start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=o.duration,i.cues.forEach((function(e){r.subtitlesTrack_.addCue(r.featuresNativeTextTracks_?new(Eh().VTTCue)(e.startTime,e.endTime,e.text):e)})),function(e){var t=e.cues;if(t)for(var n=0;n<t.length;n++){for(var r=[],i=0,o=0;o<t.length;o++)t[n].startTime===t[o].startTime&&t[n].endTime===t[o].endTime&&t[n].text===t[o].text&&++i>1&&r.push(t[o]);r.length&&r.forEach((function(t){return e.removeCue(t)}))}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},n.handleData_=function(){},n.updateTimingInfoEnd_=function(){},n.parseVTTCues_=function(e){var t,n=!1;"function"==typeof Eh().TextDecoder?t=new(Eh().TextDecoder)("utf8"):(t=Eh().WebVTT.StringDecoder(),n=!0);var r=new(Eh().WebVTT.Parser)(Eh(),Eh().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=function(t){e.timestampmap=t},r.onparsingerror=function(e){nT.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var i=e.segment.map.bytes;n&&(i=SS(i)),r.parse(i)}var o=e.bytes;n&&(o=SS(o)),r.parse(o),r.flush()},n.updateTimeMapping_=function(e,t,n){var r=e.segment;if(t)if(e.cues.length){var i=e.timestampmap,o=i.MPEGTS/qm.ONE_SECOND_IN_TS-i.LOCAL+t.mapping;if(e.cues.forEach((function(e){e.startTime+=o,e.endTime+=o})),!n.syncInfo){var a=e.cues[0].startTime,s=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(a,s-r.duration)}}}else r.empty=!0},t}(iS),ES=function(e,t){for(var n=e.cues,r=0;r<n.length;r++){var i=n[r];if(t>=i.adStartTime&&t<=i.adEndTime)return i}return null},AS=[{name:"VOD",run:function(e,t,n,r,i){return n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(e,t,n,r,i){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var o=null,a=null,s=bT(t);i=i||0;for(var d=0;d<s.length;d++){var c=s[t.endList||0===i?d:s.length-(d+1)],l=c.segment,u=e.timelineToDatetimeMappings[l.timeline];if(u&&l.dateTimeObject){var p=l.dateTimeObject.getTime()/1e3+u;if(l.parts&&"number"==typeof c.partIndex)for(var f=0;f<c.partIndex;f++)p+=l.parts[f].duration;var h=Math.abs(i-p);if(null!==a&&(0===h||a<h))break;a=h,o={time:p,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}}return o}},{name:"Segment",run:function(e,t,n,r,i){var o=null,a=null;i=i||0;for(var s=bT(t),d=0;d<s.length;d++){var c=s[t.endList||0===i?d:s.length-(d+1)],l=c.segment,u=c.part&&c.part.start||l&&l.start;if(l.timeline===r&&void 0!==u){var p=Math.abs(i-u);if(null!==a&&a<p)break;(!o||null===a||a>=p)&&(a=p,o={time:u,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return o}},{name:"Discontinuity",run:function(e,t,n,r,i){var o=null;if(i=i||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var a=null,s=0;s<t.discontinuityStarts.length;s++){var d=t.discontinuityStarts[s],c=t.discontinuitySequence+s+1,l=e.discontinuities[c];if(l){var u=Math.abs(i-l.time);if(null!==a&&a<u)break;(!o||null===a||a>=u)&&(a=u,o={time:l.time,segmentIndex:d,partIndex:null})}}return o}},{name:"Playlist",run:function(e,t,n,r,i){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}}],PS=function(e){function t(t){var n;return(n=e.call(this)||this).timelines=[],n.discontinuities=[],n.timelineToDatetimeMappings={},n.logger_=sT("SyncController"),n}Nh(t,e);var n=t.prototype;return n.getSyncPoint=function(e,t,n,r){var i=this.runStrategies_(e,t,n,r);return i.length?this.selectSyncPoint_(i,{key:"time",value:r}):null},n.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var r=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+kT({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:r.segmentIndex,endIndex:0}))},n.runStrategies_=function(e,t,n,r){for(var i=[],o=0;o<AS.length;o++){var a=AS[o],s=a.run(this,e,t,n,r);s&&(s.strategy=a.name,i.push({strategy:a.name,syncPoint:s}))}return i},n.selectSyncPoint_=function(e,t){for(var n=e[0].syncPoint,r=Math.abs(e[0].syncPoint[t.key]-t.value),i=e[0].strategy,o=1;o<e.length;o++){var a=Math.abs(e[o].syncPoint[t.key]-t.value);a<r&&(r=a,n=e[o].syncPoint,i=e[o].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+i+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+("number"==typeof n.partIndex?",partIndex:"+n.partIndex:"")+"]"),n},n.saveExpiredSegmentInfo=function(e,t){var n=t.mediaSequence-e.mediaSequence;if(n>86400)nT.log.warn("Not saving expired segment info. Media sequence gap "+n+" is too large.");else for(var r=n-1;r>=0;r--){var i=e.segments[r];if(i&&void 0!==i.start){t.syncInfo={mediaSequence:e.mediaSequence+r,time:i.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},n.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}},n.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,n=e.shouldSaveTimelineMapping,r=this.calculateSegmentTimeMapping_(t,t.timingInfo,n),i=t.segment;r&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:i.start}));var o=i.dateTimeObject;i.discontinuity&&n&&o&&(this.timelineToDatetimeMappings[i.timeline]=-o.getTime()/1e3)},n.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},n.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},n.calculateSegmentTimeMapping_=function(e,t,n){var r,i,o=e.segment,a=e.part,s=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)s={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=s,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+s.time+"] [mapping: "+s.mapping+"]")),r=e.startOfSegment,i=t.end+s.mapping;else{if(!s)return!1;r=t.start+s.mapping,i=t.end+s.mapping}return a&&(a.start=r,a.end=i),(!o.start||r<o.start)&&(o.start=r),o.end=i,!0},n.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var r=0;r<t.discontinuityStarts.length;r++){var i=t.discontinuityStarts[r],o=t.discontinuitySequence+r+1,a=i-e.mediaIndex,s=Math.abs(a);if(!this.discontinuities[o]||this.discontinuities[o].accuracy>s){var d;d=a<0?n.start-kT({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:i}):n.end+kT({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:i}),this.discontinuities[o]={time:d,accuracy:s}}}},n.dispose=function(){this.trigger("dispose"),this.off()},t}(nT.EventTarget),xS=function(e){function t(){var t;return(t=e.call(this)||this).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}Nh(t,e);var n=t.prototype;return n.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},n.pendingTimelineChange=function(e){var t=e.type,n=e.from,r=e.to;return"number"==typeof n&&"number"==typeof r&&(this.pendingTimelineChanges_[t]={type:t,from:n,to:r},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},n.lastTimelineChange=function(e){var t=e.type,n=e.from,r=e.to;return"number"==typeof n&&"number"==typeof r&&(this.lastTimelineChanges_[t]={type:t,from:n,to:r},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},n.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(nT.EventTarget),OS=_I(wI((function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var n=t((function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0})),r=t((function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(n,r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),i=t((function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0})),o=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),o=t.length,a=0;a<o;++a)t[a].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),a=null,s=function(){function e(e){var t,n,r;a||(a=function(){var e,t,n,r,i,o,a,s,d=[[[],[],[],[],[]],[[],[],[],[],[]]],c=d[0],l=d[1],u=c[4],p=l[4],f=[],h=[];for(e=0;e<256;e++)h[(f[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!u[t];t^=r||1,n=h[n]||1)for(o=(o=n^n<<1^n<<2^n<<3^n<<4)>>8^255&o^99,u[t]=o,p[o]=t,s=16843009*f[i=f[r=f[t]]]^65537*i^257*r^16843008*t,a=257*f[o]^16843008*o,e=0;e<4;e++)c[e][t]=a=a<<24^a>>>8,l[e][o]=s=s<<24^s>>>8;for(e=0;e<5;e++)c[e]=c[e].slice(0),l[e]=l[e].slice(0);return d}()),this._tables=[[a[0][0].slice(),a[0][1].slice(),a[0][2].slice(),a[0][3].slice(),a[0][4].slice()],[a[1][0].slice(),a[1][1].slice(),a[1][2].slice(),a[1][3].slice(),a[1][4].slice()]];var i=this._tables[0][4],o=this._tables[1],s=e.length,d=1;if(4!==s&&6!==s&&8!==s)throw new Error("Invalid aes key size");var c=e.slice(0),l=[];for(this._key=[c,l],t=s;t<4*s+28;t++)r=c[t-1],(t%s==0||8===s&&t%s==4)&&(r=i[r>>>24]<<24^i[r>>16&255]<<16^i[r>>8&255]<<8^i[255&r],t%s==0&&(r=r<<8^r>>>24^d<<24,d=d<<1^283*(d>>7))),c[t]=c[t-s]^r;for(n=0;t;n++,t--)r=c[3&n?t:t-4],l[n]=t<=4||n<4?r:o[0][i[r>>>24]]^o[1][i[r>>16&255]]^o[2][i[r>>8&255]]^o[3][i[255&r]]}return e.prototype.decrypt=function(e,t,n,r,i,o){var a,s,d,c,l=this._key[1],u=e^l[0],p=r^l[1],f=n^l[2],h=t^l[3],g=l.length/4-2,m=4,v=this._tables[1],y=v[0],b=v[1],_=v[2],w=v[3],T=v[4];for(c=0;c<g;c++)a=y[u>>>24]^b[p>>16&255]^_[f>>8&255]^w[255&h]^l[m],s=y[p>>>24]^b[f>>16&255]^_[h>>8&255]^w[255&u]^l[m+1],d=y[f>>>24]^b[h>>16&255]^_[u>>8&255]^w[255&p]^l[m+2],h=y[h>>>24]^b[u>>16&255]^_[p>>8&255]^w[255&f]^l[m+3],m+=4,u=a,p=s,f=d;for(c=0;c<4;c++)i[(3&-c)+o]=T[u>>>24]<<24^T[p>>16&255]<<16^T[f>>8&255]<<8^T[255&h]^l[m++],a=u,u=p,p=f,f=h,h=a},e}(),d=function(e){function t(){var t;return(t=e.call(this,o)||this).jobs=[],t.delay=1,t.timeout_=null,t}i(t,e);var n=t.prototype;return n.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(o),c=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},l=function(){function e(t,n,r,i){var o=e.STEP,a=new Int32Array(t.buffer),s=new Uint8Array(t.byteLength),l=0;for(this.asyncStream_=new d,this.asyncStream_.push(this.decryptChunk_(a.subarray(l,l+o),n,r,s)),l=o;l<a.length;l+=o)r=new Uint32Array([c(a[l-4]),c(a[l-3]),c(a[l-2]),c(a[l-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(l,l+o),n,r,s));this.asyncStream_.push((function(){var e;i(null,(e=s).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return e.prototype.decryptChunk_=function(e,t,n,r){return function(){var i=function(e,t,n){var r,i,o,a,d,l,u,p,f,h=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),g=new s(Array.prototype.slice.call(t)),m=new Uint8Array(e.byteLength),v=new Int32Array(m.buffer);for(r=n[0],i=n[1],o=n[2],a=n[3],f=0;f<h.length;f+=4)d=c(h[f]),l=c(h[f+1]),u=c(h[f+2]),p=c(h[f+3]),g.decrypt(d,l,u,p,v,f),v[f]=c(v[f]^r),v[f+1]=c(v[f+1]^i),v[f+2]=c(v[f+2]^o),v[f+3]=c(v[f+3]^a),r=d,i=l,o=u,a=p;return m}(e,t,n);r.set(i,e.byteOffset)}},n(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),u=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).BigInt||Number;u("0x1"),u("0x100"),u("0x10000"),u("0x1000000"),u("0x100000000"),u("0x10000000000"),u("0x1000000000000"),u("0x100000000000000"),u("0x10000000000000000");self.onmessage=function(e){var t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),r=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),i=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new l(n,r,i,(function(e,n){var r,i;self.postMessage((r={source:t.source,decrypted:n},i={},Object.keys(r).forEach((function(e){var t=r[e];!function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer}(t)?i[e]=t:i[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}})),i),[n.buffer])}))}}))),DS=bI(OS),RS=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},MS=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},NS=function(e,t){t.activePlaylistLoader=e,e.load()},US={AUDIO:function(e,t){return function(){var n=t.segmentLoaders[e],r=t.mediaTypes[e],i=t.blacklistCurrentPlaylist;MS(n,r);var o=r.activeTrack(),a=r.activeGroup(),s=(a.filter((function(e){return e.default}))[0]||a[0]).id,d=r.tracks[s];if(o!==d){for(var c in nT.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),r.tracks)r.tracks[c].enabled=r.tracks[c]===d;r.onTrackChanged()}else i({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],r=t.mediaTypes[e];nT.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),MS(n,r);var i=r.activeTrack();i&&(i.mode="disabled"),r.onTrackChanged()}}},LS={AUDIO:function(e,t,n){if(t){var r=n.tech,i=n.requestOptions,o=n.segmentLoaders[e];t.on("loadedmetadata",(function(){var e=t.media();o.playlist(e,i),(!r.paused()||e.endList&&"none"!==r.preload())&&o.load()})),t.on("loadedplaylist",(function(){o.playlist(t.media(),i),r.paused()||o.load()})),t.on("error",US[e](e,n))}},SUBTITLES:function(e,t,n){var r=n.tech,i=n.requestOptions,o=n.segmentLoaders[e],a=n.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();o.playlist(e,i),o.track(a.activeTrack()),(!r.paused()||e.endList&&"none"!==r.preload())&&o.load()})),t.on("loadedplaylist",(function(){o.playlist(t.media(),i),r.paused()||o.load()})),t.on("error",US[e](e,n))}},jS={AUDIO:function(e,t){var n=t.vhs,r=t.sourceType,i=t.segmentLoaders[e],o=t.requestOptions,a=t.master.mediaGroups,s=t.mediaTypes[e],d=s.groups,c=s.tracks,l=s.logger_,u=t.masterPlaylistLoader,p=MT(u.master);for(var f in a[e]&&0!==Object.keys(a[e]).length||(a[e]={main:{default:{default:!0}}},p&&(a[e].main.default.playlists=u.master.playlists)),a[e])for(var h in d[f]||(d[f]=[]),a[e][f]){var g=a[e][f][h],m=void 0;if(p?(l("AUDIO group '"+f+"' label '"+h+"' is a master playlist"),g.isMasterPlaylist=!0,m=null):m="vhs-json"===r&&g.playlists?new KT(g.playlists[0],n,o):g.resolvedUri?new KT(g.resolvedUri,n,o):g.playlists&&"dash"===r?new mI(g.playlists[0],n,o,u):null,g=nT.mergeOptions({id:h,playlistLoader:m},g),LS[e](e,g.playlistLoader,t),d[f].push(g),void 0===c[h]){var v=new nT.AudioTrack({id:h,kind:RS(g),enabled:!1,language:g.language,default:g.default,label:h});c[h]=v}}i.on("error",US[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,r=t.vhs,i=t.sourceType,o=t.segmentLoaders[e],a=t.requestOptions,s=t.master.mediaGroups,d=t.mediaTypes[e],c=d.groups,l=d.tracks,u=t.masterPlaylistLoader;for(var p in s[e])for(var f in c[p]||(c[p]=[]),s[e][p])if(!s[e][p][f].forced){var h=s[e][p][f],g=void 0;if("hls"===i)g=new KT(h.resolvedUri,r,a);else if("dash"===i){if(!h.playlists.filter((function(e){return e.excludeUntil!==1/0})).length)return;g=new mI(h.playlists[0],r,a,u)}else"vhs-json"===i&&(g=new KT(h.playlists?h.playlists[0]:h.resolvedUri,r,a));if(h=nT.mergeOptions({id:f,playlistLoader:g},h),LS[e](e,h.playlistLoader,t),c[p].push(h),void 0===l[f]){var m=n.addRemoteTextTrack({id:f,kind:"subtitles",default:h.default&&h.autoselect,language:h.language,label:f},!1).track;l[f]=m}}o.on("error",US[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,r=t.master.mediaGroups,i=t.mediaTypes[e],o=i.groups,a=i.tracks;for(var s in r[e])for(var d in o[s]||(o[s]=[]),r[e][s]){var c=r[e][s][d];if(/^(?:CC|SERVICE)/.test(c.instreamId)){var l=n.options_.vhs&&n.options_.vhs.captionServices||{},u={label:d,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect};if(l[u.instreamId]&&(u=nT.mergeOptions(u,l[u.instreamId])),void 0===u.default&&delete u.default,o[s].push(nT.mergeOptions({id:d},c)),void 0===a[d]){var p=n.addRemoteTextTrack({id:u.instreamId,kind:"captions",default:u.default,language:u.language,label:u.label},!1).track;a[d]=p}}}}},BS=function e(t,n){for(var r=0;r<t.length;r++){if(DT(n,t[r]))return!0;if(t[r].playlists&&e(t[r].playlists,n))return!0}return!1},qS={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var r in n)if(n[r].enabled)return n[r];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var r in n)if("showing"===n[r].mode||"hidden"===n[r].mode)return n[r];return null}}},FS=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],VS=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},zS=function(e){function t(t){var n;n=e.call(this)||this;var r=t.src,i=t.handleManifestRedirects,o=t.withCredentials,a=t.tech,s=t.bandwidth,d=t.externVhs,c=t.useCueTags,l=t.blacklistDuration,u=t.enableLowInitialPlaylist,p=t.sourceType,f=t.cacheEncryptionKeys,h=t.experimentalBufferBasedABR,g=t.experimentalLeastPixelDiffSelector,m=t.captionServices;if(!r)throw new Error("A non-empty playlist URL or JSON manifest string is required");var v=t.maxPlaylistRetries;null==v&&(v=1/0),aS=d,n.experimentalBufferBasedABR=Boolean(h),n.experimentalLeastPixelDiffSelector=Boolean(g),n.withCredentials=o,n.tech_=a,n.vhs_=a.vhs,n.sourceType_=p,n.useCueTags_=c,n.blacklistDuration=l,n.maxPlaylistRetries=v,n.enableLowInitialPlaylist=u,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:o,handleManifestRedirects:i,maxPlaylistRetries:v,timeout:null},n.on("error",n.pauseLoading),n.mediaTypes_=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:oS,activeTrack:oS,getActiveGroup:oS,onGroupChanged:oS,onTrackChanged:oS,lastTrack_:null,logger_:sT("MediaGroups["+t+"]")}})),e}(),n.mediaSource=new(Eh().MediaSource),n.handleDurationChange_=n.handleDurationChange_.bind(Rh(n)),n.handleSourceOpen_=n.handleSourceOpen_.bind(Rh(n)),n.handleSourceEnded_=n.handleSourceEnded_.bind(Rh(n)),n.mediaSource.addEventListener("durationchange",n.handleDurationChange_),n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_),n.mediaSource.addEventListener("sourceended",n.handleSourceEnded_),n.seekable_=nT.createTimeRanges(),n.hasPlayed_=!1,n.syncController_=new PS(t),n.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new DS,n.sourceUpdater_=new IS(n.mediaSource),n.inbandTextTracks_={},n.timelineChangeController_=new xS;var y={vhs:n.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:m,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.duration()},hasPlayed:function(){return n.hasPlayed_},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:s,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:f,sourceUpdater:n.sourceUpdater_,timelineChangeController:n.timelineChangeController_,experimentalExactManifestTimings:t.experimentalExactManifestTimings};n.masterPlaylistLoader_="dash"===n.sourceType_?new mI(r,n.vhs_,n.requestOptions_):new KT(r,n.vhs_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new iS(nT.mergeOptions(y,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),t),n.audioSegmentLoader_=new iS(nT.mergeOptions(y,{loaderType:"audio"}),t),n.subtitleSegmentLoader_=new CS(nT.mergeOptions(y,{loaderType:"vtt",featuresNativeTextTracks:n.tech_.featuresNativeTextTracks}),t),n.setupSegmentLoaderListeners_(),n.experimentalBufferBasedABR&&(n.masterPlaylistLoader_.one("loadedplaylist",(function(){return n.startABRTimer_()})),n.tech_.on("pause",(function(){return n.stopABRTimer_()})),n.tech_.on("play",(function(){return n.startABRTimer_()}))),FS.forEach((function(e){n[e+"_"]=VS.bind(Rh(n),e)})),n.logger_=sT("MPC"),n.triggeredFmp4Usage=!1,"none"===n.tech_.preload()?(n.loadOnPlay_=function(){n.loadOnPlay_=null,n.masterPlaylistLoader_.load()},n.tech_.one("play",n.loadOnPlay_)):n.masterPlaylistLoader_.load(),n.timeToLoadedData__=-1,n.mainAppendsToLoadedData__=-1,n.audioAppendsToLoadedData__=-1;var b="none"===n.tech_.preload()?"play":"loadstart";return n.tech_.one(b,(function(){var e=Date.now();n.tech_.one("loadeddata",(function(){n.timeToLoadedData__=Date.now()-e,n.mainAppendsToLoadedData__=n.mainSegmentLoader_.mediaAppends,n.audioAppendsToLoadedData__=n.audioSegmentLoader_.mediaAppends}))})),n}Nh(t,e);var n=t.prototype;return n.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},n.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},n.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t},n.timeToLoadedData_=function(){return this.timeToLoadedData__},n.checkABR_=function(){var e=this.selectPlaylist();e&&this.shouldSwitchToMedia_(e)&&this.switchMedia_(e,"abr")},n.switchMedia_=function(e,t,n){var r=this.media(),i=r&&(r.id||r.uri),o=e.id||e.uri;i&&i!==o&&(this.logger_("switch media "+i+" -> "+o+" from "+t),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+t})),this.masterPlaylistLoader_.media(e,n)},n.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=Eh().setInterval((function(){return e.checkABR_()}),250)},n.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Eh().clearInterval(this.abrTimer_),this.abrTimer_=null)},n.getAudioTrackPlaylists_=function(){var e=this.master(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;var n,r=e.mediaGroups.AUDIO,i=Object.keys(r);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)n=this.mediaTypes_.AUDIO.activeTrack();else{var o=r.main||i.length&&r[i[0]];for(var a in o)if(o[a].default){n={label:a};break}}if(!n)return t;var s=[];for(var d in r)if(r[d][n.label]){var c=r[d][n.label];if(c.playlists&&c.playlists.length)s.push.apply(s,c.playlists);else if(c.uri)s.push(c);else if(e.playlists.length)for(var l=0;l<e.playlists.length;l++){var u=e.playlists[l];u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===d&&s.push(u)}}return s.length?s:t},n.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;OT(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){jS[t](t,e)}));var t=e.mediaTypes,n=e.masterPlaylistLoader,r=e.tech,i=e.vhs,o=e.segmentLoaders,a=o.AUDIO,s=o.main;["AUDIO","SUBTITLES"].forEach((function(n){t[n].activeGroup=function(e,t){return function(n){var r=t.masterPlaylistLoader,i=t.mediaTypes[e].groups,o=r.media();if(!o)return null;var a=null;o.attributes[e]&&(a=i[o.attributes[e]]);var s=Object.keys(i);if(!a)if("AUDIO"===e&&s.length>1&&MT(t.master))for(var d=0;d<s.length;d++){var c=i[s[d]];if(BS(c,o)){a=c;break}}else i.main?a=i.main:1===s.length&&(a=i[s[0]]);return void 0===n?a:null!==n&&a&&a.filter((function(e){return e.id===n.id}))[0]||null}}(n,e),t[n].activeTrack=qS[n](n,e),t[n].onGroupChanged=function(e,t){return function(){var n=t.segmentLoaders,r=n[e],i=n.main,o=t.mediaTypes[e],a=o.activeTrack(),s=o.getActiveGroup(),d=o.activePlaylistLoader,c=o.lastGroup_;s&&c&&s.id===c.id||(o.lastGroup_=s,o.lastTrack_=a,MS(r,o),s&&!s.isMasterPlaylist&&(s.playlistLoader?(r.resyncLoader(),NS(s.playlistLoader,o)):d&&i.resetEverything()))}}(n,e),t[n].onGroupChanging=function(e,t){return function(){var n=t.segmentLoaders[e];t.mediaTypes[e].lastGroup_=null,n.abort(),n.pause()}}(n,e),t[n].onTrackChanged=function(e,t){return function(){var n=t.masterPlaylistLoader,r=t.segmentLoaders,i=r[e],o=r.main,a=t.mediaTypes[e],s=a.activeTrack(),d=a.getActiveGroup(),c=a.activePlaylistLoader,l=a.lastTrack_;if((!l||!s||l.id!==s.id)&&(a.lastGroup_=d,a.lastTrack_=s,MS(i,a),d)){if(d.isMasterPlaylist){if(!s||!l||s.id===l.id)return;var u=t.vhs.masterPlaylistController_,p=u.selectPlaylist();if(u.media()===p)return;return a.logger_("track change. Switching master audio from "+l.id+" to "+s.id),n.pause(),o.resetEverything(),void u.fastQualityChange_(p)}if("AUDIO"===e){if(!d.playlistLoader)return o.setAudio(!0),void o.resetEverything();i.setAudio(!0),o.setAudio(!1)}c!==d.playlistLoader?(i.track&&i.track(s),i.resetEverything(),NS(d.playlistLoader,a)):NS(d.playlistLoader,a)}}}(n,e),t[n].getActiveGroup=function(e,t){var n=t.mediaTypes;return function(){var t=n[e].activeTrack();return t?n[e].activeGroup(t):null}}(n,e)}));var d=t.AUDIO.activeGroup();if(d){var c=(d.filter((function(e){return e.default}))[0]||d[0]).id;t.AUDIO.tracks[c].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(s.setAudio(!1),a.setAudio(!0)):s.setAudio(!0)}n.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))})),n.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanging()}))}));var l=function(){t.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"}),r.trigger({type:"usage",name:"hls-audio-change"})};for(var u in r.audioTracks().addEventListener("change",l),r.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),i.on("dispose",(function(){r.audioTracks().removeEventListener("change",l),r.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),r.clearTracks("audio"),t.AUDIO.tracks)r.audioTracks().addTrack(t.AUDIO.tracks[u])}({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){e.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var t=e.masterPlaylistLoader_.media();if(!t){var n;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(n=e.selectInitialPlaylist()),n||(n=e.selectPlaylist()),!n||!e.shouldSwitchToMedia_(n))return;if(e.initialMedia_=n,e.switchMedia_(e.initialMedia_,"initial"),"vhs-json"!==e.sourceType_||!e.initialMedia_.segments)return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)})),this.masterPlaylistLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;OT(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var t=e.masterPlaylistLoader_.media();"playlist-unchanged"!==t.lastExcludeReason_&&e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))},n.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},n.triggerPresenceUsage_=function(e,t){var n=e.mediaGroups||{},r=!0,i=Object.keys(n.AUDIO);for(var o in n.AUDIO)for(var a in n.AUDIO[o])n.AUDIO[o][a].uri||(r=!1);r&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(n.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),aS.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),i.length&&Object.keys(n.AUDIO[i[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},n.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),r=this.bufferLowWaterLine(),i=this.bufferHighWaterLine();return function(e){var t=e.currentPlaylist,n=e.buffered,r=e.currentTime,i=e.nextPlaylist,o=e.bufferLowWaterLine,a=e.bufferHighWaterLine,s=e.duration,d=e.experimentalBufferBasedABR,c=e.log;if(!i)return nT.log.warn("We received no playlist to switch to. Please check your stream."),!1;var l="allowing switch "+(t&&t.id||"null")+" -> "+i.id;if(!t)return c(l+" as current playlist is not set"),!0;if(i.id===t.id)return!1;var u=Boolean(uT(n,r).length);if(!t.endList)return u||"number"!=typeof t.partTargetDuration?(c(l+" as current playlist is live"),!0):(c("not "+l+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var p=mT(n,r),f=d?vI.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:vI.MAX_BUFFER_LOW_WATER_LINE;if(s<f)return c(l+" as duration < max low water line ("+s+" < "+f+")"),!0;var h=i.attributes.BANDWIDTH,g=t.attributes.BANDWIDTH;if(h<g&&(!d||p<a)){var m=l+" as next bandwidth < current bandwidth ("+h+" < "+g+")";return d&&(m+=" and forwardBuffer < bufferHighWaterLine ("+p+" < "+a+")"),c(m),!0}if((!d||h>g)&&p>=o){var v=l+" as forwardBuffer >= bufferLowWaterLine ("+p+" >= "+o+")";return d&&(v+=" and next bandwidth > current bandwidth ("+h+" > "+g+")"),c(v),!0}return c("not "+l+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:r,bufferHighWaterLine:i,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},n.setupSegmentLoaderListeners_=function(){var e=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",(function(){var t=e.selectPlaylist();e.shouldSwitchToMedia_(t)&&e.switchMedia_(t,"bandwidthupdate"),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")}))),this.mainSegmentLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("appenderror",(function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){e.logger_("main segment loader ended"),e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(t){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}));var t=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()}))},n.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},n.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},n.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},n.fastQualityChange_=function(e){var t=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything((function(){nT.browser.IE_VERSION||nT.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")},n.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},n.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(nT.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){e.trigger("firstplay"),e.tech_.setCurrentTime(n.end(0)),e.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(n.end(0))}return this.hasPlayed_=!0,this.load(),!0},n.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,(function(e){}))}this.trigger("sourceopen")},n.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}},n.handleDurationChange_=function(){this.tech_.trigger("durationchange")},n.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},n.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var n=aS.Playlist.playlistEnd(e,t),r=this.tech_.currentTime(),i=this.tech_.buffered();if(!i.length)return n-r<=cT;var o=i.end(i.length-1);return o-r<=cT&&n-o<=cT},n.blacklistCurrentPlaylist=function(e,t){void 0===e&&(e={});var n=e.playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!n)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));n.playlistErrors_++;var r,i=this.masterPlaylistLoader_.master.playlists,o=i.filter(PT),a=1===o.length&&o[0]===n;if(1===i.length&&t!==1/0)return nT.log.warn("Problem encountered with playlist "+n.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(a);if(a){var s=!1;i.forEach((function(e){if(e!==n){var t=e.excludeUntil;void 0!==t&&t!==1/0&&(s=!0,delete e.excludeUntil)}})),s&&(nT.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}r=n.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*t,n.excludeUntil=r,e.reason&&(n.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var d=this.selectPlaylist();if(!d)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var c=e.internal?this.logger_:nT.log.warn,l=e.message?" "+e.message:"";c((e.internal?"Internal problem":"Problem")+" encountered with playlist "+n.id+"."+l+" Switching to playlist "+d.id+"."),d.attributes.AUDIO!==n.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),d.attributes.SUBTITLES!==n.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var u=d.targetDuration/2*1e3||5e3,p="number"==typeof d.lastRequest&&Date.now()-d.lastRequest<=u;return this.switchMedia_(d,"exclude",a||p)},n.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},n.delegateLoaders_=function(e,t){var n=this,r=[],i="all"===e;(i||"main"===e)&&r.push(this.masterPlaylistLoader_);var o=[];(i||"audio"===e)&&o.push("AUDIO"),(i||"subtitle"===e)&&(o.push("CLOSED-CAPTIONS"),o.push("SUBTITLES")),o.forEach((function(e){var t=n.mediaTypes_[e]&&n.mediaTypes_[e].activePlaylistLoader;t&&r.push(t)})),["main","audio","subtitle"].forEach((function(t){var i=n[t+"SegmentLoader_"];!i||e!==t&&"all"!==e||r.push(i)})),r.forEach((function(e){return t.forEach((function(t){"function"==typeof e[t]&&e[t]()}))}))},n.setCurrentTime=function(e){var t=uT(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},n.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:aS.Playlist.duration(e):1/0:0},n.seekable=function(){return this.seekable_},n.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var n=this.syncController_.getExpiredTime(t,this.duration());if(null!==n){var r=this.masterPlaylistLoader_.master,i=aS.Playlist.seekable(t,n,aS.Playlist.liveEdgeDelay(r,t));if(0!==i.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=aS.Playlist.seekable(t,n,aS.Playlist.liveEdgeDelay(r,t))).length)return}var o,a;this.seekable_&&this.seekable_.length&&(o=this.seekable_.end(0),a=this.seekable_.start(0)),e?e.start(0)>i.end(0)||i.start(0)>e.end(0)?this.seekable_=i:this.seekable_=nT.createTimeRanges([[e.start(0)>i.start(0)?e.start(0):i.start(0),e.end(0)<i.end(0)?e.end(0):i.end(0)]]):this.seekable_=i,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===o&&this.seekable_.start(0)===a||(this.logger_("seekable updated ["+fT(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},n.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))}else{var n=this.tech_.buffered(),r=aS.Playlist.duration(this.masterPlaylistLoader_.media());n.length>0&&(r=Math.max(r,n.end(n.length-1))),this.mediaSource.duration!==r&&this.sourceUpdater_.setDuration(r)}},n.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((function(t){var n=e.mediaTypes_[t].groups;for(var r in n)n[r].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},n.master=function(){return this.masterPlaylistLoader_.master},n.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},n.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!n)},n.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};t.video=t.main;var n=zI(this.master(),this.media()),r={},i=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(r.video=n.video||t.main.videoCodec||"avc1.4d400d"),t.main.isMuxed&&(r.video+=","+(n.audio||t.main.audioCodec||gg)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||i)&&(r.audio=n.audio||t.main.audioCodec||t.audio.audioCodec||gg,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),r.audio||r.video){var o,a={};if(["video","audio"].forEach((function(e){if(r.hasOwnProperty(e)&&(i=t[e].isFmp4,s=r[e],!(i?fg(s):hg(s)))){var n=t[e].isFmp4?"browser":"muxer";a[n]=a[n]||[],a[n].push(r[e]),"audio"===e&&(o=n)}var i,s})),i&&o&&this.media().attributes.AUDIO){var s=this.media().attributes.AUDIO;this.master().playlists.forEach((function(t){(t.attributes&&t.attributes.AUDIO)===s&&t!==e.media()&&(t.excludeUntil=1/0)})),this.logger_("excluding audio group "+s+" as "+o+' does not support codec(s): "'+r.audio+'"')}if(!Object.keys(a).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var d=[];if(["video","audio"].forEach((function(t){var n=(lg(e.sourceUpdater_.codecs[t]||"")[0]||{}).type,i=(lg(r[t]||"")[0]||{}).type;n&&i&&n.toLowerCase()!==i.toLowerCase()&&d.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+r[t]+'"')})),d.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+d.join(", ")+".",blacklistDuration:1/0,internal:!0})}return r}var c=Object.keys(a).reduce((function(e,t){return e&&(e+=", "),e+(t+' does not support codec(s): "')+a[t].join(",")+'"'}),"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:c,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},n.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}},n.excludeUnsupportedVariants_=function(){var e=this,t=this.master().playlists,n=[];Object.keys(t).forEach((function(r){var i=t[r];if(-1===n.indexOf(i.id)){n.push(i.id);var o=zI(e.master,i),a=[];!o.audio||hg(o.audio)||fg(o.audio)||a.push("audio codec "+o.audio),!o.video||hg(o.video)||fg(o.video)||a.push("video codec "+o.video),o.text&&"stpp.ttml.im1t"===o.text&&a.push("text codec "+o.text),a.length&&(i.excludeUntil=1/0,e.logger_("excluding "+i.id+" for unsupported: "+a.join(", ")))}}))},n.excludeIncompatibleVariants_=function(e){var t=this,n=[],r=this.master().playlists,i=FI(lg(e)),o=VI(i),a=i.video&&lg(i.video)[0]||null,s=i.audio&&lg(i.audio)[0]||null;Object.keys(r).forEach((function(e){var i=r[e];if(-1===n.indexOf(i.id)&&i.excludeUntil!==1/0){n.push(i.id);var d=[],c=zI(t.masterPlaylistLoader_.master,i),l=VI(c);if(c.audio||c.video){if(l!==o&&d.push('codec count "'+l+'" !== "'+o+'"'),!t.sourceUpdater_.canChangeType()){var u=c.video&&lg(c.video)[0]||null,p=c.audio&&lg(c.audio)[0]||null;u&&a&&u.type.toLowerCase()!==a.type.toLowerCase()&&d.push('video codec "'+u.type+'" !== "'+a.type+'"'),p&&s&&p.type.toLowerCase()!==s.type.toLowerCase()&&d.push('audio codec "'+p.type+'" !== "'+s.type+'"')}d.length&&(i.excludeUntil=1/0,t.logger_("blacklisting "+i.id+": "+d.join(" && ")))}}}))},n.updateAdCues_=function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),function(e,t,n){if(void 0===n&&(n=0),e.segments)for(var r,i=n,o=0;o<e.segments.length;o++){var a=e.segments[o];if(r||(r=ES(t,i+a.duration/2)),r){if("cueIn"in a){r.endTime=i,r.adEndTime=i,i+=a.duration,r=null;continue}if(i<r.endTime){i+=a.duration;continue}r.endTime+=a.duration}else if("cueOut"in a&&((r=new(Eh().VTTCue)(i,i+a.duration,a.cueOut)).adStartTime=i,r.adEndTime=i+parseFloat(a.cueOut),t.addCue(r)),"cueOutCont"in a){var s=a.cueOutCont.split("/").map(parseFloat),d=s[0],c=s[1];(r=new(Eh().VTTCue)(i,i+a.duration,"")).adStartTime=i-d,r.adEndTime=r.adStartTime+c,t.addCue(r)}i+=a.duration}}(e,this.cueTagsTrack_,t)},n.goalBufferLength=function(){var e=this.tech_.currentTime(),t=vI.GOAL_BUFFER_LENGTH,n=vI.GOAL_BUFFER_LENGTH_RATE,r=Math.max(t,vI.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,r)},n.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=vI.BUFFER_LOW_WATER_LINE,n=vI.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(t,vI.MAX_BUFFER_LOW_WATER_LINE),i=Math.max(t,vI.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.experimentalBufferBasedABR?i:r)},n.bufferHighWaterLine=function(){return vI.BUFFER_HIGH_WATER_LINE},t}(nT.EventTarget),WS=function(e,t,n){var r,i,o,a=e.masterPlaylistController_,s=a[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(a);if(t.attributes){var d=t.attributes.RESOLUTION;this.width=d&&d.width,this.height=d&&d.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=zI(a.master(),t),this.playlist=t,this.id=n,this.enabled=(r=e.playlists,i=t.id,o=s,function(e){var t=r.master.playlists[i],n=AT(t),a=PT(t);return void 0===e?a:(e?delete t.disabled:t.disabled=!0,e===a||n||(o(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)})},HS=["seeking","seeked","pause","playing","error"],ZS=function(){function e(e){var t=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=sT("PlaybackWatcher"),this.logger_("initialize");var n=function(){return t.monitorCurrentTime_()},r=function(){return t.monitorCurrentTime_()},i=function(){return t.techWaiting_()},o=function(){return t.cancelTimer_()},a=this.masterPlaylistController_,s=["main","subtitle","audio"],d={};s.forEach((function(e){d[e]={reset:function(){return t.resetSegmentDownloads_(e)},updateend:function(){return t.checkSegmentDownloads_(e)}},a[e+"SegmentLoader_"].on("appendsdone",d[e].updateend),a[e+"SegmentLoader_"].on("playlistupdate",d[e].reset),t.tech_.on(["seeked","seeking"],d[e].reset)}));var c=function(e){["main","audio"].forEach((function(n){a[n+"SegmentLoader_"][e]("appended",t.seekingAppendCheck_)}))};this.seekingAppendCheck_=function(){t.fixesBadSeeks_()&&(t.consecutiveUpdates=0,t.lastRecordedTime=t.tech_.currentTime(),c("off"))},this.clearSeekingAppendCheck_=function(){return c("off")},this.watchForBadSeeking_=function(){t.clearSeekingAppendCheck_(),c("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",i),this.tech_.on(HS,o),this.tech_.on("canplay",r),this.tech_.one("play",n),this.dispose=function(){t.clearSeekingAppendCheck_(),t.logger_("dispose"),t.tech_.off("waiting",i),t.tech_.off(HS,o),t.tech_.off("canplay",r),t.tech_.off("play",n),t.tech_.off("seeking",t.watchForBadSeeking_),t.tech_.off("seeked",t.clearSeekingAppendCheck_),s.forEach((function(e){a[e+"SegmentLoader_"].off("appendsdone",d[e].updateend),a[e+"SegmentLoader_"].off("playlistupdate",d[e].reset),t.tech_.off(["seeked","seeking"],d[e].reset)})),t.checkCurrentTimeTimeout_&&Eh().clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}var t=e.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Eh().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Eh().setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];this[e+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,n=t[e+"SegmentLoader_"],r=n.buffered_(),i=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1}(this[e+"Buffered_"],r);this[e+"Buffered_"]=r,i?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:n.playlist_&&n.playlist_.id,buffered:hT(r)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+cT>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),n=this.tech_.currentTime();if(this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1)),this.beforeSeekableWindow_(t,n)){var r=t.start(0);e=r+(r===t.end(0)?0:cT)}if(void 0!==e)return this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+fT(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;for(var i=this.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),a=i.audioBuffer?i.audioBuffered():null,s=i.videoBuffer?i.videoBuffered():null,d=this.media(),c=d.partTargetDuration?d.partTargetDuration:2*(d.targetDuration-dT),l=[a,s],u=0;u<l.length;u++)if(l[u]&&mT(l[u],n)<c)return!1;var p=pT(o,n);return 0!==p.length&&(e=p.start(0)+cT,this.logger_("Buffered region starts ("+p.start(0)+")  just beyond seek point ("+n+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},t.waiting_=function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),n=uT(t,e);return n.length&&e+3<=n.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var r=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:r.audioBuffered(),videoBuffered:r.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var o=pT(i,t);if(o.length>0){var a=o.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+a+", seeking to "+o.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,t),!0}return!1},t.afterSeekableWindow_=function(e,t,n,r){if(void 0===r&&(r=!1),!e.length)return!1;var i=e.end(e.length-1)+cT;return!n.endList&&r&&(i=e.end(e.length-1)+3*n.targetDuration),t>i},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(e){var t=e.videoBuffered,n=e.audioBuffered,r=e.currentTime;if(t){var i;if(t.length&&n.length){var o=uT(t,r-3),a=uT(t,r),s=uT(n,r);s.length&&!a.length&&o.length&&(i={start:o.end(0),end:s.end(0)})}else pT(t,r).length||(i=this.gapFromVideoUnderflow_(t,r));return!!i&&(this.logger_("Encountered a gap in video from "+i.start+" to "+i.end+". Seeking to current time "+r),!0)}},t.skipTheGap_=function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),r=pT(t,n);this.cancelTimer_(),0!==r.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+dT),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var n=function(e){if(e.length<2)return nT.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var r=e.end(n-1),i=e.start(n);t.push([r,i])}return nT.createTimeRanges(t)}(e),r=0;r<n.length;r++){var i=n.start(r),o=n.end(r);if(t-i<4&&t-i>2)return{start:i,end:o}}return null},e}(),$S={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},GS=function e(t,n){var r=0,i=0,o=nT.mergeOptions($S,n);t.ready((function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var a=function(){i&&t.currentTime(i)},s=function(e){null!=e&&(i=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",a),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},d=function(){return Date.now()-r<1e3*o.errorInterval?(t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void t.trigger({type:"usage",name:"hls-error-reload-canceled"})):o.getSource&&"function"==typeof o.getSource?(r=Date.now(),o.getSource.call(t,s)):void nT.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},c=function e(){t.off("loadedmetadata",a),t.off("error",d),t.off("dispose",e)};t.on("error",d),t.on("dispose",c),t.reloadSourceOnError=function(n){c(),e(t,n)}},KS="2.15.0",XS={PlaylistLoader:KT,Playlist:NT,utils:dI,STANDARD_PLAYLIST_SELECTOR:XI,INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(NT.isEnabled);return $I(t,(function(e,t){return GI(e,t)})),t.filter((function(t){return!!zI(e.playlists.master,t).video}))[0]||null},lastBandwidthSelector:XI,movingAverageBandwidthSelector:function(e){var t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var r=this.useDevicePixelRatio&&Eh().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),KI(this.playlists.master,t,parseInt(ZI(this.tech_.el(),"width"),10)*r,parseInt(ZI(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:GI,comparePlaylistResolution:function(e,t){var n,r;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||Eh().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),n===(r=r||Eh().Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-r},xhr:QT()};Object.keys(vI).forEach((function(e){Object.defineProperty(XS,e,{get:function(){return nT.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),vI[e]},set:function(t){nT.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?nT.log.warn("value of Vhs."+e+" must be greater than or equal to 0"):vI[e]=t}})}));var JS="videojs-vhs",YS=function(e,t){for(var n=t.media(),r=-1,i=0;i<e.length;i++)if(e[i].id===n.id){r=i;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})};XS.canPlaySource=function(){return nT.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var QS=function(){if(!Eh().localStorage)return null;var e=Eh().localStorage.getItem(JS);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};XS.supportsNativeHls=function(){if(!Ph()||!Ph().createElement)return!1;var e=Ph().createElement("video");return!!nT.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),XS.supportsNativeDash=!!(Ph()&&Ph().createElement&&nT.getTech("Html5").isSupported())&&/maybe|probably/i.test(Ph().createElement("video").canPlayType("application/dash+xml")),XS.supportsTypeNatively=function(e){return"hls"===e?XS.supportsNativeHls:"dash"===e&&XS.supportsNativeDash},XS.isSupported=function(){return nT.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ek=function(e){function t(t,n,r){var i;if(i=e.call(this,n,nT.mergeOptions(r.hls,r.vhs))||this,r.hls&&Object.keys(r.hls).length&&nT.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof r.initialBandwidth&&(i.options_.bandwidth=r.initialBandwidth),i.logger_=sT("VhsHandler"),n.options_&&n.options_.playerId){var o=nT(n.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return nT.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"hls-player-access"}),Rh(i)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return nT.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"vhs-player-access"}),Rh(i)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return nT.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Rh(i)},configurable:!0}),i.player_=o}if(i.tech_=n,i.source_=t,i.stats={},i.ignoreNextSeekingEvent_=!1,i.setOptions_(),i.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(i.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return i.on(Ph(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=Ph().fullscreenElement||Ph().webkitFullscreenElement||Ph().mozFullScreenElement||Ph().msFullscreenElement;t&&t.contains(i.tech_.el())?i.masterPlaylistController_.fastQualityChange_():i.masterPlaylistController_.checkABR_()})),i.on(i.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),i.on(i.tech_,"error",(function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),i.on(i.tech_,"play",i.play),i}Nh(t,e);var n=t.prototype;return n.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=QS();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=vI.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===vI.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach((function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},n.src=function(e,t){var n=this;if(e){var r;this.setOptions_(),this.options_.src=0===(r=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(r.substring(r.indexOf(",")+1)):r,this.options_.tech=this.tech_,this.options_.externVhs=XS,this.options_.sourceType=yg(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e)},this.options_.smoothQualityChange&&nT.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new zS(this.options_);var i=nT.mergeOptions({liveRangeSafeTimeDelta:cT},this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new ZS(i),this.masterPlaylistController_.on("error",(function(){var e=nT.players[n.tech_.options_.playerId],t=n.masterPlaylistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}));var o=this.options_.experimentalBufferBasedABR?XS.movingAverageBandwidthSelector(.55):XS.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):o.bind(this),this.masterPlaylistController_.selectInitialPlaylist=XS.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var e=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,t=Eh().navigator.connection||Eh().navigator.mozConnection||Eh().navigator.webkitConnection,n=1e7;if(this.options_.useNetworkInformationApi&&t){var r=1e3*t.downlink*1e3;e=r>=n&&e>=n?Math.max(e,r):r}return e},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);return e=this.throughput>0?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){nT.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return n.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return n.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return n.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return hT(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return hT(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){n.options_.useBandwidthFromLocalStorage&&function(e){if(!Eh().localStorage)return!1;var t=QS();t=t?nT.mergeOptions(t,e):e;try{Eh().localStorage.setItem(JS,JSON.stringify(t))}catch(e){return!1}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var e;(e=n).representations=function(){var t=e.masterPlaylistController_.master(),n=MT(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter((function(e){return!AT(e)})).map((function(t,n){return new WS(e,t,t.id)})):[]}})),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",(function(){n.setupEme_()})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Eh().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},n.createKeySessions_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),function(e){var t=e.player,n=e.sourceKeySystems,r=e.audioMedia,i=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var o,a,s=(o=r?i.concat([r]):i,a=Object.keys(n),o.reduce((function(e,t){if(!t.contentProtection)return e;var n=a.reduce((function(e,n){var r=t.contentProtection[n];return r&&r.pssh&&(e[n]={pssh:r.pssh}),e}),{});return Object.keys(n).length&&e.push(n),e}),[])),d=[],c=[];return s.forEach((function(e){c.push(new Promise((function(e,n){t.tech_.one("keysessioncreated",e)}))),d.push(new Promise((function(n,r){t.eme.initializeMediaKeys({keySystems:e},(function(e){e?r(e):n()}))})))})),Promise.race([Promise.all(d),Promise.race(c)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.master.playlists}).then((function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((function(t){e.logger_("error while creating EME key session",t),e.player_.error({message:"Failed to initialize media keys for EME",code:3})}))},n.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},n.setupEme_=function(){var e,t,n,r=this,i=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,o=(e={player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:i&&i.media()},t=e.player,!(!(n=function(e,t,n){if(!e)return e;var r={};t&&t.attributes&&t.attributes.CODECS&&(r=FI(lg(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(r.audio=n.attributes.CODECS);var i=pg(r.video),o=pg(r.audio),a={};for(var s in e)a[s]={},o&&(a[s].audioContentType=o),i&&(a[s].videoContentType=i),t.contentProtection&&t.contentProtection[s]&&t.contentProtection[s].pssh&&(a[s].pssh=t.contentProtection[s].pssh),"string"==typeof e[s]&&(a[s].url=e[s]);return nT.mergeOptions(e,a)}(e.sourceKeySystems,e.media,e.audioMedia))||(t.currentSource().keySystems=n,n&&!t.eme&&(nT.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1))));this.player_.tech_.on("keystatuschange",(function(e){if("output-restricted"===e.status){var t=r.masterPlaylistController_.master();if(t&&t.playlists){var n,i=[];t.playlists.forEach((function(e){e&&e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height>=720&&(!e.excludeUntil||e.excludeUntil<1/0)&&(e.excludeUntil=1/0,i.push(e))})),i.length&&((n=nT.log).warn.apply(n,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(i)),r.masterPlaylistController_.fastQualityChange_())}}})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==nT.browser.IE_VERSION&&o?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},n.setupQualityLevels_=function(){var e=this,t=nT.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t,n;t=e.qualityLevels_,(n=e).representations().forEach((function(e){t.addQualityLevel(e)})),YS(t,n.playlists)})),this.playlists.on("mediachange",(function(){YS(e.qualityLevels_,e.playlists)})))},t.version=function(){return{"@videojs/http-streaming":KS,"mux.js":"6.0.1","mpd-parser":"0.22.0","m3u8-parser":"4.8.0","aes-decrypter":"3.1.3"}},n.version=function(){return this.constructor.version()},n.canChangeType=function(){return IS.canChangeType()},n.play=function(){this.masterPlaylistController_.play()},n.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},n.duration=function(){return this.masterPlaylistController_.duration()},n.seekable=function(){return this.masterPlaylistController_.seekable()},n.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&Eh().URL.revokeObjectURL&&(Eh().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),e.prototype.dispose.call(this)},n.convertToProgramTime=function(e,t){return function(e){var t=e.playlist,n=e.time,r=void 0===n?void 0:n,i=e.callback;if(!i)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===r)return i({message:"getProgramTime: playlist and time must be provided"});var o=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var n,r=0,i=0;i<t.segments.length&&!(e<=(r=(n=t.segments[i]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:r+n.duration));i++);var o=t.segments[t.segments.length-1];if(o.videoTimingInfo&&o.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>r){if(e>r+.25*o.duration)return null;n=o}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:r-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}}(r,t);if(!o)return i({message:"valid programTime was not found"});if("estimate"===o.type)return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:o.estimatedStart});var a={mediaSeconds:r},s=function(e,t){if(!t.dateTimeObject)return null;var n=t.videoTimingInfo.transmuxerPrependedSeconds,r=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*r)}(r,o.segment);return s&&(a.programDateTime=s.toISOString()),i(null,a)}({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},n.seekToProgramTime=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=2),cI({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:r,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},t}(nT.getComponent("Component")),tk={name:"videojs-http-streaming",VERSION:KS,canHandleSource:function(e,t){void 0===t&&(t={});var n=nT.mergeOptions(nT.options,t);return tk.canPlayType(e.type,n)},handleSource:function(e,t,n){void 0===n&&(n={});var r=nT.mergeOptions(nT.options,n);return t.vhs=new ek(e,t,r),nT.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return nT.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=QT(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){void 0===t&&(t={});var n=nT.mergeOptions(nT.options,t),r=n.vhs,i=(r=void 0===r?{}:r).overrideNative,o=void 0===i?!nT.browser.IS_ANY_SAFARI:i,a=n.hls,s=(a=void 0===a?{}:a).overrideNative,d=void 0!==s&&s,c=yg(e);return c&&(!XS.supportsTypeNatively(c)||d||o)?"maybe":""}};fg("avc1.4d400d,mp4a.40.2")&&nT.getTech("Html5").registerSourceHandler(tk,0),nT.VhsHandler=ek,Object.defineProperty(nT,"HlsHandler",{get:function(){return nT.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),ek},configurable:!0}),nT.VhsSourceHandler=tk,Object.defineProperty(nT,"HlsSourceHandler",{get:function(){return nT.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),tk},configurable:!0}),nT.Vhs=XS,Object.defineProperty(nT,"Hls",{get:function(){return nT.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),XS},configurable:!0}),nT.use||(nT.registerComponent("Hls",XS),nT.registerComponent("Vhs",XS)),nT.options.vhs=nT.options.vhs||{},nT.options.hls=nT.options.hls||{},nT.getPlugin&&nT.getPlugin("reloadSourceOnError")||(nT.registerPlugin||nT.plugin)("reloadSourceOnError",(function(e){GS(this,e)}));const nk=nT;var rk="6.9.0",ik=function(e,t){t.isImmediatePropagationStopped=function(){return!0},t.cancelBubble=!0,t.isPropagationStopped=function(){return!0}},ok=function(e,t,n){ik(0,n),e.trigger({type:t+n.type,originalEvent:n})};function ak(e){"playing"===e.type?function(e,t){e.ads.isInAdMode()&&(e.ads.isContentResuming()?e.ads._contentEnding&&ok(e,"content",t):ok(e,"ad",t))}(this,e):"ended"===e.type?function(e,t){e.ads.isInAdMode()?e.ads.isContentResuming()?(ik(0,t),e.trigger("resumeended")):ok(e,"ad",t):e.ads._contentHasEnded||e.ads.stitchedAds()||(ok(e,"content",t),e.trigger("readyforpostroll"))}(this,e):"loadstart"===e.type||"loadeddata"===e.type||"loadedmetadata"===e.type?function(e,t){if(!("loadstart"===t.type&&!e.ads._hasThereBeenALoadStartDuringPlayerLife||"loadeddata"===t.type&&!e.ads._hasThereBeenALoadedData||"loadedmetadata"===t.type&&!e.ads._hasThereBeenALoadedMetaData))if(e.ads.inAdBreak())ok(e,"ad",t);else{if(e.currentSrc()!==e.ads.contentSrc)return;ok(e,"content",t)}}(this,e):"play"===e.type?function(e,t){e.ads.inAdBreak()?ok(e,"ad",t):e.ads.isContentResuming()&&ok(e,"content",t)}(this,e):this.ads.isInAdMode()&&(this.ads.isContentResuming()?ok(this,"content",e):ok(this,"ad",e))}var sk={},dk=function(){!function(e){if(nk.dom.isInFrame()&&"function"!=typeof Eh().__tcfapi){for(var t,n=Eh(),r={};n;){try{if(n.frames.__tcfapiLocator){t=n;break}}catch(e){}if(n===Eh().top)break;n=n.parent}if(!t)return;Eh().__tcfapi=function(e,n,i,o){var a=Math.random()+"",s={__tcfapiCall:{command:e,parameter:o,version:n,callId:a}};r[a]=i,t.postMessage(s,"*")},Eh().addEventListener("message",(function(e){var t={};try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){}var n=t.__tcfapiReturn;n&&"function"==typeof r[n.callId]&&(r[n.callId](n.returnValue,n.success),r[n.callId]=null)}),!1)}}(),"function"==typeof Eh().__tcfapi&&Eh().__tcfapi("addEventListener",2,(function(e,t){t&&(sk=e)}))},ck=function(e,t){return t?encodeURIComponent(e):e},lk=function(e,t,n){if(e&&e[n])for(var r=e[n],i=Object.keys(r),o=0;o<i.length;o++)t["{mediainfo."+n+"."+i[o]+"}"]=r[i[o]]};function uk(e,t,n){var r=this,i={};e=e.replace(/{([^}=]+)=([^}]+)}/g,(function(e,t,n){return i["{"+t+"}"]=n,"{"+t+"}"})),void 0===t&&(t=!1);var o={};for(var a in void 0!==n&&(o=n),o["{player.id}"]=this.options_["data-player"]||this.id_,o["{player.height}"]=this.currentHeight(),o["{player.width}"]=this.currentWidth(),o["{mediainfo.id}"]=this.mediainfo?this.mediainfo.id:"",o["{mediainfo.name}"]=this.mediainfo?this.mediainfo.name:"",o["{mediainfo.duration}"]=this.mediainfo?this.mediainfo.duration:"",o["{player.duration}"]=this.duration(),o["{player.pageUrl}"]=nk.dom.isInFrame()?Ph().referrer:Eh().location.href,o["{playlistinfo.id}"]=this.playlistinfo?this.playlistinfo.id:"",o["{playlistinfo.name}"]=this.playlistinfo?this.playlistinfo.name:"",o["{timestamp}"]=(new Date).getTime(),o["{document.referrer}"]=Ph().referrer,o["{window.location.href}"]=Eh().location.href,o["{random}"]=Math.floor(1e12*Math.random()),["description","tags","reference_id","ad_keys"].forEach((function(e){r.mediainfo&&r.mediainfo[e]?o["{mediainfo."+e+"}"]=r.mediainfo[e]:i["{mediainfo."+e+"}"]?o["{mediainfo."+e+"}"]=i["{mediainfo."+e+"}"]:o["{mediainfo."+e+"}"]=""})),lk(this.mediainfo,o,"custom_fields"),lk(this.mediainfo,o,"customFields"),Object.keys(sk).forEach((function(e){o["{tcf."+e+"}"]=sk[e]})),o["{tcf.gdprAppliesInt}"]=sk.gdprApplies?1:0,o)e=e.split(a).join(ck(o[a],t));for(var s in e=e.replace(/{pageVariable\.([^}]+)}/g,(function(e,n){for(var r,o=Eh(),a=n.split("."),s=0;s<a.length;s++)s===a.length-1?r=o[a[s]]:o=o[a[s]];var d=typeof r;return null===r?"null":void 0===r?i["{pageVariable."+n+"}"]?i["{pageVariable."+n+"}"]:(nk.log.warn('Page variable "'+n+'" not found'),""):"string"!==d&&"number"!==d&&"boolean"!==d?(nk.log.warn('Page variable "'+n+'" is not a supported type'),""):ck(String(r),t)})),i)e=e.replace(s,i[s]);return e}var pk={processMetadataTracks:function(e,t){for(var n=e.textTracks(),r=function(n){"metadata"===n.kind&&(e.ads.cueTextTracks.setMetadataTrackMode(n),t(e,n))},i=0;i<n.length;i++)r(n[i]);n.addEventListener("addtrack",(function(e){r(e.track)}))},setMetadataTrackMode:function(e){},getSupportedAdCue:function(e,t){return t},isSupportedAdCue:function(e,t){return!0},getCueId:function(e,t){return t.id}},fk=function(e,t){return void 0!==t&&e.ads.includedCues[t]},hk=function(e,t){void 0!==t&&""!==t&&(e.ads.includedCues[t]=!0)};function gk(){!1!==this.ads._shouldBlockPlay&&(this.paused()||(this.ads.debug("Playback was canceled by cancelContentPlay"),this.pause()),this.ads._cancelledPlay=!0)}pk.processAdTrack=function(e,t,n,r){e.ads.includedCues={};for(var i=0;i<t.length;i++){var o=t[i],a=this.getSupportedAdCue(e,o);if(!this.isSupportedAdCue(e,o))return void nk.log.warn("Skipping as this is not a supported ad cue.",o);var s=this.getCueId(e,o),d=o.startTime;if(fk(e,s))return void nk.log("Skipping ad already seen with ID "+s);r&&r(e,a,s,d),n(e,a,s,d),hk(e,s)}};var mk={},vk=nk;mk.isMiddlewareMediatorSupported=function(){return!vk.browser.IS_IOS&&!vk.browser.IS_ANDROID&&!!(vk.use&&vk.middleware&&vk.middleware.TERMINATOR)},mk.playMiddleware=function(e){return{setSource:function(e,t){t(null,e)},callPlay:function(){if(e.ads&&!0===e.ads._shouldBlockPlay)return e.ads.debug("Using playMiddleware to block content playback"),e.ads._playBlocked=!0,vk.middleware.TERMINATOR},play:function(t,n){e.ads&&e.ads._playBlocked&&t?(e.ads.debug("Play call to Tech was terminated."),e.trigger("play"),e.addClass("vjs-has-started"),e.ads._playBlocked=!1):n&&n.catch&&n.catch((function(t){"NotAllowedError"!==t.name||nk.browser.IS_SAFARI||e.trigger("pause")}))}}},mk.testHook=function(e){vk=e};var yk=mk.playMiddleware,bk=mk.isMiddlewareMediatorSupported,_k=function(){function e(){}return e.getState=function(t){if(t)return e.states_&&e.states_[t]?e.states_[t]:void 0},e.registerState=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal state name, "'+t+'"; must be a non-empty string.');return e.states_||(e.states_={}),e.states_[t]=n,n},e}(),wk=function(){function e(e){this.player=e}e._getName=function(){return"Anonymous State"};var t=e.prototype;return t.transitionTo=function(e){var t=this.player;this.cleanup(t);var n=new e(t);t.ads._state=n,t.ads.debug(this.constructor._getName()+" -> "+n.constructor._getName());for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];n.init.apply(n,[t].concat(i))},t.init=function(){},t.cleanup=function(){},t.onPlay=function(){},t.onPlaying=function(){},t.onEnded=function(){},t.onAdEnded=function(){},t.onAdsReady=function(){nk.log.warn("Unexpected adsready event")},t.onAdsError=function(){},t.onAdsCanceled=function(){},t.onAdTimeout=function(){},t.onAdStarted=function(){},t.onContentChanged=function(){},t.onContentResumed=function(){},t.onReadyForPostroll=function(){nk.log.warn("Unexpected readyforpostroll event")},t.onNoPreroll=function(){},t.onNoPostroll=function(){},t.startLinearAdMode=function(){nk.log.warn("Unexpected startLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.endLinearAdMode=function(){nk.log.warn("Unexpected endLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.skipLinearAdMode=function(){nk.log.warn("Unexpected skipLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.isAdState=function(){throw new Error("isAdState unimplemented for "+this.constructor._getName())},t.isWaitingForAdBreak=function(){return!1},t.isContentResuming=function(){return!1},t.inAdBreak=function(){return!1},t.handleEvent=function(e){var t=this.player;"play"===e?this.onPlay(t):"adsready"===e?this.onAdsReady(t):"adserror"===e?this.onAdsError(t):"adscanceled"===e?this.onAdsCanceled(t):"adtimeout"===e?this.onAdTimeout(t):"ads-ad-started"===e?this.onAdStarted(t):"contentchanged"===e?this.onContentChanged(t):"contentresumed"===e?this.onContentResumed(t):"readyforpostroll"===e?this.onReadyForPostroll(t):"playing"===e?this.onPlaying(t):"ended"===e?this.onEnded(t):"nopreroll"===e?this.onNoPreroll(t):"nopostroll"===e?this.onNoPostroll(t):"adended"===e&&this.onAdEnded(t)},e}();function Tk(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}_k.registerState("State",wk);var Ik=function(e){function t(t){var n;return(n=e.call(this,t)||this).contentResuming=!1,n.waitingForAdBreak=!1,n}Tk(t,e);var n=t.prototype;return n.isAdState=function(){return!0},n.onPlaying=function(){var e=_k.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},n.onContentResumed=function(){var e=_k.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},n.isWaitingForAdBreak=function(){return this.waitingForAdBreak},n.isContentResuming=function(){return this.contentResuming},n.inAdBreak=function(){return!0===this.player.ads._inLinearAdMode},t}(wk);_k.registerState("AdState",Ik);var Sk=function(e){function t(){return e.apply(this,arguments)||this}Tk(t,e);var n=t.prototype;return n.isAdState=function(){return!1},n.onContentChanged=function(e){var t=_k.getState("BeforePreroll"),n=_k.getState("Preroll");e.ads.debug("Received contentchanged event (ContentState)"),e.paused()?this.transitionTo(t):(this.transitionTo(n,!1),e.pause(),e.ads._pausedOnContentupdate=!0)},t}(wk);_k.registerState("ContentState",Sk);var kk,Ck=function(e){function t(){return e.apply(this,arguments)||this}Tk(t,e),t._getName=function(){return"AdsDone"};var n=t.prototype;return n.init=function(e){e.ads._contentHasEnded=!0,e.trigger("ended")},n.startLinearAdMode=function(){nk.log.warn("Unexpected startLinearAdMode invocation (AdsDone)")},t}(_k.getState("ContentState"));_k.registerState("AdsDone",Ck);var Ek=function(e){e.ads.debug("Starting ad break"),e.ads._inLinearAdMode=!0,e.trigger("adstart"),e.ads.shouldTakeSnapshots()&&(e.ads.snapshot=function(e){var t;t=nk.browser.IS_IOS&&e.ads.isLive(e)&&e.seekable().length>0?e.currentTime()-e.seekable().end(0):e.currentTime();var n=e.$(".vjs-tech"),r=e.textTracks?e.textTracks():[],i=[],o={ended:e.ended(),currentSrc:e.currentSrc(),sources:e.currentSources(),src:e.tech_.src(),currentTime:t,type:e.currentType()};n&&(o.style=n.getAttribute("style"));for(var a=0;a<r.length;a++){var s=r[a];i.push({track:s,mode:s.mode}),s.mode="disabled"}return o.suppressedTracks=i,o}(e)),e.ads.shouldPlayContentBehindAd(e)&&(e.ads.preAdVolume_=e.volume(),e.volume(0)),e.addClass("vjs-ad-playing"),e.hasClass("vjs-live")&&e.removeClass("vjs-live"),e.ads.removeNativePoster()},Ak=function(e,t){e.ads.debug("Ending ad break"),void 0===t&&(t=function(){}),e.ads.adType=null,e.ads._inLinearAdMode=!1,e.trigger("adend"),e.removeClass("vjs-ad-playing"),e.ads.isLive(e)&&e.addClass("vjs-live"),e.ads.shouldTakeSnapshots()?function(e,t){var n=e.ads.snapshot;if(void 0===t&&(t=function(){}),!0===e.ads.disableNextSnapshotRestore)return e.ads.disableNextSnapshotRestore=!1,delete e.ads.snapshot,void t();var r,i=e.$(".vjs-tech"),o=20,a=n.suppressedTracks,s=function(){for(var e=0;e<a.length;e++)(r=a[e]).track.mode=r.mode},d=function(){var t;if(nk.browser.IS_IOS&&e.ads.isLive(e)){if(n.currentTime<0&&(t=e.seekable().length>0?e.seekable().end(0)+n.currentTime:e.currentTime(),e.currentTime(t)),e.paused()){var r=e.play();r&&r.catch&&r.catch((function(e){nk.log.warn("Play promise rejected in IOS snapshot resume",e)}))}}else if(n.ended)e.currentTime(e.duration());else{e.currentTime(n.currentTime);var i=e.play();i&&i.catch&&i.catch((function(e){nk.log.warn("Play promise rejected in snapshot resume",e)}))}e.ads.shouldRemoveAutoplay_&&(e.autoplay(!1),e.ads.shouldRemoveAutoplay_=!1)},c=function t(){if(e.off("contentcanplay",t),kk&&e.clearTimeout(kk),(i=e.el().querySelector(".vjs-tech")).readyState>1)return d();if(void 0===i.seekable)return d();if(i.seekable.length>0)return d();if(o--)e.setTimeout(t,50);else try{d()}catch(e){nk.log.warn("Failed to resume the content after an advertisement",e)}};if("style"in n&&i.setAttribute("style",n.style||""),e.ads.videoElementRecycled())e.one("resumeended",(function(){delete e.ads.snapshot,t()})),e.one("contentloadedmetadata",s),nk.browser.IS_IOS&&!e.autoplay()&&(e.autoplay(!0),e.ads.shouldRemoveAutoplay_=!0),e.src(n.sources),e.one("contentcanplay",c),kk=e.setTimeout(c,2e3);else{if(s(),!e.ended()){var l=e.play();l&&l.catch&&l.catch((function(e){nk.log.warn("Play promise rejected in snapshot restore",e)}))}delete e.ads.snapshot,t()}}(e,t):(e.volume(e.ads.preAdVolume_),t())},Pk=function(e){function t(){return e.apply(this,arguments)||this}Tk(t,e),t._getName=function(){return"Preroll"};var n=t.prototype;return n.init=function(e,t,n){if(this.waitingForAdBreak=!0,e.addClass("vjs-ad-loading"),n||e.ads.nopreroll_)return this.resumeAfterNoPreroll(e);var r=e.ads.settings.timeout;"number"==typeof e.ads.settings.prerollTimeout&&(r=e.ads.settings.prerollTimeout),this._timeout=e.setTimeout((function(){e.trigger("adtimeout")}),r),t?this.handleAdsReady():this.adsReady=!1},n.onAdsReady=function(e){e.ads.inAdBreak()?nk.log.warn("Unexpected adsready event (Preroll)"):(e.ads.debug("Received adsready event (Preroll)"),this.handleAdsReady())},n.handleAdsReady=function(){this.adsReady=!0,this.readyForPreroll()},n.afterLoadStart=function(e){var t=this.player;t.ads._hasThereBeenALoadStartDuringPlayerLife?e():(t.ads.debug("Waiting for loadstart..."),t.one("loadstart",(function(){t.ads.debug("Received loadstart event"),e()})))},n.noPreroll=function(){var e=this;this.afterLoadStart((function(){e.player.ads.debug("Skipping prerolls due to nopreroll event (Preroll)"),e.resumeAfterNoPreroll(e.player)}))},n.readyForPreroll=function(){var e=this.player;this.afterLoadStart((function(){e.ads.debug("Triggered readyforpreroll event (Preroll)"),e.trigger("readyforpreroll")}))},n.onAdsCanceled=function(e){var t=this;e.ads.debug("adscanceled (Preroll)"),this.afterLoadStart((function(){t.resumeAfterNoPreroll(e)}))},n.onAdsError=function(e){var t=this;nk.log("adserror (Preroll)"),this.inAdBreak()?e.ads.endLinearAdMode():this.afterLoadStart((function(){t.resumeAfterNoPreroll(e)}))},n.startLinearAdMode=function(){var e=this.player;!this.adsReady||e.ads.inAdBreak()||this.isContentResuming()?nk.log.warn("Unexpected startLinearAdMode invocation (Preroll)"):(this.clearTimeout(e),e.ads.adType="preroll",this.waitingForAdBreak=!1,Ek(e),e.ads._shouldBlockPlay=!1)},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(e.removeClass("vjs-ad-loading"),e.addClass("vjs-ad-content-resuming"),this.contentResuming=!0,Ak(e))},n.skipLinearAdMode=function(){var e=this,t=this.player;t.ads.inAdBreak()||this.isContentResuming()?nk.log.warn("Unexpected skipLinearAdMode invocation"):this.afterLoadStart((function(){t.trigger("adskip"),t.ads.debug("skipLinearAdMode (Preroll)"),e.resumeAfterNoPreroll(t)}))},n.onAdTimeout=function(e){var t=this;this.afterLoadStart((function(){e.ads.debug("adtimeout (Preroll)"),t.resumeAfterNoPreroll(e)}))},n.onNoPreroll=function(e){e.ads.inAdBreak()||this.isContentResuming()?nk.log.warn("Unexpected nopreroll event (Preroll)"):this.noPreroll()},n.resumeAfterNoPreroll=function(e){if(this.contentResuming=!0,e.ads._shouldBlockPlay=!1,this.cleanupPartial(e),e.ads._playRequested||e.ads._pausedOnContentupdate)if(e.paused()){e.ads.debug("resumeAfterNoPreroll: attempting to resume playback (Preroll)");var t=e.play();t&&t.then&&t.then(null,(function(e){}))}else e.ads.debug("resumeAfterNoPreroll: already playing (Preroll)"),e.trigger("play"),e.trigger("playing")},n.cleanup=function(e){e.ads._hasThereBeenALoadStartDuringPlayerLife||nk.log.warn("Leaving Preroll state before loadstart event can cause issues."),this.cleanupPartial(e)},n.cleanupPartial=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming"),this.clearTimeout(e)},n.clearTimeout=function(e){e.clearTimeout(this._timeout),this._timeout=null},t}(_k.getState("AdState"));_k.registerState("Preroll",Pk);var xk=function(e){function t(){return e.apply(this,arguments)||this}Tk(t,e),t._getName=function(){return"BeforePreroll"};var n=t.prototype;return n.init=function(e){this.adsReady=!1,this.shouldResumeToContent=!1,e.ads._shouldBlockPlay=!e.ads.settings.allowVjsAutoplay||!e.autoplay()},n.onAdsReady=function(e){e.ads.debug("Received adsready event (BeforePreroll)"),this.adsReady=!0},n.onPlay=function(e){var t=_k.getState("Preroll");e.ads.debug("Received play event (BeforePreroll)"),this.transitionTo(t,this.adsReady,this.shouldResumeToContent)},n.onAdsCanceled=function(e){e.ads.debug("adscanceled (BeforePreroll)"),this.shouldResumeToContent=!0},n.onAdsError=function(){this.player.ads.debug("adserror (BeforePreroll)"),this.shouldResumeToContent=!0},n.onNoPreroll=function(){this.player.ads.debug("Skipping prerolls due to nopreroll event (BeforePreroll)"),this.shouldResumeToContent=!0},n.skipLinearAdMode=function(){var e=this.player;e.trigger("adskip"),e.ads.debug("skipLinearAdMode (BeforePreroll)"),this.shouldResumeToContent=!0},n.onContentChanged=function(){this.init(this.player)},t}(_k.getState("ContentState"));_k.registerState("BeforePreroll",xk);var Ok=function(e){function t(){return e.apply(this,arguments)||this}Tk(t,e),t._getName=function(){return"Midroll"};var n=t.prototype;return n.init=function(e){e.ads.adType="midroll",Ek(e),e.addClass("vjs-ad-loading")},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(this.contentResuming=!0,e.addClass("vjs-ad-content-resuming"),e.removeClass("vjs-ad-loading"),Ak(e))},n.onAdsError=function(e){this.inAdBreak()&&e.ads.endLinearAdMode()},n.cleanup=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming")},t}(_k.getState("AdState"));_k.registerState("Midroll",Ok);var Dk=function(e){function t(){return e.apply(this,arguments)||this}Tk(t,e),t._getName=function(){return"Postroll"};var n=t.prototype;return n.init=function(e){if(this.waitingForAdBreak=!0,e.ads._contentEnding=!0,e.ads.nopostroll_){this.resumeContent(e);var t=_k.getState("AdsDone");this.transitionTo(t)}else{e.addClass("vjs-ad-loading");var n=e.ads.settings.timeout;"number"==typeof e.ads.settings.postrollTimeout&&(n=e.ads.settings.postrollTimeout),this._postrollTimeout=e.setTimeout((function(){e.trigger("adtimeout")}),n)}},n.startLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?nk.log.warn("Unexpected startLinearAdMode invocation (Postroll)"):(e.ads.adType="postroll",e.clearTimeout(this._postrollTimeout),this.waitingForAdBreak=!1,Ek(e))},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this,t=this.player,n=_k.getState("AdsDone");this.inAdBreak()&&(t.removeClass("vjs-ad-loading"),this.resumeContent(t),Ak(t,(function(){e.transitionTo(n)})))},n.skipLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?nk.log.warn("Unexpected skipLinearAdMode invocation"):(e.ads.debug("Postroll abort (skipLinearAdMode)"),e.trigger("adskip"),this.abort(e))},n.onAdTimeout=function(e){e.ads.debug("Postroll abort (adtimeout)"),this.abort(e)},n.onAdsError=function(e){e.ads.debug("Postroll abort (adserror)"),e.ads.inAdBreak()?e.ads.endLinearAdMode():this.abort(e)},n.onContentChanged=function(e){if(this.isContentResuming()){var t=_k.getState("BeforePreroll");this.transitionTo(t)}else if(!this.inAdBreak()){var n=_k.getState("Preroll");this.transitionTo(n)}},n.onNoPostroll=function(e){this.isContentResuming()||this.inAdBreak()?nk.log.warn("Unexpected nopostroll event (Postroll)"):this.abort(e)},n.resumeContent=function(e){this.contentResuming=!0,e.addClass("vjs-ad-content-resuming")},n.abort=function(e){var t=_k.getState("AdsDone");this.resumeContent(e),e.removeClass("vjs-ad-loading"),this.transitionTo(t)},n.cleanup=function(e){e.removeClass("vjs-ad-content-resuming"),e.clearTimeout(this._postrollTimeout),e.ads._contentEnding=!1},t}(_k.getState("AdState"));_k.registerState("Postroll",Dk);var Rk=function(e){function t(){return e.apply(this,arguments)||this}Tk(t,e),t._getName=function(){return"ContentPlayback"};var n=t.prototype;return n.init=function(e){e.ads._shouldBlockPlay=!1},n.onAdsReady=function(e){e.ads.debug("Received adsready event (ContentPlayback)"),e.ads.nopreroll_||(e.ads.debug("Triggered readyforpreroll event (ContentPlayback)"),e.trigger("readyforpreroll"))},n.onReadyForPostroll=function(e){var t=_k.getState("Postroll");e.ads.debug("Received readyforpostroll event"),this.transitionTo(t)},n.startLinearAdMode=function(){var e=_k.getState("Midroll");this.transitionTo(e)},t}(_k.getState("ContentState"));_k.registerState("ContentPlayback",Rk);var Mk=function(e){function t(){return e.apply(this,arguments)||this}Tk(t,e),t._getName=function(){return"StitchedContentPlayback"};var n=t.prototype;return n.init=function(){this.player.ads._shouldBlockPlay=!1},n.onContentChanged=function(){this.player.ads.debug("Received contentchanged event ("+this.constructor._getName()+")")},n.startLinearAdMode=function(){var e=_k.getState("StitchedAdRoll");this.transitionTo(e)},t}(_k.getState("ContentState"));_k.registerState("StitchedContentPlayback",Mk);var Nk=function(e){function t(){return e.apply(this,arguments)||this}Tk(t,e),t._getName=function(){return"StitchedAdRoll"};var n=t.prototype;return n.init=function(){this.waitingForAdBreak=!1,this.contentResuming=!1,this.player.ads.adType="stitched",Ek(this.player)},n.onPlaying=function(){},n.onContentResumed=function(){},n.onAdEnded=function(){this.endLinearAdMode(),this.player.trigger("ended")},n.endLinearAdMode=function(){var e=_k.getState("StitchedContentPlayback");Ak(this.player),this.transitionTo(e)},t}(_k.getState("AdState"));_k.registerState("StitchedAdRoll",Nk);var Uk=mk.isMiddlewareMediatorSupported,Lk=nk.getTech("Html5").Events,jk={timeout:5e3,prerollTimeout:void 0,postrollTimeout:void 0,debug:!1,stitchedAds:!1,contentIsLive:void 0,liveCuePoints:!0,allowVjsAutoplay:nk.options.normalizeAutoplay||!1},Bk=function(e){var t=this,n=nk.mergeOptions(jk,e),r=[];Lk.concat(["firstplay","loadedalldata"]).forEach((function(e){-1===r.indexOf(e)&&r.push(e)})),t.on(r,ak),Uk()||function(e,t){t&&nk.log("Using cancelContentPlay to block content playback"),e.on("play",gk)}(t,n.debug),t.setTimeout((function(){t.ads._hasThereBeenALoadStartDuringPlayerLife||""===t.src()||nk.log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrib-ads was initialized too late. It must be initialized immediately after video.js in the same tick. As a result, some ads will not play and some media events will be incorrect. For more information, see http://videojs.github.io/videojs-contrib-ads/integrator/getting-started.html")}),5e3),t.on("ended",(function(){t.hasClass("vjs-has-started")||t.addClass("vjs-has-started")})),t.on("contenttimeupdate",(function(){t.removeClass("vjs-waiting")})),t.on(["addurationchange","adcanplay"],(function(){if(!t.ads.settings.stitchedAds&&!t.hasStarted()&&(!t.ads.snapshot||t.currentSrc()!==t.ads.snapshot.currentSrc)&&t.ads.inAdBreak()){var e=t.play();e&&e.catch&&e.catch((function(e){nk.log.warn("Play promise rejected when playing ad",e)}))}})),t.on("nopreroll",(function(){t.ads.debug("Received nopreroll event"),t.ads.nopreroll_=!0})),t.on("nopostroll",(function(){t.ads.debug("Received nopostroll event"),t.ads.nopostroll_=!0})),t.on("playing",(function(){t.ads._cancelledPlay=!1,t.ads._pausedOnContentupdate=!1})),t.on("play",(function(){t.ads._playRequested=!0})),t.one("loadstart",(function(){t.ads._hasThereBeenALoadStartDuringPlayerLife=!0})),t.on("loadeddata",(function(){t.ads._hasThereBeenALoadedData=!0})),t.on("loadedmetadata",(function(){t.ads._hasThereBeenALoadedMetaData=!0})),t.ads=function(e){return{disableNextSnapshotRestore:!1,_contentEnding:!1,_contentHasEnded:!1,_hasThereBeenALoadStartDuringPlayerLife:!1,_hasThereBeenALoadedData:!1,_hasThereBeenALoadedMetaData:!1,_inLinearAdMode:!1,_shouldBlockPlay:!1,_playBlocked:!1,_playRequested:!1,adType:null,VERSION:rk,reset:function(){e.ads.disableNextSnapshotRestore=!1,e.ads._contentEnding=!1,e.ads._contentHasEnded=!1,e.ads.snapshot=null,e.ads.adType=null,e.ads._hasThereBeenALoadedData=!1,e.ads._hasThereBeenALoadedMetaData=!1,e.ads._cancelledPlay=!1,e.ads._shouldBlockPlay=!1,e.ads._playBlocked=!1,e.ads.nopreroll_=!1,e.ads.nopostroll_=!1,e.ads._playRequested=!1},startLinearAdMode:function(){e.ads._state.startLinearAdMode()},endLinearAdMode:function(){e.ads._state.endLinearAdMode()},skipLinearAdMode:function(){e.ads._state.skipLinearAdMode()},stitchedAds:function(e){return void 0!==e&&(nk.log.warn("Using player.ads.stitchedAds() as a setter is deprecated, it should be set as an option upon initialization of contrib-ads."),this.settings.stitchedAds=!!e),this.settings.stitchedAds},videoElementRecycled:function(){if(e.ads.shouldPlayContentBehindAd(e))return!1;if(!this.snapshot)throw new Error("You cannot use videoElementRecycled while there is no snapshot.");var t=e.tech_.src()!==this.snapshot.src,n=e.currentSrc()!==this.snapshot.currentSrc;return t||n},isLive:function(t){return void 0===t&&(t=e),"boolean"==typeof t.ads.settings.contentIsLive?t.ads.settings.contentIsLive:t.duration()===1/0||"8"===nk.browser.IOS_VERSION&&0===t.duration()},shouldPlayContentBehindAd:function(t){if(void 0===t&&(t=e),t)return!!t.ads.settings.liveCuePoints&&!nk.browser.IS_IOS&&!nk.browser.IS_ANDROID&&t.duration()===1/0;throw new Error("shouldPlayContentBehindAd requires a player as a param")},shouldTakeSnapshots:function(t){return void 0===t&&(t=e),!this.shouldPlayContentBehindAd(t)&&!this.stitchedAds()},isInAdMode:function(){return this._state.isAdState()},isWaitingForAdBreak:function(){return this._state.isWaitingForAdBreak()},isContentResuming:function(){return this._state.isContentResuming()},isAdPlaying:function(){return this._state.inAdBreak()},inAdBreak:function(){return this._state.inAdBreak()},removeNativePoster:function(){var t=e.$(".vjs-tech");t&&t.removeAttribute("poster")},debug:function(){if(this.settings.debug){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length&&"string"==typeof t[0]?nk.log("ADS: "+t[0]):nk.log.apply(nk,["ADS:"].concat(t))}}}}(t),t.ads.settings=n,n.stitchedAds=!!n.stitchedAds,n.stitchedAds?t.ads._state=new(_k.getState("StitchedContentPlayback"))(t):t.ads._state=new(_k.getState("BeforePreroll"))(t),t.ads._state.init(t),t.ads.cueTextTracks=pk,t.ads.adMacroReplacement=uk.bind(t),function(e){e.ads.contentSrc=e.currentSrc(),e.ads._seenInitialLoadstart=!1,e.on("loadstart",(function(){if(!e.ads.inAdBreak()){var t=e.currentSrc();t!==e.ads.contentSrc&&(e.ads._seenInitialLoadstart&&e.trigger({type:"contentchanged"}),e.trigger({type:"contentupdate",oldValue:e.ads.contentSrc,newValue:t}),e.ads.contentSrc=t),e.ads._seenInitialLoadstart=!0}}))}(t),t.on("contentchanged",t.ads.reset);var i=function(){var e=t.textTracks();if(!t.ads.shouldPlayContentBehindAd(t)&&t.ads.inAdBreak()&&t.tech_.featuresNativeTextTracks&&nk.browser.IS_IOS&&!Array.isArray(t.textTracks()))for(var n=0;n<e.length;n++){var r=e[n];"showing"===r.mode&&(r.mode="disabled")}};t.ready((function(){t.textTracks().addEventListener("change",i)})),t.on(["play","playing","ended","adsready","adscanceled","adskip","adserror","adtimeout","adended","ads-ad-started","contentchanged","dispose","contentresumed","readyforpostroll","nopreroll","nopostroll"],(function(e){t.ads._state.handleEvent(e.type)})),t.on("dispose",(function(){t.ads.reset(),t.textTracks().removeEventListener("change",i)})),dk(),t.ads.listenToTcf=dk};Bk.VERSION=rk,function(e){!function(){if(nk.getPlugin)return Boolean(nk.getPlugin("ads"));var e=nk.getComponent("Player");return Boolean(e&&e.prototype.ads)}()&&((nk.registerPlugin||nk.plugin)("ads",e),bk()&&!nk.usingContribAdsMiddleware_&&(nk.use("*",yk),nk.usingContribAdsMiddleware_=!0,nk.log.debug("Play middleware has been registered with videojs")))}(Bk);var qk=function(e,t,n){this.vjsPlayer=e,this.controller=n,this.contentTrackingTimer=null,this.contentComplete=!1,this.updateTimeIntervalHandle=null,this.updateTimeInterval=1e3,this.seekCheckIntervalHandle=null,this.seekCheckInterval=1e3,this.resizeCheckIntervalHandle=null,this.resizeCheckInterval=250,this.seekThreshold=100,this.contentEndedListeners=[],this.contentSource="",this.contentSourceType="",this.contentPlayheadTracker={currentTime:0,previousTime:0,seeking:!1,duration:0},this.vjsPlayerDimensions={width:this.getPlayerWidth(),height:this.getPlayerHeight()},this.vjsControls=this.vjsPlayer.getChild("controlBar"),this.h5Player=null,this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this)),this.boundContentEndedListener=this.localContentEndedListener.bind(this),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("readyforpreroll",this.onReadyForPreroll.bind(this)),this.vjsPlayer.on("adtimeout",this.onAdTimeout.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),"onPlay"===this.controller.getSettings().requestMode&&this.vjsPlayer.one("play",this.controller.requestAds.bind(this.controller)),this.vjsPlayer.ads(t)};qk.prototype.setUpPlayerIntervals=function(){this.updateTimeIntervalHandle=setInterval(this.updateCurrentTime.bind(this),this.updateTimeInterval),this.seekCheckIntervalHandle=setInterval(this.checkForSeeking.bind(this),this.seekCheckInterval),this.resizeCheckIntervalHandle=setInterval(this.checkForResize.bind(this),this.resizeCheckInterval)},qk.prototype.updateCurrentTime=function(){this.contentPlayheadTracker.seeking||(this.contentPlayheadTracker.currentTime=this.vjsPlayer.currentTime())},qk.prototype.checkForSeeking=function(){var e=1e3*(this.vjsPlayer.currentTime()-this.contentPlayheadTracker.previousTime);Math.abs(e)>this.seekCheckInterval+this.seekThreshold?this.contentPlayheadTracker.seeking=!0:this.contentPlayheadTracker.seeking=!1,this.contentPlayheadTracker.previousTime=this.vjsPlayer.currentTime()},qk.prototype.checkForResize=function(){var e=this.getPlayerWidth(),t=this.getPlayerHeight();e==this.vjsPlayerDimensions.width&&t==this.vjsPlayerDimensions.height||(this.vjsPlayerDimensions.width=e,this.vjsPlayerDimensions.height=t,this.controller.onPlayerResize(e,t))},qk.prototype.localContentEndedListener=function(){for(var e in this.contentComplete||(this.contentComplete=!0,this.controller.onContentComplete()),this.contentEndedListeners)"function"==typeof this.contentEndedListeners[e]&&this.contentEndedListeners[e]();clearInterval(this.updateTimeIntervalHandle),clearInterval(this.seekCheckIntervalHandle),clearInterval(this.resizeCheckIntervalHandle),this.vjsPlayer.el()&&this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this))},qk.prototype.onNoPostroll=function(){this.vjsPlayer.trigger("nopostroll")},qk.prototype.playerDisposedListener=function(){this.contentEndedListeners=[],this.controller.onPlayerDisposed(),this.contentComplete=!0,this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.adTimeoutTimeout&&clearTimeout(this.vjsPlayer.ads.adTimeoutTimeout);var e=[this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.resizeCheckIntervalHandle];for(var t in e)e[t]&&clearInterval(e[t])},qk.prototype.onReadyForPreroll=function(){this.controller.onPlayerReadyForPreroll()},qk.prototype.onAdTimeout=function(){this.controller.onAdTimeout()},qk.prototype.onPlayerReady=function(){this.h5Player=document.getElementById(this.getPlayerId()).getElementsByClassName("vjs-tech")[0],this.h5Player.hasAttribute("autoplay")&&this.controller.setSetting("adWillAutoPlay",!0),this.onVolumeChange(),this.vjsPlayer.on("fullscreenchange",this.onFullscreenChange.bind(this)),this.vjsPlayer.on("volumechange",this.onVolumeChange.bind(this)),this.controller.onPlayerReady()},qk.prototype.onFullscreenChange=function(){this.vjsPlayer.isFullscreen()?this.controller.onPlayerEnterFullscreen():this.controller.onPlayerExitFullscreen()},qk.prototype.onVolumeChange=function(){var e=this.vjsPlayer.muted()?0:this.vjsPlayer.volume();this.controller.onPlayerVolumeChanged(e)},qk.prototype.injectAdContainerDiv=function(e){this.vjsControls.el().parentNode.appendChild(e)},qk.prototype.getContentPlayer=function(){return this.h5Player},qk.prototype.getVolume=function(){return this.vjsPlayer.muted()?0:this.vjsPlayer.volume()},qk.prototype.setVolume=function(e){this.vjsPlayer.volume(e),0==e?this.vjsPlayer.muted(!0):this.vjsPlayer.muted(!1)},qk.prototype.unmute=function(){this.vjsPlayer.muted(!1)},qk.prototype.mute=function(){this.vjsPlayer.muted(!0)},qk.prototype.play=function(){this.vjsPlayer.play()},qk.prototype.togglePlayback=function(){this.vjsPlayer.paused()?this.vjsPlayer.play():this.vjsPlayer.pause()},qk.prototype.getPlayerWidth=function(){var e=(getComputedStyle(this.vjsPlayer.el())||{}).width;return e&&0!==parseFloat(e)||(e=(this.vjsPlayer.el().getBoundingClientRect()||{}).width),parseFloat(e)||this.vjsPlayer.width()},qk.prototype.getPlayerHeight=function(){var e=(getComputedStyle(this.vjsPlayer.el())||{}).height;return e&&0!==parseFloat(e)||(e=(this.vjsPlayer.el().getBoundingClientRect()||{}).height),parseFloat(e)||this.vjsPlayer.height()},qk.prototype.getPlayerOptions=function(){return this.vjsPlayer.options_},qk.prototype.getPlayerId=function(){return this.vjsPlayer.id()},qk.prototype.toggleFullscreen=function(){this.vjsPlayer.isFullscreen()?this.vjsPlayer.exitFullscreen():this.vjsPlayer.requestFullscreen()},qk.prototype.getContentPlayheadTracker=function(){return this.contentPlayheadTracker},qk.prototype.onAdError=function(e){this.vjsControls.show();var t=void 0!==e.getError?e.getError():e.stack;this.vjsPlayer.trigger({type:"adserror",data:{AdError:t,AdErrorEvent:e}})},qk.prototype.onAdLog=function(e){var t=e.getAdData(),n=void 0!==t.adError?t.adError.getMessage():void 0;this.vjsPlayer.trigger({type:"adslog",data:{AdError:n,AdEvent:e}})},qk.prototype.onAdBreakStart=function(){this.contentSource=this.vjsPlayer.currentSrc(),this.contentSourceType=this.vjsPlayer.currentType(),this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.startLinearAdMode(),this.vjsControls.hide(),this.vjsPlayer.pause()},qk.prototype.onAdBreakEnd=function(){this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.vjsControls.show()},qk.prototype.onAdStart=function(){this.vjsPlayer.trigger("ads-ad-started")},qk.prototype.onAllAdsCompleted=function(){1==this.contentComplete&&(this.contentSource&&this.vjsPlayer.currentSrc()!=this.contentSource&&this.vjsPlayer.src({src:this.contentSource,type:this.contentSourceType}),this.controller.onContentAndAdsCompleted())},qk.prototype.onAdsReady=function(){this.vjsPlayer.trigger("adsready")},qk.prototype.changeSource=function(e){this.vjsPlayer.currentSrc()&&(this.vjsPlayer.currentTime(0),this.vjsPlayer.pause()),e&&this.vjsPlayer.src(e),this.vjsPlayer.one("loadedmetadata",this.seekContentToZero.bind(this))},qk.prototype.seekContentToZero=function(){this.vjsPlayer.currentTime(0)},qk.prototype.triggerPlayerEvent=function(e,t){this.vjsPlayer.trigger(e,t)},qk.prototype.addContentEndedListener=function(e){this.contentEndedListeners.push(e)},qk.prototype.reset=function(){this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsControls.show(),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.contentPlayheadTracker.currentTime=0,this.contentComplete=!1};var Fk=function(e){this.controller=e,this.adContainerDiv=document.createElement("div"),this.controlsDiv=document.createElement("div"),this.countdownDiv=document.createElement("div"),this.seekBarDiv=document.createElement("div"),this.progressDiv=document.createElement("div"),this.playPauseDiv=document.createElement("div"),this.muteDiv=document.createElement("div"),this.sliderDiv=document.createElement("div"),this.sliderLevelDiv=document.createElement("div"),this.fullscreenDiv=document.createElement("div"),this.boundOnMouseUp=this.onMouseUp.bind(this),this.boundOnMouseMove=this.onMouseMove.bind(this),this.adPlayheadTracker={currentTime:0,duration:0,isPod:!1,adPosition:0,totalAds:0},this.controlPrefix=this.controller.getPlayerId()+"_",this.showCountdown=!0,!1===this.controller.getSettings().showCountdown&&(this.showCountdown=!1),this.isAdNonlinear=!1,this.createAdContainer()};Fk.prototype.createAdContainer=function(){this.assignControlAttributes(this.adContainerDiv,"ima-ad-container"),this.adContainerDiv.style.position="absolute",this.adContainerDiv.style.zIndex=1111,this.adContainerDiv.addEventListener("mouseenter",this.showAdControls.bind(this),!1),this.adContainerDiv.addEventListener("mouseleave",this.hideAdControls.bind(this),!1),this.adContainerDiv.addEventListener("click",this.onAdContainerClick.bind(this),!1),this.createControls(),this.controller.injectAdContainerDiv(this.adContainerDiv)},Fk.prototype.createControls=function(){this.assignControlAttributes(this.controlsDiv,"ima-controls-div"),this.controlsDiv.style.width="100%",this.controller.getIsMobile()?this.countdownDiv.style.display="none":(this.assignControlAttributes(this.countdownDiv,"ima-countdown-div"),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel,this.countdownDiv.style.display=this.showCountdown?"block":"none"),this.assignControlAttributes(this.seekBarDiv,"ima-seek-bar-div"),this.seekBarDiv.style.width="100%",this.assignControlAttributes(this.progressDiv,"ima-progress-div"),this.assignControlAttributes(this.playPauseDiv,"ima-play-pause-div"),this.addClass(this.playPauseDiv,"ima-playing"),this.playPauseDiv.addEventListener("click",this.onAdPlayPauseClick.bind(this),!1),this.assignControlAttributes(this.muteDiv,"ima-mute-div"),this.addClass(this.muteDiv,"ima-non-muted"),this.muteDiv.addEventListener("click",this.onAdMuteClick.bind(this),!1),this.assignControlAttributes(this.sliderDiv,"ima-slider-div"),this.sliderDiv.addEventListener("mousedown",this.onAdVolumeSliderMouseDown.bind(this),!1),this.controller.getIsIos()&&(this.sliderDiv.style.display="none"),this.assignControlAttributes(this.sliderLevelDiv,"ima-slider-level-div"),this.assignControlAttributes(this.fullscreenDiv,"ima-fullscreen-div"),this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.fullscreenDiv.addEventListener("click",this.onAdFullscreenClick.bind(this),!1),this.adContainerDiv.appendChild(this.controlsDiv),this.controlsDiv.appendChild(this.countdownDiv),this.controlsDiv.appendChild(this.seekBarDiv),this.controlsDiv.appendChild(this.playPauseDiv),this.controlsDiv.appendChild(this.muteDiv),this.controlsDiv.appendChild(this.sliderDiv),this.controlsDiv.appendChild(this.fullscreenDiv),this.seekBarDiv.appendChild(this.progressDiv),this.sliderDiv.appendChild(this.sliderLevelDiv)},Fk.prototype.onAdPlayPauseClick=function(){this.controller.onAdPlayPauseClick()},Fk.prototype.onAdMuteClick=function(){this.controller.onAdMuteClick()},Fk.prototype.onAdFullscreenClick=function(){this.controller.toggleFullscreen()},Fk.prototype.onAdsPaused=function(){this.controller.sdkImpl.adPlaying=!1,this.addClass(this.playPauseDiv,"ima-paused"),this.removeClass(this.playPauseDiv,"ima-playing"),this.showAdControls()},Fk.prototype.onAdsResumed=function(){this.onAdsPlaying(),this.showAdControls()},Fk.prototype.onAdsPlaying=function(){this.controller.sdkImpl.adPlaying=!0,this.addClass(this.playPauseDiv,"ima-playing"),this.removeClass(this.playPauseDiv,"ima-paused")},Fk.prototype.updateAdUi=function(e,t,n,r,i){var o=Math.floor(t/60),a=Math.floor(t%60);a.toString().length<2&&(a="0"+a);var s=": ";i>1&&(s=" ("+r+" "+this.controller.getSettings().adLabelNofN+" "+i+"): "),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel+s+o+":"+a;var d=e/n*100;this.progressDiv.style.width=d+"%"},Fk.prototype.unmute=function(){this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*this.controller.getPlayerVolume()+"%"},Fk.prototype.mute=function(){this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"},Fk.prototype.onAdVolumeSliderMouseDown=function(){document.addEventListener("mouseup",this.boundOnMouseUp,!1),document.addEventListener("mousemove",this.boundOnMouseMove,!1)},Fk.prototype.onMouseMove=function(e){this.changeVolume(e)},Fk.prototype.onMouseUp=function(e){this.changeVolume(e),document.removeEventListener("mouseup",this.boundOnMouseUp),document.removeEventListener("mousemove",this.boundOnMouseMove)},Fk.prototype.changeVolume=function(e){var t=(e.clientX-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth;t*=100,t=Math.min(Math.max(t,0),100),this.sliderLevelDiv.style.width=t+"%",0==this.percent?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted")):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted")),this.controller.setVolume(t/100)},Fk.prototype.showAdContainer=function(){this.adContainerDiv.style.display="block"},Fk.prototype.hideAdContainer=function(){this.adContainerDiv.style.display="none"},Fk.prototype.onAdContainerClick=function(){this.isAdNonlinear&&this.controller.togglePlayback()},Fk.prototype.reset=function(){this.hideAdContainer()},Fk.prototype.onAdError=function(){this.hideAdContainer()},Fk.prototype.onAdBreakStart=function(e){this.showAdContainer(),"application/javascript"!==e.getAd().getContentType()||this.controller.getSettings().showControlsForJSAds?this.controlsDiv.style.display="block":this.controlsDiv.style.display="none",this.onAdsPlaying(),this.hideAdControls()},Fk.prototype.onAdBreakEnd=function(){var e=this.controller.getCurrentAd();(null==e||e.isLinear())&&this.hideAdContainer(),this.controlsDiv.style.display="none",this.countdownDiv.innerHTML=""},Fk.prototype.onAllAdsCompleted=function(){this.hideAdContainer()},Fk.prototype.onLinearAdStart=function(){this.removeClass(this.adContainerDiv,"bumpable-ima-ad-container"),this.isAdNonlinear=!1},Fk.prototype.onNonLinearAdLoad=function(){this.adContainerDiv.style.display="block",this.addClass(this.adContainerDiv,"bumpable-ima-ad-container"),this.isAdNonlinear=!0},Fk.prototype.onPlayerEnterFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-non-fullscreen")},Fk.prototype.onPlayerExitFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-fullscreen")},Fk.prototype.onPlayerVolumeChanged=function(e){0==e?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*e+"%")},Fk.prototype.showAdControls=function(){this.controller.getSettings().disableAdControls||this.addClass(this.controlsDiv,"ima-controls-div-showing")},Fk.prototype.hideAdControls=function(){this.removeClass(this.controlsDiv,"ima-controls-div-showing")},Fk.prototype.assignControlAttributes=function(e,t){e.id=this.controlPrefix+t,e.className=this.controlPrefix+t+" "+t},Fk.prototype.getClassRegexp=function(e){return new RegExp("(^|[^A-Za-z-])"+e+"((?![A-Za-z-])|$)","gi")},Fk.prototype.elementHasClass=function(e,t){return this.getClassRegexp(t).test(e.className)},Fk.prototype.addClass=function(e,t){e.className=e.className.trim()+" "+t},Fk.prototype.removeClass=function(e,t){var n=this.getClassRegexp(t);e.className=e.className.trim().replace(n,"")},Fk.prototype.getAdContainerDiv=function(){return this.adContainerDiv},Fk.prototype.setShowCountdown=function(e){this.showCountdown=e,this.countdownDiv.style.display=this.showCountdown?"block":"none"};var Vk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zk=function(e){this.controller=e,this.adDisplayContainer=null,this.adDisplayContainerInitialized=!1,this.adsLoader=null,this.adsManager=null,this.adsRenderingSettings=null,this.adsResponse=null,this.currentAd=null,this.adTrackingTimer=null,this.allAdsCompleted=!1,this.adsActive=!1,this.adPlaying=!1,this.adMuted=!1,this.adBreakReadyListener=void 0,this.contentCompleteCalled=!1,this.isAdTimedOut=!1,this.adsManagerDimensions={width:0,height:0},this.autoPlayAdBreaks=!0,!1===this.controller.getSettings().autoPlayAdBreaks&&(this.autoPlayAdBreaks=!1),this.controller.getSettings().locale&&google.ima.settings.setLocale(this.controller.getSettings().locale),this.controller.getSettings().disableFlashAds&&google.ima.settings.setDisableFlashAds(this.controller.getSettings().disableFlashAds),this.controller.getSettings().disableCustomPlaybackForIOS10Plus&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.controller.getSettings().disableCustomPlaybackForIOS10Plus),this.controller.getSettings().ppid&&google.ima.settings.setPpid(this.controller.getSettings().ppid),this.controller.getSettings().featureFlags&&google.ima.settings.setFeatureFlags(this.controller.getSettings().featureFlags)};zk.prototype.initAdObjects=function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(this.controller.getAdContainerDiv(),this.controller.getContentPlayer()),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==this.controller.getSettings().vpaidAllowed&&this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),void 0!==this.controller.getSettings().vpaidMode&&this.adsLoader.getSettings().setVpaidMode(this.controller.getSettings().vpaidMode),this.controller.getSettings().locale&&this.adsLoader.getSettings().setLocale(this.controller.getSettings().locale),this.controller.getSettings().numRedirects&&this.adsLoader.getSettings().setNumRedirects(this.controller.getSettings().numRedirects),this.controller.getSettings().sessionId&&this.adsLoader.getSettings().setSessionId(this.controller.getSettings().sessionId),this.adsLoader.getSettings().setPlayerType("videojs-ima"),this.adsLoader.getSettings().setPlayerVersion("2.1.0"),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsLoaderError.bind(this),!1),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-loader",adsLoader:this.adsLoader})},zk.prototype.requestAds=function(){var e=new google.ima.AdsRequest;if(this.controller.getSettings().adTagUrl?e.adTagUrl=this.controller.getSettings().adTagUrl:e.adsResponse=this.controller.getSettings().adsResponse,this.controller.getSettings().forceNonLinearFullSlot&&(e.forceNonLinearFullSlot=!0),this.controller.getSettings().vastLoadTimeout&&(e.vastLoadTimeout=this.controller.getSettings().vastLoadTimeout),this.controller.getSettings().omidMode&&window.console.warn("The additional setting `omidMode` has been removed. Use `omidVendorAccess` instead."),this.controller.getSettings().omidVendorAccess){e.omidAccessModeRules={};var t=this.controller.getSettings().omidVendorAccess;Object.keys(t).forEach((function(n){e.omidAccessModeRules[n]=t[n]}))}e.linearAdSlotWidth=this.controller.getPlayerWidth(),e.linearAdSlotHeight=this.controller.getPlayerHeight(),e.nonLinearAdSlotWidth=this.controller.getSettings().nonLinearWidth||this.controller.getPlayerWidth(),e.nonLinearAdSlotHeight=this.controller.getSettings().nonLinearHeight||this.controller.getPlayerHeight(),e.setAdWillAutoPlay(this.controller.adsWillAutoplay()),e.setAdWillPlayMuted(this.controller.adsWillPlayMuted());var n=this.controller.getSettings().adsRequest;n&&"object"===(void 0===n?"undefined":Vk(n))&&Object.keys(n).forEach((function(t){e[t]=n[t]})),this.adsLoader.requestAds(e),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-request",AdsRequest:e})},zk.prototype.onAdsManagerLoaded=function(e){this.createAdsRenderingSettings(),this.adsManager=e.getAdsManager(this.controller.getContentPlayheadTracker(),this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,this.onAdBreakReady.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,this.onAdLog.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed.bind(this)),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-manager",adsManager:this.adsManager}),this.autoPlayAdBreaks||this.initAdsManager();var t=this.controller.getSettings().preventLateAdStart;t?t&&!this.isAdTimedOut&&this.controller.onAdsReady():this.controller.onAdsReady(),this.controller.getSettings().adsManagerLoadedCallback&&this.controller.getSettings().adsManagerLoadedCallback()},zk.prototype.onAdsLoaderError=function(e){window.console.warn("AdsLoader error: "+e.getError()),this.controller.onErrorLoadingAds(e),this.adsManager&&this.adsManager.destroy()},zk.prototype.initAdsManager=function(){try{var e=this.controller.getPlayerWidth(),t=this.controller.getPlayerHeight();this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.init(e,t,google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.initializeAdDisplayContainer()}catch(e){this.onAdError(e)}},zk.prototype.createAdsRenderingSettings=function(){if(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.controller.getSettings().adsRenderingSettings)for(var e in this.controller.getSettings().adsRenderingSettings)""!==e&&(this.adsRenderingSettings[e]=this.controller.getSettings().adsRenderingSettings[e])},zk.prototype.onAdError=function(e){var t=void 0!==e.getError?e.getError():e.stack;window.console.warn("Ad error: "+t),this.adsManager.destroy(),this.controller.onAdError(e),this.adsActive=!1,this.adPlaying=!1},zk.prototype.onAdBreakReady=function(e){this.adBreakReadyListener(e)},zk.prototype.onContentPauseRequested=function(e){this.adsActive=!0,this.adPlaying=!0,this.controller.onAdBreakStart(e)},zk.prototype.onContentResumeRequested=function(e){this.adsActive=!1,this.adPlaying=!1,this.controller.onAdBreakEnd()},zk.prototype.onAllAdsCompleted=function(e){this.allAdsCompleted=!0,this.controller.onAllAdsCompleted()},zk.prototype.onAdLoaded=function(e){e.getAd().isLinear()||(this.controller.onNonLinearAdLoad(),this.controller.playContent())},zk.prototype.onAdStarted=function(e){this.currentAd=e.getAd(),this.currentAd.isLinear()?(this.adTrackingTimer=setInterval(this.onAdPlayheadTrackerInterval.bind(this),250),this.controller.onLinearAdStart()):this.controller.onNonLinearAdStart()},zk.prototype.onAdPaused=function(){this.controller.onAdsPaused()},zk.prototype.onAdResumed=function(e){this.controller.onAdsResumed()},zk.prototype.onAdComplete=function(){this.currentAd.isLinear()&&clearInterval(this.adTrackingTimer)},zk.prototype.onAdLog=function(e){this.controller.onAdLog(e)},zk.prototype.onAdPlayheadTrackerInterval=function(){if(null!==this.adsManager){var e=this.adsManager.getRemainingTime(),t=this.currentAd.getDuration(),n=t-e;n=n>0?n:0;var r=0,i=void 0;this.currentAd.getAdPodInfo()&&(i=this.currentAd.getAdPodInfo().getAdPosition(),r=this.currentAd.getAdPodInfo().getTotalAds()),this.controller.onAdPlayheadUpdated(n,e,t,i,r)}},zk.prototype.onContentComplete=function(){this.adsLoader&&(this.adsLoader.contentComplete(),this.contentCompleteCalled=!0),(this.adsManager&&this.adsManager.getCuePoints()&&!this.adsManager.getCuePoints().includes(-1)||!this.adsManager)&&this.controller.onNoPostroll(),this.allAdsCompleted&&this.controller.onContentAndAdsCompleted()},zk.prototype.onPlayerDisposed=function(){this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)},zk.prototype.onPlayerReadyForPreroll=function(){if(this.autoPlayAdBreaks){this.initAdsManager();try{this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start()}catch(e){this.onAdError(e)}}},zk.prototype.onAdTimeout=function(){this.isAdTimedOut=!0},zk.prototype.onPlayerReady=function(){this.initAdObjects(),(this.controller.getSettings().adTagUrl||this.controller.getSettings().adsResponse)&&"onLoad"===this.controller.getSettings().requestMode&&this.requestAds()},zk.prototype.onPlayerEnterFullscreen=function(){this.adsManager&&this.adsManager.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)},zk.prototype.onPlayerExitFullscreen=function(){this.adsManager&&this.adsManager.resize(this.controller.getPlayerWidth(),this.controller.getPlayerHeight(),google.ima.ViewMode.NORMAL)},zk.prototype.onPlayerVolumeChanged=function(e){this.adsManager&&this.adsManager.setVolume(e),this.adMuted=0==e},zk.prototype.onPlayerResize=function(e,t){this.adsManager&&(this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.resize(e,t,google.ima.ViewMode.NORMAL))},zk.prototype.getCurrentAd=function(){return this.currentAd},zk.prototype.setAdBreakReadyListener=function(e){this.adBreakReadyListener=e},zk.prototype.isAdPlaying=function(){return this.adPlaying},zk.prototype.isAdMuted=function(){return this.adMuted},zk.prototype.pauseAds=function(){this.adsManager.pause(),this.adPlaying=!1},zk.prototype.resumeAds=function(){this.adsManager.resume(),this.adPlaying=!0},zk.prototype.unmute=function(){this.adsManager.setVolume(1),this.adMuted=!1},zk.prototype.mute=function(){this.adsManager.setVolume(0),this.adMuted=!0},zk.prototype.setVolume=function(e){this.adsManager.setVolume(e),this.adMuted=0==e},zk.prototype.initializeAdDisplayContainer=function(){this.adDisplayContainer&&(this.adDisplayContainerInitialized||(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0))},zk.prototype.playAdBreak=function(){this.autoPlayAdBreaks||(this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start())},zk.prototype.addEventListener=function(e,t){this.adsManager&&this.adsManager.addEventListener(e,t)},zk.prototype.getAdsManager=function(){return this.adsManager},zk.prototype.reset=function(){this.adsActive=!1,this.adPlaying=!1,this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentCompleteCalled&&this.adsLoader.contentComplete(),this.contentCompleteCalled=!1,this.allAdsCompleted=!1};var Wk=function(e,t){this.settings={},this.contentAndAdsEndedListeners=[],this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.isIos=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i),this.initWithSettings(t);var n={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},r=Object.assign({},n,t.contribAdsSettings||{});this.playerWrapper=new qk(e,r,this),this.adUi=new Fk(this),this.sdkImpl=new zk(this)};Wk.IMA_DEFAULTS={adLabel:"Advertisement",adLabelNofN:"of",debug:!1,disableAdControls:!1,prerollTimeout:1e3,preventLateAdStart:!1,requestMode:"onLoad",showControlsForJSAds:!0,timeout:5e3},Wk.prototype.initWithSettings=function(e){this.settings=Object.assign({},Wk.IMA_DEFAULTS,e||{}),this.warnAboutDeprecatedSettings(),this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdown=!1)},Wk.prototype.warnAboutDeprecatedSettings=function(){var e=this;["adWillAutoplay","adsWillAutoplay","adWillPlayMuted","adsWillPlayMuted"].forEach((function(t){void 0!==e.settings[t]&&console.warn("WARNING: videojs.ima setting "+t+" is deprecated")}))},Wk.prototype.getSettings=function(){return this.settings},Wk.prototype.getIsMobile=function(){return this.isMobile},Wk.prototype.getIsIos=function(){return this.isIos},Wk.prototype.injectAdContainerDiv=function(e){this.playerWrapper.injectAdContainerDiv(e)},Wk.prototype.getAdContainerDiv=function(){return this.adUi.getAdContainerDiv()},Wk.prototype.getContentPlayer=function(){return this.playerWrapper.getContentPlayer()},Wk.prototype.getContentPlayheadTracker=function(){return this.playerWrapper.getContentPlayheadTracker()},Wk.prototype.requestAds=function(){this.sdkImpl.requestAds()},Wk.prototype.setSetting=function(e,t){this.settings[e]=t},Wk.prototype.onErrorLoadingAds=function(e){this.adUi.onAdError(),this.playerWrapper.onAdError(e)},Wk.prototype.onAdPlayPauseClick=function(){this.sdkImpl.isAdPlaying()?(this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()):(this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds())},Wk.prototype.onAdMuteClick=function(){this.sdkImpl.isAdMuted()?(this.playerWrapper.unmute(),this.adUi.unmute(),this.sdkImpl.unmute()):(this.playerWrapper.mute(),this.adUi.mute(),this.sdkImpl.mute())},Wk.prototype.setVolume=function(e){this.playerWrapper.setVolume(e),this.sdkImpl.setVolume(e)},Wk.prototype.getPlayerVolume=function(){return this.playerWrapper.getVolume()},Wk.prototype.toggleFullscreen=function(){this.playerWrapper.toggleFullscreen()},Wk.prototype.onAdError=function(e){this.adUi.onAdError(),this.playerWrapper.onAdError(e)},Wk.prototype.onAdBreakStart=function(e){this.playerWrapper.onAdBreakStart(),this.adUi.onAdBreakStart(e)},Wk.prototype.showAdContainer=function(){this.adUi.showAdContainer()},Wk.prototype.onAdBreakEnd=function(){this.playerWrapper.onAdBreakEnd(),this.adUi.onAdBreakEnd()},Wk.prototype.onAllAdsCompleted=function(){this.adUi.onAllAdsCompleted(),this.playerWrapper.onAllAdsCompleted()},Wk.prototype.onAdsPaused=function(){this.adUi.onAdsPaused()},Wk.prototype.onAdsResumed=function(){this.adUi.onAdsResumed()},Wk.prototype.onAdPlayheadUpdated=function(e,t,n,r,i){this.adUi.updateAdUi(e,t,n,r,i)},Wk.prototype.onAdLog=function(e){this.playerWrapper.onAdLog(e)},Wk.prototype.getCurrentAd=function(){return this.sdkImpl.getCurrentAd()},Wk.prototype.playContent=function(){this.playerWrapper.play()},Wk.prototype.onLinearAdStart=function(){this.adUi.onLinearAdStart(),this.playerWrapper.onAdStart()},Wk.prototype.onNonLinearAdLoad=function(){this.adUi.onNonLinearAdLoad()},Wk.prototype.onNonLinearAdStart=function(){this.adUi.onNonLinearAdLoad(),this.playerWrapper.onAdStart()},Wk.prototype.getPlayerWidth=function(){return this.playerWrapper.getPlayerWidth()},Wk.prototype.getPlayerHeight=function(){return this.playerWrapper.getPlayerHeight()},Wk.prototype.onAdsReady=function(){this.playerWrapper.onAdsReady()},Wk.prototype.onPlayerResize=function(e,t){this.sdkImpl.onPlayerResize(e,t)},Wk.prototype.onContentComplete=function(){this.sdkImpl.onContentComplete()},Wk.prototype.onNoPostroll=function(){this.playerWrapper.onNoPostroll()},Wk.prototype.onContentAndAdsCompleted=function(){for(var e in this.contentAndAdsEndedListeners)"function"==typeof this.contentAndAdsEndedListeners[e]&&this.contentAndAdsEndedListeners[e]()},Wk.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[],this.sdkImpl.onPlayerDisposed()},Wk.prototype.onPlayerReadyForPreroll=function(){this.sdkImpl.onPlayerReadyForPreroll()},Wk.prototype.onAdTimeout=function(){this.sdkImpl.onAdTimeout()},Wk.prototype.onPlayerReady=function(){this.sdkImpl.onPlayerReady()},Wk.prototype.onPlayerEnterFullscreen=function(){this.adUi.onPlayerEnterFullscreen(),this.sdkImpl.onPlayerEnterFullscreen()},Wk.prototype.onPlayerExitFullscreen=function(){this.adUi.onPlayerExitFullscreen(),this.sdkImpl.onPlayerExitFullscreen()},Wk.prototype.onPlayerVolumeChanged=function(e){this.adUi.onPlayerVolumeChanged(e),this.sdkImpl.onPlayerVolumeChanged(e)},Wk.prototype.setContentWithAdTag=function(e,t){this.reset(),this.settings.adTagUrl=t||this.settings.adTagUrl,this.playerWrapper.changeSource(e)},Wk.prototype.setContentWithAdsResponse=function(e,t){this.reset(),this.settings.adsResponse=t||this.settings.adsResponse,this.playerWrapper.changeSource(e)},Wk.prototype.setContentWithAdsRequest=function(e,t){this.reset(),this.settings.adsRequest=t||this.settings.adsRequest,this.playerWrapper.changeSource(e)},Wk.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset(),this.adUi.reset()},Wk.prototype.addContentEndedListener=function(e){this.playerWrapper.addContentEndedListener(e)},Wk.prototype.addContentAndAdsEndedListener=function(e){this.contentAndAdsEndedListeners.push(e)},Wk.prototype.setAdBreakReadyListener=function(e){this.sdkImpl.setAdBreakReadyListener(e)},Wk.prototype.setShowCountdown=function(e){this.adUi.setShowCountdown(e),this.showCountdown=e,this.adUi.countdownDiv.style.display=this.showCountdown?"block":"none"},Wk.prototype.initializeAdDisplayContainer=function(){this.sdkImpl.initializeAdDisplayContainer()},Wk.prototype.playAdBreak=function(){this.sdkImpl.playAdBreak()},Wk.prototype.addEventListener=function(e,t){this.sdkImpl.addEventListener(e,t)},Wk.prototype.getAdsManager=function(){return this.sdkImpl.getAdsManager()},Wk.prototype.getPlayerId=function(){return this.playerWrapper.getPlayerId()},Wk.prototype.changeAdTag=function(e){this.reset(),this.settings.adTagUrl=e},Wk.prototype.pauseAd=function(){this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()},Wk.prototype.resumeAd=function(){this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds()},Wk.prototype.togglePlayback=function(){this.playerWrapper.togglePlayback()},Wk.prototype.adsWillAutoplay=function(){return void 0!==this.settings.adsWillAutoplay?this.settings.adsWillAutoplay:void 0!==this.settings.adWillAutoplay?this.settings.adWillAutoplay:!!this.playerWrapper.getPlayerOptions().autoplay},Wk.prototype.adsWillPlayMuted=function(){return void 0!==this.settings.adsWillPlayMuted?this.settings.adsWillPlayMuted:void 0!==this.settings.adWillPlayMuted?this.settings.adWillPlayMuted:void 0!==this.playerWrapper.getPlayerOptions().muted?this.playerWrapper.getPlayerOptions().muted:0==this.playerWrapper.getVolume()},Wk.prototype.triggerPlayerEvent=function(e,t){this.playerWrapper.triggerPlayerEvent(e,t)};var Hk=function(e,t,n){this.vjsPlayer=e,this.daiController=n,this.vjsControls=this.vjsPlayer.getChild("controlBar"),this.h5Player=null,this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("pause",this.onPause.bind(this)),this.vjsPlayer.on("play",this.onPlay.bind(this)),this.vjsPlayer.on("seeked",this.onSeekEnd.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),this.vjsPlayer.ads(t)};Hk.prototype.playerDisposedListener=function(){this.contentEndedListeners=[],this.daiController.onPlayerDisposed()},Hk.prototype.onPause=function(){this.daiController.isInAdBreak()&&this.vjsControls.show()},Hk.prototype.onPlay=function(){this.daiController.isInAdBreak()&&this.vjsControls.hide()},Hk.prototype.onSeekEnd=function(){this.daiController.onSeekEnd(this.vjsPlayer.currentTime())},Hk.prototype.onPlayerReady=function(){this.h5Player=document.getElementById(this.getPlayerId()).getElementsByClassName("vjs-tech")[0],this.daiController.onPlayerReady()},Hk.prototype.getStreamPlayer=function(){return this.h5Player},Hk.prototype.getVjsPlayer=function(){return this.vjsPlayer},Hk.prototype.getPlayerOptions=function(){return this.vjsPlayer.options_},Hk.prototype.getPlayerId=function(){return this.vjsPlayer.id()},Hk.prototype.onAdError=function(e){this.vjsControls.show();var t=void 0!==e.getError?e.getError():e.stack;this.vjsPlayer.trigger({type:"adserror",data:{AdError:t,AdErrorEvent:e}})},Hk.prototype.onAdBreakStart=function(){this.vjsControls.hide()},Hk.prototype.onAdBreakEnd=function(){this.vjsControls.show()},Hk.prototype.reset=function(){this.vjsControls.show()};var Zk=function(e){this.daiController=e,this.streamPlayer=null,this.vjsPlayer=null,this.streamManager=null,this.uiSettings=new google.ima.dai.api.UiSettings,this.isAdBreak=!1,this.isSnapback=!1,this.snapForwardTime=0,this.timedMetadata,this.metadataLoaded={},this.SOURCE_TYPES={hls:"application/x-mpegURL",dash:"application/dash+xml"}};Zk.prototype.initImaDai=function(){this.streamPlayer=this.daiController.getStreamPlayer(),this.vjsPlayer=this.daiController.getVjsPlayer(),this.createAdUiDiv(),this.daiController.getSettings().locale&&this.uiSettings.setLocale(this.daiController.getSettings().locale),this.streamManager=new google.ima.dai.api.StreamManager(this.streamPlayer,this.adUiDiv,this.uiSettings),this.streamPlayer.addEventListener("pause",this.onStreamPause),this.streamPlayer.addEventListener("play",this.onStreamPlay),this.streamManager.addEventListener([google.ima.dai.api.StreamEvent.Type.LOADED,google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED],this.onStreamEvent.bind(this),!1),this.vjsPlayer.textTracks().onaddtrack=this.onAddTrack.bind(this),this.vjsPlayer.trigger({type:"stream-manager",StreamManager:this.streamManager}),this.requestStream()},Zk.prototype.onAddTrack=function(e){var t=this,n=e.track;"metadata"===n.kind&&(n.mode="hidden",n.oncuechange=function(e){var r=!0,i=!1,o=void 0;try{for(var a,s=n.activeCues_[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var d=a.value,c={};c[d.value.key]=d.value.data,t.streamManager.onTimedMetadata(c)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}})},Zk.prototype.createAdUiDiv=function(){var e=document.createElement("div");e.id="ad-ui",e.style.height="calc(100% - 3em)",this.streamPlayer.parentNode.appendChild(e),this.adUiDiv=e},Zk.prototype.onStreamPause=function(){this.isAdBreak&&(this.adUiDiv.style.display="none")},Zk.prototype.onStreamPlay=function(){this.isAdBreak&&(this.adUiDiv.style.display="block")},Zk.prototype.onSeekEnd=function(e){if("live"!==this.daiController.getSettings().streamType)if(this.isSnapback)this.isSnapback=!1;else{var t=this.streamManager.previousCuePointForStreamTime(e);t&&!t.played&&(this.isSnapback=!0,this.snapForwardTime=e,this.vjsPlayer.currentTime(t.start))}},Zk.prototype.onStreamEvent=function(e){switch(e.type){case google.ima.dai.api.StreamEvent.Type.LOADED:this.loadUrl(e.getStreamData().url);break;case google.ima.dai.api.StreamEvent.Type.ERROR:window.console.warn("Error loading stream, attempting to play backup stream. "+e.getStreamData().errorMessage),this.daiController.onErrorLoadingAds(e),this.daiController.getSettings().fallbackStreamUrl&&this.loadurl(this.daiController.getSettings().fallbackStreamUrl);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:this.isAdBreak=!0,this.adUiDiv.style.display="block",this.daiController.onAdBreakStart();break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:this.isAdBreak=!1,this.adUiDiv.style.display="none",this.daiController.onAdBreakEnd(),this.snapForwardTime&&this.snapForwardTime>this.vjsPlayer.currentTime()&&(this.vjsPlayer.currentTime(this.snapForwardTime),this.snapForwardTime=0)}},Zk.prototype.loadUrl=function(e){this.vjsPlayer.ready(function(){var t=this.daiController.getSettings().streamFormat;this.vjsPlayer.src({src:e,type:this.SOURCE_TYPES[t]});var n=this.daiController.getSettings().bookmarkTime;if(n){var r=this.streamManager.streamTimeForContentTime(n);this.isSnapback=!0,this.vjsPlayer.currentTime(r)}}.bind(this))},Zk.prototype.requestStream=function(){var e=void 0,t=this.daiController.getSettings().streamType;if("vod"===t?((e=new google.ima.dai.api.VODStreamRequest).contentSourceId=this.daiController.getSettings().cmsId,e.videoId=this.daiController.getSettings().videoId):"live"===t?(e=new google.ima.dai.api.LiveStreamRequest).assetKey=this.daiController.getSettings().assetKey:window.console.warn("No valid stream type selected"),e.format=this.daiController.getSettings().streamFormat,this.daiController.getSettings().apiKey&&(e.apiKey=this.daiController.getSettings().apiKey),this.daiController.getSettings().authToken&&(e.authToken=this.daiController.getSettings().authToken),this.daiController.getSettings().adTagParameters&&(e.adTagParameters=this.daiController.getSettings().adTagParameters),this.daiController.getSettings().streamActivityMonitorId&&(e.streamActivityMonitorId=this.daiController.getSettings().streamActivityMonitorId),this.daiController.getSettings().omidMode){e.omidAccessModeRules={};var n=this.daiController.getSettings().omidMode;n.FULL&&(e.omidAccessModeRules[google.ima.OmidAccessMode.FULL]=n.FULL),n.DOMAIN&&(e.omidAccessModeRules[google.ima.OmidAccessMode.DOMAIN]=n.DOMAIN),n.LIMITED&&(e.omidAccessModeRules[google.ima.OmidAccessMode.LIMITED]=n.LIMITED)}this.streamManager.requestStream(e),this.vjsPlayer.trigger({type:"stream-request",StreamRequest:e})},Zk.prototype.onPlayerReady=function(){this.initImaDai()},Zk.prototype.onPlayerDisposed=function(){this.streamManager&&this.streamManager.reset()},Zk.prototype.getStreamManager=function(){return this.StreamManager},Zk.prototype.reset=function(){this.StreamManager&&this.StreamManager.reset()};var $k=function(e,t){this.inAdBreak=!1,this.settings={},this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.isIos=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i),this.initWithSettings(t);var n={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},r=Object.assign({},n,t.contribAdsSettings||{});this.playerWrapper=new Hk(e,r,this),this.sdkImpl=new Zk(this)};function Gk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}$k.IMA_DEFAULTS={adLabel:"Advertisement",adLabelNofN:"of",debug:!1,disableAdControls:!1,showControlsForJSAds:!0},$k.prototype.initWithSettings=function(e){this.settings=Object.assign({},$k.IMA_DEFAULTS,e||{}),this.warnAboutDeprecatedSettings(),this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdown=!1)},$k.prototype.warnAboutDeprecatedSettings=function(){var e=this;[].forEach((function(t){void 0!==e.settings[t]&&console.warn("WARNING: videojs.imaDai setting "+t+" is deprecated")}))},$k.prototype.getSettings=function(){return this.settings},$k.prototype.getIsMobile=function(){return this.isMobile},$k.prototype.getIsIos=function(){return this.isIos},$k.prototype.getStreamPlayer=function(){return this.playerWrapper.getStreamPlayer()},$k.prototype.getVjsPlayer=function(){return this.playerWrapper.getVjsPlayer()},$k.prototype.requestStream=function(){this.sdkImpl.requestStream()},$k.prototype.setSetting=function(e,t){this.settings[e]=t},$k.prototype.onErrorLoadingAds=function(e){this.playerWrapper.onAdError(e)},$k.prototype.onAdError=function(e){this.playerWrapper.onAdError(e)},$k.prototype.onAdBreakStart=function(){this.inAdBreak=!0,this.playerWrapper.onAdBreakStart()},$k.prototype.onAdBreakEnd=function(){this.inAdBreak=!1,this.playerWrapper.onAdBreakEnd()},$k.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[],this.sdkImpl.onPlayerDisposed()},$k.prototype.isInAdBreak=function(){return this.inAdBreak},$k.prototype.onSeekEnd=function(e){this.sdkImpl.onSeekEnd(e)},$k.prototype.onPlayerReady=function(){this.sdkImpl.onPlayerReady()},$k.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset()},$k.prototype.addEventListener=function(e,t){this.sdkImpl.addEventListener(e,t)},$k.prototype.getStreamManager=function(){return this.sdkImpl.getStreamManager()},$k.prototype.getPlayerId=function(){return this.playerWrapper.getPlayerId()},$k.prototype.streamWillAutoplay=function(){return void 0!==this.settings.streamWillAutoplay?this.settings.streamWillAutoplay:!!this.playerWrapper.getPlayerOptions().autoplay},$k.prototype.triggerPlayerEvent=function(e,t){this.playerWrapper.triggerPlayerEvent(e,t)};var Kk=function(e,t){this.controller=new Wk(e,t),this.addContentAndAdsEndedListener=function(e){this.controller.addContentAndAdsEndedListener(e)}.bind(this),this.addContentEndedListener=function(e){this.controller.addContentEndedListener(e)}.bind(this),this.addEventListener=function(e,t){this.controller.addEventListener(e,t)}.bind(this),this.changeAdTag=function(e){this.controller.changeAdTag(e)}.bind(this),this.getAdsManager=function(){return this.controller.getAdsManager()}.bind(this),this.initializeAdDisplayContainer=function(){this.controller.initializeAdDisplayContainer()}.bind(this),this.pauseAd=function(){this.controller.pauseAd()}.bind(this),this.playAdBreak=function(){this.controller.playAdBreak()}.bind(this),this.requestAds=function(){this.controller.requestAds()}.bind(this),this.resumeAd=function(){this.controller.resumeAd()}.bind(this),this.setAdBreakReadyListener=function(e){this.controller.setAdBreakReadyListener(e)}.bind(this),this.setContentWithAdTag=function(e,t){this.controller.setContentWithAdTag(e,t)}.bind(this),this.setContentWithAdsResponse=function(e,t){this.controller.setContentWithAdsResponse(e,t)}.bind(this),this.setContentWithAdsRequest=function(e,t){this.controller.setContentWithAdsRequest(e,t)}.bind(this),this.setShowCountdown=function(e){this.controller.setShowCountdown(e)}.bind(this)},Xk=function(e,t){this.controller=new $k(e,t),this.streamEndedListener=function(e){this.controller.addStreamEndedListener(e)}.bind(this),this.addEventListener=function(e,t){this.controller.addEventListener(e,t)}.bind(this),this.getStreamManager=function(){return this.controller.getStreamManager()}.bind(this)},Jk=function e(t,n){Gk(this,e),"hls"===(t=t.toLowerCase())||"dash"===t?"dash"!==t?"string"==typeof n?(this.streamFormat=t,this.assetKey=n):window.console.error("assetKey error: value must be string."):window.console.error("streamFormat error: DASH streams are notcurrently supported by this plugin."):window.console.error("VodStream error: incorrect streamFormat.")},Yk=function e(t,n,r){Gk(this,e),"hls"===(t=t.toLowerCase())||"dash"===t?"dash"!==t?"string"==typeof n?"string"==typeof r?(this.streamFormat=t,this.cmsId=n,this.videoId=r):window.console.error("videoId error: value must be string."):window.console.error("cmsId error: value must be string."):window.console.error("streamFormat error: DASH streams are notcurrently supported by this plugin."):window.console.error("VodStream error: incorrect streamFormat.")},Qk=nk.registerPlugin||nk.plugin;function eC(e,t,n){e.on("timeupdate",i);const r=()=>e.off("timeupdate",i);return r;function i(){const i=e.currentTime();i>=t&&(r(),n(i))}}function tC(e){let{log:t,player:n}=e;n.addClass("vjs-waiting"),ys({log:t,player:n}),t("adding spinner")}Qk("ima",(function(e){this.ima=new Kk(this,e)})),Qk("imaDai",(function(e,t){if(e instanceof Jk)t.streamType="live",t.assetKey=e.assetKey;else{if(!(e instanceof Yk))return void window.console.error("initDai() first parameter must be an instance of LiveStream or VodStream.");t.streamType="vod",t.cmsId=e.cmsId,t.videoId=e.videoId}t.streamFormat=e.streamFormat,this.imaDai=new Xk(this,t)}));var nC=function(e){var t=e.playlist.autoadvance_;t.timeout&&e.clearTimeout(t.timeout),t.trigger&&e.off("ended",t.trigger),t.timeout=null,t.trigger=null},rC=function e(t,n){var r;nC(t),"number"==typeof(r=n)&&!isNaN(r)&&r>=0&&r<1/0?(t.playlist.autoadvance_.delay=n,t.playlist.autoadvance_.trigger=function(){var r=function(){return e(t,n)};t.one("play",r),t.playlist.autoadvance_.timeout=t.setTimeout((function(){nC(t),t.off("play",r),t.playlist.next()}),1e3*n)},t.one("ended",t.playlist.autoadvance_.trigger)):t.playlist.autoadvance_.delay=null},iC=function(e){return!!e&&"object"==typeof e},oC=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].sources;if(Array.isArray(r))for(var i=0;i<r.length;i++){var o=r[i];if(o&&(d=void 0,c=void 0,d=a=o,c=s=t,"object"==typeof a&&(d=a.src),"object"==typeof s&&(c=s.src),/^\/\//.test(d)&&(c=c.slice(c.indexOf("//"))),/^\/\//.test(c)&&(d=d.slice(d.indexOf("//"))),d===c))return n}}var a,s,d,c;return-1};var aC=function(e,t){!function(e,t,n){void 0===n&&(n=0);var r=null,i=!1,o=e.playlist=function(t,n){if(void 0===n&&(n=0),i)throw new Error("do not call playlist() during a playlist change");if(Array.isArray(t)){var a=Array.isArray(r)?r.slice():null,s=t.slice();(r=s.slice()).filter((function(e){return iC(e)})).length!==r.length&&(r=function(e){var t,n=[];return e.forEach((function(e){iC(e)?t=e:(t=Object(e)).originalValue=e,n.push(t)})),n}(r)),d=1,r.forEach((function(e){e.playlistItemId_=d++})),i=!0,e.trigger({type:"duringplaylistchange",nextIndex:n,nextPlaylist:s,previousIndex:o.currentIndex_,previousPlaylist:a||[]}),i=!1,-1!==n&&o.currentItem(n),a&&e.setTimeout((function(){e.trigger("playlistchange")}),0)}var d;return r.map((function(e){return e.originalValue||e})).slice()};e.on("loadstart",(function(){-1===o.currentItem()&&nC(e)})),o.currentIndex_=-1,o.player_=e,o.autoadvance_={},o.repeat_=!1,o.currentPlaylistItemId_=null,o.currentItem=function(e){if(i)return o.currentIndex_;if("number"==typeof e&&o.currentIndex_!==e&&e>=0&&e<r.length)return o.currentIndex_=e,function(e,t){var n=!e.paused()||e.ended();e.trigger("beforeplaylistitem",t.originalValue||t),t.playlistItemId_&&(e.playlist.currentPlaylistItemId_=t.playlistItemId_),e.poster(t.poster||""),e.src(t.sources),function(e){for(var t=e.remoteTextTracks(),n=t&&t.length||0;n--;)e.removeRemoteTextTrack(t[n])}(e),e.ready((function(){if((t.textTracks||[]).forEach(e.addRemoteTextTrack.bind(e)),e.trigger("playlistitem",t.originalValue||t),n){var r=e.play();void 0!==r&&"function"==typeof r.then&&r.then(null,(function(e){}))}rC(e,e.playlist.autoadvance_.delay)}))}(o.player_,r[o.currentIndex_]),o.currentIndex_;var t=o.player_.currentSrc()||"";if(o.currentPlaylistItemId_){var n=function(e,t){for(var n=0;n<e.length;n++)if(e[n].playlistItemId_===t)return n;return-1}(r,o.currentPlaylistItemId_),a=r[n];if(a&&Array.isArray(a.sources)&&oC([a],t)>-1)return o.currentIndex_=n,o.currentIndex_;o.currentPlaylistItemId_=null}return o.currentIndex_=o.indexOf(t),o.currentIndex_},o.contains=function(e){return-1!==o.indexOf(e)},o.indexOf=function(e){if("string"==typeof e)return oC(r,e);for(var t=Array.isArray(e)?e:e.sources,n=0;n<t.length;n++){var i=t[n];if("string"==typeof i)return oC(r,i);if(i.src)return oC(r,i.src)}return-1},o.currentIndex=function(){return o.currentItem()},o.lastIndex=function(){return r.length-1},o.nextIndex=function(){var e=o.currentItem();if(-1===e)return-1;var t=o.lastIndex();return o.repeat_&&e===t?0:Math.min(e+1,t)},o.previousIndex=function(){var e=o.currentItem();return-1===e?-1:o.repeat_&&0===e?o.lastIndex():Math.max(e-1,0)},o.first=function(){if(!i){var e=o.currentItem(0);if(r.length)return r[e].originalValue||r[e];o.currentIndex_=-1}},o.last=function(){if(!i){var e=o.currentItem(o.lastIndex());if(r.length)return r[e].originalValue||r[e];o.currentIndex_=-1}},o.next=function(){if(!i){var e=o.nextIndex();if(e!==o.currentIndex_){var t=o.currentItem(e);return r[t].originalValue||r[t]}}},o.previous=function(){if(!i){var e=o.previousIndex();if(e!==o.currentIndex_){var t=o.currentItem(e);return r[t].originalValue||r[t]}}},o.autoadvance=function(e){rC(o.player_,e)},o.repeat=function(e){return void 0===e?o.repeat_:"boolean"==typeof e?(o.repeat_=!!e,o.repeat_):void nk.log.error("videojs-playlist: Invalid value for repeat",e)},o.sort=function(t){r.length&&(r.sort(t),i||e.trigger("playlistsorted"))},o.reverse=function(){r.length&&(r.reverse(),i||e.trigger("playlistsorted"))},o.shuffle=function(t){var n,a=(void 0===t?{}:t).rest,s=0,d=r;a&&(s=o.currentIndex_+1,d=r.slice(s)),d.length<=1||(function(e){for(var t=-1,n=e.length-1;++t<e.length;){var r=t+Math.floor(Math.random()*(n-t+1)),i=e[r];e[r]=e[t],e[t]=i}}(d),a&&(n=r).splice.apply(n,[s,d.length].concat(d)),i||e.trigger("playlistsorted"))},Array.isArray(t)?o(t.slice(),n):r=[]}(this,e,t)};function sC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(nk.registerPlugin||nk.plugin)("playlist",aC),aC.VERSION="4.3.1";var dC={align:"top-left",class:"",content:"This overlay will show up while the video is playing",debug:!1,showBackground:!0,attachToControlBar:!1,overlays:[{start:"playing",end:"paused"}]},cC=nk.getComponent("Component"),lC=nk.dom||nk,uC=nk.registerPlugin||nk.plugin,pC=function(e){return"number"==typeof e&&e==e},fC=function(e){return"string"==typeof e&&/^\S+$/.test(e)},hC=function(e){var t,n;function r(t,n){var i;return i=e.call(this,t,n)||this,["start","end"].forEach((function(e){var t=i.options_[e];if(pC(t))i[e+"Event_"]="timeupdate";else if(fC(t))i[e+"Event_"]=t;else if("start"===e)throw new Error('invalid "start" option; expected number or string')})),["endListener_","rewindListener_","startListener_"].forEach((function(e){i[e]=function(t){return r.prototype[e].call(sC(sC(i)),t)}})),"timeupdate"===i.startEvent_&&i.on(t,"timeupdate",i.rewindListener_),i.debug('created, listening to "'+i.startEvent_+'" for "start" and "'+(i.endEvent_||"nothing")+'" for "end"'),i.hide(),i}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.createEl=function(){var e=this.options_,t=e.content,n=e.showBackground?"vjs-overlay-background":"vjs-overlay-no-background",r=lC.createEl("div",{className:"\n        vjs-overlay\n        vjs-overlay-"+e.align+"\n        "+e.class+"\n        "+n+"\n        vjs-hidden\n      "});return"string"==typeof t?r.innerHTML=t:t instanceof Eh().DocumentFragment?r.appendChild(t):lC.appendContent(r,t),r},i.debug=function(){if(this.options_.debug){for(var e=nk.log,t=e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.hasOwnProperty(r[0])&&"function"==typeof e[r[0]]&&(t=e[r.shift()]),t.apply(void 0,["overlay#"+this.id()+": "].concat(r))}},i.hide=function(){return e.prototype.hide.call(this),this.debug("hidden"),this.debug('bound `startListener_` to "'+this.startEvent_+'"'),this.endEvent_&&(this.debug('unbound `endListener_` from "'+this.endEvent_+'"'),this.off(this.player(),this.endEvent_,this.endListener_)),this.on(this.player(),this.startEvent_,this.startListener_),this},i.shouldHide_=function(e,t){var n=this.options_.end;return pC(n)?e>=n:n===t},i.show=function(){return e.prototype.show.call(this),this.off(this.player(),this.startEvent_,this.startListener_),this.debug("shown"),this.debug('unbound `startListener_` from "'+this.startEvent_+'"'),this.endEvent_&&(this.debug('bound `endListener_` to "'+this.endEvent_+'"'),this.on(this.player(),this.endEvent_,this.endListener_)),this},i.shouldShow_=function(e,t){var n=this.options_.start,r=this.options_.end;return pC(n)?pC(r)?e>=n&&e<r:this.hasShownSinceSeek_?Math.floor(e)===n:(this.hasShownSinceSeek_=!0,e>=n):n===t},i.startListener_=function(e){var t=this.player().currentTime();this.shouldShow_(t,e.type)&&this.show()},i.endListener_=function(e){var t=this.player().currentTime();this.shouldHide_(t,e.type)&&this.hide()},i.rewindListener_=function(e){var t=this.player().currentTime(),n=this.previousTime_,r=this.options_.start,i=this.options_.end;t<n&&(this.debug("rewind detected"),pC(i)&&!this.shouldShow_(t)?(this.debug("hiding; "+i+" is an integer and overlay should not show at this time"),this.hasShownSinceSeek_=!1,this.hide()):fC(i)&&t<r&&(this.debug("hiding; show point ("+r+") is before now ("+t+") and end point ("+i+") is an event"),this.hasShownSinceSeek_=!1,this.hide())),this.previousTime_=t},r}(cC);nk.registerComponent("Overlay",hC);var gC=function(e){var t=this,n=nk.mergeOptions(dC,e);Array.isArray(this.overlays_)&&this.overlays_.forEach((function(e){t.removeChild(e),t.controlBar&&t.controlBar.removeChild(e),e.dispose()}));var r=n.overlays;delete n.overlays,this.overlays_=r.map((function(e){var r=nk.mergeOptions(n,e),i="string"==typeof r.attachToControlBar||!0===r.attachToControlBar;if(!t.controls()||!t.controlBar)return t.addChild("overlay",r);if(i&&-1!==r.align.indexOf("bottom")){var o=t.controlBar.children()[0];if(void 0!==t.controlBar.getChild(r.attachToControlBar)&&(o=t.controlBar.getChild(r.attachToControlBar)),o){var a=t.controlBar.children().indexOf(o);return t.controlBar.addChild("overlay",r,a)}}var s=t.addChild("overlay",r);return t.el().insertBefore(s.el(),t.controlBar.el()),s}))};gC.VERSION="2.1.5",uC("overlay",gC);var mC=__webpack_require__(5937),vC=__webpack_require__.n(mC);(0,Yt.fo)("players.commercial",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init(e){let{getConfig:t,isHomepage:n,removePlugins:r}=e;r(["players.onlyOneActivePlayer","chromelessv2.dmplayer"]);const i=t("players.chromeless.dmplayer.v3.domainExclusions",[]),o=t("players.chromeless.dmplayer.v3.articleIdExclusions",[]).map((e=>e.toString())),a=i.length&&(i.includes(__webpack_require__.g.location.hostname)||i.includes(__webpack_require__.g.location.hostname.replace(/www./,"")))||__webpack_require__.g.PageCriteria.articleId&&o.length&&o.includes(__webpack_require__.g.PageCriteria.articleId),s=t("players.chromeless.dmplayer.v3.enableWifiDetection",!1),d=navigator.connection&&"wifi"===navigator.connection.type;(a||ka&&(!n||!ka||"desktop"!==(0,je.ej)("mol-home")&&"true"!==(0,je.ej)("mol-desktop"))||s&&!d||!s&&ka)&&r(["players.commercial"])},run:async function(e){var t;let{broker:n,doc:r,getConfig:i,log:o,pageCriteria:a}=e;const s=ws({broker:n,getConfig:i,log:o.extend("mediator")}),d=function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("slotDescriptions.initial",{}).mpu_player;return i?e=>{const n=()=>{r("forcing pauseAndLoad"),tC({log:r,player:e})},o=(0,xa.Vl)(e,"adserror",(async()=>{const o=new xa.JT;o.on(e,"play",n),o.on(e,"playing",n),t.emit("display mpu_player"),tC({log:r,player:e}),await async function(e){let{broker:t,mpuPlayerConfig:n,log:r,player:i}=e;return new Promise((e=>{var o;const a="mpu_player",s=(null==n||null===(o=n.bannerFallback)||void 0===o?void 0:o.displayTimeout)||5e3,{id:d=a,parentId:c=a,pos:l=a}=n;t.once("ad rendered","mpu_player",(async n=>{let{isEmpty:o}=n;const a=i.el().parentNode;r("ad rendered"),o?r("ad empty"):(a.classList.add("mpu-ad-displayed"),await(0,He.Vs)(s),a.classList.remove("mpu-ad-displayed")),t.emit("destroy slot","mpu_player"),e()})),t.emit("slot mounted",{id:d,parentId:c,pos:l})}))}({broker:t,mpuPlayerConfig:i,log:r,player:e}),o.dispose(),t.emit("destroy mpu_player"),e.removeClass("vjs-waiting"),r("resume player")}));e.on("dispose",o)}:()=>{}}({broker:n,getConfig:i,log:o.extend("mpuPlayer")}),c=i("players.commercial.poster","//creative.dailymail.co.uk/videos/top-videos.jpg"),l=function(e){let{broker:t,getConfig:n,log:r}=e;const i="chromelessPlayer"===n("players.commercial.closeButton.style","commercialPlayer")?"commercial-player-close-chromeless":"commercial-player-close",o=n("players.commercial.closeButton.addAfterImpression",!1),a=n("players.commercial.closeButton.addAfterTimeout",6e4);return e=>{var n;function s(){r("closing the player"),e.dispose(),t.emit("set slots enabled",["chromeless"],!1),t.emit("chromeless player closed"),t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"close"}})}r("adding");const d=null!==(n=__webpack_require__.g.MobileUtils)&&void 0!==n&&n.isMobile()?"touchend":"click",c=e.addChild("button",{text:"Close"}),l=new xa.JT;let u;const p=()=>{c.addClass(i),c.on(d,s),e.on("dispose",(()=>c.off(d,s))),l.dispose(),clearTimeout(u)};o?(()=>{const t=()=>{u||(n(),u=setTimeout((()=>{r("adding closebutton due to timeout"),p()}),a))},n=l.one(e,"playing",t);l.one(e,"adserror",p),l.one(e,"ads-manager",(n=>{let{adsManager:i}=n;l.addEventListener(i,__webpack_require__.g.google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,p),l.addEventListener(i,__webpack_require__.g.google.ima.AdEvent.Type.SKIPPED,p),l.one(e,"ads-ad-started",(()=>{l.one(e,"playing",(()=>{r("playing, show close button"),p()}))})),t()}))})():p()}}({broker:n,getConfig:i,log:o.extend("closeButton")}),u=function(e){let{log:t}=e;return e=>{var n;t("adding");const r=null!==(n=__webpack_require__.g.MobileUtils)&&void 0!==n&&n.isMobile()?"touchend":"click",i=e.addChild("component");i.addClass("commercial-player-big-controls"),i.hide(),e.one("playing",(()=>{i.show()}));const o=i.addChild("button",{text:"previous"});o.addClass("commercial-player-big-control"),o.addClass("commercial-player-previous"),o.on(r,(()=>e.trigger("skip to previous item")));const a=i.addChild("playToggle");a.addClass("commercial-player-big-control"),a.addClass("commercial-player-big-control"),a.on(r,(()=>e.trigger("play/pause toggle")));const s=i.addChild("button",{text:"Next"});s.addClass("commercial-player-big-control"),s.addClass("commercial-player-next"),s.on(r,(()=>e.trigger("skip to next item"))),e.on("playlistitem",(()=>{e.playlist.previousIndex()===e.playlist.currentIndex()?(t("disabling previous control"),o.disable()):o.enable()}))}}({log:o.extend("bigControls")}),{applyPlaylist:p,playlistItems:f}=await async function(e){var t;let{log:n,poster:r,url:i}=e;n("fetching top videos",i);const o=await fetch(i),a=await o.json(),s=(0,Qe.TV)((0,Qe.DZ)((e=>!!e.url),(e=>({articleUrl:e.articleUrl,videoId:e.externalVideoIdent,headline:e.headline,poster:r,provider:e.source,sources:[{src:e.url,type:"video/mp4"}]})),a[null===(t=__webpack_require__.g.PageCriteria)||void 0===t?void 0:t.channel]||Object.values(a).flat()));return n(s),{applyPlaylist:function(e){e.playlist(s),e.ima||(e.on("skip to next item",(()=>e.playlist.next())),e.on("skipt to previous item",(()=>e.playlist.previous())))},playlistItems:s}}({log:o.extend("playlist"),poster:c,url:i("players.commerical.playlistURL","https://secured.dailymail.co.uk/feeds/commercial/topVideos.json")}),h=function(e){let{broker:t,log:n}=e;const r=new Promise((e=>{t.once("creative updated plugins",(t=>{((0,Fe.nr)(t,"chromeless.dmplayer")&&!t["chromeless.dmplayer"]||(0,Fe.nr)(t,"players.commercial")&&!t["players.commercial"])&&(n("plugin cancelled by creative"),e())}))}));return e=>{r.then((()=>{e.dispose()}))}}({broker:n,log:o}),g=await async function(e){let{poster:t,videoId:n}=e;await(0,Ut.untilBodyAvailable)();const r=document.createElement("div");return r.id="commercial-player",r.classList.add("hide"),r.innerHTML=vC()({poster:t,videoId:n}),document.body.appendChild(r),r}({poster:c,videoId:"commercial-player-video"}),{applyIMA:m,firstAuction:v,initAdRequest:y}=await async function(e){let{broker:t,doc:n,getConfig:r,log:i,pageCriteria:o,playlist:a}=e;await t.invoke("load script","//imasdk.googleapis.com/js/sdkloader/ima3.js");const s=r("dfpAccountCode",5765),{pageLoadTimeout:d=5e3}=r("plugins.slots.jwplayer.v3",{});let c=1;const l=g(a[0]);let u="",p=0;return{applyIMA:function(e){if(i("initializing ads"),e.isDisposed())return;e.ima({contribAdsSettings:{debug:i.enabled},debug:i.enabled,disableFlashAds:!0,numRedirects:10});const o=n.getElementById("commercial-player-video_html5_api");async function s(t){tC({log:i,player:e});const n=await g(t);e.one("playlistitem",((t,r)=>{c++;const o=f(e,r,n,c);i("requesting ads",{src:r.sources[0].src,adTagUrl:o}),e.ima.setContentWithAdTag(r.sources[0].src,o),e.ima.requestAds()}))}(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&null!=o&&o.hasAttribute("controls")&&(null==o||o.removeAttribute("controls")),e.ima.initializeAdDisplayContainer(),e.on("adserror",(e=>{let{data:n}=e;const{AdErrorEvent:r}=n;if(void 0===r.getError)return;const o={adErrorCode:r.getError().getErrorCode()||r.getError().getVastErrorCode(),errorMessage:r.getError().getMessage(),offset:p,platform:"chromeless",playerId:"jwplayer",trackingType:"chromeless"};i("adserror",o),t.emit("video.advert-failed",o),t.emit("video.no-ad-shown",o)})),e.on("ads-manager",(e=>{let{adsManager:n}=e;const r=i.extend("adsManager");r("created"),n.addEventListener(__webpack_require__.g.google.ima.AdEvent.Type.IMPRESSION,(e=>{const n={adPodInfo:{maxDuration:(i=e.getAd()).getAdPodInfo().getMaxDuration()},adWrapperSystems:i.getWrapperAdSystems(),title:i.getTitle(),adSystem:i.getAdSystem(),contentType:i.getContentType(),adWrapperCreativeIds:i.getWrapperCreativeIds(),adWrapperIds:i.getWrapperAdIds(),mediaUrl:i.getMediaUrl(),skippable:-1!==i.getSkipTimeOffset(),height:i.getVastMediaHeight(),width:i.getVastMediaWidth()};var i;r("impression",n),t.emit("video.ad-impression",{adImpression:n,offset:p,platform:"chromeless",playerId:"jwplayer",tag:u})}))})),e.on("playlistitem",(async function(){let t=!1;const n=r("players.commercial.midRoll",[]).map(Number),o=new xa.JT,s=i.extend("midroll"),d=(e,t,n)=>{const r=document.createElement("div");return r.className="vjs-marker",r.style.left=`${Math.ceil(n/t*100)}%`,s("elem.style.left",r.style.left),r.innerHTML='<div class="top">\n                                      <p>Advertisement</p>\n                                      <i></i>\n                                  </div>',e.appendChild(r),r};function l(){t=!0,o.dispose()}async function h(n,r,i){if(t)return;s("time to build ad tag url",n);const o=u=f(e,{...n,midroll:!0},await i,c);p=r,s("requesting ads",{src:n.sources[0].src,nextAdTagUrl:o}),t||(e.ima.changeAdTag(o),e.ima.requestAds())}o.one(e,"loadeddata",(async()=>{const t=n.filter((t=>e.duration()>t+5));s("Setting up midrolls",{config:n,filtered:t,mediaDuration:e.duration()});const r=e.$(".vjs-progress-control.vjs-control");for(const n of t){const t=d(r,e.duration(),n),i=a[e.playlist.currentIndex()],c=g({...i,offset:n});c.then((e=>s(`auction finished for midroll offset ${n}`,e)));const l=()=>t.parentNode.removeChild(t),u=o.one(e,"skip to next item",l),p=o.one(e,"skip to previous item",l),f=o.one(e,"playlistitem",l);o.add(eC(e,n,(e=>{const t=e-n;l(),u(),p(),f(),t>=0&&t<2?h(i,n,c).catch((e=>s.error(e))):s(`skipping midroll offset: ${n}`)})))}})),o.one(e,"playlistitem",(()=>l)),o.on(e,"skip to next item",l),o.on(e,"skip to previous item",l)})),e.on("playlistitem",(function(){let t,n;const r=new xa.JT;r.add(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.on("timeupdate",i);const r=()=>e.off("timeupdate",i);return r;function i(){e.duration()-e.currentTime()<=n&&(r(),t())}}(e,(function(){const n=a[e.playlist.nextIndex()];i("time to build ad tag url",{nextItem:n}),t=g(n)}),d/1e3)),r.one(e,"ended",(async()=>{n=await t,e.playlist.next()})),r.one(e,"playlistitem",((t,r)=>{o(),s(),c++;const a=u=f(e,r,n,c);p=0,i("requesting ads",{src:r.sources[0].src,nextAdTagUrl:a}),e.ima.setContentWithAdTag(r.sources[0].src,a),e.ima.requestAds()}));const o=r.one(e,"skip to next item",l),s=r.one(e,"skip to previous item",l);function l(){r.dispose()}})),e.on("skip to next item",(async()=>{await s(a[e.playlist.nextIndex()]),e.playlist.next()})),e.on("skip to previous item",(async()=>{await s(a[e.playlist.previousIndex()]),e.playlist.previous()}))},initAdRequest:function(e,t){i("initAdRequest");const n=u=f(e,a[0],t,c);return i("setContentWithAdTag adTag",n),e.ima.setContentWithAdTag(a[0].sources[0].src,n),e.ima.requestAds(),new Promise((t=>{const n=new xa.JT,r=()=>{console.timeEnd("ads-manager"),n.dispose(),t()};i("waiting for ads-manager event"),console.time("ads-manager"),n.one(e,"ads-manager",(()=>{i("received ads-manager event"),r()})),n.one(e,"adserror",(()=>{i("received adserror event"),r()}))}))},firstAuction:l};function f(e,t,n,a){let{articleUrl:d,headline:c,midroll:l,provider:u,videoId:p}=t;const f=e.muted(),g=qe()({correlator:Date.now(),description_url:d,env:"vp",gdfp_req:"1",impl:1,iu:`/${s}/dm.chromelessvideo/${r("players.chromeless.dmplayer.v3.adUnitNameLevel2","dm_dmros_ros")}/${l?"midroll":"preroll"}`,output:"xml_vast4",vpa:"auto",sz:"401x225",unviewed_position_start:"1",url:`${location.protocol}//${location.hostname}${location.pathname}`,vid:p,vpmute:"1",cust_params:{channel:null==o?void 0:o.channel,oov:!document.hasFocus(),length:30,videoWidth:401,videoHeight:225,play:a,embed:!1,ttid:p,domain:"dailymail",flyaway:!1,s:"off",videoTitle:c,video:u,environment:"production",pos:l?"jw_midroll":"jw_preroll",sz:"401x225",vpmute:f}},n,Xe()),m=new URL("https://pubads.g.doubleclick.net/gampad/ads");for(const[e,t]of Object.entries(g))e&&(i("adding",e,t),m.searchParams.set(e,h(t)));return i("adTag",m.toString()),m.toString()}function h(e){switch(typeof e){case"string":return e;case"number":return e.toString();case"boolean":return e?"1":"0";default:return new URLSearchParams(e).toString()}}async function g(e){let{articleUrl:n,videoId:r,offset:o=0}=e;return i("getAsyncVideoTags",o),new Promise((e=>{let a={};Ge({args:{articleURL:n,videoId:r,offset:o,platform:"chromeless",pos:"jwplayer",screen:{width:401,height:225},timeout:d},broker:t,observable:(t,n)=>{t?(i.error("error getting tags",t),e(a)):n?a=(0,Fe.Yb)({...a,...n,cust_params:{...a.cust_params||{},...n.cust_params||{}}}):e(a)},log:i})}))}}({broker:n,doc:r,getConfig:i,log:o.extend("ima"),pageCriteria:a,playlist:f}),b=function(e){let{broker:t,log:n}=e;return e=>{var r;const i=null!==(r=__webpack_require__.g.MobileUtils)&&void 0!==r&&r.isMobile()?"touchend":"click";let o,a,s,d,c=!0;function l(){c&&a&&o?u(o,a):!c&&a&&u("Read more",a)}function u(r,o){const a=r+o;a!==d&&(d=a,n(r,o),e.overlay({overlays:[{align:"top",class:"commercial-player-headline",content:r,start:"playing",end:"ended"}]}),function(r){if(s&&s(),r){const o=()=>{t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"articleUrlClicked"}}),t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"close"}}),location.href=r},a=e.$(".vjs-overlay");n("adding click event",{overlay:a,articleUrl:r}),e.on(a,i,o),s=()=>{n("removing click event",{overlay:a,articleUrl:r}),e.off(a,i,o)}}}(o))}u("",""),e.on("playlistitem",((e,t)=>{let{articleUrl:n,headline:r}=t;o=r,a=n,l()})),e.on("userinactive",(()=>{c=!1,l()})),e.on("useractive",(()=>{c=!0,l()}))}}({broker:n,log:o.extend("headline")}),_=null===(t=(0,je.Y0)())||void 0===t?void 0:t.type,w=i("players.commercial.playUnmuted",!1)&&"navigate"===_&&""!==r.referrer,T=i("players.commercial.unMutedVolume",.03);o("playUnmuted",w),n.emit("send event to bidmax",{type:"custom",payload:{directReferrer:""===r.referrer,module:"commercialPlayer",performanceNavigationType:_||"unknown",playUnmuted:w}});const I=function(e){let{broker:t,log:n,container:r,poster:i,videoId:o,playMuted:a}=e;document.documentElement.classList.add("molads_chromeless_on"),n("instatiating videojs");const s=nk(o,{mediaLoader:!0,posterImage:!!i,textTrackDisplay:!0,loadingSpinner:!0,bigPlayButton:!1,liveTracker:!0,errorDisplay:!0,textTrackSettings:!0,resizeManager:!0,controlBar:{children:["currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","volumePanel","remainingTimeDisplay","fullscreenToggle"],pictureInPictureToggle:!1}});return s.el()._player=s,delete s.el().player,a?(n("player muted"),s.muted(!0)):n("player unmuted"),s.one("play",(()=>{r.classList.remove("hide"),t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"open"}})})),s.one("playing",(()=>{setTimeout((()=>{const e=document.getElementById("commercial-player-video_html5_api");e&&(e.style.height="",e.style.width="")}))})),s.on("dispose",(()=>{r.remove()})),s}({broker:n,container:g,log:o.extend(""),poster:c,videoId:"commercial-player-video",playMuted:!w});h(I);try{m(I),d(I),b(I),l(I),u(I),v.then((e=>y(I,e))).then((()=>{s(I),p(I),w?(o("setting volume",T),I.volume(T)):(o("muted autoplay"),I.autoplay("muted"))}))}catch(e){o.warn(e)}}}),(0,Yt.fo)("players.remixd",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.players.remixd.scriptUrl","//tags.remixd.com/player/v5/index.js"),o=n("plugin.player.remixd.paragraphIndex",5),a={insertMethod:async e=>{if(!e)return void t.emit("send event to bidmax",{type:"custom",payload:{event:"noPlacement",module:yC}});const n=function(e,t){const n={"remixd-player-complete":"complete","remixd-player-error":"error","remixd-player-impression":"impression","remixd-player-mute":"mute","remixd-player-pause":"pause","remixd-player-play":"play"},r=t.extend("event received");return(0,xa.Oo)(window,"message",(t=>{if(!t.data||"remixd"!==t.data.scope||!t.data.data)return;const i=t.data.data,o=null==i?void 0:i.event,a=null==i?void 0:i.error,s=null==n?void 0:n[o];s&&(r(t.data.data),e.emit("send event to bidmax",{type:"custom",payload:{event:s,module:yC,error:a}}))}))}(t,r);!function(e,t){const n=document.createElement("div");n.id="remixd-audio-player";const r=document.createElement("script");r.id="remixd-audio-player-script",r.src=e,r.async=!0,n.appendChild(r),t.parentElement.insertBefore(n,t)}(i,e);try{await(0,He.gb)((()=>__webpack_require__.g._rmxd)),r("script loaded"),t.emit("send event to bidmax",{type:"custom",payload:{event:"scriptLoaded",module:yC}})}catch(e){r("error while loading",i,":",e),t.emit("send event to bidmax",{type:"custom",payload:{event:"scriptLoadErr",module:yC,error:e}}),n()}},log:r,margin:n("plugin.player.remixd.margin",{top:30,bottom:60}),sourcePlugin:"remixd",targetParagraphIndex:o};r("requesting placement",o),t.register("placement requests",(()=>a))},vendorIds:{gdpr:[768]}});const yC="remixd";(0,Yt.fo)("bidders.yahoossp.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[25]},run(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.verizon.v2.display",{});t.once("prebid loaded",(e=>{e.setConfig({yahoossp:{endpoint:"https://webc2s.pubgw.yahoo.com/pubgw/v1/hb/web/prebid",mode:"all"}})}));const o=Object.entries(i.adUnits).filter((e=>{let[t]=e;return!!n(`slotDescription.${t}`)})).map((e=>{var t;let[r,o]=e;return{code:r,bids:[{bidder:"yahoossp",params:{dcn:i.dcn,pos:`${i.posPrefix}_${r}`}}],mediaTypes:{banner:{sizes:null!==(t=null==o?void 0:o.sizes)&&void 0!==t?t:n(`slotDescription.${r}.size`,[])}}}}));r.extend("adUnitTemplates")(o),t.register("provide prebid adUnits",(()=>o))}}),(0,Yt.fo)("bidders.yahoossp.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[25]},run(e){let{broker:t,getConfig:n,log:r}=e;t.once("prebid loaded",(e=>{e.setConfig({yahoossp:{endpoint:"https://webc2s.pubgw.yahoo.com/pubgw/v1/hb/web/prebid",mode:"all"}})})),t.register("provide video adUnits",((e,t,i)=>{const o=n("plugins.bidders.yahoossp.video",{});if(!o)return{};const a={code:e,bids:[{bidder:"yahoossp",params:{dcn:o.siteId,pos:"jwplayer"===e?o.adUnits[e][0===i?"preroll":"midroll"].placementId:"video"===e?o.adUnits[e][t?"autoplay":"ctp"].placementId:void 0}}]};return r.extend("ad unit")(a),a}))}}),(0,Yt.fo)("userId",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;const r=function(){const e="ads.user.id";let t=localStorage.getItem(e);return t||(t=(0,Is.Z)(),localStorage.setItem(e,t)),t}();n("userId",r),t.register("provide userId",(()=>r)),t.emit("sync userId","bidmaxId",r,location.hostname)}}),(0,Yt.fo)("trackers.pubProvidedId",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1,3,4]},vendorIds:{gdpr:"N/A"},async run(e){let{broker:t,log:n}=e;t.register("provide prebid config",(async()=>{const[e,r]=await Promise.all([t.invoke("provide userId"),t.invoke("provide domain")]);if(n({userId:e,domain:r}),e&&r)return{userSyncConfig:{userIds:[{name:"pubProvidedId",params:{eids:[{source:r,uids:[{id:e,atype:1,ext:{stype:"ppuid"}}],atype:"ppuid"}]}}]}}}))}}),(0,Yt.fo)("trackers.applePrivateRelay",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){let{broker:t,log:n,win:r}=e;n({applePrivateRelay:r.applePrivateRelay}),t.emit("set page level targeting",{applerelay:!!r.applePrivateRelay})}});const bC=["left","top","width","height"];function _C(e){if(!e)return;e.nodeType===Node.TEXT_NODE&&(e=e.parentNode);const t=e.id?`#${e.id}`:"",n=Array.from(e.classList||[]),r=n.length?`.${n.join(".")}`:"";return(t||r?"":`${_C(e.parentElement)} > `)+`${e.tagName.toLowerCase()}${t}${r}`}function wC(){try{return window.location.hash||"none"}catch(e){return"none"}}function TC(e,t,n){IC(e,t),t.set(e,n)}function IC(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function SC(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,CC(e,t,"get"))}function kC(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,CC(e,t,"set"),n),n}function CC(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}(0,Yt.fo)("analytics.cwv.cls",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:async function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("analytics.cwv.cls.totalThreshold",.08),o=n("analytics.cwv.cls.entryThreshold",.01),a=n("analytics.cwv.cls.maxEntries",20),s=new Set(n("analytic.cwv.cls.slotsOfInterest",["billboard","billboard-oop","leader_top"])),d=n("analytic.cwv.cls.slotsShelfLife",5e3);r("config:",{totalThreshold:i,entryThreshold:o,maxEntries:a,interestingSlots:s,slotsShelfLife:d});const c=[],l=new Set;let u=[];t.on("ad rendered",((e,t)=>{let{isEmpty:n,lineItemId:r,creativeId:i,sourceAgnosticCreativeId:o,sourceAgnosticLineItemId:a}=t;!n&&s.has(e)&&u.push({time:Date.now(),pos:e,lineItemId:r||a,creativeId:i||o})})),__webpack_require__.g.DM.molFeWebVitals.webVitals.getCLS((e=>{let{entries:t}=e;for(const e of t){if(e.value<o||e.hadRecentInput||l.has(e))continue;l.add(e);const t=e.sources,i=t.length,a=t.map((e=>_C(e.node)));for(const o of t){const t=bC.filter((e=>o.currentRect[e]!==o.previousRect[e])),s=t.map((e=>`${e}: ${o.previousRect[e]}->${o.currentRect[e]}`)),l=_C(o.node),{before:p,after:h}=(n=o.node)?{before:n.previousElementSibling,next:n.nextElementSibling}:{};r("entry above threshold:",l,e.value,s);const g=Date.now()-d,m=u.filter((e=>e.time>=g)).map((e=>{let{pos:t,lineItemId:n,creativeId:r}=e;return`${t}=${n}/${r}`}));u=u.filter((e=>e.time<g)),r("recentPositions",m),c.push({type:"custom",payload:{module:"ads.cwv.cls",trigger:"page-unload",event:"element",changes:s,selector:l,value:Math.round(1e3*e.value)/1e3,accomplicesCount:i-1,accomplices:a.filter((e=>e!==l)),clsHash:wC(),propertiesChanged:t,total:f,startTimeInSecs:Math.round(e.startTime/1e3),previous:_C(p),next:_C(h),recentPositions:m}})}}var n}),!0),await t.until("call for page-unload");const p=__webpack_require__.g.DM.molFeWebVitals.getUpdated(),f=Math.round(1e3*p.CLS)/1e3;if(p.CLS&&f>i){r("cls",f,"above threshold",i),r("cls entries:",c.length);const e=c.sort(((e,t)=>t.value-e.value)).slice(0,a),n=c.length>e.length;n&&r("too many entries, truncating it from",c.length,"to",e.length),t.emit("send event to bidmax",{type:"custom",payload:{module:"ads.cwv.cls",trigger:"page-unload",event:"total",clsHash:wC(),value:f,heavyElements:e.length>0,truncatedEntries:n}}),e.forEach((e=>t.emit("send event to bidmax",e)))}}});var EC=new WeakMap,AC=new WeakMap,PC=new WeakMap,xC=new WeakMap,OC=new WeakSet;class DC{constructor(){let{events:e=[[document,["mousemove","keypress","scroll","mousewheel","touchmove"]],[window,["focus","scroll"]]],throttleMs:t=1e4}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){IC(e,t),t.add(e)}(this,OC),TC(this,EC,{writable:!0,value:void 0}),TC(this,AC,{writable:!0,value:void 0}),TC(this,PC,{writable:!0,value:void 0}),TC(this,xC,{writable:!0,value:[]}),kC(this,EC,new xa.JT),kC(this,AC,e),kC(this,PC,(0,J.FU)(function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,OC,RC).bind(this),t))}start(){SC(this,AC).forEach((e=>{let[t,n]=e;t&&n.forEach((e=>{SC(this,EC).addEventListener(t,e,SC(this,PC))}))}))}stop(){SC(this,EC).dispose()}add(e){return SC(this,xC).push(e),()=>{this.remove(e)}}remove(e){kC(this,xC,(0,Qe.cl)(e,SC(this,xC)))}whenActive(){return new Promise((e=>{const t=()=>{this.remove(t),e()};this.add(t)}))}}function RC(e){SC(this,xC).forEach((t=>t(e)))}(0,Yt.fo)("adPageType",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,DM:n,getConfig:r,log:i,adPageType:o}=e;i("running");const a=localStorage.getItem(MC);localStorage.removeItem(MC);const s=r("adPageType.usePageAdTypeOverride",!1);if(i(`autorefresh pageAutoRefreshStatus: ${a}, usePageAdTypeOverride: ${s}`),t.on("dom ready",(()=>{n.pageEvents.subscribe("page.autorefresh-event",(()=>{localStorage.setItem(MC,!0)}))})),!s||!a||"art"===o)return i("setting 'page' targeting to",o),void t.emit("set page level targeting",{page:o});i("setting 'page' targeting to hp_inactive"),t.emit("set page level targeting",{page:"hp_inactive"});const d=t.until("ad rendered"),c=new DC;c.whenActive().then((async()=>{c.stop(),await d,i("setting 'page' targeting to hp"),t.emit("set page level targeting",{page:"hp"})})),c.start()}});const MC="mol.ads.pageautorefresh";(0,Yt.fo)("takeovers.videowallpaper",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;function r(e){4===e.readyState?(e.muted=!0,e.play(),n("Video background play")):(n("Loading"),setTimeout((()=>r(e)),100))}t.on("takeover","videowallpaper",(e=>{t.emit("stop refreshing ads"),t.emit("disable chromeless-player"),t.emit("collapseAdByPos",["sky_left_top","sky_left_bottom","sky_right_top","sky_right_bottom"]);const{clickUrl:n,video:i}=e,o=NC(i.styles);(0,Ut.appendStyle)(o);const a=document.createElement("template");a.innerHTML=jC.trim(),document.body.insertBefore(a.content,document.body.firstChild);const s=document.createElement("template");s.innerHTML=BC.trim();const d=document.getElementById("page-container");d.insertBefore(s.content.firstChild,d.firstChild);const c=LC(i);document.body.append(c),document.querySelector(".billboard-container").classList.remove("watermark");const l=UC(n);document.body.append(l),r(document.getElementById("backgroundvideo"))}))}});const NC=e=>{let{backupSkin:t,skinBGColor:n}=e;return`\n.fullscreen-bg {\n  background-image: url(${t});\n  background-size: contain;\n  background-position: top center;\n  background-repeat: no-repeat;\n  background-color: ${n};\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow: hidden;\n  z-index: 1;\n}\n\n\n#billBoard {\n  background-color: transparent!important;\n  position: relative!important;\n  top: -30px !important;\n  box-shadow: none!important;\n  left: 0!important;\n}\n\n.cleared.lead-alpha, #content > .cleared {\n  background-color: #fff!important;\n}\n\n.articleWide {\n  background-color: #fff;\n}\n\n#top {\n  position: relative;\n  z-index: 2;\n}\n\nvideo#backgroundvideo {\n  position: fixed;\n  top: 0;\n  left: 50%;\n  min-width: 100%;\n  width: 100%;\n  height: auto;\n  z-index: -100;\n  animation: translate-video;\n  animation-fill-mode: forwards;\n}\n\n@keyframes translate-video {\n  to {\n    transform: translateX(-50%) translateY(0%);\n  }\n}\n\n.page-container-cover {\n  position: absolute;\n  width: 994px;\n  background: #fff;\n  z-index: 1;\n  margin-left: auto;\n  margin-right: auto;\n  height: 100%;\n  left: -16px;\n  right: 0;\n  top: 465px;\n}\n\n.page-header-cover {\n  position: absolute;\n  width: 994px;\n  height: 186px;\n  background: #fff;\n  left: 0;\n  right: 0;\n  z-index: 2;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n#content {\n  z-index: 1;\n  animation: shift-content-down 500ms;\n  animation-fill-mode: forwards;\n}\n\n@keyframes shift-content-down {\n  to {\n    transform: translateY(30px);\n  }\n}\n\n#ad_skinHolder {\n  width: 100%;\n  height: 100%;\n  margin: auto;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 1;\n`},UC=e=>{const t=document.createElement("template");return t.innerHTML=`\n      <a id="ad_skinHolder" href="${e}" target="_blank">\n        <div class="extra-static-skin"></div> \n      </a>\n    `.trim(),t.content},LC=e=>{let{attributes:t,sources:n}=e;const r=document.createElement("div");r.setAttribute("id","ad_video"),r.classList.add("fullscreen-bg"),r.setAttribute("post","");const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.id="backgroundvideo";const n=document.createElement("video");return Object.entries(e).forEach((e=>{let[t,r]=e;n.setAttribute(t,r)})),t.forEach((e=>{let{type:t,src:r}=e;const i=document.createElement("source");i.setAttribute("type",t),i.setAttribute("src",r),n.appendChild(i)})),n}(t,n);return r.appendChild(i),r},jC='<div class="page-header-cover"></div>',BC='<div class="page-container-cover"></div>';(0,Yt.fo)("site",{init:function(e){let{broker:t,log:n,setConfig:r,getConfig:i,DM:o,pageCriteria:a}=e;const s=i("site","mol");r("site",s),a.pageViewId=(0,zn.kb)(),t.register("call for page analytics",(()=>({account:s}))),function(e,t,n){const r=(0,v.U2)("tcfv2.enabled",!1),i="US"===e.geo,o=r&&"BR"===e.geo;n("cmp.model",(i?"ccpa":o&&"lgpd")||r&&"tcfv2"||void 0),n("cmp.shouldBeEnforced",i&&["CA","VA"].some((t=>e.region===t))||r),n("cmp.keyNameForGPTVideoConsent",i?"rdp":"npa"),n("cmp.apiHandler",(i?"__uspapi":(r||o)&&"__tcfapi")||void 0);const a=e.region;if(i){const e=FC[a]||FC.CA;n("cmp.renderConfig",{layerTwo:{footerPrivacyText:e,ccpaFrameworkText:VC[a]||VC.CA},layerThree:{privacyText:qC(e)}})}t("cmp:",(0,v.U2)("cmp"))}(a,n,r);const d={...WC},c=i("tcfv2.branding.includePrimaryVendor",!0),l=i("tcfv2.branding.providerUrl"),u={level1Paragraphs:zC};c&&(u.primaryVendor=d),l&&(u.providerUrl=l),r("tcfv2.brand",u),"object"==typeof o&&"function"==typeof o.getPageMetadata&&r("tcfv2.renderPlatform",o.getPageMetadata().renderPlatform)},ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0});const qC=e=>e.toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.substring(1))).join(" "),FC={CA:"Do not sell or share my personal information",VA:"Do not sell or share my personal information"},VC={CA:"California Consumer Privacy Act",VA:"Virginia Consumer Data Protection Act"},zC=["We and our partners process, store and/or access data such as IP address, unique ID and browsing data based on your consent to display personalised ads and content, ad and content measurement, audience insights and product development, use precise geolocation data, and actively scan device characteristics for identification.","Sometimes we and/or our partners dont rely on your consent but rely on legitimate interest to process your data. Click Cookie Settings below to see our partners, why they rely on legitimate interest and how you can object.","Control how your data is used and view more info at any time via the Cookie Settings link in the Privacy Policy."],WC={features:[1,2,3],flexiblePurposes:[],headingName:"Associated Newspapers Ltd.",legIntPurposes:[5,6,8,10],name:"Associated Newspapers Ltd. (MailOnline, ThisIsMoney & Metro)",policyUrl:(0,v.U2)("tcfv2.policyUrl","/home/article-7759273/Privacy-Cookies-Policy-Policy.html"),purposes:[1,2,3,4,7,9],specialFeatures:[1],specialPurposes:[1,2]},HC=DM.molFeAsync;var ZC=__webpack_require__(9796);(0,Yt.fo)("skimlinks",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:function(e){let{getConfig:t}=e;const n=t("skimlinks",{enabled:!1});n.enabled&&(0,HC.later)("DOM_READY").then((()=>{const e=n.filename||$C();if(e){const t="//s.skimresources.com/js/"+e+".skimlinks.js",n=document.createElement("script"),r=document.querySelector("script");n.async=!0,n.src=t,r.parentNode.insertBefore(n,r)}})).catch((e=>{ZC.logger.error("Error during skimlinks initialisation: ",e)}))},vendorIds:{gdpr:[46]}});const $C=()=>{const e=document.querySelector(".skimlinks");return null===e?null:e.getAttribute("data-tracking-id")};(0,Yt.fo)("slotDefinition",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,doc:n,getConfig:r,log:i}=e;const o=r("slots.enabled"),a=["gpt","gptOOP"];t.on("slot defined",(e=>{t.emit("update description",e.pos,e),a.some((t=>e.slotTypes.includes(t)))?(i("dispatching 'slot ready'",e.pos),t.emit("slot ready",e)):i("unsupported slot type, bailing",e.pos,e.slotTypes)})),t.on("slot mounted",(async e=>{var r;const a=(0,Dt.get)(e.pos);if(!o[e.pos])return void i("slot not enabled, bailing",e.pos);if(!a)return void i("unable to find description for slot, bailing",e);const s=GC(a,e);n.getElementById(s)||i.error(`Unknown element "#${s}"`);const{isTemplate:d,pos:c,regex:l,unitSuffix:u,...p}=a,f=p.unit&&u?`${p.unit}_${u}`:p.unit?p.unit:s,h=d&&l?{...KC(p),adUnit:(0,hc.Z)(f),dfpPos:c,id:s,isTemplate:d,pos:s,parentId:s,targeting:{puff_offset:null===(r=new RegExp(l).exec(s))||void 0===r?void 0:r[1]}}:{...p,id:s,pos:"fff"===c?s:c};i("slotDefintion",h);try{await t.invoke("verify slot ready",h)}catch(e){i.warn(e)}n.getElementById(s)?(i("slot verified",h.pos),t.emit("slot defined",h)):i("slot no longer exists",h.pos)}))}});const GC=(e,t)=>t.id||e.id||t.containerId||t.pos+"_"+(new Date).getTime(),KC=e=>JSON.parse(JSON.stringify(e));function XC(e){const t=e("slotDescription",{});return e("plugins.adservers.openweb.slots",[]).filter((e=>e in t)).map((e=>[e,t[e]]))}(0,Yt.fo)("googlePPID",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1,2,3,4,5,6,7,8,9,10]},run:function(e){let{broker:t,log:n}=e;n("running googlePPID");const r=t.invoke("provide userId");t.on("gpt initialized",(async e=>{const t=await r;n("setting googlePPID",t),e.pubads().setPublisherProvidedId(t)})),r.then((e=>{t.emit("sync video tags update",{ppid:e})}))},vendorIds:{gdpr:[755]}}),(0,Yt.fo)("adservers.openweb",{disableIfNoAdsServable:!0,init:function({getConfig:e,log:t,setConfig:n}){const r=XC(e);r.length?(t("enabled openwebSlots slots",r),r.forEach((([r,i])=>{i.slotTypes=["openweb"],i.earlyBidding=!1,t("setting",r,i),n(`slotDescription.${r}`,i),e("slotDescriptions.initial")&&(t("updating slotDescription.initial",r,i),n(`slotDescriptions.initial.${r}`,i))}))):t("no enabled openweb slots, bailing")},run:function({broker:e,getConfig:t,log:n}){const r=t("plugins.adservers.openweb.forceLoadBundle",!1),i=XC(t).map((([e])=>e));if(i.length){if(!__webpack_require__.g.window.PageCriteria.openwebEnabled||r){const n=t("plugins.adservers.openweb.scriptUrl","//launcher-sa.spot.im/spot/sp_jhHPoiRK");e.invoke("import script",n,{"data-spotim-autorun":!1,"data-spotim-module":"spotim-launcher"})}n("enabled openweb slots",i),e.on("slot defined",(function(t){if(!i.includes(t.dfpPos||t.pos))return;n("slot defined",t.pos,t);const r=document.getElementById(t.id);if(!r)return void n("unabled to find element, bailing",t.pos,t.id);const o=t?.openweb?.dataset.column||"1";r.dataset.openwebAd="",r.dataset.row="1",r.dataset.column=o;try{!function(t){e.emit("send event to bidmax",{type:"custom",payload:{event:"slotDefined",module:"openweb",pos:t.pos}})}(t)}catch(e){console.warn(e)}try{(new Image).src="https://t.cdnopw.com/b.gif"}catch(e){console.warn(e)}try{!function(e){const t=__webpack_require__.g.DM&&__webpack_require__.g.DM.molFeTracking&&__webpack_require__.g.DM?.molFeTracking?.pageEvents;t?t.AD_SLOT_LOADED_ON_PAGE?t.publish(t.AD_SLOT_LOADED_ON_PAGE,{slotType:e.slotTypes[0]}):n.warn("wrong version of fe-sync-bundle"):n.warn("no pageEvents")}(t)}catch(e){console.warn(e)}}))}else n("no enabled openweb slots, bailing")},purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:"N/A"}}),(0,Yt.fo)("modifiers.takeovers",{gdpr:{enabledIfDissent:!0},run:function({broker:e,getConfig:t,log:n}){const r=t("__generated.modifiers.applied",[]).filter((e=>e.startsWith("campaigns.rules-linteItem-"))).map((e=>e.substring(26)));r.length?(n("liveTakeovers applied",r),e.register("call for page analytics",(()=>({takeoverLineItems:r})))):n("no takeovers applied, bailing")}}),(0,Yt.fo)("slots.display-handlers.skies",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function({broker:e,getConfig:t,log:n}){const r=new Set(["sky_left_top","sky_right_top","sky_left_bottom","sky_right_bottom"].filter((e=>t(`slots.enabled.${e}`))));if(!je.s$||!r.size)return void n("no supported slots, bailing");n("supported slots",r);const{cancel:i}=e.on("ad requested",(e=>{n("display",e),r.has(e)&&(document.documentElement.classList.add("has-skies"),i())}))}});var JC,YC=__webpack_require__(7019),QC=__webpack_require__.n(YC),eE=new Uint8Array(16);function tE(){if(!JC&&!(JC="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return JC(eE)}const nE=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var rE=[],iE=0;iE<256;++iE)rE.push((iE+256).toString(16).substr(1));const oE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(rE[e[t+0]]+rE[e[t+1]]+rE[e[t+2]]+rE[e[t+3]]+"-"+rE[e[t+4]]+rE[e[t+5]]+"-"+rE[e[t+6]]+rE[e[t+7]]+"-"+rE[e[t+8]]+rE[e[t+9]]+"-"+rE[e[t+10]]+rE[e[t+11]]+rE[e[t+12]]+rE[e[t+13]]+rE[e[t+14]]+rE[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&nE.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n},aE=function(e,t,n){var r=(e=e||{}).random||(e.rng||tE)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return oE(r)};class sE{constructor({broker:e}){const t={};this.broker=e,t.auctions={},t.pendingStreams={},this.priv=t}_createPendingStreamForPosition(e){const t=this.broker.createReadObjectStream();return this.priv.pendingStreams[e]=t,t}_createAuctionForPositions(e,t){const n=aE(),r=e.reduce(((e,n)=>{const r=t?this._createPendingStreamForPosition(n):this.broker.createReadObjectStream();return r.bids=[],{...e,[n]:{stream:r}}}),{});return this.priv.auctions[n]=r,{auctionId:n,positions:r}}createAuctionWithPendingStreams(e){return this._createAuctionForPositions(e,!0)}resolveStreamForPosition(e){let t={};if(this.priv.pendingStreams[e])t.stream=this.priv.pendingStreams[e],delete this.priv.pendingStreams[e];else{const n=this._createAuctionForPositions([e],!1);t={auctionId:n.auctionId,stream:n.positions[e].stream}}return t}createAuctionForAdUnitCode(e,t,n,r){const i=t||aE(),o=this.broker.createReadObjectStream();o.bids=[];const a={stream:o,offset:n,platform:r};return this.priv.auctions[i]={[e]:a},{auctionId:i,positions:{[e]:a}}}getStreamForAdUnitCode(e,t){return this.priv.auctions[e]&&this.priv.auctions[e][t]||{}}dispose(e){const t=this.priv.auctions[e];t?(Object.values(t).forEach((({stream:e})=>{e.push(null),e.ended=!0})),delete this.priv.auctions[e]):console.error(`Unabled to find auctionId: ${e}`)}}function dE(e,t,n){return e.bidderSettings.standard.adserverTargeting.filter((e=>void 0===t[e.key])).map((e=>[e.key,e.val(n)])).filter((e=>{let[t,n]=e;return void 0!==n})).forEach((e=>{let[n,r]=e;return t[n]=r})),t}function cE(e,t){return Object.keys(t).reduce(((n,r)=>("hb_bidder"===r||(n[`${r}_${e}`.substring(0,20)]=t[r]),n)),{})}const lE=e=>JSON.parse(JSON.stringify(e));function uE(e){let t,{stream:n,log:r,bid:i,broker:o,pbjs:a,requestSizes:s}=e;if(!(n.bids&&n.bids[i.bidderCode]&&(r(`auctionId: ${i.auctionId}, additional bid, adUnitCode: ${i.adUnitCode}, ${i.bidderCode}, cpm: ${i.cpm}, slotSize: ${i.size}`),n.bids[i.bidderCode].cpm>=i.cpm))){if(["video","jwplayer"].includes(i.adUnitCode))r(`auctionId: ${i.auctionId}, bid caching not supported for slot: ${i.adUnitCode}`),n.highestBidder=n.highestBidder&&i.cpm<=n.highestBidder.cpm?n.highestBidder:i,t=n.highestBidder;else{const e=a.getHighestUnusedBidResponseForAdUnitCode(i.adUnitCode);r(`auctionId: ${i.auctionId}, bidResponse, adUnitCode: ${i.adUnitCode}, highestCachedBid: ${e&&e.bidderCode}, adId: ${e&&e.adId}, cpm: ${e&&e.cpm}, from auctionId: ${e.auctionId}`),t=e&&!(0,Fe.xb)(e)&&e.cpm>=i.cpm?e:i,r(`auctionId: ${i.auctionId}, bidResponse, adUnitCode: ${i.adUnitCode}, selected bidder isCached: ${i.auctionId!==t.auctionId},  bidderCode: ${t.bidderCode}, adId: ${t.adId}, cpm: ${t.cpm}`)}!function(e){let{broker:t,log:n,pbjs:r,stream:i,bidResponse:o,selectedBid:a,requestSizes:s}=e;i.bids=i.bids||{},i.cachedBid=i.cachedBid||{},i.bids[o.bidderCode]=i.bids[o.bidderCode]||{};const d=dE(r,lE(a.adserverTargeting),a),c=cE(o.bidderCode,dE(r,lE(o.adserverTargeting),o)),l=a.auctionId!==o.auctionId?1:0;if(void 0===i.highestCpm&&(i.highestCpm=0),i.highestCpm=o.cpm>i.highestCpm?o.cpm:i.highestCpm,d.bc=l,d.bc_diff=(u=l?a.cpm-i.highestCpm:0,Math.round(100*u)/100),n(`auctionId: ${o.auctionId}, streamBid, adUnitCode: ${a.adUnitCode}, bidder: ${a.bidderCode}, adId: ${a.adId}, cpm: ${a.cpm}, from auctionId: ${a.auctionId}, cachedBidDiff: ${d.bc_diff}`),i.bids[o.bidderCode].bidderTargeting=c,i.bids[o.bidderCode].cpm=o.cpm,l&&!i.cachedBid.hasUsedCachedBid){const e=cE(a.bidderCode,dE(r,lE(a.adserverTargeting),a));i.cachedBid={hasUsedCachedBid:!0,targeting:e,bidderCode:a.bidderCode};const n={cached:!0,bidder:a.bidderCode,cpm:Math.round(100*a.cpm)};t.emit("bid",a.adUnitCode,n)}else!l&&i.cachedBid.hasUsedCachedBid?(i.bids[i.cachedBid.bidderCode]?i.cachedBid.targeting=i.bids[i.cachedBid.bidderCode].bidderTargeting:i.cachedBid.targeting=i.cachedBid.targeting?Object.fromEntries(Object.keys(i.cachedBid.targeting).map((e=>[e,void 0]))):{},i.cachedBid.hasUsedCachedBid=!1):l||(i.cachedBid.targeting={});var u;const p={...d,...c,...i.cachedBid.targeting},f={type:"bid",pos:o.adUnitCode,cpm:Math.round(100*o.cpm)/100,bidderCode:o.bidderCode,tags:p};l&&(f.cachedBid={bidderCode:a.bidderCode,cpm:Math.round(100*a.cpm)/100}),i.push([f])}({broker:o,log:r,pbjs:a,stream:n,bidResponse:i,selectedBid:t})}}var pE=__webpack_require__(8622),fE=__webpack_require__.n(pE);(0,Yt.fo)("prebid",{ccpa:{enabledIfDissent:!0},purposeIds:{gdpr:[1]},run:async function({broker:e,getConfig:t}){let n;const r=t("slots.enabled",{}),i=e.invokeAll("prebid prerequisites",{timeout:t("plugins.prebid.prequisiteTimeout",3e3)}),o=new Promise((async t=>{await i,({default:n}=__webpack_require__(7745)),e.emit("prebid loaded",n),t(n)})),a=t("plugins.prebid.ortb2.params",["area","ias-bsp"]),s=t("plugins.prebid.ortb2.iasBspLength",30),d=t("plugins.prebid.dependenciesTimeout",2e3),c=t("plugins.prebid.setVideoOffsetInAdUnit",!1),l={area:()=>__webpack_require__.g.adAreaId,"ias-bsp":async()=>{const t=(await e.invokeAll({message:["dmp","admantx"],timeout:d}))[0];if(t)return t.slice(0,s)}},u=a.reduce(((e,t)=>{const n=l[t]?.();return n&&e.push([t,n]),e}),[]),p=new sE({broker:e}),f=new Set,h={},g=t("slotDescriptions.initial",{}),m=(0,Fe.ei)(g,Object.keys(r));Object.entries(r).forEach((([e,t])=>{m[e]&&(m[e].loadSettings=t)}));const v=t("prebid.globalPlacementIds.display",{}),y=t("prebid.globalPlacementIds.video",{}),b={},_={},w=e=>{const t={},r=e.filter((e=>{const t=e&&"code"in e;return t||hE("ignoring invalid adUnit"),t}));r.forEach((e=>{const{bids:n,code:r,sizes:i}=e,o=i.map((([e,t])=>`${e}x${t}`));(0,Qe.jj)(n.map((({bidder:e})=>e))).forEach((e=>{t[r]=t[r]||{},t[r][e]=t[r][e]||{};const n=t[r][e].requestSizes||[];n.push(o),t[r][e]={requestSizes:(0,Qe.jj)(n)}}))})),Object.entries(t).forEach((([e,t])=>{const n=Object.entries(t).reduce(((e,[t,n])=>({...e,[t]:{requestSizes:n.requestSizes.flat()}})),{});_[e]=n})),hE("addAdUnits",r),n.addAdUnits(r),r.map((e=>e.code)).forEach((e=>f.add(e))),r.forEach((({code:e,bids:t})=>{b[e]=[...new Set([...b[e]||[],...t.map((({bidder:e})=>e))])]}))},T=t("auction.priceGranularity",{buckets:[{min:0,max:20,increment:.01},{min:20,max:50,increment:.1}]});e.register("prebid config async update",(async e=>{await o,n.setConfig(e)}));const I=(e,t,n)=>r=>{hE("auctionId:",e,", ",t,"auctionEnded, bids:",Object.keys(r||{}).length);try{n&&n()}finally{p.dispose(e)}},S=(t,r)=>{hE("auctionId:",t,", bidOnAdUnitCodes: ",r),n.requestBids({adUnitCodes:r,auctionId:t,bidsBackHandler:I(t,r)}),e.emit("bids requested",{positions:r})},k=t("prebid.videoAuctionOffset",500),C={standard:{adserverTargeting:[{key:"hb_bidder",val:({bidderCode:e})=>e},{key:"hb_adid",val:({adId:e})=>e},{key:"hb_pb",val:e=>{switch(T){case"auto":return e.pbAg;case"dense":return e.pbDg;case"high":return e.pbHg;case"low":return e.pbLg;case"medium":return e.pbMg;default:return"object"==typeof T?e.pbCg:e.pbHg}}},{key:"hb_size",val:({size:e})=>e},{key:"hb_source",val:({source:e})=>e},{key:"hb_format",val:({mediaType:e})=>e},{key:"hb_skin",val:({bidderCode:e})=>"inskin"===e},{key:"hb_cache_id",val:({videoCacheKey:e})=>e},{key:"hb_uuid",val:({videoCacheKey:e})=>e},{key:"fb_bidid",val:e=>e.fb_bidid}]}};e.on("plugins enabled",(async t=>{const r=(await e.invokeAll("provide prebid adUnits")).flat();await o,n.bidderSettings=await e.invokeChainMutable("prebid reduce bidderSettings",C),(await e.invokeAll("provide bidder alias")).forEach((({adapterName:e,aliasedName:t})=>{n.aliasBidder(e,t)})),e.emit("configure and start prebid",t,r)}));const E=e=>[...new Set([...e.banner&&e.banner.sizes||[],...e.video&&[e.video.playerSize]||[]])].sort(vE),A=new Promise((r=>{e.on("configure and start prebid",(async(i,o=[])=>{await async function(r,i){const o={"bidders.adform.display":"adf","bidders.adform.v2.display":"adf","bidders.adform.video":"adf","bidders.mediagrid":"grid","bidders.mediagrid.v2.display":"grid","bidders.mediagridVideo":"grid","bidders.brightroll":"brightroll","bidders.appnexusPSP":"appnexus"};hE.info("pluginToS2SBidderNameMap",o);const a=QC()(r,Object.keys(o));hE.info("enabledS2SPlugins",a);const s=new Set(a.map((e=>o[e]))),d=Array.from(s);hE.info("enabledS2SBidders",s);const c=((e,t)=>{const{s2sAdUnits:n,headerAdUnits:r}=t.reduce(((t,n)=>(e.has(n.bids[0].bidder)?t.s2sAdUnits.push(n):t.headerAdUnits.push(n),t)),{s2sAdUnits:[],headerAdUnits:[]});hE("S2S AdUnits",n);const i=n.reduce(((e,{code:t,bids:n,mediaTypes:r})=>{const i=[...e[t]&&e[t].bids||[],...n],o=(0,Qe.jj)([...e[t]&&e[t].mediaTypes.banner.sizes||[],...r.banner.sizes.map((e=>e.toString()))]);return{...e,[t]:{code:t,bids:i,mediaTypes:{banner:{sizes:o}}}}}),{}),o=Object.values(i).map((({code:e,bids:t,mediaTypes:n})=>({code:e,bids:t,mediaTypes:{banner:{sizes:n.banner.sizes.map((e=>e.split(",").map((e=>parseInt(e)))))}}})));return hE("merged S2S AdUnits",o),[...r,...o]})(s,i),l=(e=>Object.values(e.reduce(((e,{code:t,bids:n,mediaTypes:r})=>{const i=t+JSON.stringify(r),o=e[i]=e[i]||{code:t,mediaTypes:r,bids:[],sizes:E(r)};return o.bids=[...o.bids,...n],e}),{})))(c);hE("mergedAdUnits",l);const f=l.map((e=>((e,t)=>(e[t.code]&&fE()(t,"ortb2Imp.ext.data.pbadslot",e[t.code]),t))(v,e)));hE("allAdUnits",f);const g=[...new Set(mE(f,m))],y=e.invokeAll("provide prebid bidder config"),b=await e.invokeAll("provide prebid config"),{realTimeData:I,userSync:k}=b.reduce(((e,{realTimeDataConfig:t={},userSyncConfig:n={}})=>{const{realTimeData:r,userSync:i}=e;return{realTimeData:bE(r,t),userSync:_E(i,n)}}),{realTimeData:{},userSync:{}});(0,Fe.xb)(I)||(hE("setting realTimeData config",I),n.setConfig({realTimeData:I})),(0,Fe.xb)(k)||(hE("setting userSync config",k),n.setConfig({userSync:k}));const C=t("topPageUrl"),A={debug:t("prebid.debug",!1)||je.queryParams.pbjs_debug||!1,enableSendAllBids:!1,priceGranularity:T,cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},s2sConfig:(await e.invokeAll("prebid s2s config")).reduce(((e,t)=>qe()(e,t)),{accountId:t("auction.accountId","37643165-9d8c-4c14-9e55-57b51f032308"),defaultVendor:"appnexus",enabled:!!d.length,bidders:d,timeout:t("auction.maxTime",2e3),adapter:t("auction.adapter","prebidServer"),endpoint:t("auction.endpoint","https://prebid.adnxs.com/pbs/v1/openrtb2/auction"),syncEndpoint:"https://prebid.adnxs.com/pbs/v1/cookie_sync",secure:t("auction.secure",0)}),currency:t("prebid.currency",{adServerCurrency:"USD",granularityMultiplier:1,conversionRateFile:"https://currency.prebid.org/latest.json",defaultRates:{GBP:{USD:1.2764213953}}}),sizeConfig:t("plugins.prebid.sizeConfig",[]),targetingControls:{allowTargetingKeys:["BIDDER","AD_ID","PRICE_BUCKET","SIZE","DEAL","SOURCE","FORMAT","UUID","CACHE_ID","CACHE_HOST","ADOMAIN"]}};C&&(A.pageUrl=C);const P=await u.reduce((async(e,[t,n])=>{const r=await e,i=await n;return i&&(r.site.ext.data[t]=i),r}),Promise.resolve({site:{ext:{data:{}}}}));A.ortb2=P,(await y).forEach((([e,t])=>{n.setBidderConfig({bidders:e,config:t},!0)}),{}),__webpack_require__.g.__tcfapi?A.consentManagement={...A.consentManagement||{},gdpr:{cmpApi:"iab",timeout:5e3,defaultGdprScope:!0}}:__webpack_require__.g.__cmp&&(A.consentManagement={...A.consentManagement||{},gdpr:{cmpApi:"iab",timeout:5e3,allowAuctionWithoutConsent:!1}}),__webpack_require__.g.__uspapi&&(A.consentManagement={...A.consentManagement||{},usp:{cmpApi:"iab",timeout:500}}),hE("config:",A),n.setConfig(A);const x=yE(h,f);hE("adUnits",x),hE("othersAdsPos templates",h),w(x),wE(e,n,p,_),e.emit("prebid adunits added",x,g);const{auctionId:O}=p.createAuctionWithPendingStreams(g);hE(`auctionId: ${O}, requestBids. adUnitCodes: ${g}`),S(O,g)}(i,o),r()}))})),P=(e,t,n)=>{let r=h[e]&&JSON.parse(JSON.stringify(h[e]))||[];return r=r.map((r=>{if(r.code=t,n[e]){const i=n[e].split(",");i[i.length-1]=t,fE()(r,"ortb2Imp.ext.data.pbadslot",i.join(","))}return r})),w(r),r};e.registerStream("get tags",(async({slot:t})=>{await A;const{pos:n}=t;if(hE("get tags, pos:",n,t),n.startsWith("mpu_puff_other"))P("mpu_puff_others",n,v);else if(n.startsWith("puff_ad_other"))P("puff_ad_others",n,v);else if(n.startsWith("mpu_mobile_other"))P("mpu_mobile_others",n,v);else if(n.startsWith("mpu_factbox"))P("mpu_factbox",n,v);else if(n.startsWith("mpu_mobile_factbox"))P("mpu_mobile_factbox",n,v);else if(!m[n]||!f.has(n))return void hE("unable to run auction for pos:",n,m[n],f.has(n));const r=p.resolveStreamForPosition(n);return r.auctionId&&S(r.auctionId,[n]),e.emit("auction event",n,"interested endpoint",{endpoints:b[n]}),r.stream}));const x=t("plugins.enabled").filter((e=>e.includes("konduit"))).length>0;hE("konduitEnabled:",x),x?e.registerStream("konduit get video tags",D):e.registerStream("get video tags",D);const O=(e,t,n)=>{const r=0===n?"preroll":"midroll";return e?.[t.code]?.[r]&&fE()(t,"ortb2Imp.ext.data.pbadslot",e?.[t.code]?.[r]),t};async function D({platform:r,offset:i=0,timeout:o,slot:a,autoplay:s,videoId:d,auctionId:l}){await A;const u=(e=>t(gE[e],{}))(a.pos),{code:f,mediaTypes:h}=u,g=c?{...h,video:{...h.video,startdelay:i}}:h,m=a.pos||"video",v=(await e.invokeAll("provide video adUnits",m,s,i,d)).filter((e=>e)),{adUnits:b,bids:_,pbjsConfig:w}=v.reduce(((e,t)=>{if(t.pbjsConfig&&(e.pbjsConfig=qe()({},e.pbjsConfig,t.pbjsConfig)),t.mediaTypes){const{bids:n,code:r,mediaTypes:o}=t,a={...h,...o,video:c?{...h.video,...o.video,startdelay:i}:{...h.video,...o.video}};e.adUnits.push({bids:n,code:r,mediaTypes:a})}else t.bids&&(e.bids=[...e.bids,...t.bids]);return e}),{adUnits:[],bids:[],pbjsConfig:{}}),T=[...b,_.length&&{bids:_,code:f,mediaTypes:g}].filter((e=>e)).map((e=>O(y,e,i)));let S;if(hE(`video auctionId: ${l}, adUnit config`,T,w),T.length){(0,Fe.xb)(w)||n.setConfig(w);const t=((t,r,i,o,a)=>{const s=t[0].code,d=p.createAuctionForAdUnitCode(s,i,o,a);hE("auctionId:",d.auctionId,", adUnit: ",t),e.emit("bids requested",{positions:[s]});const c=r-k;return n.requestBids({adUnits:t,auctionId:d.auctionId,timeout:c,bidsBackHandler:I(d.auctionId,[s],(()=>e.emit("prebid video auction ended",[s],d.auctionId)))}),{stream:d.positions[s].stream,auctionId:d.auctionId}})(T,o,l,i,r);S=t.stream,e.emit("prebid video auction started",l,m,i)}const C=T.map((({bids:e})=>e)).flat().map((({bidder:e})=>e));if(hE("Interested endpoints:",C),e.emit("auction event",m,"interested endpoint",{endpoints:C}),T.length)return function(e,t,n,r){return go.UI(e,(e=>{if(e.length){const{bidderCode:i,cpm:o,cachedBid:a}=e[0],s=e[0].tags;return{auctionId:n,pos:t,offset:r,type:"bid",cpm:o,bidderCode:i,cachedBid:a,tags:{cust_params:{...s}}}}return{}}))}(S,m,l,i)}return e.on("prepare to refresh ads",(e=>{const{auctionId:t}=p.createAuctionWithPendingStreams(e);hE(`auctionId: ${t}, requestBids refresh, adUnitCodes: ${e}`),S(t,e)})),o},vendorIds:{gdpr:"N/A"},disableIfNoAdsServable:!0});const hE=(0,y.x)("prebid"),gE={jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2"},mE=(e,t)=>(0,Qe.DZ)((e=>{return(n=t[e.code])&&"immediate"===n.loadSettings.type&&n.earlyBidding;var n}),(e=>e.code),e||[]);function vE(e,t){const n=e[0]*e[1],r=t[0]*t[1],i=e[0]<t[0]?1:e[0]>t[0]?-1:0;return n<r?1:n>r?-1:i}const yE=(e,t)=>{const n=new Set(["mpu_puff_others","puff_ad_others","mpu_mobile_others","mpu_factbox","mpu_mobile_factbox"]),r=t.filter((t=>n.has(t.code)?(t.bids&&t.bids.length&&(e[t.code]=e[t.code]||[],e[t.code].push(t)),!1):t.bids&&t.bids.length));return r},bE=(e,t)=>{if((0,Fe.xb)(t))return e;const{dataProviders:n,...r}=t;return e.dataProviders=[...e.dataProviders||[],...n],{...e,...r}},_E=(e,t)=>{if((0,Fe.xb)(t))return e;const{userIds:n=[],...r}=t;return e.userIds=[...e.userIds||[],...n],{...e,...r}},wE=(e,t,n,r)=>{t.onEvent("bidderDone",(({bidderCode:t,bids:n})=>{new Set(n.map((({adUnitCode:e})=>e))).forEach((n=>e.emit("plugin done",n,t)))})),t.onEvent("bidResponse",(i=>{hE(`auctionId: ${i.auctionId}, bidResponse, adUnitCode: ${i.adUnitCode}, bidderCode: ${i.bidderCode}, adId: ${i.adId}, cpm: ${i.cpm}`);const{stream:o,offset:a,platform:s}=n.getStreamForAdUnitCode(i.auctionId,i.adUnitCode),d=Math.round(100*i.cpm),c=r[i.adUnitCode]&&r[i.adUnitCode][i.bidderCode]&&r[i.adUnitCode][i.bidderCode].requestSizes;e.emit("bid",i.adUnitCode,{bidder:i.bidderCode,cpm:d,offset:a,platform:s,requestSizes:c}),hE("bid requestSize",i.adUnitCode,i.bidderCode,c),o?o.ended?hE(`auctionId: ${i.auctionId}, streamEnded, adUnitCode: ${i.adUnitCode}, bidder: ${i.bidderCode}, adId: ${i.adId}, bailing`):uE({broker:e,log:hE,pbjs:t,stream:o,bid:i,requestSizes:c}):console.error(`[PREBID] auctionId: ${i.auctionId},  Unknown stream for ${i.adUnitCode}, bidder: ${i.bidderCode}`)}))};(0,Yt.fo)("gpid",{disableIfNoAdsServable:!0,ccpa:{enabledIfDissent:!0},init:function({getConfig:e,setConfig:t,log:n}){const r=Object.keys(e("slots.enabled",{})),i=e("dfp.networkCode"),o=Object.fromEntries(r.map((e=>[e,`${i}/${(0,hc.Z)(e)}`])));n("setting display globalPlacementIds",o),t("prebid.globalPlacementIds.display",o);const a=e("players.chromeless.dmplayer.v3.dfpAccountCode","5765"),s=e("players.chromeless.dmplayer.v3.adUnitNameLevel1","dm.chromelessvideo"),d=e("players.chromeless.dmplayer.v3.adUnitNameLevel2","dm_dmros_ros"),c=e("players.editorial.v2.gpid.adUnitNameLevel1","dm.video"),l=e("players.editorial.v2.gpid.adUnitNameLevel2","dm_ros"),u=Object.fromEntries(["preroll","midroll"].map((e=>[e,`${a}/${s}/${d}/${e}`]))),p=Object.fromEntries(["preroll","midroll"].map((e=>[e,`${a}/${c}/${l}/${e}`])));n("setting video globalPlacementIds",u,p),t("prebid.globalPlacementIds.video",{jwplayer:u,video:p})},purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"}}),(0,Yt.fo)("prebid.permutiveRtd",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("permutive.rtd.acBidders",["appnexus","rubicon","ozone"]),o=n("permutive.rtd.maxSegs",500),a=n("permutive.rtd.auctionDelay",2e3),s={name:"permutive",params:{acBidders:i,maxSegs:o}},d=[a?{...s,waitForIt:!0}:s],c=a?{auctionDelay:a,dataProviders:d}:{dataProviders:d};r("setting realTimeData rtd",c),t.register("provide prebid config",(()=>({realTimeDataConfig:c})))},vendorIds:{gdpr:[361]}}),(0,Yt.fo)("trackers.exitbee",{purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,getConfig:n,log:r}=e;r("start");const i=n("plugins.exitbee.loadSite","8038");__webpack_require__.g.ExitBeeObject="xtb",__webpack_require__.g.xtb=__webpack_require__.g.xtb||function(){(__webpack_require__.g.xtb.args=__webpack_require__.g.xtb.args||[]).push(arguments)},t.invoke("import script","https://cdn.exitbee.com/xtb.min.js").then((()=>{r("loaded")})),__webpack_require__.g.xtb("loadSite",i)},vendorIds:{gdpr:[1027]}}),(0,Yt.fo)("slots.classes",{gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0},run:({broker:e,doc:t,getConfig:n,log:r})=>{const i=n("slots.classes.adRequested",["sky_left_top","sky_right_top"]);e.on("request slot",(({pos:e,parentId:n})=>{i.includes(e)&&(r("display label",e),t?.getElementById(n)?.parentNode?.querySelector(".mol-ads-label-container")?.classList.add("ad-requested"))}))}}),(0,Yt.fo)("slots.InreadPlayerTop",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function({broker:e,log:t,getConfig:n,pageCriteria:r,pageMeta:i}){if("article"!==r.pageType)return void t("Not suitable for PageCriteria.pageType:",r.pageType);const o=n("pos.inread_player_top.paragraphIndex",2),a={insertMethod:t=>{const r="inread_player_top",o="desktop"===i.renderPlatform?kE(r,n):SE(r,n),a={pos:r};t.parentElement.insertBefore(o,t),e.emit("slot mounted",a)},log:t,margin:n("pos.inread_player_top.margin",{top:30,bottom:30}),sourcePlugin:"inreadPlayerTop",targetParagraphIndex:o};t("requesting placement",o),e.register("placement requests",(()=>a))}});const TE=e=>{const t=e("slotDescription.inread_player_top.size",[[300,250]]);return(e=>Array.isArray(e)&&e.every(Array.isArray)&&e.every((e=>2==e.length&&e.every((e=>!isNaN(e))))))(t)?t.reduce(((e,t)=>[Math.max(e[0],t[0]),Math.max(e[1],t[1])]),[0,0]):[300,250]},IE=(e,t,n)=>{const r=document.createElement("div");r.id=e,r.style.width=`${t}px`,r.style.height=`${n}px`;const i=document.createElement("div");return i.classList.add("inread_player_top_container"),i.appendChild(r),[i,r]},SE=(e,t)=>{const[n,r]=TE(t),[i,o]=IE(e,n,r);return o.className=`adHolder mpu molads_${e} watermark`,i.dataset.swipeArticle="false",i.appendChild(o),i},kE=(e,t)=>{const[n,r]=TE(t),[i,o]=IE(e,n,r);o.className=`adHolder molads_${e}`,i.classList.add("watermark"),i.style.width=`${n}px`,i.style.height=`${r}px`;const a=En();return i.appendChild(a),i.appendChild(o),i};function CE(e){return e.replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>{const[t,n]=e.split("x",2);return[parseInt(t),parseInt(n)]}))}(0,Yt.fo)("bidders.appnexusPSP",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[32]},async run({broker:e,getConfig:t,log:n}){e.register("prebid s2s config",(e=>{const r=function(e){return{allowUnknownBidderCodes:!0,defaultVendor:e("auction.adapter","appnexuspsp"),endpoint:e("auction.endpoint","https://ib.adnxs.com/openrtb2/prebid"),extPrebid:{targeting:{includebidderkeys:!0,includewinners:!0}}}}(t);return n("setting s2s config",r),r}));const r=function(e){return Object.entries(e("plugins.bidders.appnexus.display.adUnits",{})).filter((t=>{let[n]=t;return!!e(`slotDescription.${n}`)})).map((e=>{let[t,n]=e;return{code:t,bids:(0,Qe.pj)(n).map((e=>({bidder:"appnexus",params:{placementId:e.split(" ")[0].trim()}}))),mediaTypes:{banner:{sizes:(0,Qe.pj)(n).flatMap(CE)}}}}))}(t);n.extend("display ad units")(r),e.register("provide prebid adUnits",(()=>r)),e.register("provide video adUnits",(async(e,n)=>function(e){let{getConfig:t,pos:n,autoplay:r}=e;const i=t("plugins.bidders.appnexus.video.adUnits",{}),o={area:[__webpack_require__.g.adAreaId]},a="object"==typeof i[n]&&i[n][r?"autoplay":"ctp"]?i[n][r?"autoplay":"ctp"]:"string"==typeof i[n]?i[n]:"";if(!a)return{};const[s,d]=a.trim().split(/\s+/);return{bids:[{bidder:"appnexus",params:{accountId:s,placementId:d,keywords:o,video:{skipable:!1,playback_methods:r?["auto_play_sound_off"]:["click_to_play"]}}}]}}({getConfig:t,autoplay:n,pos:e})))}}),(0,Yt.fo)("bidders.33across.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[58]},run(e){let{broker:t,getConfig:n,log:r}=e;t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.33across.video.${e}`);if(r({code:e,siteId:t}),!t)return console.warn(`no site id found for pos ${e}`),{};const i={bids:[{bidder:"33across",params:{productId:"instream",siteId:t}}]};return r.info("prioviding ad unit",i),i}))}}),(0,Yt.fo)("bidders.kargo.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[972]},run(e){let{broker:t,getConfig:n,log:r}=e;t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.kargo.video.${e}`);if(r({code:e,placementId:t}),!t)return console.warn(`no placement id found for pos ${e}`),{};const i={bids:[{bidder:"kargo",params:{placementId:t}}]};return r.info("prioviding ad unit",i),i}))}}),(0,Yt.fo)("bidders.sharethrough.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[80]},run(e){let{broker:t,getConfig:n,log:r}=e;t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.sharethrough.video.${e}`);if(r({code:e,pkey:t}),!t)return console.warn(`no pkey found for pos ${e}`),{};const i={bids:[{bidder:"sharethrough",params:{pkey:t}}]};return r.info("prioviding ad unit",i),i}))}});const EE="_dm_ads_message\n";(0,Yt.fo)("exposeUserData",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r}=e;r("running");const i=n("exposeUserData.origins",[""]);let o={};t.on("external user ids",(e=>{o=qe()(o,e)})),window.addEventListener("message",(e=>{if(i.includes(e.origin)&&e.source)try{if("string"!=typeof e.data||!e.data.startsWith(EE))return void r(`unsupported message: ${"string"==typeof e.data?e.data:JSON.stringify(e.data,null,2)}, bailing`);const t=JSON.parse(e.data.split(EE)[1]);if("getExternalIds"!==t.scope)return void r(`unsupported scope: ${null==e?void 0:e.data.scope}, bailing`);r("request received"),e.source.postMessage(`${EE}${JSON.stringify({schemaVersion:1,responseTo:t.messageId,data:{payload:o}})}`,{targetOrigin:e.origin})}catch(e){r.error("error handling request",e)}}),!1)}}),(0,Yt.fo)("headerbidding.intentiq",{gdpr:!1,run:function(e){let{broker:t,log:n,getConfig:r}=e;const i=r("intentiq.manualWinReportEnabled",!0);__webpack_require__.g.pbjs=__webpack_require__.g.pbjs||{};const o=__webpack_require__.g.pbjs;o.que=o.que||[];let a=!1;t.register("prebid prerequisites",(()=>new Promise((e=>{const r=__webpack_require__(9085);n("loading intentIQ");const s=r.loadIIQ();n("script loaded, initialising IntentIqObject");const d=new s({partner:1721969090,pbjs:o,callback:()=>{a||(n("IntentIqObject initialised; resolving"),a=!0,e())},timeoutInMillis:350,manualWinReportEnabled:i,ABTestingConfigurationSource:"percentage",abPercentage:95}),{currentTestGroup:c,groupNames:l}=d.intentIqConfig.abTesting,u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return e[r]=n,e}),{})[c];t.register("call for page analytics",(()=>({iiqtg:u}))),n("intentIqConfig.abTesting.currentTestGroup",c),n("intentIqConfig.abTesting.currentPercentage",d.intentIqConfig.abTesting.currentPercentage),n("intentIqConfig.abTesting.groupNames",d.intentIqConfig.abTesting.groupNames),n("scenario:",u),o.que.push((()=>function(e,t,n){t.onEvent("bidWon",(t=>{const{auctionId:r,bidderCode:i,cpm:o,currency:a,originalCpm:s,originalCurrency:d,status:c,adUnitCode:l}=t;n("reporting prebid bidWon:",i,o,l),e.reportExternalWin({biddingPlatformId:1,partnerAuctionId:r,bidderCode:i,prebidAuctionId:r,cpm:o,currency:a,originalCpm:s,originalCurrency:d,status:c,placementId:l})}))}(d,o,n)))}))))}}),(0,Yt.fo)("taboola.slots",{init:function(e){let{log:t,removePlugins:n}=e;const r=["taboolaAds"];t("removing plugins",r),n(r)},purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;r("taboola running");const i=new yp({broker:t,log:r.extend("tracking"),rta:__webpack_require__.g.RTA}),o=xE(n,i);t.on("slot defined",(function(e){const{pos:t,slotTypes:a,id:s}=e,d=PE[t]||t;if(!a.includes("taboola"))return void r(`slotType not supported by taboola for pos: ${d}, bailing`);const c=n(`taboola.${d}`);if(!c)return void r(`config missing for pos: ${d}, bailing`);"thumbnail"===d||"thumbnailChannel"===d?i.addWidget(d,{mode:"thumbnails-feed",placement:c.placement}):i.addWidget(d,{mode:c.mode,placement:c.placement}),r("adding taboola",d,e,c);const l={...c,id:s};"pufflist"===d?RE(o,{...c,ulId:s}):(["thumbnail","thumbnailChannel"].includes(d)&&i.fireRTAEvent({status:"widgetCall",placement:"thumbnails-feed"}),OE(o,l))}));const a=n("taboola.infiniteScroll");n("slots.enabled",[]).infinite_scroll&&a.every&&(r("infinite_scroll enabled, adding listener"),i.addWidget("infiniteScroll",{mode:a.mode,placement:a.placement}),ME(t,o,a)),t.on("add taboola",(function(e,t){if(r("add taboola event received",e,t),"pufflist"===e)return void r("no removal required for pufflist");const{id:n}=t,i=document.getElementById(n);i&&(r("removing id",n),i.remove())}))},vendorIds:{gdpr:[42]}});let AE=0;const PE={after_article:"afterArticle",before_article:"beforeArticle",channel_feed:"thumbnailChannel",infinite_scroll:"infiniteScroll",mobile_bottom:"bottom",mobile_top:"top",puff_list:"pufflist",smart_feed:"thumbnail",under_article:"underArticle",taboola_outstream:"outStream"},xE=(e,t)=>{var n,r;const i=e("taboola.scriptDir","dailymail-row"),o=e("taboola.pageType","article"),a="//cdn.taboola.com/libtrc/"+i+"/loader.js";__webpack_require__.g._taboola=__webpack_require__.g._taboola||[];const s=__webpack_require__.g._taboola;s.push({[o]:"auto"}),s.push({listenTo:"render",handler:t.fireRenderEvent}),s.push({listenTo:"visible",handler:t.fireVisibleEvent}),s.push({listenTo:"nocontent",handler:()=>t.fireEvent("taboola nocontent")}),s.push({listenTo:"click",handler:t.fireClickEvent});const d=document.createElement("script"),c=document.querySelector("script");return t.fireRTAEvent({status:"scriptLoading"}),d.addEventListener("load",(()=>t.fireRTAEvent({status:"scriptLoaded"}))),d.async=!0,d.src=a,d.onerror=()=>t.fireEvent("taboola failed to load"),c.parentNode.insertBefore(d,c),null===(n=window.performance)||void 0===n||null===(r=n.mark)||void 0===r||r.call(n,"tbl_ic"),s},OE=(e,t)=>{const{id:n,mode:r,placement:i,targetType:o}=t;e.push({container:n,mode:r,placement:i,targetType:o}),e.push({flush:!0})},DE=(e,t,n,r)=>{const{containerStr:i,platform:o}=n,a=i+t,s=((e,t)=>"mobile"===t?`<li id="${e}"></li>`:`<div id="${e}" style="min-height: 280px;"></div>`)(a,o);return e.insertAdjacentHTML(r,s),a},RE=(e,t)=>{setTimeout((()=>{let{start:n,every:r,ulId:i,targetType:o,mode:a}=t;const s=document.getElementById(i);if(!s)return;const d=s.querySelectorAll("li");for(const i of Array.from(d))if(!i.classList.contains("mpu_puff_wrapper")&&(n--,0===n)){const s=++AE,d=DE(i,s,t,"afterend");OE(e,{id:d,mode:a,placement:`${t.placement} ${AE}`,targetType:o}),n=r}}),100)},ME=(e,t,n)=>{let{start:r,every:i,platform:o}=n;e.on("infinite-list append",(async e=>{for(const a of Array.from(e.querySelectorAll((e=>"mobile"===e?"li":"div.article")(o))))if(0===r){const e=++AE,o=DE(a,e,n,"beforebegin"),{mode:s,placement:d,targetType:c}=Object.assign({},n,{placement:n.placement+" "+e,container:o});OE(t,{id:o,mode:s,placement:d,targetType:c}),r=i-1}else r--}))};function NE(){UE.call(window),window.__h82AlnkH6D91__("WyJwdWItNjgxNDAzMTY2OTc2MjgwMSIsW251bGwsbnVsbCxudWxsLCJodHRwczovL2Z1bmRpbmdjaG9pY2VzbWVzc2FnZXMuZ29vZ2xlLmNvbS9iL3B1Yi02ODE0MDMxNjY5NzYyODAxIl0sbnVsbCxudWxsLCJodHRwczovL2Z1bmRpbmdjaG9pY2VzbWVzc2FnZXMuZ29vZ2xlLmNvbS9lbC9BR1NLV3hXaWdXejVkalIzVm1ubm9NWnVLV3FFbHY5WUsxbHM0Uy1hRUNXUlJxSEpTcGVGMUVUR0JOSUZPN3hKN0FnQnVIZTFaeHloUUMzX1pDN2duT3JKWnU1U3dnXHUwMDNkXHUwMDNkP3RlXHUwMDNkVE9LRU5fRVhQT1NFRCIsImh0dHBzOi8vZnVuZGluZ2Nob2ljZXNtZXNzYWdlcy5nb29nbGUuY29tL2VsL0FHU0tXeFUxcFh0eENmTFBLU0M4dkZFWDFtMjRMV0xBTWtYWnUyZHBmcXpWR1Q2RjZvdmsxZUUxeEZGQ1p6clNxamlTLWZFUXV4REFYYUJuWEVQd055c3BWNzNxUndcdTAwM2RcdTAwM2Q/YWJcdTAwM2QxXHUwMDI2c2JmXHUwMDNkMSIsImh0dHBzOi8vZnVuZGluZ2Nob2ljZXNtZXNzYWdlcy5nb29nbGUuY29tL2VsL0FHU0tXeFZGRkFMVEsyRW5GbF9nVl90emdSS1d0WUV4Snc3LWpacXVNMTlxeXBSVGhiV2dvSFdxVFZVQXBKNTlDM0ZFOHNMQWNHbndFbWxkRXhWQ01xbV9NemdwdUFcdTAwM2RcdTAwM2Q/YWJcdTAwM2QyXHUwMDI2c2JmXHUwMDNkMSIsImh0dHBzOi8vZnVuZGluZ2Nob2ljZXNtZXNzYWdlcy5nb29nbGUuY29tL2VsL0FHU0tXeFhpdUM1bkthOG41RXdhMlFVbTJuTUJMU0tlZnhIRFVmc0dJZmpDTUhhT3FEY1NrX2p0bEtGMWNwbUVjYUlsOGk1X0ZBR19tOWEwdHpWTXdneUVSZXRrQndcdTAwM2RcdTAwM2Q/c2JmXHUwMDNkMiIsImRpdi1ncHQtYWQiLDIwLDEwMCwiY0hWaUxUWTRNVFF3TXpFMk5qazNOakk0TURFXHUwMDNkIixbbnVsbCxudWxsLG51bGwsImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tLzBlbW4vZi9wL3B1Yi02ODE0MDMxNjY5NzYyODAxLmpzP3VzcXBcdTAwM2RDQWsiXSwiaHR0cHM6Ly9mdW5kaW5nY2hvaWNlc21lc3NhZ2VzLmdvb2dsZS5jb20vZWwvQUdTS1d4VzhYcGJsWldyeG8xejhGYXJONTNVZ3YyOENBZ2dNcWtBZG43U2dPdkl6X1N1c0ltYkQzdkNXU3pzTHFhVWI2bFhRMHdCbExVT3NOaDN4VHZIQ3o3LUZtd1x1MDAzZFx1MDAzZCJd")}function UE(){var e,t=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},n="function"==typeof Object.create?Object.create:function(e){var t=function(){};return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)e=Object.setPrototypeOf;else{var r;e:{var i={};try{i.__proto__={a:!0},r=i.a;break e}catch(e){}r=!1}e=r?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var o,a=e,s=function(e,t){if(e.prototype=n(t.prototype),e.prototype.constructor=e,a)a(e,t);else for(var r in t)if("prototype"!=r)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,r);i&&Object.defineProperty(e,r,i)}else e[r]=t[r];e.v=t.prototype},d=this||self,c=function(){},l=function(e){return e},u=function(e,t){this.g=t===p?e:""};u.prototype.toString=function(){return this.g+""};var p={},f=function(e){if(void 0===o){var t=null,n=d.trustedTypes;if(n&&n.createPolicy){try{t=n.createPolicy("goog#html",{createHTML:l,createScript:l,createScriptURL:l})}catch(e){d.console&&d.console.error(e.message)}o=t}else o=t}return e=(t=o)?t.createScriptURL(e):e,new u(e,p)},h=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)},g={},m=null,v="function"==typeof Uint8Array;function y(e,t,n){return"object"==typeof e?v&&!Array.isArray(e)&&e instanceof Uint8Array?n(e):b(e,t,n):t(e)}function b(e,t,n){if(Array.isArray(e)){for(var r=Array(e.length),i=0;i<e.length;i++){var o=e[i];null!=o&&(r[i]=y(o,t,n))}return Array.isArray(e)&&e.s&&T(r),r}for(i in r={},e)Object.prototype.hasOwnProperty.call(e,i)&&null!=(o=e[i])&&(r[i]=y(o,t,n));return r}var _,w={s:{value:!0,configurable:!0}},T=function(e){return Array.isArray(e)&&!Object.isFrozen(e)&&Object.defineProperties(e,w),e},I=function(e,t,n){var r=_;if(_=null,e||(e=r),r=this.constructor.u,e||(e=r?[r]:[]),this.j=r?0:-1,this.h=null,this.g=e,e=(r=this.g.length)-1,!r||null===(r=this.g[e])||"object"!=typeof r||Array.isArray(r)||v&&r instanceof Uint8Array?void 0!==t&&-1<t?(this.l=Math.max(t,e+1-this.j),this.i=null):this.l=Number.MAX_VALUE:(this.l=e-this.j,this.i=r),n)for(t=0;t<n.length;t++)(e=n[t])<this.l?(e+=this.j,(r=this.g[e])?T(r):this.g[e]=S):(r=this.l+this.j,this.g[r]||(this.i=this.g[r]={}),(r=this.i[e])?T(r):this.i[e]=S)},S=Object.freeze(T([])),k=function(e,t){if(-1===t)return null;if(t<e.l){t+=e.j;var n=e.g[t];return n!==S?n:e.g[t]=T([])}return e.i?(n=e.i[t])!==S?n:e.i[t]=T([]):void 0},C=function(e,t){var n=Z;if(-1===t)return null;if(e.h||(e.h={}),!e.h[t]){var r=k(e,t);r&&(e.h[t]=new n(r))}return e.h[t]};I.prototype.toJSON=function(){return function(e){return b(e,(function(e){return"number"==typeof e?isFinite(e)?e:String(e):e}),(function(e){var t;if(void 0===t&&(t=0),!m){m={};for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),r=["+/=","+/","-_=","-_.","-_"],i=0;5>i;i++){var o=n.concat(r[i].split(""));g[i]=o;for(var a=0;a<o.length;a++){var s=o[a];void 0===m[s]&&(m[s]=a)}}}for(t=g[t],n=Array(Math.floor(e.length/3)),r=t[64]||"",i=o=0;o<e.length-2;o+=3){var d=e[o],c=e[o+1];s=e[o+2],a=t[d>>2],d=t[(3&d)<<4|c>>4],c=t[(15&c)<<2|s>>6],s=t[63&s],n[i++]=""+a+d+c+s}switch(a=0,s=r,e.length-o){case 2:s=t[(15&(a=e[o+1]))<<2]||r;case 1:e=e[o],n[i]=""+t[e>>2]+t[(3&e)<<4|a>>4]+s+r}return n.join("")}))}(E(this,!1))};var E=function(e,t){if(e.h)for(var n in e.h)if(Object.prototype.hasOwnProperty.call(e.h,n)){var r=e.h[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)r[i]&&E(r[i],t);else r&&E(r,t)}return e.g},A=function(e,t){return _=t=t?JSON.parse(t):null,e=new e(t),_=null,e};I.prototype.toString=function(){return E(this,!1).toString()};var P=function(e){I.call(this,e)};s(P,I);var x=function(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)},O=function(e){this.g=e||d.document||document};O.prototype.appendChild=function(e,t){e.appendChild(t)};var D=function(e,t,n,r,i,o){try{var a=e.g,s=x(e.g,"SCRIPT");s.async=!0,s.src=t instanceof u&&t.constructor===u?t.g:"type_error:TrustedResourceUrl",function(e){var t,n=(e.ownerDocument&&e.ownerDocument.defaultView||window).document,r=null===(t=n.querySelector)||void 0===t?void 0:t.call(n,"script[nonce]");(t=r&&(r.nonce||r.getAttribute("nonce"))||"")&&e.setAttribute("nonce",t)}(s),a.head.appendChild(s),s.addEventListener("load",(function(){i(),r&&a.head.removeChild(s)})),s.addEventListener("error",(function(){0<n?D(e,t,n-1,r,i,o):(r&&a.head.removeChild(s),o())}))}catch(e){o()}},R=d.atob("aHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vaW1hZ2VzL2ljb25zL21hdGVyaWFsL3N5c3RlbS8xeC93YXJuaW5nX2FtYmVyXzI0ZHAucG5n"),M=d.atob("WW91IGFyZSBzZWVpbmcgdGhpcyBtZXNzYWdlIGJlY2F1c2UgYWQgb3Igc2NyaXB0IGJsb2NraW5nIHNvZnR3YXJlIGlzIGludGVyZmVyaW5nIHdpdGggdGhpcyBwYWdlLg=="),N=d.atob("RGlzYWJsZSBhbnkgYWQgb3Igc2NyaXB0IGJsb2NraW5nIHNvZnR3YXJlLCB0aGVuIHJlbG9hZCB0aGlzIHBhZ2Uu"),U=function(e,t,n){this.h=e,this.j=new O(this.h),this.g=null,this.i=[],this.l=!1,this.o=t,this.m=n},L=function(e){if(e.h.body&&!e.l){var t=function(){j(e),d.setTimeout((function(){return z(e,3)}),50)};D(e.j,e.o,2,!0,(function(){d[e.m]||t()}),t),e.l=!0}},j=function(e){for(var t=q(1,5),n=0;n<t;n++){var r=V(e);e.h.body.appendChild(r),e.i.push(r)}(t=V(e)).style.bottom="0",t.style.left="0",t.style.position="fixed",t.style.width=q(100,110).toString()+"%",t.style.zIndex=q(2147483544,2147483644).toString(),t.style["background-color"]=F(249,259,242,252,219,229),t.style["box-shadow"]="0 0 12px #888",t.style.color=F(0,10,0,10,0,10),t.style.display="flex",t.style["justify-content"]="center",t.style["font-family"]="Roboto, Arial",(n=V(e)).style.width=q(80,85).toString()+"%",n.style.maxWidth=q(750,775).toString()+"px",n.style.margin="24px",n.style.display="flex",n.style["align-items"]="flex-start",n.style["justify-content"]="center",(r=x(e.j.g,"IMG")).className=h(),r.src=R,r.style.height="24px",r.style.width="24px",r.style["padding-right"]="16px";var i=V(e),o=V(e);o.style["font-weight"]="bold",o.textContent=M;var a=V(e);for(a.textContent=N,B(e,i,o),B(e,i,a),B(e,n,r),B(e,n,i),B(e,t,n),e.g=t,e.h.body.appendChild(e.g),t=q(1,5),n=0;n<t;n++)r=V(e),e.h.body.appendChild(r),e.i.push(r)},B=function(e,t,n){for(var r=q(1,5),i=0;i<r;i++){var o=V(e);t.appendChild(o)}for(t.appendChild(n),n=q(1,5),r=0;r<n;r++)i=V(e),t.appendChild(i)},q=function(e,t){return Math.floor(e+Math.random()*(t-e))},F=function(e,t,n,r,i,o){return"rgb("+q(Math.max(e,0),Math.min(t,255)).toString()+","+q(Math.max(n,0),Math.min(r,255)).toString()+","+q(Math.max(i,0),Math.min(o,255)).toString()+")"},V=function(e){return(e=x(e.j.g,"DIV")).className=h(),e},z=function(e,t){0>=t||null!=e.g&&0!=e.g.offsetHeight&&0!=e.g.offsetWidth||(W(e),j(e),d.setTimeout((function(){return z(e,t-1)}),50))},W=function(e){var n=e.i,r="undefined"!=typeof Symbol&&Symbol.iterator&&n[Symbol.iterator];for(n=r?r.call(n):{next:t(n)},r=n.next();!r.done;r=n.next())(r=r.value)&&r.parentNode&&r.parentNode.removeChild(r);e.i=[],(n=e.g)&&n.parentNode&&n.parentNode.removeChild(n),e.g=null},H=function(e){var t=document.createElement("div");return t.className=e,t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.left="-10000px",t.style.top="-10000px",t.style.zIndex="-10000",t},Z=function(e){I.call(this,e)};s(Z,I);var $=function(e){I.call(this,e)};s($,I);var G=function(e,t){this.l=e,this.m=new O(e.document),this.g=t,this.i=k(this.g,1),t=C(this.g,2),this.o=f(k(t,4)||""),this.h=!1,t=C(this.g,13),t=f(k(t,4)||""),this.j=new U(e.document,t,k(this.g,12))};G.prototype.start=function(){K(this)};var K=function(e){J(e),D(e.m,e.o,3,!1,(function(){e:{var t=e.i,n=d.btoa(t);if(n=d[n]){try{var r=A(P,d.atob(n))}catch(e){t=!1;break e}t=t===k(r,1)}else t=!1}t?X(e,k(e.g,14)):(X(e,k(e.g,8)),L(e.j))}),(function(){!function(e,t,n,r,i){var o=H(n),a=function(n){document.body?(document.body.appendChild(o),d.setTimeout((function(){o?(0!==o.offsetHeight&&0!==o.offsetWidth?t():e(),o.parentNode&&o.parentNode.removeChild(o)):e()}),r)):0<n?d.setTimeout((function(){a(n-1)}),i):t()};a(3)}((function(){X(e,k(e.g,7)),L(e.j)}),(function(){return X(e,k(e.g,6))}),k(e.g,9),k(e.g,10),k(e.g,11))}))},X=function(e,t){e.h||(e.h=!0,(e=new e.l.XMLHttpRequest).open("GET",t,!0),e.send())},J=function(e){var t=d.btoa(e.i);e.l[t]&&X(e,k(e.g,5))};!function(e,t){d[e]=function(n){for(var r=[],i=0;i<arguments.length;++i)r[i-0]=arguments[i];d[e]=c,t.apply(null,r)}}("__h82AlnkH6D91__",(function(e){"function"==typeof window.atob&&new G(window,A($,window.atob(e))).start()}))}function LE(){if(!window.frames.googlefcPresent)if(document.body){const e=document.createElement("iframe");e.style="width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;",e.style.display="none",e.name="googlefcPresent",document.body.appendChild(e)}else setTimeout(LE,0)}function jE(e){__webpack_require__.g.RTA.tedEvent("page_event",{action:"increment",name:e})}function BE(e,t){__webpack_require__.g.RTA.tedEvent("page_event",{action:"set",name:e,value:t})}(0,Yt.fo)("googleAdSense",{disableIfNoAdsServable:!0,run:function(e){let t,{broker:n,log:r}=e;n.on("slot defined",(e=>{const{slotTypes:i,pos:o,id:a}=e;i.includes("googleAdSense")?(t=t||(r("loading adSense for",o,a),n.invoke("import script","//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")),t.then((()=>{r("requesting ad",o,a),__webpack_require__.g.adsbygoogle.push({})}))):r("slot type not supported, bail",i)}))},vendorIds:{gdpr:[755]},purposeIds:{gdpr:"N/A"}}),(0,Yt.fo)("amazonNative",{disableIfNoAdsServable:!0,run:function(e){let{broker:t,getConfig:n,log:r}=e;t.on("slot defined",(e=>{let{slotTypes:i,id:o}=e;if(!i.includes("amazon"))return void r("slot type not supported, bailing",i);if(!document.getElementById(o))return void r("unable to fine element id:",o,", bailing");const a=`${n("pos.under-article.amazon.url","//z-na.amazon-adsystem.com/widgets/onejs")}?MarketPlace=US&adInstanceId=${n("pos.under-article.amazon.id","df745670-1d9e-4f8c-890c-b2e54a92586a")}`;r("loading scriptUrl",a),t.invoke("import script",a).then((()=>{r("script loaded")})).catch((e=>{r("error loading",a),r("error",e)}))}))},vendorIds:{gdpr:[793]},purposeIds:{gdpr:"N/A"}}),(0,Yt.fo)("funding-choices",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:"N/A"},async run(e){let{broker:t,getConfig:n,doc:r,localStorage:i,log:o,pageCriteria:a,win:s}=e;await async function(){if(s.__uspapi&&vr()&&(await pr("ready"),!_r()))return o("waiting for CMP banner to be acknowledged"),new Promise((e=>{const t=(0,xa.Oo)(s,"message",(n=>{let{data:r}=n;"string"==typeof r&&r.startsWith("__cmp_ui_tracking\n")&&"overlay accepted"===r.substring(18)&&(o("CMP banner has been acknowledged"),t(),e())}))}))}();const d="true"===i.getItem("dmg.ads.abe.prevFcVisible");i.removeItem("dmg.ads.abe.prevFcVisible"),t.register("call for page-unload",(()=>({fcodppv:d}))),s.googlefc=s.googlefc||{},s.googlefc.ccpa=s.googlefc.ccpa||{},s.googlefc.callbackQueue=s.googlefc.callbackQueue||[];const c=function(){if(!n("plugins.fundingChoices.overlayMonitor"))return()=>null;let e=!1;const a=new MutationObserver((n=>{for(const{addedNodes:r}of n)for(let n=0;n<r.length;n++){const s=r[n];if(s instanceof HTMLElement&&s.classList.contains("fc-ab-root")){const n=s.querySelector(".fc-dialog-container");n instanceof HTMLElement&&null!==n.offsetParent&&(a.disconnect(),e=!0,i.setItem("dmg.ads.abe.prevFcVisible","true"),l="abd",t.emit("set page level targeting",{exabd:l}),o("overlay was displayed"))}}}));return(0,Ut.onBodyAvailable)((()=>{a.observe(r.body,{childList:!0})}),r),googlefc.callbackQueue.push({async AD_BLOCK_DATA_READY(){await(0,He.Vs)(2e3),o("disconnecting overlay monitor"),a.disconnect()}}),()=>e}();let l;t.register("call for page analytics",(()=>{if(void 0!==l)return{exabd:l}})),googlefc.callbackQueue.push({AD_BLOCK_DATA_READY(){const e=googlefc.getAdBlockerStatus(),n=googlefc.getAllowAdsStatus(),r=function(e){const t=function(e){let t={had:!1,state:"unknown"};try{e&&(t=JSON.parse(e))}catch(e){}const n=new is.Z(((e,t)=>{switch(e.type){case"block":return{...t,had:!0,state:"converted"===t.state||"reverted"===t.state?"reverted":"unconverted"};case"unblock":return{...t,state:t.had?"converted":"none"};case"fail":return{...t,state:"unknown"};default:return t}}),t,o.extend("store"));return n.init(),n}(i.getItem("dmg.ads.abe.gfc"));return!function(e){return e===googlefc.AdBlockerStatusEnum.EXTENSION_LEVEL_AD_BLOCKER||e===googlefc.AdBlockerStatusEnum.NETWORK_LEVEL_AD_BLOCKER}(e.adBlockerStatus)?e.allowAdsStatus===googlefc.AllowAdsStatusEnum.UNKNOWN?t.dispatch({type:"fail"}):t.dispatch({type:"unblock"}):t.dispatch({type:"block"}),i.setItem("dmg.ads.abe.gfc",JSON.stringify(t.state)),t.state.state}({adBlockerStatus:e,allowAdsStatus:n});o({adBlockerStatus:e,allowAdsStatus:n,convertedStatus:r}),void 0===l&&n!==googlefc.AllowAdsStatusEnum.UNKNOWN&&"none"!==r&&"unknown"!==r&&"unconverted"!==r&&(l="converted"===r,t.emit("set page level targeting",{exabd:l})),t.register("call for page analytics",(()=>{const t=c(),i={fcabs:e,fcaas:n,fcabcs:r};return null===t?i:{...i,fcabod:t}}))}}),await(0,Ut.untilBodyAvailable)(r),NE(),"US"===(null==a?void 0:a.geo)?await async function(){const e=document.createElement("script");e.src="https://fundingchoicesmessages.google.com/i/pub-6814031669762801?ers=1",e.setAttribute("nonce","ej8mtvjc_wHrxrHc5NHUNw"),await(0,Ut.untilBodyAvailable)(),document.body.appendChild(e),LE()}():await async function(){const e=document.createElement("script");e.src="https://fundingchoicesmessages.google.com/i/pub-6274168003790870?ers=1",e.setAttribute("nonce","Ub2QTPjvEhLWe-kdSZr-4Q"),await(0,Ut.untilBodyAvailable)(),document.body.appendChild(e),LE()}()}}),(0,Yt.fo)("widgets",{init:async function(e){let{getConfig:t,log:n,removePlugins:r}=e;const i=t("plugins.widgets.safeguard",!1);if(r(["taboolaAds","trackers.taboola","taboola.Outstream","taboola.slots","taboola"]),i){r(["prebid","adservers.openweb","amazonNative","bidders.spotx2","bidders.amazon","dmp.airgrid","dmp.moat","dmp.permutive.indexedDBUsage","dmp.permutive.video","trackers.exitbee","nativo","permutive","permutive.rtd","prebid.permutiveRtd","players.dmplayer","trackers.quantcast.userSync","slots.connatix","slots.InreadPlayerTop","slots.minuteMedia","trackers.admantx","trackers.adxChannel","trackers.applePrivateRelay","trackers.id5","trackers.ixIdentity","trackers.pubcommon","trackers.pubProvidedId","trackers.smartclip","trackers.taboola","trackers.unifiedid","trackers.universalid","trackers.viewability","chromelessv2.dmplayer"]);try{await mn("//cdn.taboola.com/libtrc/dailymail-uk/loader.js"),n("taboola loaded, bailing"),r(["widgets"])}catch(e){n("unable to load taboola, proceeding")}}else n("safeguard disabled, loading outbrain")},run:function(e){var t;let{broker:n,getConfig:r,log:i,win:o,DM:a}=e;i("running");const s=r("plugins.widgets.loadEarly",!1),d=r("plugins.widgets.detailedTracking",!0),c=r("widgetsScript","https://widgets.outbrain.com/outbrain.js");let l={};const u={};BE("outbrain","scriptLoading"),function(){o.OBREvents=o.OBREvents||[],o.OBREvents.push({name:"all",callback:function(e){const n=t[e.name];if(n)try{n(e)}catch(t){i.warn("error while running callback:",e.name),i.warn(t)}else i.warn("no event handler for:",e.name)},widgetId:"all",feedCards:1});let e=!1;const t={viewability:t=>{if(n.emit("outbrain visible"),!e){null!=u&&u.obMissedWidget&&delete u.obMissedWidget;const{feedIndex:n,servedParentWidgetId:r,...i}=t;m("containerVisible",{...i,servedWidgetId:r}),e=!0}m("visible",t),jE("outbrainView")},click:e=>{n.emit("outbrain click"),m("click",e),jE("outbrainClick")},norecs:e=>{n.emit("outbrain nocontent"),m("norecs",e),jE("outbrainNoContent")},issue:e=>{n.emit("outbrain issue"),m("issue",e),jE("outbrainIssue")},rendered:e=>{if("feedIndex"in e)n.emit("outbrain render"),m("render",e),jE("outbrainRender");else{if((0,Fe.xb)(l)){const e=document.querySelector(".ob-smartfeed-wrapper"),t=e&&(0,je.r7)(e).top;i("obWrapperTop",t),l={numImages:document.querySelectorAll(".image-wrap").length,...t?(0,zn._b)("outbrainTopOffsetP20000px",t):{}}}u.obMissedWidget=e.servedWidgetId,n.emit("outbrain container render"),m("containerRender",e),BE("outbrain","rendered")}}}}(),r("plugins.widgets.customViewabilityTracking")&&function(){var e;let t,r=!1;const a={},s=i.extend("viewability");null===(e=o.OBREvents)||void 0===e||e.push({name:"rendered",widgetId:"all",feedCards:1,callback:e=>{s("rendered",e),r?s.debug("event already sent"):e.parentWidgetId?e.element&&(s("tracking viewability for widget",e),a[e.widgetId]=n.once("ad viewable",e.widgetId,(()=>{r||(s(`viewed ${e.parentWidgetId}.${e.widgetId}`),r=!0,function(){for(const[e,t]of Object.entries(a))t.cancel(),n.emit("untrack viewability",e)}(),m("dmgContainerVisible",t))})),n.emit("track viewability",e.widgetId,e.element)):(s.debug("container render"),t=e)}})}();const p=null==a||null===(t=a.molFeTracking)||void 0===t?void 0:t.pageEvents;if(null!=p&&p.ARTICLE_TRUNCATION_EXPAND){const{unsubscribe:e}=(null==p?void 0:p.listen(p.ARTICLE_TRUNCATION_EXPAND,(()=>{e(),i("ARTICLE_TRUNCATION_EXPAND clicked"),n.emit("send event to bidmax",{type:"custom",payload:{module:"outbrain",viewMoreClicked:!0,...l}}),n.register("call for page analytics",(()=>({viewMoreClicked:!0}))),u.viewMoreClicked=!0})))||{unsubscribe:()=>{}}}let f=!1;const h={};function g(){if(!f){f=!0,i("loading",c);try{n.invoke("import script",c),m("scriptLoaded"),BE("outbrain","scriptLoaded")}catch(e){i.warn("unable to load script",e),n.emit("outbrain failed to load"),m("scriptFailed"),BE("outbrain","scriptFailed")}}}function m(e,t){var r;if(!d)return;const{abtest:o,version:a,servedWidgetId:s,feedIndex:c}=t||{},u=null==t||null===(r=t.data)||void 0===r?void 0:r.message,p=!h[e];h[e]=!0,i("sending event",e,{widget:s,feedIndex:c,message:u}),n.emit("send event to bidmax",{type:"custom",payload:{module:"outbrain",widget:s,type:e,abtest:o,outbrainVersion:a,message:u,first:p,feedIndex:c,...l}})}s?(i("loading early"),g()):(i("delay loading after slot-defined"),n.on("slot defined",(function(e){let{pos:t,slotTypes:n}=e;i("slot defined",t,n),n.includes("widgets")&&(i(`loading slot "${t}"`),g())}))),n.register("call for page-unload",(()=>u))},gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0},initTimeout:zn.RD}),(0,Yt.fo)("nonRegisteredVendors",{disableIfNoAdsServable:!0,run:async function(e){let{broker:t,log:n}=e;t.on("TCData",(e=>{n("TCData received",e),__webpack_require__.g.__tcfapi("getNonRegisteredVendors",2,((r,i)=>{var o,a;if(!i)return void n("no response from getNonRegisteredVendors");const s=Object.keys(r);if(n("nonRegisteredVendorsIds",s),null!==(o=e.nrvString)&&void 0!==o&&null!==(a=o.startsWith)&&void 0!==a&&a.call(o,"1~")){const r=(".",""===(d=e.nrvString.slice(2))?[]:d.split(".")),i=(0,Qe.zu)(s,r);i.length?(n("setting unconsenting targeting",i),t.emit("set page level targeting",{unconsentednrv:i})):n("user has consented to all NRVs")}var d}))}))},gdpr:{enabledIfDissent:!0}}),(0,Yt.fo)("userIds.sync",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r,win:i}=e;const o=n("plugins.user.sync.backend.url","https://idsync.anm.co.uk/v1/sync"),a=n("plugins.user.sync.backend.invalidStateURL","https://idsync.anm.co.uk/v1/invalidState"),s=n("plugins.user.sync.backend.debounceTime",1e3),d=n("plugins.user.sync.backend.lockTimeout",15e3),c=n("plugins.user.sync.backend.retryBackoffTime",1e4);!function(){try{const e=localStorage.getItem("mol.ads.user");if(!e)return;r("migrating old data:",e);const t=JSON.parse(e);p("inSyncState",(()=>t.references))}catch(e){r.warn("error migrating data",e)}localStorage.removeItem("mol.ads.user")}();const l=(0,J.Ds)((async()=>{if(h("lock",0)+d>Date.now())return r("sync is locked, skipping"),l();var e,t,n;e="lock",t=Date.now(),r("setStateValue",e,t),p(e,(()=>t));try{const{inSyncState:e,queue:t}=function(){let{inSyncState:e={},processingQueue:t=[],incomingQueue:n=[]}=f();return t=[...t,...n].filter((t=>{var n;let{userIdPartner:r,id:i}=t;return(null===(n=e[r])||void 0===n?void 0:n.id)!==i})),u((()=>({processingQueue:t,incomingQueue:void 0}))),{inSyncState:e,queue:t}}();if(!t.length)return void r("Nothing in the queue, bailing");const s=function(e,t){return t.reduce(((e,t)=>{let{userIdPartner:n,...r}=t;return e[n]=r,e}),e||{})}(e,t);if(!function(e){return e&&"permutive"in e}(s))return void r("Dont have permutive yet, bailing");try{const e=await(n={ids:s},i.fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}));if(e.status>=500)throw new Error(`Server error (${e.status}) "${e.statusText}"`);if(e.status>=400)return r.warn("Invalid user data, sending to invalid endpoint",s),await function(e){return i.fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}({body:{state:s,responseStatus:e.status,responseStatusText:e.statusText,responseText:await e.text()}}),void g("processingQueue")}catch(e){return r("rescheduling dispatch in",c,"ms coz fetch failed",e),void setTimeout(l,c)}r("synced",t.length,"ids"),function(e){u((()=>({inSyncState:e,processingQueue:void 0})))}(s)}finally{g("lock")}h("incomingQueue")&&l()}),s);function u(e){const t=f();localStorage.setItem(qE,JSON.stringify({...t,...e(t)}))}function p(e,t){u((n=>{const i=t(n[e]);return r("updateStateValue",e,i),n[e]=i,n}))}function f(){return JSON.parse(localStorage.getItem(qE)||"{}")}function h(e,t){return f()[e]||t}function g(e){r("deleteStateValue",e),u((t=>(t[e]=void 0,t)))}t.on("sync userId",((e,t,n)=>{var r;r={createdAt:(new Date).toISOString(),userIdPartner:e,id:t,source:n},p("incomingQueue",(e=>[...e||[],r])),l()}))}});const qE="mol.ads.userids.sync";(0,Yt.fo)("userIds.thirdPartyUserData",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r}=e;r("starting"),function(){const e=n("plugins.user.sync.thirdPartyUserData.supportedOrigins",["https://localhost:8124"]);window.addEventListener("message",(n=>{if("string"==typeof n.data&&n.data.startsWith(FE))if(e.includes(n.origin)&&n.source)try{const e=function(e){return JSON.parse(e.data.split(FE)[1])}(n);if(!function(e){return"postUserData"===e.scope}(e))return void r("unsupported scope, bailing");t.emit("sync userId","email",e.data,n.origin)}catch(e){r.error("error handling request",e)}else r("bailing cos origin not supported:",{supportedOrigins:e,origin:n.origin})}),!1)}(),t.on("api message","postUserData",(e=>{let{email:n,source:r}=e;t.emit("sync userId","email",n,r)}))}});const FE="_dm_ads_message\n";(0,Yt.fo)("userIds.registration",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,DM:n}=e;null!=n&&n.userId&&t.emit("sync userId","registration",n.userId,location.hostname)}});const VE=/(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/,zE=/(\b25[0-5]|\b2[0-4][0-9]|\b[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}/;function WE(e){const t=[],n=e.split(".");let r;for(r=0;r<n.length;r+=2)t.push(parseInt(n[r],10).toString(16).padStart(2,"0")+parseInt(n[r+1],10).toString(16).padStart(2,"0"));return"::"+t.join(":")}function HE(e){const t=function(e){const t=new Array(8).fill(0);if("::"===e)return t;const n=e.split(":"),r=Math.min(n.length,8);for(let e=0,i=0;e<r;e++)e&&""===n[e]?i=9-r+e:(t[i]=parseInt("0x0"+n[e]),i++);return t}(e);return(t[6]>>8)+"."+(255&t[6])+"."+(t[7]>>8)+"."+(255&t[7])}function ZE(e){switch(e.getLinkType()){case 0:return"unlinked";case 1:return"probabilistic";case 2:return"deterministic";default:return"uknown"}}(0,Yt.fo)("trackers.id5v2",{purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[131]},run(e){let{broker:t,getConfig:n,log:r,win:i}=e;const o=n("trackers.id5.partnerId");if(!o)throw new Error("Missing adverts.config.trackers.id5.partnerId");const a=function(){var e;const t=null===(e=i.PageCriteria)||void 0===e?void 0:e.clientIP;if(!t)throw new Error("Cannot find user IPv4 address");const[n,r]=(o=t,zE.test(o)?[t,WE(t)]:function(e){return VE.test(e)}(t)?[HE(t),t]:[]);var o;if(!n)throw new Error("Cannot find user IPv4 address");let a=`10=${encodeURIComponent(n)}&12=${encodeURIComponent(i.navigator.userAgent)}`;return r&&(a+=`&11=${encodeURIComponent(r)}`),a}(),s=async function(){r("Loading ID5");const e=await t.invoke("load script","https://cdn.id5-sync.com/api/1.0/id5-api.js","ID5");r("Requesting id5");const n=e.init({partnerId:o,pd:i.btoa(a)});return new Promise((e=>{n.onAvailable(e)}))}(),d=s.then((e=>{const n=e.getUserId();return t.emit("sync userId","id5",n,location.hostname),{id5:n}}));t.emit("set page level targeting",d),t.register("call for page analytics",(()=>d)),s.then((function(e){r({fromCache:e.isFromCache(),linkType:ZE(e),userId:e.getUserId()})})),t.register("provide prebid config",(()=>({userSyncConfig:{userIds:[{name:"id5id",params:{partner:o,pd:a},storage:{type:"html5",name:"id5id",expires:n("trackers.id5.expires",395),refreshInSeconds:n("trackers.id5.refresh",28800)}}]}})))}});var $E=__webpack_require__(4204),GE=__webpack_require__.n($E);function KE(e,t,n){XE(e,t),t.set(e,n)}function XE(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function JE(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,QE(e,t,"get"))}function YE(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,QE(e,t,"set"),n),n}function QE(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var eA=new WeakMap,tA=new WeakMap,nA=new WeakMap,rA=new WeakMap,iA=new WeakMap,oA=new WeakMap,aA=new WeakMap,sA=new WeakSet;class dA{constructor(e){let{baseURL:t,doc:n,worker:r,log:i,win:o}=e;!function(e,t){XE(e,t),t.add(e)}(this,sA),KE(this,eA,{writable:!0,value:void 0}),KE(this,tA,{writable:!0,value:void 0}),KE(this,nA,{writable:!0,value:void 0}),KE(this,rA,{writable:!0,value:void 0}),KE(this,iA,{writable:!0,value:void 0}),KE(this,oA,{writable:!0,value:void 0}),KE(this,aA,{writable:!0,value:e=>{let{data:t}=e;const{id:n,match:r}=t;if(!n)return;JE(this,nA).call(this,"match check result:",n,r);const i=JE(this,tA).get(n);i&&r&&function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,sA,cA).call(this,i),JE(this,tA).delete(n)}}),YE(this,eA,r),JE(this,eA).onmessage=JE(this,aA),YE(this,nA,i),YE(this,tA,new Map),YE(this,rA,n),YE(this,iA,t),YE(this,oA,o)}queueHrefReplacement(e){const t=(0,Is.Z)();JE(this,tA).set(t,e),JE(this,nA).call(this,"requesting match check",t),JE(this,eA).postMessage({id:t,cmd:"testMatch",href:e.href})}}function cA(e){var t;JE(this,nA).call(this,"matched",e,`replacing ${e.href}`),e.dataset.originalHref=e.href;let n=`${JE(this,iA)}?q=${encodeURIComponent(e.dataset.originalHref)}&p=${encodeURIComponent((top||JE(this,oA)).location.href)}&event_type=click`;JE(this,rA).referrer&&(n+=`&ref=${encodeURIComponent(JE(this,rA).referrer)}`),null!==(t=JE(this,oA).PageCriteria)&&void 0!==t&&t.articleId&&(n+=`&articleid=${JE(this,oA).PageCriteria.articleId}`),e.href=n}const lA=["https://www.dailymail.co.uk","https://creative.dailymail.co.uk","https://discountcode.dailymail.co.uk","https://mailpictures.newsprints.co.uk/","https://www.mailonsunday.co.uk/","https://www.thisismoney.co.uk/","https://www.metro.co.uk/","https://www.jobsite.co.uk/","https://www.mailtravel.co.uk","https://www.zoopla.co.uk/","https://www.primelocation.com/","https://www.dmgmedia.co.uk/","https://www.mailmetromedia.co.uk/","https://paid.outbrain.com/","https://www.outbrain.com/","https://www.mymail.co.uk","https://games.dailymail.co.uk","https://shopping.dailymail.co.uk","http://www.mailtravel.co.uk","https://www.mailadvertising.co.uk","http://blakesmalltalkblog.dailymail.co.uk","https://www.mailshop.co.uk","mailto","https://twitter.com","https://share.flipboard","fb-messenger","https://m.facebook.com/sharer"];function uA(e){return!!e.href&&!lA.some((t=>e.href.startsWith(t)))}function pA(e){return Array.from(e.querySelectorAll("a")).filter(uA)}function fA(e){return e instanceof PerformanceResourceTiming}(0,Yt.fo)("trackonomics",{vendorIds:{gdpr:[365]},purposeIds:{gdpr:[1]},run:async function(e){let{broker:t,doc:n,getConfig:r,log:i,pageCriteria:o,pageMeta:a,win:s}=e;const d=r("plugins.trackonomics.baseURL","https://clicks.trx-hub.com/xid/mailonline_8bcce_mailonline"),c=r("plugins.trackonomics.patternURL","https://iad.anm.co.uk/tnomics/trackonomics.pattern.txt"),l=t.until("dom ready"),u=r("plugins.trackonomics.supportedTopics",["Mail Best","Mail Best US"]);if(!await op({getConfig:r,broker:t,pageCriteria:o,inlineModuleIdsString:__webpack_require__.g.inlineModules})&&!((e,t)=>e.some((e=>{var n;return null==t||null===(n=t.topics)||void 0===n?void 0:n.includes(e)})))(u,a))return void i("fff not found in page, and no supported topics bailing");if(!c)return void i.error("Misconfigured pattern URL");const p=await async function(e){const t=await fetch(e);return(await t.text()).trim()}(c);if(!p)return void i.error("no pattern configured for trackonomics");i.extend("pattern")(p);const f=new(GE());f.postMessage({cmd:"setPattern",pattern:p});const h=new dA({baseURL:d,doc:n,worker:f,log:i,win:s}),g={trkn:"started"};t.register("call for page-unload",(()=>g)),await l,new MutationObserver((e=>{for(const t of e)for(let e=0;e<t.addedNodes.length;e++){const n=t.addedNodes[e];if(1===n.nodeType){if(n instanceof HTMLElement&&n.classList.contains("noskim"))return;if(n instanceof HTMLAnchorElement&&uA(n))h.queueHrefReplacement(n);else if(n.hasChildNodes()){const e=pA(n);for(let t=0;t<e.length;t++)h.queueHrefReplacement(e[t])}}}})).observe(n.body,{childList:!0,subtree:!0});const m=pA(n);for(let e=0;e<m.length;e++)h.queueHrefReplacement(m[e]);g.trkn="ready"}}),__webpack_require__(1625),(0,Yt.fo)("abe.transferPerformance",{isAdsFreeSupported:!1,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;t.register("call for page-unload",(()=>{const e=__webpack_require__.g.performance.getEntries().filter(fA),[t,r]=e.reduce(((e,t)=>{let[n,r]=e;return n+=t.duration,r+=t.transferSize,[n,r]}),[0,0]),i=e.length,o=r/(t/1e3)/1e3;return n("resourceTransfer",i,o),{resourceTranfer:{numResources:i,rate:o}}}))}});const hA="\n.mpu_puff_wrapper.watermark,\n.adHolder.watermark,\n#mobile-content .adHolder.watermark,\n#content .billboard-container.watermark,\n.mol-ads-label-container {\n  display: none;\n}\n";(0,Yt.fo)("nonAdServable",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,DM:n,getConfig:r,log:i,setConfig:o,pageCriteria:a,queryParams:s,addPlugins:d,removePlugins:c,registerPluginBouncer:l}=e;if(null==a||!a.nonAdservable||s.ignoreDisableAds)return;const u=new Set(r("plugins.nonAdServable.disablePlugins",[])),p=r("plugins.nonAdServable.enabledPlugins",[]);i("plugins disabled via config",u),l(((e,t)=>{const n=i.extend(e);return!t.disableIfNoAdsServable&&!u.has(e)||(n("disabling plugin"),!1)})),function(e,t,n){t("slots.enabled",(0,Fe.ei)(e("slots.enabled",{}),n)),(0,Ut.appendStyle)(hA)}(r,o,["smart_feed"]),p.length&&(i("enabled plugins",p),d(p)),gA(n),(0,Ut.appendStyle)("#mini-carousel-wrapper {display: none;}"),c(["trackers.pubcommon","imaSDK","vpaid","prebid","chromelessWaitForBillboard"]),t.register("call for page analytics",(()=>({adsDisabled:!0})))}});const gA=function(e){var t,n;null==e||null===(t=e.molFeComponents)||void 0===t||null===(n=t.setConfig)||void 0===n||n.call(t,"mol-fe-videoplayer",{plugins:{flyout:{enabled:!1,forceFlyout:{enabled:!1}}}})};var mA=__webpack_require__(9475),vA=__webpack_require__.n(mA);(0,Yt.fo)("conditionalEnable",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,log:n,getConfig:r,pageCriteria:i,setConfig:o,registerPluginBouncer:a}=e;n("starting");const s=r("enableCondition.downlinkMin",0),d=vA()(),c=r("enableCondition.notForAuthorTypes",[]),l=new Set(r("enableCondition.disablePlugins",[]));if(s>=d)return n("disabling ads because of downlink:",{downlinkMax:d,downlinkMin:s}),p();const u=i.authorType;if(c.includes(u))return n("disabling ads because of controvential author:",{controversialAuthors:c,authorType:u}),p();function p(){a(((e,t)=>{const r=n.extend(e);return!t.disableIfNoAdsServable&&!l.has(e)||(r("disabling plugin"),!1)})),function(e){e("slots.enabled",{}),(0,Ut.appendStyle)(hA)}(o),t.register("call for page analytics",(()=>({adsDisabled:!0})))}}}),(0,Yt.fo)("dmp.ias.verificationPixel",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("dmp.ias.pubId",931554);t.on("loadIASVerificationPixel",(e=>{var t,n,o,a,s;let d,{document:c,cacheBuster:l,width:u,height:p,...f}=e;const h=yA({anId:i,width:u,height:p,...f});r("iasScriptUrl",h);const g=c.createElement("iframe");(g.frameElement||g).style.cssText="width: 0; height: 0; border: 0; display: none;",g.src="javascript:false";const m=c.getElementById(`ias-${l}`);null==m||null===(t=m.parentNode)||void 0===t||t.insertBefore(g,m);try{var v;d=null==g||null===(v=g.contentWindow)||void 0===v?void 0:v.document}catch(e){var y;const t=c.domain;g.src="javascript:var d=document.open();d.domain='"+t+"';void(0);",d=null==g||null===(y=g.contentWindow)||void 0===y?void 0:y.document}null===(n=d)||void 0===n||null===(o=n.open)||void 0===o||o.call(n).write("<body onload=\"window.__IntegralASUseFIF = true;var js = document.createElement('script');js.src = '"+h+"';document.body.appendChild(js);\">"),null===(a=d)||void 0===a||null===(s=a.close)||void 0===s||s.call(a)}))}});const yA=e=>{let{anId:t,width:n,height:r,...i}=e;return["impId","pubId","chanId","placementId","pubCreative","pubOrder","custom"].reduce(((e,t)=>t in i?`${e}&${t}=${i[t]}`:e),`//pixel.adsafeprotected.com/jload?anId=${t}&campId=${n}x${r}&adsafe_par`)};(0,Yt.fo)("dmp.ias.targeting",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){var t;let{broker:n,getConfig:r,log:i,pageCriteria:o,win:a}=e;if("true"===(null==o?void 0:o.sponsored))return void i("sponsored article, bailing");const s=Object.values(r("slotDescriptions.initial",{})).filter((e=>!e.isTemplate&&e.slotTypes.includes("gpt"))).map(_A).filter((e=>{let{adSlotId:t,size:n,adUnitPath:r}=e;return t&&n&&r}));a.__iasPET=a.__iasPET||{};const d=a.__iasPET;d.queue=d.queue||[],d.pubId=r("dmp.ias.pubId",931554);const c=r("dmp.ias.targetingRequestTimeout",1e3),l=`//static.adsafeprotected.com/iasPET.${r("dmp.ias.petScriptVersion",1)}.js`;i("loading script",l),n.invoke("import script",l);let u={};n.register("get tags",(e=>{const{slot:{pos:t,id:n}}=e;i("get tags requested",t);const r=u[n];return i(`tags for ${t}:`,r),r})),i("iasPETSlots",s),i("requesting targeting, timeout: ",c),null===(t=d.queue)||void 0===t||t.push({adSlots:s,dataHandler:e=>{var t;i("ias data received",e);const r=JSON.parse(e);null===(t=d.setTargetingForGPT)||void 0===t||t.call(d),u=r.slots;const o=bA(r);n.emit("set page level targeting",o),n.register("call for page analytics",(()=>({iasTargeting:o})))},timeout:c})}});const bA=e=>{const{brandSafety:t,fr:n}=e;return{fr:n,...t}},_A=e=>({adSlotId:e.id,size:e.size,adUnitPath:e.adUnit});(0,Yt.fo)("dmp.ias.prebidRtd",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"},disableIfNoAdsServable:!0,run:function(e){let{getConfig:t,broker:n,log:r,pageCriteria:i}=e;if("true"===(null==i?void 0:i.sponsored))return void r("sponsored article, bailing");const o=t("ias.rtd.auctionDelay",2e3),a={name:"ias",params:{pubId:t("dmp.ias.pubId",931554)}},s=[o?{...a,waitForIt:!0}:a],d=o?{auctionDelay:o,dataProviders:s}:{dataProviders:s};r("setting realTimeData rtd",d),n.register("provide prebid config",(()=>({realTimeDataConfig:d})))}}),(0,Yt.fo)("trackers.universalid",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"},run:e=>{let{broker:t,getConfig:n,log:r}=e;const i=n("trackers.universalIds",[]);i.length&&t.register("provide prebid config",(()=>({userSyncConfig:{userIds:i,syncDelay:n("plugins.prebid.syncDelay",3e3)}})))}}),(0,Yt.fo)("prebidUserSync",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"},disableIfNoAdsServable:!0,run:async e=>{let{getConfig:t,broker:n,log:r}=e;const i=new Promise((async e=>{const[,t]=await n.until("configure and start prebid");e(t)}));n.register("provide prebid config",(async()=>{const e=await i;return{userSyncConfig:{...qe()({},t("plugins.prebid.userSync"),{filterSettings:{iframe:{bidders:wA(e)}}})}}}))}});const wA=e=>Array.from(new Set(e.reduce(((e,t)=>[...e,...t.bids.map((e=>e.bidder))]),[])));function TA(e){const{activeElement:t}=e.document;if("IFRAME"===(null==t?void 0:t.tagName))try{const e=t.contentWindow;if(!e)throw new Error("cant access win");return TA(e)}catch(e){return}return e}(0,Yt.fo)("trackers.unifiedid",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"},disableIfNoAdsServable:!0,run:e=>{let{broker:t,getConfig:n}=e;t.register("provide prebid config",(()=>({userSyncConfig:{userIds:[{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=a8r0pns&fmt=json"},storage:{type:"cookie",name:"pbjs-unifiedid",expires:60}}],syncDelay:n("plugins.prebid.syncDelay",3e3)}})))}}),(0,Yt.fo)("players.oov",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;n("running"),window.addEventListener("blur",(()=>{t.emit("sync video tags update",{cust_params:{oov:!0}})})),window.addEventListener("focus",(()=>{t.emit("sync video tags update",{cust_params:{oov:!1}})})),t.emit("sync video tags update",{cust_params:{oov:!document.hasFocus()}})}}),(0,Yt.fo)("analytics.fullscreenOverlay",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n}=e;const r=e=>{t.emit("send event to bidmax",{type:"custom",payload:{...e,module:"fullScreenOverlay"}})};t.once("fullScreenOverlayStarted",(e=>{t.register("call for page analytics",(()=>({fullScreenOverlay:{owner:e}})))})),n("analytics.fullscreenOverlay.reportToBidmax",!1)&&(t.on("fullScreenOverlayStarted",(e=>{r({owner:e,state:"started"})})),t.on("fullScreenOverlayEnded",(e=>{r({owner:e,state:"ended"})})))}});var IA=__webpack_require__(4399),SA=__webpack_require__.n(IA),kA=__webpack_require__(6558);(0,Yt.fo)("trackers.watchdog",{ccpa:{enabledIfDissent:!0},description:"Monitors non-user initiated reloads",gdpr:{enabledIfDissent:!0},run(e){let{broker:t,doc:n,getConfig:r,log:i,pageCriteria:o,win:a}=e;const s=function(){let e,t=!1;return n.documentElement.addEventListener("click",(()=>{i("clicked"),t=!0,v(),e&&(e=clearTimeout(e)),e=setTimeout((()=>{i("click reset"),t=!1,v()}),300)}),{capture:!0}),()=>t}(),d=function(){let e=!1;return SA()("+r, ctrl+r, alt+f4",(()=>{e=!0,v()})),()=>e}(),c=function(){let e=n.hasFocus();return n.documentElement.addEventListener("mouseenter",(()=>{e=!0,v(),i("entered")})),n.documentElement.addEventListener("mouseleave",(()=>{e=!1,v(),i("left")})),()=>e}(),l=function(){let e=!1;return n.documentElement.addEventListener("touchstart",(()=>{i("touch start"),e=!0,v()})),n.documentElement.addEventListener("touchend",(()=>{i("touch end"),e=!1,v()})),()=>e}(),u=()=>{const e=TA(a);return e?e.document.hasFocus()?e===a?"top":e.name:"none":"unknown"},p=function(){const e=o&&1e3*Number(o.timestamp)+1e3*o.refresh;return()=>!!e&&Date.now()>=e}(),f=function(){let e=!1;return window.addEventListener("visibilitychange",(()=>{const{hidden:t}=document;i("hidden:",t),e=t,y("visibilitychange",{hidden:t},!0),v()}),{capture:!0,passive:!0}),()=>e}();r("trackers.watchdog.reportStart",!0)&&y("start",(0,kA.b)(i));const h=(0,J.jR)();let g=0;function v(){const e=Math.round(performance.now()/1e3),t={st:m.B,ts:Date.now(),dtis:e,c:s(),fw:u(),t:l(),miv:c(),prt:p(),rk:d(),h:f(),u:(0,$n.vp)(window.location.href)};i("saving state",t),localStorage.setItem("mol.ads.watchdog",JSON.stringify(t)),g&&clearTimeout(g),g=setTimeout(v,1e3*h.next().value)}function y(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i("reporting",{event:e,flush:r,payload:n}),t.emit("send event to bidmax",{type:"watchdog",event:e,payload:n},r)}v(),t.register("call for page-unload",(()=>{const e={clicked:s(),focusedWin:u(),isTouching:l(),mouseInViewport:c(),postRefreshTime:p(),refreshKeys:d(),hidden:f()};return i("unload",e),e}))}}),(0,Yt.fo)("abe.pageUnload",{disableIfNoAdsServable:!0,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:e=>{let{broker:t,log:n}=e,r={};t.on("adblock detection status",(e=>{r=e,n("adBlockerStatus",r)})),t.register("call for page-unload",(()=>r))}});const CA=["pageViewId","articleId","channel","device","geo","isMobile","isTablet","pageType","sponsored","subchannel","cljVersion","cljNode","articleStyle"],EA=["renderPlatform"];(0,Yt.fo)("analytics.pageMeta",{gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:e=>{let{broker:t,log:n,pageMeta:r,pageCriteria:i,doc:o}=e;const a=(0,Ut.loaded)(o);function s(){const{authorsShortNames:e,publishedDate:t}=r||{},n=(Date.now()-Number(t))/1e3/60/60/24;return{...r?(0,Fe.ei)(r,EA):{},authors:e,daysSincePublished:n}}function d(){const e=o.querySelector('#mobile-content .scrollable-content > article, #page-container .article-text [itemprop="articleBody"]');return(null==e?void 0:e.classList.contains("article-truncated"))?{trunc:1}:{}}t.register("call for page analytics",(()=>{const e={...i?(0,Fe.ei)(i,CA):{},...s()};return n("sync:",e),e})),t.register("call for page analytics",(()=>a.then((()=>{const e=d();return n("async:",e),e})))),t.emit("set page level targeting",a.then((()=>{const e=d();return n({pageLevelTargeting:e}),e})))}}),(0,Yt.fo)("page.topics",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:e=>{var t;let{broker:n,log:r,pageMeta:i}=e;if(null!=i&&null!==(t=i.topics)&&void 0!==t&&t.length){r("topics found",i.topics),n.register("call for page analytics",(()=>({topics:i.topics})));const e=i.topics.map((e=>e.toLowerCase().replace(/[^a-zA-Z0-9]/g,"_")));r("sending:",e),n.emit("set page level targeting",{tags:e})}}}),(0,Yt.fo)("prebid.lexiconId",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1,2,3,4,5,6,7,8,9,10]},run:e=>{let{broker:t,getConfig:n}=e;const r=n("prebid.lexiconId.pid","0013300001f6OFRAA2");t.register("provide prebid config",(()=>({userSyncConfig:{userIds:[{name:"33acrossId",params:{pid:r},storage:{type:"html5",name:"33acrossId",expires:90,refreshInSeconds:28800}}]}})))},vendorIds:{gdpr:[58]}});const AA=e=>!(null==e);(0,Yt.fo)("prebid.optout",{disableIfNoAdsServable:!0,vendorIds:{gdpr:"N/A"},purposeIds:{gdpr:"N/A"},run:e=>{let{broker:t,log:n}=e;const r="_pbjs_id_optout",i="_pubcid_optout",o=AA(localStorage.getItem(r))||AA((0,je.ej)(r)),a=AA(localStorage.getItem(i))||AA((0,je.ej)(i));n("pbjsOptOut:",o),n("pubcidOptout:",a);const s=Object.entries({pbjsOptout:o,pubcidOptout:a}).reduce(((e,t)=>{let[n,r]=t;return r?{...e,[n]:r}:e}),{});(0,Fe.xb)(s)||t.register("call for page analytics",(()=>({...s})))}}),(0,Yt.fo)("bidders.mediagrid.skin",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r,win:i}=e;const o=n("plugins.mediagrid.skin.minWidth",1224),a=n("plugins.mediagrid.skin",PA);if(r("config:",{minWidth:o,adUnits:a}),i.innerWidth<o)return void r("bailing, viewport width too small:",i.innerWidth);const s=a.flatMap((e=>{let{bids:t}=e;return t.map((e=>{let{params:{uid:t}}=e;return t}))}));r("known skins:",s);const d=new Set(s);t.register("provide prebid adUnits",(()=>a)),t.register("prebid reduce bidderSettings",(e=>(e.grid||(e.grid={}),e.grid.adserverTargeting||(e.grid.adserverTargeting=[]),e.grid.adserverTargeting.push({key:"hb_skin",val:e=>{const t=c[e.requestId];return d.has(t)}}),e)));const c={};t.on("prebid loaded",(e=>{e.onEvent("bidRequested",(e=>{let{bidderCode:t,bids:n}=e;r("bidRequested",n),"grid"===t&&n.forEach((e=>{let{bidId:t,params:{uid:n}}=e;c[t]=n}))}))}))},vendorIds:{gdpr:[686]}});const PA=[{code:"billboard",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"grid",params:{uid:344499}}]}];function xA(e,t,n,r){try{e.__yb_pkg_version="3eec2a79-9905-4dbe-bb82-cd8bdf45e73d"}catch(t){}try{void 0!==e.__yb_tz_hour_offset?D=e.__yb_tz_hour_offset:(M=new Date,L=new Date(M.toLocaleString("en-US",{timeZone:"UTC"})),D=(new Date(M.toLocaleString("en-US",{timeZone:"America/New_York"})).getTime()-L.getTime())/36e5,e.__yb_tz_hour_offset=D)}catch(t){e.__yb_tz_hour_offset=D=-5}var i,o,a,s,d,c,l,u,p,f,h,g,m,v,y,b,_,w,T,I,S,k,C,E,A,P,x,O,D,R=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],M={"1_0010":"01","1_0011":"02","1_0020":"03","1_0021":"04","1_0110":"05","1_0111":"06","1_0120":"07","1_0121":"08","1_0310":"09","1_0311":"0a","1_0320":"0b","1_0321":"0c","1_0610":"0d","1_0611":"0e","1_0620":"0f","1_0621":"0g","1_0810":"0h","1_0811":"0i","1_0820":"0j","1_0821":"0k","2_0000":"19","2_0001":"1a","2_0002":"1b","2_000z":"1c","2_0030":"1d","2_0031":"1e","2_0032":"1f","2_003z":"1g","2_0100":"1h","2_0101":"1i","2_0102":"1j","2_010z":"1k","2_0130":"1l","2_0131":"1m","2_0132":"1n","2_013z":"1o","2_0300":"1p","2_0301":"1q","2_0302":"1r","2_030z":"1s","2_0330":"1t","2_0331":"1u","2_0332":"1v","2_033z":"1w","2_0600":"1x","2_0601":"1y","2_0602":"1z","2_060z":"20","2_0630":"21","2_0631":"22","2_0632":"23","2_063z":"24","2_0800":"25","2_0801":"26","2_0802":"27","2_080z":"28","2_0830":"29","2_0831":"2a","2_0832":"2b","2_083z":"2c","1_0z10":"3l","1_0z11":"3m","1_0z20":"3n","1_0z21":"3o","2_0z00":"3x","2_0z01":"3y","2_0z02":"3z","2_0z0z":"40","2_0z30":"41","2_0z31":"42","2_0z32":"43","2_0z3z":"44"},N={gpt:0,amp:1,video:2,mobile:3,gpt_lite:4,adx_tag:5},U={out_of_page:0,anchor:1,app_open:2,banner:3,instream_audio:4,instream_video:5,interstitial:6,native_advance:7,rewarded:8,others:35},L={desktop:0,smartphone:1,tablet:2,connecttv:3,others:35},j=(e={ios:0,android:1,macos:2,windows:3,others:35},{chrome:0,safari:1,edge:2,others:35});function B(e,t){return-1!==e.indexOf(t)}function q(e,t){return e.some((function(e){return e.brand===t}))}try{return"u"===t?[]:(o=function(e,t){if(void 0===(e=N[e]))throw new Error;return t=void 0!==U[t="top_anchor"!==t&&"bottom_anchor"!==t?t:"anchor"]?U[t]:U.others,{rt:R[e],ivf:R[t]}}("gpt",n),i||(O=function(){var e,t=(t=(t=window.navigator)&&t.userAgent)||"",n=(n=(n=window.navigator)&&n.userAgentData)||null;return{os:B(e=t,"Win")?"windows":B(e,"like Mac")?"ios":B(e,"Mac")?"macos":B(e,"Android")?"android":"others",dc:function(e){return B(e,"iPad")||B(e,"Tablet")||B(e,"Android")&&!B(e,"Mobile")||B(e,"Silk")}(e=t)?"tablet":function(e){return B(e,"iPod")||B(e,"iPhone")||B(e,"Android")||B(e,"IEMobile")}(e)?"smartphone":function(e){return B(e,"Roku")||B(e,"SMART-TV")||B(e,"SmartTV")||B(e,"NetCast")||B(e,"crkey")}(e)?"connecttv":"desktop",browser:function(e,t){return t=function(e){if(e&&e.brands){if(q(e.brands,"Opera"))return"opera";if(q(e.brands,"Microsoft Edge"))return"edge";if(q(e.brands,"Chrome"))return"chrome"}return null}(t),t||(B(e,"OPR/")||B(e,"Opera")?"others":B(e,"Edg")?"edge":B(e,"Firefox")?"others":B(e,"Chrome")?"chrome":B(e,"Safari")||B(e,"iPad")||B(e,"iPhone")||B(e,"iphone")?"safari":"others")}(t,n)}}(),P=void 0!==j[O.browser]?j[O.browser]:j.others,x=void 0!==e[O.os]?e[O.os]:e.others,O=void 0!==L[O.dc]?L[O.dc]:L.others,i={dc:R[O],os:R[x],browser:R[P]}),a=i,s=o.rt,d=o.ivf,c=a.dc,l=a.os,u=a.browser,f=function(e,t){if(e)return["0"];for(var n=Math.floor(1e3*Math.random()+1),r=[],i=0,o=0;o<t.length;++o){for(var a=1,s=t[o],d=0,c=0;c<s.length;c++)if(n<=(d+=s[c])){a=c+1;break}1<a&&0<i&&(a=a+i-1),i+=t[o].length;var l=R[a];for(c=0;c<r.length;++c)if(r[c]===l){c=-1;break}-1!==c&&r.push(l)}return r}(p="b"===t,[[900,10,10,10,10,10,10,10,10,10,10],[900,20,20,20,20,20]]),E=D,E=(new Date).getTime()+36e5*E,A=parseInt(E/36e5,10)%24,h=[[1,0],[3,24],[6,32]].map((function(e){return R[Math.floor(A/e[0])+e[1]]})),v=s,y=d,_=l,w=u,T=f,I=h,S=[],"0"===(b=c)||"3"===b?(w=M["2_"+v+y+b+w])&&S.push(w):(w=M["1_"+v+y+b+_])&&S.push(w),k=[],C=[],S.forEach((e=>{k.push("-"+e);for(var t=0;t<T.length;++t){var n=e+T[t];k.push(n),I.forEach((e=>{C.push(n+e)}))}})),g={short:k,full:C},m=[],m=p?[{key:"in2w_key20",values:g.full}]:[{key:"in2w_key16",values:g.short},{key:"in2w_key20",values:g.full}],r&&r.length&&m.push({key:"in2w_key21",values:[function(e){var t,n,r,i=e,o=[],a=1e5,s=1,d=1e5,c=1;for(t in i="fluid"===e||"number"==typeof i[0]&&"number"==typeof i[1]?[e]:i)"fluid"===i[t]?o.push(i[t]):((n=i[t][0])<a&&(a=n),s<n&&(s=n),(r=i[t][1])<d&&(d=r),c<r&&(c=r),o.push(n+"x"+r));o.sort(((e,t)=>e<t?-1:1)),e=o.length;var l=(o.push(a),o.push(s),o.push(d),o.push(c),o.push(e),o.join(","));try{if(!l.length)return"0";let e=305419896;for(let t=0;t<l.length;++t)e^=(e<<5)+(e>>2)+l.charCodeAt(t)&4294967295;return(e<0?4294967296+e:e)+""}catch(e){return"-1"}}(r)]}),m)}catch(t){return[{key:"in2w_key20",values:["4p10","4p1o","4p1w"]}]}}(0,Yt.fo)("page.responsiveness",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:e=>{let t,{broker:n,log:r}=e,i=0,o=Date.now(),a=document.hasFocus();__webpack_require__.g.addEventListener("blur",(()=>{r("blur event received, halting monitoring"),a=!1,t&&clearTimeout(t)})),__webpack_require__.g.addEventListener("focus",(()=>{r("focus event received, restarting monitoring"),a=!0,o=Date.now(),s()})),n.register("call for page-unload",(()=>({mut:i})));const s=()=>{if(!a)return;let e=Date.now();i=Math.max(i,e-o-1e3),o=e,r("max delay",i),t=setTimeout(s,1e3)};s()}}),(0,Yt.fo)("bidders.criteoV2",{vendorIds:{gdpr:[91]},purposeIds:{gdpr:[1]},disableIfNoAdsServable:!0,run:e=>{let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.criteo.v2.networkId",10352);let o=n("plugins.bidders.criteo.v2.display",{});const{width:a}=(0,je.ap)();o=a>1580&&o.wideSkiesAdUnits?{...o.adUnits,...o.wideSkiesAdUnits}:o.adUnits;const s=Object.entries(o).map((e=>{let[t,n]=e;return((e,t)=>({code:e,bids:[{bidder:"criteo",params:{networkId:i,publisherSubId:e}}],mediaTypes:{banner:{sizes:t}}}))(t,n)}));r("adUnits",s),t.register("provide prebid adUnits",(()=>s)),t.register("prebid reduce bidderSettings",(e=>(e.criteo||(e.criteo={}),e.criteo.storageAllowed=!0,e)))}}),(0,Yt.fo)("fbWebview",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run(e){let{broker:t,getConfig:n,doc:r,win:i}=e;const o=n("fbWebview.useReferrer",!1),a=r.referrer.includes("facebook.com"),s=i.navigator.userAgent;(s.includes("FBAV")||s.includes("FBAN")||o&&a)&&t.emit("set page level targeting",{platform:"FBOS"})}}),(0,Yt.fo)("bidders.unruly",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[36]},run(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.unruly.adUnits",n("plugins.bidders.rhythmOne.adUnits",{}));r(i);const o=new Di(n("slotDescriptions.initial",{})),a=Object.entries(i).reduce(((e,t)=>{let[n,{placementId:i,siteId:a,sizes:s=o.getSizes(n)}]=t;return s?[...e,{code:n,sizes:s,mediaTypes:{banner:{sizes:s}},bids:[{bidder:"unruly",params:{siteId:a||i}}]}]:(r(`no adDescription for pos: ${n}`),e)}),[]);r({adUnits:a}),t.register("provide prebid adUnits",(()=>a))}}),(0,Yt.fo)("bidders.unruly.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[36]},run(e){let{broker:t,getConfig:n,log:r}=e;t.register("provide video adUnits",(async(e,t)=>{const i="jwplayer"===e?e:t?"autoplay":"ctp",o=n(`plugins.bidders.unruly.video.adUnits.${i}`,n(`plugins.bidders.rhythmOne.video.adUnits.${i}`));return r({adUnitName:i,siteId:o}),o&&{bids:[{bidder:"unruly",params:{siteId:o}}]}}))}}),(0,Yt.fo)("intowow",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:e=>{let{broker:t,log:n,getConfig:r,win:i}=e;const o=r("plugins.intowow.optRatio",.3),a=r("plugins.intowow.trafficType",Math.random()<o?"o":"b"),s="o"===a?{intowow_optimized:["true"]}:{intowow_optimized:["false"]};n("setting page level targeting",s),t.emit("set page level targeting",s),t.register("get tags",(e=>{let{slot:{pos:t,size:r}}=e;n("get tags",t,r);const o=xA(i,a,"banner",r).reduce(((e,t)=>{let{key:n,values:r}=t;return{...e,[n]:r}}),{});return n("targeting",t,o),o})),t.register("get video tags",(e=>{let{pos:t,screen:{width:r,height:o}}=e;const s=xA(i,a,"instream_video",[[r,o]]).reduce(((e,t)=>{let{key:n,values:r}=t;return{...e,[n]:r}}),{});return n("targeting",t,s),{cust_params:s}}))}});const OA=(0,y.x)("processQueue"),DA=b.ZP.broker("processQueue");function RA(e){if(function(e){return"object"==typeof e&&null!==e&&"string"==typeof e.scope}(e))!function(e){OA("api item",e),DA.emit("api message",e.scope,e.data)}(e);else if(function(e){const{adverts:t}=__webpack_require__.g;return Array.isArray(e)&&3===e.length&&"FacadeQueueItem"===e[0]&&"function"==typeof t[e[1]]&&Array.isArray(e[2])}(e))!function(e){const{adverts:t}=__webpack_require__.g,[,n,r]=e;OA("calling",n,r);try{t[n](...r)}catch(e){OA.error(e)}}(e);else if("function"==typeof e)try{e()}catch(t){OA.error("error processing item:",e,t)}else OA.error("unsupported task type:",e)}Object.assign(__webpack_require__.g.adverts,e);const MA=St;__webpack_require__.g.adverts.startTime=m.B,__webpack_require__.g.adListLoader=it,__webpack_require__.g.adsDescriptions=Dt,__webpack_require__.g.adsRenderer=Rt,__webpack_require__.g.DfpServer=Mt,__webpack_require__.g.adsTrackers={getRequestedAds:MA},__webpack_require__.g.AdIntegrator=Nt,__webpack_require__.g.AdBehaviour=t,__webpack_require__.g.AdImpression=Zt(),__webpack_require__.g.AdEvents=Gt(),b.ZP.broker("molEntry").register("call for page analytics",(()=>({configVersion:(0,v.U2)("__generated.commit.sha"),bundle:"mol",cmVersion:(0,v.U2)("__generated.rulesJs.version"),cmCluster:(0,v.U2)("__generated.rulesJs.cluster")})));const NA=(e,t,n={})=>Object.entries(e).reduce(((e,[n,r])=>{const i=(t?t+".":"")+n;if("default"===n)e[t]=r;else if("function"==typeof r)e[i]=r;else{if(r)return NA(r,i,e);console.warn(`Plugin "${i}" does not export anything. Check the way it's being imported in to the project.`)}return e}),n),UA=Object.assign({},n,NA(g)),LA=["api","site","adsFree","message-trace","conditionalEnable","imageGallery","adListLoader","scriptLoader","prebid","pageVisibility","runtimeMessages","sticky.mpus","sticky.banner","version","skins","performance","nonAdServable","smartScheduler","messagePluginsFromCreatives","slots.descriptions","conditionalLoad","analytics.coreMetrics","analytics.reportPlugins","takeovers.videowallpaper","adPageType","slotDefinition","slots.delayMount","userId","domain","page.placement","slots.display-handlers.skies",...(0,v.U2)("plugins.enabled",[])];async function jA(){await async function(e){let{plugins:t=rn,context:n={},mandatory:r=on,messageBus:i}=e;t={...t,...gn((0,Yt.uM)())},nn=[],en=i,tn=en.broker("plugin-manager"),await hn(t,n),tn.emit("plugins initialized"),tn.register("get all plugins",(()=>t));for(const e of r)fn(t,e,n);const o=dn.length?await async function(e){const t=Jt(),n=t.map((t=>[t,e[t]])).filter((e=>{let[,t]=e;return t})),r=t.map((t=>[t,e[t]])).filter((e=>{let[,t]=e;return!t})).map((e=>{let[t]=e;return t})),i=(await Promise.all(n.map((async e=>{let[t,n]=e;return await ln(t,n)&&t})))).filter((e=>e));return(0,v.t8)("plugins.enabled",[...i,...r]),i}(t):Jt();for(const e of o)fn(t,e,n);tn.emit("plugins enabled",nn),en.start()}({plugins:UA,messageBus:b.ZP,context:gh}),Object.assign(__webpack_require__.g.adverts,e),function(){const e=window.adverts,t=Array.isArray(e.queue)?e.queue:[];for(OA("There are",t.length,"items on the queue"),window.__dmgCmp=window.__dmgCmp||[];window.__dmgCmp.length;)RA(window.__dmgCmp.shift());for(window.__dmgCmp.push=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>RA(e)))};t.length;)RA(t.shift());e.queue={push(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>RA(e)))}}}()}(0,v.t8)("plugins.enabled",LA),(0,v.t8)("tcfv2.uuid.useRtaId",!0);const BA=(0,v.U2)("cwv.barriers.global","ads");BA?DM.later(BA,jA):jA()})()})();
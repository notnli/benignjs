(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6890],{56029:function(e,t,r){var n=r(33448);e.exports=function(e,t,r){for(var o=-1,i=e.length;++o<i;){var a=e[o],c=t(a);if(null!=c&&(void 0===s?c===c&&!n(c):r(c,s)))var s=c,l=a}return l}},53325:function(e){e.exports=function(e,t){return e>t}},78565:function(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e,r){return null!=e&&t.call(e,r)}},70433:function(e){e.exports=function(e,t){return e<t}},10107:function(e){e.exports=function(e,t,r,n,o){return o(e,(function(e,o,i){r=n?(n=!1,e):t(r,e,o,i)})),r}},18721:function(e,t,r){var n=r(78565),o=r(222);e.exports=function(e,t){return null!=e&&o(e,t,n)}},66604:function(e,t,r){var n=r(89465),o=r(47816),i=r(67206);e.exports=function(e,t){var r={};return t=i(t,3),o(e,(function(e,o,i){n(r,o,t(e,o,i))})),r}},6162:function(e,t,r){var n=r(56029),o=r(53325),i=r(6557);e.exports=function(e){return e&&e.length?n(e,i,o):void 0}},53632:function(e,t,r){var n=r(56029),o=r(70433),i=r(6557);e.exports=function(e){return e&&e.length?n(e,i,o):void 0}},54061:function(e,t,r){var n=r(62663),o=r(89881),i=r(67206),a=r(10107),c=r(1469);e.exports=function(e,t,r){var s=c(e)?n:a,l=arguments.length<3;return s(e,i(t,4),r,l,o)}},14300:function(e,t,r){"use strict";r.d(t,{Y:function(){return s}});var n=r(67294),o=r(11549),i=r(53931),a=r(59797);const c=[],s=()=>(e=>{var t,r,s,l;const u=(0,o.w)();(0,n.useEffect)((()=>{u("DIGITAL_REMODEL_PLP_EXPERIENCE_TYPE_ALTERNATE_ENABLED")}),[u]);const d=(0,a.r)(e),p=null===(t=d())||void 0===t||null===(r=t.metadata)||void 0===r?void 0:r.experience_type,f=(0,i.T)().DIGITAL_REMODEL_PLP_EXPERIENCE_TYPE_ALTERNATE_ENABLED,v=null===(s=d())||void 0===s||null===(l=s.metadata)||void 0===l?void 0:l.experience_type_alternate,_=f&&v?v:p;return(0,n.useMemo)((()=>_&&"string"===typeof _?_.split(","):c),[_])})()},21699:function(e,t,r){"use strict";r.d(t,{q:function(){return i}});var n=r(67294),o=r(53945);const i=()=>{const{preferredStoreZipCode:e,queryState:t}=(0,o.oJ)();return(0,n.useMemo)((()=>({zipCode:e,queryState:t})),[t,e])}},62193:function(e,t,r){"use strict";r.d(t,{p:function(){return I}});var n=r(59499),o=r(18721),i=r.n(o),a=r(11163),c=r(67294),s=r(46879),l=r(95252),u=r(67300),d=r(52683),p=r(44908),f=r.n(p),v=r(68697),_=r(62611),b=r(68714),m=r(51452),y=r(56050),O=r(21699),g=r(53945),P=r(96948);const j=(0,v.P1)(m.Ys,(e=>null===e||void 0===e?void 0:e.filter(b.y))),h=()=>{const{preferredStoreId:e,queryState:t}=(0,g.lo)(),{nearbyStoreIds:r,enabled:n}=(()=>{const{zipCode:e,queryState:t}=(0,O.q)(),[r,n]=(0,y.Z)({limit:P.Af,place:e}),o=r(j),i=(n.status===_.o.Success||n.status===_.o.Error)&&(t.status===_.o.Success||t.status===_.o.Error);return(0,c.useMemo)((()=>t.status!==_.o.Success&&t.status!==_.o.Error||e?{nearbyStoreIds:o,enabled:i}:{nearbyStoreIds:void 0,enabled:!0}),[t.status,e,o,i])})(),o=(0,c.useMemo)((()=>f()([e,...null!==r&&void 0!==r?r:[]]).filter(b.y)),[e,r]),i=n&&(t.status===_.o.Success||t.status===_.o.Error);return(0,c.useMemo)((()=>({storeIds:o,enabled:i})),[o,i])};var E=r(48332),w=r(64024);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e){const t=(t,r)=>{var n,o;const p=(()=>{const{asPath:e}=(0,a.useRouter)(),t=(0,s.bC)(),r=(0,s.MP)()||Boolean(t),{pricingStoreId:n,enabled:o}=(0,d.K)(),{storeIds:i,enabled:p}=h(),f=i.join(","),v=(0,l.k)()||"0",_=(0,u.ew)(e),{include_sponsored:b,enabled:m}=(0,w.f)(),y=(0,c.useMemo)((()=>({member_id:t,pricing_store_id:n,purchasable_store_ids:f,visitor_id:v,channel:"WEB",page:_,platform:(0,E.o$)(),include_sponsored_recommendations:b})),[b,t,_,n,f,v]),O=r&&o&&p&&m;return(0,c.useMemo)((()=>({variables:y,enabled:O})),[y,O])})(),f=Object.fromEntries(Object.entries(t).filter((([,e])=>null!=e))),v=S(S(S({},p.variables),f),{},{page:null!==(n=null!==(o=f.page_id)&&void 0!==o?o:f.page)&&void 0!==n?n:p.variables.page}),_=i()(r,"enabled")?Boolean((null===r||void 0===r?void 0:r.enabled)&&p.enabled):p.enabled;return e(v,S(S({},r),{},{enabled:_}))};return t.queryName=e.queryName,t}},50975:function(e,t,r){"use strict";r.d(t,{q:function(){return p}});var n=r(59499),o=r(69992),i=r(42234),a=r(62193),c=r(18409);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const u="@web/domain-product/get-guest-specific-recommendations-placement",{useQuery:d}=(0,o.J)({name:u,keyFn:e=>(void 0!==e.channel||void 0!==e.placement_id||void 0!==e.page||void 0!==e.visitor_id||void 0!==e.member_id)&&[u,e],queryFn:async e=>{const t=await(0,i.W)(),{data:r,ok:n,statusText:o}=await(0,c.r)({requestParams:l({effective_date:t},e)});var a;if(n)return null!==(a=null===r||void 0===r?void 0:r.data)&&void 0!==a?a:null;throw new Error(`${o}`)}}),p=(0,a.p)(d)},18409:function(e,t,r){"use strict";r.d(t,{r:function(){return s}});var n=r(59499),o=r(95052),i=r(47269),a=r(44350);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const s=e=>{const{fetchOptions:t,requestParams:r}=null!==e&&void 0!==e?e:{},{channel:s,placement_id:l,page:u,visitor_id:d,pricing_store_id:p,member_id:f,category_id:v,tcins:_,purchasable_store_ids:b,exclusions:m,offer_id:y,keyword:O,include_sponsored_recommendations:g,effective_date:P,fulfillment_types:j,brand_ids:h,resolve_to_first_variation_child:E,slingshot_component_id:w,platform:D,facet_ids:S}=null!==r&&void 0!==r?r:{},{apiKey:I,baseUrl:k,apis:{product:x}}=(0,a.config)().services.redskyAggregations;if(!s||!l||!u||!d)throw new Error("Required parameters not defined for general recommendations placement query");const q={category_id:v,channel:s,effective_date:P,include_sponsored_recommendations:g,key:I,keyword:O,member_id:f,offer_id:y,page:u,placement_id:l,pricing_store_id:p,purchasable_store_ids:b,exclusions:m,tcins:_,visitor_id:d,fulfillment_types:j,brand_ids:h,resolve_to_first_variation_child:E,slingshot_component_id:w,platform:D,facet_ids:S},L=i.Z.buildURLWithParams(new URL(x.endpointPaths.generalRecommendationsPlacementV1,k),q);return(0,o.G)(L,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({partialErrorTag:"get_general_recommendations_placement_partial_api_error",errorTag:"get_general_recommendations_placement_api_error",timerTag:"get_general_recommendations_placement_api_call"},t))}},238:function(e,t,r){"use strict";r.d(t,{g:function(){return i}});var n=r(41609),o=r.n(n);const i=e=>{if(o()(e)||!e)return;const t=e.split(";").map((e=>{var t;const[r,...n]=null!==(t=e.split(","))&&void 0!==t?t:[];return[r,null===n||void 0===n?void 0:n.join(",")]}));return Object.fromEntries(t)}},75196:function(e,t,r){"use strict";r.d(t,{y:function(){return s}});var n=r(59499),o=r(50975),i=r(238);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const s=async(e,t)=>{var r,n,a;if(!(null===t||void 0===t||null===(r=t.res)||void 0===r||null===(n=r.cdnMetadata)||void 0===n?void 0:n.isBot))return;const s=[],l=Object.values(null!==(a=null===e||void 0===e?void 0:e.slots)&&void 0!==a?a:{}),u=null===l||void 0===l?void 0:l.filter((e=>{var t,r,n,o,i,a,c,s,l,u;return("item or promotion carousel"===(null===(t=e.metadata)||void 0===t||null===(r=t.components)||void 0===r||null===(n=r[0])||void 0===n||null===(o=n.type_name)||void 0===o?void 0:o.toLowerCase())||"manual tcin carousel"===(null===(i=e.metadata)||void 0===i||null===(a=i.components)||void 0===a||null===(c=a[0])||void 0===c||null===(s=c.type_name)||void 0===s?void 0:s.toLowerCase()))&&"personalizedProducts"===(null===e||void 0===e||null===(l=e.content)||void 0===l||null===(u=l.container)||void 0===u?void 0:u.type)}));null===u||void 0===u||u.forEach((r=>{var n,a,l,u,d,p,f,v;const _=(0,i.g)(null===r||void 0===r||null===(n=r.content)||void 0===n||null===(a=n.container)||void 0===a||null===(l=a.keyValuePairs)||void 0===l?void 0:l.context),b={brand_ids:null===_||void 0===_?void 0:_.brandId,category_id:null===_||void 0===_?void 0:_.categoryId,fulfillment_types:null===_||void 0===_?void 0:_.fulfillmentId,offer_id:null===_||void 0===_?void 0:_.offerId,placement_id:null===_||void 0===_?void 0:_.placementId,slingshot_component_id:null===r||void 0===r||null===(u=r.metadata)||void 0===u||null===(d=u.components)||void 0===d||null===(p=d[0])||void 0===p?void 0:p.id,facet_ids:null===_||void 0===_?void 0:_.facetId};s.push(null===t||void 0===t?void 0:t.preloadInitialQuery(o.q,c(c({},b),{},{page:null===e||void 0===e||null===(f=e.metadata)||void 0===f||null===(v=f.seo_data)||void 0===v?void 0:v.page_id,include_sponsored_recommendations:!1,channel:"WEB",platform:"desktop",pricing_store_id:"3991",purchasable_store_ids:"",visitor_id:"0"})))})),await Promise.all(s)}}}]);
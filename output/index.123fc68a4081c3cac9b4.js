(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{25:function(t,e,i){t.exports=i(29)},29:function(t,e,i){"use strict";i.r(e);var s=i(2);const n=s.a.instance;i.p=n.urls.assetsBasePath+"/public/";var a=i(8),o=i(9),r=i.n(o),l=i(0);class h extends r.a{constructor(...t){super(...t),this._queuedScans=0,this._isScanning=!1}scan(){this._isScanning?this._queuedScans+=1:(this._isScanning=!0,super.scan(),this._isScanning=!1,this._queuedScans>0?(this._queuedScans-=1,this.scan()):this.publish(l.H))}}var c=i(1),d=i(5),u=i(4);const p=Symbol("INSTANCE"),g=Symbol("SINGELTONENFORCER");class m{constructor(t){if(t!==g)throw new Error("Instantiation failed: Use Depot.instance instead of new.");this.init()}static get instance(){return this[p]||(this[p]=new m(g)),this[p]}init(){const t=s.a.instance;t.thirdparty&&t.thirdparty.depot&&t.thirdparty.depot.apiUrl?this.apiUrl=t.thirdparty.depot.apiUrl:console.error("Depot requires apiUrl for correct instantiation.")}getBookmarks(){const t=this.apiUrl+"/bookmarks";return new Promise((e,i)=>{this.fetchUrl(t,"GET").then(t=>{Array.isArray(t)?e(t):e([])}).catch(t=>i(t))})}deleteBookmarks(){const t=this.apiUrl+"/bookmarks";return new Promise((e,i)=>{this.fetchUrl(t,"DELETE").then(()=>{e()}).catch(t=>i(t))})}addBookmark(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("Depot addBookmark - missing valid documentId function param"));const e=`${this.apiUrl}/bookmarks/${t}`;return new Promise((t,i)=>{this.fetchUrl(e,"PUT").then(()=>{t()}).catch(t=>i(t))})}deleteBookmark(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("Depot deleteBookmark - missing valid documentId function param"));const e=`${this.apiUrl}/bookmarks/${t}`;return new Promise((t,i)=>{this.fetchUrl(e,"DELETE").then(()=>{t()}).catch(t=>i(t))})}fetchUrl(t,e="GET"){return fetch(t,{method:e,headers:{"Content-Type":"text/plain"}}).then(t=>200!==t.status?t.text().then(t=>{throw new Error(t)}).catch(e=>Promise.reject(new Error(`Depot fetchUrl - failed to get data from API, URL: ${t.url}, error: ${e.message}`))):"GET"===e?t.json():Promise.resolve())}}var y=i(12);class b{getItem(t){throw new Error("AbstractStorage - you have to implement the method getItem!")}setItem(t,e){throw new Error("AbstractStorage - you have to implement the method setItem!")}removeItem(t){throw new Error("AbstractStorage - you have to implement the method removeItem!")}}var f=i(11),w=i.n(f);class v{static getItem(t){if("string"==typeof t)return w.a.get(t)}static setItem(t,e,i=7){return"string"==typeof t&&void 0!==e&&(w.a.set(t,e,{expires:i}),!0)}static removeItem(t){return"string"==typeof t&&(w.a.remove(t),!0)}}class I extends b{constructor(t=7){super(),this.expires=t}getItem(t){return v.getItem(t)}setItem(t,e){return v.setItem(t,e,this.expires)}removeItem(t){return v.removeItem(t)}}class A{static getItem(t){if("string"!=typeof t)return;let e;try{const i=window.localStorage;i&&null!==i.getItem(t)&&(e=i.getItem(t))}catch(t){}return e}static setItem(t,e){if("string"!=typeof t||void 0===e)return!1;let i=!1;try{const s=window.localStorage;s&&(s.setItem(t,e),i=!0)}catch(t){}return i}static removeItem(t){if("string"!=typeof t)return!1;let e=!1;try{const i=window.localStorage;i&&(i.removeItem(t),e=!0)}catch(t){}return e}}class E extends b{getItem(t){return A.getItem(t)}setItem(t,e){return A.setItem(t,e)}removeItem(t){return A.removeItem(t)}}var S=i(14);class k extends b{getItem(t){return S.a.getItem(t)}setItem(t,e){return S.a.setItem(t,e)}removeItem(t){return S.a.removeItem(t)}}class C{constructor(t,e="session",i=7,s="polygon"){if("string"==typeof t&&t){switch(this.name=`${s}_${t}`,e){case"local":this.storage=new E;break;case"cookie":this.storage=new I(i);break;case"session":default:this.storage=new k}this.valueObject=this.getValueObject()}}getValueObject(){if(!this.name||!this.storage)return{};const t=this.storage.getItem(this.name);let e,i;return t&&(e=this.decodeBase64(t)),e&&(i=this.parseJson(e)),i||{}}reload(){this.valueObject=this.getValueObject()}updateStorage(){if(!this.name)return;const t=JSON.stringify(this.valueObject);let e;t&&(e=this.encodeBase64(t)),e&&this.storage.setItem(this.name,e)}encodeBase64(t){try{return window.btoa(encodeURIComponent(t))}catch(t){return}}decodeBase64(t){try{return decodeURIComponent(window.atob(t))}catch(t){return}}parseJson(t){if(t&&"string"==typeof t)try{return JSON.parse(t)}catch(t){return}}getItem(t){if("string"==typeof t)return this.valueObject[t]}setItem(t,e){if("string"!=typeof t||void 0===e)return!1;const i={};return i[t]=e,Object.assign(this.valueObject,i),this.updateStorage(),!0}removeItem(t){return"string"==typeof t&&(delete this.valueObject[t],this.updateStorage(),!0)}}const P=Symbol("INSTANCE"),L=Symbol("SINGELTONENFORCER");class T{constructor(t){if(t!==L)throw new Error("Instantiation failed: Use Bookmarks.instance instead of new.");this.depot=m.instance,this.localStorage=new C("bookmarks","local"),this._documentIds=[],this._updatedAt=null,this._syncedAt=null,this._isInitialized=!1,this.init()}static get instance(){return this[P]||(this[P]=new T(L)),this[P]}init(){const t=d.a.instance;if(!t.isLoggedIn||s.a.instance.disableBookmarks)return;const e=y.a.instance;t.isLoggedIn&&t.isNewLoggedIn&&this.reset();let i=t.isNewLoggedIn||"homepage"===e.route||"fuermich"===e.route||"bookmarks"===e.route;if(!t.isNewLoggedIn){this.loadDocumentIdsFromLocalStorage()&&!i&&(this.isInitialized=!0)}i=i||!this.isInitialized||!this.syncedAt,i&&this.loadDocumentIdsFromServer().then(()=>{this.isInitialized=!0}).catch(()=>{this.documentIds.length>0?this.isInitialized=!0:c.a.publish(l.w,{type:u.d})}),window.addEventListener("pageshow",()=>{this.reloadLocaLStorage(),Promise.resolve().then(()=>c.a.publish(l.z))})}loadDocumentIdsFromLocalStorage(){return!!Array.isArray(this.localStorage.getItem("documentIds"))&&(this.documentIds=this.localStorage.getItem("documentIds"),this._updatedAt=this.localStorage.getItem("updatedAt")||null,this._syncedAt=this.localStorage.getItem("syncedAt")||null,!0)}reloadLocaLStorage(){this.localStorage.reload(),this.loadDocumentIdsFromLocalStorage()}loadDocumentIdsFromServer(){return new Promise((t,e)=>{this.depot.getBookmarks().then(i=>{Array.isArray(i)?(this.documentIds=i,this._syncedAt=Date.now(),this.save(),t()):e(new Error("Bookmarks loadDocumentIdsFromServer - received invalid documentIds data from Depot"))}).catch(t=>{console.error(t.message),e(t)})})}reset(){this.documentIds=[],this._updatedAt=null,this._syncedAt=null,this.save()}save(){let t=this.localStorage.setItem("documentIds",this._documentIds);return this._updatedAt=Date.now(),t=t&&this.localStorage.setItem("updatedAt",this._updatedAt),t=t&&this.localStorage.setItem("syncedAt",this._syncedAt),t}add(t,e){if(!t||"string"!=typeof t||!e||"string"!=typeof e||!Array.isArray(this._documentIds))return Promise.reject(new Error("Bookmarks add - missing valid documentId and/or collection function param or bookmarks are not yet initialized"));return this._documentIds.indexOf(t)>-1?Promise.resolve():new Promise((e,i)=>{this.depot.addBookmark(t).then(()=>{this._documentIds.push(t);if(!this.save())throw new Error("Bookmarks add - error while updating data");return e()}).catch(t=>i(t))})}delete(t,e){if(!t||"string"!=typeof t||!e||"string"!=typeof e||!Array.isArray(this._documentIds))return Promise.reject(new Error("Bookmarks delete - missing valid documentId and/or collection function param or bookmarks are not yet initialized"));const i=this._documentIds.indexOf(t);return-1===i?Promise.resolve():new Promise((e,s)=>{this.depot.deleteBookmark(t).then(()=>{this._documentIds.splice(i,1);if(!this.save())throw new Error("Bookmarks delete - error while updating data");return e()}).catch(t=>s(t))})}deleteAll(t){return t&&"string"==typeof t?new Promise((t,e)=>{this.depot.deleteBookmarks().then(()=>{this._documentIds=[];if(!this.save())throw new Error("Bookmarks deleteAll - error while updating data");return t()}).catch(t=>e(t))}):Promise.reject(new Error("Bookmarks deleteAll - missing valid collection function param"))}contains(t,e){return!!(t&&"string"==typeof t&&e&&"string"==typeof e&&Array.isArray(this._documentIds))&&-1!==this._documentIds.indexOf(t)}get documentIds(){return Array.isArray(this._documentIds)?this._documentIds:[]}set documentIds(t){if(!Array.isArray(t))return;let e=!this.isInitialized||!Array.isArray(this._documentIds)||this._documentIds.length!==t.length;e||t.forEach((t,i)=>{this._documentIds.indexOf(t)!==i&&(e=!0)}),e&&(this._documentIds=t,Promise.resolve().then(()=>c.a.publish(l.z)))}get isInitialized(){return this._isInitialized}set isInitialized(t){this._isInitialized!==!!t&&(this._isInitialized=!!t,this._isInitialized&&c.a.publish(l.x))}get updatedAt(){return this._updatedAt}get syncedAt(){return this._syncedAt}}var _=i(3),O=i(10);class x{get id(){return null}toObject(){const t={};return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).forEach(e=>{"function"!=typeof this[e]&&(t[e]=this[e])}),t}}class N extends x{constructor(t,e,i){super(),this._documentId=t,this._collection=e,this._isBookmarked=!!i}get id(){return O.b}get documentId(){return this._documentId}get isBookmarked(){return this._isBookmarked}}var B=i(13);const D=Symbol("INSTANCE"),U=Symbol("SINGELTONENFORCER");class R{constructor(t){if(t!==U)throw new Error("Instantiation failed: Use OverlayHandler.instance instead of new.");this.init()}static get instance(){return this[D]||(this[D]=new R(U)),this[D]}init(){this.overlays=[],c.a.subscribe(l.gb,t=>this.onOverlayOpened(t),this),c.a.subscribe(l.eb,t=>this.onOverlayClosed(t),this),c.a.subscribe(l.ab,()=>this.onPageResume(),this),this.updateState()}onOverlayOpened(t){t.id&&Array.isArray(this.overlays)&&!this.overlays.find(e=>e.id===t.id)&&(this.overlays.push(t),this.updateState())}onOverlayClosed(t){this.overlays=this.overlays.filter(e=>e.id!==t.id),this.updateState()}updateState(){document.documentElement.classList.toggle("overlay-open",this.isScrollingPrevented),c.a.publish(l.fb,this.currentOverlay)}onPageResume(){this.updateState()}get currentOverlay(){return this.overlays[this.overlays.length-1]||null}get isScrollingPrevented(){return this.overlays.filter(t=>t.preventScrolling).length>0}}class M{constructor(t,e,i){this.headline=t,this.description=e,this.callback="function"==typeof i?i:null,this.boundOnDescriptionTriggerClick=t=>this.onDescriptionTriggerClick(t),this.boundOnCloseIconClick=()=>this.onCloseIconClick(),this.init()}init(){if(this.el=B.a.createElementByPrototypeId(this.prototypeId),!this.el)return;this.closeIcon=this.el.querySelector('[data-notification-el="closeIcon"]'),this.closeIcon.addEventListener("click",this.boundOnCloseIconClick);this.el.querySelector('[data-notification-el="headline"]').innerHTML=this.headline;const t=this.el.querySelector('[data-notification-el="description"]');this.description?(t.innerHTML=this.description,this.descriptionTrigger=t.querySelector('[data-notification-el="trigger"]'),this.descriptionTrigger&&this.descriptionTrigger.addEventListener("click",this.boundOnDescriptionTriggerClick)):(t.parentNode.removeChild(t),this.closeIcon.parentNode.classList.add("self-center"))}show(){_.a.isApp||null!==R.instance.currentOverlay?this.container=document.querySelector('[data-notification-el="container"][data-notification-position~="overlay"]'):this.container=document.querySelector('[data-notification-el="container"][data-notification-position~="default"]'),this.container||(this.container=document.body),this.container.appendChild(this.el),this.el.style.opacity=0,c.a.toggleElementVisibility(this.el,!0),setTimeout(()=>{this.el.style.opacity=1},0)}hide(){c.a.toggleElementVisibility(this.el,!1),this.destroy()}onDescriptionTriggerClick(t){t.preventDefault(),this.descriptionTrigger.blur(),"function"==typeof this.callback&&this.callback(),c.a.publish(l.Y)}onCloseIconClick(){c.a.publish(l.Y)}destroy(){this.closeIcon.removeEventListener("click",this.boundOnCloseIconClick),this.descriptionTrigger&&this.descriptionTrigger.removeEventListener("click",this.boundOnDescriptionTriggerClick),this.callback=null,this.el.parentNode&&this.el.parentNode.removeChild(this.el)}get prototypeId(){return""}}class j extends M{get prototypeId(){return"prototype-notification-failure"}}class V extends M{get prototypeId(){return"prototype-notification-success"}}const z=Symbol("INSTANCE"),q=Symbol("SINGELTONENFORCER");class F{constructor(t){if(t!==q)throw new Error("Instantiation failed: Use NotificationService.instance instead of new.");this.queue=null,this.currentNotification=null,this.notificationTimeoutId=null,this.viewLookup={},this.viewLookup[u.k]=V,this.viewLookup[u.j]=j,this.boundOnHideNotificationTriggered=()=>this.hideCurrentNotification(),this.init()}static get instance(){return this[z]||(this[z]=new F(q)),this[z]}init(){c.a.subscribe(l.Y,this.boundOnHideNotificationTriggered)}addNotification(t){if(!t||!this.viewLookup[t.type]||!t.headline)return;const e=new this.viewLookup[t.type](t.headline,t.description,t.callback);this.queue={view:e,duration:Number.isInteger(t.duration)?t.duration:4},this.showNextNotification()}showNextNotification(){void 0!==this.notificationTimeoutId&&clearTimeout(this.notificationTimeoutId),this.currentNotification?this.hideCurrentNotification():this.queue&&(this.queue.view&&(this.currentNotification=this.queue.view,this.queue.duration&&(this.notificationTimeoutId=setTimeout(()=>{this.hideCurrentNotification()},1e3*this.queue.duration)),this.currentNotification.show()),this.queue=null)}hideCurrentNotification(){void 0!==this.notificationTimeoutId&&clearTimeout(this.notificationTimeoutId),this.currentNotification&&(this.currentNotification.hide(),this.currentNotification=null),setTimeout(()=>{this.showNextNotification()},200)}}class W{constructor(){this.documentId=null,this.collection=null,this.bookmarks=T.instance,this.boundNotificationCallback=()=>this.notificationCallback()}execute(t,e){if(!d.a.instance.isLoggedIn)return c.a.publish(l.y),void this.destroy();this.documentId=t,this.collection=e,this.addBookmark()}addBookmark(){this.bookmarks.add(this.documentId,this.collection).then(()=>{c.a.publish(l.s,this.documentId,this.collection);const{urls:t}=s.a.instance,e=t&&t.user&&t.user.bookmarks?t.user.bookmarks:"";if(F.instance.addNotification({type:u.k,headline:"Zur Merkliste hinzugefügt",description:`Ihr Artikel wurde gespeichert. <a href="${e}">Zur Merkliste</a>`}),_.a.isApp){const t=s.a.instance;t.app&&t.app.pageContext&&t.app.pageContext.documentId===this.documentId&&t.app.pageContext.collection===this.collection&&c.a.publish(l.X,new N(this.documentId,this.collection,!0))}this.destroy()}).catch(()=>{c.a.publish(l.w,{type:u.a,documentId:this.documentId,collection:this.collection}),F.instance.addNotification({type:u.j,headline:"Fehler",description:'Beim Speichern des Artikels ist ein Fehler aufgetreten. <a href="#" data-notification-el="trigger">Erneut versuchen</a>',callback:this.boundNotificationCallback})})}notificationCallback(){setTimeout(()=>{this.addBookmark()},1e3)}destroy(){this.documentId=null,this.collection=null,this.bookmarks=null,this.boundNotificationCallback=null}}var G=i(6);class ${execute(t){Array.isArray(t)?!_.a.isApp||_.a.appVersion<G.a.instance.minAudioPlaylistVersion||"function"!=typeof G.a.instance.triggerAddToAudioPlaylist||0===t.length||(d.a.instance.isLoggedIn?G.a.instance.triggerAddToAudioPlaylist(t):c.a.publish(l.jb)):console.warn("AddToPlaylistController - missing or malformed parameter `clips`",t)}}class H extends x{get id(){return O.i}}class J{execute(){_.a.isApp&&(this.initBookmark(),c.a.publish(l.X,new H))}initBookmark(){const t=s.a.instance;if("article"===y.a.instance.route&&t.app&&t.app.pageContext&&t.app.pageContext.documentId&&t.app.pageContext.collection){const e=T.instance;c.a.publish(l.X,new N(t.app.pageContext.documentId,t.app.pageContext.collection,e.contains(t.app.pageContext.documentId,t.app.pageContext.collection)))}}}var Z=i(7);const K=["emptied","loadstart","pause","play","playing","progress","ratechange","timeupdate","volumechange","waiting"],Q="MODE_DEFAULT",X="MODE_AUTOPLAY",Y="MODE_RESUME",tt=new C("audio","local");let et=null,it=!1;const st={mode:Q,_clip:null,_currentTime:0,_playbackRate:1,_volume:1,buffered:[],duration:0,isPlaying:!1,isLoading:!1,isPaused:!0,isEnded:!1,isRestored:!1,init(){this.boundOnStateChanged=()=>this.onStateChanged(),this.boundOnCanPlay=t=>this.onCanPlay(t),this.boundOnLoadedMetadata=t=>this.onLoadedMetadata(t),this.boundOnWindowStorage=t=>this.onWindowStorage(t),this.restoreFromLocalStorage()},onStateChanged(){this.updateStore(),this.updateLocalStorage()},onLoadedMetadata(){et.removeEventListener("loadedmetadata",this.boundOnLoadedMetadata),this.onCanPlay()},onCanPlay(){et.removeEventListener("canplay",this.boundOnCanPlay),window.removeEventListener("storage",this.boundOnWindowStorage),Z.a.isMobileSafari||_.a.isIOSApp||this.restoreAudio(),et.play().then(()=>{(Z.a.isMobileSafari||_.a.isIOSApp)&&this.restoreAudio(),it=!1}).catch(()=>{this.mode===X&&(this.mode=Y,this.isRestored=!0,it=!0,this.detachAudio(),this.onStateChanged())})},onWindowStorage(t){t.key===tt.name&&(window.removeEventListener("storage",this.boundOnWindowStorage),this.mode=Y,this.isRestored=!0,this.detachAudio(),this.updateStore())},updateStore(){let t=et&&et.duration?et.duration:0;!t&&this.clip&&Number.isInteger(this.clip.duration)&&(t=this.clip.duration/1e3);const e=[];if(et&&et.buffered&&et.buffered.length>0)for(let t=0;t<et.buffered.length;t++)e.push({start:et.buffered.start(t),end:et.buffered.end(t)});!it&&et&&et instanceof HTMLAudioElement&&(this._currentTime=et.currentTime,this._playbackRate=et.playbackRate,this._volume=et.volume),this.buffered=e,this.duration=t,this.isLoading=et&&et.readyState<HTMLMediaElement.HAVE_FUTURE_DATA&&!et.ended,this.isPlaying=et&&!et.paused&&!et.ended&&!this.isLoading,this.isEnded=et&&et.ended,this.isPaused=!et||et.paused},updateLocalStorage(){tt.setItem("clip",this.clip),tt.setItem("currentTime",this.currentTime),tt.setItem("volume",this.volume),tt.setItem("playbackRate",this.playbackRate),tt.setItem("isPlaying",et&&!et.paused&&!et.ended),tt.setItem("updatedAt",(new Date).getTime())},play(){if(!this.clip)return;let t;switch(this.mode){case X:t=this.clip.autoplayUrl?this.clip.autoplayUrl:this.clip.audioUrl;break;case Y:t=this.clip.resumeUrl?this.clip.resumeUrl:this.clip.audioUrl;break;case Q:default:t=this.clip.audioUrl}t&&(et||this.attachAudio(),this.isRestored=!1,et.src!==t?((Z.a.isMobileSafari||_.a.isIOSApp)&&et.addEventListener("loadedmetadata",this.boundOnLoadedMetadata),et.addEventListener("canplay",this.boundOnCanPlay),it=!0,et.src=t):(et.play(),it=!1))},pause(){et&&this.isPlaying&&"function"==typeof et.pause&&et.pause()},clear(){this._clip=null,this._currentTime=0,et&&this.detachAudio(),this.onStateChanged()},attachAudio(){et||(et=document.createElement("audio"),(Z.a.isMobileSafari||_.a.isIOSApp)&&et.addEventListener("loadedmetadata",this.boundOnLoadedMetadata),et.addEventListener("canplay",this.boundOnCanPlay),K.forEach(t=>{et.addEventListener(t,this.boundOnStateChanged)}),document.body.appendChild(et))},detachAudio(){K.forEach(t=>{et.removeEventListener(t,this.boundOnStateChanged)}),et.removeEventListener("loadedmetadata",this.boundOnLoadedMetadata),et.removeEventListener("canplay",this.boundOnCanPlay),et.remove(),et=null},restoreFromLocalStorage(){const t=tt.getItem("playbackRate");if("number"!=typeof t||Number.isNaN(t)||(this._playbackRate=t),!tt.getItem("clip"))return void this.clearLocalStorage();if((new Date).getTime()-(tt.getItem("updatedAt")||0)>108e5)this.clearLocalStorage();else{this._clip=tt.getItem("clip");const t=tt.getItem("currentTime"),e=tt.getItem("volume");this.mode=tt.getItem("isPlaying")?X:Q,"number"!=typeof t||Number.isNaN(t)||(this._currentTime=t),"number"!=typeof e||Number.isNaN(e)||(this._volume=e),this.updateStore(),this.mode===X&&(window.addEventListener("storage",this.boundOnWindowStorage),this.play())}},restoreAudio(){et.currentTime=this._currentTime,et.volume=this._volume,et.playbackRate=this._playbackRate},reloadLocaLStorage(){tt.reload(),this.restoreFromLocalStorage()},clearLocalStorage(){tt.removeItem("clip"),tt.removeItem("isPlaying"),tt.removeItem("currentTime"),tt.removeItem("volume"),tt.removeItem("updatedAt")},get clip(){return this._clip},set clip(t){t&&t.id&&t.audioUrl&&(this.mode=Q,it=!0,et&&et.src&&(et.src=""),this._currentTime=0,this._clip={audioUrl:t.audioUrl,autoplayUrl:t.autoplayUrl,resumeUrl:t.resumeUrl,downloadUrl:t.downloadUrl||t.audioUrl,duration:t.duration||0,headline:t.headline||"",id:t.id,kicker:t.kicker||"",posterUrl:t.posterUrl||""},this.onStateChanged())},get currentTime(){return this._currentTime},set currentTime(t){const e=Math.max(parseFloat(t),0);Number.isNaN(e)||e>this.duration||(et?et.currentTime=e:this._currentTime=e)},get playbackRate(){return this._playbackRate},set playbackRate(t){const e=parseFloat(t);Number.isNaN(e)||e<.25||e>4||(et?et.playbackRate=e:(this._playbackRate=e,tt.setItem("playbackRate",e)))},get volume(){return this._volume},set volume(t){const e=parseFloat(t);Number.isNaN(e)||e<0||e>1||(et?et.volume=e:this._volume=e)},get isDebuggingActive(){try{return"1"===localStorage.getItem("polygon_audio_debugging")}catch(t){return!1}}};var nt={get instance(){return a.a.store("WebAudio")}};class at{execute(){_.a.isApp&&G.a.isNativeAudioPlayerSupported||nt.instance.clear()}}class ot{execute(){_.a.isApp&&G.a.isNativeAudioPlayerSupported||nt.instance.pause()}}class rt{execute(t){t&&t.id&&t.audioUrl&&(_.a.isApp&&G.a.instance.isNativeAudioPlayerSupported?G.a.instance.triggerNativeAudioPlayer(t):(nt.instance.clip=t,nt.instance.play()))}}class lt{execute(){_.a.isApp&&G.a.isNativeAudioPlayerSupported||nt.instance.play()}}class ht{execute(t){_.a.isApp&&G.a.isNativeAudioPlayerSupported||(nt.instance.playbackRate=t)}}class ct{execute(t){_.a.isApp&&G.a.isNativeAudioPlayerSupported||(nt.instance.currentTime=t)}}class dt{execute(t){_.a.isApp&&G.a.isNativeAudioPlayerSupported||(nt.instance.volume=t)}}const ut=Symbol("INSTANCE"),pt=Symbol("SINGELTONENFORCER");class gt{constructor(t){if(t!==pt)throw new Error("Instantiation failed: Use BreakingNewsData.instance instead of new.");s.a.instance.disableBreakingnews||(this.init(),this.fetchBreakingNews())}static get instance(){return this[ut]||(this[ut]=new gt(pt)),this[ut]}init(){if(S.a.getItem(u.i.breakingNews.name)){let t;try{t=JSON.parse(S.a.getItem(u.i.breakingNews.name))}catch(t){}if(t){const e=s.a.instance,i=e.cacheControl&&e.cacheControl.breakingnews&&Number.isInteger(e.cacheControl.breakingnews.sessionStorageMaxAge)?e.cacheControl.breakingnews.sessionStorageMaxAge:900,n=Date.now()-1e3*i;if(t.updated_at&&t.updated_at>=n&&t.items&&Array.isArray(t.items))return void(this._items=t.items)}}this._items=[]}fetchBreakingNews(){const t=s.a.instance;if(!t.urls||"string"!=typeof t.urls.assetsBasePath)return;const e=t.urls.assetsBasePath+"/assets/news/breakingnews.json";fetch(e,{method:"GET"}).then(t=>t.json()).then(t=>this.parseFetchedBreakingNews(t)).catch(()=>console.error("Error while fetching breaking news."))}parseFetchedBreakingNews(t){t&&Array.isArray(t)&&(this.items=t)}updateSessionStorage(t){const e={items:t&&Array.isArray(t)?t:[],updated_at:Date.now()};S.a.setItem(u.i.breakingNews.name,JSON.stringify(e))}get items(){return this._items}set items(t){if(!t||!Array.isArray(t))return;let e=t.length!==this._items.length;e||t.forEach(t=>{-1===this._items.findIndex(e=>e.id===t.id)&&(e=!0)}),this._items=t,this.updateSessionStorage(t),e&&window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(l.A,t)}}var mt=i(15);class yt{constructor(){this.link=null,this.boundNotificationCallback=()=>this.notificationCallback()}execute(t){t?(this.link=t,this.copyLinkToClipboard()):this.destroy()}copyLinkToClipboard(){mt.a.copyToClipboard(this.link)?F.instance.addNotification({type:u.k,headline:"Link kopiert",description:"Der Artikel-Link wurde erfolgreich in Ihrer Zwischenablage gespeichert."}):F.instance.addNotification({type:u.j,headline:"Fehler",description:'Beim Kopieren des Artikel-Links ist ein Fehler aufgetreten. <a href="#" data-notification-el="trigger">Erneut versuchen</a>',callback:this.boundNotificationCallback})}notificationCallback(){setTimeout(()=>{this.copyLinkToClipboard()},1e3)}destroy(){this.link=null,this.boundNotificationCallback=null}}const bt=Symbol("INSTANCE"),ft=Symbol("SINGELTONENFORCER");class wt{constructor(t){if(t!==ft)throw new Error("Instantiation failed: Use GiftService.instance instead of new.");this.init()}static get instance(){return this[bt]||(this[bt]=new wt(ft)),this[bt]}init(){const t=s.a.instance;t.thirdparty&&t.thirdparty.gift&&t.thirdparty.gift.apiUrl?this.apiUrl=t.thirdparty.gift.apiUrl:console.error("GiftService requires apiUrl for correct instantiation.")}getGiftCredits(){const t=this.apiUrl+"/credits";return new Promise((e,i)=>{this.fetchUrl(t,"GET").then(t=>{t&&Number.isInteger(t.giftCredit)?e(t.giftCredit):e(0)}).catch(t=>i(t))})}createGiftArticle(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("GiftService createGiftArticle - missing valid documentId function param"));const e=new URL(this.apiUrl+"/create");e.searchParams.set("article",t);return new Promise((t,i)=>{this.fetchUrl(e.href,"GET").then(e=>{t(e)}).catch(t=>i(t))})}fetchUrl(t,e="GET"){return fetch(t,{method:e,headers:{"Content-Type":"text/plain"}}).then(t=>200!==t.status&&201!==t.status?t.text().then(t=>{throw new Error(t)}).catch(e=>Promise.reject(new Error(`GiftService fetchUrl - failed to get data from API, URL: ${t.url}, error: ${e.message}`))):"GET"===e?t.json():Promise.resolve())}}const vt={isInitialized:!1,credits:null,tokenLookup:{},initialize(){wt.instance.getGiftCredits().then(t=>{Number.isInteger(t)&&(this.credits=t,this.isInitialized=!0)}).catch(()=>{})},addToken(t,e){t&&"string"==typeof t&&e&&(this.tokenLookup[t]=e)},getToken(t){return this.tokenLookup[t]}};var It={get instance(){return a.a.store("Gift")}};class At{constructor(){this.documentId=null,this.giftService=wt.instance,this.boundNotificationCallback=()=>this.notificationCallback()}execute(t){const e=d.a.instance;e.isLoggedIn&&e.hasPaidAccess?(this.documentId=t,this.createGiftArticle()):this.destroy()}createGiftArticle(){this.giftService.createGiftArticle(this.documentId).then(t=>{if(t.articleId!==this.documentId||!t.token)throw new Error("Invalid response");const e=It.instance;e.addToken(this.documentId,t.token),c.a.publish(l.L,this.documentId,t.token),Number.isInteger(t.giftCredit)&&(e.credits=t.giftCredit),this.destroy()}).catch(()=>{F.instance.addNotification({type:u.j,headline:"Fehler",description:'Beim Erstellen des Links ist ein Fehler aufgetreten. <a href="#" data-notification-el="trigger">Erneut versuchen</a>',callback:this.boundNotificationCallback})})}notificationCallback(){setTimeout(()=>{this.createGiftArticle()},1e3)}destroy(){this.documentId=null,this.giftService=null,this.boundNotificationCallback=null}}class Et{constructor(){this.documentId=null,this.collection=null,this.bookmarks=T.instance,this.boundNotificationCallback=()=>this.notificationCallback()}execute(t,e){if(!d.a.instance.isLoggedIn)return c.a.publish(l.y),void this.destroy();this.documentId=t,this.collection=e,this.deleteBookmark()}deleteBookmark(){this.bookmarks.delete(this.documentId,this.collection).then(()=>{c.a.publish(l.t,this.documentId,this.collection);const{urls:t}=s.a.instance,e=t&&t.user&&t.user.bookmarks?t.user.bookmarks:"";if(F.instance.addNotification({type:u.k,headline:"Aus Merkliste entfernt",description:`Ihr Artikel wurde aus der <a href="${e}">Merkliste</a> gelöscht.`}),_.a.isApp){const t=s.a.instance;t.app&&t.app.pageContext&&t.app.pageContext.documentId===this.documentId&&t.app.pageContext.collection===this.collection&&c.a.publish(l.X,new N(this.documentId,this.collection,!1))}this.destroy()}).catch(()=>{c.a.publish(l.w,{type:u.b,documentId:this.documentId,collection:this.collection}),F.instance.addNotification({type:u.j,headline:"Fehler",description:'Beim Löschen des Artikels ist ein Fehler aufgetreten. <a href="#" data-notification-el="trigger">Erneut versuchen</a>',callback:this.boundNotificationCallback})})}notificationCallback(){setTimeout(()=>{this.deleteBookmark()},1e3)}destroy(){this.documentId=null,this.collection=null,this.bookmarks=null,this.boundNotificationCallback=null}}class St{constructor(t,e,i,s="Ok",n="Abbrechen"){this.callback="function"==typeof t?t:null,this.headline=e,this.description=i,this.confirmButtonLabel=s,this.cancelButtonLabel=n,this.boundOnConfirmButtonClick=()=>this.onConfirmTriggered(),this.boundOnCancelTriggered=()=>this.onCancelTriggered(),this.boundOnKeyDown=t=>this.onKeyDown(t),this.init()}init(){if(this.container=document.querySelector('[data-confirmationlayer-el="container"]'),this.container||(this.container=document.body),this.el=B.a.createElementByPrototypeId(this.prototypeId),!this.el)return;const t=this.el.querySelector('[data-confirmationlayer-el="headline"]');t&&(this.headline?t.innerHTML=this.headline:c.a.toggleElementVisibility(t,!1));const e=this.el.querySelector('[data-confirmationlayer-el="description"]');if(e&&(this.description?e.innerHTML=this.description:c.a.toggleElementVisibility(e,!1)),this.confirmButton=this.el.querySelector('[data-confirmationlayer-el="confirmButton"]'),this.confirmButton)if(this.confirmButtonLabel){const t=this.confirmButton.querySelector('[data-confirmationlayer-el="confirmButtonLabel"]');t&&(t.innerHTML=this.confirmButtonLabel),this.confirmButton.addEventListener("click",this.boundOnConfirmButtonClick)}else c.a.toggleElementVisibility(this.confirmButton,!1);if(this.cancelButton=this.el.querySelector('[data-confirmationlayer-el="cancelButton"]'),this.cancelButton)if(this.cancelButtonLabel){const t=this.cancelButton.querySelector('[data-confirmationlayer-el="cancelButtonLabel"]');t&&(t.innerHTML=this.cancelButtonLabel),this.cancelButton.addEventListener("click",this.boundOnCancelTriggered)}else c.a.toggleElementVisibility(this.cancelButton,!1);this.closeIcon=this.el.querySelector('[data-confirmationlayer-el="closeIcon"]'),this.closeIcon&&this.closeIcon.addEventListener("click",this.boundOnCancelTriggered),this.background=this.el.querySelector('[data-confirmationlayer-el="background"]'),this.background&&this.background.addEventListener("click",this.boundOnCancelTriggered)}open(){this.container.appendChild(this.el),this.el.style.opacity=0,c.a.toggleElementVisibility(this.el,!0),this.returnFocusElement=window.document.activeElement,this.closeIcon.focus(),setTimeout(()=>{this.el.style.opacity=1},0),window.document.addEventListener("keydown",this.boundOnKeyDown,!0)}close(){c.a.toggleElementVisibility(this.el,!1),this.returnFocusElement&&(this.returnFocusElement.focus(),this.returnFocusElement=null),c.a.publish(l.I),this.destroy()}onConfirmTriggered(){"function"==typeof this.callback&&this.callback(u.h),this.close()}onCancelTriggered(){"function"==typeof this.callback&&this.callback(u.g),this.close()}onKeyDown(t){t.defaultPrevented||"Escape"!==t.key&&"Esc"!==t.key&&27!==t.keyCode||(t.preventDefault(),this.close())}destroy(){this.closeIcon&&this.closeIcon.removeEventListener("click",this.boundOnCancelTriggered),this.confirmButton&&this.confirmButton.removeEventListener("click",this.boundOnConfirmButtonClick),this.cancelButton&&this.cancelButton.removeEventListener("click",this.boundOnCancelTriggered),this.background&&this.closeIcon.removeEventListener("click",this.boundOnCancelTriggered),window.document.removeEventListener("keydown",this.boundOnKeyDown,!0),this.callback=null,this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=null}get prototypeId(){return"prototype-confirmation-layer"}}const kt=Symbol("INSTANCE"),Ct=Symbol("SINGELTONENFORCER");class Pt{constructor(t){if(t!==Ct)throw new Error("Instantiation failed: Use ConfirmationLayerService.instance instead of new.");this.queue=[],this.currentConfirmationLayer=null,this.boundOnConfirmationLayerClosed=()=>this.onConfirmationLayerClosed(),this.init()}static get instance(){return this[kt]||(this[kt]=new Pt(Ct)),this[kt]}init(){c.a.subscribe(l.I,this.boundOnConfirmationLayerClosed)}addConfirmationLayer(t){if(!t)return;this.removeConfirmationLayerById(t.id);const e=new St(t.callback,t.headline,t.description,t.confirmButtonLabel,t.cancelButtonLabel);this.queue.unshift({id:t.id||"",view:e}),this.currentConfirmationLayer||this.showNextConfirmationLayer()}removeConfirmationLayerById(t){if(!t)return;this.queue.filter(e=>e.id===t).forEach(t=>{const e=this.queue.indexOf(t);-1!==e&&(t.view.destroy(),this.queue.splice(e,1))})}showNextConfirmationLayer(){if(this.currentConfirmationLayer)return void this.currentConfirmationLayer.destroy();if(0===this.queue.length)return;const t=this.queue.pop();t.view&&(this.currentConfirmationLayer=t.view,this.currentConfirmationLayer.open())}onConfirmationLayerClosed(){this.currentConfirmationLayer&&(this.currentConfirmationLayer=null),setTimeout(()=>{this.showNextConfirmationLayer()},400)}}class Lt{constructor(){this.collection=null,this.bookmarks=T.instance,this.boundConfirmationLayerCallback=t=>this.confirmationLayerCallback(t),this.boundNotificationCallback=()=>this.notificationCallback()}execute(t){this.collection=t,Pt.instance.addConfirmationLayer({id:"DeleteAllBookmarks-"+this.collection,headline:"Alle Artikel entfernen?",description:"Möchten Sie wirklich alle Artikel aus Ihrer Merkliste löschen? Diese Aktion kann nicht rückgängig gemacht werden.",confirmButtonLabel:"Artikel entfernen",cancelButtonLabel:"Abbrechen",callback:this.boundConfirmationLayerCallback})}deleteAllBookmarks(){this.bookmarks.deleteAll(this.collection).then(()=>{if(c.a.publish(l.r,this.collection),F.instance.addNotification({type:u.k,headline:"Aus Merkliste entfernt",description:"Ihre Artikel wurden aus der Merkliste gelöscht."}),_.a.isApp){const t=s.a.instance;t.app&&t.app.pageContext&&t.app.pageContext.documentId&&t.app.pageContext.collection&&c.a.publish(l.X,new N(t.app.pageContext.documentId,t.app.pageContext.collection,!1))}this.destroy()}).catch(t=>{c.a.publish(l.w,{type:u.c,collection:this.collection}),F.instance.addNotification({type:u.j,headline:"Fehler",description:'Beim Löschen der Artikel ist ein Fehler aufgetreten. <a href="#" data-notification-el="trigger">Erneut versuchen</a>',callback:this.boundNotificationCallback}),console.error(t.message)})}notificationCallback(){setTimeout(()=>{this.deleteAllBookmarks()},1e3)}confirmationLayerCallback(t){t!==u.h?this.destroy():this.deleteAllBookmarks()}destroy(){this.collection=null,this.bookmarks=null,this.boundConfirmationLayerCallback=null,this.boundNotificationCallback=null}}const Tt=Symbol("INSTANCE"),_t=Symbol("SINGELTONENFORCER");class Ot{constructor(t){if(t!==_t)throw new Error("Instantiation failed: Use EventObserver.instance instead of new.");this.init()}static get instance(){return this[Tt]||(this[Tt]=new Ot(_t)),this[Tt]}init(){this.boundOnMouseDown=t=>this.onMouseDown(t),this.boundOnPageShow=t=>this.onPageShow(t),window.document.addEventListener("mousedown",this.boundOnMouseDown),window.addEventListener("pageshow",this.boundOnPageShow),this.initPageVisibilityAPI()}initPageVisibilityAPI(){this.hiddenPropertyName=void 0,this.visibilityChangeEventName=void 0,void 0!==document.hidden?(this.hiddenPropertyName="hidden",this.visibilityChangeEventName="visibilitychange"):void 0!==document.mozHidden?(this.hiddenPropertyName="mozHidden",this.visibilityChangeEventName="mozvisibilitychange"):void 0!==document.msHidden?(this.hiddenPropertyName="msHidden",this.visibilityChangeEventName="msvisibilitychange"):void 0!==document.webkitHidden?(this.hiddenPropertyName="webkitHidden",this.visibilityChangeEventName="webkitvisibilitychange"):this.visibilityChangeEventName="visibilitychange",this.currentVisibilityState=this.visibilityState,this.boundOnVisibilityChange=()=>this.onVisibilityChange(this.visibilityState),window.document.addEventListener(this.visibilityChangeEventName,this.boundOnVisibilityChange),this.boundOnPageHide=()=>this.onVisibilityChange("hidden"),window.addEventListener("pagehide",this.boundOnPageHide)}onVisibilityChange(t){this.currentVisibilityState!==t&&(this.currentVisibilityState=t,c.a.publish(l.bb,t))}get visibilityState(){return this.hiddenPropertyName?window.document[this.hiddenPropertyName]?"hidden":"visible":void 0!==window.document.visibilityState?window.document.visibilityState:void 0}onMouseDown(t){c.a.publish(l.Z,t)}onPageShow(t){t.persisted&&c.a.publish(l.ab)}destroy(){window.document.removeEventListener("mousedown",this.boundOnMouseDown),window.removeEventListener("pageshow",this.boundOnPageShow),window.removeEventListener("pagehide",this.boundOnPageHide),window.document.removeEventListener(this.visibilityChangeEventName,this.boundOnVisibilityChange),window.removeEventListener("scroll",this.boundOnScroll),super.destroy()}}const xt={breakpointQueries:[],breakpoint:"",colorSchemeQuery:window.matchMedia("(prefers-color-scheme: dark)"),colorScheme:"",init(){(s.a.instance.breakpoints?Object.keys(s.a.instance.breakpoints):[]).forEach(t=>{const{min:e,max:i}=s.a.instance.breakpoints[t];let n;e&&i?n=`(min-width: ${e}px) and (max-width: ${i}px)`:e?n=`(min-width: ${e}px)`:i&&(n=`(max-width: ${i}px)`),n&&this.breakpointQueries.push({breakpoint:t,query:window.matchMedia(n)})}),this.onBreakpointChanged(),this.onColorSchemeChanged(),"function"==typeof this.colorSchemeQuery.addEventListener?(this.colorSchemeQuery.addEventListener("change",()=>this.onColorSchemeChanged()),this.breakpointQueries.forEach(t=>{t.query.addEventListener("change",()=>this.onBreakpointChanged())})):"function"==typeof this.colorSchemeQuery.addListener&&(this.colorSchemeQuery.addListener(()=>this.onColorSchemeChanged()),this.breakpointQueries.forEach(t=>{t.query.addListener(()=>this.onBreakpointChanged())}))},onColorSchemeChanged(){this.colorScheme=this.colorSchemeQuery.matches?u.e:u.f,c.a.publish(l.V,{colorScheme:this.colorScheme})},onBreakpointChanged(){const t=this.breakpointQueries.filter(t=>t.query.matches).pop().breakpoint;this.breakpoint!==t&&(this.breakpoint=t,c.a.publish(l.U,{breakpoint:this.breakpoint}))}};var Nt={get instance(){return a.a.store("MediaQuery")}};const Bt=Symbol("INSTANCE"),Dt=Symbol("SINGELTONENFORCER");class Ut{constructor(t){if(t!==Dt)throw new Error("Instantiation failed: Use GujAdBridge.instance instead of new.");this.init()}static get instance(){return this[Bt]||(this[Bt]=new Ut(Dt)),this[Bt]}init(){this.initializedAdPositions=[],this.reloadAllAdsTriggered=!1;const t=s.a.instance,e=y.a.instance,{breakpoint:i}=Nt.instance;let n="desktop";_.a.isAndroidApp?n="androidphone":_.a.isIOSApp?n="iosphone":Z.a.isTablet?n="tablet":Z.a.isMobile&&(n="mobile");let a="_default";t.noAds||e.isIssueArticle?a="_noad":void 0!==t.guj&&t.guj.zone&&(a=t.guj.zone);let o="default";void 0!==t.guj&&t.guj.spmtp&&(o=t.guj.spmtp);let r="";void 0!==t.guj&&t.guj.spmurid&&(r=t.guj.spmurid);let h="";void 0!==t.guj&&t.guj.spmtid&&(h=t.guj.spmtid);let u="";void 0!==t.guj&&t.guj.spmard&&(u=t.guj.spmard);let p=!1;void 0!==t.guj&&t.guj.isIndexPage&&(p=!0);let g=[];void 0!==t.guj&&Array.isArray(t.guj.keywords)&&(g=g.concat(t.guj.keywords),d.a.instance.hasPaidAccess&&g.push("plus_user")),"undefined"!=typeof GujAd&&void 0!==GujAd.cmd&&(void 0!==GujAdPositions&&GujAdPositions.forEach(t=>{Array.isArray(t.breakpoints)&&!t.breakpoints.includes(i)||this.initAdPosition(t.id)}),GujAd.cmd.unshift(()=>{GujAd.getClient().setSiteType(n)},()=>{"develop"===a?GujAd.getClient().setZone(a,!0):GujAd.getClient().setZone(a)},()=>{GujAd.getClient().addTargetingParameter("spmtp",o),r&&GujAd.getClient().addTargetingParameter("spmurid",r),h&&GujAd.getClient().addTargetingParameter("spmtid",h),u&&GujAd.getClient().addTargetingParameter("spmard",u)},()=>{GujAd.getClient().setIsIndexPage(p)},()=>{GujAd.getClient().setKeywords(g)},()=>{GujAd.registerAdPositionLoadedHandler(t=>{this.onAdPositionLoaded(t)})},()=>{_.a.isApp&&G.a.instance.advertisingId&&GujAd.getClient().setIDFA(G.a.instance.advertisingId)})),c.a.subscribe(l.Cb,t=>this.onTargetAdPositionLoaded(t)),c.a.subscribe(l.e,t=>this.initAdPosition(t)),t.disableAds&&"undefined"!=typeof GujAdPositions&&GujAdPositions.forEach(t=>{t.sitetype&&("mobile"!==t.sitetype&&t.sitetype!==n||"mobile"===t.sitetype&&!["mobile","androidphone","iosphone"].includes(n))||c.a.publish(l.f,{positionName:t.id})})}onAdPositionLoaded(t){const e=t.getName(),i=t.containsAd(),s=t.getGPTEvent(),n=s&&Array.isArray(s.size)&&2===s.size.length?s.size:[void 0,void 0],a=s&&s.isEmpty,o=s&&s.isBackfill;this.refreshAdContainerStyle(e,i,n),this.refreshAdContainerVisibility(e,i),void 0!==window.polygon&&void 0!==window.polygon.componentLoader&&(window.polygon.componentLoader.publish(l.f,{positionName:e,containsAd:i,isEmpty:a,isBackfill:o,size:n}),i&&window.polygon.componentLoader.publish(l.g,e))}onTargetAdPositionLoaded(t){this.refreshAdContainerVisibility(t,!0);const e=document.querySelector("#"+t);e&&(e.setAttribute("data-advertisement",e.getAttribute("data-advertisement").replace(/GujAd/g),"AdobeTargetAd"),e.className="",e.parentElement.getAttribute("data-advertisement")&&e.parentElement.getAttribute("data-advertisement").indexOf(t)>=0&&(e.parentElement.className=""),e.style.display=""),void 0!==window.polygon&&void 0!==window.polygon.componentLoader&&window.polygon.componentLoader.publish(l.g,t)}refreshAdContainerStyle(t,e,i){const s=document.querySelector(`[data-advertisement^="GujAd"][data-advertisement*="${t}"][class*="float"]:not([id])`);s&&(e&&Array.isArray(i)&&i[0]&&i[0]>300?s.setAttribute("style","float: none !important; clear: both !important; padding-left: 0 !important; padding-right: 0 !important; margin-left: 0 !important; margin-right: 0 !important;"):s.setAttribute("style",""))}refreshAdContainerVisibility(t,e){let i=[];e?(i=Array.from(document.querySelectorAll(`[data-advertisement^="GujAd"][data-advertisement*="${t}"]:not([data-advertisement*="disabled"])`)),i.forEach(t=>{t.classList.remove("hidden"),t.classList.remove("sm:hidden"),t.classList.remove("md:hidden"),t.classList.remove("lg:hidden"),t.classList.remove("unhidable")})):this.reloadAllAdsTriggered||(i=Array.from(document.querySelectorAll(`[data-advertisement^="GujAd ${t}"]:not([data-advertisement*="disabled"])`)),i.forEach(t=>{t.classList.add("hidden")}))}initAdPosition(t){void 0!==GujAd&&void 0!==GujAd.cmd&&(this.initializedAdPositions.includes(t)?this.reloadAdPosition(t):(GujAd.cmd.push(()=>{GujAd.push(t)}),this.initializedAdPositions.push(t)))}reloadAllAds(){void 0!==GujAd&&(this.reloadAllAdsTriggered=!0,this.initializedAdPositions.forEach(t=>{if("function"==typeof GujAd.isAdPositionEmpty&&!GujAd.isAdPositionEmpty(t)){const e=document.querySelector(`#${t}[data-advertisement^="GujAd"]:not([data-advertisement*="disabled"])`);e&&e.offsetHeight>0&&(e.classList.add("unhidable"),e.style.minHeight=e.offsetHeight+"px",this.reloadAdPosition(t))}}))}reloadAdPosition(t){void 0!==GujAd&&void 0!==GujAd.cmd&&GujAd.cmd.push(()=>{GujAd.getClient().reloadAd(t)})}}class Rt{constructor(){this.origin=null,this.target=null,this.targetImage=null,this.animationDuration=null,this.el=null}execute(t,e){if(this.origin=document.querySelector(`[data-image-animation-origin="${t}"]`),this.target=document.querySelector(`[data-image-animation-target="${t}"]`),!this.origin||!this.target)return void this.destroy();if(this.targetImage=this.target.querySelector("img"),this.animationDuration=e,this.el=B.a.createElementByPrototypeId("prototype-image-animation-element"),!this.el)return void this.destroy();const i=this.origin.getBoundingClientRect(),s={imageSrc:this.origin.currentSrc,animationDuration:this.animationDuration,width:this.origin.width,height:this.origin.height,top:i.top,left:i.left};this.el=B.a.populateElement(this.el,s),this.target.parentNode.insertBefore(this.el,this.target.nextSibling),this.el.style.transform=this.cssTransform,this.el.style.filter=this.cssFilter,window.setTimeout(()=>this.onAnimationCompleted(),this.animationDuration)}get cssTransform(){if(!this.el||!this.target)return"";const t=this.target.getBoundingClientRect(),e=this.el.getBoundingClientRect(),i=(t.height<window.innerHeight?t.height:window.innerHeight)/this.el.height,s=(t.width-this.el.width*i)/2;return`translate(${t.left-parseFloat(e.left)+s}px, ${t.top-parseFloat(e.top)}px) scale(${i})`}get cssFilter(){const t=this.target.getBoundingClientRect().height/this.el.height-1;return t<0?"blur(0)":`blur(${t}px)`}onAnimationCompleted(){this.targetImage.classList.contains("lazyloaded")||this.targetImage.classList.contains("ls-is-cached")||this.targetImage.complete?this.onTargetImageLoaded():(this.boundOnTargetImageLoaded=()=>this.onTargetImageLoaded(),this.targetImage.addEventListener("load",this.boundOnTargetImageLoaded))}onTargetImageLoaded(){window.setTimeout(()=>this.destroy(),this.animationDuration)}destroy(){this.boundOnTargetImageLoaded&&this.targetImage.removeEventListener("load",this.boundOnTargetImageLoaded),this.origin=null,this.target=null,this.targetImage=null,this.el&&(this.el.remove(),this.el=null)}}class Mt{execute(){const t=d.a.instance;t.isLoggedIn&&t.hasPaidAccess&&It.instance.initialize()}}const jt=[],Vt=()=>i.e(0).then(i.t.bind(null,31,7)).then(t=>{const e=Array.from(document.querySelectorAll("[data-stickyfill]"));t.add(e)}),zt=()=>i.e(0).then(i.t.bind(null,32,7)),qt=()=>i.e(0).then(i.t.bind(null,33,7)).then(t=>{t.polyfill()}),Ft=()=>{window.queueMicrotask=t=>{Promise.resolve().then(t).catch(t=>setTimeout(()=>{throw t}))}},Wt=()=>{Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,writable:!0,value:()=>Array.prototype.map.apply(void 0,arguments).flat(1)})},Gt=()=>{const t=t=>{if(!t||!t.target)return;const e=t.target,i=(t.pageX-e.getBoundingClientRect().left)/(e.getBoundingClientRect().right-e.getBoundingClientRect().left),s=parseFloat(e.getAttribute("min"))||0,n=parseFloat(e.getAttribute("max"))||100,a=parseFloat(e.getAttribute("step"))||1,o=Math.floor(a)===a?0:a.toString().split(".")[1].length||0;let r=(n-s)*i+s;r=r%a!=0?parseFloat(r-r%a+a).toFixed(o):r,e.value=r;const l=new Event("input",{bubbles:!0,cancelable:!0});e.dispatchEvent(l)};document.querySelectorAll("input[type=range]").forEach(e=>{e.hasAttribute("data-polyfilled")||(e.addEventListener("touchend",t,{passive:!0}),e.setAttribute("data-polyfilled",""))}),c.a.subscribe(l.kb,()=>Gt())};jt.push(Vt()),window.IntersectionObserver&&window.IntersectionObserverEntry||jt.push(zt()),jt.push(qt()),"function"!=typeof window.queueMicrotask&&jt.push(Ft()),Array.prototype.flatMap||jt.push(Wt()),(Z.a.isMobileSafari||_.a.isIOSApp)&&jt.push(Gt());var $t=Promise.all(jt);const Ht=Symbol("INSTANCE"),Jt=Symbol("SINGELTONENFORCER");class Zt{constructor(t){if(t!==Jt)throw new Error("Instantiation failed: Use KeyboardDetection.instance instead of new.");this.init()}static get instance(){return this[Ht]||(this[Ht]=new Zt(Jt)),this[Ht]}init(){this.el=document.documentElement,window.addEventListener("keydown",t=>this.onKeyDown(t)),c.a.subscribe(l.Z,()=>this.onMouseDown())}onKeyDown(t){"Tab"!==t.key&&9!==t.keyCode||this.el.classList.add("keyboard-control")}onMouseDown(){this.el.classList.remove("keyboard-control")}}var Kt=i(18),Qt=i.n(Kt);const Xt=Symbol("INSTANCE"),Yt=Symbol("SINGELTONENFORCER");class te{constructor(t){if(t!==Yt)throw new Error("Instantiation failed: Use LazyLoading.instance instead of new.");this.init()}static get instance(){return this[Xt]||(this[Xt]=new te(Yt)),this[Xt]}init(){this.lazyload=new Qt.a({elements_selector:".lazyload",use_native:!1,unobserve_entered:!0,unobserve_completed:!0}),this.lazytrigger=new Qt.a({elements_selector:".lazytrigger",use_native:!1,unobserve_entered:!0,unobserve_completed:!0,callback_enter:t=>{t.dispatchEvent(new Event("lazybeforeunveil"))},callback_loaded:t=>{t.dispatchEvent(new Event("lazyloaded"))}}),c.a.subscribe(l.T,()=>this.onUpdateRequested())}onUpdateRequested(){this.lazyload&&"function"==typeof this.lazyload.update&&this.lazyload.update(),this.lazytrigger&&"function"==typeof this.lazytrigger.update&&this.lazytrigger.update()}}class ee{execute(t){c.a.publish(l.Gb)}}class ie{execute(t){c.a.publish(l.Hb)}}class se extends x{constructor(t,e){super(),this._documentId=t,this._collection=e}get id(){return O.a}get documentId(){return this._documentId}get collection(){return this._collection}}class ne{execute(t){t.documentId&&c.a.publish(l.q,t.documentId,t.collection||"article")}}class ae extends x{constructor(t,e){super(),this._documentId=t,this._collection=e}get id(){return O.e}get documentId(){return this._documentId}get collection(){return this._collection}}class oe{execute(t){t.documentId&&c.a.publish(l.v,t.documentId,t.collection||"article")}}class re{execute(t){const e=d.a.instance;t.documentId&&e.isLoggedIn&&e.hasPaidAccess&&c.a.publish(l.N,{documentId:t.documentId,documentUrl:t.documentUrl})}}class le extends x{constructor(t,e){super(),this._consentUUID=t,this._euconsent=e}get id(){return O.c}get consentUUID(){return this._consentUUID}get euconsent(){return this._euconsent}}class he extends x{constructor(t,e){super(),this._link=t,this._title=e}get id(){return O.f}get link(){return this._link}get title(){return this._title}}const ce=Symbol("INSTANCE"),de=Symbol("SINGELTONENFORCER");class ue{constructor(t){if(t!==de)throw new Error("Instantiation failed: Use Messenger.instance instead of new.");this.handlerLookup={},this.messageLookup={},this.init()}static get instance(){return this[ce]||(this[ce]=new ue(de)),this[ce]}init(){this.initHandlerLookup(),this.initMessageLookup(),c.a.subscribe(l.W,this.onMessageReceived,this),c.a.subscribe(l.X,this.onMessageSend,this)}initHandlerLookup(){this.handlerLookup[O.h]=ee,this.handlerLookup[O.g]=ie,this.handlerLookup[O.a]=ne,this.handlerLookup[O.e]=oe,this.handlerLookup[O.d]=re}initMessageLookup(){this.messageLookup[O.a]=se,this.messageLookup[O.e]=ae,this.messageLookup[O.c]=le,this.messageLookup[O.f]=he,this.messageLookup[O.i]=H}onMessageReceived(t){if(!t||!t.id||!this.handlerLookup[t.id])return void console.error("Messenger received invalid or unknown message.");const e=new this.handlerLookup[t.id];"function"==typeof e.execute?e.execute(t):console.error(`Messenger "${e.constructor.name}" is missing an execute function.`)}onMessageSend(t){t&&t.id&&"function"==typeof t.toObject?G.a.instance.sendMessage(t.toObject()):console.error("Messenger cannot send invalid or unknown message.")}}class pe{execute(){_.a.isApp&&this.updateBookmark()}updateBookmark(){const t=s.a.instance;if("article"===y.a.instance.route&&t.app&&t.app.pageContext&&t.app.pageContext.documentId&&t.app.pageContext.collection){const e=T.instance;c.a.publish(l.X,new N(t.app.pageContext.documentId,t.app.pageContext.collection,e.contains(t.app.pageContext.documentId,t.app.pageContext.collection)))}}}const ge=Symbol("INSTANCE"),me=Symbol("SINGELTONENFORCER");class ye{constructor(t){if(t!==me)throw new Error("Instantiation failed: Use TCDataModel.instance instead of new.");this._ready=!1,this._errorOccurred=!1,this._tcData=void 0,this.lastEventStatus=void 0,this.isPurposeOneGranted=!1,this.init()}static get instance(){return this[ge]||(this[ge]=new ye(me)),this[ge]}init(){if(window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.subscribe(l.vb,()=>this.onSourcepointMessagingExecuted()),"function"==typeof window.__tcfapi)window.__tcfapi("addEventListener",2,(t,e)=>this.tcfapiTCDataCallback(t,e));else{if(s.a.instance.consent&&s.a.instance.consent.disabled)return;console.error("TCData window.__tcfapi is not available!")}}tcfapiTCDataCallback(t,e){!e||t&&t.cmpStatus&&"error"===t.cmpStatus?this.onError():t&&t.eventStatus&&this.lastEventStatus!==t.eventStatus&&(this.lastEventStatus=t.eventStatus,this.onTCDataChanged(t))}updateTCData(){"function"==typeof window.__tcfapi?window.__tcfapi("getTCData",2,(t,e)=>this.tcfapiTCDataCallback(t,e)):console.warn("TCData window.__tcfapi is not available!")}onTCDataChanged(t){this._tcData=t;const e=this.isPurposeOneGranted;this.isPurposeOneGranted=this.isPurposeGranted(u.n.store_and_access_information_on_a_device),this._ready||!t||!t.eventStatus||"tcloaded"!==t.eventStatus&&"useractioncomplete"!==t.eventStatus?_.a.isApp&&this._ready&&e&&!this.isPurposeOneGranted&&window.location.reload():this.onReady()}onReady(){this._ready=!0,window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(l.Db,this._tcData)}onSourcepointMessagingExecuted(){this.updateTCData()}onError(){console.error("TCDataModel onError"),this._errorOccurred=!0,window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(l.Eb)}isPurposeGranted(t){return!(!this._tcData||!(void 0!==this.tcData.gdprApplies&&!this.tcData.gdprApplies||this._tcData.purpose&&this._tcData.purpose.consents&&"boolean"==typeof this._tcData.purpose.consents[t]&&this._tcData.purpose.consents[t]))}isVendorGranted(t){return!(!this._tcData||!(void 0!==this.tcData.gdprApplies&&!this.tcData.gdprApplies||this._tcData.vendor&&this._tcData.vendor.consents&&"boolean"==typeof this._tcData.vendor.consents[t]&&this._tcData.vendor.consents[t]))}get ready(){return this._ready}get errorOccurred(){return this._errorOccurred}get tcData(){return this._tcData}}class be{constructor(){this.user=d.a.instance,this.currentUserAccess={...this.user.access},this.settings=s.a.instance,this.tcDataModel=ye.instance,this.bookmarks=T.instance,this.webAudio=nt.instance}execute(t){this.user.update(),this.currentUserAccess.paid===this.user.access.paid&&this.currentUserAccess.conditional===this.user.access.conditional&&this.currentUserAccess.noAds===this.user.access.noAds?(this.currentUserAccess={...this.user.access},_.a.isApp?window.navigator.webBridge.globalFontsize(G.a.instance.appFontSize):this.webAudio.reloadLocaLStorage(),!this.user.hasNoAdsAccess&&this.tcDataModel.ready&&Ut.instance.reloadAllAds(),this.bookmarks.reloadLocaLStorage(),this.tcDataModel.updateTCData()):window.location.reload()}}const fe="-a-",we="-fotostrecke-",ve="-video-",Ie="a-",Ae="fotostrecke-",Ee="video-";class Se{static isUrlArticleContent(t){let e=!1;if(t){const i=new URL(t).pathname.split("/");if(i.length>1){const s=i[i.length-1];let n=-1!==s.indexOf(fe);n=n||-1!==s.indexOf(we),n=n||-1!==s.indexOf(ve),n=n||0===s.indexOf(Ie),n=n||0===s.indexOf(Ae),n=n||0===s.indexOf(Ee),e=this.isHomeDomain(t)&&n}}return e}static isHomeDomain(t){let e=!1;if(null!=t){const i=new URL(t);e=i.host&&i.host===window.location.host}return e}static fixUrlParamsFragmentsOrder(t){let e;const i=t.indexOf("#"),s=t.indexOf("?");return-1!==i&&s>i?(e=t.substr(0,i),e+=t.substr(s),e+=t.substr(i,s-i)):e=t,e}static getReferrerFromUrl(t){const e=new URL(t);return e.searchParams.get("ref")?e.searchParams.get("ref"):void 0}}const ke=Symbol("INSTANCE"),Ce=Symbol("SINGELTONENFORCER");class Pe{constructor(t){if(t!==Ce)throw new Error("Instantiation failed: Use SARAsData.instance instead of new.");this.init()}static get instance(){return this[ke]||(this[ke]=new Pe(Ce)),this[ke]}init(){const t=s.a.instance;this.application=t.application?t.application:{},this.editorial=t.editorial?t.editorial:void 0,this.external=t.external?t.external:{},this.page=t.page?t.page:{},this.paywall=t.paywall?t.paywall:void 0}set application(t){if(this._application={},t&&t.info&&(this._application.info=t.info),_.a.isApp){let t="";_.a.isAndroidApp?t="Android:":_.a.isIOSApp&&(t="iOS:"),t+=_.a.appVersion,this._application.info||(this._application.info={}),this._application.info.app_version=t}}get application(){return this._application}set editorial(t){this._editorial=t?{info:{...t.info?t.info:{}},attributes:{...t.attributes?t.attributes:{}},category:{...t.category?t.category:{}},author:{...t.author?t.author:{}}}:void 0}get editorial(){return this._editorial}set external(t){this._external={},t.vg_wort&&(this._external.vg_wort=t.vg_wort)}get external(){return this._external}set page(t){const e={platform:_.a.isApp?"app":"web"},i=Se.getReferrerFromUrl(window.location.href);i&&(e.referrer=i);let s="";switch(Nt.instance.breakpoint){case"lg":s="desktop";break;case"md":s="tablet";break;case"sm":s="mobile"}const n={viewport:s,is_darkmode:Nt.instance.colorScheme===u.e};this._page={info:Object.assign(e,t.info?t.info:{}),attributes:Object.assign(n,t.attributes?t.attributes:{}),category:{...t.category?t.category:{}}}}get page(){return this._page}set paywall(t){this._paywall=t?{...t}:void 0}get paywall(){return this._paywall}get user(){const t=d.a.instance,e=s.a.instance,i={};t.trackingId&&(i.tracking_id=t.trackingId),G.a.instance.advertisingId&&(i.device_advertising_id=G.a.instance.advertisingId);const n={is_phone:Z.a.isPhone,is_tablet:Z.a.isTablet,is_mobile:Z.a.isMobile},a={access:t.accessInfo,is_loggedIn:t.isLoggedIn,has_paid_access:t.hasPaidAccess,has_spiegelNoAdsMonthly_access:t.hasNoAdsAccess,has_conditional_access:t.hasConditionalAccess};return y.a.instance.isGiftArticle&&(a.has_gift_article_access=!(t.hasPaidAccess||e.paywall&&e.paywall.attributes&&e.paywall.attributes.is_active)),{info:{...i},segment:a,device:n}}}const Le=Symbol("INSTANCE"),Te=Symbol("SINGELTONENFORCER"),_e="tlp";class Oe{constructor(t){if(t!==Te)throw new Error("Instantiation failed: Use SARAs.instance instead of new.");this.init()}static get instance(){return this[Le]||(this[Le]=new Oe(Te)),this[Le]}init(){s.a.instance.disableAdobeLaunch?this.data={}:(this.data=Pe.instance,c.a.subscribe(l.f,this.onAdPositionInitialized,this),c.a.subscribe(l.P,this.onJWPlayerInitialized,this),c.a.subscribe(l.ab,this.onPageResume,this),c.a.subscribe(l.q,this.onAddBookmark,this),c.a.subscribe(l.v,this.onDeleteBookmark,this),c.a.subscribe(l.u,this.onDeleteAllBookmarks,this),c.a.subscribe(l.mb,this.push,this))}onAdPositionInitialized(t){if(!t||!t.positionName||"string"!=typeof t.positionName)return;const e=!!t.containsAd,i=!!t.isEmpty,s=!!t.isBackfill,n=Array.isArray(t.size)?t.size:[void 0,void 0];this.sendAdPositionInitializedEvent(t.positionName,e,i,s,n)}onAddBookmark(t,e){t&&e&&"article"===e&&this.sendCustomButtonClickEvent("add bookmark",{articleId:t,source:"bookmark-button"})}onDeleteBookmark(t,e){t&&e&&"article"===e&&this.sendCustomButtonClickEvent("delete bookmark",{articleId:t,source:"bookmark-button"})}onDeleteAllBookmarks(t){t&&"article"===t&&this.sendCustomButtonClickEvent("delete all bookmarks",{source:"bookmark-button"})}onJWPlayerInitialized(t){t&&this.sendJWPlayerInitializedEvent(t)}onPageResume(t={}){t&&t.platform&&"app"===t.platform&&this.sendVirtualPageEvent("app_call",t.trigger,t.referrer)}sendCustomButtonClickEvent(t,e){if(!t)return;const i={event:{info:{action:"button_click",name:t},attributes:{source:`${_e}|webview|${e&&e.source?e.source:"button"}`}}};e&&e.articleId&&(i.editorial={info:{article_id:e.articleId}}),this.push(i)}sendJWPlayerInitializedEvent(t){if(!t)return;const e={event:{info:{action:"jw-init"},attributes:{player_id:t,source:_e+"|webview|video-player"}}};this.push(e)}sendAdPositionInitializedEvent(t,e,i,s,n){if(!t)return;const a={event:{info:{action:"adpos-init"},attributes:{pos:t,contains_ad:e,is_empty:i,is_backfill:s,size:n,source:_e+"|webview|advertisement"}}};this.push(a)}sendPageLoadEvent(){let t={};t=Object.assign(t,{event:{info:{action:"page_data_ready",name:"generic"},attributes:{current_url:`${s.a.instance.urls.base}${window.location.pathname}${window.location.search}`,source:_e+"|webview|page-tracking"}}}),this.data.application&&(t=Object.assign(t,{application:this.data.application})),this.data.external&&(t=Object.assign(t,{external:this.data.external})),this.data.page&&(t=Object.assign(t,{page:this.data.page})),this.data.editorial&&(t=Object.assign(t,{editorial:this.data.editorial})),this.data.paywall&&(t=Object.assign(t,{paywall:this.data.paywall})),this.data.user&&(t=Object.assign(t,{user:this.data.user})),this.push(t)}sendVirtualPageEvent(t="generic",e="generic_recall",i){let s={};s=Object.assign(s,{event:{info:{action:"virtual_page",name:t},attributes:{label:e,source:_e+"|webview|page-tracking"}}}),i&&(s.page={info:{referrer:i}}),this.push(s)}push(t){return!s.a.instance.disableAdobeLaunch&&(t.event&&t.event.info&&t.event.info.action?window.SARAs_data?(window.SARAs_data.push(t),!0):(console.error("SARAs->push: SARAs_data is not defined: "+JSON.stringify(t)),!1):(console.error("SARAs->push: Event Param action is required: "+JSON.stringify(t)),!1))}}class xe{execute(t){const{to:e,subject:i,body:s}=t,n=mt.a.getMailtoUrl(e,i,s);n&&(window.location.href=n)}}const Ne=Symbol("INSTANCE"),Be=Symbol("SINGELTONENFORCER");class De{constructor(t){if(t!==Be)throw new Error("Instantiation failed: Use TriggerHandler.instance instead of new.");this.init()}static get instance(){return this[Ne]||(this[Ne]=new De(Be)),this[Ne]}init(){this.registerEventHandlers()}registerEventHandlers(){window.polygon&&window.polygon.componentLoader&&(window.polygon.componentLoader.subscribe(l.Ib,this.onAccountTriggered,this),window.polygon.componentLoader.subscribe(l.Jb,this.onLoginTriggered,this),window.polygon.componentLoader.subscribe(l.Kb,this.onLogoutTriggered,this),window.polygon.componentLoader.subscribe(l.Mb,this.onRegisterTriggered,this),window.polygon.componentLoader.subscribe(l.Lb,this.onOfferTriggered,this),window.polygon.componentLoader.subscribe(l.Nb,this.onRestorePurchasesTriggered,this))}onAccountTriggered(){const{isApp:t}=_.a;if(t){G.a.instance.triggerAccount()}else{const{urls:t}=s.a.instance;t&&t.user&&t.user.account&&window.location.assign(t.user.account)}}onLoginTriggered(t){const{targetUrl:e}=t,{isApp:i}=_.a;if(i){G.a.instance.triggerLogin({targetUrl:e})}else{const{urls:t}=s.a.instance;if(t&&t.user&&t.user.login){const i=new URL(t.user.login);e&&i.searchParams.set("targetUrl",e),window.location.assign(i.href)}}}onLogoutTriggered(){const{isApp:t}=_.a;if(t){G.a.instance.triggerLogout()}else{const{urls:t}=s.a.instance;t&&t.user&&t.user.logout&&window.location.assign(t.user.logout)}}onRegisterTriggered(t){const{targetUrl:e}=t,{isApp:i}=_.a;if(i){G.a.instance.triggerRegister({targetUrl:e})}else{const{urls:t}=s.a.instance;if(t&&t.user&&t.user.register){const i=new URL(t.user.register);e&&i.searchParams.set("targetUrl",e),window.location.assign(i.href)}}}onOfferTriggered(t){const{product:e}=t;let{targetUrl:i}=t;if(!e)return;const{isApp:n}=_.a;if(n){G.a.instance.triggerInAppPurchase({product:e})}else{const{urls:t}=s.a.instance;if(t&&t.offers&&t.offers[e]){const s=new URL(t.offers[e]);if(i)s.searchParams.set("targetUrl",i);else{const t=new URLSearchParams(window.location.search);i=t.get("targetUrl")?decodeURIComponent(t.get("targetUrl")):void 0,i&&s.searchParams.set("targetUrl",i)}window.location.assign(s.href)}}}onRestorePurchasesTriggered(t){let{targetUrl:e}=t;const{isApp:i}=_.a;if(i){if(!e){const t=new URLSearchParams(window.location.search);e=t.get("targetUrl")?decodeURIComponent(t.get("targetUrl")):void 0}G.a.instance.triggerRestorePurchases({targetUrl:e})}}}var Ue=i(20);const Re="WEB_AUDIO_EVENT",Me="WEB_AUDIO_EVENT_CLIP",je="WEB_AUDIO_EVENT_CLEAR",Ve="WEB_AUDIO_EVENT_PLAY",ze="WEB_AUDIO_EVENT_PAUSE",qe="WEB_AUDIO_EVENT_RESUME",Fe="WEB_AUDIO_EVENT_END",We="WEB_AUDIO_EVENT_TIME",Ge="WEB_AUDIO_EVENT_PLAYBACK_RATE",$e="WEB_AUDIO_EVENT_VOLUME";class He extends Ue.a{constructor(){super(),this.state=null,this.isInitialized=!1,this.isPlayPending=!0,this.init()}init(){const t=nt.instance;t&&(this.state={mode:t.mode,clip:t.clip?JSON.parse(JSON.stringify(t.clip)):null,isPaused:t.isPaused,isEnded:t.isEnded,currentTime:t.currentTime,duration:t.duration,playbackRate:t.playbackRate,volume:t.volume},a.a.effect(()=>this.onUpdateMode(t.mode)),a.a.effect(()=>this.onUpdateClip(t.clip)),a.a.effect(()=>this.onUpdateIsPaused(t.isPaused)),a.a.effect(()=>this.onUpdateIsEnded(t.isEnded)),a.a.effect(()=>this.onUpdateDuration(t.duration)),a.a.effect(()=>this.onUpdateCurrentTime(t.currentTime)),a.a.effect(()=>this.onUpdatePlaybackRate(t.playbackRate)),a.a.effect(()=>this.onUpdateVolume(t.volume)),this.isInitialized=!0)}onUpdateMode(t){this.state.mode=t}onUpdateClip(t){this.state.clip=t?JSON.parse(JSON.stringify(t)):null,this.isPlayPending=!0,t?this.dispatchWebAudioEvent(Me):this.dispatchWebAudioEvent(je)}onUpdateIsPaused(t){this.state.isPaused=!!t,t?this.dispatchWebAudioEvent(ze):this.isPlayPending?(this.dispatchWebAudioEvent(Ve),this.isPlayPending=!1):this.dispatchWebAudioEvent(qe)}onUpdateIsEnded(t){this.state.isEnded=!!t,t&&this.dispatchWebAudioEvent(Fe)}onUpdateDuration(t){this.state.duration=t}onUpdateCurrentTime(t){this.state.currentTime=t,this.dispatchWebAudioEvent(We)}onUpdatePlaybackRate(t){this.state.playbackRate=t,this.dispatchWebAudioEvent(Ge)}onUpdateVolume(t){this.state.volume=t,this.dispatchWebAudioEvent($e)}dispatchWebAudioEvent(t){if(!this.isInitialized)return;const e=Object.assign(this.state,{action:t});super.dispatchEvent(new CustomEvent(Re,{detail:e}))}}const Je="WARDEN_LIMIT_EXCEEDED",Ze="WARDEN_LIMIT_OK",Ke=3e3;class Qe extends Ue.a{constructor({baseUrl:t,site:e,userId:i,fingerprint:s,limit:n}){super(),t&&e&&i&&s&&n?(this.baseUrl=t,this.site=e,this.userId=i,this.fingerprint=s,this.limit=n,this.tickTimeoutRef=null,this.baseUrl.endsWith("/")||(this.baseUrl+="/"),this.init()):console.error("Warden requires baseUrl, site, userId, limit for correct instantiation.")}init(){this.initPageVisibilityAPI(),this.boundOnUnload=()=>this.onUnload(),window.addEventListener("unload",this.boundOnUnload),this.tick()}onUnload(){navigator.sendBeacon(this.removeUrl,null)}initPageVisibilityAPI(){this.hiddenPropertyName=void 0,this.visibilityChangeEventName=void 0,void 0!==document.hidden?(this.hiddenPropertyName="hidden",this.visibilityChangeEventName="visibilitychange"):void 0!==document.mozHidden?(this.hiddenPropertyName="mozHidden",this.visibilityChangeEventName="mozvisibilitychange"):void 0!==document.msHidden?(this.hiddenPropertyName="msHidden",this.visibilityChangeEventName="msvisibilitychange"):void 0!==document.webkitHidden?(this.hiddenPropertyName="webkitHidden",this.visibilityChangeEventName="webkitvisibilitychange"):this.visibilityChangeEventName="visibilitychange",this.currentVisibilityState=this.visibilityState,this.boundOnVisibilityChange=()=>this.onVisibilityChange(this.visibilityState),window.document.addEventListener(this.visibilityChangeEventName,this.boundOnVisibilityChange),this.boundOnPageHide=()=>this.onVisibilityChange("hidden"),window.addEventListener("pagehide",this.boundOnPageHide)}onVisibilityChange(t){this.currentVisibilityState!==t&&(this.currentVisibilityState=t,"visible"===t?this.handleWindowIsActive():"hidden"===t&&this.handleWindowIsInactive())}get visibilityState(){return this.hiddenPropertyName?window.document[this.hiddenPropertyName]?"hidden":"visible":void 0!==window.document.visibilityState?window.document.visibilityState:void 0}handleWindowIsInactive(){this.tickTimeoutRef&&(clearTimeout(this.tickTimeoutRef),this.tickTimeoutRef=null,this.remove())}handleWindowIsActive(){this.dispatchWardenEvent(Ze),this.tickTimeoutRef||this.tick()}tick(){"visible"===this.visibilityState?fetch(this.tickUrl,{method:"GET"}).then(t=>{403===t.status?this.dispatchWardenEvent(Je):this.dispatchWardenEvent(Ze)}).catch(t=>console.error("Warden - Error while fetching tick:",t)).finally(()=>{this.tickTimeoutRef=setTimeout(()=>this.tick(),Ke)}):this.tickTimeoutRef=null}remove(){fetch(this.removeUrl,{method:"GET",keepalive:!0}).then(()=>this.dispatchWardenEvent(Ze)).catch(t=>console.error("Warden - Error while fetching delete:",t))}allow(){fetch(this.allowUrl,{method:"GET"}).then(()=>this.dispatchWardenEvent(Ze)).catch(t=>console.error("Warden - Error while fetching allow:",t))}dispatchWardenEvent(t){if(!t)return;const e=new CustomEvent(t);super.dispatchEvent(e)}get tickUrl(){const t=new URL(this.baseUrl+"api/v1/tick");return t.searchParams.set("site",this.site),t.searchParams.set("user_id",this.userId),t.searchParams.set("fingerprint",this.fingerprint),t.searchParams.set("limit",this.limit),t.href}get removeUrl(){const t=new URL(this.baseUrl+"api/v1/remove");return t.searchParams.set("site",this.site),t.searchParams.set("user_id",this.userId),t.searchParams.set("fingerprint",this.fingerprint),t.searchParams.set("limit",this.limit),t.href}get allowUrl(){const t=new URL(this.baseUrl+"api/v1/allow");return t.searchParams.set("site",this.site),t.searchParams.set("user_id",this.userId),t.searchParams.set("fingerprint",this.fingerprint),t.searchParams.set("limit",this.limit),t.href}destroy(){window.removeEventListener("unload",this.boundOnUnload),window.document.removeEventListener(this.visibilityChangeEventName,this.boundOnVisibilityChange),window.removeEventListener("pagehide",this.boundOnPageHide),super.destroy()}}class Xe{static endsWith(t,e){return!(!t||"string"!=typeof t||!e||"string"!=typeof e)&&(-1!==t.indexOf(e)&&t.indexOf(e)+e.length===t.length)}static getRandomString(t=4,e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"){const i=e.length;let s="";for(let n=0;n<t;n++)s+=e.charAt(Math.floor(Math.random()*i));return s}static kebabCase(t){return[" ","_"].includes(t)?t:t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}}const Ye=Symbol("INSTANCE"),ti=Symbol("SINGELTONENFORCER");class ei{constructor(t){if(t!==ti)throw new Error("Instantiation failed: Use UserCapping.instance instead of new.");this.storageObject=null,this.boundOnWardenLimitExceeded=null,this.boundOnWardenLimitOk=null,this.init()}static get instance(){return this[Ye]||(this[Ye]=new ei(ti)),this[Ye]}init(){const t=s.a.instance.warden||{},e=!!t.enabled,{hasPaidAccess:i,hasNoAdsAccess:n,userId:a,sessionLimit:o}=d.a.instance;if(!e||!a||!o||!i&&!n)return;this.storageObject=new C("warden","local");let r="";this.storageObject.getItem("fingerprint")?r=this.storageObject.getItem("fingerprint"):(r=Xe.getRandomString(16),this.storageObject.setItem("fingerprint",r)),this.warden=new Qe({baseUrl:t.baseUrl||"",site:s.a.instance.domain||"",userId:a,fingerprint:r,limit:o}),this.boundOnWardenLimitExceeded=()=>this.onWardenLimitExceeded(),this.warden.addEventListener(Je,this.boundOnWardenLimitExceeded),this.boundOnWardenLimitOk=()=>this.onWardenLimitOk(),this.warden.addEventListener(Ze,this.boundOnWardenLimitOk),c.a.subscribe(l.Pb,this.onUserCappingAllow,this)}onWardenLimitExceeded(){c.a.publish(l.Qb)}onWardenLimitOk(){c.a.publish(l.Rb)}onUserCappingAllow(){this.warden&&"function"==typeof this.warden.allow&&this.warden.allow()}}const ii=Symbol("INSTANCE"),si=Symbol("SINGELTONENFORCER");class ni{constructor(t){if(t!==si)throw new Error("Instantiation failed: Use LanguageModel.instance instead of new.");this.init()}static get instance(){return this[ii]||(this[ii]=new ni(si)),this[ii]}init(){window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.subscribe(l.S,this.onSwitchLanguageTriggered,this)}determineLanguage(){const t=S.a.getItem(u.i.lang.name),e=navigator.language.slice(0,2);let i=t;i||(i="de"===e?"de":"en"),this._language=i}onSwitchLanguageTriggered(t){t&&(this.language=t)}get language(){return this._language||this.determineLanguage(),this._language}set language(t){if(this._language===t)return this._language;return S.a.setItem(u.i.lang.name,t)||console.warn("LanguageModel: Unable to store new language value permantly because sessionStorage is not available"),this._language=t,window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(l.R,this._language),this._language}}class ai extends o.Component{constructor(...t){super(...t),this.localizationProto=this.el.innerHTML,this.localizationSettings=JSON.parse(this.data.localizationSettings),this.defaultLanguage=this.localizationSettings.defaultLanguage||"de",this.fallbackLanguage=this.localizationSettings.fallbackLanguage||"de",this.language=ni.instance.language,this.localizedFields=(this.localizationProto.match(/#?__localized_((\w|:)*)__/g)||[]).map(t=>t.split(/__(localized_)?/g)[2]).filter((t,e,i)=>i.indexOf(t)===e),this._localize(),this.initSwitchLanguageButton()}_renderPrototype(t,e){let i=this.localizationProto;return Object.keys(this.localizedFields).forEach(s=>{const n=this.localizedFields[s];if(n){const s=n.split(":")[0],a=n.split(":")[1];let o=void 0!==t[s]?t[s]:e[s];a&&(o=o[a]),i=i.replace(new RegExp(`__localized_${n}__`,"g"),o)}}),i}_localize(){const t=this.localizationSettings.labels,e=Object.keys(t);let i=this.language;const s=t[this.fallbackLanguage];e.includes(this.language)||(i=this.defaultLanguage),this.language=i;const n=t[i],a=this._renderPrototype(n,s);this.el.textContent="",this.el.insertAdjacentHTML("afterbegin",a);Array.from(this.el.querySelectorAll("[data-localized-href]")).forEach(t=>{t.getAttribute("data-localized-href")&&(t.setAttribute("href",t.getAttribute("data-localized-href")),t.removeAttribute("data-localized-href"))}),this.boundOnComponentLoaderScanFinished=()=>this.onComponentLoaderScanFinished(),this.subscribe(l.H,this.boundOnComponentLoaderScanFinished),window.polygon.componentLoader.scan()}onComponentLoaderScanFinished(){this.unsubscribe(l.H,this.boundOnComponentLoaderScanFinished),this.onLocalized()}onSwitchLanguageTriggered(){}onLocalized(){}initSwitchLanguageButton(){if(this.switchLanguageButton=this.el.querySelector('[data-localization-el="switchLanguageButton"]'),this.switchLanguageButton)try{window.sessionStorage;this.switchLanguageButton.addEventListener("click",this.onSwitchLanguageButtonClicked.bind(this))}catch(t){this.switchLanguageButton.remove()}}onSwitchLanguageButtonClicked(t){t.preventDefault();const e="de"===this.language?"en":"de";this.switchLanguage(e)}switchLanguage(t){this.onSwitchLanguageTriggered();try{ni.instance.language=t}catch(t){return void console.warn(t.message)}window.location.reload()}destroy(){super.destroy()}}const oi=Symbol("INSTANCE"),ri=Symbol("SINGELTONENFORCER");class li{constructor(t){if(t!==ri)throw new Error("Instantiation failed: Use SourcepointModel.instance instead of new.");this.init()}static get instance(){return this[oi]||(this[oi]=new li(ri)),this[oi]}init(){this.message="",this.errorOccurred=!1}}const hi="STATE_DEFAULT",ci="STATE_LOADING",di="STATE_ERROR";class ui extends ai{onLocalized(){this.init()}init(){this.settings=JSON.parse(this.data.settings),this.message=this.el.querySelector('[data-adblock-el="message"]'),this.loader=this.el.querySelector('[data-adblock-el="loader"]'),this.focusTrap=this.el.querySelector('[data-adblock-el="focusTrap"]'),this.whitelistButton=this.el.querySelector('[data-adblock-el="whitelistButton"]'),this.continueWithAdblockerButton=this.el.querySelector('[data-adblock-el="continueWithAdblockerButton"]'),this.loginLink=this.el.querySelector('[data-adblock-el="loginLink"]'),this.switchLanguageElement=this.el.querySelector('[data-adblock-el="switchLanguageElement"]'),this.isInitialized=!1,this.hasErrorOccurred=!1,this.state=ci,this.subscribe(l.rb,this.onError,this),this.subscribe(l.tb,this.onSourcepointMessageReceived,this),this.initContinueWithAdblockerButton(),this.initWhitelistButton(),"adblock-api"===li.instance.message&&this.onInitialized()}initContinueWithAdblockerButton(){this.continueWithAdblockerButton&&this.continueWithAdblockerButton.addEventListener("click",t=>{this.onContinueWithAdblockerButtonClicked(t)})}initWhitelistButton(){this.whitelistButton&&this.whitelistButton.addEventListener("click",t=>{this.onWhitelistButtonClicked(t)})}onContinueWithAdblockerButtonClicked(t){t.preventDefault(),this.publish(l.Ab,u.l.continue_with_adblocker),this.el.classList.add("hidden"),this.publish(l.eb,this),this.state=ci,this.publish(l.b)}onWhitelistButtonClicked(t){t.preventDefault(),this.hasErrorOccurred?this.state=di:(this.publish(l.Ab,u.l.whitelist_instructions_viewed,this.language),this.state=ci)}onInitialized(){this.isInitialized=!0,this.el.classList.remove("hidden"),this.focusTrap&&window.requestAnimationFrame(()=>{this.focusTrap.focus()}),this.publish(l.gb,this),this.state=hi,this.publish(l.c)}onError(){this.hasErrorOccurred=!0,this.isInitialized?this.state=di:(this.state=hi,this.isInitialized=!0)}onSourcepointMessageReceived(t){"adblock-api"===t&&this.onInitialized()}get id(){return this.data.componentId}get preventScrolling(){return!0}get state(){return this._state}set state(t){switch(this._state=t,t){case ci:c.a.toggleElementVisibility(this.message,!1),c.a.toggleElementVisibility(this.loader,!0),c.a.toggleElementVisibility(this.switchLanguageElement,!1);break;case di:c.a.toggleElementVisibility(this.message,!1),c.a.toggleElementVisibility(this.loader,!0),c.a.toggleElementVisibility(this.switchLanguageElement,!0);break;case hi:default:c.a.toggleElementVisibility(this.message,!0),c.a.toggleElementVisibility(this.loader,!1),c.a.toggleElementVisibility(this.switchLanguageElement,!0)}}destroy(){super.destroy()}}class pi extends o.Component{constructor(...t){if(super(...t),window.adobe&&window.adobe.target)this.publish(l.d);else{this.el.onload=()=>{this.publish(l.d)};const t=this.el.getAttribute("data-src");t&&this.el.setAttribute("src",t)}}destroy(){super.destroy()}}class gi{static isEqual(t,e){if(!Array.isArray(t)||!Array.isArray(e))throw new Error("ArrayUtils isEqual: Missing or malformed parameters, expected two Arrays");if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}}const mi=Symbol("INSTANCE"),yi=Symbol("SINGELTONENFORCER");class bi{constructor(t){if(t!==yi)throw new Error("Instantiation failed: Use TeaserRenderer.instance instead of new.");this.init()}static get instance(){return this[mi]||(this[mi]=new bi(yi)),this[mi]}init(){this.prototypes={};document.querySelectorAll("template[data-teaser-prototype]").forEach(t=>{const{variant:e,type:i,domain:s}=t.dataset;e&&i&&s&&(this.prototypes[`${e}-${i}-${s}`]=t)})}create(t={},e=u.q){const i=s.a.instance.domain,n=t.domain||"",a=t.type||"",o=Array.isArray(t.flags)?t.flags:[],r=Array.isArray(t.iconAuxiliaries)?t.iconAuxiliaries:[],l=this.prototypes[`${e}-${a}-${n}`]||this.prototypes[`${e}-news-${n}`]||this.prototypes[`${e}-${a}-${i}`]||this.prototypes[`${e}-news-${i}`],h=l&&l.content&&l.content.firstElementChild?l.content.firstElementChild.cloneNode(!0):null;if(!h)return console.warn(`TeaserFactory.render failed: No prototype found for teaser variant "${e}"`),null;const c=Array.from(h.querySelectorAll("[data-topmark-flag-name]"));let d=!1;Array.isArray(c)&&c.forEach(t=>{Array.isArray(o)&&o.includes(t.dataset.topmarkFlagName)?d=!0:t.parentElement.remove()});const p=h.querySelector('[data-topmark-el="text"]');t.headline&&t.topmark&&(d||!p)&&(t.headline=`${t.topmark}: ${t.headline}`,delete t.topmark),!t.topmark&&p&&p.remove();const g=h.querySelector('[data-topmark-el="container"]');g&&(0===o.length&&!t.topmark||0===g.children.length)&&g.remove();const m=Array.from(h.querySelectorAll("[data-flag-name]"));Array.isArray(m)&&Array.isArray(o)&&m.forEach(t=>{o.includes(t.dataset.flagName)||t.remove()});const y=h.querySelector("[data-contains-flags]");y&&(0!==o.length&&0!==y.children.length||y.remove());const b=Array.from(h.querySelectorAll("[data-media-button-name]"));Array.isArray(b)&&b.forEach(e=>{t.style&&t.style===e.dataset.mediaButtonName||e.remove()});const f=Array.from(h.querySelectorAll("[data-icon-auxiliary]"));Array.isArray(f)&&Array.isArray(r)&&f.forEach(t=>{const e=t.dataset.iconAuxiliary||"";r.includes(e)||t.remove()});const w=Array.from(h.querySelectorAll("[data-image]"));Array.isArray(w)&&!t.imageId&&w.forEach(e=>{if(t.imageSrc){e.querySelector("img").dataset.src=t.imageSrc}else e.remove()});const v=Array.from(h.querySelectorAll("[data-headline-image]"));Array.isArray(v)&&!t.headlineImageId&&v.forEach(t=>{t.remove()});const I=B.a.populateElement(h,t);let A=I.querySelectorAll("[data-auxiliary]");A.forEach(t=>{0===t.textContent.length&&(t.nextElementSibling.hasAttribute("data-auxiliary-bull")&&t.nextElementSibling.remove(),t.remove())}),A=I.querySelectorAll("[data-auxiliary]");const E=I.querySelector("[data-icon-auxiliary][data-auxiliary-bull]");return E&&0===A.length&&E.remove(),I}}class fi{static convertArticleToTeaser(t){const e={};if(e.id=t.id?t.id:"",e.collection="article",e.domain=t.domain?t.domain:s.a.instance.domain,e.channel=t.channel&&t.channel.title?t.channel.title:"",e.headline=t.title?t.title:"",e.topmark=t.heading?t.heading:"",e.text=t.intro?t.intro:"",e.type=t.type?t.type:"news",e.style=t.teaser&&t.teaser.type?t.teaser.type:t.style||"default",e.url=t.url?t.url:"",e.imageId=t.header_image?t.header_image:"",!e.url||!e.url.length)return null;e.flags=[];const i=fi.getArticlePaidFlag(t);i&&e.flags.push(i);const n=s.a.instance.domain;let a=t.domain?t.domain:"";const o=fi.getArticleSubdomain(t);o&&(a=o);let r=t.access_level?t.access_level:"free";"conditional"===r&&(r=d.a.instance.hasConditionalAccess?"free":"paid"),"paid"!==r&&n!==a&&e.flags.push(a),t.is_live&&e.flags.push("live"),t.forward_to_canonical_url&&t.canonical_url&&t.canonical_url&&t.canonical_url.includes("manager-magazin.de")&&e.flags.push("mmo"),t.is_breaking&&e.flags.push("breaking");e.style&&["gallery","video","audio"].includes(e.style)&&e.flags.push(e.style),e.iconAuxiliaries=[],"audio"===e.style?e.iconAuxiliaries.push("Audio"):"video"===e.style?e.iconAuxiliaries.push("Video"):"gallery"===e.style?e.iconAuxiliaries.push("Gallery"):e.iconAuxiliaries.push("Text");const l=t.teaser&&Number.isInteger(t.teaser.length)?t.teaser.length:0;if(l)if("gallery"===e.style)e.length=`${l} ${1===l?"Bild":"Bilder"}`,e.auxiliaryLength=e.length;else{const t=Math.round(l/60),i=l%60;e.length=`${(""+t).padStart(2,"0")}:${(""+i).padStart(2,"0")}`,e.auxiliaryLength=(t<1?1:t)+" Min"}const h=t.publish_date?new Date(1e3*t.publish_date).toLocaleDateString("de-DE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";e.timestamp=h?h+" Uhr":"";const c=t.author_details_prefix?t.author_details_prefix+" ":"Von ";let u=t.author_details_suffix?t.author_details_suffix:"";if(e.meta="",Array.isArray(t.authors)&&t.authors.length>0){let i="";t.authors.length>0&&(i=c,t.authors.forEach((s,n)=>{if(!s||!s.name)return;const a=0===n,o=n===t.authors.length-1;a&&s.image&&!e.headlineImageId&&(e.headlineImageId=s.image),o&&t.authors.length>1?i+=" und ":0!==n&&(i+=", "),i+=s.name}));const n=s.a.instance.text&&s.a.instance.text.authorDetailsSuffix&&s.a.instance.text.authorDetailsSuffix.removeWhitespaceBeforeCharacters?s.a.instance.text.authorDetailsSuffix.removeWhitespaceBeforeCharacters:[];u&&Array.isArray(n)&&(n.includes(u.charAt(0))||(u=" "+u)),e.meta=i+u}return e}static getArticlePaidFlag(t){let e="",i=t.access_level?t.access_level:"free";"conditional"===i&&(i=d.a.instance.hasConditionalAccess?"free":"paid");let n="";if("paid"===i&&(n=t.paid_flag?t.paid_flag:"",""===n)){let e=t.domain?t.domain:"",i=fi.getArticleSubdomain(t);""===e&&(e=s.a.instance.domain),""===i&&(i=e),"spon"===t.domain?n="Spplus":i&&"hbm"===i?n="Hbmplus":"mmo"===t.domain&&(n="Mmplus")}return n&&(e=`${n}-${i}`),e}static getArticleSubdomain(t){let e="";const i=t.channel&&t.channel.slug?t.channel.slug:"";return"harvard"===i&&(e="hbm"),"deinspiegel"===i&&(e="dein"),e}}const wi=Symbol("INSTANCE"),vi=Symbol("SINGELTONENFORCER");class Ii{constructor(t){if(t!==vi)throw new Error("Instantiation failed: Use SiteSearchAPI.instance instead of new.");this.init()}static get instance(){return this[wi]||(this[wi]=new Ii(vi)),this[wi]}init(){const t=s.a.instance;t.thirdparty&&t.thirdparty.sitesearch&&t.thirdparty.sitesearch.apiUrl?this.apiUrl=t.thirdparty.sitesearch.apiUrl:console.error("SiteSearchAPI requires apiUrl for correct instantiation.")}getTeasersBySearchOptions(t={}){const{query:e,segments:i,author:s,fields:n,after:a,before:o,pageSize:r,page:l}=t;if(!i||!Array.isArray(i))return Promise.reject(new Error("SiteSearchAPI getTeasersBySearchOptions - missing required param `segments`"));if(!(e&&"string"==typeof e||s&&"string"==typeof s))return Promise.reject(new Error("SiteSearchAPI getTeasersBySearchOptions - missing required param `query` or `author`, please provide either or both"));const h=new URL(this.apiUrl+"/search");return h.searchParams.set("segments",i.join(",")),e&&"string"==typeof e&&h.searchParams.set("q",e),s&&"string"==typeof s&&h.searchParams.set("author",s),n&&"string"==typeof n&&h.searchParams.set("fields",n),Number.isInteger(a)&&h.searchParams.set("after",a),Number.isInteger(o)&&h.searchParams.set("before",o),r&&Number.isInteger(r)&&r>=10&&h.searchParams.set("page_size",r),Number.isInteger(l)&&h.searchParams.set("page",l),this.fetchUrl(h).then(t=>(t.success&&(t.teasers=Array.isArray(t.results)?t.results.map(t=>fi.convertArticleToTeaser(t)):[],delete t.results),Promise.resolve(t)))}getTeasersByIds(t=[]){if(!t||!Array.isArray(t)||0===t.length||t.filter(t=>"string"!=typeof t).length)return Promise.reject(new Error("SiteSearchAPI getTeasersByIds - missing or malformed required param `id`"));const e=new URL(this.apiUrl+"/fetch");return e.searchParams.set("ids",t.join(",")),this.fetchUrl(e).then(t=>{if(!t.success||!t.results||!Array.isArray(t.results))return Promise.resolve({success:!1,code:t.code||""});const e=t.results.map(t=>fi.convertArticleToTeaser(t)),i=t.numResults||e.length;return Promise.resolve({success:!0,numResults:i,teasers:e})})}fetchUrl(t){return fetch(t,{method:"GET",headers:{"Content-Type":"text/plain"}}).then(t=>t.json()).then(t=>{if(t.code)return Promise.resolve({success:!1,code:t.code});const e=t.results&&Array.isArray(t.results)?t.results:[],i=Number.isInteger(t.num_results)?t.num_results:e.length;return Promise.resolve({success:!0,numResults:i,results:e})}).catch(()=>(console.warn(`SiteSearchAPI fetchUrl – failed to fetch url "${t}"`),Promise.resolve({success:!1,code:""})))}}const Ai="STATE_LOADING",Ei="STATE_EMPTY",Si="STATE_ERROR",ki="STATE_DEFAULT",Ci=3;class Pi extends o.Component{constructor(...t){super(...t),d.a.instance.isLoggedIn&&(this.dataSettings=this.data.settings?JSON.parse(this.data.settings):{},this.collection=this.dataSettings.collection,this.documentIds=[],this.teaserLookup={},this.bookmarks=T.instance,this.content=this.el.querySelector('[data-bookmarkscardsslider-el="content"]'),this.teaserlist=this.el.querySelector('[data-bookmarkscardsslider-el="teaserlist"]'),this.loader=this.el.querySelector('[data-bookmarkscardsslider-el="loader"]'),this.loaderOverlay=this.el.querySelector('[data-bookmarkscardsslider-el="loader-overlay"]'),this.emptyState=this.el.querySelector('[data-bookmarkscardsslider-el="emptyState"]'),this.error=this.el.querySelector('[data-bookmarkscardsslider-el="error"]'),this.state=Ai,this.subscribe(l.w,this.onBookmarksError),this.bookmarks.isInitialized?this.init():this.subscribe(l.x,this.init))}init(){this.subscribe(l.s,()=>this.refresh()),this.subscribe(l.t,()=>this.refresh()),this.subscribe(l.r,()=>this.refresh()),this.subscribe(l.z,()=>this.refresh()),this.refresh()}onBookmarksError(t){t&&t.collection&&t.collection!==this.collection||(!t||t.type!==u.a&&t.type!==u.b?this.state!==ki&&(this.state=Si):this.refresh())}refresh(){const t=this.bookmarks.documentIds.length,e=this.bookmarks.documentIds.length>Ci?this.bookmarks.documentIds.length-Ci:0,i=this.bookmarks.documentIds.slice(e,t);if(i.reverse(),gi.isEqual(i,this.documentIds)&&this.state===ki)return Promise.resolve();this.state=Ai,this.documentIds=i;const s=this.documentIds.filter(t=>!this.teaserLookup[t]);return 0===s.length?(this.updateView(),Promise.resolve()):Ii.instance.getTeasersByIds(s).then(t=>t.success?(Array.isArray(t.teasers)&&t.teasers.length&&t.teasers.forEach(t=>{if(!t.id)return;const e={...t};this.dataSettings.fallbackImageSrc&&(e.imageSrc=this.dataSettings.fallbackImageSrc),this.teaserLookup[e.id]=e}),this.updateView(),Promise.resolve()):s.length<this.documentIds.length?(this.updateView(),Promise.resolve()):(this.state=Si,Promise.reject()))}updateView(){const t=this.documentIds.filter(t=>!this.teaserLookup[t]),e=this.documentIds&&this.documentIds.length&&t.length<this.documentIds.length;this.state=e?ki:Ei,this.renderTeasers()}renderTeasers(){this.teaserlist.innerHTML="",this.documentIds.forEach((t,e)=>{const i=this.teaserLookup[t];if(!i)return;const s={...i},n=e===this.documentIds.length-1;s.additionalClassesString=n?"lg:mx-24 md:mx-24 sm:mx-16":"lg:ml-24 md:ml-24 sm:ml-16";const a=bi.instance.create(s,u.o);a&&this.teaserlist.append(a)}),this.publish(l.T),this.scan(),this.publish(l.Ob,{updateId:this.dataSettings.updateId})}get state(){return this._state||(this._state=ki),this._state}set state(t){switch(this._state=t,t){case Ai:c.a.toggleElementVisibility(this.content,!0),c.a.toggleElementVisibility(this.loader,!0),c.a.toggleElementVisibility(this.loaderOverlay,this.teaserlist.hasChildNodes()),c.a.toggleElementVisibility(this.emptyState,!1),c.a.toggleElementVisibility(this.error,!1);break;case Ei:c.a.toggleElementVisibility(this.content,!1),c.a.toggleElementVisibility(this.loader,!1),c.a.toggleElementVisibility(this.emptyState,!0),c.a.toggleElementVisibility(this.error,!1);break;case Si:c.a.toggleElementVisibility(this.content,!1),c.a.toggleElementVisibility(this.loader,!1),c.a.toggleElementVisibility(this.emptyState,!1),c.a.toggleElementVisibility(this.error,!0);break;case ki:default:c.a.toggleElementVisibility(this.content,!0),c.a.toggleElementVisibility(this.loader,!1),c.a.toggleElementVisibility(this.emptyState,!1),c.a.toggleElementVisibility(this.error,!1)}}}const Li="STATE_ACTIVE",Ti="STATE_INACTIVE";class _i extends o.Component{constructor(...t){super(...t),this.settings=this.data.settings?JSON.parse(this.data.settings):{},this.documentId=this.settings.documentId,this.collection=this.settings.collection,this.documentId&&this.collection?(this.bookmarks=T.instance,this.iconInactive=this.el.querySelector('[data-bookmark-button-el="icon-inactive"]'),this.iconActive=this.el.querySelector('[data-bookmark-button-el="icon-active"]'),this.label=this.el.querySelector('[data-bookmark-button-el="label"]'),this.boundOnClick=()=>this.onClick(),this.init()):c.a.toggleElementVisibility(this.el,!1)}init(){this.state=this.bookmarks.contains(this.documentId,this.collection)?Li:Ti,this.subscribe(l.s,this.onBookmarkAdded),this.subscribe(l.t,this.onBookmarkDeleted),this.subscribe(l.r,this.onAllBookmarksDeleted),this.subscribe(l.z,this.onBookmarksUpdated),this.subscribe(l.w,this.onBookmarksError),this.el.addEventListener("click",this.boundOnClick)}onClick(){if(this.el.hasAttribute("disabled"))return;const t=this.state===Ti?l.q:l.v;this.publish(t,this.documentId,this.collection),this.state=this.state===Ti&&d.a.instance.isLoggedIn?Li:Ti,this.el.setAttribute("disabled",""),setTimeout(()=>{this.el.removeAttribute("disabled")},200)}onBookmarkAdded(t,e){this.documentId===t&&this.collection===e&&this.state!==Li&&(this.state=Li)}onBookmarkDeleted(t,e){this.documentId===t&&this.collection===e&&this.state!==Ti&&(this.state=Ti)}onAllBookmarksDeleted(t){this.collection===t&&this.state!==Ti&&(this.state=Ti)}onBookmarksUpdated(){this.refreshState()}onBookmarksError(t){!t||t.type!==u.a&&t.type!==u.b||t.documentId!==this.documentId||t.collection!==this.collection||this.refreshState()}refreshState(){this.state=this.bookmarks.contains(this.documentId,this.collection)?Li:Ti}get state(){return this._state||(this._state=Ti),this._state}set state(t){t===Li?(this._state=Li,c.a.toggleElementVisibility(this.iconInactive,!1),c.a.toggleElementVisibility(this.iconActive,!0),this.label.textContent="Aus Merkliste entfernen"):(this._state=Ti,c.a.toggleElementVisibility(this.iconActive,!1),c.a.toggleElementVisibility(this.iconInactive,!0),this.label.textContent="Zur Merkliste hinzufügen")}destroy(){this.el.removeEventListener("click",this.boundOnClick)}}const Oi="STATE_LOADING",xi="STATE_EMPTY",Ni="STATE_ERROR",Bi="STATE_DEFAULT";class Di extends o.Component{constructor(...t){super(...t),d.a.instance.isLoggedIn&&(this.dataSettings=this.data.settings?JSON.parse(this.data.settings):{},this.collection=this.dataSettings.collection,this.documentIds=[],this.teaserLookup={},this.bookmarks=T.instance,this.deleteAllLink=this.el.querySelector('[data-bookmarkslist-el="deleteAllLink"]'),this.content=this.el.querySelector('[data-bookmarkslist-el="content"]'),this.teaserlist=this.el.querySelector('[data-bookmarkslist-el="teaserlist"]'),this.loader=this.el.querySelector('[data-bookmarkslist-el="loader"]'),this.loaderOverlay=this.el.querySelector('[data-bookmarkslist-el="loader-overlay"]'),this.emptyState=this.el.querySelector('[data-bookmarkslist-el="emptyState"]'),this.error=this.el.querySelector('[data-bookmarkslist-el="error"]'),this.paginationEl=this.el.querySelector('[data-bookmarkslist-el="pagination"]'),this.paginationBackEl=this.el.querySelector('[data-pagination-el="back"]'),this.paginationForwardEl=this.el.querySelector('[data-pagination-el="forward"]'),this.paginationCurrentEl=this.el.querySelector('[data-pagination-el="current"]'),this.paginationTotalEl=this.el.querySelector('[data-pagination-el="total"]'),this.paginationPageSize=20,this._paginationItemsTotal=0,this._paginationPagesTotal=0,this._paginationCurrentPage=1,this.boundOnPaginationBackClick=t=>this.onPaginationBackClick(t),this.boundOnPaginationForwardClick=t=>this.onPaginationForwardClick(t),this.boundOnDeleteAllClick=t=>this.onDeleteAllClick(t),this.state=Oi,this.subscribe(l.w,this.onBookmarksError),this.bookmarks.isInitialized?this.init():this.subscribe(l.x,this.init))}init(){this.paginationBackEl&&this.paginationBackEl.addEventListener("click",this.boundOnPaginationBackClick),this.paginationForwardEl&&this.paginationForwardEl.addEventListener("click",this.boundOnPaginationForwardClick),this.deleteAllLink&&this.deleteAllLink.addEventListener("click",this.boundOnDeleteAllClick),this.subscribe(l.s,()=>this.refresh()),this.subscribe(l.t,()=>this.refresh()),this.subscribe(l.r,()=>this.refresh()),this.subscribe(l.z,()=>this.refresh()),this.refresh()}onDeleteAllClick(t){t.preventDefault(),this.publish(l.u,this.collection)}onPaginationBackClick(t){t.preventDefault(),this.paginationCurrentPage>1&&(this.paginationCurrentPage-=1,this.refresh().then(()=>this.scrollToTop()).catch(()=>{}))}onPaginationForwardClick(t){t.preventDefault(),this.paginationCurrentPage<this.paginationPagesTotal&&(this.paginationCurrentPage+=1,this.refresh().then(()=>this.scrollToTop()).catch(()=>{}))}onBookmarksError(t){t&&t.collection&&t.collection!==this.collection||(!t||t.type!==u.a&&t.type!==u.b?this.state=Ni:this.refresh())}refresh(){this.paginationItemsTotal=this.bookmarks.documentIds.length;const t=this.paginationItemsTotal-(this.paginationCurrentPage-1)*this.paginationPageSize,e=t-this.paginationPageSize>0?t-this.paginationPageSize:0,i=this.bookmarks.documentIds.slice(e,t);if(i.reverse(),gi.isEqual(i,this.documentIds)&&this.state===Bi)return Promise.resolve();this.state=Oi,this.documentIds=i;const s=this.documentIds.filter(t=>!this.teaserLookup[t]);return 0===s.length?(this.updateView(),Promise.resolve()):Ii.instance.getTeasersByIds(s).then(t=>t.success?(Array.isArray(t.teasers)&&t.teasers.length&&t.teasers.forEach(t=>{if(!t.id)return;const e={...t};e.imageId||(e.classmodifier="data-"),this.teaserLookup[e.id]=e}),this.updateView(),Promise.resolve()):s.length<this.documentIds.length?(this.updateView(),Promise.resolve()):(this.state=Ni,Promise.reject()))}updateView(){const t=this.documentIds.filter(t=>!this.teaserLookup[t]),e=this.documentIds&&this.documentIds.length&&t.length<this.documentIds.length;this.state=e?Bi:xi,c.a.toggleElementVisibility(this.deleteAllLink,e),c.a.toggleElementVisibility(this.paginationEl,e),this.renderTeasers()}renderTeasers(){this.teaserlist.innerHTML="",this.documentIds.forEach(t=>{const e=this.teaserLookup[t];if(!e)return;const i=bi.instance.create(e,u.p);if(i){if(this.teaserlist.hasChildNodes()){const t=B.a.createElementByPrototypeId("prototype-border-separator");t&&this.teaserlist.append(t)}this.teaserlist.append(i)}}),this.publish(l.T),this.scan()}scrollToTop(){window.scrollY>this.el.getBoundingClientRect().y&&mt.a.scrollToElement(this.el)}get paginationCurrentPage(){return this._paginationCurrentPage}set paginationCurrentPage(t){!Number.isInteger(t)||t<=0||(this._paginationCurrentPage=t,c.a.toggleElementVisibility(this.paginationBackEl,t>1),c.a.toggleElementVisibility(this.paginationForwardEl,t<this.paginationPagesTotal),this.paginationCurrentEl.textContent=t)}get paginationPagesTotal(){return this._paginationPagesTotal}set paginationPagesTotal(t){!Number.isInteger(t)||t<0||(this._paginationPagesTotal=t,this.paginationTotalEl.textContent=t,0===t?this.paginationCurrentPage=1:this.paginationCurrentPage>t&&(this.paginationCurrentPage=t))}get paginationItemsTotal(){return this._paginationItemsTotal}set paginationItemsTotal(t){!Number.isInteger(t)||t<0||(this._paginationItemsTotal=t,this.paginationPagesTotal=Math.ceil(t/this.paginationPageSize),this.paginationCurrentPage=this.paginationCurrentPage||1)}get state(){return this._state||(this._state=Bi),this._state}set state(t){switch(this._state=t,t){case Oi:c.a.toggleElementVisibility(this.content,!0),c.a.toggleElementVisibility(this.loader,!0),c.a.toggleElementVisibility(this.loaderOverlay,this.teaserlist.hasChildNodes()),c.a.toggleElementVisibility(this.emptyState,!1),c.a.toggleElementVisibility(this.error,!1);break;case xi:c.a.toggleElementVisibility(this.content,!1),c.a.toggleElementVisibility(this.loader,!1),c.a.toggleElementVisibility(this.emptyState,!0),c.a.toggleElementVisibility(this.error,!1);break;case Ni:c.a.toggleElementVisibility(this.content,!1),c.a.toggleElementVisibility(this.loader,!1),c.a.toggleElementVisibility(this.emptyState,!1),c.a.toggleElementVisibility(this.error,!0),this.scrollToTop();break;case Bi:default:c.a.toggleElementVisibility(this.content,!0),c.a.toggleElementVisibility(this.loader,!1),c.a.toggleElementVisibility(this.emptyState,!1),c.a.toggleElementVisibility(this.error,!1)}}destroy(){this.deleteAllLink&&this.deleteAllLink.removeEventListener("click",this.boundOnDeleteAllClick)}}const Ui="STATE_LOADING",Ri="STATE_EMPTY",Mi="STATE_ERROR",ji="STATE_DEFAULT",Vi=3;class zi extends o.Component{constructor(...t){super(...t),d.a.instance.isLoggedIn&&(this.dataSettings=this.data.settings?JSON.parse(this.data.settings):{},this.collection=this.dataSettings.collection,this.bookmarks=T.instance,this.documentIds=[],this.teaserLookup={},this.loader=this.el.querySelector('[data-bookmarksshortlist-el="loader"]'),this.loaderOverlay=this.el.querySelector('[data-bookmarksshortlist-el="loader-overlay"]'),this.emptyState=this.el.querySelector('[data-bookmarksshortlist-el="emptyState"]'),this.error=this.el.querySelector('[data-bookmarksshortlist-el="error"]'),this.content=this.el.querySelector('[data-bookmarksshortlist-el="content"]'),this.teaserlist=this.el.querySelector('[data-bookmarksshortlist-el="teaserlist"]'),this.state=Ui,this.subscribe(l.w,this.onBookmarksError),this.boundOnLazyLoad=t=>this.onLazyLoad(t),this.el.addEventListener("lazybeforeunveil",this.boundOnLazyLoad))}init(){this.subscribe(l.s,()=>this.refresh()),this.subscribe(l.t,()=>this.refresh()),this.subscribe(l.r,()=>this.refresh()),this.subscribe(l.z,()=>this.refresh()),this.refresh()}onLazyLoad(t){t.target===this.el&&(this.bookmarks.isInitialized?this.init():this.subscribe(l.x,this.init))}onBookmarksError(t){t&&t.collection&&t.collection!==this.collection||(!t||t.type!==u.a&&t.type!==u.b?this.state!==ji&&(this.state=Mi):this.refresh())}refresh(){const t=this.bookmarks.documentIds.length,e=this.bookmarks.documentIds.length>Vi?this.bookmarks.documentIds.length-Vi:0,i=this.bookmarks.documentIds.slice(e,t);if(i.reverse(),gi.isEqual(i,this.documentIds)&&this.state===ji)return Promise.resolve();this.state=Ui,this.documentIds=i;const s=this.documentIds.filter(t=>!this.teaserLookup[t]);return 0===s.length?(this.updateView(),Promise.resolve()):Ii.instance.getTeasersByIds(s).then(t=>t.success?(Array.isArray(t.teasers)&&t.teasers.length&&t.teasers.forEach(t=>{t.id&&(this.teaserLookup[t.id]=t)}),this.updateView(),Promise.resolve()):s.length<this.documentIds.length?(this.updateView(),Promise.resolve()):(this.state=Mi,Promise.reject()))}updateView(){const t=this.documentIds.filter(t=>!this.teaserLookup[t]),e=this.documentIds&&this.documentIds.length&&t.length<this.documentIds.length;this.state=e?ji:Ri,this.renderTeasers()}renderTeasers(){this.teaserlist.innerHTML="",this.documentIds.forEach(t=>{const e=this.teaserLookup[t];if(!e)return;const i=bi.instance.create(e,u.r);i&&this.teaserlist.append(i)}),this.publish(l.T)}get state(){return this._state||(this._state=ji),this._state}set state(t){switch(this._state=t,t){case Ui:c.a.toggleElementVisibility(this.content,!0),c.a.toggleElementVisibility(this.loader,!0),c.a.toggleElementVisibility(this.loaderOverlay,this.teaserlist.hasChildNodes()),c.a.toggleElementVisibility(this.emptyState,!1),c.a.toggleElementVisibility(this.error,!1);break;case Ri:c.a.toggleElementVisibility(this.content,!1),c.a.toggleElementVisibility(this.loader,!1),c.a.toggleElementVisibility(this.emptyState,!0),c.a.toggleElementVisibility(this.error,!1);break;case Mi:c.a.toggleElementVisibility(this.content,!1),c.a.toggleElementVisibility(this.loader,!1),c.a.toggleElementVisibility(this.emptyState,!1),c.a.toggleElementVisibility(this.error,!0);break;case ji:default:c.a.toggleElementVisibility(this.content,!0),c.a.toggleElementVisibility(this.loader,!1),c.a.toggleElementVisibility(this.emptyState,!1),c.a.toggleElementVisibility(this.error,!1)}}}const qi=Symbol("INSTANCE"),Fi=Symbol("SINGELTONENFORCER");class Wi{constructor(t){if(t!==Fi)throw new Error("Instantiation failed: Use BrowserHistoryService.instance instead of new.");this.registeredLayers={},this.browserHistoryLayers=[],this.currentIndex=window.history?0:-1,this.currentHash="",this.id=Date.now(),this.init()}static get instance(){return this[qi]||(this[qi]=new Wi(Fi)),this[qi]}init(){window.history&&(window.history.state&&Number.isInteger(window.history.state.index)?this.currentIndex=window.history.state.index:(this.currentIndex=window.history.length-1,window.history.replaceState({layerServiceId:this.id,index:this.currentIndex,hash:"",isInitState:!0},""))),this.boundOnKeyDown=t=>this.onKeyDown(t),window.document.addEventListener("keydown",this.boundOnKeyDown),window.polygon&&window.polygon.componentLoader&&(window.polygon.componentLoader.subscribe(l.C,this.onCloseLayerTriggered,this),window.polygon.componentLoader.subscribe(l.F,this.onOpenLayerTriggered,this)),window.addEventListener("popstate",t=>this.onPopstate(t))}register(t){t&&"string"==typeof t.id&&"string"==typeof t.hash&&"function"==typeof t.close&&"function"==typeof t.open?this.registeredLayers[t.id]=t:console.error("LayerService registration failed: layer needs to implement an id and hash string and a close and open function")}addLayerToBrowserHistory(t){if(this.currentHash&&this.currentHash===t.hash)return!1;if(window.history)if(window.history.state&&window.history.state.hash&&window.history.state.hash===t.hash){this.currentHash=t.hash?t.hash:"";const e={layerServiceId:this.id,index:this.currentIndex,hash:this.currentHash};window.history.replaceState(e,"",t.hash?"#"+t.hash:"")}else{this.currentIndex<this.browserHistoryLayers.length-1&&(this.browserHistoryLayers=this.browserHistoryLayers.slice(0,this.currentIndex+1)),this.currentIndex+=1,this.currentHash=t.hash?t.hash:"";const e={layerServiceId:this.id,index:this.currentIndex,hash:this.currentHash};window.history.pushState(e,"",this.currentHash?"#"+this.currentHash:"")}else this.currentIndex+=1;return this.browserHistoryLayers[this.currentIndex]=t,this.openLayer(this.currentIndex),this.onActiveLayerChanged(),!0}openLayer(t){const e=this.browserHistoryLayers[t];return!(!e||"function"!=typeof e.open)&&(e.open(),window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(l.E,e.id),!0)}closeLayer(t){const e=this.browserHistoryLayers[t];return!(!e||"function"!=typeof e.close)&&(e.close(),window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(l.D,e.id),!0)}back(){void 0!==this.browserHistoryLayers[this.currentIndex]&&(window.history&&"function"==typeof window.history.go?window.history.go(-1):(this.closeLayer(this.currentIndex),this.currentIndex=this.currentIndex>=0?this.currentIndex-1:-1,this.onActiveLayerChanged()))}goTo(t){if(this.currentIndex>t){const e=t>=0?t+1:0;for(let t=this.currentIndex;t>=e;t--)this.closeLayer(t);this.currentIndex=t,this.onActiveLayerChanged()}else if(this.currentIndex<t){for(let e=this.currentIndex>=0?this.currentIndex+1:0;e<=t;e++)this.openLayer(e);this.currentIndex=t,this.onActiveLayerChanged()}}restoreLayerByHash(t){let e=!1;Object.keys(this.registeredLayers).forEach(i=>{const s=this.registeredLayers[i];e||s.hash!==t||(this.addLayerToBrowserHistory(s),e=!0)})}onPopstate(t){if(!t||!t.state)return;let e,i="",s="";if(t.state.layerServiceId===this.id){if(e=t.state&&Number.isInteger(t.state.index)?t.state.index:void 0,i=t.state&&t.state.hash?t.state.hash:"",t.state&&t.state.isInitState&&this.windowHash&&window.history){const t={layerServiceId:this.id,index:Number.isInteger(e)?e:this.currentIndex,hash:""};window.history.replaceState(t,"",window.location.pathname+window.location.search)}}else if(e=t.state&&Number.isInteger(t.state.index)?t.state.index:void 0,this.currentHash!==this.windowHash)s=this.windowHash;else if(window.history){const t={layerServiceId:this.id,index:Number.isInteger(e)?e:this.currentIndex,hash:""};window.history.replaceState(t,"",window.location.pathname+window.location.search)}void 0!==e&&this.currentIndex!==e&&(this.goTo(e),this.currentHash=i),s&&this.restoreLayerByHash(s)}onKeyDown(t){t.defaultPrevented||"Escape"!==t.key&&"Esc"!==t.key&&27!==t.keyCode||void 0===this.browserHistoryLayers[this.currentIndex]||(t.preventDefault(),this.back())}onOpenLayerTriggered(t){this.registeredLayers[t]&&"function"==typeof this.registeredLayers[t].close&&"function"==typeof this.registeredLayers[t].open&&this.addLayerToBrowserHistory(this.registeredLayers[t])}onCloseLayerTriggered(){this.back()}onActiveLayerChanged(){const t=this.browserHistoryLayers[this.currentIndex];t&&t.id&&window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(l.B,t.id)}get windowHash(){return window.location.hash?window.location.hash.substring(1):""}}const Gi={_accepted:!1,eventName:l.h,init(){const t=w.a.get(u.i.affiliateConsent.name);this._accepted="true"===t},get accepted(){return this._accepted},set accepted(t){return this._accepted===t||(w.a.set(u.i.affiliateConsent.name,t,{expires:u.i.affiliateConsent.expires}),this._accepted=t,c.a.publish(l.h,{accepted:t})),this._accepted}};var $i={get instance(){return a.a.store("AffiliateConsent")}};const Hi={_accepted:!1,eventName:l.Fb,init(){const t=w.a.get(u.i.thirdPartyConsent.name);this._accepted="true"===t},get accepted(){return this._accepted},set accepted(t){return this._accepted===t||(w.a.set(u.i.thirdPartyConsent.name,t,{expires:u.i.thirdPartyConsent.expires}),this._accepted=t,c.a.publish(l.Fb,{accepted:t})),this._accepted}};var Ji={get instance(){return a.a.store("ThirdpartyConsent")}};const Zi="STATE_ACCEPTED",Ki="STATE_REJECTED";class Qi extends o.Component{constructor(...t){if(super(...t),this.settings=JSON.parse(this.data.settings),this.activator=this.el.querySelector('[data-custom-consent-el="activator"]'),this.activatorButton=this.el.querySelector('[data-custom-consent-el="activatorButton"]'),this.deactivator=this.el.querySelector('[data-custom-consent-el="deactivator"]'),this.deactivatorButton=this.el.querySelector('[data-custom-consent-el="deactivatorButton"]'),this.consentModel=null,"affiliate"===this.settings.consentType)this.consentModel=$i.instance;else{if("thirdparty"!==this.settings.consentType)return void console.warn(`CustomConsent: Unknown consentType "${this.settings.consentType}".`);this.consentModel=Ji.instance}this.boundOnConsentChanged=t=>this.onConsentChanged(t),this.boundOnActivatorButtonToggle=t=>this.onActivatorButtonToggle(t),this.boundOnDeactivatorButtonToggle=t=>this.onDeactivatorButtonToggle(t),this.subscribe(this.consentModel.eventName,this.boundOnConsentChanged),this.activatorButton.addEventListener("toggle",this.boundOnActivatorButtonToggle),this.deactivatorButton.addEventListener("toggle",this.boundOnDeactivatorButtonToggle),this.state=this.consentModel.accepted?Zi:Ki}onConsentChanged(t){this.state=t.accepted?Zi:Ki,this.updateAriaAndTabindex()}onActivatorButtonToggle(t){t.detail&&t.detail.isActive&&(this.consentModel.accepted=!0)}onDeactivatorButtonToggle(t){t.detail&&!t.detail.isActive&&(this.consentModel.accepted=!1)}updateAriaAndTabindex(){const{accepted:t}=this.consentModel;this.activatorButton.setAttribute("aria-hidden",t),this.activatorButton.setAttribute("tabindex",t?"-1":"0"),this.deactivatorButton.setAttribute("aria-hidden",!t),this.deactivatorButton.setAttribute("tabindex",t?"0":"-1")}get state(){return this._state}set state(t){t===Zi&&(c.a.toggleElementVisibility(this.activator,!1),c.a.toggleElementVisibility(this.deactivator,!0)),this._state=t}destroy(){this.unsubscribe(this.event,this.boundOnConsentChanged),this.activatorButton.removeEventListener("toggle",this.onActivatorButtonToggle),this.deactivatorButton.removeEventListener("toggle",this.onDeactivatorButtonToggle)}}const Xi=Symbol("INSTANCE"),Yi=Symbol("SINGELTONENFORCER");class ts{constructor(t){if(t!==Yi)throw new Error("Instantiation failed: Use ScriptUtils.instance instead of new.");this.pendingScripts={},this.loadedScripts={},this.scriptUrls=s.a.instance&&s.a.instance.thirdparty&&s.a.instance.thirdparty.jsSources?s.a.instance.thirdparty.jsSources:{}}static get instance(){return this[Xi]||(this[Xi]=new ts(Yi)),this[Xi]}load(t){return this.scriptUrls[t]?this.loadedScripts[t]?Promise.resolve():new Promise((e,i)=>{let s=this.pendingScripts[t];s||(s=document.createElement("script"),s.src=this.scriptUrls[t],s.dataset.name=t),s.addEventListener("load",t=>this.onScriptLoaded(t,e),{once:!0}),s.addEventListener("error",t=>this.onScriptError(t,i),{once:!0}),this.pendingScripts[t]||(this.pendingScripts[t]=s,document.body.appendChild(s))}):Promise.reject(new Error(`ScriptUtils error: unknown script name "${t}"`))}onScriptLoaded(t,e){const i=t.target,s=i.dataset.name;this.loadedScripts[s]=i,delete this.pendingScripts[s],e()}onScriptError(t,e){const i=t.target.dataset.name;delete this.pendingScripts[i],e(new Error(`ScriptUtils error: failed to load script "${i}" from ${this.scriptUrls[i]}`))}}class es{constructor(t,e){t&&t instanceof Element?(this.pinchCanvas=t,this.pinchTarget=e||this.pinchCanvas,this.scaleMin=1,this.scaleMax=2.3,this.scaleThreshold=1.65,this.transformProperty=Array.prototype.slice.call(getComputedStyle(this.pinchCanvas)).filter(t=>t.match(/^(-webkit-|-moz-|-ms-|-o-)?transform$/)).pop(),this.isInitalized=!1,this.isAttached=!1,this.isZoomed=!1,this.isZoomOngoing=!1,this.isPinchOngoing=!1,this.transitionDuration=200,this.scalingFactor=1,this.pinchStartScalingFactor=null,this.isPanning=!1,this.translation={x:0,y:0},this.panStartPointerPosition={x:null,y:null},this.panStartTranslation={x:null,y:null},this.isNativeTouchOngoing=!1,this.nativeTouchStartPosition={x:null,y:null},this.boundOnPinch=t=>this.onPinch(t),this.boundOnPinchStart=()=>this.onPinchStart(),this.boundOnPinchEnd=()=>this.onPinchEnd(),this.boundOnZoomedIn=()=>this.onZoomedIn(),this.boundOnZoomedOut=()=>this.onZoomedOut(),this.boundOnPanStart=t=>this.onPanStart(t),this.boundOnPan=t=>this.onPan(t),this.boundOnPanEnd=()=>this.onPanEnd(),this.boundOnTouchStart=t=>this.onTouchStart(t),this.boundOnTouchEnd=t=>this.onTouchEnd(t)):console.warn("PinchToZoom: invalid required argument `canvasElement`, must be of type `Element`")}init(){return Z.a.isPhone?window.Hammer?(this.isInitalized=!0,Promise.resolve()):new Promise((t,e)=>{ts.instance.load("hammerjs").then(()=>{this.isInitalized=!0,t()}).catch(()=>e())}):Promise.reject()}attach(){this.isInitalized&&!this.isAttached&&(this.zoomOut(),this.attachPinch(),this.isAttached=!0)}detach(){this.isInitalized&&this.isAttached&&(this.zoomOut(),this.detachPinch(),this.isAttached=!1)}onTouchStart(t){this.isNativeTouchOngoing=!0;const e=t.changedTouches[0];this.nativeTouchStartPosition.x=e.clientX,this.nativeTouchStartPosition.y=e.clientY}onTouchEnd(t){const e=t.changedTouches[0];this.isNativeTouchOngoing&&e.clientX!==this.nativeTouchStartPosition.x&&e.clientY!==this.nativeTouchStartPosition.y&&(this.detachPan(),this.detachPinch(),this.attachPinch(),this.attachPan(),this.isNativeTouchOngoing=!1)}onPinchStart(){this.isNativeTouchOngoing=!1,this.isPinchOngoing=!0,this.pinchStartScalingFactor=this.scalingFactor,this.updateZoom()}onPinch(t){const e=t.scale,i=Math.floor(100*e)/100,s=this.pinchStartScalingFactor*i;s>=this.scaleMin&&s<=this.scaleMax&&(this.scalingFactor=s)}onPinchEnd(){this.pinchStartScalingFactor=null,this.isPinchOngoing=!1,this.scalingFactor>=this.scaleThreshold?this.zoomIn():this.zoomOut()}onPanStart(t){this.isNativeTouchOngoing=!1,this.resetPan(),this.isPanning=!0,this.panStartPointerPosition={x:t.center.x,y:t.center.y},this.panStartTranslation=this.translation}onPan(t){if(this.isPanning){const e={x:(t.center.x-this.panStartPointerPosition.x)/this.scalingFactor,y:(t.center.y-this.panStartPointerPosition.y)/this.scalingFactor},i={x:this.translation.x-this.panStartTranslation.x,y:this.translation.y-this.panStartTranslation.y},s={x:e.x-i.x,y:e.y-i.y};(s.x||s.y)&&this.panBy(s)}}onPanEnd(){this.resetPan()}onZoomedIn(){this.resetTransition(),this.isZoomed=!0,this.attachPan(),this.isZoomOngoing=!1}onZoomedOut(){this.resetTransition(),this.isZoomed=!1,this.isZoomOngoing=!1}attachPinch(){this.hammer=new window.Hammer(this.pinchCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("pinchstart",this.boundOnPinchStart),this.hammer.on("pinch",this.boundOnPinch),this.hammer.on("pinchend",this.boundOnPinchEnd)}detachPinch(){this.hammer&&(this.hammer.off("pinchstart",this.boundOnPinchStart),this.hammer.off("pinch",this.boundOnPinch),this.hammer.off("pinchend",this.boundOnPinchEnd),this.hammer.destroy(),this.hammer=null)}attachPan(){this.hammer&&(this.hammer.on("panstart",this.boundOnPanStart),this.hammer.on("panmove",this.boundOnPan),this.hammer.on("panend",this.boundOnPanEnd),this.pinchCanvas.addEventListener("touchstart",this.boundOnTouchStart),this.pinchCanvas.addEventListener("touchend",this.boundOnTouchEnd))}detachPan(){this.hammer&&(this.resetPan(),this.resetTranslation(),this.hammer.off("panstart",this.boundOnPanStart),this.hammer.off("panmove",this.boundOnPan),this.hammer.off("panend",this.boundOnPanEnd),this.pinchCanvas.removeEventListener("touchstart",this.boundOnTouchStart),this.pinchCanvas.removeEventListener("touchend",this.boundOnTouchEnd))}updateZoom(){this.isPinchOngoing&&(this.applyTransform({scale:this.scalingFactor}),window.setTimeout(this.updateZoom.bind(this),15))}zoomIn(){this.isZoomOngoing=!0,this.scalingFactor=2.3,this.pinchTarget.style.transition=`${this.transformProperty} ${this.transitionDuration}ms ease-out`,this.applyTransform({scale:this.scalingFactor}),window.setTimeout(this.boundOnZoomedIn,this.transitionDuration);const t=new CustomEvent(l.hb,{detail:{zoomIn:!0,transitionDuration:this.transitionDuration}});this.pinchTarget.dispatchEvent(t)}zoomOut(){this.isZoomOngoing=!0,this.detachPan(),this.pinchTarget.style.transition=`${this.transformProperty} ${this.transitionDuration}ms ease-out`,this.scalingFactor=1,this.applyTransform({scale:1}),window.setTimeout(this.boundOnZoomedOut,this.transitionDuration);const t=new CustomEvent(l.hb,{detail:{zoomIn:!1,transitionDuration:this.transitionDuration}});this.pinchTarget.dispatchEvent(t)}panBy(t){if(!t.x&&!t.y)return;const e=this.pinchTarget.offsetWidth*this.scalingFactor,i=this.pinchTarget.offsetHeight*this.scalingFactor,s=(e-window.innerWidth)/2,n=(i-window.innerHeight)/2,a=s/this.scalingFactor,o=n/this.scalingFactor,r={x:this.translation.x+t.x,y:this.translation.y+t.y};Math.abs(r.x)>a&&(r.x=this.translation.x),Math.abs(r.y)>o&&(r.y=this.translation.y),r.x===this.translation.x&&r.y===this.translation.y||(this.translation=r,this.applyTransform({translation:r}))}applyTransform(t){let e=t.scale||this.scalingFactor,i=this.translation.x,s=this.translation.y;if(t.translation&&t.translation.x&&(i=t.translation.x),t.translation&&t.translation.y&&(s=t.translation.y),e>this.scaleMax&&(e=this.scaleMax),e<this.scaleMin&&(e=this.scaleMin),e<this.scaleMax){const t=(e-this.scaleMin)/(this.scaleMax-this.scaleMin);i*=t,s*=t}window.requestAnimationFrame(()=>{this.pinchTarget.style[this.transformProperty]=`scale(${e}) translate3d(${i}px,${s}px,0)`})}resetTransition(){this.pinchTarget.style.transition=""}resetTranslation(){this.translation={x:0,y:0}}resetPan(){this.isPanning=!1,this.panStartPointerPosition={x:null,y:null},this.panStartTranslation={x:null,y:null}}destroy(){this.detach()}}class is extends o.Component{constructor(...t){super(...t),(this.el.dataset.settings||this.el.dataset.settings.id)&&(this.focusCatcher=this.el.querySelector("[data-zoom-focus]"),this.closeButton=this.el.querySelector("[data-zoom-close]"),this.backdrop=this.el.querySelector("[data-zoom-backdrop]"),this.background=this.el.querySelector("[data-zoom-background]"),this.isCaptionShown=!1,this.caption=this.el.querySelector("[data-zoom-caption]"),this.imageWrapper=this.el.querySelector("[data-zoom-image]"),this.image=this.el.querySelector('[data-image-el="img"]'),this.settings=JSON.parse(this.el.dataset.settings),this.hash="bild-"+this.settings.imageId,this.animationDuration=250,this.ignoreClicks=!1,this.pinchToZoom=new es(this.el,this.image),this.image.classList.remove("opacity-full"),this.image.classList.add("opacity-none"),this.boundRepositionCloseButton=()=>this.repositionCloseButton(),this.boundCenterImage=()=>this.centerImage(),this.boundHandleWheel=t=>this.handleWheel(t),this.boundHandleClick=()=>this.handleClick(),this.boundClose=()=>{this.publish(l.C)},this.boundOnPinchZoomChanged=t=>this.onPinchZoomChanged(t),this.pinchToZoom.init().catch(()=>{this.pinchToZoom.destroy(),this.pinchToZoom=null}).finally(()=>{Wi.instance.register(this),window.location.hash==="#"+this.hash&&this.publish(l.F,this.id)}))}open(){Z.a.isPhone&&Z.a.isIOS&&(window.addEventListener("resize",this.boundRepositionCloseButton),window.addEventListener("resize",this.boundCenterImage),this.centerImage()),Z.a.isPhone||this.el.addEventListener("wheel",this.boundHandleWheel),this.background&&this.background.addEventListener("click",this.boundHandleClick),this.toggleZoomLayer(!0),this.publish(l.gb,this),this.settings.zoomAnimation&&this.settings.zoomId?(this.publish(l.O,this.settings.zoomId,this.animationDuration),window.setTimeout(()=>this.showImageOnLazyload(),this.animationDuration)):this.showImageOnLazyload(),this.showOverlay(),this.focusOverlay(),this.toggleInterface(!1),this.pinchToZoom&&(this.pinchToZoom.attach(),this.image.addEventListener(l.hb,this.boundOnPinchZoomChanged))}close(){window.removeEventListener("scroll",this.boundHandleScroll),window.removeEventListener("resize",this.boundRepositionCloseButton),window.removeEventListener("resize",this.boundCenterImage),this.background&&this.background.removeEventListener("click",this.boundHandleClick),this.hideOverlay(),this.hideImage(),this.toggleInterface(!0),this.publish(l.eb,this),window.setTimeout(()=>{this.toggleZoomLayer(!1)},this.animationDuration),this.pinchToZoom&&(this.image.removeEventListener(l.hb,this.boundOnPinchZoomChanged),this.pinchToZoom.detach())}handleWheel(t){this.caption&&this.caption.contains(t.target)||(this.el.removeEventListener("wheel",this.boundHandleWheel),this.boundClose())}handleClick(){this.ignoreClicks||this.toggleInterface(this.isCaptionShown)}onPinchZoomChanged(t){t.detail&&"boolean"==typeof t.detail.zoomIn&&(this.toggleInterface(t.detail.zoomIn),Number.isInteger(t.detail.transitionDuration)&&(this.ignoreClicks=!0,window.setTimeout(()=>{this.ignoreClicks=!1},t.detail.transitionDuration)))}toggleInterface(t){t?(this.hideCaption(),this.hideCloseButton(),this.isCaptionShown=!1):(this.showCaption(),this.showCloseButton(),this.isCaptionShown=!0)}toggleZoomLayer(t){this.el.classList.toggle("hidden",!t)}repositionCloseButton(){window.requestAnimationFrame(()=>{if(this.buttonTargetDistance=this.buttonTargetDistance?this.buttonTargetDistance:Number(window.getComputedStyle(this.closeButton).top.split("px")[0]),window.innerHeight>window.innerWidth)this.closeButton.style.top=this.buttonTargetDistance+"px";else{const t=this.closeButton.getBoundingClientRect().top;t!==this.buttonTargetDistance&&(this.closeButton.style.top=2*this.buttonTargetDistance-t+"px")}})}centerImage(){window.requestAnimationFrame(()=>{window.innerHeight>window.innerWidth?this.image.offsetHeight>0&&window.setTimeout(()=>{const t=window.innerHeight-this.image.offsetHeight;this.imageWrapper.classList.add("absolute"),this.imageWrapper.style.top=t/2+"px"},this.animationDuration):(this.imageWrapper.classList.remove("absolute"),this.imageWrapper.style.top="")})}showOverlay(){this.backdrop.setAttribute("style",`transition: background-color ${this.animationDuration}ms ease-out;`),window.setTimeout(()=>{this.backdrop.classList.remove("bg-opacity-none")},0)}focusOverlay(){this.focusCatcher.focus()}hideOverlay(){this.backdrop.classList.add("bg-opacity-none")}showCaption(){this.caption&&(this.caption.style.transform="translateY(100%)",window.setTimeout(()=>{this.caption.setAttribute("style",`transition: transform ${this.animationDuration}ms ease-out;`),this.caption.style.transform="translateY(0)"},0))}hideCaption(){this.caption&&(this.caption.style.transform="translateY(100%)")}showCloseButton(){this.closeButton.addEventListener("click",this.boundClose),this.closeButton.style.transform="translateX(150%)",window.setTimeout(()=>{this.closeButton.setAttribute("style",`transition: transform ${this.animationDuration}ms ease-out;`),this.closeButton.style.transform="translateX(0)",this.repositionCloseButton()},0)}hideCloseButton(){this.closeButton.removeEventListener("click",this.boundClose),this.closeButton.style.transform="translateX(150%)"}showImage(){this.image.classList.remove("opacity-full"),this.image.classList.add("opacity-none"),window.setTimeout(()=>{this.image.setAttribute("style",`transition: opacity ${this.animationDuration}ms ease-out;`),this.image.classList.remove("opacity-none"),this.image.classList.add("opacity-full")},0),this.image.removeEventListener("load",this.boundShowImage)}hideImage(){this.image.classList.remove("opacity-full"),this.image.classList.add("opacity-none")}showImageOnLazyload(){this.image.classList.contains("lazyloaded")||this.image.classList.contains("ls-is-cached")||this.image.complete?this.showImage():(this.boundShowImage=()=>this.showImage(),this.image.addEventListener("load",this.boundShowImage))}get id(){return this.settings.zoomId}get preventScrolling(){return!0}destroy(){this.hideZoomLayer(),this.image.removeEventListener("load",this.boundShowImage),this.image.removeEventListener(l.hb,this.boundOnPinchZoomChanged),super.destroy()}}const ss=Symbol("INSTANCE"),ns=Symbol("SINGELTONENFORCER");class as{constructor(t){if(t!==ns)throw new Error("Instantiation failed: Use JWPlayerDeliveryAPI.instance instead of new.");this.init()}static get instance(){return this[ss]||(this[ss]=new as(ns)),this[ss]}init(){const t=s.a.instance;this.defaultApiUrl=t.thirdparty&&t.thirdparty.jwplayer&&t.thirdparty.jwplayer.apiUrl?t.thirdparty.jwplayer.apiUrl:"https://cdn.jwplayer.com"}getMediaObjectByMediaId(t,e=""){if(!t||"string"!=typeof t)return Promise.reject(new Error("JWPlayerDeliveryAPI getMediaObjectByMediaId - missing valid mediaId function param"));const i=`${e||this.defaultApiUrl}/v2/media/${t}`;return new Promise((e,s)=>{this.fetchUrl(i).then(i=>{i?e(i):s(new Error("JWPlayerDeliveryAPI getMediaObjectByMediaId - no clip found for clipId: "+t))}).catch(t=>s(t))})}getImageThumbnailByMediaObject(t,e=0){return this._getThumbnailByMediaObject(t,e,"image")}getVideoThumbnailByMediaObject(t,e=0){return this._getThumbnailByMediaObject(t,e,"video")}getVideoThumbnailByMediaId(t,e=0){return t?e&&e<=320?`${this.defaultApiUrl}/v2/media/${t}/poster.mp4?width=320`:`${this.defaultApiUrl}/v2/media/${t}/poster.mp4?width=640`:""}_getThumbnailByMediaObject(t,e=0,i="image"){if(!t)return"";let s=null;if(t.playlist&&Array.isArray(t.playlist)&&t.playlist.length>0){const n=t.playlist[0];if(n.images&&Array.isArray(n.images)&&n.images.length>0){const t="image"===i||"video"===i?i:"image",a=n.images.filter(e=>0===e.type.indexOf(t));a.sort((t,e)=>t.width-e.width),a.forEach(t=>{(!s||t.width>s.width&&0===e||t.width>s.width&&s.width<e)&&(s=t)})}}return s&&s.src?s.src:""}getVideoByMediaObject(t,e=0){if(!t)return"";let i=null;if(t.playlist&&Array.isArray(t.playlist)&&t.playlist.length>0){const s=t.playlist[0];if(s.sources&&Array.isArray(s.sources)&&s.sources.length>0){const t=s.sources.filter(t=>0===t.type.indexOf("video"));t.sort((t,e)=>t.width-e.width),t.forEach(t=>{(!i||t.width>i.width&&0===e||t.width>i.width&&i.width<e)&&(i=t)})}}return i&&i.file?i.file:""}getAdScheduleById(t,e=""){return new Promise((i,s)=>{t&&"string"==typeof t||s(new Error("JWPlayerDeliveryAPI getAdScheduleById - missing valid id function param"));const n=`${e||this.defaultApiUrl}/v2/advertising/schedules/${t}.json`;this.fetchUrl(n).then(e=>{e?i(e):s(new Error("JWPlayerDeliveryAPI getAdScheduleById - no ad schedule found for id: "+t))}).catch(t=>s(t))})}fetchUrl(t){return fetch(t,{method:"GET",headers:{"Content-Type":"text/plain"}}).then(t=>200!==t.status?Promise.reject(new Error("JWPlayerDeliveryAPI fetchUrl - failed to get data from API, URL: "+t.url)):t.json())}}const os=Symbol("INSTANCE"),rs=Symbol("SINGELTONENFORCER");class ls{constructor(t){if(t!==rs)throw new Error("Instantiation failed: Use VideoDataControl.instance instead of new.");this._isInitialized=!1,this.hasError=!1,this.isTcDataInitialized=!1,this.currentVideoContentDuration=null,this._sxpkeys="fwd_j4=1&fwd_j5=2:3&fwd_i1=4:5";const e=s.a.instance,i=e.video&&e.video.vdc?e.video.vdc:void 0;if(!i||!i.enabled)return;this.config={autoDetection:!0,consent:!0,site:i?i.site:"",playerName:"JW Player",playerWrapper:i&&Number.isInteger(i.playerWrapper)?i.playerWrapper:10,playerSDKTimeout:i&&Number.isInteger(i.playerSDKTimeout)?i.playerSDKTimeout:8,playerTimeout:i&&Number.isInteger(i.playerTimeout)?i.playerTimeout:10};ye.instance.ready?this.onTCDataChanged():c.a.subscribe(l.Db,this.onTCDataChanged,this)}static get instance(){return this[os]||(this[os]=new ls(rs)),this[os]}onTCDataChanged(){const t=ye.instance;t.ready&&!this.isTcDataInitialized&&(this.isTcDataInitialized=!0,this.config.gdpr_consent=t.tcData&&t.tcData.tcString?t.tcData.tcString:"","object"==typeof window.$AC&&"function"==typeof window.$AC.loadConfig?this.init():(c.a.subscribe(l.Vb,this.onVideoDataControlSourceReady,this),c.a.subscribe(l.Ub,this.onVideoDataControlSourceError,this)))}onVideoDataControlSourceReady(){c.a.unsubscribe(l.Vb,this.onVideoDataControlSourceReady),c.a.unsubscribe(l.Ub,this.onVideoDataControlSourceError),this.init()}onVideoDataControlSourceError(){c.a.unsubscribe(l.Vb,this.onVideoDataControlSourceReady),c.a.unsubscribe(l.Ub,this.onVideoDataControlSourceError),this.hasError=!0,c.a.publish(l.Sb)}init(){"object"==typeof window.$AC&&"function"==typeof window.$AC.loadConfig&&(window.$AC.loadConfig(this.config),"function"==typeof window.$AC.playerInitReady&&window.$AC.playerInitReady()?this.onInitialized():(this.onACPlayerStartListener=this.onACPlayerStart.bind(this),window.addEventListener(l.a,this.onACPlayerStartListener)))}onACPlayerStart(){this.onACPlayerStartListener&&window.removeEventListener(l.a,this.onACPlayerStartListener),this.onInitialized()}onInitialized(){this._isInitialized=!0,this._sxpkeys=this.getSXPKeys(),c.a.publish(l.Tb)}getSXPKeys(){if(!this.isInitialized||"object"!=typeof window.$AC||"function"!=typeof window.$AC.getSXPKeys)return this._sxpkeys;return window.$AC.getSXPKeys()}setVideoContentDuration(t){Number.isInteger(t)&&this.currentVideoContentDuration!==t&&"object"==typeof window.$AC&&"function"==typeof window.$AC.setTargeting&&(this.currentVideoContentDuration=t,window.$AC.setTargeting("vcd",t),this._sxpkeys=this.getSXPKeys())}get sxpkeys(){return this._sxpkeys}get isInitialized(){return this._isInitialized}}class hs{constructor(){this.user=d.a.instance,this.videoDataControl=ls.instance,this.tcDataModel=ye.instance;const t=s.a.instance;this.smartclipSettings=t.video&&t.video.smartclip?t.video.smartclip:void 0}getVastUrl(t="pre",e=0,i={}){if(!(this.smartclipSettings&&this.smartclipSettings.baseUrl&&this.smartclipSettings.params&&this.smartclipSettings.params.default))return"";const{isMobile:n}=Z.a,{isApp:a}=_.a;let o;"pre"===t?o="400x320":"mid"===t?o="400x299":"post"===t&&(o="400x300");let r="";const l=s.a.instance;i.cat?(({cat:r}=i),delete i.cat):l.page&&l.page.attributes&&l.page.attributes.channel_slug&&(r=l.page.attributes.channel_slug);const h=new URL(this.smartclipSettings.baseUrl);if(Object.entries(this.smartclipSettings.params.default).forEach(t=>{const e=t[0],i=t[1];if("cu_itype"===e||"pub_dt1"===e){let t="desktop";n&&(t="mobile"),a&&(t="app"),h.searchParams.set(e,t)}else if("fwd_sz"===e)h.searchParams.set(e,o);else if("ple"===e){let t=i;t=t.replace(/<APP>/g,a?"app.":""),t=t.replace(/<CAT>/g,r),t=t.replace(/<DIMENSIONS>/g,o),h.searchParams.set(e,t)}else if("rnd"===e){const t=Math.floor(1e8+9e8*Math.random());h.searchParams.set(e,t)}else h.searchParams.set(e,i)}),a&&this.smartclipSettings.params.app){const t=G.a.instance;Object.entries(this.smartclipSettings.params.app).forEach(e=>{const i=e[0],s=e[1];"ang_ifa"===i?t.advertisingId&&h.searchParams.set(i,t.advertisingId):"ang_bundle"===i&&t.bundleId?h.searchParams.set(i,t.bundleId):"ang_storeurl"===i&&t.storeUrl?h.searchParams.set(i,t.storeUrl):h.searchParams.set(i,s)})}Object.keys(i).forEach(t=>{h.searchParams.set(t,i[t])}),this.tcDataModel&&this.tcDataModel.tcData&&this.tcDataModel.tcData.tcString?(h.searchParams.set("consent",this.tcDataModel.tcData.tcString),h.searchParams.set("optout",0)):h.searchParams.set("optout",1),this.videoDataControl.setVideoContentDuration(e);const c=decodeURIComponent(this.videoDataControl.sxpkeys).split("&");for(let t=0;t<c.length;t++){const e=c[t].split("="),i=e[0]?e[0]:void 0,s=e[1]?e[1]:"";i&&h.searchParams.set(i,s)}return decodeURIComponent(h.href)}}const cs=2e3,ds=2e3;class us extends o.Component{constructor(...t){super(...t),this.storageObject=new C("jwplayer","local"),this.settings=this.data.settings?JSON.parse(this.data.settings):{},this.id=this.settings.id,this.adScheduleId=null,this.isConfigInitialized=!1,this.isJWPlayerReady=!1,this.isJWPlayerInitialized=!1,this.tcdataInitializationTimeoutId=null,this.vdcInitializationTimeoutId=null,this.loader=this.el.querySelector('[data-video-el="loader"]'),this.hasVideo=!1,this.hasAudio=!1,this.hasAdvertisement=!1,this.isAutoPaused=!1,this.hasPrerollAdPlayed=!1,this.prerollAdTag=void 0,this.customUnmuteButton=void 0,this.isAutoMuted=!1,this.playerContainer=void 0,this.vastUrlBuilder=void 0;const{mediaIdFromUrl:e,autostart:i,durationInSeconds:n}=this.settings;this.durationInSeconds=Number.isInteger(n)?n:0;const a=new URLSearchParams(window.location.search);if(this.forceMutedAutoplay=i&&"1"===a.get("jwplayerMutedAutoplay"),this.mediaId=e?decodeURIComponent(a.get("mediaid")):this.settings.mediaId?this.settings.mediaId:void 0,!this.mediaId)return void this.onError();const o=s.a.instance,r=d.a.instance,h=o.editorial&&o.editorial.attributes?o.editorial.attributes:{},c=o.editorial&&o.editorial.category?o.editorial.category:"";if(this.suppressAds=o.disableAds||o.noAds||r.hasNoAdsAccess||"never"===this.settings.adBehavior||h.has_noAds||h.has_noContentAds||"sponsored"===c,this.subscribe(l.c,this.onAdblockLayerOpened,this),this.subscribe(l.b,this.onAdblockLayerClosed,this),this.consentGloballyDisabled=!(!o.consent||"boolean"!=typeof o.consent.globallyDisabled)&&o.consent.globallyDisabled,!this.suppressAds&&this.consentGloballyDisabled){this.suppressAds=!0;ye.instance.ready?this.onTCDataChanged():(this.tcdataInitializationTimeoutId=setTimeout(()=>{console.error("JWPlayer: TCData init timeout"),this.onTCDataChanged()},ds),this.subscribe(l.Db,this.onTCDataChanged,this))}else this.initConfig()}onTCDataChanged(){if(void 0!==this.tcdataInitializationTimeoutId&&clearTimeout(this.tcdataInitializationTimeoutId),this.suppressAds&&this.consentGloballyDisabled){ye.instance.isPurposeGranted(u.n.store_and_access_information_on_a_device)&&(this.suppressAds=!1)}this.initConfig()}initConfig(){if(this.isConfigInitialized)return;this.isConfigInitialized=!0,this.vastUrlBuilder=this.suppressAds?void 0:new hs;const{autostart:t,disableRelated:e,errors:i,skinUrl:s}=this.settings;this.config={mediaid:this.mediaId,playlist:[],intl:{de:{errors:i}}},t&&!this.forceMutedAutoplay&&(this.config.autostart="viewable"),!0===this.storageObject.getItem("is_auto_muted")&&(this.config.mute=!1),this.storageObject.setItem("is_auto_muted",!1),e&&(this.config.related={}),s&&(this.config.skin={url:s,name:"spgl"}),this.isJWPlayerReady="function"==typeof window.jwplayer,this.isJWPlayerReady?this.onJWPlayerSourceReady():this.subscribe(l.Q,this.onJWPlayerSourceReady,this)}onJWPlayerSourceReady(){this.isJWPlayerReady=!0,this.initPlayer()}initPlayer(){if(this.isJWPlayerInitialized)return;const t=as.instance,e="string"==typeof this.settings.apiUrl&&this.settings.apiUrl?this.settings.apiUrl:"";t.getMediaObjectByMediaId(this.mediaId,e).then(t=>this.onJwPlayerMediaObjectLoaded(t)).catch(()=>this.onError()),this.isJWPlayerInitialized=!0}onJwPlayerMediaObjectLoaded(t){if(!t)return void this.onError();const{alternativeTitle:e,alternativeDescription:i}=this.settings;if(t){t.feed_instance_id&&(this.config.feed_instance_id=t.feed_instance_id),t.jwpseg&&(this.config.jwpseg=t.jwpseg);const s={sources:[]};if(t.playlist&&Array.isArray(t.playlist)&&t.playlist.length>0){const n=t.playlist[0];e?s.title=e:n.title&&(s.title=n.title),i?s.description=i:n.description&&(s.description=n.description),n.image&&(s.image=n.image),n.mediaid&&(s.mediaid=n.mediaid),"number"==typeof n.pubdate&&(s.pubdate=n.pubdate),n.sources&&Array.isArray(n.sources)&&n.sources.length>0&&n.sources.forEach(t=>{const e={...t};"string"==typeof t.type&&t.type.includes("audio/")&&(this.hasAudio=!0),"string"==typeof t.type&&t.type.includes("video/")&&(this.hasVideo=!0),Number.isInteger(t.height)&&t.height>0&&(e.label=t.height+"p"),s.sources.push(e)}),Number.isInteger(n.duration)&&(this.durationInSeconds=n.duration,s.duration=n.duration),n.tracks&&Array.isArray(n.tracks)&&n.tracks.length>0&&(s.tracks=n.tracks),n.jwpseg&&Array.isArray(n.jwpseg)&&n.jwpseg.length>0&&(s.jwpseg=n.jwpseg),n.jwpseg_client_side&&Array.isArray(n.jwpseg_client_side)&&n.jwpseg_client_side.length>0&&(s.jwpseg_client_side=n.jwpseg_client_side),n.ad_schedule_id&&(this.adScheduleId=n.ad_schedule_id)}this.config.playlist.push(s)}this.hasAudio&&!this.hasVideo&&(this.suppressAds=!0),this.config.playlist.length>0&&this.config.playlist[0].sources.length>0?this.onJwPlayerMediaObjectParsed():this.onError()}onJwPlayerMediaObjectParsed(){this.settings.disableVideoDataControl||this.suppressAds||ls.instance.isInitialized?this.initJWPlayer():ls.instance.hasError?this.onVideoDataControlReady():(this.vdcInitializationTimeoutId=setTimeout(()=>{console.error("JWPlayer: VDC init timeout"),this.onVideoDataControlReady()},cs),this.subscribe(l.Tb,this.onVideoDataControlReady,this),this.subscribe(l.Sb,this.onVideoDataControlError,this))}onVideoDataControlReady(){this.isVideoDataControlReady=!0,void 0!==this.vdcInitializationTimeoutId&&clearTimeout(this.vdcInitializationTimeoutId),this.unsubscribe(l.Tb,this.onVideoDataControlReady,this),this.unsubscribe(l.Sb,this.onVideoDataControlError,this),this.isJWPlayerReady&&this.initJWPlayer()}onVideoDataControlError(){this.isVideoDataControlReady=!0,void 0!==this.vdcInitializationTimeoutId&&clearTimeout(this.vdcInitializationTimeoutId),this.unsubscribe(l.Tb,this.onVideoDataControlReady,this),this.unsubscribe(l.Sb,this.onVideoDataControlError,this),this.isJWPlayerReady&&this.initJWPlayer()}async initJWPlayer(){const t=this.findDesiredQualityIndex();-1!==t&&this.config.playlist.length>0&&Array.isArray(this.config.playlist[0].sources)&&this.config.playlist[0].sources.length>=t+1&&(this.config.playlist[0].sources[t].default=!0),this.suppressAds?this.config.advertising={}:this.config.advertising=await this.getAdvertisingConfig();const e=this.getAutopauseConfig();e&&(this.config.autoPause=e),window.jwplayer?(this.jwplayer=window.jwplayer(this.id).setup(this.config),this.settings.autostart&&!this.forceMutedAutoplay&&this.jwplayer.on("autostartNotAllowed",t=>this.onAutostartNotAllowed(t)),this.jwplayer.on("beforePlay",t=>this.onBeforePlay(t)),this.jwplayer.on("playlistItem",t=>this.onPlaylistItem(t)),this.jwplayer.on("ready",()=>{this.onReady()})):this.onError()}onPlaylistItem(){this.hasPrerollAdPlayed=!1}onBeforePlay(t){if(t&&t.playReason&&"interaction"===t.playReason&&this.isAutoMuted&&(this.jwplayer.setMute(!1),this.isAutoMuted=!1),this.isAutoPaused){this.jwplayer.pause();try{this.jwplayer.pauseAd(!0)}catch(t){console.error("JWPlayer API - pauseAd error: "+t.message)}}else this.triggerPrerollAd()}onAutostartNotAllowed(){this.jwplayer.mutedAutostart=!0,this.boundOnMute=t=>this.onMute(t),this.boundOnTime=t=>this.onTime(t),this.boundOnSeek=t=>this.onSeek(t),this.boundOnPause=t=>this.onPause(t),this.jwplayer.on("mute",this.boundOnMute),this.jwplayer.on("time",this.boundOnTime),this.jwplayer.on("seek",this.boundOnSeek),this.jwplayer.on("pause",this.boundOnPause),this.jwplayer.getMute()||this.storageObject.setItem("is_auto_muted",!0),this.jwplayer.setMute(!0),this.isAutoMuted=!0,this.addCustomUnmuteButton(),this.jwplayer.play()}addCustomUnmuteButton(){if(this.customUnmuteButton=document.createElement("button"),this.customUnmuteButton.className="jw-unmute",this.customUnmuteButton.innerText="Ton aktivieren",this.boundOnCustomUnmuteButtonClick=()=>{this.jwplayer.setMute(!1)},this.customUnmuteButton.addEventListener("click",this.boundOnCustomUnmuteButtonClick),this.playerContainer=this.jwplayer.getContainer(),this.playerContainer){this.playerContainer.classList.add("jw-muted-autoplay");const t=this.playerContainer.querySelector(".jw-wrapper");t&&t.insertAdjacentElement("afterbegin",this.customUnmuteButton)}}removeCustomUnmuteButton(){this.customUnmuteButton&&(this.boundOnCustomUnmuteButtonClick&&this.customUnmuteButton.removeEventListener("click",this.boundOnCustomUnmuteButtonClick),this.customUnmuteButton.style.display="none",this.customUnmuteButton.remove(),this.playerContainer&&this.playerContainer.classList.remove("jw-muted-autoplay"))}onPause(t){this.jwplayer.off("pause",this.boundOnPause),t&&t.pauseReason&&"interaction"===t.pauseReason&&this.isAutoMuted&&(this.jwplayer.setMute(!1),this.isAutoMuted=!1)}onMute(t){t.mute||(this.removeCustomUnmuteButton(),this.isAutoMuted=!1,this.storageObject.setItem("is_auto_muted",!1),this.jwplayer.off("mute",this.boundOnMute))}onSeek(){this.jwplayer.off("seek",this.boundOnSeek),this.isAutoMuted&&(this.jwplayer.setMute(!1),this.isAutoMuted=!1)}onTime(t){this.hasPrerollAdPlayed?this.jwplayer.off("time",this.boundOnTime):t.position>=15&&this.isAutoMuted?(this.jwplayer.off("time",this.boundOnTime),this.jwplayer.stop(),this.jwplayer.setMute(!1)):!this.isAutoMuted&&this.isPlaying&&(this.jwplayer.off("time",this.boundOnTime),this.triggerPrerollAd())}triggerPrerollAd(){this.hasPrerollAdPlayed||!this.prerollAdTag||this.isAutoMuted||(this.jwplayer.playAd(this.prerollAdTag),this.hasPrerollAdPlayed=!0)}findDesiredQualityIndex(){if(!this.config.playlist.length>0)return-1;const t="sm"===Nt.instance.breakpoint?640:1024;return this.config.playlist[0].sources.findIndex(e=>e.width===t)}getAutopauseConfig(){return _.a.isAndroidApp?{viewability:!0,pauseAds:!0}:this.hasAudio&&!this.hasVideo?{viewability:!1,pauseAds:!1}:this.hasAdvertisement&&window.jwDefaults&&window.jwDefaults.autoPause&&"object"==typeof window.jwDefaults.autoPause&&!(this.settings.multiboxId&&this.settings.multiboxId.length>0)?{viewability:!0,pauseAds:!0}:void 0}async getAdvertisingConfig(){if(!window.jwDefaults||!window.jwDefaults.advertising||"object"!=typeof window.jwDefaults.advertising)return{};let t;if(this.adScheduleId){const e=as.instance,i="string"==typeof this.settings.apiUrl&&this.settings.apiUrl?this.settings.apiUrl:"";t=await e.getAdScheduleById(this.adScheduleId,i)}const e={...window.jwDefaults.advertising};let i=[];const s=[];let{adBehavior:n}=this.settings;return t&&t.schedule&&Array.isArray(t.schedule)&&t.schedule.length>0?(Object.keys(t).forEach(i=>{"schedule"!==i&&(e[i]=t[i])}),i=t.schedule,"prerolls"===n&&(n="default")):e.schedule&&Array.isArray(e.schedule)&&e.schedule.length>0&&(i=e.schedule),i.forEach(t=>{if(!t.offset||!t.tag||!Array.isArray(t.tag)||0===t.tag.length)return;const i="pre"===t.offset||"post"===t.offset?t.offset:"mid";if("pre"===i||"prerolls"!==n){for(let e=0;e<t.tag.length;e++){const s={};try{new URL(t.tag[e]).searchParams.forEach((t,e)=>{s[e]=t})}catch(i){console.error("JWPlayer - unable to parse ad tag "+t.tag[e])}t.tag[e]=this.vastUrlBuilder?this.vastUrlBuilder.getVastUrl(i,this.durationInSeconds,s):""}"pre"===i?(this.prerollAdTag=t.tag[0],e.prerollAdTag=this.prerollAdTag):s.push(t)}}),e.schedule=s,e.requestTimeout=1e4,e.creativeTimeout=22e3,this.hasAdvertisement=e.schedule&&Array.isArray(e.schedule)&&e.schedule.length>0,e}onReady(){this.loader&&this.loader.classList.add("hidden"),this.publish(l.P,this.id),this.subscribe(l.bb,this.onVisibilityChange,this),this.jwplayer.on("adPause",t=>{this.onAdPause(t)}),this.settings.multiboxId&&this.settings.multiboxId.length>0&&this.subscribe(l.G,t=>{this.onCloseAccordion(t.id)}),this.forceMutedAutoplay&&this.onAutostartNotAllowed()}onError(){this.el.classList.add("hidden"),console.error("JWPLayer: Unable to load video - mediaid: "+(this.mediaId?this.mediaId:"undefined"))}onCloseAccordion(t){if(this.settings.multiboxId===t){this.jwplayer.pause();try{this.jwplayer.pauseAd(!0)}catch(t){console.error("JWPlayer API - pauseAd error: "+t.message)}}}onVisibilityChange(t){if(this.jwplayer)if("hidden"===t){if(this.isPlaying)try{this.jwplayer.pauseAd(!0)}catch(t){console.error("JWPlayer API - pauseAd error: "+t.message)}this.isAutoPaused=!0}else if("visible"===t&&this.isAutoPaused){try{this.jwplayer.pauseAd(!1)}catch(t){console.error("JWPlayer API - pauseAd error: "+t.message)}this.isAutoPaused=!1}}onAdPause(t){t&&"object"==typeof t&&"pauseReason"in t&&"clickthrough"===t.pauseReason&&(this.isAutoPaused=!0)}onAdblockLayerOpened(){if(this.config.autostart="false",this.jwplayer&&(this.isPlaying||this.settings.autostart)){this.jwplayer.pause();try{this.jwplayer.pauseAd(!0)}catch(t){console.error("JWPlayer API - pauseAd error: "+t.message)}this.isAutoPaused=!0}}onAdblockLayerClosed(){if(this.jwplayer&&!this.isPlaying&&this.isAutoPaused){this.jwplayer.play();try{this.jwplayer.pauseAd(!1)}catch(t){console.error("JWPlayer API - pauseAd error: "+t.message)}}this.isAutoPaused=!1}get isPlaying(){if(!this.jwplayer||"function"!=typeof this.jwplayer.getState)return!1;const t=this.jwplayer.getState();return t&&"playing"===t}destroy(){super.destroy()}}class ps extends o.Component{constructor(...t){super(...t),this.tcDataModel=ye.instance,this.requiredPurposeIds=[],this.requiredVendorIds=[],this._src="",this.isSrcInitialized=!1}addRequiredPurpose(t){t&&this.requiredPurposeIds.push(t)}addRequiredVendor(t){t&&this.requiredVendorIds.push(t)}loadSrc(){const t=!(!s.a.instance.consent||"boolean"!=typeof s.a.instance.consent.globallyDisabled)&&s.a.instance.consent.globallyDisabled;s.a.instance.preview||this.consentVerified||t&&0===this.requiredPurposeIds.length&&0===this.requiredVendorIds.length?this.initSrc():this.subscribe(l.Db,this.onAbstractTCDataChanged)}onAbstractTCDataChanged(){this.consentVerified&&!this.isSrcInitialized&&this.initSrc()}initSrc(){!this.isSrcInitialized&&this.src&&this.scriptEl&&!this.scriptEl.getAttribute("src")&&(this.isSrcInitialized=!0,this.scriptEl.setAttribute("src",this.src))}get requiredPurposesVerified(){for(let t=0;t<this.requiredPurposeIds.length;t++){const e=this.requiredPurposeIds[t];if(!this.tcDataModel.isPurposeGranted(e))return!1}return!0}get requiredVendorsVerified(){for(let t=0;t<this.requiredVendorIds.length;t++){const e=this.requiredVendorIds[t];if(!this.tcDataModel.isVendorGranted(e))return!1}return!0}get consentVerified(){return this.tcDataModel.ready&&this.requiredPurposesVerified&&this.requiredVendorsVerified}get src(){if(this._src)return this._src;const t=this.scriptEl.getAttribute("data-src");return t?(this._src=t,this._src):""}get scriptEl(){return this.el}destroy(){super.destroy()}}class gs extends ps{constructor(...t){if(super(...t),this.isGujDisabled)return;!(!s.a.instance.consent||"boolean"!=typeof s.a.instance.consent.globallyDisabled)&&s.a.instance.consent.globallyDisabled&&this.addRequiredPurpose(u.n.store_and_access_information_on_a_device),this.settings=this.data.settings?JSON.parse(this.data.settings):{},this.topScript=this.el.querySelector('[data-moltenbundlesource-el="top"]'),this.bottomScript=this.el.querySelector('[data-moltenbundlesource-el="bottom"]'),this.srcTop&&this.srcBottom&&(this.boundOnTopLoaded=()=>this.onTopLoaded(),this.boundOnTopError=()=>this.onTopError(),this.boundOnBottomLoaded=()=>this.onBottomLoaded(),this.topScript.addEventListener("load",this.boundOnTopLoaded),this.topScript.addEventListener("error",this.boundOnTopError),this.bottomScript.addEventListener("load",this.boundOnBottomLoaded),this.loadSrc())}onTopLoaded(){this.removeTopScriptListeners(),window.$AC&&"function"==typeof window.$AC.loadConfig?this.publish(l.Vb):this.publish(l.Ub),this.bottomScript.setAttribute("src",this.srcBottom)}onTopError(){this.removeTopScriptListeners(),this.removeBottomScriptListeners(),this.publish(l.Ub),this.destroy()}onBottomLoaded(){this.removeBottomScriptListeners(),void 0!==window.GujAd&&void 0!==window.GujAd.cmd&&window.GujAd.cmd.push(()=>{window.GujAd.finalize()})}removeTopScriptListeners(){"function"==typeof this.boundOnTopLoaded&&(this.topScript.removeEventListener("load",this.boundOnTopLoaded),this.boundOnTopLoaded=null),"function"==typeof this.boundOnTopError&&(this.topScript.removeEventListener("error",this.boundOnTopError),this.boundOnTopError=null)}removeBottomScriptListeners(){"function"==typeof this.boundOnBottomLoaded&&(this.bottomScript.removeEventListener("load",this.boundOnBottomLoaded),this.boundOnBottomLoaded=null)}initSrc(){const{initDelay:t}=G.a.instance.adaSettings||{};t&&t>0?setTimeout(()=>{super.initSrc()},t):super.initSrc()}get isGujDisabled(){return d.a.instance.hasNoAdsAccess||s.a.instance.disableAds}get isPreview(){return"1"===new URLSearchParams(window.location.search).get("gujAd")}get srcTop(){const t=this.settings.sources||{},{liveTop:e,previewTop:i}=t;return this.isPreview&&i?i:e||""}get srcBottom(){const t=this.settings.sources||{},{liveBottom:e,previewBottom:i}=t;return this.isPreview&&i?i:e||""}get src(){return this.srcTop}get scriptEl(){return this.topScript}}const ms=2e3;class ys extends ps{constructor(...t){super(...t);if(!y.a.instance.isIssueArticle)if(this.isInitialized=!1,this.consentDisabled=!(!s.a.instance.consent||"boolean"!=typeof s.a.instance.consent.disabled)&&s.a.instance.consent.disabled,this.settings=JSON.parse(this.data.outbrainSettings),this.app=!!_.a.isApp&&_.a.appCode,this.outbrainId=String(),this.noAds=this.settings.noAds,this.consentGloballyDisabled=!(!s.a.instance.consent||"boolean"!=typeof s.a.instance.consent.globallyDisabled)&&s.a.instance.consent.globallyDisabled,!this.noAds&&this.consentGloballyDisabled){this.noAds=!0;ye.instance.ready?this.onTCDataChanged():(this.tcdataInitializationTimeoutId=setTimeout(()=>{console.error("Outbrain: TCData init timeout"),this.onTCDataChanged()},ms),this.subscribe(l.Db,this.onTCDataChanged,this))}else this.init()}onTCDataChanged(){if(void 0!==this.tcdataInitializationTimeoutId&&clearTimeout(this.tcdataInitializationTimeoutId),this.noAds&&this.consentGloballyDisabled){ye.instance.isPurposeGranted(u.n.store_and_access_information_on_a_device)&&(this.noAds=!1)}this.init()}init(){this.isInitialized||(this.isInitialized=!0,this.determineOutbrainId(),this.outbrainId&&(this.setTrackingReducedVersion(),this.embedOutbrainElement(),this.loadSrc()))}determineOutbrainId(){let t="web";"android"===this.app?t="android":"ios"===this.app&&(t="ios");const e=Array.from(this.settings.widgetIDs).filter(e=>e.ads===!this.noAds&&e.guaranteed===this.settings.guaranteed&&e.type===this.settings.type&&e.device===t?e.id:null);this.outbrainId=e[0]&&e[0].id?e[0].id:null}setTrackingReducedVersion(){if(!this.consentDisabled)return;const t="OB_ContextKeyValue";window[t]||(window[t]="notracking")}get partnerKey(){return _.a.isApp&&(_.a.isAndroidApp||_.a.isIOSApp)?this.settings.partnerKeys[`${_.a.isAndroidApp?"android":"ios"}${Z.a.isTablet?"Tablet":"Mobile"}`]:""}embedOutbrainElement(){const t={};_.a.isApp&&(t["data-ob-installation-type"]="app_js_widget",t["data-is-secured"]="true",t["data-ob-installation-key"]=this.partnerKey,t["data-ob-user-id"]=G.a.instance.advertisingId?G.a.instance.advertisingId:"null",t["data-ob-app-ver"]=G.a.instance.bundleId?G.a.instance.bundleId:"");let e=`\n            <div class="outbrain-container">\n                <div id="${this.outbrainId}"\n                    class="OUTBRAIN"\n                    data-src="${this.settings.src}"\n                    data-widget-id="${this.outbrainId}"\n                    data-ob-template="${this.settings.template||"DE_SPIEGEL"}"\n        `;Object.keys(t).forEach(i=>{e+=`${i}="${t[i]}"\n            `}),e+=">\n                </div>\n            </div>\n        ",this.embedToWrapper(e.trim())}embedToWrapper(t){if(t)try{this.el.appendChild(document.createRange().createContextualFragment(t))}catch(e){this.el.insertAdjacentHTML("beforeend",t)}}get scriptEl(){return this.el.querySelector('[data-outbrain-el="script"]')}destroy(){this.el.innerHTML="",super.destroy()}}class bs extends o.Component{constructor(...t){super(...t),this.settings=JSON.parse(this.data.settings),this.searchForm=this.el.querySelector("[data-search-form]"),this.searchHeadline=this.el.querySelector("[data-search-headline]"),this.searchInput=this.el.querySelector("[data-search-input] input"),this.searchInputClearIcon=this.el.querySelector('[data-search-input] [data-input-el="icon"]'),this.searchInputClearButton=this.el.querySelector("[data-search-input-clear-button]"),this.searchButton=this.el.querySelector("[data-search-button]"),this.searchFilterToggle=this.el.querySelector("[data-search-filter-toggle]"),this.searchFilterActive=this.el.querySelector("[data-search-filter-active]"),this.searchFilterInactive=this.el.querySelector("[data-search-filter-inactive]"),this.searchFilters=this.el.querySelector("[data-search-filters]"),this.searchLoader=this.el.querySelector("[data-search-loading]"),this.searchTimespanSelect=this.el.querySelector("[data-search-timespan-select] select"),this.searchFieldsetRadioGroup=this.searchFilters.elements.namedItem("fieldset"),this.searchSegmentsCheckboxes=this.searchFilters.elements.namedItem("segment"),this.searchError=this.el.querySelector("[data-search-error]"),this.searchEmpty=this.el.querySelector("[data-search-empty]"),this.resultsList=this.el.querySelector("[data-search-results]"),this.pagination=this.el.querySelector("[data-search-pagination]"),this.paginationPrev=this.el.querySelector('[data-pagination-el="back"]'),this.paginationNext=this.el.querySelector('[data-pagination-el="forward"]'),this.paginationCurrentPage=this.el.querySelector('[data-pagination-el="current"]'),this.paginationLastPage=this.el.querySelector('[data-pagination-el="total"]'),this.searchResults=document.querySelector("#suchergebnisse"),this.urlSearchString="",this.searchResultsTotal=0,this.teasers=[],this.searchTopics=[],this.scrollTrigger=!1,this.searchResultPagination={current:1,last:0,pageSize:20},this.updateHtmlInputFieldsByUrlParams(),this.searchOptions={query:this.urlSearchString,displayQuery:this.urlSearchString,fields:"",before:null,after:null,segments:[]},this.updateFilters(),this.domain=s.a.instance&&s.a.instance.domain?s.a.instance.domain:"",this.init()}init(){this.user=d.a.instance,this.boundExecuteSearch=t=>this.executeSearch(t),this.searchForm.addEventListener("submit",this.boundExecuteSearch),this.searchFilters.addEventListener("submit",this.boundExecuteSearch),window.addEventListener("popstate",this.boundExecuteSearch),this.boundFilterResults=()=>{this.updateFilters(),this.executeSearch()},this.searchFilters.addEventListener("change",this.boundFilterResults),this.boundGoToNextPage=t=>{this.goToPage(t,this.searchResultPagination.current+1),mt.a.scrollToElement(this.searchResults)},this.paginationNext.addEventListener("click",this.boundGoToNextPage),this.boundGoToPrevPage=t=>{this.goToPage(t,this.searchResultPagination.current-1),mt.a.scrollToElement(this.searchResults)},this.paginationPrev.addEventListener("click",this.boundGoToPrevPage),this.boundResetFilters=()=>this.resetFilters(),this.searchFilters.addEventListener("reset",this.boundResetFilters),this.boundToggleFilters=()=>this.toggleFilters(),this.searchFilterToggle.addEventListener("click",this.boundToggleFilters),c.a.toggleElementVisibility(this.searchInputClearIcon,""!==this.searchInput.value),c.a.toggleElementVisibility(this.searchInputClearButton,""!==this.searchInput.value),this.boundOnSearchInputValueChanged=()=>{c.a.toggleElementVisibility(this.searchInputClearIcon,""!==this.searchInput.value),c.a.toggleElementVisibility(this.searchInputClearButton,""!==this.searchInput.value)},this.searchInput.addEventListener("input",this.boundOnSearchInputValueChanged),this.boundOnClearIconClicked=()=>{this.searchInput.value="",c.a.toggleElementVisibility(this.searchInputClearIcon,!1),c.a.toggleElementVisibility(this.searchInputClearButton,!1),this.searchInput.focus()},this.searchInputClearButton.addEventListener("click",this.boundOnClearIconClicked),this.subscribe(l.nb,()=>{this.createResultList(),this.updateHeadline(),c.a.toggleElementVisibility(this.searchHeadline,!0),this.updatePagination()}),this.executeSearch()}updateHtmlInputFieldsByUrlParams(){const t=new URL(window.location.href);this.urlSearchString=t.searchParams.get("suchbegriff");const e=t.searchParams.get("zeitraum")?t.searchParams.get("zeitraum"):"",i=t.searchParams.get("inhalt")?t.searchParams.get("inhalt"):"",s=t.searchParams.get("erschienenBei")?t.searchParams.get("erschienenBei").split(","):[],n=t.searchParams.get("seite");this.searchResultPagination.current=n?Math.max(parseInt(n,10),1):1,this.searchFilters.removeEventListener("change",this.boundFilterResults),this.searchInput.value=this.urlSearchString,e&&this.searchTimespanSelect&&(this.searchTimespanSelect.value=e),this.searchFieldsetRadioGroup&&(this.searchFieldsetRadioGroup.value=i||this.defaultFieldsetSlug),s.length>0&&this.searchSegmentsCheckboxes&&this.searchSegmentsCheckboxes.length>0&&this.searchSegmentsCheckboxes.forEach(t=>{t.checked=s.includes(t.value)}),this.searchFilters.addEventListener("change",this.boundFilterResults)}executeSearch(t){let e=!0;t&&(t.preventDefault(),"submit"===t.type&&t.target===this.searchForm&&(this.searchResultPagination.current=1),"popstate"===t.type&&(e=!1)),this.teasers=[],this.searchOptions.query=this.searchInput.value,this.parseNeedle(),this.parseDisplaySearchString(),this.searchResultsTotal=0,this.clearResults(),c.a.toggleElementVisibility(this.searchHeadline,!1),c.a.toggleElementVisibility(this.searchError,!1),c.a.toggleElementVisibility(this.pagination,!1),e?this.updateUrlParams():(this.updateHtmlInputFieldsByUrlParams(),this.updateFilters(),this.updateHeadline()),this.validateSearchInput()?(c.a.toggleElementVisibility(this.searchLoader,!0),c.a.toggleElementVisibility(this.searchEmpty,!1),this.fetchResults()):c.a.toggleElementVisibility(this.searchEmpty,!0)}parseNeedle(){this.searchOptions.displayQuery=this.searchOptions.query,this.searchOptions.query=this.searchOptions.query.replace(/ /g,"+")}parseDisplaySearchString(){this.searchOptions.displayQuery=0===this.searchOptions.displayQuery.indexOf('"')?this.searchOptions.displayQuery.substring(1):this.searchOptions.displayQuery,this.searchOptions.displayQuery='"'===this.searchOptions.displayQuery.charAt(this.searchOptions.displayQuery.length-1)?this.searchOptions.displayQuery.slice(0,-1):this.searchOptions.displayQuery}validateSearchInput(){return this.searchOptions.query.length>0}updateUrlParams(){if(!window.history||"function"!=typeof window.history.pushState)return;const t=new URL(`${s.a.instance.urls.base}${window.location.pathname}`);if(this.searchOptions.query){t.searchParams.set("suchbegriff",this.searchOptions.query),c.a.toggleElementVisibility(this.searchResults,!0),c.a.toggleElementVisibility(this.searchFilters,!0),c.a.toggleElementVisibility(this.searchFilterToggle,!0),this.searchResultPagination.current>1&&t.searchParams.set("seite",this.searchResultPagination.current),this.timespanSlug!==this.defaultTimespanSlug&&t.searchParams.set("zeitraum",this.timespanSlug),this.fieldsetSlug!==this.defaultFieldsetSlug&&t.searchParams.set("inhalt",this.fieldsetSlug);let e=!0;this.searchSegmentsCheckboxes&&this.searchSegmentsCheckboxes.length>0&&this.searchSegmentsCheckboxes.forEach(t=>{const i=this.settings.segments[t.value];i&&t.checked!==i.default&&(e=!1)}),e||t.searchParams.set("erschienenBei",this.segmentSlugs)}window.history.pushState({path:t.href},"",t.href)}clearResults(){this.resultsList.innerHTML=""}fetchResults(){const t={...this.searchOptions,pageSize:this.searchResultPagination.pageSize,page:this.searchResultPagination.current};"authors"===t.fields&&(t.author=t.query,t.query="",t.fields=""),Ii.instance.getTeasersBySearchOptions(t).then(t=>{if(t.code&&"page_out_of_range"===t.code)return this.searchResultPagination.current=1,void this.executeSearch();t.success?(this.teasers=Array.isArray(t.teasers)?t.teasers:[],this.searchResultsTotal=Number.isInteger(t.numResults)?t.numResults:0,this.searchResultPagination.last=Math.ceil(this.searchResultsTotal/this.searchResultPagination.pageSize),this.publish(l.nb)):this.showFetchError()}).catch(()=>this.showFetchError())}showFetchError(){c.a.toggleElementVisibility(this.searchLoader,!1),c.a.toggleElementVisibility(this.searchError,!0)}createResultList(){c.a.toggleElementVisibility(this.searchLoader,!1),0!==this.teasers.length?(this.teasers.forEach(t=>{const e=bi.instance.create(t,"m-list-wide-compact"),i=B.a.createElementByPrototypeId("prototype-border-separator");i&&e&&(this.resultsList.append(i),this.resultsList.append(e))}),c.a.toggleElementVisibility(this.pagination,!0),this.publish(l.T),this.scan()):c.a.toggleElementVisibility(this.searchEmpty,!0)}toggleFilters(){this.searchFilters.classList.toggle("sm:hidden"),this.searchFilters.classList.toggle("md:hidden"),this.searchFilterActive.classList.toggle("hidden"),this.searchFilterInactive.classList.toggle("hidden")}updateFilters(){const t=this.settings.fieldsets[this.fieldsetSlug];this.searchOptions.fields=t&&t.value?t.value:"";const e=this.segmentSlugs.length>0?this.segmentSlugs:this.defaultSegmentSlugs;this.searchOptions.segments=e.map(t=>this.settings.segments&&this.settings.segments[t]&&this.settings.segments[t].value?this.settings.segments[t].value:"");const i=this.settings.timespans[this.timespanSlug];i&&Number.isInteger(i.after)&&Number.isInteger(i.before)&&(this.searchOptions.after=i.after,this.searchOptions.before=i.before)}updateHeadline(){this.searchHeadline.querySelector("[data-search-result-count]").innerText=this.searchResultsTotal,this.searchHeadline.querySelector("[data-search-term]").innerText=this.searchOptions.displayQuery?this.searchOptions.displayQuery:this.searchOptions.query}updatePagination(){this.paginationCurrentPage.innerText=this.searchResultPagination.current,this.paginationLastPage.innerText=this.searchResultPagination.last,this.paginationPrev.classList.toggle("hidden",this.searchResultPagination.current<=1),this.paginationNext.classList.toggle("hidden",this.searchResultPagination.current===this.searchResultPagination.last)}goToPage(t,e){t.preventDefault();let i=e||1;i=i>1?e:1,i=i<this.searchResultPagination.last?i:this.searchResultPagination.last,this.searchResultPagination.current=i,this.executeSearch(),this.searchResults&&(this.scrollTrigger=!0)}resetFilters(){this.searchTimespanSelect&&(this.searchTimespanSelect.value=this.defaultTimespanSlug||this.searchTimespanSelect.querySelector("option").value),this.searchFieldsetRadioGroup&&(this.searchFieldsetRadioGroup.value=this.defaultFieldsetSlug),this.searchSegmentsCheckboxes&&this.searchSegmentsCheckboxes.length>0&&this.searchSegmentsCheckboxes.forEach(t=>{const e=this.settings.segments[t.value];t.checked=e&&e.default}),this.updateUrlParams(),this.updateFilters(),this.executeSearch()}get timespanSlug(){return this.searchTimespanSelect?this.searchTimespanSelect.value:""}get defaultTimespanSlug(){return this.settings.timespans?Object.keys(this.settings.timespans).find(t=>!!this.settings.timespans[t].default):""}get fieldsetSlug(){return this.searchFieldsetRadioGroup?this.searchFieldsetRadioGroup.value:""}get defaultFieldsetSlug(){return this.settings.fieldsets?Object.keys(this.settings.fieldsets).find(t=>!!this.settings.fieldsets[t].default):""}get segmentSlugs(){return this.searchSegmentsCheckboxes?Array.from(this.searchSegmentsCheckboxes).filter(t=>!!t.checked).map(t=>t.value):[]}get defaultSegmentSlugs(){return this.settings.segments?Object.keys(this.settings.segments).filter(t=>!!this.settings.segments[t].default):[]}destroy(){this.searchForm.removeEventListener("submit",this.boundExecuteSearch),this.searchFilters.removeEventListener("submit",this.boundExecuteSearch),this.searchFilters.removeEventListener("change",this.boundFilterResults),this.searchFilters.removeEventListener("reset",this.boundResetFilters),this.paginationNext.removeEventListener("click",this.boundGoToNextPage),this.paginationPrev.removeEventListener("click",this.boundGoToPrevPage),this.searchFilterToggle.removeEventListener("click",this.boundToggleFilters),this.searchInput.removeEventListener("input",this.boundOnSearchInputValueChanged),this.searchInputClearButton.removeEventListener("click",this.boundOnClearIconClicked),super.destroy()}}const fs=2e3;class ws extends o.Component{constructor(...t){super(...t),this.settings=JSON.parse(this.data.settings),this.storageObject=new C("sourcepoint","session"),this.scriptSrc=this.settings.scriptSrc,this.pendingChoiceId=null,this.isExecuteMessagingPending=!1,this.isMessagePending=!1,this.init()}init(){this.subscribe(l.yb,this.openPrivacyManager),this.subscribe(l.Ab,this.selectChoice),this.subscribe(l.zb,this.reloadMessages),this.subscribe(l.Db,this.onTCDataChanged),this.subscribe(l.R,this.onLanguageSwitched),this.subscribe(l.ab,this.onPageResume),window.addEventListener("error",t=>{this.onWindowError(t)}),this.initAuthIdCookie(),this.initSourcepointConfig(),this.initPrivacyManagerButtons(),this.attachPrivacyManagerPullToRefreshFix(),d.a.instance.isNewLoggedIn&&d.a.instance.hasNoAdsAccess?this.deleteConsentDataHistory().catch(t=>{console.error(t.message)}).finally(()=>{this.initSourcepointScript()}):this.initSourcepointScript()}initAuthIdCookie(){if(!_.a.isApp||!G.a.instance.authId)return;const t=w.a.get(u.i.authId.name);t&&t===G.a.instance.authId||w.a.set(u.i.authId.name,G.a.instance.authId,{expires:u.i.authId.expires})}initSourcepointConfig(){const{accountId:t,baseEndpoint:e,propertyHref:i,propertyId:n,campaignEnv:a,requestMessage:o}=this.settings,r=s.a.instance,l=d.a.instance,h=r.page&&r.page.category&&r.page.category.route?r.page.category.route:"";window._sp_queue=[],window._sp_={config:{accountId:t,baseEndpoint:e,isSPA:!0,consentLanguage:ni.instance.language,gdpr:{},events:{onPrivacyManagerAction:(...t)=>{2===t.length&&t[0];const e=2===t.length?t[1]:t[0];this.onPrivacyManagerAction(e)},onPMCancel:()=>{this.onPrivacyManagerCancel()},onMessageReady:(...t)=>{t[0]&&"string"==typeof t[0]&&t[0];this.onMessageReady()},onMessageReceiveData:(...t)=>{2===t.length&&t[0];const e=2===t.length?t[1]:t[0];this.onReceiveMessageData(e)},onMessageChoiceSelect:(...t)=>{3===t.length&&t[0];const e=3===t.length?t[1]:t[0],i=3===t.length?t[2]:t[1];this.onMessageChoiceSelect(e,i)},onMessageChoiceError:t=>{this.onMessageChoiceError(t)},onConsentReady:(...t)=>{4===t.length&&t[0];const e=4===t.length?t[1]:t[0],i=4===t.length?t[2]:t[1];this.onConsentReady(e,i)},onError:(...t)=>{console.error("SourcePoint onError",t)}},targetingParams:{platform:_.a.isApp?"app":"web",is_phone:Z.a.isPhone,is_tablet:Z.a.isTablet,is_mobile:Z.a.isMobile,route:h,is_loggedIn:l.isLoggedIn,has_paid_access:l.hasPaidAccess,has_noAds_access:l.hasNoAdsAccess,has_conditional_access:l.hasConditionalAccess,disable_consent:!(!r.consent||"boolean"!=typeof r.consent.disabled)&&r.consent.disabled,lang:ni.instance.language}}},i?window._sp_.config.propertyHref=i:n&&(window._sp_.config.propertyId=n),a&&"public"!==a&&(window._sp_.config.campaignEnv=a),"article"===h&&(window._sp_.config.targetingParams.paywall_is_active=r.paywall&&r.paywall.attributes&&r.paywall.attributes.is_active,window._sp_.config.targetingParams.paywall_type=r.paywall&&r.paywall.category&&r.paywall.category.type?r.paywall.category.type:""),_.a.isApp&&(_.a.isAndroidApp?window._sp_.config.targetingParams.os="Android":_.a.isIOSApp&&(window._sp_.config.targetingParams.os="iOS"),window._sp_.config.targetingParams.app_version=_.a.appVersion);const c=!(!r.consent||"boolean"!=typeof r.consent.disabled)&&r.consent.disabled;o?window._sp_.config.targetingParams.requestMessage=o:l.hasNoAdsAccess||c||Z.a.isCrawler||(window._sp_.config.targetingParams.requestMessage="consent-layer")}initPrivacyManagerButtons(){const t=Array.from(document.querySelectorAll('a[href^="#sp_privacy_manager"]'));if(t&&t.length>0)for(let e=0;e<t.length;e++){const i=t[e],s=i.hash.split("#sp_privacy_manager_")[1]?i.hash.split("#sp_privacy_manager_")[1]:"";i.addEventListener("click",t=>{t.preventDefault(),this.publish(l.yb,s)})}}initSourcepointScript(){const t=document.createElement("script");t.src=this.scriptSrc,t.addEventListener("error",t=>{this.onScriptElementError(t)}),t.addEventListener("load",t=>{this.onScriptElementLoaded(t)}),this.el.appendChild(t)}openPrivacyManager(t=""){const{privacyManagerId:e}=this.settings;if(e&&window._sp_){if("function"==typeof window._sp_.loadPrivacyManagerModal)window._sp_.loadPrivacyManagerModal(e,t);else{if(!window._sp_.gdpr||"function"!=typeof window._sp_.gdpr.loadPrivacyManagerModal)return;window._sp_.gdpr.loadPrivacyManagerModal(e,t)}this.attachPrivacyManagerResizeFix(),this.publish(l.xb)}}reloadMessages(){this.destroyMessages(),this.executeMessaging()}deleteConsentDataHistory(){return new Promise((t,e)=>{const{siteId:i}=this.settings,s=w.a.get(u.i.consentUUID.name);if(i&&s){fetch(`https://sourcepoint.mgr.consensu.org/tcfv2/consent/v3/${i}?consentUUID=${s}`,{method:"DELETE",headers:{"Content-Type":"text/plain"}}).then(i=>{200!==i.status&&e(new Error("Sourcepoint failed to delete consent data history, consentUUID: "+s)),t()}).catch(()=>{e(new Error("Sourcepoint failed to delete consent data history, consentUUID: "+s))})}else e(new Error("Sourcepoint failed to delete consent data history, no data"))})}onReceiveMessageData(t){this.isExecuteMessagingPending&&(this.publish(l.vb),this.isExecuteMessagingPending=!1),t&&t.msgDescription?(this.isMessagePending=!0,li.instance.message=t.msgDescription):this.publish(l.ub)}onMessageReady(){this.isMessagePending&&(this.publish(l.tb,li.instance.message),this.isMessagePending=!1)}onMessageChoiceSelect(t,e){e&&(this.publish(l.sb,e),this.onChoiceSelect(e))}onMessageChoiceError(t){this.publish(l.rb),li.instance.errorOccurred=!0}onPrivacyManagerAction(t){if(this.detachPrivacyManagerResizeFix(),t&&t.purposeConsent&&t.vendorConsent){let e;"all"===t.purposeConsent&&"all"===t.vendorConsent?(e=u.m.accept_all,this.onChoiceSelect(u.l.accept_all)):"none"===t.purposeConsent&&"none"===t.vendorConsent&&(e=u.m.reject_all,this.onChoiceSelect(u.l.reject_all)),this.publish(l.wb,e)}}onPrivacyManagerCancel(){this.publish(l.wb,u.m.cancel)}onChoiceSelect(t){this.pendingChoiceId||(t===u.l.accept_all||t===u.l.accept_some||t===u.l.reject_all?this.pendingChoiceId=t:this.publish(l.qb,t))}onConsentReady(t,e){void 0!==this.consentReadyTimeoutId&&clearTimeout(this.consentReadyTimeoutId),this.pendingChoiceId&&(this.consentReadyTimeoutId=setTimeout(()=>{const t=this.pendingChoiceId;this.pendingChoiceId=null,this.publish(l.qb,t)},fs)),_.a.isApp&&this.publish(l.X,new le(t,e))}onTCDataChanged(t){}onScriptElementLoaded(){window._sp_&&window._sp_.config&&window._sp_.config.isSPA&&"function"==typeof window._sp_.executeMessaging&&window._sp_.executeMessaging()}onLanguageSwitched(t){t&&window._sp_&&window._sp_.config&&(window._sp_.config.consentLanguage=t,this.executeMessaging())}onPageResume(){this.reloadMessages()}onScriptElementError(t){console.error("SourcePoint onScriptElementError",t),this.publish(l.rb),li.instance.errorOccurred=!0}onWindowError(t){t.filename&&t.filename===this.scriptSrc&&(console.error("SourcePoint onWindowError",t),this.publish(l.rb),li.instance.errorOccurred=!0)}destroyMessages(){Array.from(document.querySelectorAll('body [id^="sp_message_container"]')).filter(t=>t&&t.style&&"none"!==t.style.display).length>0&&window._sp_&&"function"==typeof window._sp_.destroyMessages&&window._sp_.destroyMessages()}executeMessaging(){window._sp_&&"function"==typeof window._sp_.executeMessaging&&(this.isExecuteMessagingPending=!0,window._sp_.executeMessaging())}attachPrivacyManagerResizeFix(){Z.a.isMobileSafari&&(this.boundOnWindowResize||(this.boundOnWindowResize=()=>{setTimeout(()=>{window.scrollTo(0,1)},500)}),window.addEventListener("resize",this.boundOnWindowResize))}detachPrivacyManagerResizeFix(){Z.a.isMobileSafari&&this.boundOnWindowResize&&window.removeEventListener("resize",this.boundOnWindowResize)}attachPrivacyManagerPullToRefreshFix(){if(!_.a.isAndroidApp)return;const t=document.createElement("style");t.appendChild(document.createTextNode('[id^="sp_message_container"] { overflow: visible !important; }')),document.head&&t&&document.head.appendChild(t)}}class vs extends o.Component{constructor(...t){super(...t),this.settings=JSON.parse(this.data.settings),this.articleId=this.settings.articleId?this.settings.articleId:"",this.embedRoot=this.el.querySelector('[data-talk-el="embedRoot"]'),this.el.classList.contains("lazyloaded")?this.init():(this.boundInit=()=>{this.init()},this.el.addEventListener("lazybeforeunveil",this.boundInit))}init(){this.settings.baseURL?window.Coral&&window.Coral.Talk?this.renderTalk():this.subscribe(l.Bb,()=>{this.renderTalk()}):console.error("Talk Base URL is undefined")}renderTalk(){window.Coral.Talk.render(this.embedRoot,{talk:this.settings.baseURL,auth_token:w.a.get("userInfo"),asset_id:this.articleId});this.el.querySelector(`iframe[src^="${this.settings.baseURL}"]`).style.minHeight="450px"}destroy(){super.destroy()}}class Is extends o.Component{constructor(...t){super(...t),this.hash="kommentare",this.overlay=this.el.querySelector('[data-talk-drawer-el="overlay"]'),this.closeButton=this.el.querySelector('[data-talk-drawer-el="close"]'),this.toTopButton=this.el.querySelector('[data-talk-drawer-el="toTopButton"]'),this.talkDrawer=this.el.querySelector('[data-talk-drawer-el="talkDrawer"]'),this.intersectionObserverTarget=this.el.querySelector('[data-talk-drawer-el="intersectionObserverTarget"]'),this.body=document.querySelector("body"),this.talkActive=!1,this._showToTopButton=!1,this.subscribe(l.Hb,t=>{this.returnFocusElement=t&&t instanceof Element?t:null,this.talkActive?this.publish(l.C):this.publish(l.F,this.id)}),this.closeButton.addEventListener("click",t=>{t.preventDefault(),this.publish(l.C)}),this.toTopButton.addEventListener("click",()=>{this.scrollToTop()}),this.overlay.addEventListener("click",()=>{this.publish(l.C)}),Wi.instance.register(this),window.location.hash==="#"+this.hash&&this.publish(l.F,this.id)}onIntersectionChanged(t){this.showToTopButton=!t[0].isIntersecting}open(){this.overlay.classList.add("fixed"),this.talkDrawer.style.transform="translateX(0px)",this.talkDrawer.style.webkitTransform="translateX(0px)",this.talkDrawer.classList.remove("hidden"),this.body.classList.add("scrollbar-none"),this.intersectionObserverTarget&&!this.intersectionObserver&&this.initIntersectionObserver(),this.publish(l.gb,this),this.focusDrawer(),this.talkActive=!0}close(){this.overlay.classList.remove("fixed"),this.talkDrawer.style.transform="translateX(100%)",this.talkDrawer.style.webkitTransform="translateX(100%)",this.talkDrawer.addEventListener("ontransitionend",()=>{this.talkDrawer.classList.add("hidden")}),this.body.classList.remove("scrollbar-none"),this.publish(l.eb,this),this.returnFocusElement&&this.returnFocusElement.focus(),this.talkActive=!1}initIntersectionObserver(){this.intersectionObserverTarget&&(this.intersectionObserver=new IntersectionObserver(t=>this.onIntersectionChanged(t),{root:this.talkDrawer,rootMargin:"600px 0px 0px 0px"}),this.intersectionObserver.observe(this.intersectionObserverTarget))}focusDrawer(){this.closeButton.focus()}scrollToTop(){this.talkDrawer.scrollTo({top:0,behavior:"smooth"})}get id(){return this.data.componentId}get preventScrolling(){return Z.a.isMobile}get showToTopButton(){return this._showToTopButton}set showToTopButton(t){t?(this.toTopButton.classList.remove("invisible"),this.toTopButton.style.transform="translateY(0px)",this.toTopButton.style.webkitTransform="translateY(0px)",this._showToTopButton=!0):(this.toTopButton.classList.add("invisible"),this.toTopButton.style.transform="translateY(100%)",this.toTopButton.style.webkitTransform="translateY(150%)",this._showToTopButton=!1)}destroy(){super.destroy()}}const As="MODE_PLAY",Es="MODE_PAUSE",Ss="MODE_STOP",ks="STATE_DEFAULT",Cs="STATE_LOADING",Ps="STATE_WAITING",Ls="STATE_PLAYING",Ts="STATE_ERROR",_s="AUTOPLAY_INTERSECTION",Os="AUTOPLAY_MOUSEOVER",xs="AUTOPLAY_NONE";class Ns extends o.Component{constructor(...t){super(...t),this.video=this.el.querySelector('[data-video-el="video"]'),this.poster=this.el.querySelector('[data-video-el="poster"]'),this.loader=this.el.querySelector('[data-video-el="loader"]'),!Z.a.isInternetExplorer&&Element.prototype.closest&&(this.mouseTarget=this.el.closest('[data-video-el="mouseTarget"]')),this.mouseTarget=this.mouseTarget||this.el,this.settings=this.data.settings?JSON.parse(this.data.settings):{},this.dataSrc=this.video?this.video.getAttribute("data-src"):"",this.jwplayerMediaId=this.settings.jwplayerMediaId?this.settings.jwplayerMediaId:"",this.useJwplayerVideoThumbnail=!!this.settings.useJwplayerVideoThumbnail,this.useJwplayerDeliveryAPI=!!this.settings.useJwplayerDeliveryAPI,this.lazyload=!!this.settings.lazyload,this.loop=!!this.settings.loop,this.backgroundColor=this.settings.backgroundColor?this.settings.backgroundColor:"",this.blurredBackgroundClasses=Array.isArray(this.settings.blurredBackgroundClasses)?this.settings.blurredBackgroundClasses:[],this.autoplayModeOnMouseOver=!!this.settings.autoplayOnMouseOver,this.maxPlays=Number.isInteger(this.settings.maxPlays)?this.settings.maxPlays:null,this.settings.autoplay?this.autoplayMode=!Z.a.isMobile&&this.autoplayModeOnMouseOver?Os:_s:this.autoplayMode=xs,this.boundOnMouseEnter=t=>this.onMouseEnter(t),this.boundOnMouseMove=t=>this.onMouseMove(t),this.boundOnLazyLoad=t=>this.onLazyLoad(t),this.boundOnVideoCanPlay=()=>this.onVideoCanPlay(),this.boundOnVideoLoadedMetadata=()=>this.onVideoLoadedMetadata(),this.boundOnVideoPlaying=()=>this.onVideoPlaying(),this.boundOnVideoWaiting=()=>this.onVideoWaiting(),this.boundOnVideoEnded=()=>this.onVideoEnded(),this.boundOnVideoError=()=>this.onError(),this.completedPlays=0,this.isInitialized=!1,this.isLoaded=!1,this.mode=Ss,this.state=ks,this.video&&(this.dataSrc||this.jwplayerMediaId)?this.init():this.onError()}init(){(Z.a.isMobileSafari||_.a.isIOSApp)&&this.video.addEventListener("loadedmetadata",this.boundOnVideoLoadedMetadata),this.video.addEventListener("canplay",this.boundOnVideoCanPlay),this.video.addEventListener("playing",this.boundOnVideoPlaying),this.video.addEventListener("waiting",this.boundOnVideoWaiting),this.video.addEventListener("ended",this.boundOnVideoEnded),this.video.addEventListener("error",this.boundOnVideoError),this.autoplayMode!==xs&&(this.intersectionObserverTarget=this.el,this.intersectionObserver=null,this.initIntersectionObserver(),this.autoplayMode===Os&&this.mouseTarget.addEventListener("mouseenter",this.boundOnMouseEnter)),this.lazyload?this.el.addEventListener("lazybeforeunveil",this.boundOnLazyLoad):this.loadVideo()}loadVideo(){this.dataSrc?(this.loadVideoByDataSrc(),this.loadPosterFallback()):this.jwplayerMediaId&&this.useJwplayerVideoThumbnail&&!this.useJwplayerDeliveryAPI?(this.loadJwVideoThumbnailWithAssembledUrl(),this.loadPosterFallback()):this.jwplayerMediaId&&this.useJwplayerDeliveryAPI?this.loadJwVideoFromApi():this.onError()}loadVideoByDataSrc(){this.dataSrc&&(this.src=this.dataSrc)}loadJwVideoThumbnailWithAssembledUrl(){if(!this.jwplayerMediaId)return;const t=as.instance.getVideoThumbnailByMediaId(this.jwplayerMediaId,this.offsetWidth);t?this.src=t:this.onError()}loadJwVideoFromApi(){if(!this.jwplayerMediaId)return;const t=as.instance;t.getMediaObjectByMediaId(this.jwplayerMediaId).then(e=>{let i="";i=this.useJwplayerVideoThumbnail?t.getVideoThumbnailByMediaObject(e,this.offsetWidth):t.getVideoByMediaObject(e,this.offsetWidth),i?(this.src=i,this.poster||this.videoPoster||(this.videoPoster=t.getImageThumbnailByMediaObject(e,this.offsetWidth))):this.onError()}).catch(()=>this.onError())}loadPosterFallback(){if(!this.poster&&!this.videoPoster&&this.jwplayerMediaId){const t=as.instance;t.getMediaObjectByMediaId(this.jwplayerMediaId).then(e=>{this.videoPoster=t.getImageThumbnailByMediaObject(e,this.offsetWidth)}).catch(()=>{})}}initIntersectionObserver(){this.intersectionObserverTarget&&(this.intersectionObserver=new IntersectionObserver(t=>this.onIntersectionChanged(t),{threshold:[0,.5]}),this.intersectionObserver.observe(this.intersectionObserverTarget))}play(){"function"==typeof this.video.play&&this.video.play()}pause(){this.isPlaying&&"function"==typeof this.video.pause&&this.video.pause()}stop(){this.isPlaying&&"function"==typeof this.video.pause&&(this.video.pause(),this.video.currentTime=0,this.videoPoster&&"function"==typeof this.video.load&&this.video.load())}onLazyLoad(t){t.target===this.el&&this.loadVideo()}onVideoLoadedMetadata(){this.onVideoCanPlay()}onVideoCanPlay(){this.isLoaded||(this.isLoaded=!0,this.mode===As&&this.play())}onVideoPlaying(){this.mode===Ss?this.stop():this.state=Ls}onVideoWaiting(){this.state=Ps}onVideoEnded(){this.completedPlays+=1,Number.isInteger(this.maxPlays)&&this.completedPlays>=this.maxPlays?(this.mode=Ss,this.destroy()):this.loop&&this.completedPlays<this.maxPlays?this.play():this.mode=Ss}onIntersectionChanged(t){t[0].isIntersecting?this.autoplayMode===_s&&t[0].intersectionRatio>=.5&&(this.mode=As):!this.maxPlays&&this.useJwplayerVideoThumbnail?this.mode=Ss:this.mode=Es}onMouseEnter(){this.mode=As}onMouseMove(t){this.isMousePositionInside(t.clientX,t.clientY)||(this.mode=Ss)}onError(){this.state=Ts,this.destroy()}isMousePositionInside(t,e){if(!Number.isInteger(t)||!Number.isInteger(e))return!1;const i=this.mouseTarget.getBoundingClientRect(),s=t-i.left,n=e-i.top;return s>=0&&s<=i.width&&n>=0&&n<=i.height}togglePoster(t){"blur"===this.backgroundColor&&this.blurredBackgroundClasses.length>0?this.blurredBackgroundClasses.forEach(e=>{this.poster.classList.toggle(e,!t)}):c.a.toggleElementVisibility(this.poster,t)}get offsetWidth(){return this.el&&this.el.offsetWidth?this.el.offsetWidth:0}get isPlaying(){return this.video&&this.video.currentTime>0&&!this.video.paused&&!this.video.ended&&this.video.readyState>this.video.HAVE_CURRENT_DATA}get src(){return this._src?this._src:""}set src(t){t&&this.video&&!this.video.getAttribute("src")&&(this._src=t,this.video.setAttribute("src",t))}get videoPoster(){return this.video&&this.video.getAttribute("poster")?this.video.getAttribute("poster"):""}set videoPoster(t){t&&this.video&&!this.video.getAttribute("poster")&&this.video.setAttribute("poster",t)}get mode(){return this._mode?this._mode:""}set mode(t){if(this._mode!==t)switch(this._mode=t,t){case As:this.isLoaded?this.play():this.state=Cs,this.autoplayMode===Os&&window.addEventListener("mousemove",this.boundOnMouseMove);break;case Es:this.isLoaded&&this.pause(),this.autoplayMode===Os&&window.removeEventListener("mousemove",this.boundOnMouseMove);break;case Ss:default:this.state=ks,this.isLoaded&&this.stop(),this.autoplayMode===Os&&window.removeEventListener("mousemove",this.boundOnMouseMove)}}set state(t){if(this._state!==t)switch(this._state=t,t){case Cs:c.a.toggleElementVisibility(this.loader,!0),this.poster?(this.togglePoster(!0),c.a.toggleElementVisibility(this.video,!1)):c.a.toggleElementVisibility(this.video,!0);break;case Ps:c.a.toggleElementVisibility(this.loader,!0),this.togglePoster(!1),c.a.toggleElementVisibility(this.video,!0);break;case Ls:c.a.toggleElementVisibility(this.loader,!1),this.togglePoster(!1),c.a.toggleElementVisibility(this.video,!0);break;case Ts:case ks:default:c.a.toggleElementVisibility(this.loader,!1),this.poster?(this.togglePoster(!0),c.a.toggleElementVisibility(this.video,!1)):c.a.toggleElementVisibility(this.video,!0)}}destroy(){this.el.removeEventListener("lazybeforeunveil",this.boundOnLazyLoad),this.mouseTarget.removeEventListener("mouseenter",this.boundOnMouseEnter),window.removeEventListener("mousemove",this.boundOnMouseMove),this.intersectionObserver&&"function"==typeof this.intersectionObserver.disconnect&&this.intersectionObserver.disconnect(),this.video&&(this.video.removeEventListener("canplay",this.boundOnVideoCanPlay),this.video.removeEventListener("loadedmetadata",this.boundOnVideoLoadedMetadata),this.video.removeEventListener("playing",this.boundOnVideoPlaying),this.video.removeEventListener("waiting",this.boundOnVideoWaiting),this.video.removeEventListener("ended",this.boundOnVideoEnded),this.video.removeEventListener("error",this.boundOnVideoError)),super.destroy()}}class Bs extends ps{constructor(...t){if(super(...t),this.isInitialized=!1,this.settings=this.data.settings?JSON.parse(this.data.settings):{},this.settings.disableVideoDataControl)return;!(!s.a.instance.consent||"boolean"!=typeof s.a.instance.consent.globallyDisabled)&&s.a.instance.consent.globallyDisabled&&this.addRequiredPurpose(u.n.store_and_access_information_on_a_device);ls.instance;"object"==typeof window.$AC&&"function"==typeof window.$AC.loadConfig?this.init():(this.el.onload=()=>{this.onLoad()},this.el.onerror=()=>{this.onError()},this.loadSrc())}onLoad(){this.init()}onError(){console.error("Unable to load VDC source"),this.publish(l.Ub)}init(){this.isInitialized||(this.publish(l.Vb),this.isInitialized=!0)}destroy(){super.destroy()}}class Ds extends o.Component{constructor(...t){super(...t),this.init()}init(){const t=this.el.querySelector('[data-vouchers-el="advertisementLabel"]'),e=this.el.querySelector('[data-vouchers-el="vouchersContainer"]');d.a.instance.hasNoAdsAccess||(t&&t.classList.remove("hidden"),e&&e.classList.remove("hidden"))}destroy(){super.destroy()}}const Us=new C("stories","local"),Rs={visitedStories:Array.isArray(Us.getItem("visited"))?Us.getItem("visited"):[],add(t){t&&!this.visitedStories.includes(t)&&(this.visitedStories.push(t),Us.setItem("visited",this.visitedStories))},includes(t){return this.visitedStories.includes(t)}};const Ms=d.a.instance;var js=i(16);class Vs{static getPodcastPlatformLinks(t){const e=[],{itunesId:i,feedUrl:s,spotifyId:n}=t;return i&&e.push({id:"apple-podcasts",platform:"Apple Podcasts",link:"https://podcasts.apple.com/podcast/id"+i},{id:"castbox",platform:"Castbox",link:"https://castbox.fm/vic/"+i}),s&&e.push({id:"google-podcasts",platform:"Google Podcasts",link:"https://podcasts.google.com/?feed="+js.a.encodeBase64(s)},{id:"rss",platform:"RSS",link:s}),n&&e.push({id:"spotify",platform:"Spotify",link:"https://open.spotify.com/show/"+n}),e}}const zs=Symbol("INSTANCE"),qs=Symbol("SINGELTONENFORCER");class Fs{constructor(t){if(t!==qs)throw new Error("Instantiation failed: Use OmnyStudio.instance instead of new.");this.init()}static get instance(){return this[zs]||(this[zs]=new Fs(qs)),this[zs]}init(){const t=s.a.instance;t.thirdparty&&t.thirdparty.omny&&t.thirdparty.omny.apiUrl&&t.thirdparty.omny.orgId?(this.apiUrl=t.thirdparty.omny.apiUrl,this.orgId=t.thirdparty.omny.orgId,this.programs=t.thirdparty.omny.programs?t.thirdparty.omny.programs:{}):console.error("OmnyStudio requires apiUrl and orgId for correct instantiation.")}getClipByClipId(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("OmnyStudio getClipByClipId - missing valid clipId function param"));const e=`${this.apiUrl}/orgs/${this.orgId}/clips/${t}`;return new Promise((i,s)=>{this.fetchUrl(e).then(e=>{if(e){const t=this.sanitizeFieldsInObject(e,["Title","Description"]);i(t)}else s(new Error("OmnyStudio getClipByClipId - no clip found for clipId: "+t))}).catch(t=>s(t))})}getClipByPlaylistId(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("OmnyStudio getClipByPlaylistId - missing valid playlistId function param"));const e=`${this.apiUrl}/orgs/${this.orgId}/playlists/${t}/clips?pageSize=1`;return new Promise((i,s)=>{this.fetchUrl(e).then(e=>{const n=e.Clips&&Array.isArray(e.Clips)&&"undefined"!==e.Clips[0]?e.Clips[0]:void 0;if(n){const t=this.sanitizeFieldsInObject(n,["Title","Description"]);i(t)}else s(new Error("OmnyStudio getClipByPlaylistId - no clip found for playlistId: "+t))}).catch(t=>s(t))})}getClipsByPlaylistId(t,e=7){if(!t||"string"!=typeof t)return Promise.reject(new Error("OmnyStudio getClipByPlaylistId - missing valid playlistId function param"));const i=`${this.apiUrl}/orgs/${this.orgId}/playlists/${t}/clips?pageSize=${e}`;return new Promise((e,s)=>{this.fetchUrl(i).then(i=>{const n=i.Clips&&Array.isArray(i.Clips)&&i.Clips.length>0?i.Clips:void 0;if(n){const t=n.map(t=>this.sanitizeFieldsInObject(t,["Title","Description"]));e(t)}else s(new Error("OmnyStudio getClipsByPlaylistId - no clips found for playlistId: "+t))}).catch(t=>s(t))})}getPlaylistByPlaylistId(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("OmnyStudio getPlaylistByPlaylistId - missing valid playlistId function param"));const e=`${this.apiUrl}/orgs/${this.orgId}/playlists/${t}`;return new Promise((i,s)=>{this.fetchUrl(e).then(e=>{if(e){const t=this.sanitizeFieldsInObject(e,["Title","Description"]);i(t)}else s(new Error("OmnyStudio getPlaylistByPlaylistId - no playlist found for playlistId: "+t))}).catch(t=>s(t))})}getPlaylistIdFromClip(t){return void 0!==t&&t.PlaylistIds&&Array.isArray(t.PlaylistIds)?t.PlaylistIds[0]:""}getProgramIdFromClip(t){return void 0!==t&&t.ProgramId?t.ProgramId:""}getProgramNameByProgramId(t){return this.programs[t]&&this.programs[t].name?this.programs[t].name:""}getPlayButtonLabelByProgramId(t){return t&&this.programs[t]&&this.programs[t].playButtonLabel?this.programs[t].playButtonLabel:"Anhören"}getReplayButtonLabelByProgramId(t){return t&&this.programs[t]&&this.programs[t].replayButtonLabel?this.programs[t].replayButtonLabel:"Erneut anhören"}getPlatformLinksByPlaylistId(t){return new Promise((e,i)=>{this.getPlaylistByPlaylistId(t).then(t=>{const i=this.getPlatformLinksByPlaylist(t);e(i)}).catch(t=>i(t))})}getPlatformLinksByClipId(t){return new Promise((e,i)=>{this.getClipByClipId(t).then(e=>{const s=this.getPlaylistIdFromClip(e);return s||i(new Error("OmnyStudio getPlatformLinksByClipId - no playlist found for clipId: "+t)),Fs.instance.getPlaylistByPlaylistId(s)}).then(t=>{const i=this.getPlatformLinksByPlaylist(t);e(i)}).catch(t=>i(t))})}getPlatformLinksByPlaylist(t){if(!t||!t.Id)return this.onError(),null;const e=Fs.instance.getItunesIdByPlaylist(t),i=Fs.instance.getSpotifyIdByPlaylist(t),s=Fs.instance.getFeedUrlByPlaylist(t);return Vs.getPodcastPlatformLinks({itunesId:e,feedUrl:s,spotifyId:i})}getItunesIdByPlaylist(t){if(!t||!t.DirectoryLinks||!t.DirectoryLinks.ApplePodcasts)return null;const e=t.DirectoryLinks.ApplePodcasts.match(/id(?<itunesId>\d+)/);return e&&e.groups&&e.groups.itunesId?e.groups.itunesId:null}getSpotifyIdByPlaylist(t){if(!t||!t.DirectoryLinks||!t.DirectoryLinks.Spotify)return null;const e=t.DirectoryLinks.Spotify.match(/show\/(?<spotifyId>([A-Za-z]|\d)+)/);return e&&e.groups&&e.groups.spotifyId?e.groups.spotifyId:null}getFeedUrlByPlaylist(t){return t&&t.DirectoryLinks&&t.DirectoryLinks.RssFeed?t.DirectoryLinks.RssFeed:null}fetchUrl(t){return fetch(t,{method:"GET",headers:{"Content-Type":"text/plain"}}).then(t=>200!==t.status?Promise.reject(new Error("OmnyStudio fetchUrl - failed to get data from API, URL: "+t.url)):t.json())}sanitizeFieldsInObject(t,e){const i={...t};return e.forEach(t=>{i[t]&&"string"==typeof i[t]&&(i[t]=this.sanitizeString(i[t]))}),i}sanitizeString(t){return t.replace(/[AOUaou]\u0308/g,t=>{switch(t.charCodeAt(0)){case 65:return"Ä";case 79:return"Ö";case 85:return"Ü";case 97:return"ä";case 111:return"ö";case 117:return"ü";default:return t}})}}var Ws=i(21),Gs=i(22);const $s=Symbol("INSTANCE"),Hs=Symbol("SINGELTONENFORCER"),Js="STATE_READY",Zs="STATE_LOADING",Ks="STATE_ERROR";class Qs{constructor(t){if(t!==Hs)throw new Error("Instantiation failed: Use Secretbox.instance instead of new.");this._state=Zs,this._tweetnaclTimeout=null,this.key=d.a.instance.secretboxKey,this.key?this.init():this._state=Ks}static get instance(){return this[$s]||(this[$s]=new Qs(Hs)),this[$s]}init(){window.nacl&&window.nacl.secretbox?this.onTweetnaclSourceReady():ts.instance.load("tweetnacl").then(()=>this.onTweetnaclSourceReady()).catch(t=>this.onTweetnaclSourceError(t))}onTweetnaclSourceReady(){this.secretbox=window.nacl.secretbox,this._state=Js,c.a.publish(l.ob)}onTweetnaclSourceError(t){this._state=Ks,console.warn(t.message)}decrypt(t){if(this.state!==Js){let t="";switch(this.state){case Ks:t="Secretbox is not available";break;case Zs:t="Secretbox is not yet ready";break;default:t="Secretbox has not been initialized"}return console.error(t),""}const e=Object(Ws.decode)(this.key),i=Object(Ws.decode)(t),s=i.slice(0,this.secretbox.nonceLength),n=i.slice(this.secretbox.nonceLength),a=this.secretbox.open(n,s,e);if(!a)return console.error("Could not decrypt message"),"";return Object(Gs.decode)(a)}get ready(){return this.state===Js}get state(){return this._state}}const Xs="audio-omny-initialized",Ys="audio-omny-loaded",tn="audio-omny-error";function en(t){t.magic("audio",e=>t.$data(e)._audio),t.directive("audio-omny",(e,{expression:i})=>{const s=t.closestDataStack(e)[0];if(!s)throw new Error("x-audio-omny could not find data stack – use x-data to define one");s._audio={isInitialized:!1,hasError:!1,clips:[],clip:{},loadData:u};const n=c.a.parseBase64Settings(i),a=(Array.isArray(n.audios)?n.audios:[]).filter(t=>function(t){const{secretboxKey:e,subscriptions:i,hasGiftArticleAccess:s}=d.a.instance;let n=!t.isEncrypted;t.isEncrypted&&e&&Array.isArray(t.subscriptions)&&t.subscriptions.forEach(t=>{n=n||s||i.includes(t)});return n}(t)),o=a.filter(t=>t.isEncrypted).length>0;function r(){const t=Qs.instance;a.forEach(e=>{e.isEncrypted&&e.omnystudioClipId&&(e.omnystudioClipId=t.decrypt(e.omnystudioClipId)),e.isEncrypted&&e.omnystudioPlaylistId&&(e.omnystudioPlaylistId=t.decrypt(e.omnystudioPlaylistId))}),h()}function h(){s._audio.isInitialized=!0,e.dispatchEvent(new CustomEvent(Xs)),n.autoload&&u()}function u(){return s._audio.isInitialized?new Promise((t,i)=>{Promise.all(a.map(t=>{return t.omnystudioPlaylistId?(e=t.omnystudioPlaylistId,new Promise((t,i)=>{const s={};Fs.instance.getClipByPlaylistId(e).then(t=>(s.clip=t,Fs.instance.getPlaylistByPlaylistId(e))).then(e=>{s.playlist=e,t(s)}).catch(t=>i(t))})):t.omnystudioClipId?(i=t.omnystudioClipId,new Promise((t,e)=>{const s={};Fs.instance.getClipByClipId(i).then(e=>(s.clip=e,s.playlistId=Fs.instance.getPlaylistIdFromClip(e),s.programId=Fs.instance.getProgramIdFromClip(e),s.playlistId||(s.programName=s.programId?Fs.instance.getProgramNameByProgramId(s.programId):"",t(s)),Fs.instance.getPlaylistByPlaylistId(s.playlistId))).then(e=>{s.playlist=e,t(s)}).catch(t=>e(t))})):Promise.resolve(null);var e,i})).then(a=>{const o=[];if(Array.isArray(a)&&a.forEach(t=>{if(t){const e=function(t){if(!t.clip)return null;const e=n.posterSize||"small";let i=null;t.clip.ImageUrl?(i=new URL(t.clip.ImageUrl),i.searchParams.set("size",e)):t.playlist&&t.playlist.ArtworkUrl&&(i=new URL(t.playlist.ArtworkUrl),i.searchParams.set("size",e));const s=[];t.playlist&&t.playlist.DirectoryLinks&&Object.keys(t.playlist.DirectoryLinks).forEach(e=>{if(t.playlist.DirectoryLinks[e])switch(e){case"ApplePodcasts":{const e=t.playlist.DirectoryLinks.ApplePodcasts;-1===e.indexOf("https://podcasts.apple.com/")&&-1===e.indexOf("https://geo.itunes.apple.com/")||s.push({id:"apple-podcasts",service:e});break}case"GooglePodcasts":{const e=t.playlist.DirectoryLinks.GooglePodcasts;e&&s.push({id:"google-podcasts",service:e});break}case"Spotify":{const e=t.playlist.DirectoryLinks.Spotify;-1!==e.indexOf("https://open.spotify.com/")&&s.push({id:"spotify",service:e});break}case"Stitcher":{const e=t.playlist.DirectoryLinks.Stitcher;-1!==e.indexOf("https://castbox.fm/")&&s.push({id:"castbox",service:e});break}case"TuneIn":case"GooglePlay":break;case"RssFeed":{const e=t.playlist.DirectoryLinks.RssFeed;e&&s.push({id:"rss",service:e});break}}});s.find(t=>"apple-podcasts"===t.id)||s.push({id:"apple-podcasts",service:""});return{id:t.clip.Id?t.clip.Id:"",audioUrl:p(t.clip),autoplayUrl:g(t.clip),resumeUrl:m(t.clip),downloadUrl:y(t.clip),posterUrl:i?i.href:"",clients:s,duration:t.clip.DurationSeconds?Math.round(1e3*t.clip.DurationSeconds):-1,headline:t.clip.Title?t.clip.Title:"",kicker:t.playlist&&t.playlist.Title?t.playlist.Title:t.programName?t.programName:"",flags:b(t.clip.Id),playButtonLabel:Fs.instance.getPlayButtonLabelByProgramId(t.programId),replayButtonLabel:Fs.instance.getReplayButtonLabelByProgramId(t.programId),articleId:t.clip.Id?f(t.clip.Id):"",playlistId:Fs.instance.getPlaylistIdFromClip(t.clip)}}(t);e&&o.push(e)}}),0===o.length){const t=new Error("Error while fetching and parsing Omny data.");console.error(t.message),s._audio.hasError=!0,i(t)}s._audio.clips=o,s._audio.clip=o[0]||{},e.dispatchEvent(new CustomEvent(Ys)),t()}).catch(t=>{console.error(t.message),s._audio.hasError=!0,e.dispatchEvent(new CustomEvent(tn)),i(t)})}):Promise.reject(new Error("x-audio-omny audioLoadData() function called too early – audio is not initialized"))}function p(t){if(!t.AudioUrl)return"";const e=new URL(t.AudioUrl);if(d.a.instance.hasNoAdsAccess&&e.searchParams.set("ttag","offer:pur"),t.ModifiedAtUtc){const i=new Date(t.ModifiedAtUtc);i instanceof Date&&!Number.isNaN(i)&&!Number.isNaN(i.getTime())&&e.searchParams.set("d",i.getTime())}return _.a.isIOSApp?e.searchParams.set("utm_source","CustomPlayer3"):_.a.isAndroidApp?e.searchParams.set("utm_source","CustomPlayer4"):e.searchParams.set("utm_source","CustomPlayer1"),e.href}function g(t){if(!t.AudioUrl)return"";const e=new URL(t.AudioUrl);if(d.a.instance.hasNoAdsAccess&&e.searchParams.set("ttag","offer:pur"),t.ModifiedAtUtc){const i=new Date(t.ModifiedAtUtc);i instanceof Date&&!Number.isNaN(i)&&!Number.isNaN(i.getTime())&&e.searchParams.set("d",i.getTime())}return e.searchParams.set("utm_source","CustomPlayer10"),e.href}function m(t){if(!t.AudioUrl)return"";const e=new URL(t.AudioUrl);if(d.a.instance.hasNoAdsAccess&&e.searchParams.set("ttag","offer:pur"),t.ModifiedAtUtc){const i=new Date(t.ModifiedAtUtc);i instanceof Date&&!Number.isNaN(i)&&!Number.isNaN(i.getTime())&&e.searchParams.set("d",i.getTime())}return e.searchParams.set("utm_source","CustomPlayer11"),e.href}function y(t){if(!t.AudioUrl)return"";const e=new URL(t.AudioUrl);if(d.a.instance.hasNoAdsAccess&&e.searchParams.set("ttag","offer:pur"),t.ModifiedAtUtc){const i=new Date(t.ModifiedAtUtc);i instanceof Date&&!Number.isNaN(i)&&!Number.isNaN(i.getTime())&&e.searchParams.set("d",i.getTime())}return _.a.isIOSApp?e.searchParams.set("utm_source","CustomPlayer8"):_.a.isAndroidApp?e.searchParams.set("utm_source","CustomPlayer9"):e.searchParams.set("utm_source","CustomPlayer2"),e.searchParams.set("download","true"),e.href}function b(t){const e=[];return a.forEach(i=>{i.omnystudioClipId===t&&Array.isArray(i.flags)&&i.flags.forEach(t=>{const i=t.replace(/-(paid|conditional)/g,"");e.push(i)})}),e}function f(t){let e="";return a.forEach(i=>{i.omnystudioClipId===t&&i.articleId&&(e=i.articleId)}),e}0===a.length||o&&!d.a.instance.secretboxKey||(o?Qs.instance.ready?r():c.a.subscribe(l.ob,r,this):h())})}function sn(t){t.directive("embed-bridge-message",(t,{expression:e},{evaluateLater:i})=>{const s=i(e);window.addEventListener("message",e=>{let i=e.data;if(e.origin===new URL(t.src).origin&&e.source===t.contentWindow){try{i=JSON.parse(i)}catch(t){return}["resize","track"].includes(i.event)&&s(()=>{},{scope:{$message:i}})}})})}function nn(t){if(_.a.isApp){Array.from(document.querySelectorAll("[x-app-ignore]")).forEach(t=>{t.setAttribute("x-ignore","")})}}var an=i(23);function on(t){document.addEventListener("alpine:init",()=>{Array.from(document.querySelectorAll("[x-lazyload]")).forEach(t=>{t.setAttribute("x-ignore","")});const e=new Qt.a({elements_selector:"[x-lazyload]",use_native:!1,unobserve_entered:!0,unobserve_completed:!0,callback_enter:e=>{e.removeAttribute("x-ignore"),"function"==typeof t.nextTick&&"function"==typeof t.initTree&&t.nextTick(()=>t.initTree(e))}});c.a.subscribe(l.T,()=>{e&&"function"==typeof e.update&&e.update()})})}function rn(t=[]){for(let e=0;e<t.length;e++){const i=t[e];if(!ye.instance.isPurposeGranted(i))return!1}return!0}function ln(t=[]){for(let e=0;e<t.length;e++){const i=t[e];if(!ye.instance.isVendorGranted(i))return!1}return!0}function hn(t=[],e=[]){return ye.instance.ready&&rn(t)&&ln(e)}function cn(t=[],e=[]){const i=!(!s.a.instance.consent||"boolean"!=typeof s.a.instance.consent.globallyDisabled)&&s.a.instance.consent.globallyDisabled;return s.a.instance.preview||hn(t,e)||i&&0===t.length&&0===e.length?Promise.resolve():new Promise(i=>{c.a.subscribe(l.Db,()=>{hn(t,e)&&i()})})}function dn(t){t.magic("focus",e=>i=>{const s=i||e;return t.nextTick(()=>s.focus())}),t.magic("formatTime",()=>t=>{if(!t||"number"!=typeof t)return"0:00";return`${Math.floor(t/60)}:${(""+Math.floor(t%60)).padStart(2,"0")}`});let e=null,i=null,n=null;t.magic("getPodcastPlatformLinks",()=>async({playlistId:t,clipId:s})=>{if(t&&t===e&&n||!t&&s&&s===i&&n)return n;e=null,i=null,n=null;try{t?(e=t,n=await Fs.instance.getPlatformLinksByPlaylistId(t)):s&&(i=s,n=await Fs.instance.getPlatformLinksByClipId(s))}catch(t){console.warn("$getPodcastPlatformLinks error: "+t.message)}return n}),t.magic("cooldown",e=>(i,s)=>new Promise(n=>{const a=Number.isInteger(i)?i:2e3,o=t.$data(e);e.setAttribute("disabled",!0),s&&(o[s]=!0),window.setTimeout(()=>{e.removeAttribute("disabled"),s&&(o[s]=!1),n()},a)})),t.magic("deepclone",()=>t=>{try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}),t.magic("searchParams",()=>new URLSearchParams(window.location.search)),t.magic("tcfv2Purposes",()=>u.n),t.magic("waitForConsent",()=>cn),t.magic("appBridge",()=>G.a.instance),t.magic("appUtils",()=>_.a),t.magic("browserHistory",()=>Wi.instance),t.magic("jwPlayerDeliveryAPI",()=>as.instance),t.magic("gujAdBridge",()=>Ut.instance),t.magic("notificationService",()=>F.instance),t.magic("omnyStudio",()=>Fs.instance),t.magic("settings",()=>s.a.instance),t.magic("userAgentUtils",()=>Z.a),t.magic("webUtils",()=>mt.a)}function un(t){t.magic("sendMessage",()=>(...t)=>{const e=t.shift(),i=ue.instance;if(i&&i.messageLookup&&i.messageLookup[e]){const s=new i.messageLookup[e](...t);s&&c.a.publish(l.X,s)}})}function pn(t){t.magic("publish",()=>(t,...e)=>{window.polygon&&window.polygon.componentLoader&&"function"==typeof window.polygon.componentLoader.publish&&window.polygon.componentLoader.publish(t,...e)}),t.magic("subscribe",()=>(t,e,i)=>{window.polygon&&window.polygon.componentLoader&&"function"==typeof window.polygon.componentLoader.subscribe&&window.polygon.componentLoader.subscribe(t,e,i)}),t.magic("unsubscribe",()=>(t,e)=>{window.polygon&&window.polygon.componentLoader&&"function"==typeof window.polygon.componentLoader.unsubscribe&&window.polygon.componentLoader.unsubscribe(t,e)}),t.directive("subscribe",(t,{modifiers:e,expression:i},{evaluateLater:s,cleanup:n})=>{if(!(Array.isArray(e)&&0!==e.length&&i&&window.polygon&&window.polygon.componentLoader&&"function"==typeof window.polygon.componentLoader.subscribe&&"function"==typeof window.polygon.componentLoader.unsubscribe))return;const a=e[0].toUpperCase(),o=s(i),r=(...t)=>{o(()=>{},{scope:{$payload:t,$topic:a}})};window.polygon.componentLoader.subscribe(a,r),n(()=>{window.polygon.componentLoader.unsubscribe(a,r)})})}var gn=i(17);function mn(t,e,i){if(!(t instanceof Element&&e))return;const s="swiper-"+Xe.kebabCase(e),n=new CustomEvent(s,{bubbles:!0,detail:i});t.dispatchEvent(n)}function yn(t){t.magic("swiper",e=>t.$data(e)._swiper),t.directive("swiper",(e,{expression:i},{evaluate:s,cleanup:n})=>{const a=t.closestDataStack(e)[0];if(!a)throw new Error("x-swiper could not find data stack – use x-data to define one");a._swiper&&"function"==typeof a._swiper.destroy&&a._swiper.destroy();const o=e.querySelector(".polygon-swiper")||e,r=e.querySelector(".polygon-swiper-button-prev"),l=e.querySelector(".polygon-swiper-button-next"),h=e.querySelector(".polygon-swiper-pagination"),c={containerModifierClass:"polygon-swiper-",slideClass:"polygon-swiper-slide",slideActiveClass:"polygon-swiper-slide-active",slideDuplicateActiveClass:"polygon-swiper-slide-duplicate-active",slideVisibleClass:"polygon-swiper-slide-visible",slideDuplicateClass:"polygon-swiper-slide-duplicate",slideNextClass:"polygon-swiper-button-next",slideDuplicateNextClass:"polygon-swiper-slide-duplicate-next",slidePrevClass:"polygon-swiper-button-prev",slideDuplicatePrevClass:"polygon-swiper-slide-duplicate-prev",wrapperClass:"polygon-swiper-wrapper",buttonDisabledClass:"polygon-swiper-button-disabled",noSwipingClass:"polygon-swiper-no-swiping",lazyLoadingClass:"polygon-swiper-lazy",lazyStatusLoadingClass:"polygon-swiper-lazy-loading",lazyStatusLoadedClass:"polygon-swiper-lazy-loaded",lazyPreloaderClass:"polygon-swiper-lazy-preloader",notificationClass:"polygon-swiper-notification",zoomContainerClass:"polygon-swiper-zoom-container",modules:[gn.a,gn.b,gn.c,gn.d],navigation:{prevEl:r,nextEl:l,disabledClass:"hidden"},pagination:{el:h,bulletClass:"rounded-circle w-8 h-8 bg-white opacity-moderate mr-6",bulletActiveClass:"polygon-swiper-pagination-bullet-active [&.polygon-swiper-pagination-bullet-active]:opacity-full",clickableClass:"polygon-swiper-pagination-clickable",currentClass:"polygon-swiper-pagination-current",hiddenClass:"polygon-swiper-pagination-hidden",horizontalClass:"polygon-swiper-pagination-horizontal",lockClass:"polygon-swiper-pagination-lock",modifierClass:"polygon-swiper-pagination-",paginationDisabledClass:"polygon-swiper-pagination-disabled",progressbarFillClass:"polygon-swiper-pagination-progressbar-fill",progressbarOppositeClass:"polygon-swiper-pagination-progressbar-opposite",totalClass:"polygon-swiper-pagination-total",verticalClass:"polygon-swiper-pagination-vertical"},on:{init(){t.nextTick(()=>mn(o,"init"),0)}}},d=s(i);Object.keys(d).forEach(t=>{const e=c[t],i=d[t];c[t]="object"==typeof e&&"object"==typeof i?{...e,...i}:i}),a._swiper=new gn.e(o,c),a._swiper.onAny((t,e,...i)=>{mn(o,t,i)}),n(()=>{a._swiper&&(a._swiper.destroy(),delete a._swiper)})})}function bn(t){const e={};t.directive("unique",(t,{expression:i})=>{i&&(e[i]=e[i]+1||1,e[i]>1&&t.remove())})}window.polygon=window.polygon||{};const fn=new h({AdblockLayer:ui,AdobeLaunchSource:pi,BookmarksCardsSlider:Pi,BookmarkButton:_i,BookmarksList:Di,BookmarksShortList:zi,CustomConsent:Qi,ImageZoomLayer:is,JWPlayer:us,MoltenBundleSource:gs,Outbrain:ys,Search:bs,SourcePoint:ws,Talk:vs,TalkDrawer:Is,Video:Ns,VideoDataControlSource:Bs,Vouchers:Ds}),wn=()=>{window.polygon.componentLoader&&"function"==typeof window.polygon.componentLoader.destroy?window.polygon.componentLoader.destroy(fn):window.polygon.componentLoader=fn;const t={};t[l.i]=J,t[l.j]=at,t[l.k]=ot,t[l.l]=rt,t[l.m]=lt,t[l.o]=ct,t[l.n]=ht,t[l.p]=dt,t[l.q]=W,t[l.v]=Et,t[l.u]=Lt,t[l.z]=pe,t[l.M]=Mt,t[l.K]=At,t[l.J]=yt,t[l.O]=Rt,t[l.ab]=be,t[l.ib]=$,t[l.pb]=xe,Object.keys(t).forEach(e=>{c.a.subscribe(e,(...i)=>{const s=new t[e];"function"==typeof s.execute?s.execute(...i):console.error(`Controller "${s.constructor.name}" is missing an execute function.`)})}),window.Alpine=a.a,a.a.plugin(en),a.a.plugin(sn),a.a.plugin(nn),a.a.plugin(an.a),a.a.plugin(on),a.a.plugin(dn),a.a.plugin(un),a.a.plugin(pn),a.a.plugin(yn),a.a.plugin(bn),a.a.store("AffiliateConsent",Gi),a.a.store("Gift",vt),a.a.store("ThirdpartyConsent",Hi),a.a.store("MediaQuery",xt),a.a.store("StoryHistory",Rs),a.a.store("User",Ms),a.a.store("WebAudio",st),a.a.start();const e=Oe.instance;G.a.instance,Ut.instance,Zt.instance,gt.instance,ye.instance,De.instance,Wi.instance,R.instance,ue.instance,T.instance,Ot.instance,ei.instance;e.sendPageLoadEvent(),c.a.publish(l.i);te.instance;window.polygon.componentLoader.scan(),window.polygon.webAudio=new He};$t.then(()=>wn())}},[[25,1,0]]]);
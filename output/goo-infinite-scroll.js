!function(){if(window.jQuery){var e=window.jQuery;!function(t){"function"==typeof define&&define.amd?define(["$"],t):"object"==typeof exports?module.exports=t(require("$")):t(e)}(function(e){function t(){var t,n,i={height:s.innerHeight,width:s.innerWidth};return i.height||((t=c.compatMode)||!e.support.boxModel)&&(n="CSS1Compat"===t?l:c.body,i={height:n.clientHeight,width:n.clientWidth}),i}function n(){return{top:s.pageYOffset||l.scrollTop||c.body.scrollTop,left:s.pageXOffset||l.scrollLeft||c.body.scrollLeft}}function i(){if(d.length){var i=0,r=e.map(d,function(e){var t=e.data.selector,n=e.$element;return t?n.find(t):n});for(o=o||t(),a=a||n();i<d.length;i++)if(e.contains(l,r[i][0])){var c=e(r[i]),s={height:c[0].offsetHeight,width:c[0].offsetWidth},u=c.offset(),f=c.data("inview");if(!a||!o)return;u.top+s.height>a.top&&u.top<a.top+o.height&&u.left+s.width>a.left&&u.left<a.left+o.width?f||c.data("inview",!0).trigger("inview",[!0]):f&&c.data("inview",!1).trigger("inview",[!1])}}}var o,a,r,d=[],c=document,s=window,l=c.documentElement;e.event.special.inview={add:function(t){d.push({data:t,$element:e(this),element:this}),!r&&d.length&&(r=setInterval(i,250))},remove:function(e){for(var t=0;t<d.length;t++){var n=d[t];if(n.element===this&&n.data.guid===e.guid){d.splice(t,1);break}}d.length||(clearInterval(r),r=null)}},e(s).on("scroll resize scrollstop",function(){o=a=null}),!l.addEventListener&&l.attachEvent&&l.attachEvent("onfocusin",function(){a=null})})}}();var gooInfiniteScroll=function(e,t,n){this.userDevice=e||"unknown",this.host=t,this.limit=16,this.count=0,this.isUpdatable=!0,this.isError=!1,this.recommendData=[],this.exceptionData=this.changeFormat(n),this.index=0,this.pv_count=1,this.rec_count=1,this.feed_count=1,this.deferred,"pc"===this.userDevice?(this.rec_id_name="gooad-badge300_3_",this.feed_id_name="gooad-pcinfeed_",this.ga_count=32):(this.rec_id_name="gooad-spbadge300_",this.feed_id_name="gooad-spinfeed-recommend_",this.ga_count=16),this.feed_id=null,this.setRecommendData()};gooInfiniteScroll.prototype.setEvent=function(){var e=this;$("#recommend").one({inview:function(){$("#infscr-loading").show(),e.deferred.done(function(){$.each(e.getRecommendData(),function(t,n){e.appendRecommend(t,n)}),$("#infscr-loading").hide(),function(){var t=arguments;$(".is-recommend li").eq("-"+e.limit).one("inview",function(){$("#infscr-loading").show();var n=e.getRecommendData();if(n.length<e.limit)return $("#infscr-loading").hide(),e.isError=!0,!1;if(e.deferred.done(function(){$.each(n,function(t,n){e.appendRecommend(t,n)}),$("#infscr-loading").hide(),t.callee()}),!e.recommendData||e.recommendData.length<e.limit){if(!e.isUpdatable||e.isError)return!1;e.isUpdatable=!1,e.setRecommendData()}})}()})}}),$(window).on("load",function(){$("html,body").trigger("scroll")})},gooInfiniteScroll.prototype.appendRecommend=function(e,t){var n=this,i=this.userDevice;try{var o=t["ntr-pubday"]?t["ntr-pubday"]:"",a=t["ntr-source"]?t["ntr-source"]:"gooニュース",r=t.recommendType?t.recommendType:"",d=n.index+1,c=i+"news-mynews-"+d,s=getAddClassName(e),l=$("<li>").addClass(s),u=$("<img>",{class:"lazy","data-original":t["ntr-thumbnail"],alt:t.title}).lazyload({threshold:60,effect:"fadeIn",effectspeed:1e3,skip_invisible:!0}),f=$("<span>",{class:"module-list-thumb"}).append(u);if("pc"===n.userDevice)var m=$("<span>",{class:"module-caption-text"}).text(n.ellipsis(t.title,s)),p=$("<span>",{class:"module-caption-note"}).text(a+" "+o),h=$("<span>",{class:"module-list-text"}).append(m).append("<br />").append(p);else var m=$("<span>",{class:"title"}).text(n.ellipsis(t.title,s)),p=$("<span>").text(a+" "+o),h=$("<span>",{class:"module-list-text"}).append(m,p);var g=$("<a>",{id:c,"data-cid":c,href:t.url}),v=n.getPrInfo(e);return g.append(f).append(h),l.append(g),$("#recommend ul.is-recommend").append(l),v&&$("#recommend ul.is-recommend").append(v),n.feed_id&&window.gooad&&window.gooad.render(n.feed_id),n.index++,1===d&&dataLayer.push({event:"recommendLogic",recommendType:r}),d%n.ga_count==0&&(dataLayer.push({event:"addPV",addPVcategory:"topscroll",scrollcount:n.pv_count,contentcategory:"default"}),n.pv_count++),!0}catch(e){return $("#infscr-loading").remove(),!1}},gooInfiniteScroll.prototype.getRecommendData=function(){var e=this,t=e.recommendData,n=[];return Object.keys(t).length>=e.limit?(n=t.filter(function(t,n){return n<e.limit}),e.recommendData=t.slice(e.limit)):n=t,n},gooInfiniteScroll.prototype.setRecommendData=function(){var e=this;e.deferred=new $.Deferred,$.ajax({type:"GET",url:e.host,cache:!1,timeout:1e4,dataType:"json",xhrFields:{withCredentials:!0}}).success(function(t){e.addRecommendData(t),e.count++,e.isError=!0}).fail(function(){e.exceptionData&&e.addRecommendData(e.exceptionData),e.isError=!0}).always(function(){e.deferred.resolve()})},gooInfiniteScroll.prototype.changeFormat=function(e){var t=[];return $.each(e,function(e,n){t[e]={"ntr-thumbnail":n.image_sp,"ntr-source":n.ip_name,title:n.title,url:n.link,click_url:n.link}}),t},gooInfiniteScroll.prototype.ellipsis=function(e,t){var n=this,i=0;return i=t?"pc"===n.userDevice?25:18:"pc"===n.userDevice?39:29,e.length>i&&(e=e.slice(0,i)+"..."),e},gooInfiniteScroll.prototype.addRecommendData=function(e){e&&(this.recommendData&&this.recommendData.length>0?$.merge(this.recommendData,e):this.recommendData=e)};var getAddClassName=function(e){var t="";switch(e){case 0:case 12:t="sp"==this.userDevice?"is-card is-left":"is-large";break;case 1:case 13:t="sp"==this.userDevice?"is-card is-right":""}return t};gooInfiniteScroll.prototype.getPrInfo=function(e){if("undefined"!=typeof is_emergency&&"1"==is_emergency)return null;var t=this,n=$("<li>",{class:"is-ad"}),i=null;switch(t.feed_id=null,e){case 6:("pc"===t.userDevice||"sp"===t.userDevice&&1===t.feed_count)&&(i=$("<div>",{id:t.feed_id_name+t.feed_count}),t.feed_id=t.feed_id_name+t.feed_count,t.feed_count++);break;case 10:case 14:"pc"===t.userDevice&&(i=$("<div>",{id:t.feed_id_name+t.feed_count}),t.feed_id=t.feed_id_name+t.feed_count,t.feed_count++);break;case 3:1===t.rec_count&&(i=$("<div>",{id:t.rec_id_name+t.rec_count}),t.feed_id=t.rec_id_name+t.rec_count,t.rec_count++)}return i?n.append(i):null};var changeDateFormat=function(e){var t="";if(e&&!isNaN(e)&&8===String(e).length){t=e.substr(0,4)+"年"+e.substr(4,2)+"月"+e.substr(6,2)+"日"}else t=e;return t};
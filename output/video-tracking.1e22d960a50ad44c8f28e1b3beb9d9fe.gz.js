window["politicoVideoPlayer-v2"]=function(o){return o.players||(o.players=[]),o.init=function(r){var e,i=this;r.methods;window.videoIsAutoplay="true"===r.options()["data-is-autoplay"],r.status={autoforward:"true"===r.el_.getAttribute("data-is-autoforward"),complete:!1,created:!1,error:!1,livestream:!1,metaloaded:!1,playlist:void 0,ready:!1,started:!1,textTrack:void 0,time:{start:0,seconds:0,percent:0,duration:0}},r.status.autoforward&&(e=r.el_.getAttribute("data-video-id"),$.ajax({type:"GET",url:"/_playlist/1201016315",success:function(t){r.status.playlist=JSON.parse(t).result.filter(function(t){return t.id!==Number(e)})}})),r.ready(function(){i.methods.ready(this)}),r.on("loadedmetadata",function(t){i.methods.loadedmetadata(t);function s(){for(var t=[],e=r.textTracks(),s=0;s<e.length;s++){var a=e[s];"captions"===a.kind&&a.src&&t.push(a)}return t}r.status.textTrack=void 0;var a=r.el_.getAttribute("data-video-id");"true"!==r.el_.getAttribute("data-is-live")&&$.ajax({type:"GET",url:"/spring/fe-api-cached/v1/video/subtitles/?videoId="+a,dataType:"text",success:function(t){if(t){if(s().length)for(var e=0;e<s().length;e++)r.removeRemoteTextTrack(s()[e]);r.addRemoteTextTrack({kind:"captions",language:"en",label:"English",src:"/spring/fe-api-cached/v1/video/subtitles/?videoId="+a+"&text=true",mode:docCookies.getItem("showVideoTextTrackByDefault")||"disabled"},!0),r.status.textTrack=s()[0]}else s().length&&(s()[0].mode=docCookies.getItem("showVideoTextTrackByDefault")||"disabled",r.status.textTrack=s()[0]);r.status.textTrack&&r.status.textTrack.addEventListener("modechange",function(){var t=r.status.time.percent;t&&Math.ceil(t)<100&&docCookies.setItem("showVideoTextTrackByDefault",r.status.textTrack.mode)})}})}),r.on("play",function(t){var e=new CustomEvent("videoplayer-play",function(t){process(t.detail)});window.dispatchEvent(e),docCookies.getItem("showVideoTextTrackByDefault")&&r.status.textTrack&&(r.status.textTrack.mode=docCookies.getItem("showVideoTextTrackByDefault")),i.methods.play(t)}),r.on("playing",function(t){i.methods.playing(t),r.status.textTrack&&(r.status.textTrack.mode=docCookies.getItem("showVideoTextTrackByDefault")||"disabled")}),r.on("timeupdate",function(t){i.methods.progress(t)}),r.on("ended",function(t){var e=new CustomEvent("videoplayer-ended",function(t){process(t.detail)});window.dispatchEvent(e),i.methods.complete(t)}),r.on("pause",function(t){t=new CustomEvent("videoplayer-pause",{detail:t.target});window.dispatchEvent(t)}),r.on("error",function(t){}),r.on("ads-allpods-completed",function(){("true"===r.options()["data-is-autoplay"]||r.paused())&&r.play()}),o.players.push(r)},o.methods={ready:function(t){var e=t.options();t.status.ready=!0,t.status.livestream="true"===e["data-is-live"],void 0!==t.methods.ready&&t.methods.ready()},loadedmetadata:function(t){var e=videojs(t.target),s=(e.options(),e.mediainfo),a=e.currentTime();e.meta={name:s.name,id:s.id,description:s.description||"",publishedDate:new Date(s.publishedAt),tags:s.tags},e.status.metaloaded=!0,e.status.time.start=e.status.livestream?a:0,e.status.time.seconds=e.status.time.start,e.status.time.percent=0,e.status.time.duration=e.status.livestream?1:e.duration(),void 0!==e.methods.loadedmetadata&&e.methods.loadedmetadata(t)},play:function(t){t=videojs(t.target);void 0!==t.methods.play&&t.methods.play()},checkInit:function(t){var e=videojs(t.target),s=e.currentTime()||0;e.status.metaloaded||o.methods.loadedmetadata(t),!e.status.created&&e.status.metaloaded&&this.create(e,s),e.status.created&&(!e.status.started&&(1<e.status.time.percent||e.status.livestream&&1<e.status.time.seconds)&&this.start(e,t),e.status.time.seconds=s-e.status.time.start,e.status.time.percent=e.status.livestream?0:e.status.time.seconds/e.status.time.duration*100)},playing:function(t){var e=videojs(t.target);this.checkInit(t),void 0!==e.methods.playing&&e.methods.playing()},progress:function(t){var e=videojs(t.target);e.currentTime();this.checkInit(t),e.status.created&&"undefined"!==e.methods.progress&&e.methods.progress(t)},complete:function(t){t=videojs(t.target);t.status.started=!1,!(t.status.time={start:0,seconds:0,percent:0,duration:0})===t.status.complete&&(t.status.complete=!0,"undefined"!==t.methods.complete)&&t.methods.complete()},create:function(t,e){t.status.created=!0,t.status.time.start=t.status.livestream?e:0,t.status.time.seconds=t.status.time.start,t.status.time.percent=0,t.status.time.duration=t.status.livestream?1:t.duration(),"undefined"!==t.methods.create&&t.methods.create()},start:function(t,e){t.status.started=!0,"undefined"!==t.methods.start&&t.methods.start(e)}},o.debug=function(t){if(t=t||1e3,!o.debugging)return"Debugging Disabled";for(var e=o.players,s=0;s<e.length;s++){var a=e[s];console.log(a.meta.id+" status:"),console.log(a.status),setTimeout(function(){o.debug()},t)}},o}(window["politicoVideoPlayer-v2"]||{}),function(r){for(var t=document.querySelectorAll('.video-player .vjs-tech[data-is-initted="false"], .video-player video[data-is-initted="false"]'),e=0;e<t.length;e++){var s=t[e],s=(s.setAttribute("data-is-initted","true"),s.getAttribute("id")),s=videojs(s),a=0;s.progress={progress25:!1,progress50:!1,progress75:!1,progressLive5:!1,progressLive10:!1,progressLive30:!1,progress30Interval:2},s.utilities={getTimeString:function(t){var e,s=(t=parseInt(t))%60;return((e=((t=(t-s)/60)-(t=t%60))/60)<10?"0":"")+e+":"+((t<10?"0":"")+t)+":"+((s<10?"0":"")+s)},playNextVideo:function(s){a===s.status.playlist.length&&(a=0),r.playlist_auto=!0,r.playlist_video_number=a,s.catalog.getVideo(String(s.status.playlist[a].id),function(t,e){s.catalog.load(e),s.play(),s.controls(!0),s.customEndscreenModal&&$(s.customEndscreenModal.el_).hide(),a++})},trackStartEvent:function(t){var e="",e=t.status.livestream?"live_stream_start":"video_viewed",s=[{key:"video_tags",value:t.meta.tags?t.meta.tags.join():""},{key:"video_desc",value:t.meta.description},{key:"video_duration",value:t.duration()},{key:"playlist_auto",value:!!r.playlist_auto},{key:"playlist_video_number",value:r.playlist_auto&&a?a+1:null}];t.utilities.trackEvent(e,s,t)},trackEvent:function(t,e,s){for(var a,r,e=e||[],i=s.status.livestream?"":s.meta.id+".  ",o=s.meta.name,d=s.status.livestream?"":" - ("+s.utilities.getTimeString(s.status.time.duration)+")",i=s.status.livestream?utag_data.video_info||o:i+o+d,n={event_type:t,page_type:utag.data.page_type||"",video_name:s.meta.name,video_position:Math.floor(s.status.time.seconds),video_info:i},u=0;u<e.length;u++)a=e[u].key,r=e[u].value,n[a]=r;utag.link(n)}},s.methods={loadedmetadata:function(e){var t=r["politicoVideoPlayer-v2"].players.filter(function(t){return t.el_==e.target})[0];if(!t)return!1;t.progress={progress25:!1,progress50:!1,progress75:!1,progressLive5:!1,progressLive10:!1,progressLive30:!1,progress30Interval:2}},ready:function(){},play:function(){},playing:function(){},progress:function(e){var t=r["politicoVideoPlayer-v2"].players.filter(function(t){return t.el_==e.target})[0];if(!t)return!1;var s="",a=!1;t.status.livestream?300<t.status.time.seconds&&!1===t.progress.progressLive5?(s="live_stream_progress_5",a=t.progress.progressLive5=!0):600<t.status.time.seconds&&!1===t.progress.progressLive10?(s="live_stream_progress_10",a=t.progress.progressLive10=!0):1800<t.status.time.seconds&&!1===t.progress.progressLive30&&(s="live_stream_progress_30",a=t.progress.progressLive30=!0):25<t.status.time.percent&&!1===t.progress.progress25?(s="video_progress_25",a=t.progress.progress25=!0):50<t.status.time.percent&&!1===t.progress.progress50?(s="video_progress_50",a=t.progress.progress50=!0):75<t.status.time.percent&&!1===t.progress.progress75&&(s="video_progress_75",a=t.progress.progress75=!0),a&&t.utilities.trackEvent(s,void 0,t)},complete:function(){},create:function(){},start:function(e){var t=r["politicoVideoPlayer-v2"].players.filter(function(t){return t.el_==e.target})[0];if(!t)return!1;t.utilities.trackStartEvent(t)}},s.on("ended",function(e){var t=r["politicoVideoPlayer-v2"].players.filter(function(t){return t.el_==e.target})[0];if(!t)return!1;t.utilities.trackEvent("video_complete",void 0,t),t.status.autoforward&&t.utilities.playNextVideo(t)}),r["politicoVideoPlayer-v2"].init(s)}}(window);